{"version":3,"file":"module.js","mappings":"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KAAO,WACZnB,KAAKoB,WAAWC,QAAU9F,SAASe,WAAa,mCACzCf,SAASgB,cAAgB,mCAC1BL,SAASiD,qBAAqB,QAAQ,GAAGC,YAAYY,OAK5D9D,SAASoF,mBAAmBD,QAAU9F,SAASe,WAAa,mCACxDf,SAASgB,cAAgB,mCAGvB6D,mBAEH7E,SAASsD,KAAK,aAActD,SAASgF,SAAW,wBAQlDL,iBAAqE,MAAlBqB,OAAOC,WAG7DjG,SAASuE,QAAQvE,SAASgF,SAAS,qBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,gCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,yBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,wBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,sBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,yBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,8BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,8BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,gCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,iCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,kCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,wBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,kCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,yBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,wBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,wBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,iCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,gCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,wBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,iCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,wBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,mCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,oCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,gCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,sCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,mCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,mCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,iEACnChF,SAASuE,QAAQvE,SAASgF,SAAS,yDACnChF,SAASuE,QAAQvE,SAASgF,SAAS,yDACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0DACnChF,SAASuE,QAAQvE,SAASgF,SAAS,oDACnChF,SAASuE,QAAQvE,SAASgF,SAAS,8DACnChF,SAASuE,QAAQvE,SAASgF,SAAS,oEACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0DACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2DACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uDACnChF,SAASuE,QAAQvE,SAASgF,SAAS,mDACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+CACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,8BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,4BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,8BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,yBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,8BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,iCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,kCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,sCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,iCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,mCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0CACnChF,SAASuE,QAAQvE,SAASgF,SAAS,sCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,sCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,kCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,gCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,uCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,mCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,gCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,kCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,oCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,kCACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,6BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,qBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,2BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,yBACnChF,SAASuE,QAAQvE,SAASgF,SAAS,0BACnChF,SAASuE,QAAQvE,SAASgF,SAAS,+BACnChF,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","sources":["webpack:///../node_modules/mxgraph/javascript/dist/build.js","webpack:///../node_modules/pako/index.js","webpack:///../node_modules/pako/lib/deflate.js","webpack:///../node_modules/pako/lib/inflate.js","webpack:///../node_modules/pako/lib/utils/common.js","webpack:///../node_modules/pako/lib/utils/strings.js","webpack:///../node_modules/pako/lib/zlib/adler32.js","webpack:///../node_modules/pako/lib/zlib/constants.js","webpack:///../node_modules/pako/lib/zlib/crc32.js","webpack:///../node_modules/pako/lib/zlib/deflate.js","webpack:///../node_modules/pako/lib/zlib/gzheader.js","webpack:///../node_modules/pako/lib/zlib/inffast.js","webpack:///../node_modules/pako/lib/zlib/inflate.js","webpack:///../node_modules/pako/lib/zlib/inftrees.js","webpack:///../node_modules/pako/lib/zlib/messages.js","webpack:///../node_modules/pako/lib/zlib/trees.js","webpack:///../node_modules/pako/lib/zlib/zstream.js","webpack:///./components/ErrorBoundary.tsx","webpack:///./components/FlowchartPanel.tsx","webpack:///./components/FlowchartRenderer.tsx","webpack:///./components/FlowchartTabs.tsx","webpack:///./components/FlowchartTooltip.tsx","webpack:///./components/InspectorOverlay.tsx","webpack:///./context/FlowchartContext.tsx","webpack:///./core/MetricProcessor.ts","webpack:///./core/RuleEvaluator.ts","webpack:///./core/StateComputer.ts","webpack:///./core/StateCycleApplier.ts","webpack:///./core/ThresholdEvaluator.ts","webpack:///./editors/EventMapEditor.tsx","webpack:///./editors/LinkMapEditor.tsx","webpack:///./editors/RangeMapEditor.tsx","webpack:///./editors/RuleEditor.tsx","webpack:///./editors/RulesEditor.tsx","webpack:///./editors/ShapeMapEditor.tsx","webpack:///./editors/TextMapEditor.tsx","webpack:///./editors/ThresholdEditor.tsx","webpack:///./editors/ValueMapEditor.tsx","webpack:///./graph/CellAnimator.ts","webpack:///./graph/FloorplanShapes.ts","webpack:///./graph/GraphDecoder.ts","webpack:///./graph/GraphInitializer.ts","webpack:///./graph/XCell.ts","webpack:///./graph/XGraph.ts","webpack:///./hooks/useClickHandler.ts","webpack:///./hooks/useFlowchartNavigation.ts","webpack:///./hooks/useGraph.ts","webpack:///./hooks/useRulesEngine.ts","webpack:///./hooks/useStateManager.ts","webpack:///./hooks/useTooltip.ts","webpack:///./hooks/useZoom.ts","webpack:///./types/constants.ts","webpack:///./types/options.ts","webpack:///./utils/compression.ts","webpack:///./utils/formatting.ts","webpack:///./utils/logging.ts","webpack:///./utils/migration.ts","webpack:///./utils/patterns.ts","webpack:///./utils/variables.ts","webpack:///./utils/xml.ts","webpack:///external amd \"@emotion/css\"","webpack:///external amd \"@grafana/data\"","webpack:///external amd \"@grafana/runtime\"","webpack:///external amd \"@grafana/ui\"","webpack:///external amd \"react\"","webpack:///external amd \"react-dom\"","webpack:///webpack/bootstrap","webpack:///./module.tsx"],"sourcesContent":["(function (root, factory) {\nif (typeof define === 'function' && define.amd) {\ndefine([], factory);\n} else if (typeof module === 'object' && module.exports) {\nmodule.exports = factory();\n} else {\nroot.mxgraph = factory();\n}\n}(this, function () {\nreturn function (opts) {\nfor (var name in opts) { this[name] = opts[name]; }\nvar __mxOutput = {};\n/**\n * Copyright (c) 2006-2017, JGraph Ltd\n * Copyright (c) 2006-2017, Gaudenz Alder\n */\nvar mxClient =\n{\n\t/**\n\t * Class: mxClient\n\t *\n\t * Bootstrapping mechanism for the mxGraph thin client. The production version\n\t * of this file contains all code required to run the mxGraph thin client, as\n\t * well as global constants to identify the browser and operating system in\n\t * use. You may have to load chrome://global/content/contentAreaUtils.js in\n\t * your page to disable certain security restrictions in Mozilla.\n\t * \n\t * Variable: VERSION\n\t *\n\t * Contains the current version of the mxGraph library. The strings that\n\t * communicate versions of mxGraph use the following format.\n\t * \n\t * versionMajor.versionMinor.buildNumber.revisionNumber\n\t * \n\t * Current version is 4.2.2.\n\t */\n\tVERSION: '4.2.2',\n\n\t/**\n\t * Variable: IS_IE\n\t *\n\t * True if the current browser is Internet Explorer 10 or below. Use <mxClient.IS_IE11>\n\t * to detect IE 11.\n\t */\n\tIS_IE: navigator.userAgent != null && navigator.userAgent.indexOf('MSIE') >= 0,\n\n\t/**\n\t * Variable: IS_IE6\n\t *\n\t * True if the current browser is Internet Explorer 6.x.\n\t */\n\tIS_IE6: navigator.userAgent != null && navigator.userAgent.indexOf('MSIE 6') >= 0,\n\n\t/**\n\t * Variable: IS_IE11\n\t *\n\t * True if the current browser is Internet Explorer 11.x.\n\t */\n\tIS_IE11: navigator.userAgent != null && !!navigator.userAgent.match(/Trident\\/7\\./),\n\n\t/**\n\t * Variable: IS_EDGE\n\t *\n\t * True if the current browser is Microsoft Edge.\n\t */\n\tIS_EDGE: navigator.userAgent != null && !!navigator.userAgent.match(/Edge\\//),\n\n\t/**\n\t * Variable: IS_QUIRKS\n\t *\n\t * True if the current browser is Internet Explorer and it is in quirks mode.\n\t */\n\tIS_QUIRKS: navigator.userAgent != null && navigator.userAgent.indexOf('MSIE') >= 0 &&\n\t\t(document.documentMode == null || document.documentMode == 5),\n\n\t/**\n\t * Variable: IS_EM\n\t * \n\t * True if the browser is IE11 in enterprise mode (IE8 standards mode).\n\t */\n\tIS_EM: 'spellcheck' in document.createElement('textarea') && document.documentMode == 8,\n\n\t/**\n\t * Variable: VML_PREFIX\n\t * \n\t * Prefix for VML namespace in node names. Default is 'v'.\n\t */\n\tVML_PREFIX: 'v',\n\n\t/**\n\t * Variable: OFFICE_PREFIX\n\t * \n\t * Prefix for VML office namespace in node names. Default is 'o'.\n\t */\n\tOFFICE_PREFIX: 'o',\n\n\t/**\n\t * Variable: IS_NS\n\t *\n\t * True if the current browser is Netscape (including Firefox).\n\t */\n  \tIS_NS: navigator.userAgent != null &&\n  \t\tnavigator.userAgent.indexOf('Mozilla/') >= 0 &&\n  \t\tnavigator.userAgent.indexOf('MSIE') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Edge/') < 0,\n\n\t/**\n\t * Variable: IS_OP\n\t *\n\t * True if the current browser is Opera.\n\t */\n  \tIS_OP: navigator.userAgent != null &&\n  \t\t(navigator.userAgent.indexOf('Opera/') >= 0 ||\n  \t\tnavigator.userAgent.indexOf('OPR/') >= 0),\n\n\t/**\n\t * Variable: IS_OT\n\t *\n\t * True if -o-transform is available as a CSS style, ie for Opera browsers\n\t * based on a Presto engine with version 2.5 or later.\n\t */\n  \tIS_OT: navigator.userAgent != null &&\n  \t\tnavigator.userAgent.indexOf('Presto/') >= 0 &&\n  \t\tnavigator.userAgent.indexOf('Presto/2.4.') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Presto/2.3.') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Presto/2.2.') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Presto/2.1.') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Presto/2.0.') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Presto/1.') < 0,\n  \t\n\t/**\n\t * Variable: IS_SF\n\t *\n\t * True if the current browser is Safari.\n\t */\n  \tIS_SF: /Apple Computer, Inc/.test(navigator.vendor),\n\n\t/**\n\t * Variable: IS_ANDROID\n\t * \n\t * Returns true if the user agent contains Android.\n\t */\n  \tIS_ANDROID: navigator.appVersion.indexOf('Android') >= 0,\n\n\t/**\n\t * Variable: IS_IOS\n\t * \n\t * Returns true if the user agent is an iPad, iPhone or iPod.\n\t */\n  \tIS_IOS: (/iP(hone|od|ad)/.test(navigator.platform)),\n\n\t/**\n\t * Variable: IS_GC\n\t *\n\t * True if the current browser is Google Chrome.\n\t */\n  \tIS_GC: /Google Inc/.test(navigator.vendor),\n\t\n\t/**\n\t * Variable: IS_CHROMEAPP\n\t *\n\t * True if the this is running inside a Chrome App.\n\t */\n  \tIS_CHROMEAPP: window.chrome != null && chrome.app != null && chrome.app.runtime != null,\n\n\t/**\n\t * Variable: IS_FF\n\t *\n\t * True if the current browser is Firefox.\n\t */\n  \tIS_FF: typeof InstallTrigger !== 'undefined',\n  \t\n\t/**\n\t * Variable: IS_MT\n\t *\n\t * True if -moz-transform is available as a CSS style. This is the case\n\t * for all Firefox-based browsers newer than or equal 3, such as Camino,\n\t * Iceweasel, Seamonkey and Iceape.\n\t */\n  \tIS_MT: (navigator.userAgent.indexOf('Firefox/') >= 0 &&\n\t\tnavigator.userAgent.indexOf('Firefox/1.') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Firefox/2.') < 0) ||\n  \t\t(navigator.userAgent.indexOf('Iceweasel/') >= 0 &&\n  \t\tnavigator.userAgent.indexOf('Iceweasel/1.') < 0 &&\n  \t\tnavigator.userAgent.indexOf('Iceweasel/2.') < 0) ||\n  \t\t(navigator.userAgent.indexOf('SeaMonkey/') >= 0 &&\n  \t\tnavigator.userAgent.indexOf('SeaMonkey/1.') < 0) ||\n  \t\t(navigator.userAgent.indexOf('Iceape/') >= 0 &&\n  \t\tnavigator.userAgent.indexOf('Iceape/1.') < 0),\n\n\t/**\n\t * Variable: IS_VML\n\t *\n\t * True if the browser supports VML.\n\t */\n  \tIS_VML: navigator.appName.toUpperCase() == 'MICROSOFT INTERNET EXPLORER',\n\n\t/**\n\t * Variable: IS_SVG\n\t *\n\t * True if the browser supports SVG.\n\t */\n  \tIS_SVG: navigator.appName.toUpperCase() != 'MICROSOFT INTERNET EXPLORER',\n\n\t/**\n\t * Variable: NO_FO\n\t *\n\t * True if foreignObject support is not available. This is the case for\n\t * Opera, older SVG-based browsers and all versions of IE.\n\t */\n  \tNO_FO: !document.createElementNS || document.createElementNS('http://www.w3.org/2000/svg',\n  \t\t'foreignObject') != '[object SVGForeignObjectElement]' || navigator.userAgent.indexOf('Opera/') >= 0,\n\n\t/**\n\t * Variable: IS_WIN\n\t *\n\t * True if the client is a Windows.\n\t */\n  \tIS_WIN: navigator.appVersion.indexOf('Win') > 0,\n\n\t/**\n\t * Variable: IS_MAC\n\t *\n\t * True if the client is a Mac.\n\t */\n  \tIS_MAC: navigator.appVersion.indexOf('Mac') > 0,\n\t\n\t/**\n\t * Variable: IS_CHROMEOS\n\t *\n\t * True if the client is a Chrome OS.\n\t */\n  \tIS_CHROMEOS: /\\bCrOS\\b/.test(navigator.appVersion),\n\n\t/**\n\t * Variable: IS_TOUCH\n\t * \n\t * True if this device supports touchstart/-move/-end events (Apple iOS,\n\t * Android, Chromebook and Chrome Browser on touch-enabled devices).\n\t */\n  \tIS_TOUCH: 'ontouchstart' in document.documentElement,\n\n\t/**\n\t * Variable: IS_POINTER\n\t * \n\t * True if this device supports Microsoft pointer events (always false on Macs).\n\t */\n  \tIS_POINTER: window.PointerEvent != null && !(navigator.appVersion.indexOf('Mac') > 0),\n\n\t/**\n\t * Variable: IS_LOCAL\n\t *\n\t * True if the documents location does not start with http:// or https://.\n\t */\n  \tIS_LOCAL: document.location.href.indexOf('http://') < 0 &&\n  \t\t\t  document.location.href.indexOf('https://') < 0,\n\n\t/**\n\t * Variable: defaultBundles\n\t * \n\t * Contains the base names of the default bundles if mxLoadResources is false.\n\t */\n  \tdefaultBundles: [],\n\n\t/**\n\t * Function: isBrowserSupported\n\t *\n\t * Returns true if the current browser is supported, that is, if\n\t * <mxClient.IS_VML> or <mxClient.IS_SVG> is true.\n\t * \n\t * Example:\n\t * \n\t * (code)\n\t * if (!mxClient.isBrowserSupported())\n\t * {\n\t *   mxUtils.error('Browser is not supported!', 200, false);\n\t * }\n\t * (end)\n\t */\n\tisBrowserSupported: function()\n\t{\n\t\treturn mxClient.IS_VML || mxClient.IS_SVG;\n\t},\n\n\t/**\n\t * Function: link\n\t *\n\t * Adds a link node to the head of the document. Use this\n\t * to add a stylesheet to the page as follows:\n\t *\n\t * (code)\n\t * mxClient.link('stylesheet', filename);\n\t * (end)\n\t *\n\t * where filename is the (relative) URL of the stylesheet. The charset\n\t * is hardcoded to ISO-8859-1 and the type is text/css.\n\t * \n\t * Parameters:\n\t * \n\t * rel - String that represents the rel attribute of the link node.\n\t * href - String that represents the href attribute of the link node.\n\t * doc - Optional parent document of the link node.\n\t * id - unique id for the link element to check if it already exists\n\t */\n\tlink: function(rel, href, doc, id)\n\t{\n\t\tdoc = doc || document;\n\n\t\t// Workaround for Operation Aborted in IE6 if base tag is used in head\n\t\tif (mxClient.IS_IE6)\n\t\t{\n\t\t\tdoc.write('<link rel=\"' + rel + '\" href=\"' + href + '\" charset=\"UTF-8\" type=\"text/css\"/>');\n\t\t}\n\t\telse\n\t\t{\t\n\t\t\tvar link = doc.createElement('link');\n\t\t\t\n\t\t\tlink.setAttribute('rel', rel);\n\t\t\tlink.setAttribute('href', href);\n\t\t\tlink.setAttribute('charset', 'UTF-8');\n\t\t\tlink.setAttribute('type', 'text/css');\n\t\t\t\n\t\t\tif (id)\n\t\t\t{\n\t\t\t\tlink.setAttribute('id', id);\n\t\t\t}\n\t\t\t\n\t\t\tvar head = doc.getElementsByTagName('head')[0];\n\t   \t\thead.appendChild(link);\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: loadResources\n\t * \n\t * Helper method to load the default bundles if mxLoadResources is false.\n\t * \n\t * Parameters:\n\t * \n\t * fn - Function to call after all resources have been loaded.\n\t * lan - Optional string to pass to <mxResources.add>.\n\t */\n\tloadResources: function(fn, lan)\n\t{\n\t\tvar pending = mxClient.defaultBundles.length;\n\t\t\n\t\tfunction callback()\n\t\t{\n\t\t\tif (--pending == 0)\n\t\t\t{\n\t\t\t\tfn();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < mxClient.defaultBundles.length; i++)\n\t\t{\n\t\t\tmxResources.add(mxClient.defaultBundles[i], lan, callback);\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: include\n\t *\n\t * Dynamically adds a script node to the document header.\n\t * \n\t * In production environments, the includes are resolved in the mxClient.js\n\t * file to reduce the number of requests required for client startup. This\n\t * function should only be used in development environments, but not in\n\t * production systems.\n\t */\n\tinclude: function(src)\n\t{\n\t\tdocument.write('<script src=\"'+src+'\"></script>');\n\t}\n};\n\n/**\n * Variable: mxLoadResources\n * \n * Optional global config variable to toggle loading of the two resource files\n * in <mxGraph> and <mxEditor>. Default is true. NOTE: This is a global variable,\n * not a variable of mxClient. If this is false, you can use <mxClient.loadResources>\n * with its callback to load the default bundles asynchronously.\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tvar mxLoadResources = false;\n * </script>\n * <script type=\"text/javascript\" src=\"/path/to/core/directory/js/mxClient.js\"></script>\n * (end)\n */\nif (typeof(mxLoadResources) == 'undefined')\n{\n\tmxLoadResources = true;\n}\n\n/**\n * Variable: mxForceIncludes\n * \n * Optional global config variable to force loading the JavaScript files in\n * development mode. Default is undefined. NOTE: This is a global variable,\n * not a variable of mxClient.\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tvar mxLoadResources = true;\n * </script>\n * <script type=\"text/javascript\" src=\"/path/to/core/directory/js/mxClient.js\"></script>\n * (end)\n */\nif (typeof(mxForceIncludes) == 'undefined')\n{\n\tmxForceIncludes = false;\n}\n\n/**\n * Variable: mxResourceExtension\n * \n * Optional global config variable to specify the extension of resource files.\n * Default is true. NOTE: This is a global variable, not a variable of mxClient.\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tvar mxResourceExtension = '.txt';\n * </script>\n * <script type=\"text/javascript\" src=\"/path/to/core/directory/js/mxClient.js\"></script>\n * (end)\n */\nif (typeof(mxResourceExtension) == 'undefined')\n{\n\tmxResourceExtension = '.txt';\n}\n\n/**\n * Variable: mxLoadStylesheets\n * \n * Optional global config variable to toggle loading of the CSS files when\n * the library is initialized. Default is true. NOTE: This is a global variable,\n * not a variable of mxClient.\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tvar mxLoadStylesheets = false;\n * </script>\n * <script type=\"text/javascript\" src=\"/path/to/core/directory/js/mxClient.js\"></script>\n * (end)\n */\nif (typeof(mxLoadStylesheets) == 'undefined')\n{\n\tmxLoadStylesheets = true;\n}\n\n/**\n * Variable: basePath\n *\n * Basepath for all URLs in the core without trailing slash. Default is '.'.\n * Set mxBasePath prior to loading the mxClient library as follows to override\n * this setting:\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tmxBasePath = '/path/to/core/directory';\n * </script>\n * <script type=\"text/javascript\" src=\"/path/to/core/directory/js/mxClient.js\"></script>\n * (end)\n * \n * When using a relative path, the path is relative to the URL of the page that\n * contains the assignment. Trailing slashes are automatically removed.\n */\nif (typeof(mxBasePath) != 'undefined' && mxBasePath.length > 0)\n{\n\t// Adds a trailing slash if required\n\tif (mxBasePath.substring(mxBasePath.length - 1) == '/')\n\t{\n\t\tmxBasePath = mxBasePath.substring(0, mxBasePath.length - 1);\n\t}\n\n\tmxClient.basePath = mxBasePath;\n}\nelse\n{\n\tmxClient.basePath = '.';\n}\n\n/**\n * Variable: imageBasePath\n *\n * Basepath for all images URLs in the core without trailing slash. Default is\n * <mxClient.basePath> + '/images'. Set mxImageBasePath prior to loading the\n * mxClient library as follows to override this setting:\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tmxImageBasePath = '/path/to/image/directory';\n * </script>\n * <script type=\"text/javascript\" src=\"/path/to/core/directory/js/mxClient.js\"></script>\n * (end)\n * \n * When using a relative path, the path is relative to the URL of the page that\n * contains the assignment. Trailing slashes are automatically removed.\n */\nif (typeof(mxImageBasePath) != 'undefined' && mxImageBasePath.length > 0)\n{\n\t// Adds a trailing slash if required\n\tif (mxImageBasePath.substring(mxImageBasePath.length - 1) == '/')\n\t{\n\t\tmxImageBasePath = mxImageBasePath.substring(0, mxImageBasePath.length - 1);\n\t}\n\n\tmxClient.imageBasePath = mxImageBasePath;\n}\nelse\n{\n\tmxClient.imageBasePath = mxClient.basePath + '/images';\t\n}\n\n/**\n * Variable: language\n *\n * Defines the language of the client, eg. en for english, de for german etc.\n * The special value 'none' will disable all built-in internationalization and\n * resource loading. See <mxResources.getSpecialBundle> for handling identifiers\n * with and without a dash.\n * \n * Set mxLanguage prior to loading the mxClient library as follows to override\n * this setting:\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tmxLanguage = 'en';\n * </script>\n * <script type=\"text/javascript\" src=\"js/mxClient.js\"></script>\n * (end)\n * \n * If internationalization is disabled, then the following variables should be\n * overridden to reflect the current language of the system. These variables are\n * cleared when i18n is disabled.\n * <mxEditor.askZoomResource>, <mxEditor.lastSavedResource>,\n * <mxEditor.currentFileResource>, <mxEditor.propertiesResource>,\n * <mxEditor.tasksResource>, <mxEditor.helpResource>, <mxEditor.outlineResource>,\n * <mxElbowEdgeHandler.doubleClickOrientationResource>, <mxUtils.errorResource>,\n * <mxUtils.closeResource>, <mxGraphSelectionModel.doneResource>,\n * <mxGraphSelectionModel.updatingSelectionResource>, <mxGraphView.doneResource>,\n * <mxGraphView.updatingDocumentResource>, <mxCellRenderer.collapseExpandResource>,\n * <mxGraph.containsValidationErrorsResource> and\n * <mxGraph.alreadyConnectedResource>.\n */\nif (typeof(mxLanguage) != 'undefined' && mxLanguage != null)\n{\n\tmxClient.language = mxLanguage;\n}\nelse\n{\n\tmxClient.language = (mxClient.IS_IE) ? navigator.userLanguage : navigator.language;\n}\n\n/**\n * Variable: defaultLanguage\n * \n * Defines the default language which is used in the common resource files. Any\n * resources for this language will only load the common resource file, but not\n * the language-specific resource file. Default is 'en'.\n * \n * Set mxDefaultLanguage prior to loading the mxClient library as follows to override\n * this setting:\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tmxDefaultLanguage = 'de';\n * </script>\n * <script type=\"text/javascript\" src=\"js/mxClient.js\"></script>\n * (end)\n */\nif (typeof(mxDefaultLanguage) != 'undefined' && mxDefaultLanguage != null)\n{\n\tmxClient.defaultLanguage = mxDefaultLanguage;\n}\nelse\n{\n\tmxClient.defaultLanguage = 'en';\n}\n\n// Adds all required stylesheets and namespaces\nif (mxLoadStylesheets)\n{\n\tmxClient.link('stylesheet', mxClient.basePath + '/css/common.css');\n}\n\n/**\n * Variable: languages\n *\n * Defines the optional array of all supported language extensions. The default\n * language does not have to be part of this list. See\n * <mxResources.isLanguageSupported>.\n *\n * (code)\n * <script type=\"text/javascript\">\n * \t\tmxLanguages = ['de', 'it', 'fr'];\n * </script>\n * <script type=\"text/javascript\" src=\"js/mxClient.js\"></script>\n * (end)\n * \n * This is used to avoid unnecessary requests to language files, ie. if a 404\n * will be returned.\n */\nif (typeof(mxLanguages) != 'undefined' && mxLanguages != null)\n{\n\tmxClient.languages = mxLanguages;\n}\n\n// Adds required namespaces, stylesheets and memory handling for older IE browsers\nif (mxClient.IS_VML)\n{\n\tif (mxClient.IS_SVG)\n\t{\n\t\tmxClient.IS_VML = false;\n\t}\n\telse\n\t{\n\t\t// Enables support for IE8 standards mode. Note that this requires all attributes for VML\n\t\t// elements to be set using direct notation, ie. node.attr = value, not setAttribute.\n\t\tif (document.namespaces != null)\n\t\t{\n\t\t\tif (document.documentMode == 8)\n\t\t\t{\n\t\t\t\tdocument.namespaces.add(mxClient.VML_PREFIX, 'urn:schemas-microsoft-com:vml', '#default#VML');\n\t\t\t\tdocument.namespaces.add(mxClient.OFFICE_PREFIX, 'urn:schemas-microsoft-com:office:office', '#default#VML');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdocument.namespaces.add(mxClient.VML_PREFIX, 'urn:schemas-microsoft-com:vml');\n\t\t\t\tdocument.namespaces.add(mxClient.OFFICE_PREFIX, 'urn:schemas-microsoft-com:office:office');\n\t\t\t}\n\t\t}\n\n\t\t// Workaround for limited number of stylesheets in IE (does not work in standards mode)\n\t\tif (mxClient.IS_QUIRKS && document.styleSheets.length >= 30)\n\t\t{\n\t\t\t(function()\n\t\t\t{\n\t\t\t\tvar node = document.createElement('style');\n\t\t\t\tnode.type = 'text/css';\n\t\t\t\tnode.styleSheet.cssText = mxClient.VML_PREFIX + '\\\\:*{behavior:url(#default#VML)}' +\n\t\t        \tmxClient.OFFICE_PREFIX + '\\\\:*{behavior:url(#default#VML)}';\n\t\t        document.getElementsByTagName('head')[0].appendChild(node);\n\t\t\t})();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.createStyleSheet().cssText = mxClient.VML_PREFIX + '\\\\:*{behavior:url(#default#VML)}' +\n\t\t    \tmxClient.OFFICE_PREFIX + '\\\\:*{behavior:url(#default#VML)}';\n\t\t}\n\t    \n\t    if (mxLoadStylesheets)\n\t    {\n\t    \tmxClient.link('stylesheet', mxClient.basePath + '/css/explorer.css');\n\t    }\n\t}\n}\n\n// PREPROCESSOR-REMOVE-START\n// If script is loaded via CommonJS, do not write <script> tags to the page\n// for dependencies. These are already included in the build.\nif (mxForceIncludes || !(typeof module === 'object' && module.exports != null))\n{\n// PREPROCESSOR-REMOVE-END\n\tmxClient.include(mxClient.basePath+'/js/util/mxLog.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxObjectIdentity.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxDictionary.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxResources.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxPoint.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxRectangle.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxEffects.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxUtils.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxConstants.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxEventObject.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxMouseEvent.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxEventSource.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxEvent.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxXmlRequest.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxClipboard.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxWindow.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxForm.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxImage.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxDivResizer.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxDragSource.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxToolbar.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxUndoableEdit.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxUndoManager.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxUrlConverter.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxPanningManager.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxPopupMenu.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxAutoSaveManager.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxAnimation.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxMorphing.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxImageBundle.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxImageExport.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxAbstractCanvas2D.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxXmlCanvas2D.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxSvgCanvas2D.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxVmlCanvas2D.js');\n\tmxClient.include(mxClient.basePath+'/js/util/mxGuide.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxShape.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxStencil.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxStencilRegistry.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxMarker.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxActor.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxCloud.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxRectangleShape.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxEllipse.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxDoubleEllipse.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxRhombus.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxPolyline.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxArrow.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxArrowConnector.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxText.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxTriangle.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxHexagon.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxLine.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxImageShape.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxLabel.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxCylinder.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxConnector.js');\n\tmxClient.include(mxClient.basePath+'/js/shape/mxSwimlane.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxGraphLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxStackLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxPartitionLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxCompactTreeLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxRadialTreeLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxFastOrganicLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxCircleLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxParallelEdgeLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxCompositeLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/mxEdgeLabelLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/model/mxGraphAbstractHierarchyCell.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/model/mxGraphHierarchyNode.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/model/mxGraphHierarchyEdge.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/model/mxGraphHierarchyModel.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/model/mxSwimlaneModel.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/stage/mxHierarchicalLayoutStage.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/stage/mxMedianHybridCrossingReduction.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/stage/mxMinimumCycleRemover.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/stage/mxCoordinateAssignment.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/stage/mxSwimlaneOrdering.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/mxHierarchicalLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/layout/hierarchical/mxSwimlaneLayout.js');\n\tmxClient.include(mxClient.basePath+'/js/model/mxGraphModel.js');\n\tmxClient.include(mxClient.basePath+'/js/model/mxCell.js');\n\tmxClient.include(mxClient.basePath+'/js/model/mxGeometry.js');\n\tmxClient.include(mxClient.basePath+'/js/model/mxCellPath.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxPerimeter.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxPrintPreview.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxStylesheet.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxCellState.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxGraphSelectionModel.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxCellEditor.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxCellRenderer.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxEdgeStyle.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxStyleRegistry.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxGraphView.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxGraph.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxCellOverlay.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxOutline.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxMultiplicity.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxLayoutManager.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxSwimlaneManager.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxTemporaryCellStates.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxCellStatePreview.js');\n\tmxClient.include(mxClient.basePath+'/js/view/mxConnectionConstraint.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxGraphHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxPanningHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxPopupMenuHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxCellMarker.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxSelectionCellsHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxConnectionHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxConstraintHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxRubberband.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxHandle.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxVertexHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxEdgeHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxElbowEdgeHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxEdgeSegmentHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxKeyHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxTooltipHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxCellTracker.js');\n\tmxClient.include(mxClient.basePath+'/js/handler/mxCellHighlight.js');\n\tmxClient.include(mxClient.basePath+'/js/editor/mxDefaultKeyHandler.js');\n\tmxClient.include(mxClient.basePath+'/js/editor/mxDefaultPopupMenu.js');\n\tmxClient.include(mxClient.basePath+'/js/editor/mxDefaultToolbar.js');\n\tmxClient.include(mxClient.basePath+'/js/editor/mxEditor.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxCodecRegistry.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxObjectCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxCellCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxModelCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxRootChangeCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxChildChangeCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxTerminalChangeCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxGenericChangeCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxGraphCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxGraphViewCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxStylesheetCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxDefaultKeyHandlerCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxDefaultToolbarCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxDefaultPopupMenuCodec.js');\n\tmxClient.include(mxClient.basePath+'/js/io/mxEditorCodec.js');\n// PREPROCESSOR-REMOVE-START\n}\n// PREPROCESSOR-REMOVE-END\n\n__mxOutput.mxClient = typeof mxClient !== 'undefined' ? mxClient : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxLog =\n{\n\t/**\n\t * Class: mxLog\n\t * \n\t * A singleton class that implements a simple console.\n\t * \n\t * Variable: consoleName\n\t * \n\t * Specifies the name of the console window. Default is 'Console'.\n\t */\n\tconsoleName: 'Console',\n\t\n\t/**\n\t * Variable: TRACE\n\t * \n\t * Specified if the output for <enter> and <leave> should be visible in the\n\t * console. Default is false.\n\t */\n\tTRACE: false,\n\n\t/**\n\t * Variable: DEBUG\n\t * \n\t * Specifies if the output for <debug> should be visible in the console.\n\t * Default is true.\n\t */\n\tDEBUG: true,\n\n\t/**\n\t * Variable: WARN\n\t * \n\t * Specifies if the output for <warn> should be visible in the console.\n\t * Default is true.\n\t */\n\tWARN: true,\n\n\t/**\n\t * Variable: buffer\n\t * \n\t * Buffer for pre-initialized content.\n\t */\n\tbuffer: '',\n\t\n\t/**\n\t * Function: init\n\t *\n\t * Initializes the DOM node for the console. This requires document.body to\n\t * point to a non-null value. This is called from within <setVisible> if the\n\t * log has not yet been initialized.\n\t */\n\tinit: function()\n\t{\n\t\tif (mxLog.window == null && document.body != null)\n\t\t{\n\t\t\tvar title = mxLog.consoleName + ' - mxGraph ' + mxClient.VERSION;\n\n\t\t\t// Creates a table that maintains the layout\n\t\t\tvar table = document.createElement('table');\n\t\t\ttable.setAttribute('width', '100%');\n\t\t\ttable.setAttribute('height', '100%');\n\n\t\t\tvar tbody = document.createElement('tbody');\n\t\t\tvar tr = document.createElement('tr');\n\t\t\tvar td = document.createElement('td');\n\t\t\ttd.style.verticalAlign = 'top';\n\t\t\t\t\n\t\t\t// Adds the actual console as a textarea\n\t\t\tmxLog.textarea = document.createElement('textarea');\n\t\t\tmxLog.textarea.setAttribute('wrap', 'off');\n\t\t\tmxLog.textarea.setAttribute('readOnly', 'true');\n\t\t\tmxLog.textarea.style.height = '100%';\n\t\t\tmxLog.textarea.style.resize = 'none';\n\t\t\tmxLog.textarea.value = mxLog.buffer;\n\n\t\t\t// Workaround for wrong width in standards mode\n\t\t\tif (mxClient.IS_NS && document.compatMode != 'BackCompat')\n\t\t\t{\n\t\t\t\tmxLog.textarea.style.width = '99%';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmxLog.textarea.style.width = '100%';\n\t\t\t}\n\t\t\t\n\t\t\ttd.appendChild(mxLog.textarea);\n\t\t\ttr.appendChild(td);\n\t\t\ttbody.appendChild(tr);\n\n\t\t\t// Creates the container div\n\t\t\ttr = document.createElement('tr');\n\t\t\tmxLog.td = document.createElement('td');\n\t\t\tmxLog.td.style.verticalAlign = 'top';\n\t\t\tmxLog.td.setAttribute('height', '30px');\n\t\t\t\n\t\t\ttr.appendChild(mxLog.td);\n\t\t\ttbody.appendChild(tr);\n\t\t\ttable.appendChild(tbody);\n\n\t\t\t// Adds various debugging buttons\n\t\t\tmxLog.addButton('Info', function (evt)\n\t\t\t{\n\t\t\t\tmxLog.info();\n\t\t\t});\n\t\t\n\t\t\tmxLog.addButton('DOM', function (evt)\n\t\t\t{\n\t\t\t\tvar content = mxUtils.getInnerHtml(document.body);\n\t\t\t\tmxLog.debug(content);\n\t\t\t});\n\t\n\t\t\tmxLog.addButton('Trace', function (evt)\n\t\t\t{\n\t\t\t\tmxLog.TRACE = !mxLog.TRACE;\n\t\t\t\t\n\t\t\t\tif (mxLog.TRACE)\n\t\t\t\t{\n\t\t\t\t\tmxLog.debug('Tracing enabled');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmxLog.debug('Tracing disabled');\n\t\t\t\t}\n\t\t\t});\t\n\n\t\t\tmxLog.addButton('Copy', function (evt)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tmxUtils.copy(mxLog.textarea.value);\n\t\t\t\t}\n\t\t\t\tcatch (err)\n\t\t\t\t{\n\t\t\t\t\tmxUtils.alert(err);\n\t\t\t\t}\n\t\t\t});\t\t\t\n\n\t\t\tmxLog.addButton('Show', function (evt)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tmxUtils.popup(mxLog.textarea.value);\n\t\t\t\t}\n\t\t\t\tcatch (err)\n\t\t\t\t{\n\t\t\t\t\tmxUtils.alert(err);\n\t\t\t\t}\n\t\t\t});\t\n\t\t\t\n\t\t\tmxLog.addButton('Clear', function (evt)\n\t\t\t{\n\t\t\t\tmxLog.textarea.value = '';\n\t\t\t});\n\n\t\t\t// Cross-browser code to get window size\n\t\t\tvar h = 0;\n\t\t\tvar w = 0;\n\t\t\t\n\t\t\tif (typeof(window.innerWidth) === 'number')\n\t\t\t{\n\t\t\t\th = window.innerHeight;\n\t\t\t\tw = window.innerWidth;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\th = (document.documentElement.clientHeight || document.body.clientHeight);\n\t\t\t\tw = document.body.clientWidth;\n\t\t\t}\n\n\t\t\tmxLog.window = new mxWindow(title, table, Math.max(0, w - 320), Math.max(0, h - 210), 300, 160);\n\t\t\tmxLog.window.setMaximizable(true);\n\t\t\tmxLog.window.setScrollable(false);\n\t\t\tmxLog.window.setResizable(true);\n\t\t\tmxLog.window.setClosable(true);\n\t\t\tmxLog.window.destroyOnClose = false;\n\t\t\t\n\t\t\t// Workaround for ignored textarea height in various setups\n\t\t\tif (((mxClient.IS_NS || mxClient.IS_IE) && !mxClient.IS_GC &&\n\t\t\t\t!mxClient.IS_SF && document.compatMode != 'BackCompat') ||\n\t\t\t\tdocument.documentMode == 11)\n\t\t\t{\n\t\t\t\tvar elt = mxLog.window.getElement();\n\t\t\t\t\n\t\t\t\tvar resizeHandler = function(sender, evt)\n\t\t\t\t{\n\t\t\t\t\tmxLog.textarea.style.height = Math.max(0, elt.offsetHeight - 70) + 'px';\n\t\t\t\t}; \n\t\t\t\t\n\t\t\t\tmxLog.window.addListener(mxEvent.RESIZE_END, resizeHandler);\n\t\t\t\tmxLog.window.addListener(mxEvent.MAXIMIZE, resizeHandler);\n\t\t\t\tmxLog.window.addListener(mxEvent.NORMALIZE, resizeHandler);\n\n\t\t\t\tmxLog.textarea.style.height = '92px';\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: info\n\t * \n\t * Writes the current navigator information to the console.\n\t */\n\tinfo: function()\n\t{\n\t\tmxLog.writeln(mxUtils.toString(navigator));\n\t},\n\t\t\t\n\t/**\n\t * Function: addButton\n\t * \n\t * Adds a button to the console using the given label and function.\n\t */\n\taddButton: function(lab, funct)\n\t{\n\t\tvar button = document.createElement('button');\n\t\tmxUtils.write(button, lab);\n\t\tmxEvent.addListener(button, 'click', funct);\n\t\tmxLog.td.appendChild(button);\n\t},\n\t\t\t\t\n\t/**\n\t * Function: isVisible\n\t * \n\t * Returns true if the console is visible.\n\t */\n\tisVisible: function()\n\t{\n\t\tif (mxLog.window != null)\n\t\t{\n\t\t\treturn mxLog.window.isVisible();\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\n\t/**\n\t * Function: show\n\t * \n\t * Shows the console.\n\t */\n\tshow: function()\n\t{\n\t\tmxLog.setVisible(true);\n\t},\n\n\t/**\n\t * Function: setVisible\n\t * \n\t * Shows or hides the console.\n\t */\n\tsetVisible: function(visible)\n\t{\n\t\tif (mxLog.window == null)\n\t\t{\n\t\t\tmxLog.init();\n\t\t}\n\n\t\tif (mxLog.window != null)\n\t\t{\n\t\t\tmxLog.window.setVisible(visible);\n\t\t}\n\t},\n\n\t/**\n\t * Function: enter\n\t * \n\t * Writes the specified string to the console\n\t * if <TRACE> is true and returns the current \n\t * time in milliseconds.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * mxLog.show();\n\t * var t0 = mxLog.enter('Hello');\n\t * // Do something\n\t * mxLog.leave('World!', t0);\n\t * (end)\n\t */\n\tenter: function(string)\n\t{\n\t\tif (mxLog.TRACE)\n\t\t{\n\t\t\tmxLog.writeln('Entering '+string);\n\t\t\t\n\t\t\treturn new Date().getTime();\n\t\t}\n\t},\n\n\t/**\n\t * Function: leave\n\t * \n\t * Writes the specified string to the console\n\t * if <TRACE> is true and computes the difference\n\t * between the current time and t0 in milliseconds.\n\t * See <enter> for an example.\n\t */\n\tleave: function(string, t0)\n\t{\n\t\tif (mxLog.TRACE)\n\t\t{\n\t\t\tvar dt = (t0 != 0) ? ' ('+(new Date().getTime() - t0)+' ms)' : '';\n\t\t\tmxLog.writeln('Leaving '+string+dt);\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: debug\n\t * \n\t * Adds all arguments to the console if <DEBUG> is enabled.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * mxLog.show();\n\t * mxLog.debug('Hello, World!');\n\t * (end)\n\t */\n\tdebug: function()\n\t{\n\t\tif (mxLog.DEBUG)\n\t\t{\n\t\t\tmxLog.writeln.apply(this, arguments);\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: warn\n\t * \n\t * Adds all arguments to the console if <WARN> is enabled.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * mxLog.show();\n\t * mxLog.warn('Hello, World!');\n\t * (end)\n\t */\n\twarn: function()\n\t{\n\t\tif (mxLog.WARN)\n\t\t{\n\t\t\tmxLog.writeln.apply(this, arguments);\n\t\t}\n\t},\n\n\t/**\n\t * Function: write\n\t * \n\t * Adds the specified strings to the console.\n\t */\n\twrite: function()\n\t{\n\t\tvar string = '';\n\t\t\n\t\tfor (var i = 0; i < arguments.length; i++)\n\t\t{\n\t\t\tstring += arguments[i];\n\t\t\t\n\t\t\tif (i < arguments.length - 1)\n\t\t\t{\n\t\t\t\tstring += ' ';\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (mxLog.textarea != null)\n\t\t{\n\t\t\tmxLog.textarea.value = mxLog.textarea.value + string;\n\n\t\t\t// Workaround for no update in Presto 2.5.22 (Opera 10.5)\n\t\t\tif (navigator.userAgent != null &&\n\t\t\t\tnavigator.userAgent.indexOf('Presto/2.5') >= 0)\n\t\t\t{\n\t\t\t\tmxLog.textarea.style.visibility = 'hidden';\n\t\t\t\tmxLog.textarea.style.visibility = 'visible';\n\t\t\t}\n\t\t\t\n\t\t\tmxLog.textarea.scrollTop = mxLog.textarea.scrollHeight;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmxLog.buffer += string;\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: writeln\n\t * \n\t * Adds the specified strings to the console, appending a linefeed at the\n\t * end of each string.\n\t */\n\twriteln: function()\n\t{\n\t\tvar string = '';\n\t\t\n\t\tfor (var i = 0; i < arguments.length; i++)\n\t\t{\n\t\t\tstring += arguments[i];\n\t\t\t\n\t\t\tif (i < arguments.length - 1)\n\t\t\t{\n\t\t\t\tstring += ' ';\n\t\t\t}\n\t\t}\n\n\t\tmxLog.write(string + '\\n');\n\t}\n\t\n};\n\n__mxOutput.mxLog = typeof mxLog !== 'undefined' ? mxLog : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxObjectIdentity =\n{\n\t/**\n\t * Class: mxObjectIdentity\n\t * \n\t * Identity for JavaScript objects and functions. This is implemented using\n\t * a simple incrementing counter which is stored in each object under\n\t * <FIELD_NAME>.\n\t * \n\t * The identity for an object does not change during its lifecycle.\n\t * \n\t * Variable: FIELD_NAME\n\t * \n\t * Name of the field to be used to store the object ID. Default is\n\t * <code>mxObjectId</code>.\n\t */\n\tFIELD_NAME: 'mxObjectId',\n\n\t/**\n\t * Variable: counter\n\t * \n\t * Current counter.\n\t */\n\tcounter: 0,\n\n\t/**\n\t * Function: get\n\t * \n\t * Returns the ID for the given object or function or null if no object\n\t * is specified.\n\t */\n\tget: function(obj)\n\t{\n\t\tif (obj != null)\n\t\t{\n\t\t\tif (obj[mxObjectIdentity.FIELD_NAME] == null)\n\t\t\t{\n\t\t\t\tif (typeof obj === 'object')\n\t\t\t\t{\n\t\t\t\t\tvar ctor = mxUtils.getFunctionName(obj.constructor);\n\t\t\t\t\tobj[mxObjectIdentity.FIELD_NAME] = ctor + '#' + mxObjectIdentity.counter++;\n\t\t\t\t}\n\t\t\t\telse if (typeof obj === 'function')\n\t\t\t\t{\n\t\t\t\t\tobj[mxObjectIdentity.FIELD_NAME] = 'Function#' + mxObjectIdentity.counter++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn obj[mxObjectIdentity.FIELD_NAME];\n\t\t}\n\t\t\n\t\treturn null;\n\t},\n\n\t/**\n\t * Function: clear\n\t * \n\t * Deletes the ID from the given object or function.\n\t */\n\tclear: function(obj)\n\t{\n\t\tif (typeof(obj) === 'object' || typeof obj === 'function')\n\t\t{\n\t\t\tdelete obj[mxObjectIdentity.FIELD_NAME];\n\t\t}\n\t}\n\n};\n\n__mxOutput.mxObjectIdentity = typeof mxObjectIdentity !== 'undefined' ? mxObjectIdentity : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDictionary\n *\n * A wrapper class for an associative array with object keys. Note: This\n * implementation uses <mxObjectIdentitiy> to turn object keys into strings.\n * \n * Constructor: mxEventSource\n *\n * Constructs a new dictionary which allows object to be used as keys.\n */\nfunction mxDictionary()\n{\n\tthis.clear();\n};\n\n/**\n * Function: map\n *\n * Stores the (key, value) pairs in this dictionary.\n */\nmxDictionary.prototype.map = null;\n\n/**\n * Function: clear\n *\n * Clears the dictionary.\n */\nmxDictionary.prototype.clear = function()\n{\n\tthis.map = {};\n};\n\n/**\n * Function: get\n *\n * Returns the value for the given key.\n */\nmxDictionary.prototype.get = function(key)\n{\n\tvar id = mxObjectIdentity.get(key);\n\t\n\treturn this.map[id];\n};\n\n/**\n * Function: put\n *\n * Stores the value under the given key and returns the previous\n * value for that key.\n */\nmxDictionary.prototype.put = function(key, value)\n{\n\tvar id = mxObjectIdentity.get(key);\n\tvar previous = this.map[id];\n\tthis.map[id] = value;\n\t\n\treturn previous;\n};\n\n/**\n * Function: remove\n *\n * Removes the value for the given key and returns the value that\n * has been removed.\n */\nmxDictionary.prototype.remove = function(key)\n{\n\tvar id = mxObjectIdentity.get(key);\n\tvar previous = this.map[id];\n\tdelete this.map[id];\n\t\n\treturn previous;\n};\n\n/**\n * Function: getKeys\n *\n * Returns all keys as an array.\n */\nmxDictionary.prototype.getKeys = function()\n{\n\tvar result = [];\n\t\n\tfor (var key in this.map)\n\t{\n\t\tresult.push(key);\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getValues\n *\n * Returns all values as an array.\n */\nmxDictionary.prototype.getValues = function()\n{\n\tvar result = [];\n\t\n\tfor (var key in this.map)\n\t{\n\t\tresult.push(this.map[key]);\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: visit\n *\n * Visits all entries in the dictionary using the given function with the\n * following signature: function(key, value) where key is a string and\n * value is an object.\n * \n * Parameters:\n * \n * visitor - A function that takes the key and value as arguments.\n */\nmxDictionary.prototype.visit = function(visitor)\n{\n\tfor (var key in this.map)\n\t{\n\t\tvisitor(key, this.map[key]);\n\t}\n};\n\n__mxOutput.mxDictionary = typeof mxDictionary !== 'undefined' ? mxDictionary : undefined;\n\n/**\n * Copyright (c) 2006-2016, JGraph Ltd\n * Copyright (c) 2006-2016, Gaudenz Alder\n */\nvar mxResources =\n{\n\t/**\n\t * Class: mxResources\n\t * \n\t * Implements internationalization. You can provide any number of \n\t * resource files on the server using the following format for the \n\t * filename: name[-en].properties. The en stands for any lowercase \n\t * 2-character language shortcut (eg. de for german, fr for french).\n\t *\n\t * If the optional language extension is omitted, then the file is used as a \n\t * default resource which is loaded in all cases. If a properties file for a \n\t * specific language exists, then it is used to override the settings in the \n\t * default resource. All entries in the file are of the form key=value. The\n\t * values may then be accessed in code via <get>. Lines without \n\t * equal signs in the properties files are ignored.\n\t *\n\t * Resource files may either be added programmatically using\n\t * <add> or via a resource tag in the UI section of the \n\t * editor configuration file, eg:\n\t * \n\t * (code)\n\t * <mxEditor>\n\t *   <ui>\n\t *     <resource basename=\"examples/resources/mxWorkflow\"/>\n\t * (end)\n\t * \n\t * The above element will load examples/resources/mxWorkflow.properties as well\n\t * as the language specific file for the current language, if it exists.\n\t * \n\t * Values may contain placeholders of the form {1}...{n} where each placeholder\n\t * is replaced with the value of the corresponding array element in the params\n\t * argument passed to <mxResources.get>. The placeholder {1} maps to the first\n\t * element in the array (at index 0).\n\t * \n\t * See <mxClient.language> for more information on specifying the default\n\t * language or disabling all loading of resources.\n\t * \n\t * Lines that start with a # sign will be ignored.\n\t * \n\t * Special characters\n\t * \n\t * To use unicode characters, use the standard notation (eg. \\u8fd1) or %u as a\n\t * prefix (eg. %u20AC will display a Euro sign). For normal hex encoded strings,\n\t * use % as a prefix, eg. %F6 will display a \"o umlaut\" (&ouml;).\n\t * \n\t * See <resourcesEncoded> to disable this. If you disable this, make sure that\n\t * your files are UTF-8 encoded.\n\t * \n\t * Asynchronous loading\n\t * \n\t * By default, the core adds two resource files synchronously at load time.\n\t * To load these files asynchronously, set <mxLoadResources> to false\n\t * before loading mxClient.js and use <mxResources.loadResources> instead.\n\t * \n\t * Variable: resources\n\t * \n\t * Object that maps from keys to values.\n\t */\n\tresources: {},\n\n\t/**\n\t * Variable: extension\n\t * \n\t * Specifies the extension used for language files. Default is <mxResourceExtension>.\n\t */\n\textension: mxResourceExtension,\n\n\t/**\n\t * Variable: resourcesEncoded\n\t * \n\t * Specifies whether or not values in resource files are encoded with \\u or\n\t * percentage. Default is false.\n\t */\n\tresourcesEncoded: false,\n\n\t/**\n\t * Variable: loadDefaultBundle\n\t * \n\t * Specifies if the default file for a given basename should be loaded.\n\t * Default is true.\n\t */\n\tloadDefaultBundle: true,\n\n\t/**\n\t * Variable: loadDefaultBundle\n\t * \n\t * Specifies if the specific language file file for a given basename should\n\t * be loaded. Default is true.\n\t */\n\tloadSpecialBundle: true,\n\n\t/**\n\t * Function: isLanguageSupported\n\t * \n\t * Hook for subclassers to disable support for a given language. This\n\t * implementation returns true if lan is in <mxClient.languages>.\n\t * \n\t * Parameters:\n\t *\n\t * lan - The current language.\n\t */\n\tisLanguageSupported: function(lan)\n\t{\n\t\tif (mxClient.languages != null)\n\t\t{\n\t\t\treturn mxUtils.indexOf(mxClient.languages, lan) >= 0;\n\t\t}\n\t\t\n\t\treturn true;\n\t},\n\n\t/**\n\t * Function: getDefaultBundle\n\t * \n\t * Hook for subclassers to return the URL for the special bundle. This\n\t * implementation returns basename + <extension> or null if\n\t * <loadDefaultBundle> is false.\n\t * \n\t * Parameters:\n\t * \n\t * basename - The basename for which the file should be loaded.\n\t * lan - The current language.\n\t */\n\tgetDefaultBundle: function(basename, lan)\n\t{\n\t\tif (mxResources.loadDefaultBundle || !mxResources.isLanguageSupported(lan))\n\t\t{\n\t\t\treturn basename + mxResources.extension;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Function: getSpecialBundle\n\t * \n\t * Hook for subclassers to return the URL for the special bundle. This\n\t * implementation returns basename + '_' + lan + <extension> or null if\n\t * <loadSpecialBundle> is false or lan equals <mxClient.defaultLanguage>.\n\t * \n\t * If <mxResources.languages> is not null and <mxClient.language> contains\n\t * a dash, then this method checks if <isLanguageSupported> returns true\n\t * for the full language (including the dash). If that returns false the\n\t * first part of the language (up to the dash) will be tried as an extension.\n\t * \n\t * If <mxResources.language> is null then the first part of the language is\n\t * used to maintain backwards compatibility.\n\t * \n\t * Parameters:\n\t * \n\t * basename - The basename for which the file should be loaded.\n\t * lan - The language for which the file should be loaded.\n\t */\n\tgetSpecialBundle: function(basename, lan)\n\t{\n\t\tif (mxClient.languages == null || !this.isLanguageSupported(lan))\n\t\t{\n\t\t\tvar dash = lan.indexOf('-');\n\t\t\t\n\t\t\tif (dash > 0)\n\t\t\t{\n\t\t\t\tlan = lan.substring(0, dash);\n\t\t\t}\n\t\t}\n\n\t\tif (mxResources.loadSpecialBundle && mxResources.isLanguageSupported(lan) && lan != mxClient.defaultLanguage)\n\t\t{\n\t\t\treturn basename + '_' + lan + mxResources.extension;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t * Function: add\n\t * \n\t * Adds the default and current language properties file for the specified\n\t * basename. Existing keys are overridden as new files are added. If no\n\t * callback is used then the request is synchronous.\n\t *\n\t * Example:\n\t * \n\t * At application startup, additional resources may be \n\t * added using the following code:\n\t * \n\t * (code)\n\t * mxResources.add('resources/editor');\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * basename - The basename for which the file should be loaded.\n\t * lan - The language for which the file should be loaded.\n\t * callback - Optional callback for asynchronous loading.\n\t */\n\tadd: function(basename, lan, callback)\n\t{\n\t\tlan = (lan != null) ? lan : ((mxClient.language != null) ?\n\t\t\tmxClient.language.toLowerCase() : mxConstants.NONE);\n\t\t\n\t\tif (lan != mxConstants.NONE)\n\t\t{\n\t\t\tvar defaultBundle = mxResources.getDefaultBundle(basename, lan);\n\t\t\tvar specialBundle = mxResources.getSpecialBundle(basename, lan);\n\t\t\t\n\t\t\tvar loadSpecialBundle = function()\n\t\t\t{\n\t\t\t\tif (specialBundle != null)\n\t\t\t\t{\n\t\t\t\t\tif (callback)\n\t\t\t\t\t{\n\t\t\t\t\t\tmxUtils.get(specialBundle, function(req)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmxResources.parse(req.getText());\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}, function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t   \t\tvar req = mxUtils.load(specialBundle);\n\t\t\t\t\t   \t\t\n\t\t\t\t\t   \t\tif (req.isReady())\n\t\t\t\t\t   \t\t{\n\t\t\t\t\t \t   \t\tmxResources.parse(req.getText());\n\t\t\t\t\t   \t\t}\n\t\t\t\t   \t\t}\n\t\t\t\t   \t\tcatch (e)\n\t\t\t\t   \t\t{\n\t\t\t\t   \t\t\t// ignore\n\t\t\t\t\t   \t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (callback != null)\n\t\t\t\t{\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (defaultBundle != null)\n\t\t\t{\n\t\t\t\tif (callback)\n\t\t\t\t{\n\t\t\t\t\tmxUtils.get(defaultBundle, function(req)\n\t\t\t\t\t{\n\t\t\t\t\t\tmxResources.parse(req.getText());\n\t\t\t\t\t\tloadSpecialBundle();\n\t\t\t\t\t}, function()\n\t\t\t\t\t{\n\t\t\t\t\t\tloadSpecialBundle();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t   \t\tvar req = mxUtils.load(defaultBundle);\n\t\t\t\t   \t\t\n\t\t\t\t   \t\tif (req.isReady())\n\t\t\t\t   \t\t{\n\t\t\t\t \t   \t\tmxResources.parse(req.getText());\n\t\t\t\t   \t\t}\n\t\t\t\t   \t\t\n\t\t\t\t   \t\tloadSpecialBundle();\n\t\t\t\t  \t}\n\t\t\t\t  \tcatch (e)\n\t\t\t\t  \t{\n\t\t\t\t  \t\t// ignore\n\t\t\t\t  \t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Overlays the language specific file (_lan-extension)\n\t\t\t\tloadSpecialBundle();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Function: parse\n\t * \n\t * Parses the key, value pairs in the specified\n\t * text and stores them as local resources.\n\t */\n\tparse: function(text)\n\t{\n\t\tif (text != null)\n\t\t{\n\t\t\tvar lines = text.split('\\n');\n\t\t\t\n\t\t\tfor (var i = 0; i < lines.length; i++)\n\t\t\t{\n\t\t\t\tif (lines[i].charAt(0) != '#')\n\t\t\t\t{\n\t\t\t\t\tvar index = lines[i].indexOf('=');\n\t\t\t\t\t\n\t\t\t\t\tif (index > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar key = lines[i].substring(0, index);\n\t\t\t\t\t\tvar idx = lines[i].length;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (lines[i].charCodeAt(idx - 1) == 13)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar value = lines[i].substring(index + 1, idx);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (this.resourcesEncoded)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue = value.replace(/\\\\(?=u[a-fA-F\\d]{4})/g,\"%\");\n\t\t\t\t\t\t\tmxResources.resources[key] = unescape(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmxResources.resources[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Function: get\n\t * \n\t * Returns the value for the specified resource key.\n\t *\n\t * Example:\n\t * To read the value for 'welomeMessage', use the following:\n\t * (code)\n\t * var result = mxResources.get('welcomeMessage') || '';\n\t * (end)\n\t *\n\t * This would require an entry of the following form in\n\t * one of the English language resource files:\n\t * (code)\n\t * welcomeMessage=Welcome to mxGraph!\n\t * (end)\n\t * \n\t * The part behind the || is the string value to be used if the given\n\t * resource is not available.\n\t * \n\t * Parameters:\n\t * \n\t * key - String that represents the key of the resource to be returned.\n\t * params - Array of the values for the placeholders of the form {1}...{n}\n\t * to be replaced with in the resulting string.\n\t * defaultValue - Optional string that specifies the default return value.\n\t */\n\tget: function(key, params, defaultValue)\n\t{\n\t\tvar value = mxResources.resources[key];\n\t\t\n\t\t// Applies the default value if no resource was found\n\t\tif (value == null)\n\t\t{\n\t\t\tvalue = defaultValue;\n\t\t}\n\t\t\n\t\t// Replaces the placeholders with the values in the array\n\t\tif (value != null && params != null)\n\t\t{\n\t\t\tvalue = mxResources.replacePlaceholders(value, params);\n\t\t}\n\t\t\n\t\treturn value;\n\t},\n\n\t/**\n\t * Function: replacePlaceholders\n\t * \n\t * Replaces the given placeholders with the given parameters.\n\t * \n\t * Parameters:\n\t * \n\t * value - String that contains the placeholders.\n\t * params - Array of the values for the placeholders of the form {1}...{n}\n\t * to be replaced with in the resulting string.\n\t */\n\treplacePlaceholders: function(value, params)\n\t{\n\t\tvar result = [];\n\t\tvar index = null;\n\t\t\n\t\tfor (var i = 0; i < value.length; i++)\n\t\t{\n\t\t\tvar c = value.charAt(i);\n\n\t\t\tif (c == '{')\n\t\t\t{\n\t\t\t\tindex = '';\n\t\t\t}\n\t\t\telse if (index != null && \tc == '}')\n\t\t\t{\n\t\t\t\tindex = parseInt(index)-1;\n\t\t\t\t\n\t\t\t\tif (index >= 0 && index < params.length)\n\t\t\t\t{\n\t\t\t\t\tresult.push(params[index]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tindex = null;\n\t\t\t}\n\t\t\telse if (index != null)\n\t\t\t{\n\t\t\t\tindex += c;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.push(c);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result.join('');\n\t},\n\n\t/**\n\t * Function: loadResources\n\t * \n\t * Loads all required resources asynchronously. Use this to load the graph and\n\t * editor resources if <mxLoadResources> is false.\n\t * \n\t * Parameters:\n\t * \n\t * callback - Callback function for asynchronous loading.\n\t */\n\tloadResources: function(callback)\n\t{\n\t\tmxResources.add(mxClient.basePath+'/resources/editor', null, function()\n\t\t{\n\t\t\tmxResources.add(mxClient.basePath+'/resources/graph', null, callback);\n\t\t});\n\t}\n\n};\n\n__mxOutput.mxResources = typeof mxResources !== 'undefined' ? mxResources : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPoint\n *\n * Implements a 2-dimensional vector with double precision coordinates.\n * \n * Constructor: mxPoint\n *\n * Constructs a new point for the optional x and y coordinates. If no\n * coordinates are given, then the default values for <x> and <y> are used.\n */\nfunction mxPoint(x, y)\n{\n\tthis.x = (x != null) ? x : 0;\n\tthis.y = (y != null) ? y : 0;\n};\n\n/**\n * Variable: x\n *\n * Holds the x-coordinate of the point. Default is 0.\n */\nmxPoint.prototype.x = null;\n\n/**\n * Variable: y\n *\n * Holds the y-coordinate of the point. Default is 0.\n */\nmxPoint.prototype.y = null;\n\n/**\n * Function: equals\n * \n * Returns true if the given object equals this point.\n */\nmxPoint.prototype.equals = function(obj)\n{\n\treturn obj != null && obj.x == this.x && obj.y == this.y;\n};\n\n/**\n * Function: clone\n *\n * Returns a clone of this <mxPoint>.\n */\nmxPoint.prototype.clone = function()\n{\n\t// Handles subclasses as well\n\treturn mxUtils.clone(this);\n};\n\n__mxOutput.mxPoint = typeof mxPoint !== 'undefined' ? mxPoint : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxRectangle\n *\n * Extends <mxPoint> to implement a 2-dimensional rectangle with double\n * precision coordinates.\n * \n * Constructor: mxRectangle\n *\n * Constructs a new rectangle for the optional parameters. If no parameters\n * are given then the respective default values are used.\n */\nfunction mxRectangle(x, y, width, height)\n{\n\tmxPoint.call(this, x, y);\n\n\tthis.width = (width != null) ? width : 0;\n\tthis.height = (height != null) ? height : 0;\n};\n\n/**\n * Extends mxPoint.\n */\nmxRectangle.prototype = new mxPoint();\nmxRectangle.prototype.constructor = mxRectangle;\n\n/**\n * Variable: width\n *\n * Holds the width of the rectangle. Default is 0.\n */\nmxRectangle.prototype.width = null;\n\n/**\n * Variable: height\n *\n * Holds the height of the rectangle. Default is 0.\n */\nmxRectangle.prototype.height = null;\n\n/**\n * Function: setRect\n * \n * Sets this rectangle to the specified values\n */\nmxRectangle.prototype.setRect = function(x, y, w, h)\n{\n    this.x = x;\n    this.y = y;\n    this.width = w;\n    this.height = h;\n};\n\n/**\n * Function: getCenterX\n * \n * Returns the x-coordinate of the center point.\n */\nmxRectangle.prototype.getCenterX = function ()\n{\n\treturn this.x + this.width/2;\n};\n\n/**\n * Function: getCenterY\n * \n * Returns the y-coordinate of the center point.\n */\nmxRectangle.prototype.getCenterY = function ()\n{\n\treturn this.y + this.height/2;\n};\n\n/**\n * Function: add\n *\n * Adds the given rectangle to this rectangle.\n */\nmxRectangle.prototype.add = function(rect)\n{\n\tif (rect != null)\n\t{\n\t\tvar minX = Math.min(this.x, rect.x);\n\t\tvar minY = Math.min(this.y, rect.y);\n\t\tvar maxX = Math.max(this.x + this.width, rect.x + rect.width);\n\t\tvar maxY = Math.max(this.y + this.height, rect.y + rect.height);\n\t\t\n\t\tthis.x = minX;\n\t\tthis.y = minY;\n\t\tthis.width = maxX - minX;\n\t\tthis.height = maxY - minY;\n\t}\n};\n\n/**\n * Function: intersect\n * \n * Changes this rectangle to where it overlaps with the given rectangle.\n */\nmxRectangle.prototype.intersect = function(rect)\n{\n\tif (rect != null)\n\t{\n\t\tvar r1 = this.x + this.width;\n\t\tvar r2 = rect.x + rect.width;\n\t\t\n\t\tvar b1 = this.y + this.height;\n\t\tvar b2 = rect.y + rect.height;\n\t\t\n\t\tthis.x = Math.max(this.x, rect.x);\n\t\tthis.y = Math.max(this.y, rect.y);\n\t\tthis.width = Math.min(r1, r2) - this.x;\n\t\tthis.height = Math.min(b1, b2) - this.y;\n\t}\n};\n\n/**\n * Function: grow\n *\n * Grows the rectangle by the given amount, that is, this method subtracts\n * the given amount from the x- and y-coordinates and adds twice the amount\n * to the width and height.\n */\nmxRectangle.prototype.grow = function(amount)\n{\n\tthis.x -= amount;\n\tthis.y -= amount;\n\tthis.width += 2 * amount;\n\tthis.height += 2 * amount;\n\t\n\treturn this;\n};\n\n/**\n * Function: getPoint\n * \n * Returns the top, left corner as a new <mxPoint>.\n */\nmxRectangle.prototype.getPoint = function()\n{\n\treturn new mxPoint(this.x, this.y);\n};\n\n/**\n * Function: rotate90\n * \n * Rotates this rectangle by 90 degree around its center point.\n */\nmxRectangle.prototype.rotate90 = function()\n{\n\tvar t = (this.width - this.height) / 2;\n\tthis.x += t;\n\tthis.y -= t;\n\tvar tmp = this.width;\n\tthis.width = this.height;\n\tthis.height = tmp;\n};\n\n/**\n * Function: equals\n * \n * Returns true if the given object equals this rectangle.\n */\nmxRectangle.prototype.equals = function(obj)\n{\n\treturn obj != null && obj.x == this.x && obj.y == this.y &&\n\t\tobj.width == this.width && obj.height == this.height;\n};\n\n/**\n * Function: fromRectangle\n * \n * Returns a new <mxRectangle> which is a copy of the given rectangle.\n */\nmxRectangle.fromRectangle = function(rect)\n{\n\treturn new mxRectangle(rect.x, rect.y, rect.width, rect.height);\n};\n\n__mxOutput.mxRectangle = typeof mxRectangle !== 'undefined' ? mxRectangle : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxEffects =\n{\n\n\t/**\n\t * Class: mxEffects\n\t * \n\t * Provides animation effects.\n\t */\n\n\t/**\n\t * Function: animateChanges\n\t * \n\t * Asynchronous animated move operation. See also: <mxMorphing>.\n\t * \n\t * Example:\n\t * \n\t * (code)\n\t * graph.model.addListener(mxEvent.CHANGE, function(sender, evt)\n\t * {\n\t *   var changes = evt.getProperty('edit').changes;\n\t * \n\t *   if (changes.length < 10)\n\t *   {\n\t *     mxEffects.animateChanges(graph, changes);\n\t *   }\n\t * });\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * graph - <mxGraph> that received the changes.\n\t * changes - Array of changes to be animated.\n\t * done - Optional function argument that is invoked after the\n\t * last step of the animation.\n\t */\n\tanimateChanges: function(graph, changes, done)\n\t{\n\t\tvar maxStep = 10;\n\t\tvar step = 0;\n\n\t\tvar animate = function() \n\t\t{\n\t\t\tvar isRequired = false;\n\t\t\t\n\t\t\tfor (var i = 0; i < changes.length; i++)\n\t\t\t{\n\t\t\t\tvar change = changes[i];\n\t\t\t\t\n\t\t\t\tif (change instanceof mxGeometryChange ||\n\t\t\t\t\tchange instanceof mxTerminalChange ||\n\t\t\t\t\tchange instanceof mxValueChange ||\n\t\t\t\t\tchange instanceof mxChildChange ||\n\t\t\t\t\tchange instanceof mxStyleChange)\n\t\t\t\t{\n\t\t\t\t\tvar state = graph.getView().getState(change.cell || change.child, false);\n\t\t\t\t\t\n\t\t\t\t\tif (state != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tisRequired = true;\n\t\t\t\t\t\n\t\t\t\t\t\tif (change.constructor != mxGeometryChange || graph.model.isEdge(change.cell))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmxUtils.setOpacity(state.shape.node, 100 * step / maxStep);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar scale = graph.getView().scale;\t\t\t\t\t\n\n\t\t\t\t\t\t\tvar dx = (change.geometry.x - change.previous.x) * scale;\n\t\t\t\t\t\t\tvar dy = (change.geometry.y - change.previous.y) * scale;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar sx = (change.geometry.width - change.previous.width) * scale;\n\t\t\t\t\t\t\tvar sy = (change.geometry.height - change.previous.height) * scale;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (step == 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.x -= dx;\n\t\t\t\t\t\t\t\tstate.y -= dy;\n\t\t\t\t\t\t\t\tstate.width -= sx;\n\t\t\t\t\t\t\t\tstate.height -= sy;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.x += dx / maxStep;\n\t\t\t\t\t\t\t\tstate.y += dy / maxStep;\n\t\t\t\t\t\t\t\tstate.width += sx / maxStep;\n\t\t\t\t\t\t\t\tstate.height += sy / maxStep;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tgraph.cellRenderer.redraw(state);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Fades all connected edges and children\n\t\t\t\t\t\t\tmxEffects.cascadeOpacity(graph, change.cell, 100 * step / maxStep);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (step < maxStep && isRequired)\n\t\t\t{\n\t\t\t\tstep++;\n\t\t\t\twindow.setTimeout(animate, delay);\n\t\t\t}\n\t\t\telse if (done != null)\n\t\t\t{\n\t\t\t\tdone();\n\t\t\t}\n\t\t};\n\t\t\n\t\tvar delay = 30;\n\t\tanimate();\n\t},\n    \n\t/**\n\t * Function: cascadeOpacity\n\t * \n\t * Sets the opacity on the given cell and its descendants.\n\t * \n\t * Parameters:\n\t * \n\t * graph - <mxGraph> that contains the cells.\n\t * cell - <mxCell> to set the opacity for.\n\t * opacity - New value for the opacity in %.\n\t */\n    cascadeOpacity: function(graph, cell, opacity)\n\t{\n\t\t// Fades all children\n\t\tvar childCount = graph.model.getChildCount(cell);\n\t\t\n\t\tfor (var i=0; i<childCount; i++)\n\t\t{\n\t\t\tvar child = graph.model.getChildAt(cell, i);\n\t\t\tvar childState = graph.getView().getState(child);\n\t\t\t\n\t\t\tif (childState != null)\n\t\t\t{\n\t\t\t\tmxUtils.setOpacity(childState.shape.node, opacity);\n\t\t\t\tmxEffects.cascadeOpacity(graph, child, opacity);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Fades all connected edges\n\t\tvar edges = graph.model.getEdges(cell);\n\t\t\n\t\tif (edges != null)\n\t\t{\n\t\t\tfor (var i=0; i<edges.length; i++)\n\t\t\t{\n\t\t\t\tvar edgeState = graph.getView().getState(edges[i]);\n\t\t\t\t\n\t\t\t\tif (edgeState != null)\n\t\t\t\t{\n\t\t\t\t\tmxUtils.setOpacity(edgeState.shape.node, opacity);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Function: fadeOut\n\t * \n\t * Asynchronous fade-out operation.\n\t */\n\tfadeOut: function(node, from, remove, step, delay, isEnabled)\n\t{\n\t\tstep = step || 40;\n\t\tdelay = delay || 30;\n\t\t\n\t\tvar opacity = from || 100;\n\t\t\n\t\tmxUtils.setOpacity(node, opacity);\n\t\t\n\t\tif (isEnabled || isEnabled == null)\n\t\t{\n\t\t\tvar f = function()\n\t\t\t{\n\t\t\t    opacity = Math.max(opacity-step, 0);\n\t\t\t\tmxUtils.setOpacity(node, opacity);\n\t\t\t\t\n\t\t\t\tif (opacity > 0)\n\t\t\t\t{\n\t\t\t\t\twindow.setTimeout(f, delay);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.style.visibility = 'hidden';\n\t\t\t\t\t\n\t\t\t\t\tif (remove && node.parentNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\twindow.setTimeout(f, delay);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.style.visibility = 'hidden';\n\t\t\t\n\t\t\tif (remove && node.parentNode)\n\t\t\t{\n\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t}\n\t\t}\n\t}\n\n};\n\n__mxOutput.mxEffects = typeof mxEffects !== 'undefined' ? mxEffects : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxUtils =\n{\n\t/**\n\t * Class: mxUtils\n\t * \n\t * A singleton class that provides cross-browser helper methods.\n\t * This is a global functionality. To access the functions in this\n\t * class, use the global classname appended by the functionname.\n\t * You may have to load chrome://global/content/contentAreaUtils.js\n\t * to disable certain security restrictions in Mozilla for the <open>,\n\t * <save>, <saveAs> and <copy> function.\n\t * \n\t * For example, the following code displays an error message:\n\t * \n\t * (code)\n\t * mxUtils.error('Browser is not supported!', 200, false);\n\t * (end)\n\t * \n\t * Variable: errorResource\n\t * \n\t * Specifies the resource key for the title of the error window. If the\n\t * resource for this key does not exist then the value is used as\n\t * the title. Default is 'error'.\n\t */\n\terrorResource: (mxClient.language != 'none') ? 'error' : '',\n\t\n\t/**\n\t * Variable: closeResource\n\t * \n\t * Specifies the resource key for the label of the close button. If the\n\t * resource for this key does not exist then the value is used as\n\t * the label. Default is 'close'.\n\t */\n\tcloseResource: (mxClient.language != 'none') ? 'close' : '',\n\n\t/**\n\t * Variable: errorImage\n\t * \n\t * Defines the image used for error dialogs.\n\t */\n\terrorImage: mxClient.imageBasePath + '/error.gif',\n\t\n\t/**\n\t * Function: removeCursors\n\t * \n\t * Removes the cursors from the style of the given DOM node and its\n\t * descendants.\n\t * \n\t * Parameters:\n\t * \n\t * element - DOM node to remove the cursor style from.\n\t */\n\tremoveCursors: function(element)\n\t{\n\t\tif (element.style != null)\n\t\t{\n\t\t\telement.style.cursor = '';\n\t\t}\n\t\t\n\t\tvar children = element.childNodes;\n\t\t\n\t\tif (children != null)\n\t\t{\n\t        var childCount = children.length;\n\t        \n\t        for (var i = 0; i < childCount; i += 1)\n\t        {\n\t            mxUtils.removeCursors(children[i]);\n\t        }\n\t    }\n\t},\n\n\t/**\n\t * Function: getCurrentStyle\n\t * \n\t * Returns the current style of the specified element.\n\t * \n\t * Parameters:\n\t * \n\t * element - DOM node whose current style should be returned.\n\t */\n\tgetCurrentStyle: function()\n\t{\n\t\tif (mxClient.IS_IE && (document.documentMode == null || document.documentMode < 9))\n\t\t{\n\t\t\treturn function(element)\n\t\t\t{\n\t\t\t\treturn (element != null) ? element.currentStyle : null;\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn function(element)\n\t\t\t{\n\t\t\t\treturn (element != null) ?\n\t\t\t\t\twindow.getComputedStyle(element, '') :\n\t\t\t\t\tnull;\n\t\t\t};\n\t\t}\n\t}(),\n\t\n\t/**\n\t * Function: parseCssNumber\n\t * \n\t * Parses the given CSS numeric value adding handling for the values thin,\n\t * medium and thick (2, 4 and 6).\n\t */\n\tparseCssNumber: function(value)\n\t{\n\t\tif (value == 'thin')\n\t\t{\n\t\t\tvalue = '2';\n\t\t}\n\t\telse if (value == 'medium')\n\t\t{\n\t\t\tvalue = '4';\n\t\t}\n\t\telse if (value == 'thick')\n\t\t{\n\t\t\tvalue = '6';\n\t\t}\n\t\t\n\t\tvalue = parseFloat(value);\n\t\t\n\t\tif (isNaN(value))\n\t\t{\n\t\t\tvalue = 0;\n\t\t}\n\t\t\n\t\treturn value;\n\t},\n\n\t/**\n\t * Function: setPrefixedStyle\n\t * \n\t * Adds the given style with the standard name and an optional vendor prefix for the current\n\t * browser.\n\t * \n\t * (code)\n\t * mxUtils.setPrefixedStyle(node.style, 'transformOrigin', '0% 0%');\n\t * (end)\n\t */\n\tsetPrefixedStyle: function()\n\t{\n\t\tvar prefix = null;\n\t\t\n\t\tif (mxClient.IS_OT)\n\t\t{\n\t\t\tprefix = 'O';\n\t\t}\n\t\telse if (mxClient.IS_SF || mxClient.IS_GC)\n\t\t{\n\t\t\tprefix = 'Webkit';\n\t\t}\n\t\telse if (mxClient.IS_MT)\n\t\t{\n\t\t\tprefix = 'Moz';\n\t\t}\n\t\telse if (mxClient.IS_IE && document.documentMode >= 9 && document.documentMode < 10)\n\t\t{\n\t\t\tprefix = 'ms';\n\t\t}\n\n\t\treturn function(style, name, value)\n\t\t{\n\t\t\tstyle[name] = value;\n\t\t\t\n\t\t\tif (prefix != null && name.length > 0)\n\t\t\t{\n\t\t\t\tname = prefix + name.substring(0, 1).toUpperCase() + name.substring(1);\n\t\t\t\tstyle[name] = value;\n\t\t\t}\n\t\t};\n\t}(),\n\t\n\t/**\n\t * Function: hasScrollbars\n\t * \n\t * Returns true if the overflow CSS property of the given node is either\n\t * scroll or auto.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node whose style should be checked for scrollbars.\n\t */\n\thasScrollbars: function(node)\n\t{\n\t\tvar style = mxUtils.getCurrentStyle(node);\n\n\t\treturn style != null && (style.overflow == 'scroll' || style.overflow == 'auto');\n\t},\n\t\n\t/**\n\t * Function: bind\n\t * \n\t * Returns a wrapper function that locks the execution scope of the given\n\t * function to the specified scope. Inside funct, the \"this\" keyword\n\t * becomes a reference to that scope.\n\t */\n\tbind: function(scope, funct)\n\t{\n\t\treturn function()\n\t\t{\n\t\t\treturn funct.apply(scope, arguments);\n\t\t};\n\t},\n\t\n\t/**\n\t * Function: eval\n\t * \n\t * Evaluates the given expression using eval and returns the JavaScript\n\t * object that represents the expression result. Supports evaluation of\n\t * expressions that define functions and returns the function object for\n\t * these expressions.\n\t * \n\t * Parameters:\n\t * \n\t * expr - A string that represents a JavaScript expression.\n\t */\n\teval: function(expr)\n\t{\n\t\tvar result = null;\n\n\t\tif (expr.indexOf('function') >= 0)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\teval('var _mxJavaScriptExpression='+expr);\n\t\t\t\tresult = _mxJavaScriptExpression;\n\t\t\t\t// TODO: Use delete here?\n\t\t\t\t_mxJavaScriptExpression = null;\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tmxLog.warn(e.message + ' while evaluating ' + expr);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tresult = eval(expr);\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tmxLog.warn(e.message + ' while evaluating ' + expr);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: findNode\n\t * \n\t * Returns the first node where attr equals value.\n\t * This implementation does not use XPath.\n\t */\n\tfindNode: function(node, attr, value)\n\t{\n\t\tif (node.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t{\n\t\t\tvar tmp = node.getAttribute(attr);\n\t\n\t\t\tif (tmp != null && tmp == value)\n\t\t\t{\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t\n\t\tnode = node.firstChild;\n\t\t\n\t\twhile (node != null)\n\t\t{\n\t\t\tvar result = mxUtils.findNode(node, attr, value);\n\t\t\t\n\t\t\tif (result != null)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tnode = node.nextSibling;\n\t\t}\n\t\t\n\t\treturn null;\n\t},\n\n\t/**\n\t * Function: getFunctionName\n\t * \n\t * Returns the name for the given function.\n\t * \n\t * Parameters:\n\t * \n\t * f - JavaScript object that represents a function.\n\t */\n\tgetFunctionName: function(f)\n\t{\n\t\tvar str = null;\n\n\t\tif (f != null)\n\t\t{\n\t\t\tif (f.name != null)\n\t\t\t{\n\t\t\t\tstr = f.name;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstr = mxUtils.trim(f.toString());\n\t\t\t\t\n\t\t\t\tif (/^function\\s/.test(str))\n\t\t\t\t{\n\t\t\t\t\tstr = mxUtils.ltrim(str.substring(9));\n\t\t\t\t\tvar idx2 = str.indexOf('(');\n\t\t\t\t\t\n\t\t\t\t\tif (idx2 > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tstr = str.substring(0, idx2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn str;\n\t},\n\n\t/**\n\t * Function: indexOf\n\t * \n\t * Returns the index of obj in array or -1 if the array does not contain\n\t * the given object.\n\t * \n\t * Parameters:\n\t * \n\t * array - Array to check for the given obj.\n\t * obj - Object to find in the given array.\n\t */\n\tindexOf: function(array, obj)\n\t{\n\t\tif (array != null && obj != null)\n\t\t{\n\t\t\tfor (var i = 0; i < array.length; i++)\n\t\t\t{\n\t\t\t\tif (array[i] == obj)\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn -1;\n\t},\n\n\t/**\n\t * Function: forEach\n\t * \n\t * Calls the given function for each element of the given array and returns\n\t * the array.\n\t * \n\t * Parameters:\n\t * \n\t * array - Array that contains the elements.\n\t * fn - Function to be called for each object.\n\t */\n\tforEach: function(array, fn)\n\t{\n\t\tif (array != null && fn != null)\n\t\t{\n\t\t\tfor (var i = 0; i < array.length; i++)\n\t\t\t{\n\t\t\t\tfn(array[i]);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn array;\n\t},\n\n\t/**\n\t * Function: remove\n\t * \n\t * Removes all occurrences of the given object in the given array or\n\t * object. If there are multiple occurrences of the object, be they\n\t * associative or as an array entry, all occurrences are removed from\n\t * the array or deleted from the object. By removing the object from\n\t * the array, all elements following the removed element are shifted\n\t * by one step towards the beginning of the array.\n\t * \n\t * The length of arrays is not modified inside this function.\n\t * \n\t * Parameters:\n\t * \n\t * obj - Object to find in the given array.\n\t * array - Array to check for the given obj.\n\t */\n\tremove: function(obj, array)\n\t{\n\t\tvar result = null;\n\t\t\n\t\tif (typeof(array) == 'object')\n\t\t{\n\t\t\tvar index = mxUtils.indexOf(array, obj);\n\t\t\t\n\t\t\twhile (index >= 0)\n\t\t\t{\n\t\t\t\tarray.splice(index, 1);\n\t\t\t\tresult = obj;\n\t\t\t\tindex = mxUtils.indexOf(array, obj);\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in array)\n\t\t{\n\t\t\tif (array[key] == obj)\n\t\t\t{\n\t\t\t\tdelete array[key];\n\t\t\t\tresult = obj;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: isNode\n\t * \n\t * Returns true if the given value is an XML node with the node name\n\t * and if the optional attribute has the specified value.\n\t * \n\t * This implementation assumes that the given value is a DOM node if the\n\t * nodeType property is numeric, that is, if isNaN returns false for\n\t * value.nodeType.\n\t * \n\t * Parameters:\n\t * \n\t * value - Object that should be examined as a node.\n\t * nodeName - String that specifies the node name.\n\t * attributeName - Optional attribute name to check.\n\t * attributeValue - Optional attribute value to check.\n\t */\n\t isNode: function(value, nodeName, attributeName, attributeValue)\n\t {\n\t \tif (value != null && !isNaN(value.nodeType) && (nodeName == null ||\n\t \t\tvalue.nodeName.toLowerCase() == nodeName.toLowerCase()))\n \t\t{\n \t\t\treturn attributeName == null ||\n \t\t\t\tvalue.getAttribute(attributeName) == attributeValue;\n \t\t}\n\t \t\n\t \treturn false;\n\t },\n\t\n\t/**\n\t * Function: isAncestorNode\n\t * \n\t * Returns true if the given ancestor is an ancestor of the\n\t * given DOM node in the DOM. This also returns true if the\n\t * child is the ancestor.\n\t * \n\t * Parameters:\n\t * \n\t * ancestor - DOM node that represents the ancestor.\n\t * child - DOM node that represents the child.\n\t */\n\t isAncestorNode: function(ancestor, child)\n\t {\n\t \tvar parent = child;\n\t \t\n\t \twhile (parent != null)\n\t \t{\n\t \t\tif (parent == ancestor)\n\t \t\t{\n\t \t\t\treturn true;\n\t \t\t}\n\n\t \t\tparent = parent.parentNode;\n\t \t}\n\t \t\n\t \treturn false;\n\t },\n\n\t/**\n\t * Function: getChildNodes\n\t * \n\t * Returns an array of child nodes that are of the given node type.\n\t * \n\t * Parameters:\n\t * \n\t * node - Parent DOM node to return the children from.\n\t * nodeType - Optional node type to return. Default is\n\t * <mxConstants.NODETYPE_ELEMENT>.\n\t */\n\tgetChildNodes: function(node, nodeType)\n\t{\n\t\tnodeType = nodeType || mxConstants.NODETYPE_ELEMENT;\n\t\t\n\t\tvar children = [];\n\t\tvar tmp = node.firstChild;\n\t\t\n\t\twhile (tmp != null)\n\t\t{\n\t\t\tif (tmp.nodeType == nodeType)\n\t\t\t{\n\t\t\t\tchildren.push(tmp);\n\t\t\t}\n\t\t\t\n\t\t\ttmp = tmp.nextSibling;\n\t\t}\n\t\t\n\t\treturn children;\n\t},\n\n\t/**\n\t * Function: importNode\n\t * \n\t * Cross browser implementation for document.importNode. Uses document.importNode\n\t * in all browsers but IE, where the node is cloned by creating a new node and\n\t * copying all attributes and children into it using importNode, recursively.\n\t * \n\t * Parameters:\n\t * \n\t * doc - Document to import the node into.\n\t * node - Node to be imported.\n\t * allChildren - If all children should be imported.\n\t */\n\timportNode: function(doc, node, allChildren)\n\t{\n\t\tif (mxClient.IS_IE && (document.documentMode == null || document.documentMode < 10))\n\t\t{\n\t\t\treturn mxUtils.importNodeImplementation(doc, node, allChildren);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn doc.importNode(node, allChildren);\n\t\t}\n\t},\n\n\t/**\n\t * Function: importNodeImplementation\n\t * \n\t * Full DOM API implementation for importNode without using importNode API call.\n\t * \n\t * Parameters:\n\t * \n\t * doc - Document to import the node into.\n\t * node - Node to be imported.\n\t * allChildren - If all children should be imported.\n\t */\n\timportNodeImplementation: function(doc, node, allChildren)\n\t{\n\t\tswitch (node.nodeType)\n\t\t{\n\t\t\tcase 1: /* element */\n\t\t\t{\n\t\t\t\tvar newNode = doc.createElement(node.nodeName);\n\t\t\t\t\n\t\t\t\tif (node.attributes && node.attributes.length > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < node.attributes.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewNode.setAttribute(node.attributes[i].nodeName,\n\t\t\t\t\t\t\tnode.getAttribute(node.attributes[i].nodeName));\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (allChildren && node.childNodes && node.childNodes.length > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewNode.appendChild(mxUtils.importNodeImplementation(doc, node.childNodes[i], allChildren));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn newNode;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 3: /* text */\n\t\t    case 4: /* cdata-section */\n\t\t    case 8: /* comment */\n\t\t    {\n\t\t    \treturn doc.createTextNode((node.nodeValue != null) ? node.nodeValue : node.value);\n\t\t    \tbreak;\n\t\t    }\n\t\t};\n\t},\n\n\t/**\n\t * Function: createXmlDocument\n\t * \n\t * Returns a new, empty XML document.\n\t */\n\tcreateXmlDocument: function()\n\t{\n\t\tvar doc = null;\n\t\t\n\t\tif (document.implementation && document.implementation.createDocument)\n\t\t{\n\t\t\tdoc = document.implementation.createDocument('', '', null);\n\t\t}\n\t\telse if (\"ActiveXObject\" in window)\n\t\t{\n\t\t\tdoc = mxUtils.createMsXmlDocument();\n\t \t}\n\t \t\n\t \treturn doc;\n\t},\n\n\t/**\n\t * Function: createMsXmlDocument\n\t * \n\t * Returns a new, empty Microsoft.XMLDOM document using ActiveXObject.\n\t */\n\tcreateMsXmlDocument: function()\n\t{\n\t\tvar doc = new ActiveXObject('Microsoft.XMLDOM');\n\t\tdoc.async = false;\n\n\t\t// Workaround for parsing errors with SVG DTD\n\t\tdoc.validateOnParse = false;\n\t\tdoc.resolveExternals = false;\n\t \t\n\t \treturn doc;\n\t},\n\n\t/**\n\t * Function: parseXml\n\t * \n\t * Parses the specified XML string into a new XML document and returns the\n\t * new document.\n\t * \n\t * Example:\n\t * \n\t * (code)\n\t * var doc = mxUtils.parseXml(\n\t *   '<mxGraphModel><root><MyDiagram id=\"0\"><mxCell/></MyDiagram>'+\n\t *   '<MyLayer id=\"1\"><mxCell parent=\"0\" /></MyLayer><MyObject id=\"2\">'+\n\t *   '<mxCell style=\"strokeColor=blue;fillColor=red\" parent=\"1\" vertex=\"1\">'+\n\t *   '<mxGeometry x=\"10\" y=\"10\" width=\"80\" height=\"30\" as=\"geometry\"/>'+\n\t *   '</mxCell></MyObject></root></mxGraphModel>');\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * xml - String that contains the XML data.\n\t */\n\tparseXml: function()\n\t{\n\t\tif (window.DOMParser)\n\t\t{\n\t\t\treturn function(xml)\n\t\t\t{\n\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\n\t\t\t\treturn parser.parseFromString(xml, 'text/xml');\n\t\t\t};\n\t\t}\n\t\telse // IE<=9\n\t\t{\n\t\t\treturn function(xml)\n\t\t\t{\n\t\t\t\tvar doc = mxUtils.createMsXmlDocument();\n\t\t\t\tdoc.loadXML(xml);\n\t\t\t\t\n\t\t\t\treturn doc;\n\t\t\t};\n\t\t}\n\t}(),\n\n\t/**\n\t * Function: clearSelection\n\t * \n\t * Clears the current selection in the page.\n\t */\n\tclearSelection: function()\n\t{\n\t\tif (document.selection)\n\t\t{\n\t\t\treturn function()\n\t\t\t{\n\t\t\t\tdocument.selection.empty();\n\t\t\t};\n\t\t}\n\t\telse if (window.getSelection)\n\t\t{\n\t\t\treturn function()\n\t\t\t{\n\t\t\t\tif (window.getSelection().empty)\n\t\t\t\t{\n\t\t\t\t\twindow.getSelection().empty();\n\t\t\t\t}\n\t\t\t\telse if (window.getSelection().removeAllRanges)\n\t\t\t\t{\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn function() { };\n\t\t}\n\t}(),\n\n\t/**\n\t * Function: removeWhitespace\n\t * \n\t * Removes the sibling text nodes for the given node that only consists\n\t * of tabs, newlines and spaces.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node whose siblings should be removed.\n\t * before - Optional boolean that specifies the direction of the traversal.\n\t */\n\tremoveWhitespace: function(node, before)\n\t{\n\t\tvar tmp = (before) ? node.previousSibling : node.nextSibling;\n\t\t\n\t\twhile (tmp != null && tmp.nodeType == mxConstants.NODETYPE_TEXT)\n\t\t{\n\t\t\tvar next = (before) ? tmp.previousSibling : tmp.nextSibling;\n\t\t\tvar text = mxUtils.getTextContent(tmp);\n\t\t\t\n\t\t\tif (mxUtils.trim(text).length == 0)\n\t\t\t{\n\t\t\t\ttmp.parentNode.removeChild(tmp);\n\t\t\t}\n\t\t\t\n\t\t\ttmp = next;\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: htmlEntities\n\t * \n\t * Replaces characters (less than, greater than, newlines and quotes) with\n\t * their HTML entities in the given string and returns the result.\n\t * \n\t * Parameters:\n\t * \n\t * s - String that contains the characters to be converted.\n\t * newline - If newlines should be replaced. Default is true.\n\t */\n\thtmlEntities: function(s, newline)\n\t{\n\t\ts = String(s || '');\n\t\t\n\t\ts = s.replace(/&/g,'&amp;'); // 38 26\n\t\ts = s.replace(/\"/g,'&quot;'); // 34 22\n\t\ts = s.replace(/\\'/g,'&#39;'); // 39 27\n\t\ts = s.replace(/</g,'&lt;'); // 60 3C\n\t\ts = s.replace(/>/g,'&gt;'); // 62 3E\n\n\t\tif (newline == null || newline)\n\t\t{\n\t\t\ts = s.replace(/\\n/g, '&#xa;');\n\t\t}\n\t\t\n\t\treturn s;\n\t},\n\t\n\t/**\n\t * Function: isVml\n\t * \n\t * Returns true if the given node is in the VML namespace.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node whose tag urn should be checked.\n\t */\n\tisVml: function(node)\n\t{\n\t\treturn node != null && node.tagUrn == 'urn:schemas-microsoft-com:vml';\n\t},\n\n\t/**\n\t * Function: getXml\n\t * \n\t * Returns the XML content of the specified node. For Internet Explorer,\n\t * all \\r\\n\\t[\\t]* are removed from the XML string and the remaining \\r\\n\n\t * are replaced by \\n. All \\n are then replaced with linefeed, or &#xa; if\n\t * no linefeed is defined.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node to return the XML for.\n\t * linefeed - Optional string that linefeeds are converted into. Default is\n\t * &#xa;\n\t */\n\tgetXml: function(node, linefeed)\n\t{\n\t\tvar xml = '';\n\t\t\n\t\tif (mxClient.IS_IE || mxClient.IS_IE11)\n\t\t{\n\t\t\txml = mxUtils.getPrettyXml(node, '', '', '');\n\t\t}\n\t\telse if (window.XMLSerializer != null)\n\t\t{\n\t\t\tvar xmlSerializer = new XMLSerializer();\n\t\t\txml = xmlSerializer.serializeToString(node);     \n\t\t}\n\t\telse if (node.xml != null)\n\t\t{\n\t\t\txml = node.xml.replace(/\\r\\n\\t[\\t]*/g, '').\n\t\t\t\treplace(/>\\r\\n/g, '>').\n\t\t\t\treplace(/\\r\\n/g, '\\n');\n\t\t}\n\n\t\t// Replaces linefeeds with HTML Entities.\n\t\tlinefeed = linefeed || '&#xa;';\n\t\txml = xml.replace(/\\n/g, linefeed);\n\t\t  \n\t\treturn xml;\n\t},\n\t\n\t/**\n\t * Function: getPrettyXML\n\t * \n\t * Returns a pretty printed string that represents the XML tree for the\n\t * given node. This method should only be used to print XML for reading,\n\t * use <getXml> instead to obtain a string for processing.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node to return the XML for.\n\t * tab - Optional string that specifies the indentation for one level.\n\t * Default is two spaces.\n\t * indent - Optional string that represents the current indentation.\n\t * Default is an empty string.\n\t * newline - Option string that represents a linefeed. Default is '\\n'.\n\t */\n\tgetPrettyXml: function(node, tab, indent, newline, ns)\n\t{\n\t\tvar result = [];\n\t\t\n\t\tif (node != null)\n\t\t{\n\t\t\ttab = (tab != null) ? tab : '  ';\n\t\t\tindent = (indent != null) ? indent : '';\n\t\t\tnewline = (newline != null) ? newline : '\\n';\n\t\t\t\n\t\t\tif (node.namespaceURI != null && node.namespaceURI != ns)\n\t\t\t{\n\t\t\t\tns = node.namespaceURI;\n\t\t\t\t\n\t\t\t\tif (node.getAttribute('xmlns') == null)\n\t\t\t\t{\n\t\t\t\t\tnode.setAttribute('xmlns', node.namespaceURI);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (node.nodeType == mxConstants.NODETYPE_DOCUMENT)\n\t\t\t{\n\t\t\t\tresult.push(mxUtils.getPrettyXml(node.documentElement, tab, indent, newline, ns));\n\t\t\t}\n\t\t\telse if (node.nodeType == mxConstants.NODETYPE_DOCUMENT_FRAGMENT)\n\t\t\t{\n\t\t\t\tvar tmp = node.firstChild;\n\t\t\t\t\n\t\t\t\tif (tmp != null)\n\t\t\t\t{\n\t\t\t\t\twhile (tmp != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(mxUtils.getPrettyXml(tmp, tab, indent, newline, ns));\n\t\t\t\t\t\ttmp = tmp.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (node.nodeType == mxConstants.NODETYPE_COMMENT)\n\t\t\t{\n\t\t\t\tvar value = mxUtils.getTextContent(node);\n\t\t\t\t\n\t\t\t\tif (value.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push(indent + '<!--' + value + '-->' + newline);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (node.nodeType == mxConstants.NODETYPE_TEXT)\n\t\t\t{\n\t\t\t\tvar value = mxUtils.trim(mxUtils.getTextContent(node));\n\t\t\t\t\n\t\t\t\tif (value.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push(indent + mxUtils.htmlEntities(value, false) + newline);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (node.nodeType == mxConstants.NODETYPE_CDATA)\n\t\t\t{\n\t\t\t\tvar value = mxUtils.getTextContent(node);\n\t\t\t\t\n\t\t\t\tif (value.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push(indent + '<![CDATA[' + value + ']]' + newline);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.push(indent + '<' + node.nodeName);\n\t\t\t\t\n\t\t\t\t// Creates the string with the node attributes\n\t\t\t\t// and converts all HTML entities in the values\n\t\t\t\tvar attrs = node.attributes;\n\t\t\t\t\n\t\t\t\tif (attrs != null)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < attrs.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar val = mxUtils.htmlEntities(attrs[i].value);\n\t\t\t\t\t\tresult.push(' ' + attrs[i].nodeName + '=\"' + val + '\"');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Recursively creates the XML string for each child\n\t\t\t\t// node and appends it here with an indentation\n\t\t\t\tvar tmp = node.firstChild;\n\t\t\t\t\n\t\t\t\tif (tmp != null)\n\t\t\t\t{\n\t\t\t\t\tresult.push('>' + newline);\n\t\t\t\t\t\n\t\t\t\t\twhile (tmp != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(mxUtils.getPrettyXml(tmp, tab, indent + tab, newline, ns));\n\t\t\t\t\t\ttmp = tmp.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresult.push(indent + '</'+ node.nodeName + '>' + newline);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.push(' />' + newline);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result.join('');\n\t},\n\t\n\t/**\n\t * Function: extractTextWithWhitespace\n\t * \n\t * Returns the text content of the specified node.\n\t * \n\t * Parameters:\n\t * \n\t * elems - DOM nodes to return the text for.\n\t */\n\textractTextWithWhitespace: function(elems)\n\t{\n\t    // Known block elements for handling linefeeds (list is not complete)\n\t\tvar blocks = ['BLOCKQUOTE', 'DIV', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'OL', 'P', 'PRE', 'TABLE', 'UL'];\n\t\tvar ret = [];\n\t\t\n\t\tfunction doExtract(elts)\n\t\t{\n\t\t\t// Single break should be ignored\n\t\t\tif (elts.length == 1 && (elts[0].nodeName == 'BR' ||\n\t\t\t\telts[0].innerHTML == '\\n'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t    for (var i = 0; i < elts.length; i++)\n\t\t    {\n\t\t        var elem = elts[i];\n\n\t\t\t\t// DIV with a br or linefeed forces a linefeed\n\t\t\t\tif (elem.nodeName == 'BR' || elem.innerHTML == '\\n' ||\n\t\t\t\t\t((elts.length == 1 || i == 0) && (elem.nodeName == 'DIV' &&\n\t\t\t\t\telem.innerHTML.toLowerCase() == '<br>')))\n\t\t    \t{\n\t    \t\t\tret.push('\\n');\n\t\t    \t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t        if (elem.nodeType === 3 || elem.nodeType === 4)\n\t\t\t        {\n\t\t\t        \tif (elem.nodeValue.length > 0)\n\t\t\t        \t{\n\t\t\t        \t\tret.push(elem.nodeValue);\n\t\t\t        \t}\n\t\t\t        }\n\t\t\t        else if (elem.nodeType !== 8 && elem.childNodes.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tdoExtract(elem.childNodes);\n\t\t\t\t\t}\n\t\t\t        \n\t        \t\tif (i < elts.length - 1 && mxUtils.indexOf(blocks, elts[i + 1].nodeName) >= 0)\n\t        \t\t{\n\t        \t\t\tret.push('\\n');\t\t\n\t        \t\t}\n\t\t\t\t}\n\t\t    }\n\t\t};\n\t\t\n\t\tdoExtract(elems);\n\t    \n\t    return ret.join('');\n\t},\n\n\t/**\n\t * Function: replaceTrailingNewlines\n\t * \n\t * Replaces each trailing newline with the given pattern.\n\t */\n\treplaceTrailingNewlines: function(str, pattern)\n\t{\n\t\t// LATER: Check is this can be done with a regular expression\n\t\tvar postfix = '';\n\t\t\n\t\twhile (str.length > 0 && str.charAt(str.length - 1) == '\\n')\n\t\t{\n\t\t\tstr = str.substring(0, str.length - 1);\n\t\t\tpostfix += pattern;\n\t\t}\n\t\t\n\t\treturn str + postfix;\n\t},\n\n\t/**\n\t * Function: getTextContent\n\t * \n\t * Returns the text content of the specified node.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node to return the text content for.\n\t */\n\tgetTextContent: function(node)\n\t{\n\t\t// Only IE10-\n\t\tif (mxClient.IS_IE && node.innerText !== undefined)\n\t\t{\n\t\t\treturn node.innerText;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn (node != null) ? node[(node.textContent === undefined) ? 'text' : 'textContent'] : '';\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: setTextContent\n\t * \n\t * Sets the text content of the specified node.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node to set the text content for.\n\t * text - String that represents the text content.\n\t */\n\tsetTextContent: function(node, text)\n\t{\n\t\tif (node.innerText !== undefined)\n\t\t{\n\t\t\tnode.innerText = text;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode[(node.textContent === undefined) ? 'text' : 'textContent'] = text;\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: getInnerHtml\n\t * \n\t * Returns the inner HTML for the given node as a string or an empty string\n\t * if no node was specified. The inner HTML is the text representing all\n\t * children of the node, but not the node itself.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node to return the inner HTML for.\n\t */\n\tgetInnerHtml: function()\n\t{\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\treturn function(node)\n\t\t\t{\n\t\t\t\tif (node != null)\n\t\t\t\t{\n\t\t\t\t\treturn node.innerHTML;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn '';\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn function(node)\n\t\t\t{\n\t\t\t\tif (node != null)\n\t\t\t\t{\n\t\t\t\t\tvar serializer = new XMLSerializer();\n\t\t\t\t\treturn serializer.serializeToString(node);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn '';\n\t\t\t};\n\t\t}\n\t}(),\n\n\t/**\n\t * Function: getOuterHtml\n\t * \n\t * Returns the outer HTML for the given node as a string or an empty\n\t * string if no node was specified. The outer HTML is the text representing\n\t * all children of the node including the node itself.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node to return the outer HTML for.\n\t */\n\tgetOuterHtml: function()\n\t{\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\treturn function(node)\n\t\t\t{\n\t\t\t\tif (node != null)\n\t\t\t\t{\n\t\t\t\t\tif (node.outerHTML != null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn node.outerHTML;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tmp = [];\n\t\t\t\t\t\ttmp.push('<'+node.nodeName);\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar attrs = node.attributes;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (attrs != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (var i = 0; i < attrs.length; i++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar value = attrs[i].value;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (value != null && value.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttmp.push(' ');\n\t\t\t\t\t\t\t\t\ttmp.push(attrs[i].nodeName);\n\t\t\t\t\t\t\t\t\ttmp.push('=\"');\n\t\t\t\t\t\t\t\t\ttmp.push(value);\n\t\t\t\t\t\t\t\t\ttmp.push('\"');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (node.innerHTML.length == 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttmp.push('/>');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttmp.push('>');\n\t\t\t\t\t\t\ttmp.push(node.innerHTML);\n\t\t\t\t\t\t\ttmp.push('</'+node.nodeName+'>');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn tmp.join('');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn '';\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn function(node)\n\t\t\t{\n\t\t\t\tif (node != null)\n\t\t\t\t{\n\t\t\t\t\tvar serializer = new XMLSerializer();\n\t\t\t\t\treturn serializer.serializeToString(node);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn '';\n\t\t\t};\n\t\t}\n\t}(),\n\t\n\t/**\n\t * Function: write\n\t * \n\t * Creates a text node for the given string and appends it to the given\n\t * parent. Returns the text node.\n\t * \n\t * Parameters:\n\t * \n\t * parent - DOM node to append the text node to.\n\t * text - String representing the text to be added.\n\t */\n\twrite: function(parent, text)\n\t{\n\t\tvar doc = parent.ownerDocument;\n\t\tvar node = doc.createTextNode(text);\n\t\t\n\t\tif (parent != null)\n\t\t{\n\t\t\tparent.appendChild(node);\n\t\t}\n\t\t\n\t\treturn node;\n\t},\n\t\n\t/**\n\t * Function: writeln\n\t * \n\t * Creates a text node for the given string and appends it to the given\n\t * parent with an additional linefeed. Returns the text node.\n\t * \n\t * Parameters:\n\t * \n\t * parent - DOM node to append the text node to.\n\t * text - String representing the text to be added.\n\t */\n\twriteln: function(parent, text)\n\t{\n\t\tvar doc = parent.ownerDocument;\n\t\tvar node = doc.createTextNode(text);\n\t\t\n\t\tif (parent != null)\n\t\t{\n\t\t\tparent.appendChild(node);\n\t\t\tparent.appendChild(document.createElement('br'));\n\t\t}\n\t\t\n\t\treturn node;\n\t},\n\t\n\t/**\n\t * Function: br\n\t * \n\t * Appends a linebreak to the given parent and returns the linebreak.\n\t * \n\t * Parameters:\n\t * \n\t * parent - DOM node to append the linebreak to.\n\t */\n\tbr: function(parent, count)\n\t{\n\t\tcount = count || 1;\n\t\tvar br = null;\n\t\t\n\t\tfor (var i = 0; i < count; i++)\n\t\t{\n\t\t\tif (parent != null)\n\t\t\t{\n\t\t\t\tbr = parent.ownerDocument.createElement('br');\n\t\t\t\tparent.appendChild(br);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn br;\n\t},\n\t\t\n\t/**\n\t * Function: button\n\t * \n\t * Returns a new button with the given level and function as an onclick\n\t * event handler.\n\t * \n\t * (code)\n\t * document.body.appendChild(mxUtils.button('Test', function(evt)\n\t * {\n\t *   alert('Hello, World!');\n\t * }));\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * label - String that represents the label of the button.\n\t * funct - Function to be called if the button is pressed.\n\t * doc - Optional document to be used for creating the button. Default is the\n\t * current document.\n\t */\n\tbutton: function(label, funct, doc)\n\t{\n\t\tdoc = (doc != null) ? doc : document;\n\t\t\n\t\tvar button = doc.createElement('button');\n\t\tmxUtils.write(button, label);\n\n\t\tmxEvent.addListener(button, 'click', function(evt)\n\t\t{\n\t\t\tfunct(evt);\n\t\t});\n\t\t\n\t\treturn button;\n\t},\n\t\n\t/**\n\t * Function: para\n\t * \n\t * Appends a new paragraph with the given text to the specified parent and\n\t * returns the paragraph.\n\t * \n\t * Parameters:\n\t * \n\t * parent - DOM node to append the text node to.\n\t * text - String representing the text for the new paragraph.\n\t */\n\tpara: function(parent, text)\n\t{\n\t\tvar p = document.createElement('p');\n\t\tmxUtils.write(p, text);\n\n\t\tif (parent != null)\n\t\t{\n\t\t\tparent.appendChild(p);\n\t\t}\n\t\t\n\t\treturn p;\n\t},\n\n\t/**\n\t * Function: addTransparentBackgroundFilter\n\t * \n\t * Adds a transparent background to the filter of the given node. This\n\t * background can be used in IE8 standards mode (native IE8 only) to pass\n\t * events through the node.\n\t */\n\taddTransparentBackgroundFilter: function(node)\n\t{\n\t\tnode.style.filter += 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\\'' +\n\t\t\tmxClient.imageBasePath + '/transparent.gif\\', sizingMethod=\\'scale\\')';\n\t},\n\n\t/**\n\t * Function: linkAction\n\t * \n\t * Adds a hyperlink to the specified parent that invokes action on the\n\t * specified editor.\n\t * \n\t * Parameters:\n\t * \n\t * parent - DOM node to contain the new link.\n\t * text - String that is used as the link label.\n\t * editor - <mxEditor> that will execute the action.\n\t * action - String that defines the name of the action to be executed.\n\t * pad - Optional left-padding for the link. Default is 0.\n\t */\n\tlinkAction: function(parent, text, editor, action, pad)\n\t{\n\t\treturn mxUtils.link(parent, text, function()\n\t\t{\n\t\t\teditor.execute(action);\n\t\t}, pad);\n\t},\n\n\t/**\n\t * Function: linkInvoke\n\t * \n\t * Adds a hyperlink to the specified parent that invokes the specified\n\t * function on the editor passing along the specified argument. The\n\t * function name is the name of a function of the editor instance,\n\t * not an action name.\n\t * \n\t * Parameters:\n\t * \n\t * parent - DOM node to contain the new link.\n\t * text - String that is used as the link label.\n\t * editor - <mxEditor> instance to execute the function on.\n\t * functName - String that represents the name of the function.\n\t * arg - Object that represents the argument to the function.\n\t * pad - Optional left-padding for the link. Default is 0.\n\t */\n\tlinkInvoke: function(parent, text, editor, functName, arg, pad)\n\t{\n\t\treturn mxUtils.link(parent, text, function()\n\t\t{\n\t\t\teditor[functName](arg);\n\t\t}, pad);\n\t},\n\t\n\t/**\n\t * Function: link\n\t * \n\t * Adds a hyperlink to the specified parent and invokes the given function\n\t * when the link is clicked.\n\t * \n\t * Parameters:\n\t * \n\t * parent - DOM node to contain the new link.\n\t * text - String that is used as the link label.\n\t * funct - Function to execute when the link is clicked.\n\t * pad - Optional left-padding for the link. Default is 0.\n\t */\n\tlink: function(parent, text, funct, pad)\n\t{\n\t\tvar a = document.createElement('span');\n\t\t\n\t\ta.style.color = 'blue';\n\t\ta.style.textDecoration = 'underline';\n\t\ta.style.cursor = 'pointer';\n\t\t\n\t\tif (pad != null)\n\t\t{\n\t\t\ta.style.paddingLeft = pad+'px';\n\t\t}\n\t\t\n\t\tmxEvent.addListener(a, 'click', funct);\n\t\tmxUtils.write(a, text);\n\t\t\n\t\tif (parent != null)\n\t\t{\n\t\t\tparent.appendChild(a);\n\t\t}\n\t\t\n\t\treturn a;\n\t},\n\n\t/**\n\t * Function: getDocumentSize\n\t * \n\t * Returns the client size for the current document as an <mxRectangle>.\n\t */\n\tgetDocumentSize: function()\n\t{\n\t\tvar b = document.body;\n\t\tvar d = document.documentElement;\n\t\t\n\t\ttry\n\t\t{\n\t\t\treturn new mxRectangle(0, 0, b.clientWidth || d.clientWidth, Math.max(b.clientHeight || 0, d.clientHeight));\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\treturn new mxRectangle();\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: fit\n\t * \n\t * Makes sure the given node is inside the visible area of the window. This\n\t * is done by setting the left and top in the style. \n\t */\n\tfit: function(node)\n\t{\n\t\tvar ds = mxUtils.getDocumentSize();\n\t\tvar left = parseInt(node.offsetLeft);\n\t\tvar width = parseInt(node.offsetWidth);\n\t\t\t\n\t\tvar offset = mxUtils.getDocumentScrollOrigin(node.ownerDocument);\n\t\tvar sl = offset.x;\n\t\tvar st = offset.y;\n\n\t\tvar b = document.body;\n\t\tvar d = document.documentElement;\n\t\tvar right = (sl) + ds.width;\n\t\t\n\t\tif (left + width > right)\n\t\t{\n\t\t\tnode.style.left = Math.max(sl, right - width) + 'px';\n\t\t}\n\t\t\n\t\tvar top = parseInt(node.offsetTop);\n\t\tvar height = parseInt(node.offsetHeight);\n\t\t\n\t\tvar bottom = st + ds.height;\n\t\t\n\t\tif (top + height > bottom)\n\t\t{\n\t\t\tnode.style.top = Math.max(st, bottom - height) + 'px';\n\t\t}\n\t},\n\n\t/**\n\t * Function: load\n\t * \n\t * Loads the specified URL *synchronously* and returns the <mxXmlRequest>.\n\t * Throws an exception if the file cannot be loaded. See <mxUtils.get> for\n\t * an asynchronous implementation.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * try\n\t * {\n\t *   var req = mxUtils.load(filename);\n\t *   var root = req.getDocumentElement();\n\t *   // Process XML DOM...\n\t * }\n\t * catch (ex)\n\t * {\n\t *   mxUtils.alert('Cannot load '+filename+': '+ex);\n\t * }\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * url - URL to get the data from.\n\t */\n\tload: function(url)\n\t{\n\t\tvar req = new mxXmlRequest(url, null, 'GET', false);\n\t\treq.send();\n\t\t\n\t\treturn req;\n\t},\n\n\t/**\n\t * Function: get\n\t * \n\t * Loads the specified URL *asynchronously* and invokes the given functions\n\t * depending on the request status. Returns the <mxXmlRequest> in use. Both\n\t * functions take the <mxXmlRequest> as the only parameter. See\n\t * <mxUtils.load> for a synchronous implementation.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * mxUtils.get(url, function(req)\n\t * {\n\t *    var node = req.getDocumentElement();\n\t *    // Process XML DOM...\n\t * });\n\t * (end)\n\t * \n\t * So for example, to load a diagram into an existing graph model, the\n\t * following code is used.\n\t * \n\t * (code)\n\t * mxUtils.get(url, function(req)\n\t * {\n\t *   var node = req.getDocumentElement();\n\t *   var dec = new mxCodec(node.ownerDocument);\n\t *   dec.decode(node, graph.getModel());\n\t * });\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * url - URL to get the data from.\n\t * onload - Optional function to execute for a successful response.\n\t * onerror - Optional function to execute on error.\n\t * binary - Optional boolean parameter that specifies if the request is\n\t * binary.\n\t * timeout - Optional timeout in ms before calling ontimeout.\n\t * ontimeout - Optional function to execute on timeout.\n\t * headers - Optional with headers, eg. {'Authorization': 'token xyz'}\n\t */\n\tget: function(url, onload, onerror, binary, timeout, ontimeout, headers)\n\t{\n\t\tvar req = new mxXmlRequest(url, null, 'GET');\n\t\tvar setRequestHeaders = req.setRequestHeaders;\n\t\t\n\t\tif (headers)\n\t\t{\n\t\t\treq.setRequestHeaders = function(request, params)\n\t\t\t{\n\t\t\t\tsetRequestHeaders.apply(this, arguments);\n\t\t\t\t\n\t\t\t\tfor (var key in headers)\n\t\t\t\t{\n\t\t\t\t\trequest.setRequestHeader(key, headers[key]);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n\t\tif (binary != null)\n\t\t{\n\t\t\treq.setBinary(binary);\n\t\t}\n\t\t\n\t\treq.send(onload, onerror, timeout, ontimeout);\n\t\t\n\t\treturn req;\n\t},\n\n\t/**\n\t * Function: getAll\n\t * \n\t * Loads the URLs in the given array *asynchronously* and invokes the given function\n\t * if all requests returned with a valid 2xx status. The error handler is invoked\n\t * once on the first error or invalid response.\n\t *\n\t * Parameters:\n\t * \n\t * urls - Array of URLs to be loaded.\n\t * onload - Callback with array of <mxXmlRequests>.\n\t * onerror - Optional function to execute on error.\n\t */\n\tgetAll: function(urls, onload, onerror)\n\t{\n\t\tvar remain = urls.length;\n\t\tvar result = [];\n\t\tvar errors = 0;\n\t\tvar err = function()\n\t\t{\n\t\t\tif (errors == 0 && onerror != null)\n\t\t\t{\n\t\t\t\tonerror();\n\t\t\t}\n\n\t\t\terrors++;\n\t\t};\n\t\t\n\t\tfor (var i = 0; i < urls.length; i++)\n\t\t{\n\t\t\t(function(url, index)\n\t\t\t{\n\t\t\t\tmxUtils.get(url, function(req)\n\t\t\t\t{\n\t\t\t\t\tvar status = req.getStatus();\n\t\t\t\t\t\n\t\t\t\t\tif (status < 200 || status > 299)\n\t\t\t\t\t{\n\t\t\t\t\t\terr();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[index] = req;\n\t\t\t\t\t\tremain--;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (remain == 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonload(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, err);\n\t\t\t})(urls[i], i);\n\t\t}\n\t\t\n\t\tif (remain == 0)\n\t\t{\n\t\t\tonload(result);\t\t\t\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: post\n\t * \n\t * Posts the specified params to the given URL *asynchronously* and invokes\n\t * the given functions depending on the request status. Returns the\n\t * <mxXmlRequest> in use. Both functions take the <mxXmlRequest> as the\n\t * only parameter. Make sure to use encodeURIComponent for the parameter\n\t * values.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * mxUtils.post(url, 'key=value', function(req)\n\t * {\n\t * \tmxUtils.alert('Ready: '+req.isReady()+' Status: '+req.getStatus());\n\t *  // Process req.getDocumentElement() using DOM API if OK...\n\t * });\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * url - URL to get the data from.\n\t * params - Parameters for the post request.\n\t * onload - Optional function to execute for a successful response.\n\t * onerror - Optional function to execute on error.\n\t */\n\tpost: function(url, params, onload, onerror)\n\t{\n\t\treturn new mxXmlRequest(url, params).send(onload, onerror);\n\t},\n\t\n\t/**\n\t * Function: submit\n\t * \n\t * Submits the given parameters to the specified URL using\n\t * <mxXmlRequest.simulate> and returns the <mxXmlRequest>.\n\t * Make sure to use encodeURIComponent for the parameter\n\t * values.\n\t * \n\t * Parameters:\n\t * \n\t * url - URL to get the data from.\n\t * params - Parameters for the form.\n\t * doc - Document to create the form in.\n\t * target - Target to send the form result to.\n\t */\n\tsubmit: function(url, params, doc, target)\n\t{\n\t\treturn new mxXmlRequest(url, params).simulate(doc, target);\n\t},\n\t\n\t/**\n\t * Function: loadInto\n\t * \n\t * Loads the specified URL *asynchronously* into the specified document,\n\t * invoking onload after the document has been loaded. This implementation\n\t * does not use <mxXmlRequest>, but the document.load method.\n\t * \n\t * Parameters:\n\t * \n\t * url - URL to get the data from.\n\t * doc - The document to load the URL into.\n\t * onload - Function to execute when the URL has been loaded.\n\t */\n\tloadInto: function(url, doc, onload)\n\t{\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\tdoc.onreadystatechange = function ()\n\t\t\t{\n\t\t\t\tif (doc.readyState == 4)\n\t\t\t\t{\n\t\t\t\t\tonload();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdoc.addEventListener('load', onload, false);\n\t\t}\n\t\t\n\t\tdoc.load(url);\n\t},\n\t\n\t/**\n\t * Function: getValue\n\t * \n\t * Returns the value for the given key in the given associative array or\n\t * the given default value if the value is null.\n\t * \n\t * Parameters:\n\t * \n\t * array - Associative array that contains the value for the key.\n\t * key - Key whose value should be returned.\n\t * defaultValue - Value to be returned if the value for the given\n\t * key is null.\n\t */\n\tgetValue: function(array, key, defaultValue)\n\t{\n\t\tvar value = (array != null) ? array[key] : null;\n\n\t\tif (value == null)\n\t\t{\n\t\t\tvalue = defaultValue;\t\t\t\n\t\t}\n\t\t\n\t\treturn value;\n\t},\n\t\n\t/**\n\t * Function: getNumber\n\t * \n\t * Returns the numeric value for the given key in the given associative\n\t * array or the given default value (or 0) if the value is null. The value\n\t * is converted to a numeric value using the Number function.\n\t * \n\t * Parameters:\n\t * \n\t * array - Associative array that contains the value for the key.\n\t * key - Key whose value should be returned.\n\t * defaultValue - Value to be returned if the value for the given\n\t * key is null. Default is 0.\n\t */\n\tgetNumber: function(array, key, defaultValue)\n\t{\n\t\tvar value = (array != null) ? array[key] : null;\n\n\t\tif (value == null)\n\t\t{\n\t\t\tvalue = defaultValue || 0;\t\t\t\n\t\t}\n\t\t\n\t\treturn Number(value);\n\t},\n\t\n\t/**\n\t * Function: getColor\n\t * \n\t * Returns the color value for the given key in the given associative\n\t * array or the given default value if the value is null. If the value\n\t * is <mxConstants.NONE> then null is returned.\n\t * \n\t * Parameters:\n\t * \n\t * array - Associative array that contains the value for the key.\n\t * key - Key whose value should be returned.\n\t * defaultValue - Value to be returned if the value for the given\n\t * key is null. Default is null.\n\t */\n\tgetColor: function(array, key, defaultValue)\n\t{\n\t\tvar value = (array != null) ? array[key] : null;\n\n\t\tif (value == null)\n\t\t{\n\t\t\tvalue = defaultValue;\n\t\t}\n\t\telse if (value == mxConstants.NONE)\n\t\t{\n\t\t\tvalue = null;\n\t\t}\n\t\t\n\t\treturn value;\n\t},\n\n\t/**\n\t * Function: clone\n\t * \n\t * Recursively clones the specified object ignoring all fieldnames in the\n\t * given array of transient fields. <mxObjectIdentity.FIELD_NAME> is always\n\t * ignored by this function.\n\t * \n\t * Parameters:\n\t * \n\t * obj - Object to be cloned.\n\t * transients - Optional array of strings representing the fieldname to be\n\t * ignored.\n\t * shallow - Optional boolean argument to specify if a shallow clone should\n\t * be created, that is, one where all object references are not cloned or,\n\t * in other words, one where only atomic (strings, numbers) values are\n\t * cloned. Default is false.\n\t */\n\tclone: function(obj, transients, shallow)\n\t{\n\t\tshallow = (shallow != null) ? shallow : false;\n\t\tvar clone = null;\n\t\t\n\t\tif (obj != null && typeof(obj.constructor) == 'function')\n\t\t{\n\t\t\tclone = new obj.constructor();\n\t\t\t\n\t\t    for (var i in obj)\n\t\t    {\n\t\t    \tif (i != mxObjectIdentity.FIELD_NAME && (transients == null ||\n\t\t    \t\tmxUtils.indexOf(transients, i) < 0))\n\t\t    \t{\n\t\t\t    \tif (!shallow && typeof(obj[i]) == 'object')\n\t\t\t    \t{\n\t\t\t            clone[i] = mxUtils.clone(obj[i]);\n\t\t\t        }\n\t\t\t        else\n\t\t\t        {\n\t\t\t            clone[i] = obj[i];\n\t\t\t        }\n\t\t\t\t}\n\t\t    }\n\t\t}\n\t\t\n\t    return clone;\n\t},\n\n\t/**\n\t * Function: equalPoints\n\t * \n\t * Compares all mxPoints in the given lists.\n\t * \n\t * Parameters:\n\t * \n\t * a - Array of <mxPoints> to be compared.\n\t * b - Array of <mxPoints> to be compared.\n\t */\n\tequalPoints: function(a, b)\n\t{\n\t\tif ((a == null && b != null) || (a != null && b == null) ||\n\t\t\t(a != null && b != null && a.length != b.length))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\telse if (a != null && b != null)\n\t\t{\n\t\t\tfor (var i = 0; i < a.length; i++)\n\t\t\t{\n\t\t\t\tif ((a[i] != null && b[i] == null) ||\n\t\t\t\t\t(a[i] == null && b[i] != null) ||\n\t\t\t\t\t(a[i] != null && b[i] != null &&\n\t\t\t\t\t(a[i].x != b[i].x || a[i].y != b[i].y)))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn true;\n\t},\n\n\t/**\n\t * Function: equalEntries\n\t * \n\t * Returns true if all properties of the given objects are equal. Values\n\t * with NaN are equal to NaN and unequal to any other value.\n\t * \n\t * Parameters:\n\t * \n\t * a - First object to be compared.\n\t * b - Second object to be compared.\n\t */\n\tequalEntries: function(a, b)\n\t{\n\t\t// Counts keys in b to check if all values have been compared\n\t\tvar count = 0;\n\n\t\tif ((a == null && b != null) || (a != null && b == null) ||\n\t\t\t(a != null && b != null && a.length != b.length))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\telse if (a != null && b != null)\n\t\t{\n\t\t\tfor (var key in b)\n\t\t\t{\n\t\t\t\tcount++;\n\t\t\t}\n\t\t\t\n\t\t\tfor (var key in a)\n\t\t\t{\n\t\t\t\tcount--\n\t\t\t\t\n\t\t\t\tif ((!mxUtils.isNaN(a[key]) || !mxUtils.isNaN(b[key])) && a[key] != b[key])\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn count == 0;\n\t},\n\t\n\t/**\n\t * Function: removeDuplicates\n\t * \n\t * Removes all duplicates from the given array.\n\t */\n\tremoveDuplicates: function(arr)\n\t{\n\t\tvar dict = new mxDictionary();\n\t\tvar result = [];\n\t\t\n\t\tfor (var i = 0; i < arr.length; i++)\n\t\t{\n\t\t\tif (!dict.get(arr[i]))\n\t\t\t{\n\t\t\t\tresult.push(arr[i]);\n\t\t\t\tdict.put(arr[i], true);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: isNaN\n\t *\n\t * Returns true if the given value is of type number and isNaN returns true.\n\t */\n\tisNaN: function(value)\n\t{\n\t\treturn typeof(value) == 'number' && isNaN(value);\n\t},\n\t\n\t/**\n\t * Function: extend\n\t *\n\t * Assigns a copy of the superclass prototype to the subclass prototype.\n\t * Note that this does not call the constructor of the superclass at this\n\t * point, the superclass constructor should be called explicitely in the\n\t * subclass constructor. Below is an example.\n\t * \n\t * (code)\n\t * MyGraph = function(container, model, renderHint, stylesheet)\n\t * {\n\t *   mxGraph.call(this, container, model, renderHint, stylesheet);\n\t * }\n\t * \n\t * mxUtils.extend(MyGraph, mxGraph);\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * ctor - Constructor of the subclass.\n\t * superCtor - Constructor of the superclass.\n\t */\n\textend: function(ctor, superCtor)\n\t{\n\t\tvar f = function() {};\n\t\tf.prototype = superCtor.prototype;\n\t\t\n\t\tctor.prototype = new f();\n\t\tctor.prototype.constructor = ctor;\n\t},\n\n\t/**\n\t * Function: toString\n\t * \n\t * Returns a textual representation of the specified object.\n\t * \n\t * Parameters:\n\t * \n\t * obj - Object to return the string representation for.\n\t */\n\ttoString: function(obj)\n\t{\n\t    var output = '';\n\t    \n\t    for (var i in obj)\n\t    {\n\t    \ttry\n\t    \t{\n\t\t\t    if (obj[i] == null)\n\t\t\t    {\n\t\t            output += i + ' = [null]\\n';\n\t\t\t    }\n\t\t\t    else if (typeof(obj[i]) == 'function')\n\t\t\t    {\n\t\t            output += i + ' => [Function]\\n';\n\t\t        }\n\t\t        else if (typeof(obj[i]) == 'object')\n\t\t        {\n\t\t        \tvar ctor = mxUtils.getFunctionName(obj[i].constructor); \n\t\t            output += i + ' => [' + ctor + ']\\n';\n\t\t        }\n\t\t        else\n\t\t        {\n\t\t            output += i + ' = ' + obj[i] + '\\n';\n\t\t        }\n\t    \t}\n\t    \tcatch (e)\n\t    \t{\n\t    \t\toutput += i + '=' + e.message;\n\t    \t}\n\t    }\n\t    \n\t    return output;\n\t},\n\n\t/**\n\t * Function: toRadians\n\t * \n\t * Converts the given degree to radians.\n\t */\n\ttoRadians: function(deg)\n\t{\n\t\treturn Math.PI * deg / 180;\n\t},\n\n\t/**\n\t * Function: toDegree\n\t * \n\t * Converts the given radians to degree.\n\t */\n\ttoDegree: function(rad)\n\t{\n\t\treturn rad * 180 / Math.PI;\n\t},\n\t\n\t/**\n\t * Function: arcToCurves\n\t * \n\t * Converts the given arc to a series of curves.\n\t */\n\tarcToCurves: function(x0, y0, r1, r2, angle, largeArcFlag, sweepFlag, x, y)\n\t{\n\t\tx -= x0;\n\t\ty -= y0;\n\t\t\n        if (r1 === 0 || r2 === 0) \n        {\n        \treturn result;\n        }\n        \n        var fS = sweepFlag;\n        var psai = angle;\n        r1 = Math.abs(r1);\n        r2 = Math.abs(r2);\n        var ctx = -x / 2;\n        var cty = -y / 2;\n        var cpsi = Math.cos(psai * Math.PI / 180);\n        var spsi = Math.sin(psai * Math.PI / 180);\n        var rxd = cpsi * ctx + spsi * cty;\n        var ryd = -1 * spsi * ctx + cpsi * cty;\n        var rxdd = rxd * rxd;\n        var rydd = ryd * ryd;\n        var r1x = r1 * r1;\n        var r2y = r2 * r2;\n        var lamda = rxdd / r1x + rydd / r2y;\n        var sds;\n        \n        if (lamda > 1) \n        {\n        \tr1 = Math.sqrt(lamda) * r1;\n        \tr2 = Math.sqrt(lamda) * r2;\n        \tsds = 0;\n        }  \n        else\n        {\n        \tvar seif = 1;\n            \n        \tif (largeArcFlag === fS) \n        \t{\n        \t\tseif = -1;\n        \t}\n            \n        \tsds = seif * Math.sqrt((r1x * r2y - r1x * rydd - r2y * rxdd) / (r1x * rydd + r2y * rxdd));\n        }\n        \n        var txd = sds * r1 * ryd / r2;\n        var tyd = -1 * sds * r2 * rxd / r1;\n        var tx = cpsi * txd - spsi * tyd + x / 2;\n        var ty = spsi * txd + cpsi * tyd + y / 2;\n        var rad = Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1) - Math.atan2(0, 1);\n        var s1 = (rad >= 0) ? rad : 2 * Math.PI + rad;\n        rad = Math.atan2((-ryd - tyd) / r2, (-rxd - txd) / r1) - Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1);\n        var dr = (rad >= 0) ? rad : 2 * Math.PI + rad;\n        \n        if (fS == 0 && dr > 0) \n        {\n        \tdr -= 2 * Math.PI;\n        }\n        else if (fS != 0 && dr < 0) \n        {\n        \tdr += 2 * Math.PI;\n        }\n        \n        var sse = dr * 2 / Math.PI;\n        var seg = Math.ceil(sse < 0 ? -1 * sse : sse);\n        var segr = dr / seg;\n        var t = 8/3 * Math.sin(segr / 4) * Math.sin(segr / 4) / Math.sin(segr / 2);\n        var cpsir1 = cpsi * r1;\n        var cpsir2 = cpsi * r2;\n        var spsir1 = spsi * r1;\n        var spsir2 = spsi * r2;\n        var mc = Math.cos(s1);\n        var ms = Math.sin(s1);\n        var x2 = -t * (cpsir1 * ms + spsir2 * mc);\n        var y2 = -t * (spsir1 * ms - cpsir2 * mc);\n        var x3 = 0;\n        var y3 = 0;\n\n\t\tvar result = [];\n        \n        for (var n = 0; n < seg; ++n) \n        {\n            s1 += segr;\n            mc = Math.cos(s1);\n            ms = Math.sin(s1);\n            \n            x3 = cpsir1 * mc - spsir2 * ms + tx;\n            y3 = spsir1 * mc + cpsir2 * ms + ty;\n            var dx = -t * (cpsir1 * ms + spsir2 * mc);\n            var dy = -t * (spsir1 * ms - cpsir2 * mc);\n            \n            // CurveTo updates x0, y0 so need to restore it\n            var index = n * 6;\n            result[index] = Number(x2 + x0);\n            result[index + 1] = Number(y2 + y0);\n            result[index + 2] = Number(x3 - dx + x0);\n            result[index + 3] = Number(y3 - dy + y0);\n            result[index + 4] = Number(x3 + x0);\n            result[index + 5] = Number(y3 + y0);\n            \n\t\t\tx2 = x3 + dx;\n            y2 = y3 + dy;\n        }\n        \n        return result;\n\t},\n\n\t/**\n\t * Function: getBoundingBox\n\t * \n\t * Returns the bounding box for the rotated rectangle.\n\t * \n\t * Parameters:\n\t * \n\t * rect - <mxRectangle> to be rotated.\n\t * angle - Number that represents the angle (in degrees).\n\t * cx - Optional <mxPoint> that represents the rotation center. If no\n\t * rotation center is given then the center of rect is used.\n\t */\n\tgetBoundingBox: function(rect, rotation, cx)\n\t{\n        var result = null;\n\n        if (rect != null && rotation != null && rotation != 0)\n        {\n            var rad = mxUtils.toRadians(rotation);\n            var cos = Math.cos(rad);\n            var sin = Math.sin(rad);\n\n            cx = (cx != null) ? cx : new mxPoint(rect.x + rect.width / 2, rect.y + rect.height / 2);\n\n            var p1 = new mxPoint(rect.x, rect.y);\n            var p2 = new mxPoint(rect.x + rect.width, rect.y);\n            var p3 = new mxPoint(p2.x, rect.y + rect.height);\n            var p4 = new mxPoint(rect.x, p3.y);\n\n            p1 = mxUtils.getRotatedPoint(p1, cos, sin, cx);\n            p2 = mxUtils.getRotatedPoint(p2, cos, sin, cx);\n            p3 = mxUtils.getRotatedPoint(p3, cos, sin, cx);\n            p4 = mxUtils.getRotatedPoint(p4, cos, sin, cx);\n\n            result = new mxRectangle(p1.x, p1.y, 0, 0);\n            result.add(new mxRectangle(p2.x, p2.y, 0, 0));\n            result.add(new mxRectangle(p3.x, p3.y, 0, 0));\n            result.add(new mxRectangle(p4.x, p4.y, 0, 0));\n        }\n\n        return result;\n\t},\n\n\t/**\n\t * Function: getRotatedPoint\n\t * \n\t * Rotates the given point by the given cos and sin.\n\t */\n\tgetRotatedPoint: function(pt, cos, sin, c)\n\t{\n\t\tc = (c != null) ? c : new mxPoint();\n\t\tvar x = pt.x - c.x;\n\t\tvar y = pt.y - c.y;\n\n\t\tvar x1 = x * cos - y * sin;\n\t\tvar y1 = y * cos + x * sin;\n\n\t\treturn new mxPoint(x1 + c.x, y1 + c.y);\n\t},\n\t\n\t/**\n\t * Returns an integer mask of the port constraints of the given map\n\t * @param dict the style map to determine the port constraints for\n\t * @param defaultValue Default value to return if the key is undefined.\n\t * @return the mask of port constraint directions\n\t * \n\t * Parameters:\n\t * \n\t * terminal - <mxCelState> that represents the terminal.\n\t * edge - <mxCellState> that represents the edge.\n\t * source - Boolean that specifies if the terminal is the source terminal.\n\t * defaultValue - Default value to be returned.\n\t */\n\tgetPortConstraints: function(terminal, edge, source, defaultValue)\n\t{\n\t\tvar value = mxUtils.getValue(terminal.style, mxConstants.STYLE_PORT_CONSTRAINT,\n\t\t\tmxUtils.getValue(edge.style, (source) ? mxConstants.STYLE_SOURCE_PORT_CONSTRAINT :\n\t\t\t\tmxConstants.STYLE_TARGET_PORT_CONSTRAINT, null));\n\t\t\n\t\tif (value == null)\n\t\t{\n\t\t\treturn defaultValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar directions = value.toString();\n\t\t\tvar returnValue = mxConstants.DIRECTION_MASK_NONE;\n\t\t\tvar constraintRotationEnabled = mxUtils.getValue(terminal.style, mxConstants.STYLE_PORT_CONSTRAINT_ROTATION, 0);\n\t\t\tvar rotation = 0;\n\t\t\t\n\t\t\tif (constraintRotationEnabled == 1)\n\t\t\t{\n\t\t\t\trotation = mxUtils.getValue(terminal.style, mxConstants.STYLE_ROTATION, 0);\n\t\t\t}\n\t\t\t\n\t\t\tvar quad = 0;\n\n\t\t\tif (rotation > 45)\n\t\t\t{\n\t\t\t\tquad = 1;\n\t\t\t\t\n\t\t\t\tif (rotation >= 135)\n\t\t\t\t{\n\t\t\t\t\tquad = 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (rotation < -45)\n\t\t\t{\n\t\t\t\tquad = 3;\n\t\t\t\t\n\t\t\t\tif (rotation <= -135)\n\t\t\t\t{\n\t\t\t\t\tquad = 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (directions.indexOf(mxConstants.DIRECTION_NORTH) >= 0)\n\t\t\t{\n\t\t\t\tswitch (quad)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_NORTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_EAST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_SOUTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_WEST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (directions.indexOf(mxConstants.DIRECTION_WEST) >= 0)\n\t\t\t{\n\t\t\t\tswitch (quad)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_WEST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_NORTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_EAST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_SOUTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (directions.indexOf(mxConstants.DIRECTION_SOUTH) >= 0)\n\t\t\t{\n\t\t\t\tswitch (quad)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_SOUTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_WEST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_NORTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_EAST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (directions.indexOf(mxConstants.DIRECTION_EAST) >= 0)\n\t\t\t{\n\t\t\t\tswitch (quad)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_EAST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_SOUTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_WEST;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturnValue |= mxConstants.DIRECTION_MASK_NORTH;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn returnValue;\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: reversePortConstraints\n\t * \n\t * Reverse the port constraint bitmask. For example, north | east\n\t * becomes south | west\n\t */\n\treversePortConstraints: function(constraint)\n\t{\n\t\tvar result = 0;\n\t\t\n\t\tresult = (constraint & mxConstants.DIRECTION_MASK_WEST) << 3;\n\t\tresult |= (constraint & mxConstants.DIRECTION_MASK_NORTH) << 1;\n\t\tresult |= (constraint & mxConstants.DIRECTION_MASK_SOUTH) >> 1;\n\t\tresult |= (constraint & mxConstants.DIRECTION_MASK_EAST) >> 3;\n\t\t\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: findNearestSegment\n\t * \n\t * Finds the index of the nearest segment on the given cell state for\n\t * the specified coordinate pair.\n\t */\n\tfindNearestSegment: function(state, x, y)\n\t{\n\t\tvar index = -1;\n\t\t\n\t\tif (state.absolutePoints.length > 0)\n\t\t{\n\t\t\tvar last = state.absolutePoints[0];\n\t\t\tvar min = null;\n\t\t\t\n\t\t\tfor (var i = 1; i < state.absolutePoints.length; i++)\n\t\t\t{\n\t\t\t\tvar current = state.absolutePoints[i];\n\t\t\t\tvar dist = mxUtils.ptSegDistSq(last.x, last.y,\n\t\t\t\t\tcurrent.x, current.y, x, y);\n\t\t\t\t\n\t\t\t\tif (min == null || dist < min)\n\t\t\t\t{\n\t\t\t\t\tmin = dist;\n\t\t\t\t\tindex = i - 1;\n\t\t\t\t}\n\n\t\t\t\tlast = current;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn index;\n\t},\n\n\t/**\n\t * Function: getDirectedBounds\n\t * \n\t * Adds the given margins to the given rectangle and rotates and flips the\n\t * rectangle according to the respective styles in style.\n\t */\n\tgetDirectedBounds: function (rect, m, style, flipH, flipV)\n\t{\n\t\tvar d = mxUtils.getValue(style, mxConstants.STYLE_DIRECTION, mxConstants.DIRECTION_EAST);\n\t\tflipH = (flipH != null) ? flipH : mxUtils.getValue(style, mxConstants.STYLE_FLIPH, false);\n\t\tflipV = (flipV != null) ? flipV : mxUtils.getValue(style, mxConstants.STYLE_FLIPV, false);\n\n\t\tm.x = Math.round(Math.max(0, Math.min(rect.width, m.x)));\n\t\tm.y = Math.round(Math.max(0, Math.min(rect.height, m.y)));\n\t\tm.width = Math.round(Math.max(0, Math.min(rect.width, m.width)));\n\t\tm.height = Math.round(Math.max(0, Math.min(rect.height, m.height)));\n\t\t\n\t\tif ((flipV && (d == mxConstants.DIRECTION_SOUTH || d == mxConstants.DIRECTION_NORTH)) ||\n\t\t\t(flipH && (d == mxConstants.DIRECTION_EAST || d == mxConstants.DIRECTION_WEST)))\n\t\t{\n\t\t\tvar tmp = m.x;\n\t\t\tm.x = m.width;\n\t\t\tm.width = tmp;\n\t\t}\n\t\t\t\n\t\tif ((flipH && (d == mxConstants.DIRECTION_SOUTH || d == mxConstants.DIRECTION_NORTH)) ||\n\t\t\t(flipV && (d == mxConstants.DIRECTION_EAST || d == mxConstants.DIRECTION_WEST)))\n\t\t{\n\t\t\tvar tmp = m.y;\n\t\t\tm.y = m.height;\n\t\t\tm.height = tmp;\n\t\t}\n\t\t\n\t\tvar m2 = mxRectangle.fromRectangle(m);\n\t\t\n\t\tif (d == mxConstants.DIRECTION_SOUTH)\n\t\t{\n\t\t\tm2.y = m.x;\n\t\t\tm2.x = m.height;\n\t\t\tm2.width = m.y;\n\t\t\tm2.height = m.width;\n\t\t}\n\t\telse if (d == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\tm2.y = m.height;\n\t\t\tm2.x = m.width;\n\t\t\tm2.width = m.x;\n\t\t\tm2.height = m.y;\n\t\t}\n\t\telse if (d == mxConstants.DIRECTION_NORTH)\n\t\t{\n\t\t\tm2.y = m.width;\n\t\t\tm2.x = m.y;\n\t\t\tm2.width = m.height;\n\t\t\tm2.height = m.x;\n\t\t}\n\t\t\n\t\treturn new mxRectangle(rect.x + m2.x, rect.y + m2.y, rect.width - m2.width - m2.x, rect.height - m2.height - m2.y);\n\t},\n\n\t/**\n\t * Function: getPerimeterPoint\n\t * \n\t * Returns the intersection between the polygon defined by the array of\n\t * points and the line between center and point.\n\t */\n\tgetPerimeterPoint: function (pts, center, point)\n\t{\n\t\tvar min = null;\n\t\t\n\t\tfor (var i = 0; i < pts.length - 1; i++)\n\t\t{\n\t\t\tvar pt = mxUtils.intersection(pts[i].x, pts[i].y, pts[i + 1].x, pts[i + 1].y,\n\t\t\t\tcenter.x, center.y, point.x, point.y);\n\t\t\t\n\t\t\tif (pt != null)\n\t\t\t{\n\t\t\t\tvar dx = point.x - pt.x;\n\t\t\t\tvar dy = point.y - pt.y;\n\t\t\t\tvar ip = {p: pt, distSq: dy * dy + dx * dx};\n\t\t\t\t\n\t\t\t\tif (ip != null && (min == null || min.distSq > ip.distSq))\n\t\t\t\t{\n\t\t\t\t\tmin = ip;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn (min != null) ? min.p : null;\n\t},\n\n\t/**\n\t * Function: rectangleIntersectsSegment\n\t * \n\t * Returns true if the given rectangle intersects the given segment.\n\t * \n\t * Parameters:\n\t * \n\t * bounds - <mxRectangle> that represents the rectangle.\n\t * p1 - <mxPoint> that represents the first point of the segment.\n\t * p2 - <mxPoint> that represents the second point of the segment.\n\t */\n\trectangleIntersectsSegment: function(bounds, p1, p2)\n\t{\n\t\tvar top = bounds.y;\n\t\tvar left = bounds.x;\n\t\tvar bottom = top + bounds.height;\n\t\tvar right = left + bounds.width;\n\t\t\t\n\t\t// Find min and max X for the segment\n\t\tvar minX = p1.x;\n\t\tvar maxX = p2.x;\n\t\t\n\t\tif (p1.x > p2.x)\n\t\t{\n\t\t  minX = p2.x;\n\t\t  maxX = p1.x;\n\t\t}\n\t\t\n\t\t// Find the intersection of the segment's and rectangle's x-projections\n\t\tif (maxX > right)\n\t\t{\n\t\t  maxX = right;\n\t\t}\n\t\t\n\t\tif (minX < left)\n\t\t{\n\t\t  minX = left;\n\t\t}\n\t\t\n\t\tif (minX > maxX) // If their projections do not intersect return false\n\t\t{\n\t\t  return false;\n\t\t}\n\t\t\n\t\t// Find corresponding min and max Y for min and max X we found before\n\t\tvar minY = p1.y;\n\t\tvar maxY = p2.y;\n\t\tvar dx = p2.x - p1.x;\n\t\t\n\t\tif (Math.abs(dx) > 0.0000001)\n\t\t{\n\t\t  var a = (p2.y - p1.y) / dx;\n\t\t  var b = p1.y - a * p1.x;\n\t\t  minY = a * minX + b;\n\t\t  maxY = a * maxX + b;\n\t\t}\n\t\t\n\t\tif (minY > maxY)\n\t\t{\n\t\t  var tmp = maxY;\n\t\t  maxY = minY;\n\t\t  minY = tmp;\n\t\t}\n\t\t\n\t\t// Find the intersection of the segment's and rectangle's y-projections\n\t\tif (maxY > bottom)\n\t\t{\n\t\t  maxY = bottom;\n\t\t}\n\t\t\n\t\tif (minY < top)\n\t\t{\n\t\t  minY = top;\n\t\t}\n\t\t\n\t\tif (minY > maxY) // If Y-projections do not intersect return false\n\t\t{\n\t\t  return false;\n\t\t}\n\t\t\n\t\treturn true;\n\t},\n\t\n\t/**\n\t * Function: contains\n\t * \n\t * Returns true if the specified point (x, y) is contained in the given rectangle.\n\t * \n\t * Parameters:\n\t * \n\t * bounds - <mxRectangle> that represents the area.\n\t * x - X-coordinate of the point.\n\t * y - Y-coordinate of the point.\n\t */\n\tcontains: function(bounds, x, y)\n\t{\n\t\treturn (bounds.x <= x && bounds.x + bounds.width >= x &&\n\t\t\t\tbounds.y <= y && bounds.y + bounds.height >= y);\n\t},\n\n\t/**\n\t * Function: intersects\n\t * \n\t * Returns true if the two rectangles intersect.\n\t * \n\t * Parameters:\n\t * \n\t * a - <mxRectangle> to be checked for intersection.\n\t * b - <mxRectangle> to be checked for intersection.\n\t */\n\tintersects: function(a, b)\n\t{\n\t\tvar tw = a.width;\n\t\tvar th = a.height;\n\t\tvar rw = b.width;\n\t\tvar rh = b.height;\n\t\t\n\t\tif (rw <= 0 || rh <= 0 || tw <= 0 || th <= 0)\n\t\t{\n\t\t    return false;\n\t\t}\n\t\t\n\t\tvar tx = a.x;\n\t\tvar ty = a.y;\n\t\tvar rx = b.x;\n\t\tvar ry = b.y;\n\t\t\n\t\trw += rx;\n\t\trh += ry;\n\t\ttw += tx;\n\t\tth += ty;\n\n\t\treturn ((rw < rx || rw > tx) &&\n\t\t\t(rh < ry || rh > ty) &&\n\t\t\t(tw < tx || tw > rx) &&\n\t\t\t(th < ty || th > ry));\n\t},\n\n\t/**\n\t * Function: intersectsHotspot\n\t * \n\t * Returns true if the state and the hotspot intersect.\n\t * \n\t * Parameters:\n\t * \n\t * state - <mxCellState>\n\t * x - X-coordinate.\n\t * y - Y-coordinate.\n\t * hotspot - Optional size of the hostpot.\n\t * min - Optional min size of the hostpot.\n\t * max - Optional max size of the hostpot.\n\t */\n\tintersectsHotspot: function(state, x, y, hotspot, min, max)\n\t{\n\t\thotspot = (hotspot != null) ? hotspot : 1;\n\t\tmin = (min != null) ? min : 0;\n\t\tmax = (max != null) ? max : 0;\n\t\t\n\t\tif (hotspot > 0)\n\t\t{\n\t\t\tvar cx = state.getCenterX();\n\t\t\tvar cy = state.getCenterY();\n\t\t\tvar w = state.width;\n\t\t\tvar h = state.height;\n\t\t\t\n\t\t\tvar start = mxUtils.getValue(state.style, mxConstants.STYLE_STARTSIZE) * state.view.scale;\n\n\t\t\tif (start > 0)\n\t\t\t{\n\t\t\t\tif (mxUtils.getValue(state.style, mxConstants.STYLE_HORIZONTAL, true))\n\t\t\t\t{\n\t\t\t\t\tcy = state.y + start / 2;\n\t\t\t\t\th = start;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcx = state.x + start / 2;\n\t\t\t\t\tw = start;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tw = Math.max(min, w * hotspot);\n\t\t\th = Math.max(min, h * hotspot);\n\t\t\t\n\t\t\tif (max > 0)\n\t\t\t{\n\t\t\t\tw = Math.min(w, max);\n\t\t\t\th = Math.min(h, max);\n\t\t\t}\n\t\t\t\n\t\t\tvar rect = new mxRectangle(cx - w / 2, cy - h / 2, w, h);\n\t\t\tvar alpha = mxUtils.toRadians(mxUtils.getValue(state.style, mxConstants.STYLE_ROTATION) || 0);\n\t\t\t\n\t\t\tif (alpha != 0)\n\t\t\t{\n\t\t\t\tvar cos = Math.cos(-alpha);\n\t\t\t\tvar sin = Math.sin(-alpha);\n\t\t\t\tvar cx = new mxPoint(state.getCenterX(), state.getCenterY());\n\t\t\t\tvar pt = mxUtils.getRotatedPoint(new mxPoint(x, y), cos, sin, cx);\n\t\t\t\tx = pt.x;\n\t\t\t\ty = pt.y;\n\t\t\t}\n\t\t\t\n\t\t\treturn mxUtils.contains(rect, x, y);\t\t\t\n\t\t}\n\t\t\n\t\treturn true;\n\t},\n\n\t/**\n\t * Function: getOffset\n\t * \n\t * Returns the offset for the specified container as an <mxPoint>. The\n\t * offset is the distance from the top left corner of the container to the\n\t * top left corner of the document.\n\t * \n\t * Parameters:\n\t * \n\t * container - DOM node to return the offset for.\n\t * scollOffset - Optional boolean to add the scroll offset of the document.\n\t * Default is false.\n\t */\n\tgetOffset: function(container, scrollOffset)\n\t{\n\t\tvar offsetLeft = 0;\n\t\tvar offsetTop = 0;\n\t\t\n\t\t// Ignores document scroll origin for fixed elements\n\t\tvar fixed = false;\n\t\tvar node = container;\n\t\tvar b = document.body;\n\t\tvar d = document.documentElement;\n\n\t\twhile (node != null && node != b && node != d && !fixed)\n\t\t{\n\t\t\tvar style = mxUtils.getCurrentStyle(node);\n\t\t\t\n\t\t\tif (style != null)\n\t\t\t{\n\t\t\t\tfixed = fixed || style.position == 'fixed';\n\t\t\t}\n\t\t\t\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\t\n\t\tif (!scrollOffset && !fixed)\n\t\t{\n\t\t\tvar offset = mxUtils.getDocumentScrollOrigin(container.ownerDocument);\n\t\t\toffsetLeft += offset.x;\n\t\t\toffsetTop += offset.y;\n\t\t}\n\t\t\n\t\tvar r = container.getBoundingClientRect();\n\t\t\n\t\tif (r != null)\n\t\t{\n\t\t\toffsetLeft += r.left;\n\t\t\toffsetTop += r.top;\n\t\t}\n\t\t\n\t\treturn new mxPoint(offsetLeft, offsetTop);\n\t},\n\n\t/**\n\t * Function: getDocumentScrollOrigin\n\t * \n\t * Returns the scroll origin of the given document or the current document\n\t * if no document is given.\n\t */\n\tgetDocumentScrollOrigin: function(doc)\n\t{\n\t\tif (mxClient.IS_QUIRKS)\n\t\t{\n\t\t\treturn new mxPoint(doc.body.scrollLeft, doc.body.scrollTop);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar wnd = doc.defaultView || doc.parentWindow;\n\t\t\t\n\t\t\tvar x = (wnd != null && window.pageXOffset !== undefined) ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft;\n\t\t\tvar y = (wnd != null && window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n\t\t\t\n\t\t\treturn new mxPoint(x, y);\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: getScrollOrigin\n\t * \n\t * Returns the top, left corner of the viewrect as an <mxPoint>.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node whose scroll origin should be returned.\n\t * includeAncestors - Whether the scroll origin of the ancestors should be\n\t * included. Default is false.\n\t * includeDocument - Whether the scroll origin of the document should be\n\t * included. Default is true.\n\t */\n\tgetScrollOrigin: function(node, includeAncestors, includeDocument)\n\t{\n\t\tincludeAncestors = (includeAncestors != null) ? includeAncestors : false;\n\t\tincludeDocument = (includeDocument != null) ? includeDocument : true;\n\t\t\n\t\tvar doc = (node != null) ? node.ownerDocument : document;\n\t\tvar b = doc.body;\n\t\tvar d = doc.documentElement;\n\t\tvar result = new mxPoint();\n\t\tvar fixed = false;\n\n\t\twhile (node != null && node != b && node != d)\n\t\t{\n\t\t\tif (!isNaN(node.scrollLeft) && !isNaN(node.scrollTop))\n\t\t\t{\n\t\t\t\tresult.x += node.scrollLeft;\n\t\t\t\tresult.y += node.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tvar style = mxUtils.getCurrentStyle(node);\n\t\t\t\n\t\t\tif (style != null)\n\t\t\t{\n\t\t\t\tfixed = fixed || style.position == 'fixed';\n\t\t\t}\n\n\t\t\tnode = (includeAncestors) ? node.parentNode : null;\n\t\t}\n\n\t\tif (!fixed && includeDocument)\n\t\t{\n\t\t\tvar origin = mxUtils.getDocumentScrollOrigin(doc);\n\n\t\t\tresult.x += origin.x;\n\t\t\tresult.y += origin.y;\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\n\t/**\n\t * Function: convertPoint\n\t * \n\t * Converts the specified point (x, y) using the offset of the specified\n\t * container and returns a new <mxPoint> with the result.\n\t * \n\t * (code)\n\t * var pt = mxUtils.convertPoint(graph.container,\n\t *   mxEvent.getClientX(evt), mxEvent.getClientY(evt));\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * container - DOM node to use for the offset.\n\t * x - X-coordinate of the point to be converted.\n\t * y - Y-coordinate of the point to be converted.\n\t */\n\tconvertPoint: function(container, x, y)\n\t{\n\t\tvar origin = mxUtils.getScrollOrigin(container, false);\n\t\tvar offset = mxUtils.getOffset(container);\n\n\t\toffset.x -= origin.x;\n\t\toffset.y -= origin.y;\n\t\t\n\t\treturn new mxPoint(x - offset.x, y - offset.y);\n\t},\n\t\n\t/**\n\t * Function: ltrim\n\t * \n\t * Strips all whitespaces from the beginning of the string. Without the\n\t * second parameter, this will trim these characters:\n\t * \n\t * - \" \" (ASCII 32 (0x20)), an ordinary space\n\t * - \"\\t\" (ASCII 9 (0x09)), a tab\n\t * - \"\\n\" (ASCII 10 (0x0A)), a new line (line feed)\n\t * - \"\\r\" (ASCII 13 (0x0D)), a carriage return\n\t * - \"\\0\" (ASCII 0 (0x00)), the NUL-byte\n\t * - \"\\x0B\" (ASCII 11 (0x0B)), a vertical tab\n\t */\n\tltrim: function(str, chars)\n\t{\n\t\tchars = chars || \"\\\\s\";\n\t\t\n\t\treturn (str != null) ? str.replace(new RegExp(\"^[\" + chars + \"]+\", \"g\"), \"\") : null;\n\t},\n\t\n\t/**\n\t * Function: rtrim\n\t * \n\t * Strips all whitespaces from the end of the string. Without the second\n\t * parameter, this will trim these characters:\n\t * \n\t * - \" \" (ASCII 32 (0x20)), an ordinary space\n\t * - \"\\t\" (ASCII 9 (0x09)), a tab\n\t * - \"\\n\" (ASCII 10 (0x0A)), a new line (line feed)\n\t * - \"\\r\" (ASCII 13 (0x0D)), a carriage return\n\t * - \"\\0\" (ASCII 0 (0x00)), the NUL-byte\n\t * - \"\\x0B\" (ASCII 11 (0x0B)), a vertical tab\n\t */\n\trtrim: function(str, chars)\n\t{\n\t\tchars = chars || \"\\\\s\";\n\t\t\n\t\treturn (str != null) ? str.replace(new RegExp(\"[\" + chars + \"]+$\", \"g\"), \"\") : null;\n\t},\n\t\n\t/**\n\t * Function: trim\n\t * \n\t * Strips all whitespaces from both end of the string.\n\t * Without the second parameter, Javascript function will trim these\n\t * characters:\n\t * \n\t * - \" \" (ASCII 32 (0x20)), an ordinary space\n\t * - \"\\t\" (ASCII 9 (0x09)), a tab\n\t * - \"\\n\" (ASCII 10 (0x0A)), a new line (line feed)\n\t * - \"\\r\" (ASCII 13 (0x0D)), a carriage return\n\t * - \"\\0\" (ASCII 0 (0x00)), the NUL-byte\n\t * - \"\\x0B\" (ASCII 11 (0x0B)), a vertical tab\n\t */\n\ttrim: function(str, chars)\n\t{\n\t\treturn mxUtils.ltrim(mxUtils.rtrim(str, chars), chars);\n\t},\n\t\n\t/**\n\t * Function: isNumeric\n\t * \n\t * Returns true if the specified value is numeric, that is, if it is not\n\t * null, not an empty string, not a HEX number and isNaN returns false.\n\t * \n\t * Parameters:\n\t * \n\t * n - String representing the possibly numeric value.\n\t */\n\tisNumeric: function(n)\n\t{\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n) && (typeof(n) != 'string' || n.toLowerCase().indexOf('0x') < 0);\n\t},\n\n\t/**\n\t * Function: isInteger\n\t * \n\t * Returns true if the given value is an valid integer number.\n\t * \n\t * Parameters:\n\t * \n\t * n - String representing the possibly numeric value.\n\t */\n\tisInteger: function(n)\n\t{\n\t\treturn String(parseInt(n)) === String(n);\n\t},\n\n\t/**\n\t * Function: mod\n\t * \n\t * Returns the remainder of division of n by m. You should use this instead\n\t * of the built-in operation as the built-in operation does not properly\n\t * handle negative numbers.\n\t */\n\tmod: function(n, m)\n\t{\n\t\treturn ((n % m) + m) % m;\n\t},\n\n\t/**\n\t * Function: intersection\n\t * \n\t * Returns the intersection of two lines as an <mxPoint>.\n\t * \n\t * Parameters:\n\t * \n\t * x0 - X-coordinate of the first line's startpoint.\n\t * y0 - X-coordinate of the first line's startpoint.\n\t * x1 - X-coordinate of the first line's endpoint.\n\t * y1 - Y-coordinate of the first line's endpoint.\n\t * x2 - X-coordinate of the second line's startpoint.\n\t * y2 - Y-coordinate of the second line's startpoint.\n\t * x3 - X-coordinate of the second line's endpoint.\n\t * y3 - Y-coordinate of the second line's endpoint.\n\t */\n\tintersection: function (x0, y0, x1, y1, x2, y2, x3, y3)\n\t{\n\t\tvar denom = ((y3 - y2) * (x1 - x0)) - ((x3 - x2) * (y1 - y0));\n\t\tvar nume_a = ((x3 - x2) * (y0 - y2)) - ((y3 - y2) * (x0 - x2));\n\t\tvar nume_b = ((x1 - x0) * (y0 - y2)) - ((y1 - y0) * (x0 - x2));\n\n\t\tvar ua = nume_a / denom;\n\t\tvar ub = nume_b / denom;\n\t\t\n\t\tif(ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0)\n\t\t{\n\t\t\t// Get the intersection point\n\t\t\tvar x = x0 + ua * (x1 - x0);\n\t\t\tvar y = y0 + ua * (y1 - y0);\n\t\t\t\n\t\t\treturn new mxPoint(x, y);\n\t\t}\n\t\t\n\t\t// No intersection\n\t\treturn null;\n\t},\n\t\n\t/**\n\t * Function: ptSegDistSq\n\t * \n\t * Returns the square distance between a segment and a point. To get the\n\t * distance between a point and a line (with infinite length) use\n\t * <mxUtils.ptLineDist>.\n\t * \n\t * Parameters:\n\t * \n\t * x1 - X-coordinate of the startpoint of the segment.\n\t * y1 - Y-coordinate of the startpoint of the segment.\n\t * x2 - X-coordinate of the endpoint of the segment.\n\t * y2 - Y-coordinate of the endpoint of the segment.\n\t * px - X-coordinate of the point.\n\t * py - Y-coordinate of the point.\n\t */\n\tptSegDistSq: function(x1, y1, x2, y2, px, py)\n    {\n\t\tx2 -= x1;\n\t\ty2 -= y1;\n\n\t\tpx -= x1;\n\t\tpy -= y1;\n\n\t\tvar dotprod = px * x2 + py * y2;\n\t\tvar projlenSq;\n\n\t\tif (dotprod <= 0.0)\n\t\t{\n\t\t    projlenSq = 0.0;\n\t\t}\n\t\telse\n\t\t{\n\t\t    px = x2 - px;\n\t\t    py = y2 - py;\n\t\t    dotprod = px * x2 + py * y2;\n\n\t\t    if (dotprod <= 0.0)\n\t\t    {\n\t\t\t\tprojlenSq = 0.0;\n\t\t    }\n\t\t    else\n\t\t    {\n\t\t\t\tprojlenSq = dotprod * dotprod / (x2 * x2 + y2 * y2);\n\t\t    }\n\t\t}\n\n\t\tvar lenSq = px * px + py * py - projlenSq;\n\t\t\n\t\tif (lenSq < 0)\n\t\t{\n\t\t    lenSq = 0;\n\t\t}\n\t\t\n\t\treturn lenSq;\n    },\n\t\n\t/**\n\t * Function: ptLineDist\n\t * \n\t * Returns the distance between a line defined by two points and a point.\n\t * To get the distance between a point and a segment (with a specific\n\t * length) use <mxUtils.ptSeqDistSq>.\n\t * \n\t * Parameters:\n\t * \n\t * x1 - X-coordinate of point 1 of the line.\n\t * y1 - Y-coordinate of point 1 of the line.\n\t * x2 - X-coordinate of point 1 of the line.\n\t * y2 - Y-coordinate of point 1 of the line.\n\t * px - X-coordinate of the point.\n\t * py - Y-coordinate of the point.\n\t */\n    ptLineDist: function(x1, y1, x2, y2, px, py)\n    {\n\t\treturn Math.abs((y2 - y1) * px - (x2 - x1) * py + x2 * y1 - y2 * x1) /\n\t\t\tMath.sqrt((y2 - y1) * (y2 - y1) + (x2 - x1) * (x2 - x1));\n    },\n    \t\n\t/**\n\t * Function: relativeCcw\n\t * \n\t * Returns 1 if the given point on the right side of the segment, 0 if its\n\t * on the segment, and -1 if the point is on the left side of the segment.\n\t * \n\t * Parameters:\n\t * \n\t * x1 - X-coordinate of the startpoint of the segment.\n\t * y1 - Y-coordinate of the startpoint of the segment.\n\t * x2 - X-coordinate of the endpoint of the segment.\n\t * y2 - Y-coordinate of the endpoint of the segment.\n\t * px - X-coordinate of the point.\n\t * py - Y-coordinate of the point.\n\t */\n\trelativeCcw: function(x1, y1, x2, y2, px, py)\n    {\n\t\tx2 -= x1;\n\t\ty2 -= y1;\n\t\tpx -= x1;\n\t\tpy -= y1;\n\t\tvar ccw = px * y2 - py * x2;\n\t\t\n\t\tif (ccw == 0.0)\n\t\t{\n\t\t    ccw = px * x2 + py * y2;\n\t\t    \n\t\t    if (ccw > 0.0)\n\t\t    {\n\t\t\t\tpx -= x2;\n\t\t\t\tpy -= y2;\n\t\t\t\tccw = px * x2 + py * y2;\n\t\t\t\t\n\t\t\t\tif (ccw < 0.0)\n\t\t\t\t{\n\t\t\t\t    ccw = 0.0;\n\t\t\t\t}\n\t\t    }\n\t\t}\n\t\t\n\t\treturn (ccw < 0.0) ? -1 : ((ccw > 0.0) ? 1 : 0);\n    },\n    \n\t/**\n\t * Function: animateChanges\n\t * \n\t * See <mxEffects.animateChanges>. This is for backwards compatibility and\n\t * will be removed later.\n\t */\n\tanimateChanges: function(graph, changes)\n\t{\n\t\t// LATER: Deprecated, remove this function\n    \tmxEffects.animateChanges.apply(this, arguments);\n\t},\n    \n\t/**\n\t * Function: cascadeOpacity\n\t * \n\t * See <mxEffects.cascadeOpacity>. This is for backwards compatibility and\n\t * will be removed later.\n\t */\n    cascadeOpacity: function(graph, cell, opacity)\n\t{\n\t\tmxEffects.cascadeOpacity.apply(this, arguments);\n\t},\n\n\t/**\n\t * Function: fadeOut\n\t * \n\t * See <mxEffects.fadeOut>. This is for backwards compatibility and\n\t * will be removed later.\n\t */\n\tfadeOut: function(node, from, remove, step, delay, isEnabled)\n\t{\n\t\tmxEffects.fadeOut.apply(this, arguments);\n\t},\n\t\n\t/**\n\t * Function: setOpacity\n\t * \n\t * Sets the opacity of the specified DOM node to the given value in %.\n\t * \n\t * Parameters:\n\t * \n\t * node - DOM node to set the opacity for.\n\t * value - Opacity in %. Possible values are between 0 and 100.\n\t */\n\tsetOpacity: function(node, value)\n\t{\n\t\tif (mxUtils.isVml(node))\n\t\t{\n\t    \tif (value >= 100)\n\t    \t{\n\t    \t\tnode.style.filter = '';\n\t    \t}\n\t    \telse\n\t    \t{\n\t    \t\t// TODO: Why is the division by 5 needed in VML?\n\t\t\t    node.style.filter = 'alpha(opacity=' + (value/5) + ')';\n\t    \t}\n\t\t}\n\t\telse if (mxClient.IS_IE && (typeof(document.documentMode) === 'undefined' || document.documentMode < 9))\n\t    {\n\t    \tif (value >= 100)\n\t    \t{\n\t    \t\tnode.style.filter = '';\n\t    \t}\n\t    \telse\n\t    \t{\n\t\t\t    node.style.filter = 'alpha(opacity=' + value + ')';\n\t    \t}\n\t\t}\n\t\telse\n\t\t{\n\t\t    node.style.opacity = (value / 100);\n\t\t}\n\t},\n\n\t/**\n\t * Function: createImage\n\t * \n\t * Creates and returns an image (IMG node) or VML image (v:image) in IE6 in\n\t * quirks mode.\n\t * \n\t * Parameters:\n\t * \n\t * src - URL that points to the image to be displayed.\n\t */\n\tcreateImage: function(src)\n\t{\n        var imageNode = null;\n        \n\t\tif (mxClient.IS_IE6 && document.compatMode != 'CSS1Compat')\n\t\t{\n        \timageNode = document.createElement(mxClient.VML_PREFIX + ':image');\n        \timageNode.setAttribute('src', src);\n        \timageNode.style.borderStyle = 'none';\n        }\n\t\telse\n\t\t{\n\t\t\timageNode = document.createElement('img');\n\t\t\timageNode.setAttribute('src', src);\n\t\t\timageNode.setAttribute('border', '0');\n\t\t}\n\t\t\n\t\treturn imageNode;\n\t},\n\n\t/**\n\t * Function: sortCells\n\t * \n\t * Sorts the given cells according to the order in the cell hierarchy.\n\t * Ascending is optional and defaults to true.\n\t */\n\tsortCells: function(cells, ascending)\n\t{\n\t\tascending = (ascending != null) ? ascending : true;\n\t\tvar lookup = new mxDictionary();\n\t\tcells.sort(function(o1, o2)\n\t\t{\n\t\t\tvar p1 = lookup.get(o1);\n\t\t\t\n\t\t\tif (p1 == null)\n\t\t\t{\n\t\t\t\tp1 = mxCellPath.create(o1).split(mxCellPath.PATH_SEPARATOR);\n\t\t\t\tlookup.put(o1, p1);\n\t\t\t}\n\t\t\t\n\t\t\tvar p2 = lookup.get(o2);\n\t\t\t\n\t\t\tif (p2 == null)\n\t\t\t{\n\t\t\t\tp2 = mxCellPath.create(o2).split(mxCellPath.PATH_SEPARATOR);\n\t\t\t\tlookup.put(o2, p2);\n\t\t\t}\n\t\t\t\n\t\t\tvar comp = mxCellPath.compare(p1, p2);\n\t\t\t\n\t\t\treturn (comp == 0) ? 0 : (((comp > 0) == ascending) ? 1 : -1);\n\t\t});\n\t\t\n\t\treturn cells;\n\t},\n\n\t/**\n\t * Function: getStylename\n\t * \n\t * Returns the stylename in a style of the form [(stylename|key=value);] or\n\t * an empty string if the given style does not contain a stylename.\n\t * \n\t * Parameters:\n\t * \n\t * style - String of the form [(stylename|key=value);].\n\t */\n\tgetStylename: function(style)\n\t{\n\t\tif (style != null)\n\t\t{\n\t\t\tvar pairs = style.split(';');\n\t\t\tvar stylename = pairs[0];\n\t\t\t\n\t\t\tif (stylename.indexOf('=') < 0)\n\t\t\t{\n\t\t\t\treturn stylename;\n\t\t\t}\n\t\t}\n\t\t\t\t\n\t\treturn '';\n\t},\n\n\t/**\n\t * Function: getStylenames\n\t * \n\t * Returns the stylenames in a style of the form [(stylename|key=value);]\n\t * or an empty array if the given style does not contain any stylenames.\n\t * \n\t * Parameters:\n\t * \n\t * style - String of the form [(stylename|key=value);].\n\t */\n\tgetStylenames: function(style)\n\t{\n\t\tvar result = [];\n\t\t\n\t\tif (style != null)\n\t\t{\n\t\t\tvar pairs = style.split(';');\n\t\t\t\n\t\t\tfor (var i = 0; i < pairs.length; i++)\n\t\t\t{\n\t\t\t\tif (pairs[i].indexOf('=') < 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push(pairs[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\t\t\n\t\treturn result;\n\t},\n\n\t/**\n\t * Function: indexOfStylename\n\t * \n\t * Returns the index of the given stylename in the given style. This\n\t * returns -1 if the given stylename does not occur (as a stylename) in the\n\t * given style, otherwise it returns the index of the first character.\n\t */\n\tindexOfStylename: function(style, stylename)\n\t{\n\t\tif (style != null && stylename != null)\n\t\t{\n\t\t\tvar tokens = style.split(';');\n\t\t\tvar pos = 0;\n\t\t\t\n\t\t\tfor (var i = 0; i < tokens.length; i++)\n\t\t\t{\n\t\t\t\tif (tokens[i] == stylename)\n\t\t\t\t{\n\t\t\t\t\treturn pos;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpos += tokens[i].length + 1;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t},\n\t\n\t/**\n\t * Function: addStylename\n\t * \n\t * Adds the specified stylename to the given style if it does not already\n\t * contain the stylename.\n\t */\n\taddStylename: function(style, stylename)\n\t{\n\t\tif (mxUtils.indexOfStylename(style, stylename) < 0)\n\t\t{\n\t\t\tif (style == null)\n\t\t\t{\n\t\t\t\tstyle = '';\n\t\t\t}\n\t\t\telse if (style.length > 0 && style.charAt(style.length - 1) != ';')\n\t\t\t{\n\t\t\t\tstyle += ';';\n\t\t\t}\n\t\t\t\n\t\t\tstyle += stylename;\n\t\t}\n\t\t\n\t\treturn style;\n\t},\n\t\n\t/**\n\t * Function: removeStylename\n\t * \n\t * Removes all occurrences of the specified stylename in the given style\n\t * and returns the updated style. Trailing semicolons are not preserved.\n\t */\n\tremoveStylename: function(style, stylename)\n\t{\n\t\tvar result = [];\n\t\t\n\t\tif (style != null)\n\t\t{\n\t\t\tvar tokens = style.split(';');\n\t\t\t\n\t\t\tfor (var i = 0; i < tokens.length; i++)\n\t\t\t{\n\t\t\t\tif (tokens[i] != stylename)\n\t\t\t\t{\n\t\t\t\t\tresult.push(tokens[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result.join(';');\n\t},\n\t\n\t/**\n\t * Function: removeAllStylenames\n\t * \n\t * Removes all stylenames from the given style and returns the updated\n\t * style.\n\t */\n\tremoveAllStylenames: function(style)\n\t{\n\t\tvar result = [];\n\t\t\n\t\tif (style != null)\n\t\t{\n\t\t\tvar tokens = style.split(';');\n\t\t\t\n\t\t\tfor (var i = 0; i < tokens.length; i++)\n\t\t\t{\n\t\t\t\t// Keeps the key, value assignments\n\t\t\t\tif (tokens[i].indexOf('=') >= 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push(tokens[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result.join(';');\n\t},\n\n\t/**\n\t * Function: setCellStyles\n\t * \n\t * Assigns the value for the given key in the styles of the given cells, or\n\t * removes the key from the styles if the value is null.\n\t * \n\t * Parameters:\n\t * \n\t * model - <mxGraphModel> to execute the transaction in.\n\t * cells - Array of <mxCells> to be updated.\n\t * key - Key of the style to be changed.\n\t * value - New value for the given key.\n\t */\n\tsetCellStyles: function(model, cells, key, value)\n\t{\n\t\tif (cells != null && cells.length > 0)\n\t\t{\n\t\t\tmodel.beginUpdate();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (cells[i] != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar style = mxUtils.setStyle(model.getStyle(cells[i]), key, value);\n\t\t\t\t\t\tmodel.setStyle(cells[i], style);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tmodel.endUpdate();\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: setStyle\n\t * \n\t * Adds or removes the given key, value pair to the style and returns the\n\t * new style. If value is null or zero length then the key is removed from\n\t * the style. This is for cell styles, not for CSS styles.\n\t * \n\t * Parameters:\n\t * \n\t * style - String of the form [(stylename|key=value);].\n\t * key - Key of the style to be changed.\n\t * value - New value for the given key.\n\t */\n\tsetStyle: function(style, key, value)\n\t{\n\t\tvar isValue = value != null && (typeof(value.length) == 'undefined' || value.length > 0);\n\t\t\n\t\tif (style == null || style.length == 0)\n\t\t{\n\t\t\tif (isValue)\n\t\t\t{\n\t\t\t\tstyle = key + '=' + value + ';';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (style.substring(0, key.length + 1) == key + '=')\n\t\t\t{\n\t\t\t\tvar next = style.indexOf(';');\n\t\t\t\t\n\t\t\t\tif (isValue)\n\t\t\t\t{\n\t\t\t\t\tstyle = key + '=' + value + ((next < 0) ? ';' : style.substring(next));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstyle = (next < 0 || next == style.length - 1) ? '' : style.substring(next + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar index = style.indexOf(';' + key + '=');\n\t\t\t\t\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\tif (isValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar sep = (style.charAt(style.length - 1) == ';') ? '' : ';';\n\t\t\t\t\t\tstyle = style + sep + key + '=' + value + ';';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar next = style.indexOf(';', index + 1);\n\t\t\t\t\t\n\t\t\t\t\tif (isValue)\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle = style.substring(0, index + 1) + key + '=' + value + ((next < 0) ? ';' : style.substring(next));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle = style.substring(0, index) + ((next < 0) ? ';' : style.substring(next));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn style;\n\t},\n\n\t/**\n\t * Function: setCellStyleFlags\n\t * \n\t * Sets or toggles the flag bit for the given key in the cell's styles.\n\t * If value is null then the flag is toggled.\n\t * \n\t * Example:\n\t * \n\t * (code)\n\t * var cells = graph.getSelectionCells();\n\t * mxUtils.setCellStyleFlags(graph.model,\n\t * \t\t\tcells,\n\t * \t\t\tmxConstants.STYLE_FONTSTYLE,\n\t * \t\t\tmxConstants.FONT_BOLD);\n\t * (end)\n\t * \n\t * Toggles the bold font style.\n\t * \n\t * Parameters:\n\t * \n\t * model - <mxGraphModel> that contains the cells.\n\t * cells - Array of <mxCells> to change the style for.\n\t * key - Key of the style to be changed.\n\t * flag - Integer for the bit to be changed.\n\t * value - Optional boolean value for the flag.\n\t */\n\tsetCellStyleFlags: function(model, cells, key, flag, value)\n\t{\n\t\tif (cells != null && cells.length > 0)\n\t\t{\n\t\t\tmodel.beginUpdate();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (cells[i] != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar style = mxUtils.setStyleFlag(\n\t\t\t\t\t\t\tmodel.getStyle(cells[i]),\n\t\t\t\t\t\t\tkey, flag, value);\n\t\t\t\t\t\tmodel.setStyle(cells[i], style);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tmodel.endUpdate();\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: setStyleFlag\n\t * \n\t * Sets or removes the given key from the specified style and returns the\n\t * new style. If value is null then the flag is toggled.\n\t * \n\t * Parameters:\n\t * \n\t * style - String of the form [(stylename|key=value);].\n\t * key - Key of the style to be changed.\n\t * flag - Integer for the bit to be changed.\n\t * value - Optional boolean value for the given flag.\n\t */\n\tsetStyleFlag: function(style, key, flag, value)\n\t{\n\t\tif (style == null || style.length == 0)\n\t\t{\n\t\t\tif (value || value == null)\n\t\t\t{\n\t\t\t\tstyle = key+'='+flag;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstyle = key+'=0';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar index = style.indexOf(key+'=');\n\t\t\t\n\t\t\tif (index < 0)\n\t\t\t{\n\t\t\t\tvar sep = (style.charAt(style.length-1) == ';') ? '' : ';';\n\n\t\t\t\tif (value || value == null)\n\t\t\t\t{\n\t\t\t\t\tstyle = style + sep + key + '=' + flag;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstyle = style + sep + key + '=0';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar cont = style.indexOf(';', index);\n\t\t\t\tvar tmp = '';\n\t\t\t\t\n\t\t\t\tif (cont < 0)\n\t\t\t\t{\n\t\t\t\t\ttmp  = style.substring(index+key.length+1);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttmp = style.substring(index+key.length+1, cont);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (value == null)\n\t\t\t\t{\n\t\t\t\t\ttmp = parseInt(tmp) ^ flag;\n\t\t\t\t}\n\t\t\t\telse if (value)\n\t\t\t\t{\n\t\t\t\t\ttmp = parseInt(tmp) | flag;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttmp = parseInt(tmp) & ~flag;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstyle = style.substring(0, index) + key + '=' + tmp +\n\t\t\t\t\t((cont >= 0) ? style.substring(cont) : '');\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn style;\n\t},\n\t\n\t/**\n\t * Function: getAlignmentAsPoint\n\t * \n\t * Returns an <mxPoint> that represents the horizontal and vertical alignment\n\t * for numeric computations. X is -0.5 for center, -1 for right and 0 for\n\t * left alignment. Y is -0.5 for middle, -1 for bottom and 0 for top\n\t * alignment. Default values for missing arguments is top, left.\n\t */\n\tgetAlignmentAsPoint: function(align, valign)\n\t{\n\t\tvar dx = -0.5;\n\t\tvar dy = -0.5;\n\t\t\n\t\t// Horizontal alignment\n\t\tif (align == mxConstants.ALIGN_LEFT)\n\t\t{\n\t\t\tdx = 0;\n\t\t}\n\t\telse if (align == mxConstants.ALIGN_RIGHT)\n\t\t{\n\t\t\tdx = -1;\n\t\t}\n\n\t\t// Vertical alignment\n\t\tif (valign == mxConstants.ALIGN_TOP)\n\t\t{\n\t\t\tdy = 0;\n\t\t}\n\t\telse if (valign == mxConstants.ALIGN_BOTTOM)\n\t\t{\n\t\t\tdy = -1;\n\t\t}\n\t\t\n\t\treturn new mxPoint(dx, dy);\n\t},\n\t\n\t/**\n\t * Function: getSizeForString\n\t * \n\t * Returns an <mxRectangle> with the size (width and height in pixels) of\n\t * the given string. The string may contain HTML markup. Newlines should be\n\t * converted to <br> before calling this method. The caller is responsible\n\t * for sanitizing the HTML markup.\n\t * \n\t * Example:\n\t * \n\t * (code)\n\t * var label = graph.getLabel(cell).replace(/\\n/g, \"<br>\");\n\t * var size = graph.getSizeForString(label);\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * text - String whose size should be returned.\n\t * fontSize - Integer that specifies the font size in pixels. Default is\n\t * <mxConstants.DEFAULT_FONTSIZE>.\n\t * fontFamily - String that specifies the name of the font family. Default\n\t * is <mxConstants.DEFAULT_FONTFAMILY>.\n\t * textWidth - Optional width for text wrapping.\n\t * fontStyle - Optional font style.\n\t */\n\tgetSizeForString: function(text, fontSize, fontFamily, textWidth, fontStyle)\n\t{\n\t\tfontSize = (fontSize != null) ? fontSize : mxConstants.DEFAULT_FONTSIZE;\n\t\tfontFamily = (fontFamily != null) ? fontFamily : mxConstants.DEFAULT_FONTFAMILY;\n\t\tvar div = document.createElement('div');\n\t\t\n\t\t// Sets the font size and family\n\t\tdiv.style.fontFamily = fontFamily;\n\t\tdiv.style.fontSize = Math.round(fontSize) + 'px';\n\t\tdiv.style.lineHeight = Math.round(fontSize * mxConstants.LINE_HEIGHT) + 'px';\n\t\t\n\t\t// Sets the font style\n\t\tif (fontStyle != null)\n\t\t{\n\t\t\tif ((fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t\t\t{\n\t\t\t\tdiv.style.fontWeight = 'bold';\n\t\t\t}\n\t\t\t\n\t\t\tif ((fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t\t\t{\n\t\t\t\tdiv.style.fontStyle = 'italic';\n\t\t\t}\n\t\t\t\n\t\t\tvar txtDecor = [];\n\t\t\t\n\t\t\tif ((fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t\t\t{\n\t\t\t\ttxtDecor.push('underline');\n\t\t\t}\n\t\t\t\n\t\t\tif ((fontStyle & mxConstants.FONT_STRIKETHROUGH) == mxConstants.FONT_STRIKETHROUGH)\n\t\t\t{\n\t\t\t\ttxtDecor.push('line-through');\n\t\t\t}\n\t\t\t\n\t\t\tif (txtDecor.length > 0)\n\t\t\t{\n\t\t\t\tdiv.style.textDecoration = txtDecor.join(' ');\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Disables block layout and outside wrapping and hides the div\n\t\tdiv.style.position = 'absolute';\n\t\tdiv.style.visibility = 'hidden';\n\t\tdiv.style.display = (mxClient.IS_QUIRKS) ? 'inline' : 'inline-block';\n\t\tdiv.style.zoom = '1';\n\t\t\n\t\tif (textWidth != null)\n\t\t{\n\t\t\tdiv.style.width = textWidth + 'px';\n\t\t\tdiv.style.whiteSpace = 'normal';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdiv.style.whiteSpace = 'nowrap';\n\t\t}\n\t\t\n\t\t// Adds the text and inserts into DOM for updating of size\n\t\tdiv.innerHTML = text;\n\t\tdocument.body.appendChild(div);\n\t\t\n\t\t// Gets the size and removes from DOM\n\t\tvar size = new mxRectangle(0, 0, div.offsetWidth, div.offsetHeight);\n\t\tdocument.body.removeChild(div);\n\t\t\n\t\treturn size;\n\t},\n\t\n\t/**\n\t * Function: getViewXml\n\t */\n\tgetViewXml: function(graph, scale, cells, x0, y0)\n\t{\n\t\tx0 = (x0 != null) ? x0 : 0;\n\t\ty0 = (y0 != null) ? y0 : 0;\n\t\tscale = (scale != null) ? scale : 1;\n\n\t\tif (cells == null)\n\t\t{\n\t\t\tvar model = graph.getModel();\n\t\t\tcells = [model.getRoot()];\n\t\t}\n\t\t\n\t\tvar view = graph.getView();\n\t\tvar result = null;\n\n\t\t// Disables events on the view\n\t\tvar eventsEnabled = view.isEventsEnabled();\n\t\tview.setEventsEnabled(false);\n\n\t\t// Workaround for label bounds not taken into account for image export.\n\t\t// Creates a temporary draw pane which is used for rendering the text.\n\t\t// Text rendering is required for finding the bounds of the labels.\n\t\tvar drawPane = view.drawPane;\n\t\tvar overlayPane = view.overlayPane;\n\n\t\tif (graph.dialect == mxConstants.DIALECT_SVG)\n\t\t{\n\t\t\tview.drawPane = document.createElementNS(mxConstants.NS_SVG, 'g');\n\t\t\tview.canvas.appendChild(view.drawPane);\n\n\t\t\t// Redirects cell overlays into temporary container\n\t\t\tview.overlayPane = document.createElementNS(mxConstants.NS_SVG, 'g');\n\t\t\tview.canvas.appendChild(view.overlayPane);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tview.drawPane = view.drawPane.cloneNode(false);\n\t\t\tview.canvas.appendChild(view.drawPane);\n\t\t\t\n\t\t\t// Redirects cell overlays into temporary container\n\t\t\tview.overlayPane = view.overlayPane.cloneNode(false);\n\t\t\tview.canvas.appendChild(view.overlayPane);\n\t\t}\n\n\t\t// Resets the translation\n\t\tvar translate = view.getTranslate();\n\t\tview.translate = new mxPoint(x0, y0);\n\n\t\t// Creates the temporary cell states in the view\n\t\tvar temp = new mxTemporaryCellStates(graph.getView(), scale, cells);\n\n\t\ttry\n\t\t{\n\t\t\tvar enc = new mxCodec();\n\t\t\tresult = enc.encode(graph.getView());\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\ttemp.destroy();\n\t\t\tview.translate = translate;\n\t\t\tview.canvas.removeChild(view.drawPane);\n\t\t\tview.canvas.removeChild(view.overlayPane);\n\t\t\tview.drawPane = drawPane;\n\t\t\tview.overlayPane = overlayPane;\n\t\t\tview.setEventsEnabled(eventsEnabled);\n\t\t}\n\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: getScaleForPageCount\n\t * \n\t * Returns the scale to be used for printing the graph with the given\n\t * bounds across the specifies number of pages with the given format. The\n\t * scale is always computed such that it given the given amount or fewer\n\t * pages in the print output. See <mxPrintPreview> for an example.\n\t * \n\t * Parameters:\n\t * \n\t * pageCount - Specifies the number of pages in the print output.\n\t * graph - <mxGraph> that should be printed.\n\t * pageFormat - Optional <mxRectangle> that specifies the page format.\n\t * Default is <mxConstants.PAGE_FORMAT_A4_PORTRAIT>.\n\t * border - The border along each side of every page.\n\t */\n\tgetScaleForPageCount: function(pageCount, graph, pageFormat, border)\n\t{\n\t\tif (pageCount < 1)\n\t\t{\n\t\t\t// We can't work with less than 1 page, return no scale\n\t\t\t// change\n\t\t\treturn 1;\n\t\t}\n\t\t\n\t\tpageFormat = (pageFormat != null) ? pageFormat : mxConstants.PAGE_FORMAT_A4_PORTRAIT;\n\t\tborder = (border != null) ? border : 0;\n\t\t\n\t\tvar availablePageWidth = pageFormat.width - (border * 2);\n\t\tvar availablePageHeight = pageFormat.height - (border * 2);\n\n\t\t// Work out the number of pages required if the\n\t\t// graph is not scaled.\n\t\tvar graphBounds = graph.getGraphBounds().clone();\n\t\tvar sc = graph.getView().getScale();\n\t\tgraphBounds.width /= sc;\n\t\tgraphBounds.height /= sc;\n\t\tvar graphWidth = graphBounds.width;\n\t\tvar graphHeight = graphBounds.height;\n\n\t\tvar scale = 1;\n\t\t\n\t\t// The ratio of the width/height for each printer page\n\t\tvar pageFormatAspectRatio = availablePageWidth / availablePageHeight;\n\t\t// The ratio of the width/height for the graph to be printer\n\t\tvar graphAspectRatio = graphWidth / graphHeight;\n\t\t\n\t\t// The ratio of horizontal pages / vertical pages for this \n\t\t// graph to maintain its aspect ratio on this page format\n\t\tvar pagesAspectRatio = graphAspectRatio / pageFormatAspectRatio;\n\t\t\n\t\t// Factor the square root of the page count up and down \n\t\t// by the pages aspect ratio to obtain a horizontal and \n\t\t// vertical page count that adds up to the page count\n\t\t// and has the correct aspect ratio\n\t\tvar pageRoot = Math.sqrt(pageCount);\n\t\tvar pagesAspectRatioSqrt = Math.sqrt(pagesAspectRatio);\n\t\tvar numRowPages = pageRoot * pagesAspectRatioSqrt;\n\t\tvar numColumnPages = pageRoot / pagesAspectRatioSqrt;\n\n\t\t// These value are rarely more than 2 rounding downs away from\n\t\t// a total that meets the page count. In cases of one being less \n\t\t// than 1 page, the other value can be too high and take more iterations \n\t\t// In this case, just change that value to be the page count, since \n\t\t// we know the other value is 1\n\t\tif (numRowPages < 1 && numColumnPages > pageCount)\n\t\t{\n\t\t\tvar scaleChange = numColumnPages / pageCount;\n\t\t\tnumColumnPages = pageCount;\n\t\t\tnumRowPages /= scaleChange;\n\t\t}\n\t\t\n\t\tif (numColumnPages < 1 && numRowPages > pageCount)\n\t\t{\n\t\t\tvar scaleChange = numRowPages / pageCount;\n\t\t\tnumRowPages = pageCount;\n\t\t\tnumColumnPages /= scaleChange;\n\t\t}\t\t\n\n\t\tvar currentTotalPages = Math.ceil(numRowPages) * Math.ceil(numColumnPages);\n\n\t\tvar numLoops = 0;\n\t\t\n\t\t// Iterate through while the rounded up number of pages comes to\n\t\t// a total greater than the required number\n\t\twhile (currentTotalPages > pageCount)\n\t\t{\n\t\t\t// Round down the page count (rows or columns) that is\n\t\t\t// closest to its next integer down in percentage terms.\n\t\t\t// i.e. Reduce the page total by reducing the total\n\t\t\t// page area by the least possible amount\n\n\t\t\tvar roundRowDownProportion = Math.floor(numRowPages) / numRowPages;\n\t\t\tvar roundColumnDownProportion = Math.floor(numColumnPages) / numColumnPages;\n\t\t\t\n\t\t\t// If the round down proportion is, work out the proportion to\n\t\t\t// round down to 1 page less\n\t\t\tif (roundRowDownProportion == 1)\n\t\t\t{\n\t\t\t\troundRowDownProportion = Math.floor(numRowPages-1) / numRowPages;\n\t\t\t}\n\t\t\tif (roundColumnDownProportion == 1)\n\t\t\t{\n\t\t\t\troundColumnDownProportion = Math.floor(numColumnPages-1) / numColumnPages;\n\t\t\t}\n\t\t\t\n\t\t\t// Check which rounding down is smaller, but in the case of very small roundings\n\t\t\t// try the other dimension instead\n\t\t\tvar scaleChange = 1;\n\t\t\t\n\t\t\t// Use the higher of the two values\n\t\t\tif (roundRowDownProportion > roundColumnDownProportion)\n\t\t\t{\n\t\t\t\tscaleChange = roundRowDownProportion;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tscaleChange = roundColumnDownProportion;\n\t\t\t}\n\n\t\t\tnumRowPages = numRowPages * scaleChange;\n\t\t\tnumColumnPages = numColumnPages * scaleChange;\n\t\t\tcurrentTotalPages = Math.ceil(numRowPages) * Math.ceil(numColumnPages);\n\t\t\t\n\t\t\tnumLoops++;\n\t\t\t\n\t\t\tif (numLoops > 10)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Work out the scale from the number of row pages required\n\t\t// The column pages will give the same value\n\t\tvar posterWidth = availablePageWidth * numRowPages;\n\t\tscale = posterWidth / graphWidth;\n\t\t\n\t\t// Allow for rounding errors\n\t\treturn scale * 0.99999;\n\t},\n\t\n\t/**\n\t * Function: show\n\t * \n\t * Copies the styles and the markup from the graph's container into the\n\t * given document and removes all cursor styles. The document is returned.\n\t * \n\t * This function should be called from within the document with the graph.\n\t * If you experience problems with missing stylesheets in IE then try adding\n\t * the domain to the trusted sites.\n\t * \n\t * Parameters:\n\t * \n\t * graph - <mxGraph> to be copied.\n\t * doc - Document where the new graph is created.\n\t * x0 - X-coordinate of the graph view origin. Default is 0.\n\t * y0 - Y-coordinate of the graph view origin. Default is 0.\n\t * w - Optional width of the graph view.\n\t * h - Optional height of the graph view.\n\t */\n\tshow: function(graph, doc, x0, y0, w, h)\n\t{\n\t\tx0 = (x0 != null) ? x0 : 0;\n\t\ty0 = (y0 != null) ? y0 : 0;\n\t\t\n\t\tif (doc == null)\n\t\t{\n\t\t\tvar wnd = window.open();\n\t\t\tdoc = wnd.document;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdoc.open();\n\t\t}\n\n\t\t// Workaround for missing print output in IE9 standards\n\t\tif (document.documentMode == 9)\n\t\t{\n\t\t\tdoc.writeln('<!--[if IE]><meta http-equiv=\"X-UA-Compatible\" content=\"IE=9\"><![endif]-->');\n\t\t}\n\t\t\n\t\tvar bounds = graph.getGraphBounds();\n\t\tvar dx = Math.ceil(x0 - bounds.x);\n\t\tvar dy = Math.ceil(y0 - bounds.y);\n\t\t\n\t\tif (w == null)\n\t\t{\n\t\t\tw = Math.ceil(bounds.width + x0) + Math.ceil(Math.ceil(bounds.x) - bounds.x);\n\t\t}\n\t\t\n\t\tif (h == null)\n\t\t{\n\t\t\th = Math.ceil(bounds.height + y0) + Math.ceil(Math.ceil(bounds.y) - bounds.y);\n\t\t}\n\t\t\n\t\t// Needs a special way of creating the page so that no click is required\n\t\t// to refresh the contents after the external CSS styles have been loaded.\n\t\t// To avoid a click or programmatic refresh, the styleSheets[].cssText\n\t\t// property is copied over from the original document.\n\t\tif (mxClient.IS_IE || document.documentMode == 11)\n\t\t{\n\t\t\tvar html = '<html><head>';\n\n\t\t\tvar base = document.getElementsByTagName('base');\n\t\t\t\n\t\t\tfor (var i = 0; i < base.length; i++)\n\t\t\t{\n\t\t\t\thtml += base[i].outerHTML;\n\t\t\t}\n\n\t\t\thtml += '<style>';\n\n\t\t\t// Copies the stylesheets without having to load them again\n\t\t\tfor (var i = 0; i < document.styleSheets.length; i++)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\thtml += document.styleSheets[i].cssText;\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\t// ignore security exception\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml += '</style></head><body style=\"margin:0px;\">';\n\t\t\t\n\t\t\t// Copies the contents of the graph container\n\t\t\thtml += '<div style=\"position:absolute;overflow:hidden;width:' + w + 'px;height:' + h + 'px;\"><div style=\"position:relative;left:' + dx + 'px;top:' + dy + 'px;\">';\n\t\t\thtml += graph.container.innerHTML;\n\t\t\thtml += '</div></div></body><html>';\n\n\t\t\tdoc.writeln(html);\n\t\t\tdoc.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdoc.writeln('<html><head>');\n\t\t\t\n\t\t\tvar base = document.getElementsByTagName('base');\n\t\t\t\n\t\t\tfor (var i = 0; i < base.length; i++)\n\t\t\t{\n\t\t\t\tdoc.writeln(mxUtils.getOuterHtml(base[i]));\n\t\t\t}\n\t\t\t\n\t\t\tvar links = document.getElementsByTagName('link');\n\t\t\t\n\t\t\tfor (var i = 0; i < links.length; i++)\n\t\t\t{\n\t\t\t\tdoc.writeln(mxUtils.getOuterHtml(links[i]));\n\t\t\t}\n\t\n\t\t\tvar styles = document.getElementsByTagName('style');\n\t\t\t\n\t\t\tfor (var i = 0; i < styles.length; i++)\n\t\t\t{\n\t\t\t\tdoc.writeln(mxUtils.getOuterHtml(styles[i]));\n\t\t\t}\n\n\t\t\tdoc.writeln('</head><body style=\"margin:0px;\"></body></html>');\n\t\t\tdoc.close();\n\n\t\t\tvar outer = doc.createElement('div');\n\t\t\touter.position = 'absolute';\n\t\t\touter.overflow = 'hidden';\n\t\t\touter.style.width = w + 'px';\n\t\t\touter.style.height = h + 'px';\n\n\t\t\t// Required for HTML labels if foreignObjects are disabled\n\t\t\tvar div = doc.createElement('div');\n\t\t\tdiv.style.position = 'absolute';\n\t\t\tdiv.style.left = dx + 'px';\n\t\t\tdiv.style.top = dy + 'px';\n\n\t\t\tvar node = graph.container.firstChild;\n\t\t\tvar svg = null;\n\t\t\t\n\t\t\twhile (node != null)\n\t\t\t{\n\t\t\t\tvar clone = node.cloneNode(true);\n\t\t\t\t\n\t\t\t\tif (node == graph.view.drawPane.ownerSVGElement)\n\t\t\t\t{\n\t\t\t\t\touter.appendChild(clone);\n\t\t\t\t\tsvg = clone;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdiv.appendChild(clone);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnode = node.nextSibling;\n\t\t\t}\n\n\t\t\tdoc.body.appendChild(outer);\n\t\t\t\n\t\t\tif (div.firstChild != null)\n\t\t\t{\n\t\t\t\tdoc.body.appendChild(div);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tif (svg != null)\n\t\t\t{\n\t\t\t\tsvg.style.minWidth = '';\n\t\t\t\tsvg.style.minHeight = '';\n\t\t\t\tsvg.firstChild.setAttribute('transform', 'translate(' + dx + ',' + dy + ')');\n\t\t\t}\n\t\t}\n\t\t\n\t\tmxUtils.removeCursors(doc.body);\n\t\n\t\treturn doc;\n\t},\n\t\n\t/**\n\t * Function: printScreen\n\t * \n\t * Prints the specified graph using a new window and the built-in print\n\t * dialog.\n\t * \n\t * This function should be called from within the document with the graph.\n\t * \n\t * Parameters:\n\t * \n\t * graph - <mxGraph> to be printed.\n\t */\n\tprintScreen: function(graph)\n\t{\n\t\tvar wnd = window.open();\n\t\tvar bounds = graph.getGraphBounds();\n\t\tmxUtils.show(graph, wnd.document);\n\t\t\n\t\tvar print = function()\n\t\t{\n\t\t\twnd.focus();\n\t\t\twnd.print();\n\t\t\twnd.close();\n\t\t};\n\t\t\n\t\t// Workaround for Google Chrome which needs a bit of a\n\t\t// delay in order to render the SVG contents\n\t\tif (mxClient.IS_GC)\n\t\t{\n\t\t\twnd.setTimeout(print, 500);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tprint();\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: popup\n\t * \n\t * Shows the specified text content in a new <mxWindow> or a new browser\n\t * window if isInternalWindow is false.\n\t * \n\t * Parameters:\n\t * \n\t * content - String that specifies the text to be displayed.\n\t * isInternalWindow - Optional boolean indicating if an mxWindow should be\n\t * used instead of a new browser window. Default is false.\n\t */\n\tpopup: function(content, isInternalWindow)\n\t{\n\t   \tif (isInternalWindow)\n\t   \t{\n\t\t\tvar div = document.createElement('div');\n\t\t\t\n\t\t\tdiv.style.overflow = 'scroll';\n\t\t\tdiv.style.width = '636px';\n\t\t\tdiv.style.height = '460px';\n\t\t\t\n\t\t\tvar pre = document.createElement('pre');\n\t\t    pre.innerHTML = mxUtils.htmlEntities(content, false).\n\t\t    \treplace(/\\n/g,'<br>').replace(/ /g, '&nbsp;');\n\t\t\t\n\t\t\tdiv.appendChild(pre);\n\t\t\t\n\t\t\tvar w = document.body.clientWidth;\n\t\t\tvar h = Math.max(document.body.clientHeight || 0, document.documentElement.clientHeight)\n\t\t\tvar wnd = new mxWindow('Popup Window', div,\n\t\t\t\tw/2-320, h/2-240, 640, 480, false, true);\n\n\t\t\twnd.setClosable(true);\n\t\t\twnd.setVisible(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Wraps up the XML content in a textarea\n\t\t\tif (mxClient.IS_NS)\n\t\t\t{\n\t\t\t    var wnd = window.open();\n\t\t\t\twnd.document.writeln('<pre>'+mxUtils.htmlEntities(content)+'</pre');\n\t\t\t   \twnd.document.close();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t    var wnd = window.open();\n\t\t\t    var pre = wnd.document.createElement('pre');\n\t\t\t    pre.innerHTML = mxUtils.htmlEntities(content, false).\n\t\t\t    \treplace(/\\n/g,'<br>').replace(/ /g, '&nbsp;');\n\t\t\t   \twnd.document.body.appendChild(pre);\n\t\t\t}\n\t   \t}\n\t},\n\t\n\t/**\n\t * Function: alert\n\t * \n\t * Displayss the given alert in a new dialog. This implementation uses the\n\t * built-in alert function. This is used to display validation errors when\n\t * connections cannot be changed or created.\n\t * \n\t * Parameters:\n\t * \n\t * message - String specifying the message to be displayed.\n\t */\n\talert: function(message)\n\t{\n\t\talert(message);\n\t},\n\t\n\t/**\n\t * Function: prompt\n\t * \n\t * Displays the given message in a prompt dialog. This implementation uses\n\t * the built-in prompt function.\n\t * \n\t * Parameters:\n\t * \n\t * message - String specifying the message to be displayed.\n\t * defaultValue - Optional string specifying the default value.\n\t */\n\tprompt: function(message, defaultValue)\n\t{\n\t\treturn prompt(message, (defaultValue != null) ? defaultValue : '');\n\t},\n\t\n\t/**\n\t * Function: confirm\n\t * \n\t * Displays the given message in a confirm dialog. This implementation uses\n\t * the built-in confirm function.\n\t * \n\t * Parameters:\n\t * \n\t * message - String specifying the message to be displayed.\n\t */\n\tconfirm: function(message)\n\t{\n\t\treturn confirm(message);\n\t},\n\n\t/**\n\t * Function: error\n\t * \n\t * Displays the given error message in a new <mxWindow> of the given width.\n\t * If close is true then an additional close button is added to the window.\n\t * The optional icon specifies the icon to be used for the window. Default\n\t * is <mxUtils.errorImage>.\n\t * \n\t * Parameters:\n\t * \n\t * message - String specifying the message to be displayed.\n\t * width - Integer specifying the width of the window.\n\t * close - Optional boolean indicating whether to add a close button.\n\t * icon - Optional icon for the window decoration.\n\t */\n\terror: function(message, width, close, icon)\n\t{\n\t\tvar div = document.createElement('div');\n\t\tdiv.style.padding = '20px';\n\n\t\tvar img = document.createElement('img');\n\t\timg.setAttribute('src', icon || mxUtils.errorImage);\n\t\timg.setAttribute('valign', 'bottom');\n\t\timg.style.verticalAlign = 'middle';\n\t\tdiv.appendChild(img);\n\n\t\tdiv.appendChild(document.createTextNode('\\u00a0')); // &nbsp;\n\t\tdiv.appendChild(document.createTextNode('\\u00a0')); // &nbsp;\n\t\tdiv.appendChild(document.createTextNode('\\u00a0')); // &nbsp;\n\t\tmxUtils.write(div, message);\n\n\t\tvar w = document.body.clientWidth;\n\t\tvar h = (document.body.clientHeight || document.documentElement.clientHeight);\n\t\tvar warn = new mxWindow(mxResources.get(mxUtils.errorResource) ||\n\t\t\tmxUtils.errorResource, div, (w-width)/2, h/4, width, null,\n\t\t\tfalse, true);\n\n\t\tif (close)\n\t\t{\n\t\t\tmxUtils.br(div);\n\t\t\t\n\t\t\tvar tmp = document.createElement('p');\n\t\t\tvar button = document.createElement('button');\n\n\t\t\tif (mxClient.IS_IE)\n\t\t\t{\n\t\t\t\tbutton.style.cssText = 'float:right';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbutton.setAttribute('style', 'float:right');\n\t\t\t}\n\n\t\t\tmxEvent.addListener(button, 'click', function(evt)\n\t\t\t{\n\t\t\t\twarn.destroy();\n\t\t\t});\n\n\t\t\tmxUtils.write(button, mxResources.get(mxUtils.closeResource) ||\n\t\t\t\tmxUtils.closeResource);\n\t\t\t\n\t\t\ttmp.appendChild(button);\n\t\t\tdiv.appendChild(tmp);\n\t\t\t\n\t\t\tmxUtils.br(div);\n\t\t\t\n\t\t\twarn.setClosable(true);\n\t\t}\n\t\t\n\t\twarn.setVisible(true);\n\t\t\n\t\treturn warn;\n\t},\n\n\t/**\n\t * Function: makeDraggable\n\t * \n\t * Configures the given DOM element to act as a drag source for the\n\t * specified graph. Returns a a new <mxDragSource>. If\n\t * <mxDragSource.guideEnabled> is enabled then the x and y arguments must\n\t * be used in funct to match the preview location.\n\t * \n\t * Example:\n\t * \n\t * (code)\n\t * var funct = function(graph, evt, cell, x, y)\n\t * {\n\t *   if (graph.canImportCell(cell))\n\t *   {\n\t *     var parent = graph.getDefaultParent();\n\t *     var vertex = null;\n\t *     \n\t *     graph.getModel().beginUpdate();\n\t *     try\n\t *     {\n\t * \t     vertex = graph.insertVertex(parent, null, 'Hello', x, y, 80, 30);\n\t *     }\n\t *     finally\n\t *     {\n\t *       graph.getModel().endUpdate();\n\t *     }\n\t *\n\t *     graph.setSelectionCell(vertex);\n\t *   }\n\t * }\n\t * \n\t * var img = document.createElement('img');\n\t * img.setAttribute('src', 'editors/images/rectangle.gif');\n\t * img.style.position = 'absolute';\n\t * img.style.left = '0px';\n\t * img.style.top = '0px';\n\t * img.style.width = '16px';\n\t * img.style.height = '16px';\n\t * \n\t * var dragImage = img.cloneNode(true);\n\t * dragImage.style.width = '32px';\n\t * dragImage.style.height = '32px';\n\t * mxUtils.makeDraggable(img, graph, funct, dragImage);\n\t * document.body.appendChild(img);\n\t * (end)\n\t * \n\t * Parameters:\n\t * \n\t * element - DOM element to make draggable.\n\t * graphF - <mxGraph> that acts as the drop target or a function that takes a\n\t * mouse event and returns the current <mxGraph>.\n\t * funct - Function to execute on a successful drop.\n\t * dragElement - Optional DOM node to be used for the drag preview.\n\t * dx - Optional horizontal offset between the cursor and the drag\n\t * preview.\n\t * dy - Optional vertical offset between the cursor and the drag\n\t * preview.\n\t * autoscroll - Optional boolean that specifies if autoscroll should be\n\t * used. Default is mxGraph.autoscroll.\n\t * scalePreview - Optional boolean that specifies if the preview element\n\t * should be scaled according to the graph scale. If this is true, then\n\t * the offsets will also be scaled. Default is false.\n\t * highlightDropTargets - Optional boolean that specifies if dropTargets\n\t * should be highlighted. Default is true.\n\t * getDropTarget - Optional function to return the drop target for a given\n\t * location (x, y). Default is mxGraph.getCellAt.\n\t */\n\tmakeDraggable: function(element, graphF, funct, dragElement, dx, dy, autoscroll,\n\t\t\tscalePreview, highlightDropTargets, getDropTarget)\n\t{\n\t\tvar dragSource = new mxDragSource(element, funct);\n\t\tdragSource.dragOffset = new mxPoint((dx != null) ? dx : 0,\n\t\t\t(dy != null) ? dy : mxConstants.TOOLTIP_VERTICAL_OFFSET);\n\t\tdragSource.autoscroll = autoscroll;\n\t\t\n\t\t// Cannot enable this by default. This needs to be enabled in the caller\n\t\t// if the funct argument uses the new x- and y-arguments.\n\t\tdragSource.setGuidesEnabled(false);\n\t\t\n\t\tif (highlightDropTargets != null)\n\t\t{\n\t\t\tdragSource.highlightDropTargets = highlightDropTargets;\n\t\t}\n\t\t\n\t\t// Overrides function to find drop target cell\n\t\tif (getDropTarget != null)\n\t\t{\n\t\t\tdragSource.getDropTarget = getDropTarget;\n\t\t}\n\t\t\n\t\t// Overrides function to get current graph\n\t\tdragSource.getGraphForEvent = function(evt)\n\t\t{\n\t\t\treturn (typeof(graphF) == 'function') ? graphF(evt) : graphF;\n\t\t};\n\t\t\n\t\t// Translates switches into dragSource customizations\n\t\tif (dragElement != null)\n\t\t{\n\t\t\tdragSource.createDragElement = function()\n\t\t\t{\n\t\t\t\treturn dragElement.cloneNode(true);\n\t\t\t};\n\t\t\t\n\t\t\tif (scalePreview)\n\t\t\t{\n\t\t\t\tdragSource.createPreviewElement = function(graph)\n\t\t\t\t{\n\t\t\t\t\tvar elt = dragElement.cloneNode(true);\n\n\t\t\t\t\tvar w = parseInt(elt.style.width);\n\t\t\t\t\tvar h = parseInt(elt.style.height);\n\t\t\t\t\telt.style.width = Math.round(w * graph.view.scale) + 'px';\n\t\t\t\t\telt.style.height = Math.round(h * graph.view.scale) + 'px';\n\t\t\t\t\t\n\t\t\t\t\treturn elt;\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn dragSource;\n\t}\n\n};\n\n__mxOutput.mxUtils = typeof mxUtils !== 'undefined' ? mxUtils : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n var mxConstants =\n {\n\t/**\n\t * Class: mxConstants\n\t * \n\t * Defines various global constants.\n\t * \n\t * Variable: DEFAULT_HOTSPOT\n\t * \n\t * Defines the portion of the cell which is to be used as a connectable\n\t * region. Default is 0.3. Possible values are 0 < x <= 1. \n\t */\n\tDEFAULT_HOTSPOT: 0.3,\n\n\t/**\n\t * Variable: MIN_HOTSPOT_SIZE\n\t * \n\t * Defines the minimum size in pixels of the portion of the cell which is\n\t * to be used as a connectable region. Default is 8.\n\t */\n\tMIN_HOTSPOT_SIZE: 8,\n\n\t/**\n\t * Variable: MAX_HOTSPOT_SIZE\n\t * \n\t * Defines the maximum size in pixels of the portion of the cell which is\n\t * to be used as a connectable region. Use 0 for no maximum. Default is 0.\n\t */\n\tMAX_HOTSPOT_SIZE: 0,\n\n\t/**\n\t * Variable: RENDERING_HINT_EXACT\n\t * \n\t * Defines the exact rendering hint.\n\t */\n\tRENDERING_HINT_EXACT: 'exact',\n\n\t/**\n\t * Variable: RENDERING_HINT_FASTER\n\t * \n\t * Defines the faster rendering hint.\n\t */\n\tRENDERING_HINT_FASTER: 'faster',\n\n\t/**\n\t * Variable: RENDERING_HINT_FASTEST\n\t * \n\t * Defines the fastest rendering hint.\n\t */\n\tRENDERING_HINT_FASTEST: 'fastest',\n\n\t/**\n\t * Variable: DIALECT_SVG\n\t * \n\t * Defines the SVG display dialect name.\n\t */\n\tDIALECT_SVG: 'svg',\n\n\t/**\n\t * Variable: DIALECT_VML\n\t * \n\t * Defines the VML display dialect name.\n\t */\n\tDIALECT_VML: 'vml',\n\n\t/**\n\t * Variable: DIALECT_MIXEDHTML\n\t * \n\t * Defines the mixed HTML display dialect name.\n\t */\n\tDIALECT_MIXEDHTML: 'mixedHtml',\n\n\t/**\n\t * Variable: DIALECT_PREFERHTML\n\t * \n\t * Defines the preferred HTML display dialect name.\n\t */\n\tDIALECT_PREFERHTML: 'preferHtml',\n\n\t/**\n\t * Variable: DIALECT_STRICTHTML\n\t * \n\t * Defines the strict HTML display dialect.\n\t */\n\tDIALECT_STRICTHTML: 'strictHtml',\n\n\t/**\n\t * Variable: NS_SVG\n\t * \n\t * Defines the SVG namespace.\n\t */\n\tNS_SVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * Variable: NS_XHTML\n\t * \n\t * Defines the XHTML namespace.\n\t */\n\tNS_XHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Variable: NS_XLINK\n\t * \n\t * Defines the XLink namespace.\n\t */\n\tNS_XLINK: 'http://www.w3.org/1999/xlink',\n\n\t/**\n\t * Variable: SHADOWCOLOR\n\t * \n\t * Defines the color to be used to draw shadows in shapes and windows.\n\t * Default is gray.\n\t */\n\tSHADOWCOLOR: 'gray',\n\n\t/**\n\t * Variable: VML_SHADOWCOLOR\n\t * \n\t * Used for shadow color in filters where transparency is not supported\n\t * (Microsoft Internet Explorer). Default is gray.\n\t */\n\tVML_SHADOWCOLOR: 'gray',\n\n\t/**\n\t * Variable: SHADOW_OFFSET_X\n\t * \n\t * Specifies the x-offset of the shadow. Default is 2.\n\t */\n\tSHADOW_OFFSET_X: 2,\n\n\t/**\n\t * Variable: SHADOW_OFFSET_Y\n\t * \n\t * Specifies the y-offset of the shadow. Default is 3.\n\t */\n\tSHADOW_OFFSET_Y: 3,\n\t\n\t/**\n\t * Variable: SHADOW_OPACITY\n\t * \n\t * Defines the opacity for shadows. Default is 1.\n\t */\n\tSHADOW_OPACITY: 1,\n \n\t/**\n\t * Variable: NODETYPE_ELEMENT\n\t * \n\t * DOM node of type ELEMENT.\n\t */\n\tNODETYPE_ELEMENT: 1,\n\n\t/**\n\t * Variable: NODETYPE_ATTRIBUTE\n\t * \n\t * DOM node of type ATTRIBUTE.\n\t */\n\tNODETYPE_ATTRIBUTE: 2,\n\n\t/**\n\t * Variable: NODETYPE_TEXT\n\t * \n\t * DOM node of type TEXT.\n\t */\n\tNODETYPE_TEXT: 3,\n\n\t/**\n\t * Variable: NODETYPE_CDATA\n\t * \n\t * DOM node of type CDATA.\n\t */\n\tNODETYPE_CDATA: 4,\n\t\n\t/**\n\t * Variable: NODETYPE_ENTITY_REFERENCE\n\t * \n\t * DOM node of type ENTITY_REFERENCE.\n\t */\n\tNODETYPE_ENTITY_REFERENCE: 5,\n\n\t/**\n\t * Variable: NODETYPE_ENTITY\n\t * \n\t * DOM node of type ENTITY.\n\t */\n\tNODETYPE_ENTITY: 6,\n\n\t/**\n\t * Variable: NODETYPE_PROCESSING_INSTRUCTION\n\t * \n\t * DOM node of type PROCESSING_INSTRUCTION.\n\t */\n\tNODETYPE_PROCESSING_INSTRUCTION: 7,\n\n\t/**\n\t * Variable: NODETYPE_COMMENT\n\t * \n\t * DOM node of type COMMENT.\n\t */\n\tNODETYPE_COMMENT: 8,\n\t\t\n\t/**\n\t * Variable: NODETYPE_DOCUMENT\n\t * \n\t * DOM node of type DOCUMENT.\n\t */\n\tNODETYPE_DOCUMENT: 9,\n\n\t/**\n\t * Variable: NODETYPE_DOCUMENTTYPE\n\t * \n\t * DOM node of type DOCUMENTTYPE.\n\t */\n\tNODETYPE_DOCUMENTTYPE: 10,\n\n\t/**\n\t * Variable: NODETYPE_DOCUMENT_FRAGMENT\n\t * \n\t * DOM node of type DOCUMENT_FRAGMENT.\n\t */\n\tNODETYPE_DOCUMENT_FRAGMENT: 11,\n\n\t/**\n\t * Variable: NODETYPE_NOTATION\n\t * \n\t * DOM node of type NOTATION.\n\t */\n\tNODETYPE_NOTATION: 12,\n\t\n\t/**\n\t * Variable: TOOLTIP_VERTICAL_OFFSET\n\t * \n\t * Defines the vertical offset for the tooltip.\n\t * Default is 16.\n\t */\n\tTOOLTIP_VERTICAL_OFFSET: 16,\n\n\t/**\n\t * Variable: DEFAULT_VALID_COLOR\n\t * \n\t * Specifies the default valid color. Default is #0000FF.\n\t */\n\tDEFAULT_VALID_COLOR: '#00FF00',\n\n\t/**\n\t * Variable: DEFAULT_INVALID_COLOR\n\t * \n\t * Specifies the default invalid color. Default is #FF0000.\n\t */\n\tDEFAULT_INVALID_COLOR: '#FF0000',\n\n\t/**\n\t * Variable: OUTLINE_HIGHLIGHT_COLOR\n\t * \n\t * Specifies the default highlight color for shape outlines.\n\t * Default is #0000FF. This is used in <mxEdgeHandler>.\n\t */\n\tOUTLINE_HIGHLIGHT_COLOR: '#00FF00',\n\n\t/**\n\t * Variable: OUTLINE_HIGHLIGHT_COLOR\n\t * \n\t * Defines the strokewidth to be used for shape outlines.\n\t * Default is 5. This is used in <mxEdgeHandler>.\n\t */\n\tOUTLINE_HIGHLIGHT_STROKEWIDTH: 5,\n\n\t/**\n\t * Variable: HIGHLIGHT_STROKEWIDTH\n\t * \n\t * Defines the strokewidth to be used for the highlights.\n\t * Default is 3.\n\t */\n\tHIGHLIGHT_STROKEWIDTH: 3,\n\n\t/**\n\t * Variable: CONSTRAINT_HIGHLIGHT_SIZE\n\t * \n\t * Size of the constraint highlight (in px). Default is 2.\n\t */\n\tHIGHLIGHT_SIZE: 2,\n\t\n\t/**\n\t * Variable: HIGHLIGHT_OPACITY\n\t * \n\t * Opacity (in %) used for the highlights (including outline).\n\t * Default is 100.\n\t */\n\tHIGHLIGHT_OPACITY: 100,\n\t\n\t/**\n\t * Variable: CURSOR_MOVABLE_VERTEX\n\t * \n\t * Defines the cursor for a movable vertex. Default is 'move'.\n\t */\n\tCURSOR_MOVABLE_VERTEX: 'move',\n\t\n\t/**\n\t * Variable: CURSOR_MOVABLE_EDGE\n\t * \n\t * Defines the cursor for a movable edge. Default is 'move'.\n\t */\n\tCURSOR_MOVABLE_EDGE: 'move',\n\t\n\t/**\n\t * Variable: CURSOR_LABEL_HANDLE\n\t * \n\t * Defines the cursor for a movable label. Default is 'default'.\n\t */\n\tCURSOR_LABEL_HANDLE: 'default',\n\t\n\t/**\n\t * Variable: CURSOR_TERMINAL_HANDLE\n\t * \n\t * Defines the cursor for a terminal handle. Default is 'pointer'.\n\t */\n\tCURSOR_TERMINAL_HANDLE: 'pointer',\n\t\n\t/**\n\t * Variable: CURSOR_BEND_HANDLE\n\t * \n\t * Defines the cursor for a movable bend. Default is 'crosshair'.\n\t */\n\tCURSOR_BEND_HANDLE: 'crosshair',\n\n\t/**\n\t * Variable: CURSOR_VIRTUAL_BEND_HANDLE\n\t * \n\t * Defines the cursor for a movable bend. Default is 'crosshair'.\n\t */\n\tCURSOR_VIRTUAL_BEND_HANDLE: 'crosshair',\n\t\n\t/**\n\t * Variable: CURSOR_CONNECT\n\t * \n\t * Defines the cursor for a connectable state. Default is 'pointer'.\n\t */\n\tCURSOR_CONNECT: 'pointer',\n\n\t/**\n\t * Variable: HIGHLIGHT_COLOR\n\t * \n\t * Defines the color to be used for the cell highlighting.\n\t * Use 'none' for no color. Default is #00FF00.\n\t */\n\tHIGHLIGHT_COLOR: '#00FF00',\n\n\t/**\n\t * Variable: TARGET_HIGHLIGHT_COLOR\n\t * \n\t * Defines the color to be used for highlighting a target cell for a new\n\t * or changed connection. Note that this may be either a source or\n\t * target terminal in the graph. Use 'none' for no color.\n\t * Default is #0000FF.\n\t */\n\tCONNECT_TARGET_COLOR: '#0000FF',\n\n\t/**\n\t * Variable: INVALID_CONNECT_TARGET_COLOR\n\t * \n\t * Defines the color to be used for highlighting a invalid target cells\n\t * for a new or changed connections. Note that this may be either a source\n\t * or target terminal in the graph. Use 'none' for no color. Default is\n\t * #FF0000.\n\t */\n\tINVALID_CONNECT_TARGET_COLOR: '#FF0000',\n\n\t/**\n\t * Variable: DROP_TARGET_COLOR\n\t * \n\t * Defines the color to be used for the highlighting target parent cells\n\t * (for drag and drop). Use 'none' for no color. Default is #0000FF.\n\t */\n\tDROP_TARGET_COLOR: '#0000FF',\n\n\t/**\n\t * Variable: VALID_COLOR\n\t * \n\t * Defines the color to be used for the coloring valid connection\n\t * previews. Use 'none' for no color. Default is #FF0000.\n\t */\n\tVALID_COLOR: '#00FF00',\n\n\t/**\n\t * Variable: INVALID_COLOR\n\t * \n\t * Defines the color to be used for the coloring invalid connection\n\t * previews. Use 'none' for no color. Default is #FF0000.\n\t */\n\tINVALID_COLOR: '#FF0000',\n\n\t/**\n\t * Variable: EDGE_SELECTION_COLOR\n\t * \n\t * Defines the color to be used for the selection border of edges. Use\n\t * 'none' for no color. Default is #00FF00.\n\t */\n\tEDGE_SELECTION_COLOR: '#00FF00',\n\n\t/**\n\t * Variable: VERTEX_SELECTION_COLOR\n\t * \n\t * Defines the color to be used for the selection border of vertices. Use\n\t * 'none' for no color. Default is #00FF00.\n\t */\n\tVERTEX_SELECTION_COLOR: '#00FF00',\n\n\t/**\n\t * Variable: VERTEX_SELECTION_STROKEWIDTH\n\t * \n\t * Defines the strokewidth to be used for vertex selections.\n\t * Default is 1.\n\t */\n\tVERTEX_SELECTION_STROKEWIDTH: 1,\n\n\t/**\n\t * Variable: EDGE_SELECTION_STROKEWIDTH\n\t * \n\t * Defines the strokewidth to be used for edge selections.\n\t * Default is 1.\n\t */\n\tEDGE_SELECTION_STROKEWIDTH: 1,\n\n\t/**\n\t * Variable: SELECTION_DASHED\n\t * \n\t * Defines the dashed state to be used for the vertex selection\n\t * border. Default is true.\n\t */\n\tVERTEX_SELECTION_DASHED: true,\n\n\t/**\n\t * Variable: SELECTION_DASHED\n\t * \n\t * Defines the dashed state to be used for the edge selection\n\t * border. Default is true.\n\t */\n\tEDGE_SELECTION_DASHED: true,\n\n\t/**\n\t * Variable: GUIDE_COLOR\n\t * \n\t * Defines the color to be used for the guidelines in mxGraphHandler.\n\t * Default is #FF0000.\n\t */\n\tGUIDE_COLOR: '#FF0000',\n\n\t/**\n\t * Variable: GUIDE_STROKEWIDTH\n\t * \n\t * Defines the strokewidth to be used for the guidelines in mxGraphHandler.\n\t * Default is 1.\n\t */\n\tGUIDE_STROKEWIDTH: 1,\n\n\t/**\n\t * Variable: OUTLINE_COLOR\n\t * \n\t * Defines the color to be used for the outline rectangle\n\t * border.  Use 'none' for no color. Default is #0099FF.\n\t */\n\tOUTLINE_COLOR: '#0099FF',\n\n\t/**\n\t * Variable: OUTLINE_STROKEWIDTH\n\t * \n\t * Defines the strokewidth to be used for the outline rectangle\n\t * stroke width. Default is 3.\n\t */\n\tOUTLINE_STROKEWIDTH: (mxClient.IS_IE) ? 2 : 3,\n\n\t/**\n\t * Variable: HANDLE_SIZE\n\t * \n\t * Defines the default size for handles. Default is 6.\n\t */\n\tHANDLE_SIZE: 6,\n\n\t/**\n\t * Variable: LABEL_HANDLE_SIZE\n\t * \n\t * Defines the default size for label handles. Default is 4.\n\t */\n\tLABEL_HANDLE_SIZE: 4,\n\n\t/**\n\t * Variable: HANDLE_FILLCOLOR\n\t * \n\t * Defines the color to be used for the handle fill color. Use 'none' for\n\t * no color. Default is #00FF00 (green).\n\t */\n\tHANDLE_FILLCOLOR: '#00FF00',\n\n\t/**\n\t * Variable: HANDLE_STROKECOLOR\n\t * \n\t * Defines the color to be used for the handle stroke color. Use 'none' for\n\t * no color. Default is black.\n\t */\n\tHANDLE_STROKECOLOR: 'black',\n\n\t/**\n\t * Variable: LABEL_HANDLE_FILLCOLOR\n\t * \n\t * Defines the color to be used for the label handle fill color. Use 'none'\n\t * for no color. Default is yellow.\n\t */\n\tLABEL_HANDLE_FILLCOLOR: 'yellow',\n\n\t/**\n\t * Variable: CONNECT_HANDLE_FILLCOLOR\n\t * \n\t * Defines the color to be used for the connect handle fill color. Use\n\t * 'none' for no color. Default is #0000FF (blue).\n\t */\n\tCONNECT_HANDLE_FILLCOLOR: '#0000FF',\n\n\t/**\n\t * Variable: LOCKED_HANDLE_FILLCOLOR\n\t * \n\t * Defines the color to be used for the locked handle fill color. Use\n\t * 'none' for no color. Default is #FF0000 (red).\n\t */\n\tLOCKED_HANDLE_FILLCOLOR: '#FF0000',\n\n\t/**\n\t * Variable: OUTLINE_HANDLE_FILLCOLOR\n\t * \n\t * Defines the color to be used for the outline sizer fill color. Use\n\t * 'none' for no color. Default is #00FFFF.\n\t */\n\tOUTLINE_HANDLE_FILLCOLOR: '#00FFFF',\n\n\t/**\n\t * Variable: OUTLINE_HANDLE_STROKECOLOR\n\t * \n\t * Defines the color to be used for the outline sizer stroke color. Use\n\t * 'none' for no color. Default is #0033FF.\n\t */\n\tOUTLINE_HANDLE_STROKECOLOR: '#0033FF',\n\n\t/**\n\t * Variable: DEFAULT_FONTFAMILY\n\t * \n\t * Defines the default family for all fonts. Default is Arial,Helvetica.\n\t */\n\tDEFAULT_FONTFAMILY: 'Arial,Helvetica',\n\n\t/**\n\t * Variable: DEFAULT_FONTSIZE\n\t * \n\t * Defines the default size (in px). Default is 11.\n\t */\n\tDEFAULT_FONTSIZE: 11,\n\n\t/**\n\t * Variable: DEFAULT_TEXT_DIRECTION\n\t * \n\t * Defines the default value for the <STYLE_TEXT_DIRECTION> if no value is\n\t * defined for it in the style. Default value is an empty string which means\n\t * the default system setting is used and no direction is set.\n\t */\n\tDEFAULT_TEXT_DIRECTION: '',\n\n\t/**\n\t * Variable: LINE_HEIGHT\n\t * \n\t * Defines the default line height for text labels. Default is 1.2.\n\t */\n\tLINE_HEIGHT: 1.2,\n\n\t/**\n\t * Variable: WORD_WRAP\n\t * \n\t * Defines the CSS value for the word-wrap property. Default is \"normal\".\n\t * Change this to \"break-word\" to allow long words to be able to be broken\n\t * and wrap onto the next line.\n\t */\n\tWORD_WRAP: 'normal',\n\n\t/**\n\t * Variable: ABSOLUTE_LINE_HEIGHT\n\t * \n\t * Specifies if absolute line heights should be used (px) in CSS. Default\n\t * is false. Set this to true for backwards compatibility.\n\t */\n\tABSOLUTE_LINE_HEIGHT: false,\n\n\t/**\n\t * Variable: DEFAULT_FONTSTYLE\n\t * \n\t * Defines the default style for all fonts. Default is 0. This can be set\n\t * to any combination of font styles as follows.\n\t * \n\t * (code)\n\t * mxConstants.DEFAULT_FONTSTYLE = mxConstants.FONT_BOLD | mxConstants.FONT_ITALIC;\n\t * (end)\n\t */\n\tDEFAULT_FONTSTYLE: 0,\n\n\t/**\n\t * Variable: DEFAULT_STARTSIZE\n\t * \n\t * Defines the default start size for swimlanes. Default is 40.\n\t */\n\tDEFAULT_STARTSIZE: 40,\n\n\t/**\n\t * Variable: DEFAULT_MARKERSIZE\n\t * \n\t * Defines the default size for all markers. Default is 6.\n\t */\n\tDEFAULT_MARKERSIZE: 6,\n\n\t/**\n\t * Variable: DEFAULT_IMAGESIZE\n\t * \n\t * Defines the default width and height for images used in the\n\t * label shape. Default is 24.\n\t */\n\tDEFAULT_IMAGESIZE: 24,\n\n\t/**\n\t * Variable: ENTITY_SEGMENT\n\t * \n\t * Defines the length of the horizontal segment of an Entity Relation.\n\t * This can be overridden using <mxConstants.STYLE_SEGMENT> style.\n\t * Default is 30.\n\t */\n\tENTITY_SEGMENT: 30,\n\n\t/**\n\t * Variable: RECTANGLE_ROUNDING_FACTOR\n\t * \n\t * Defines the rounding factor for rounded rectangles in percent between\n\t * 0 and 1. Values should be smaller than 0.5. Default is 0.15.\n\t */\n\tRECTANGLE_ROUNDING_FACTOR: 0.15,\n\n\t/**\n\t * Variable: LINE_ARCSIZE\n\t * \n\t * Defines the size of the arcs for rounded edges. Default is 20.\n\t */\n\tLINE_ARCSIZE: 20,\n\n\t/**\n\t * Variable: ARROW_SPACING\n\t * \n\t * Defines the spacing between the arrow shape and its terminals. Default is 0.\n\t */\n\tARROW_SPACING: 0,\n\n\t/**\n\t * Variable: ARROW_WIDTH\n\t * \n\t * Defines the width of the arrow shape. Default is 30.\n\t */\n\tARROW_WIDTH: 30,\n\n\t/**\n\t * Variable: ARROW_SIZE\n\t * \n\t * Defines the size of the arrowhead in the arrow shape. Default is 30.\n\t */\n\tARROW_SIZE: 30,\n\n\t/**\n\t * Variable: PAGE_FORMAT_A4_PORTRAIT\n\t * \n\t * Defines the rectangle for the A4 portrait page format. The dimensions\n\t * of this page format are 826x1169 pixels.\n\t */\n\tPAGE_FORMAT_A4_PORTRAIT: new mxRectangle(0, 0, 827, 1169),\n\n\t/**\n\t * Variable: PAGE_FORMAT_A4_PORTRAIT\n\t * \n\t * Defines the rectangle for the A4 portrait page format. The dimensions\n\t * of this page format are 826x1169 pixels.\n\t */\n\tPAGE_FORMAT_A4_LANDSCAPE: new mxRectangle(0, 0, 1169, 827),\n\n\t/**\n\t * Variable: PAGE_FORMAT_LETTER_PORTRAIT\n\t * \n\t * Defines the rectangle for the Letter portrait page format. The\n\t * dimensions of this page format are 850x1100 pixels.\n\t */\n\tPAGE_FORMAT_LETTER_PORTRAIT: new mxRectangle(0, 0, 850, 1100),\n\n\t/**\n\t * Variable: PAGE_FORMAT_LETTER_PORTRAIT\n\t * \n\t * Defines the rectangle for the Letter portrait page format. The dimensions\n\t * of this page format are 850x1100 pixels.\n\t */\n\tPAGE_FORMAT_LETTER_LANDSCAPE: new mxRectangle(0, 0, 1100, 850),\n\n\t/**\n\t * Variable: NONE\n\t * \n\t * Defines the value for none. Default is \"none\".\n\t */\n\tNONE: 'none',\n\n\t/**\n\t * Variable: STYLE_PERIMETER\n\t * \n\t * Defines the key for the perimeter style. This is a function that defines\n\t * the perimeter around a particular shape. Possible values are the\n\t * functions defined in <mxPerimeter>. Alternatively, the constants in this\n\t * class that start with \"PERIMETER_\" may be used to access\n\t * perimeter styles in <mxStyleRegistry>. Value is \"perimeter\".\n\t */\n\tSTYLE_PERIMETER: 'perimeter',\n\t\n\t/**\n\t * Variable: STYLE_SOURCE_PORT\n\t * \n\t * Defines the ID of the cell that should be used for computing the\n\t * perimeter point of the source for an edge. This allows for graphically\n\t * connecting to a cell while keeping the actual terminal of the edge.\n\t * Value is \"sourcePort\".\n\t */\n\tSTYLE_SOURCE_PORT: 'sourcePort',\n\t\n\t/**\n\t * Variable: STYLE_TARGET_PORT\n\t * \n\t * Defines the ID of the cell that should be used for computing the\n\t * perimeter point of the target for an edge. This allows for graphically\n\t * connecting to a cell while keeping the actual terminal of the edge.\n\t * Value is \"targetPort\".\n\t */\n\tSTYLE_TARGET_PORT: 'targetPort',\n\n\t/**\n\t * Variable: STYLE_PORT_CONSTRAINT\n\t * \n\t * Defines the direction(s) that edges are allowed to connect to cells in.\n\t * Possible values are \"DIRECTION_NORTH, DIRECTION_SOUTH, \n\t * DIRECTION_EAST\" and \"DIRECTION_WEST\". Value is\n\t * \"portConstraint\".\n\t */\n\tSTYLE_PORT_CONSTRAINT: 'portConstraint',\n\n\t/**\n\t * Variable: STYLE_PORT_CONSTRAINT_ROTATION\n\t * \n\t * Define whether port constraint directions are rotated with vertex\n\t * rotation. 0 (default) causes port constraints to remain absolute, \n\t * relative to the graph, 1 causes the constraints to rotate with\n\t * the vertex. Value is \"portConstraintRotation\".\n\t */\n\tSTYLE_PORT_CONSTRAINT_ROTATION: 'portConstraintRotation',\n\n\t/**\n\t * Variable: STYLE_SOURCE_PORT_CONSTRAINT\n\t * \n\t * Defines the direction(s) that edges are allowed to connect to sources in.\n\t * Possible values are \"DIRECTION_NORTH, DIRECTION_SOUTH, DIRECTION_EAST\"\n\t * and \"DIRECTION_WEST\". Value is \"sourcePortConstraint\".\n\t */\n\tSTYLE_SOURCE_PORT_CONSTRAINT: 'sourcePortConstraint',\n\n\t/**\n\t * Variable: STYLE_TARGET_PORT_CONSTRAINT\n\t * \n\t * Defines the direction(s) that edges are allowed to connect to targets in.\n\t * Possible values are \"DIRECTION_NORTH, DIRECTION_SOUTH, DIRECTION_EAST\"\n\t * and \"DIRECTION_WEST\". Value is \"targetPortConstraint\".\n\t */\n\tSTYLE_TARGET_PORT_CONSTRAINT: 'targetPortConstraint',\n\n\t/**\n\t * Variable: STYLE_OPACITY\n\t * \n\t * Defines the key for the opacity style. The type of the value is \n\t * numeric and the possible range is 0-100. Value is \"opacity\".\n\t */\n\tSTYLE_OPACITY: 'opacity',\n\n\t/**\n\t * Variable: STYLE_FILL_OPACITY\n\t * \n\t * Defines the key for the fill opacity style. The type of the value is \n\t * numeric and the possible range is 0-100. Value is \"fillOpacity\".\n\t */\n\tSTYLE_FILL_OPACITY: 'fillOpacity',\n\n\t/**\n\t * Variable: STYLE_STROKE_OPACITY\n\t * \n\t * Defines the key for the stroke opacity style. The type of the value is \n\t * numeric and the possible range is 0-100. Value is \"strokeOpacity\".\n\t */\n\tSTYLE_STROKE_OPACITY: 'strokeOpacity',\n\n\t/**\n\t * Variable: STYLE_TEXT_OPACITY\n\t * \n\t * Defines the key for the text opacity style. The type of the value is \n\t * numeric and the possible range is 0-100. Value is \"textOpacity\".\n\t */\n\tSTYLE_TEXT_OPACITY: 'textOpacity',\n\n\t/**\n\t * Variable: STYLE_TEXT_DIRECTION\n\t * \n\t * Defines the key for the text direction style. Possible values are\n\t * \"TEXT_DIRECTION_DEFAULT, TEXT_DIRECTION_AUTO, TEXT_DIRECTION_LTR\"\n\t * and \"TEXT_DIRECTION_RTL\". Value is \"textDirection\".\n\t * The default value for the style is defined in <DEFAULT_TEXT_DIRECTION>.\n\t * It is used is no value is defined for this key in a given style. This is\n\t * an experimental style that is currently ignored in the backends.\n\t */\n\tSTYLE_TEXT_DIRECTION: 'textDirection',\n\n\t/**\n\t * Variable: STYLE_OVERFLOW\n\t * \n\t * Defines the key for the overflow style. Possible values are 'visible',\n\t * 'hidden', 'fill' and 'width'. The default value is 'visible'. This value\n\t * specifies how overlapping vertex labels are handled. A value of\n\t * 'visible' will show the complete label. A value of 'hidden' will clip\n\t * the label so that it does not overlap the vertex bounds. A value of\n\t * 'fill' will use the vertex bounds and a value of 'width' will use the\n\t * vertex width for the label. See <mxGraph.isLabelClipped>. Note that\n\t * the vertical alignment is ignored for overflow fill and for horizontal\n\t * alignment, left should be used to avoid pixel offsets in Internet Explorer\n\t * 11 and earlier or if foreignObjects are disabled. Value is \"overflow\".\n\t */\n\tSTYLE_OVERFLOW: 'overflow',\n\n\t/**\n\t * Variable: STYLE_ORTHOGONAL\n\t * \n\t * Defines if the connection points on either end of the edge should be\n\t * computed so that the edge is vertical or horizontal if possible and\n\t * if the point is not at a fixed location. Default is false. This is\n\t * used in <mxGraph.isOrthogonal>, which also returns true if the edgeStyle\n\t * of the edge is an elbow or entity. Value is \"orthogonal\".\n\t */\n\tSTYLE_ORTHOGONAL: 'orthogonal',\n\n\t/**\n\t * Variable: STYLE_EXIT_X\n\t * \n\t * Defines the key for the horizontal relative coordinate connection point\n\t * of an edge with its source terminal. Value is \"exitX\".\n\t */\n\tSTYLE_EXIT_X: 'exitX',\n\n\t/**\n\t * Variable: STYLE_EXIT_Y\n\t * \n\t * Defines the key for the vertical relative coordinate connection point\n\t * of an edge with its source terminal. Value is \"exitY\".\n\t */\n\tSTYLE_EXIT_Y: 'exitY',\n\n\t\n\t/**\n\t* Variable: STYLE_EXIT_DX\n\t* \n\t* Defines the key for the horizontal offset of the connection point\n\t* of an edge with its source terminal. Value is \"exitDx\".\n\t*/\n\tSTYLE_EXIT_DX: 'exitDx',\n\n\t/**\n\t* Variable: STYLE_EXIT_DY\n\t* \n\t* Defines the key for the vertical offset of the connection point\n\t* of an edge with its source terminal. Value is \"exitDy\".\n\t*/\n\tSTYLE_EXIT_DY: 'exitDy',\n\t\n\t/**\n\t * Variable: STYLE_EXIT_PERIMETER\n\t * \n\t * Defines if the perimeter should be used to find the exact entry point\n\t * along the perimeter of the source. Possible values are 0 (false) and\n\t * 1 (true). Default is 1 (true). Value is \"exitPerimeter\".\n\t */\n\tSTYLE_EXIT_PERIMETER: 'exitPerimeter',\n\n\t/**\n\t * Variable: STYLE_ENTRY_X\n\t * \n\t * Defines the key for the horizontal relative coordinate connection point\n\t * of an edge with its target terminal. Value is \"entryX\".\n\t */\n\tSTYLE_ENTRY_X: 'entryX',\n\n\t/**\n\t * Variable: STYLE_ENTRY_Y\n\t * \n\t * Defines the key for the vertical relative coordinate connection point\n\t * of an edge with its target terminal. Value is \"entryY\".\n\t */\n\tSTYLE_ENTRY_Y: 'entryY',\n\n\t/**\n\t * Variable: STYLE_ENTRY_DX\n\t * \n\t* Defines the key for the horizontal offset of the connection point\n\t* of an edge with its target terminal. Value is \"entryDx\".\n\t*/\n\tSTYLE_ENTRY_DX: 'entryDx',\n\n\t/**\n\t * Variable: STYLE_ENTRY_DY\n\t * \n\t* Defines the key for the vertical offset of the connection point\n\t* of an edge with its target terminal. Value is \"entryDy\".\n\t*/\n\tSTYLE_ENTRY_DY: 'entryDy',\n\n\t/**\n\t * Variable: STYLE_ENTRY_PERIMETER\n\t * \n\t * Defines if the perimeter should be used to find the exact entry point\n\t * along the perimeter of the target. Possible values are 0 (false) and\n\t * 1 (true). Default is 1 (true). Value is \"entryPerimeter\".\n\t */\n\tSTYLE_ENTRY_PERIMETER: 'entryPerimeter',\n\n\t/**\n\t * Variable: STYLE_WHITE_SPACE\n\t * \n\t * Defines the key for the white-space style. Possible values are 'nowrap'\n\t * and 'wrap'. The default value is 'nowrap'. This value specifies how\n\t * white-space inside a HTML vertex label should be handled. A value of\n\t * 'nowrap' means the text will never wrap to the next line until a\n\t * linefeed is encountered. A value of 'wrap' means text will wrap when\n\t * necessary. This style is only used for HTML labels.\n\t * See <mxGraph.isWrapping>. Value is \"whiteSpace\".\n\t */\n\tSTYLE_WHITE_SPACE: 'whiteSpace',\n\n\t/**\n\t * Variable: STYLE_ROTATION\n\t * \n\t * Defines the key for the rotation style. The type of the value is \n\t * numeric and the possible range is 0-360. Value is \"rotation\".\n\t */\n\tSTYLE_ROTATION: 'rotation',\n\n\t/**\n\t * Variable: STYLE_FILLCOLOR\n\t * \n\t * Defines the key for the fill color. Possible values are all HTML color\n\t * names or HEX codes, as well as special keywords such as 'swimlane,\n\t * 'inherit' or 'indicated' to use the color code of a related cell or the\n\t * indicator shape. Value is \"fillColor\".\n\t */\n\tSTYLE_FILLCOLOR: 'fillColor',\n\n\t/**\n\t * Variable: STYLE_POINTER_EVENTS\n\t * \n\t * Specifies if pointer events should be fired on transparent backgrounds.\n\t * This style is currently only supported in <mxRectangleShape>. Default\n\t * is true. Value is \"pointerEvents\". This is typically set to\n\t * false in groups where the transparent part should allow any underlying\n\t * cells to be clickable.\n\t */\n\tSTYLE_POINTER_EVENTS: 'pointerEvents',\n\n\t/**\n\t * Variable: STYLE_SWIMLANE_FILLCOLOR\n\t * \n\t * Defines the key for the fill color of the swimlane background. Possible\n\t * values are all HTML color names or HEX codes. Default is no background.\n\t * Value is \"swimlaneFillColor\".\n\t */\n\tSTYLE_SWIMLANE_FILLCOLOR: 'swimlaneFillColor',\n\n\t/**\n\t * Variable: STYLE_MARGIN\n\t * \n\t * Defines the key for the margin between the ellipses in the double ellipse shape.\n\t * Possible values are all positive numbers. Value is \"margin\".\n\t */\n\tSTYLE_MARGIN: 'margin',\n\n\t/**\n\t * Variable: STYLE_GRADIENTCOLOR\n\t * \n\t * Defines the key for the gradient color. Possible values are all HTML color\n\t * names or HEX codes, as well as special keywords such as 'swimlane,\n\t * 'inherit' or 'indicated' to use the color code of a related cell or the\n\t * indicator shape. This is ignored if no fill color is defined. Value is\n\t * \"gradientColor\".\n\t */\n\tSTYLE_GRADIENTCOLOR: 'gradientColor',\n\n\t/**\n\t * Variable: STYLE_GRADIENT_DIRECTION\n\t * \n\t * Defines the key for the gradient direction. Possible values are\n\t * <DIRECTION_EAST>, <DIRECTION_WEST>, <DIRECTION_NORTH> and\n\t * <DIRECTION_SOUTH>. Default is <DIRECTION_SOUTH>. Generally, and by\n\t * default in mxGraph, gradient painting is done from the value of\n\t * <STYLE_FILLCOLOR> to the value of <STYLE_GRADIENTCOLOR>. Taking the\n\t * example of <DIRECTION_NORTH>, this means <STYLE_FILLCOLOR> color at the \n\t * bottom of paint pattern and <STYLE_GRADIENTCOLOR> at top, with a\n\t * gradient in-between. Value is \"gradientDirection\".\n\t */\n\tSTYLE_GRADIENT_DIRECTION: 'gradientDirection',\n\n\t/**\n\t * Variable: STYLE_STROKECOLOR\n\t * \n\t * Defines the key for the strokeColor style. Possible values are all HTML\n\t * color names or HEX codes, as well as special keywords such as 'swimlane,\n\t * 'inherit', 'indicated' to use the color code of a related cell or the\n\t * indicator shape or 'none' for no color. Value is \"strokeColor\".\n\t */\n\tSTYLE_STROKECOLOR: 'strokeColor',\n\n\t/**\n\t * Variable: STYLE_SEPARATORCOLOR\n\t * \n\t * Defines the key for the separatorColor style. Possible values are all\n\t * HTML color names or HEX codes. This style is only used for\n\t * <SHAPE_SWIMLANE> shapes. Value is \"separatorColor\".\n\t */\n\tSTYLE_SEPARATORCOLOR: 'separatorColor',\n\n\t/**\n\t * Variable: STYLE_STROKEWIDTH\n\t * \n\t * Defines the key for the strokeWidth style. The type of the value is \n\t * numeric and the possible range is any non-negative value larger or equal\n\t * to 1. The value defines the stroke width in pixels. Note: To hide a\n\t * stroke use strokeColor none. Value is \"strokeWidth\".\n\t */\n\tSTYLE_STROKEWIDTH: 'strokeWidth',\n\n\t/**\n\t * Variable: STYLE_ALIGN\n\t * \n\t * Defines the key for the align style. Possible values are <ALIGN_LEFT>,\n\t * <ALIGN_CENTER> and <ALIGN_RIGHT>. This value defines how the lines of\n\t * the label are horizontally aligned. <ALIGN_LEFT> mean label text lines\n\t * are aligned to left of the label bounds, <ALIGN_RIGHT> to the right of\n\t * the label bounds and <ALIGN_CENTER> means the center of the text lines\n\t * are aligned in the center of the label bounds. Note this value doesn't\n\t * affect the positioning of the overall label bounds relative to the\n\t * vertex, to move the label bounds horizontally, use\n\t * <STYLE_LABEL_POSITION>. Value is \"align\".\n\t */\n\tSTYLE_ALIGN: 'align',\n\n\t/**\n\t * Variable: STYLE_VERTICAL_ALIGN\n\t * \n\t * Defines the key for the verticalAlign style. Possible values are\n\t * <ALIGN_TOP>, <ALIGN_MIDDLE> and <ALIGN_BOTTOM>. This value defines how\n\t * the lines of the label are vertically aligned. <ALIGN_TOP> means the\n\t * topmost label text line is aligned against the top of the label bounds,\n\t * <ALIGN_BOTTOM> means the bottom-most label text line is aligned against\n\t * the bottom of the label bounds and <ALIGN_MIDDLE> means there is equal\n\t * spacing between the topmost text label line and the top of the label\n\t * bounds and the bottom-most text label line and the bottom of the label\n\t * bounds. Note this value doesn't affect the positioning of the overall\n\t * label bounds relative to the vertex, to move the label bounds\n\t * vertically, use <STYLE_VERTICAL_LABEL_POSITION>. Value is \"verticalAlign\".\n\t */\n\tSTYLE_VERTICAL_ALIGN: 'verticalAlign',\n\n\t/**\n\t * Variable: STYLE_LABEL_WIDTH\n\t * \n\t * Defines the key for the width of the label if the label position is not\n\t * center. Value is \"labelWidth\".\n\t */\n\tSTYLE_LABEL_WIDTH: 'labelWidth',\n\n\t/**\n\t * Variable: STYLE_LABEL_POSITION\n\t * \n\t * Defines the key for the horizontal label position of vertices. Possible\n\t * values are <ALIGN_LEFT>, <ALIGN_CENTER> and <ALIGN_RIGHT>. Default is\n\t * <ALIGN_CENTER>. The label align defines the position of the label\n\t * relative to the cell. <ALIGN_LEFT> means the entire label bounds is\n\t * placed completely just to the left of the vertex, <ALIGN_RIGHT> means\n\t * adjust to the right and <ALIGN_CENTER> means the label bounds are\n\t * vertically aligned with the bounds of the vertex. Note this value\n\t * doesn't affect the positioning of label within the label bounds, to move\n\t * the label horizontally within the label bounds, use <STYLE_ALIGN>.\n\t * Value is \"labelPosition\".\n\t */\n\tSTYLE_LABEL_POSITION: 'labelPosition',\n\n\t/**\n\t * Variable: STYLE_VERTICAL_LABEL_POSITION\n\t * \n\t * Defines the key for the vertical label position of vertices. Possible\n\t * values are <ALIGN_TOP>, <ALIGN_BOTTOM> and <ALIGN_MIDDLE>. Default is\n\t * <ALIGN_MIDDLE>. The label align defines the position of the label\n\t * relative to the cell. <ALIGN_TOP> means the entire label bounds is\n\t * placed completely just on the top of the vertex, <ALIGN_BOTTOM> means\n\t * adjust on the bottom and <ALIGN_MIDDLE> means the label bounds are\n\t * horizontally aligned with the bounds of the vertex. Note this value\n\t * doesn't affect the positioning of label within the label bounds, to move\n\t * the label vertically within the label bounds, use\n\t * <STYLE_VERTICAL_ALIGN>. Value is \"verticalLabelPosition\".\n\t */\n\tSTYLE_VERTICAL_LABEL_POSITION: 'verticalLabelPosition',\n\t\n\t/**\n\t * Variable: STYLE_IMAGE_ASPECT\n\t * \n\t * Defines the key for the image aspect style. Possible values are 0 (do\n\t * not preserve aspect) or 1 (keep aspect). This is only used in\n\t * <mxImageShape>. Default is 1. Value is \"imageAspect\".\n\t */\n\tSTYLE_IMAGE_ASPECT: 'imageAspect',\n\n\t/**\n\t * Variable: STYLE_IMAGE_ALIGN\n\t * \n\t * Defines the key for the align style. Possible values are <ALIGN_LEFT>,\n\t * <ALIGN_CENTER> and <ALIGN_RIGHT>. The value defines how any image in the\n\t * vertex label is aligned horizontally within the label bounds of a\n\t * <SHAPE_LABEL> shape. Value is \"imageAlign\".\n\t */\n\tSTYLE_IMAGE_ALIGN: 'imageAlign',\n\n\t/**\n\t * Variable: STYLE_IMAGE_VERTICAL_ALIGN\n\t * \n\t * Defines the key for the verticalAlign style. Possible values are\n\t * <ALIGN_TOP>, <ALIGN_MIDDLE> and <ALIGN_BOTTOM>. The value defines how\n\t * any image in the vertex label is aligned vertically within the label\n\t * bounds of a <SHAPE_LABEL> shape. Value is \"imageVerticalAlign\".\n\t */\n\tSTYLE_IMAGE_VERTICAL_ALIGN: 'imageVerticalAlign',\n\n\t/**\n\t * Variable: STYLE_GLASS\n\t * \n\t * Defines the key for the glass style. Possible values are 0 (disabled) and\n\t * 1(enabled). The default value is 0. This is used in <mxLabel>. Value is\n\t * \"glass\".\n\t */\n\tSTYLE_GLASS: 'glass',\n\n\t/**\n\t * Variable: STYLE_IMAGE\n\t * \n\t * Defines the key for the image style. Possible values are any image URL,\n\t * the type of the value is String. This is the path to the image that is\n\t * to be displayed within the label of a vertex. Data URLs should use the\n\t * following format: data:image/png,xyz where xyz is the base64 encoded\n\t * data (without the \"base64\"-prefix). Note that Data URLs are only\n\t * supported in modern browsers. Value is \"image\".\n\t */\n\tSTYLE_IMAGE: 'image',\n\n\t/**\n\t * Variable: STYLE_IMAGE_WIDTH\n\t * \n\t * Defines the key for the imageWidth style. The type of this value is\n\t * int, the value is the image width in pixels and must be greater than 0.\n\t * Value is \"imageWidth\".\n\t */\n\tSTYLE_IMAGE_WIDTH: 'imageWidth',\n\n\t/**\n\t * Variable: STYLE_IMAGE_HEIGHT\n\t * \n\t * Defines the key for the imageHeight style. The type of this value is\n\t * int, the value is the image height in pixels and must be greater than 0.\n\t * Value is \"imageHeight\".\n\t */\n\tSTYLE_IMAGE_HEIGHT: 'imageHeight',\n\n\t/**\n\t * Variable: STYLE_IMAGE_BACKGROUND\n\t * \n\t * Defines the key for the image background color. This style is only used\n\t * in <mxImageShape>. Possible values are all HTML color names or HEX\n\t * codes. Value is \"imageBackground\".\n\t */\n\tSTYLE_IMAGE_BACKGROUND: 'imageBackground',\n\n\t/**\n\t * Variable: STYLE_IMAGE_BORDER\n\t * \n\t * Defines the key for the image border color. This style is only used in\n\t * <mxImageShape>. Possible values are all HTML color names or HEX codes.\n\t * Value is \"imageBorder\".\n\t */\n\tSTYLE_IMAGE_BORDER: 'imageBorder',\n\n\t/**\n\t * Variable: STYLE_FLIPH\n\t * \n\t * Defines the key for the horizontal image flip. This style is only used\n\t * in <mxImageShape>. Possible values are 0 and 1. Default is 0. Value is\n\t * \"flipH\".\n\t */\n\tSTYLE_FLIPH: 'flipH',\n\n\t/**\n\t * Variable: STYLE_FLIPV\n\t * \n\t * Defines the key for the vertical flip. Possible values are 0 and 1.\n\t * Default is 0. Value is \"flipV\".\n\t */\n\tSTYLE_FLIPV: 'flipV',\n\n\t/**\n\t * Variable: STYLE_NOLABEL\n\t * \n\t * Defines the key for the noLabel style. If this is true then no label is\n\t * visible for a given cell. Possible values are true or false (1 or 0).\n\t * Default is false. Value is \"noLabel\".\n\t */\n\tSTYLE_NOLABEL: 'noLabel',\n\n\t/**\n\t * Variable: STYLE_NOEDGESTYLE\n\t * \n\t * Defines the key for the noEdgeStyle style. If this is true then no edge\n\t * style is applied for a given edge. Possible values are true or false\n\t * (1 or 0). Default is false. Value is \"noEdgeStyle\".\n\t */\n\tSTYLE_NOEDGESTYLE: 'noEdgeStyle',\n\n\t/**\n\t * Variable: STYLE_LABEL_BACKGROUNDCOLOR\n\t * \n\t * Defines the key for the label background color. Possible values are all\n\t * HTML color names or HEX codes. Value is \"labelBackgroundColor\".\n\t */\n\tSTYLE_LABEL_BACKGROUNDCOLOR: 'labelBackgroundColor',\n\n\t/**\n\t * Variable: STYLE_LABEL_BORDERCOLOR\n\t * \n\t * Defines the key for the label border color. Possible values are all\n\t * HTML color names or HEX codes. Value is \"labelBorderColor\".\n\t */\n\tSTYLE_LABEL_BORDERCOLOR: 'labelBorderColor',\n\n\t/**\n\t * Variable: STYLE_LABEL_PADDING\n\t * \n\t * Defines the key for the label padding, ie. the space between the label\n\t * border and the label. Value is \"labelPadding\".\n\t */\n\tSTYLE_LABEL_PADDING: 'labelPadding',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_SHAPE\n\t * \n\t * Defines the key for the indicator shape used within an <mxLabel>.\n\t * Possible values are all SHAPE_* constants or the names of any new\n\t * shapes. The indicatorShape has precedence over the indicatorImage.\n\t * Value is \"indicatorShape\".\n\t */\n\tSTYLE_INDICATOR_SHAPE: 'indicatorShape',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_IMAGE\n\t * \n\t * Defines the key for the indicator image used within an <mxLabel>.\n\t * Possible values are all image URLs. The indicatorShape has\n\t * precedence over the indicatorImage. Value is \"indicatorImage\".\n\t */\n\tSTYLE_INDICATOR_IMAGE: 'indicatorImage',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_COLOR\n\t * \n\t * Defines the key for the indicatorColor style. Possible values are all\n\t * HTML color names or HEX codes, as well as the special 'swimlane' keyword\n\t * to refer to the color of the parent swimlane if one exists. Value is\n\t * \"indicatorColor\".\n\t */\n\tSTYLE_INDICATOR_COLOR: 'indicatorColor',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_STROKECOLOR\n\t * \n\t * Defines the key for the indicator stroke color in <mxLabel>.\n\t * Possible values are all color codes. Value is \"indicatorStrokeColor\".\n\t */\n\tSTYLE_INDICATOR_STROKECOLOR: 'indicatorStrokeColor',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_GRADIENTCOLOR\n\t * \n\t * Defines the key for the indicatorGradientColor style. Possible values\n\t * are all HTML color names or HEX codes. This style is only supported in\n\t * <SHAPE_LABEL> shapes. Value is \"indicatorGradientColor\".\n\t */\n\tSTYLE_INDICATOR_GRADIENTCOLOR: 'indicatorGradientColor',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_SPACING\n\t * \n\t * The defines the key for the spacing between the label and the\n\t * indicator in <mxLabel>. Possible values are in pixels. Value is\n\t * \"indicatorSpacing\".\n\t */\n\tSTYLE_INDICATOR_SPACING: 'indicatorSpacing',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_WIDTH\n\t * \n\t * Defines the key for the indicator width. Possible values start at 0 (in\n\t * pixels). Value is \"indicatorWidth\".\n\t */\n\tSTYLE_INDICATOR_WIDTH: 'indicatorWidth',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_HEIGHT\n\t * \n\t * Defines the key for the indicator height. Possible values start at 0 (in\n\t * pixels). Value is \"indicatorHeight\".\n\t */\n\tSTYLE_INDICATOR_HEIGHT: 'indicatorHeight',\n\n\t/**\n\t * Variable: STYLE_INDICATOR_DIRECTION\n\t * \n\t * Defines the key for the indicatorDirection style. The direction style is\n\t * used to specify the direction of certain shapes (eg. <mxTriangle>).\n\t * Possible values are <DIRECTION_EAST> (default), <DIRECTION_WEST>,\n\t * <DIRECTION_NORTH> and <DIRECTION_SOUTH>. Value is \"indicatorDirection\".\n\t */\n\tSTYLE_INDICATOR_DIRECTION: 'indicatorDirection',\n\n\t/**\n\t * Variable: STYLE_SHADOW\n\t * \n\t * Defines the key for the shadow style. The type of the value is Boolean.\n\t * Value is \"shadow\".\n\t */\n\tSTYLE_SHADOW: 'shadow',\n\t\n\t/**\n\t * Variable: STYLE_SEGMENT\n\t * \n\t * Defines the key for the segment style. The type of this value is float\n\t * and the value represents the size of the horizontal segment of the\n\t * entity relation style. Default is ENTITY_SEGMENT. Value is \"segment\".\n\t */\n\tSTYLE_SEGMENT: 'segment',\n\t\n\t/**\n\t * Variable: STYLE_ENDARROW\n\t *\n\t * Defines the key for the end arrow marker. Possible values are all\n\t * constants with an ARROW-prefix. This is only used in <mxConnector>.\n\t * Value is \"endArrow\".\n\t *\n\t * Example:\n\t * (code)\n\t * style[mxConstants.STYLE_ENDARROW] = mxConstants.ARROW_CLASSIC;\n\t * (end)\n\t */\n\tSTYLE_ENDARROW: 'endArrow',\n\n\t/**\n\t * Variable: STYLE_STARTARROW\n\t * \n\t * Defines the key for the start arrow marker. Possible values are all\n\t * constants with an ARROW-prefix. This is only used in <mxConnector>.\n\t * See <STYLE_ENDARROW>. Value is \"startArrow\".\n\t */\n\tSTYLE_STARTARROW: 'startArrow',\n\n\t/**\n\t * Variable: STYLE_ENDSIZE\n\t * \n\t * Defines the key for the endSize style. The type of this value is numeric\n\t * and the value represents the size of the end marker in pixels. Value is\n\t * \"endSize\".\n\t */\n\tSTYLE_ENDSIZE: 'endSize',\n\n\t/**\n\t * Variable: STYLE_STARTSIZE\n\t * \n\t * Defines the key for the startSize style. The type of this value is\n\t * numeric and the value represents the size of the start marker or the\n\t * size of the swimlane title region depending on the shape it is used for.\n\t * Value is \"startSize\".\n\t */\n\tSTYLE_STARTSIZE: 'startSize',\n\n\t/**\n\t * Variable: STYLE_SWIMLANE_LINE\n\t * \n\t * Defines the key for the swimlaneLine style. This style specifies whether\n\t * the line between the title regio of a swimlane should be visible. Use 0\n\t * for hidden or 1 (default) for visible. Value is \"swimlaneLine\".\n\t */\n\tSTYLE_SWIMLANE_LINE: 'swimlaneLine',\n\n\t/**\n\t * Variable: STYLE_ENDFILL\n\t * \n\t * Defines the key for the endFill style. Use 0 for no fill or 1 (default)\n\t * for fill. (This style is only exported via <mxImageExport>.) Value is\n\t * \"endFill\".\n\t */\n\tSTYLE_ENDFILL: 'endFill',\n\n\t/**\n\t * Variable: STYLE_STARTFILL\n\t * \n\t * Defines the key for the startFill style. Use 0 for no fill or 1 (default)\n\t * for fill. (This style is only exported via <mxImageExport>.) Value is\n\t * \"startFill\".\n\t */\n\tSTYLE_STARTFILL: 'startFill',\n\n\t/**\n\t * Variable: STYLE_DASHED\n\t * \n\t * Defines the key for the dashed style. Use 0 (default) for non-dashed or 1\n\t * for dashed. Value is \"dashed\".\n\t */\n\tSTYLE_DASHED: 'dashed',\n\n\t/**\n\t * Variable: STYLE_DASH_PATTERN\n\t * \n\t * Defines the key for the dashed pattern style in SVG and image exports.\n\t * The type of this value is a space separated list of numbers that specify\n\t * a custom-defined dash pattern. Dash styles are defined in terms of the\n\t * length of the dash (the drawn part of the stroke) and the length of the\n\t * space between the dashes. The lengths are relative to the line width: a\n\t * length of \"1\" is equal to the line width. VML ignores this style and\n\t * uses dashStyle instead as defined in the VML specification. This style\n\t * is only used in the <mxConnector> shape. Value is \"dashPattern\".\n\t */\n\tSTYLE_DASH_PATTERN: 'dashPattern',\n\n\t/**\n\t * Variable: STYLE_FIX_DASH\n\t * \n\t * Defines the key for the fixDash style. Use 0 (default) for dash patterns\n\t * that depend on the linewidth and 1 for dash patterns that ignore the\n\t * line width. Value is \"fixDash\".\n\t */\n\tSTYLE_FIX_DASH: 'fixDash',\n\n\t/**\n\t * Variable: STYLE_ROUNDED\n\t * \n\t * Defines the key for the rounded style. The type of this value is\n\t * Boolean. For edges this determines whether or not joins between edges\n\t * segments are smoothed to a rounded finish. For vertices that have the\n\t * rectangle shape, this determines whether or not the rectangle is\n\t * rounded. Use 0 (default) for non-rounded or 1 for rounded. Value is\n\t * \"rounded\".\n\t */\n\tSTYLE_ROUNDED: 'rounded',\n\n\t/**\n\t * Variable: STYLE_CURVED\n\t * \n\t * Defines the key for the curved style. The type of this value is\n\t * Boolean. It is only applicable for connector shapes. Use 0 (default)\n\t * for non-curved or 1 for curved. Value is \"curved\".\n\t */\n\tSTYLE_CURVED: 'curved',\n\n\t/**\n\t * Variable: STYLE_ARCSIZE\n\t * \n\t * Defines the rounding factor for a rounded rectangle in percent (without\n\t * the percent sign). Possible values are between 0 and 100. If this value\n\t * is not specified then RECTANGLE_ROUNDING_FACTOR * 100 is used. For\n\t * edges, this defines the absolute size of rounded corners in pixels. If\n\t * this values is not specified then LINE_ARCSIZE is used.\n\t * (This style is only exported via <mxImageExport>.) Value is \"arcSize\".\n\t */\n\tSTYLE_ARCSIZE: 'arcSize',\n\n\t/**\n\t * Variable: STYLE_ABSOLUTE_ARCSIZE\n\t * \n\t * Defines the key for the absolute arc size style. This specifies if\n\t * arcSize for rectangles is abolute or relative. Possible values are 1\n\t * and 0 (default). Value is \"absoluteArcSize\".\n\t */\n\tSTYLE_ABSOLUTE_ARCSIZE: 'absoluteArcSize',\n\n\t/**\n\t * Variable: STYLE_SOURCE_PERIMETER_SPACING\n\t * \n\t * Defines the key for the source perimeter spacing. The type of this value\n\t * is numeric. This is the distance between the source connection point of\n\t * an edge and the perimeter of the source vertex in pixels. This style\n\t * only applies to edges. Value is \"sourcePerimeterSpacing\".\n\t */\n\tSTYLE_SOURCE_PERIMETER_SPACING: 'sourcePerimeterSpacing',\n\n\t/**\n\t * Variable: STYLE_TARGET_PERIMETER_SPACING\n\t * \n\t * Defines the key for the target perimeter spacing. The type of this value\n\t * is numeric. This is the distance between the target connection point of\n\t * an edge and the perimeter of the target vertex in pixels. This style\n\t * only applies to edges. Value is \"targetPerimeterSpacing\".\n\t */\n\tSTYLE_TARGET_PERIMETER_SPACING: 'targetPerimeterSpacing',\n\n\t/**\n\t * Variable: STYLE_PERIMETER_SPACING\n\t * \n\t * Defines the key for the perimeter spacing. This is the distance between\n\t * the connection point and the perimeter in pixels. When used in a vertex\n\t * style, this applies to all incoming edges to floating ports (edges that\n\t * terminate on the perimeter of the vertex). When used in an edge style,\n\t * this spacing applies to the source and target separately, if they\n\t * terminate in floating ports (on the perimeter of the vertex). Value is\n\t * \"perimeterSpacing\".\n\t */\n\tSTYLE_PERIMETER_SPACING: 'perimeterSpacing',\n\n\t/**\n\t * Variable: STYLE_SPACING\n\t * \n\t * Defines the key for the spacing. The value represents the spacing, in\n\t * pixels, added to each side of a label in a vertex (style applies to\n\t * vertices only). Value is \"spacing\".\n\t */\n\tSTYLE_SPACING: 'spacing',\n\n\t/**\n\t * Variable: STYLE_SPACING_TOP\n\t * \n\t * Defines the key for the spacingTop style. The value represents the\n\t * spacing, in pixels, added to the top side of a label in a vertex (style\n\t * applies to vertices only). Value is \"spacingTop\".\n\t */\n\tSTYLE_SPACING_TOP: 'spacingTop',\n\n\t/**\n\t * Variable: STYLE_SPACING_LEFT\n\t * \n\t * Defines the key for the spacingLeft style. The value represents the\n\t * spacing, in pixels, added to the left side of a label in a vertex (style\n\t * applies to vertices only). Value is \"spacingLeft\".\n\t */\n\tSTYLE_SPACING_LEFT: 'spacingLeft',\n\n\t/**\n\t * Variable: STYLE_SPACING_BOTTOM\n\t * \n\t * Defines the key for the spacingBottom style The value represents the\n\t * spacing, in pixels, added to the bottom side of a label in a vertex\n\t * (style applies to vertices only). Value is \"spacingBottom\".\n\t */\n\tSTYLE_SPACING_BOTTOM: 'spacingBottom',\n\n\t/**\n\t * Variable: STYLE_SPACING_RIGHT\n\t * \n\t * Defines the key for the spacingRight style The value represents the\n\t * spacing, in pixels, added to the right side of a label in a vertex (style\n\t * applies to vertices only). Value is \"spacingRight\".\n\t */\n\tSTYLE_SPACING_RIGHT: 'spacingRight',\n\n\t/**\n\t * Variable: STYLE_HORIZONTAL\n\t * \n\t * Defines the key for the horizontal style. Possible values are\n\t * true or false. This value only applies to vertices. If the <STYLE_SHAPE>\n\t * is \"SHAPE_SWIMLANE\" a value of false indicates that the\n\t * swimlane should be drawn vertically, true indicates to draw it\n\t * horizontally. If the shape style does not indicate that this vertex is a\n\t * swimlane, this value affects only whether the label is drawn\n\t * horizontally or vertically. Value is \"horizontal\".\n\t */\n\tSTYLE_HORIZONTAL: 'horizontal',\n\n\t/**\n\t * Variable: STYLE_DIRECTION\n\t * \n\t * Defines the key for the direction style. The direction style is used\n\t * to specify the direction of certain shapes (eg. <mxTriangle>).\n\t * Possible values are <DIRECTION_EAST> (default), <DIRECTION_WEST>,\n\t * <DIRECTION_NORTH> and <DIRECTION_SOUTH>. Value is \"direction\".\n\t */\n\tSTYLE_DIRECTION: 'direction',\n\n\t/**\n\t * Variable: STYLE_ANCHOR_POINT_DIRECTION\n\t * \n\t * Defines the key for the anchorPointDirection style. The defines if the\n\t * direction style should be taken into account when computing the fixed\n\t * point location for connected edges. Default is 1 (yes). Set this to 0\n\t * to ignore the direction style for fixed connection points. Value is\n\t * \"anchorPointDirection\".\n\t */\n\tSTYLE_ANCHOR_POINT_DIRECTION: 'anchorPointDirection',\n\n\t/**\n\t * Variable: STYLE_ELBOW\n\t * \n\t * Defines the key for the elbow style. Possible values are\n\t * <ELBOW_HORIZONTAL> and <ELBOW_VERTICAL>. Default is <ELBOW_HORIZONTAL>.\n\t * This defines how the three segment orthogonal edge style leaves its\n\t * terminal vertices. The vertical style leaves the terminal vertices at\n\t * the top and bottom sides. Value is \"elbow\".\n\t */\n\tSTYLE_ELBOW: 'elbow',\n\n\t/**\n\t * Variable: STYLE_FONTCOLOR\n\t * \n\t * Defines the key for the fontColor style. Possible values are all HTML\n\t * color names or HEX codes. Value is \"fontColor\".\n\t */\n\tSTYLE_FONTCOLOR: 'fontColor',\n\n\t/**\n\t * Variable: STYLE_FONTFAMILY\n\t * \n\t * Defines the key for the fontFamily style. Possible values are names such\n\t * as Arial; Dialog; Verdana; Times New Roman. The value is of type String.\n\t * Value is fontFamily.\n\t */\n\tSTYLE_FONTFAMILY: 'fontFamily',\n\n\t/**\n\t * Variable: STYLE_FONTSIZE\n\t * \n\t * Defines the key for the fontSize style (in px). The type of the value\n\t * is int. Value is \"fontSize\".\n\t */\n\tSTYLE_FONTSIZE: 'fontSize',\n\n\t/**\n\t * Variable: STYLE_FONTSTYLE\n\t * \n\t * Defines the key for the fontStyle style. Values may be any logical AND\n\t * (sum) of <FONT_BOLD>, <FONT_ITALIC> and <FONT_UNDERLINE>.\n\t * The type of the value is int. Value is \"fontStyle\".\n\t */\n\tSTYLE_FONTSTYLE: 'fontStyle',\n\t\n\t/**\n\t * Variable: STYLE_ASPECT\n\t * \n\t * Defines the key for the aspect style. Possible values are empty or fixed.\n\t * If fixed is used then the aspect ratio of the cell will be maintained\n\t * when resizing. Default is empty. Value is \"aspect\".\n\t */\n\tSTYLE_ASPECT: 'aspect',\n\n\t/**\n\t * Variable: STYLE_AUTOSIZE\n\t * \n\t * Defines the key for the autosize style. This specifies if a cell should be\n\t * resized automatically if the value has changed. Possible values are 0 or 1.\n\t * Default is 0. See <mxGraph.isAutoSizeCell>. This is normally combined with\n\t * <STYLE_RESIZABLE> to disable manual sizing. Value is \"autosize\".\n\t */\n\tSTYLE_AUTOSIZE: 'autosize',\n\n\t/**\n\t * Variable: STYLE_FOLDABLE\n\t * \n\t * Defines the key for the foldable style. This specifies if a cell is foldable\n\t * using a folding icon. Possible values are 0 or 1. Default is 1. See\n\t * <mxGraph.isCellFoldable>. Value is \"foldable\".\n\t */\n\tSTYLE_FOLDABLE: 'foldable',\n\n\t/**\n\t * Variable: STYLE_EDITABLE\n\t * \n\t * Defines the key for the editable style. This specifies if the value of\n\t * a cell can be edited using the in-place editor. Possible values are 0 or\n\t * 1. Default is 1. See <mxGraph.isCellEditable>. Value is \"editable\".\n\t */\n\tSTYLE_EDITABLE: 'editable',\n\n\t/**\n\t * Variable: STYLE_BACKGROUND_OUTLINE\n\t * \n\t * Defines the key for the backgroundOutline style. This specifies if a\n\t * only the background of a cell should be painted when it is highlighted.\n\t * Possible values are 0 or 1. Default is 0. Value is \"backgroundOutline\".\n\t */\n\tSTYLE_BACKGROUND_OUTLINE: 'backgroundOutline',\n\n\t/**\n\t * Variable: STYLE_BENDABLE\n\t * \n\t * Defines the key for the bendable style. This specifies if the control\n\t * points of an edge can be moved. Possible values are 0 or 1. Default is\n\t * 1. See <mxGraph.isCellBendable>. Value is \"bendable\".\n\t */\n\tSTYLE_BENDABLE: 'bendable',\n\n\t/**\n\t * Variable: STYLE_MOVABLE\n\t * \n\t * Defines the key for the movable style. This specifies if a cell can\n\t * be moved. Possible values are 0 or 1. Default is 1. See\n\t * <mxGraph.isCellMovable>. Value is \"movable\".\n\t */\n\tSTYLE_MOVABLE: 'movable',\n\n\t/**\n\t * Variable: STYLE_RESIZABLE\n\t * \n\t * Defines the key for the resizable style. This specifies if a cell can\n\t * be resized. Possible values are 0 or 1. Default is 1. See\n\t * <mxGraph.isCellResizable>. Value is \"resizable\".\n\t */\n\tSTYLE_RESIZABLE: 'resizable',\n\n\t/**\n\t * Variable: STYLE_RESIZE_WIDTH\n\t * \n\t * Defines the key for the resizeWidth style. This specifies if a cell's\n\t * width is resized if the parent is resized. If this is 1 then the width\n\t * will be resized even if the cell's geometry is relative. If this is 0\n\t * then the cell's width will not be resized. Default is not defined. Value\n\t * is \"resizeWidth\".\n\t */\n\tSTYLE_RESIZE_WIDTH: 'resizeWidth',\n\n\t/**\n\t * Variable: STYLE_RESIZE_WIDTH\n\t * \n\t * Defines the key for the resizeHeight style. This specifies if a cell's\n\t * height if resize if the parent is resized. If this is 1 then the height\n\t * will be resized even if the cell's geometry is relative. If this is 0\n\t * then the cell's height will not be resized. Default is not defined. Value\n\t * is \"resizeHeight\".\n\t */\n\tSTYLE_RESIZE_HEIGHT: 'resizeHeight',\n\n\t/**\n\t * Variable: STYLE_ROTATABLE\n\t * \n\t * Defines the key for the rotatable style. This specifies if a cell can\n\t * be rotated. Possible values are 0 or 1. Default is 1. See\n\t * <mxGraph.isCellRotatable>. Value is \"rotatable\".\n\t */\n\tSTYLE_ROTATABLE: 'rotatable',\n\n\t/**\n\t * Variable: STYLE_CLONEABLE\n\t * \n\t * Defines the key for the cloneable style. This specifies if a cell can\n\t * be cloned. Possible values are 0 or 1. Default is 1. See\n\t * <mxGraph.isCellCloneable>. Value is \"cloneable\".\n\t */\n\tSTYLE_CLONEABLE: 'cloneable',\n\n\t/**\n\t * Variable: STYLE_DELETABLE\n\t * \n\t * Defines the key for the deletable style. This specifies if a cell can be\n\t * deleted. Possible values are 0 or 1. Default is 1. See\n\t * <mxGraph.isCellDeletable>. Value is \"deletable\".\n\t */\n\tSTYLE_DELETABLE: 'deletable',\n\n\t/**\n\t * Variable: STYLE_SHAPE\n\t * \n\t * Defines the key for the shape. Possible values are all constants with\n\t * a SHAPE-prefix or any newly defined shape names. Value is \"shape\".\n\t */\n\tSTYLE_SHAPE: 'shape',\n\n\t/**\n\t * Variable: STYLE_EDGE\n\t * \n\t * Defines the key for the edge style. Possible values are the functions\n\t * defined in <mxEdgeStyle>. Value is \"edgeStyle\".\n\t */\n\tSTYLE_EDGE: 'edgeStyle',\n\n\t/**\n\t * Variable: STYLE_JETTY_SIZE\n\t * \n\t * Defines the key for the jetty size in <mxEdgeStyle.OrthConnector>.\n\t * Default is 10. Possible values are all numeric values or \"auto\".\n\t * Jetty size is the minimum length of the orthogonal segment before\n\t * it attaches to a shape.\n\t * Value is \"jettySize\".\n\t */\n\tSTYLE_JETTY_SIZE: 'jettySize',\n\n\t/**\n\t * Variable: STYLE_SOURCE_JETTY_SIZE\n\t * \n\t * Defines the key for the jetty size in <mxEdgeStyle.OrthConnector>.\n\t * Default is 10. Possible values are numeric values or \"auto\". This has\n\t * precedence over <STYLE_JETTY_SIZE>. Value is \"sourceJettySize\".\n\t */\n\tSTYLE_SOURCE_JETTY_SIZE: 'sourceJettySize',\n\n\t/**\n\t * Variable: targetJettySize\n\t * \n\t * Defines the key for the jetty size in <mxEdgeStyle.OrthConnector>.\n\t * Default is 10. Possible values are numeric values or \"auto\". This has\n\t * precedence over <STYLE_JETTY_SIZE>. Value is \"targetJettySize\".\n\t */\n\tSTYLE_TARGET_JETTY_SIZE: 'targetJettySize',\n\n\t/**\n\t * Variable: STYLE_LOOP\n\t * \n\t * Defines the key for the loop style. Possible values are the functions\n\t * defined in <mxEdgeStyle>. Value is \"loopStyle\". Default is\n\t * <mxGraph.defaultLoopStylean>.\n\t */\n\tSTYLE_LOOP: 'loopStyle',\n\n\t/**\n\t * Variable: STYLE_ORTHOGONAL_LOOP\n\t * \n\t * Defines the key for the orthogonal loop style. Possible values are 0 and\n\t * 1. Default is 0. Value is \"orthogonalLoop\". Use this style to specify\n\t * if loops with no waypoints and defined anchor points should be routed\n\t * using <STYLE_LOOP> or not routed.\n\t */\n\tSTYLE_ORTHOGONAL_LOOP: 'orthogonalLoop',\n\n\t/**\n\t * Variable: STYLE_ROUTING_CENTER_X\n\t * \n\t * Defines the key for the horizontal routing center. Possible values are\n\t * between -0.5 and 0.5. This is the relative offset from the center used\n\t * for connecting edges. The type of this value is numeric. Value is\n\t * \"routingCenterX\".\n\t */\n\tSTYLE_ROUTING_CENTER_X: 'routingCenterX',\n\n\t/**\n\t * Variable: STYLE_ROUTING_CENTER_Y\n\t * \n\t * Defines the key for the vertical routing center. Possible values are\n\t * between -0.5 and 0.5. This is the relative offset from the center used\n\t * for connecting edges. The type of this value is numeric. Value is\n\t * \"routingCenterY\".\n\t */\n\tSTYLE_ROUTING_CENTER_Y: 'routingCenterY',\n\n\t/**\n\t * Variable: FONT_BOLD\n\t * \n\t * Constant for bold fonts. Default is 1.\n\t */\n\tFONT_BOLD: 1,\n\n\t/**\n\t * Variable: FONT_ITALIC\n\t * \n\t * Constant for italic fonts. Default is 2.\n\t */\n\tFONT_ITALIC: 2,\n\n\t/**\n\t * Variable: FONT_UNDERLINE\n\t * \n\t * Constant for underlined fonts. Default is 4.\n\t */\n\tFONT_UNDERLINE: 4,\n\n\t/**\n\t * Variable: FONT_STRIKETHROUGH\n\t * \n\t * Constant for strikthrough fonts. Default is 8.\n\t */\n\tFONT_STRIKETHROUGH: 8,\n\t\n\t/**\n\t * Variable: SHAPE_RECTANGLE\n\t * \n\t * Name under which <mxRectangleShape> is registered in <mxCellRenderer>.\n\t * Default is rectangle.\n\t */\n\tSHAPE_RECTANGLE: 'rectangle',\n\n\t/**\n\t * Variable: SHAPE_ELLIPSE\n\t * \n\t * Name under which <mxEllipse> is registered in <mxCellRenderer>.\n\t * Default is ellipse.\n\t */\n\tSHAPE_ELLIPSE: 'ellipse',\n\n\t/**\n\t * Variable: SHAPE_DOUBLE_ELLIPSE\n\t * \n\t * Name under which <mxDoubleEllipse> is registered in <mxCellRenderer>.\n\t * Default is doubleEllipse.\n\t */\n\tSHAPE_DOUBLE_ELLIPSE: 'doubleEllipse',\n\n\t/**\n\t * Variable: SHAPE_RHOMBUS\n\t * \n\t * Name under which <mxRhombus> is registered in <mxCellRenderer>.\n\t * Default is rhombus.\n\t */\n\tSHAPE_RHOMBUS: 'rhombus',\n\n\t/**\n\t * Variable: SHAPE_LINE\n\t * \n\t * Name under which <mxLine> is registered in <mxCellRenderer>.\n\t * Default is line.\n\t */\n\tSHAPE_LINE: 'line',\n\n\t/**\n\t * Variable: SHAPE_IMAGE\n\t * \n\t * Name under which <mxImageShape> is registered in <mxCellRenderer>.\n\t * Default is image.\n\t */\n\tSHAPE_IMAGE: 'image',\n\t\n\t/**\n\t * Variable: SHAPE_ARROW\n\t * \n\t * Name under which <mxArrow> is registered in <mxCellRenderer>.\n\t * Default is arrow.\n\t */\n\tSHAPE_ARROW: 'arrow',\n\t\n\t/**\n\t * Variable: SHAPE_ARROW_CONNECTOR\n\t * \n\t * Name under which <mxArrowConnector> is registered in <mxCellRenderer>.\n\t * Default is arrowConnector.\n\t */\n\tSHAPE_ARROW_CONNECTOR: 'arrowConnector',\n\t\n\t/**\n\t * Variable: SHAPE_LABEL\n\t * \n\t * Name under which <mxLabel> is registered in <mxCellRenderer>.\n\t * Default is label.\n\t */\n\tSHAPE_LABEL: 'label',\n\t\n\t/**\n\t * Variable: SHAPE_CYLINDER\n\t * \n\t * Name under which <mxCylinder> is registered in <mxCellRenderer>.\n\t * Default is cylinder.\n\t */\n\tSHAPE_CYLINDER: 'cylinder',\n\t\n\t/**\n\t * Variable: SHAPE_SWIMLANE\n\t * \n\t * Name under which <mxSwimlane> is registered in <mxCellRenderer>.\n\t * Default is swimlane.\n\t */\n\tSHAPE_SWIMLANE: 'swimlane',\n\t\t\n\t/**\n\t * Variable: SHAPE_CONNECTOR\n\t * \n\t * Name under which <mxConnector> is registered in <mxCellRenderer>.\n\t * Default is connector.\n\t */\n\tSHAPE_CONNECTOR: 'connector',\n\n\t/**\n\t * Variable: SHAPE_ACTOR\n\t * \n\t * Name under which <mxActor> is registered in <mxCellRenderer>.\n\t * Default is actor.\n\t */\n\tSHAPE_ACTOR: 'actor',\n\t\t\n\t/**\n\t * Variable: SHAPE_CLOUD\n\t * \n\t * Name under which <mxCloud> is registered in <mxCellRenderer>.\n\t * Default is cloud.\n\t */\n\tSHAPE_CLOUD: 'cloud',\n\t\t\n\t/**\n\t * Variable: SHAPE_TRIANGLE\n\t * \n\t * Name under which <mxTriangle> is registered in <mxCellRenderer>.\n\t * Default is triangle.\n\t */\n\tSHAPE_TRIANGLE: 'triangle',\n\t\t\n\t/**\n\t * Variable: SHAPE_HEXAGON\n\t * \n\t * Name under which <mxHexagon> is registered in <mxCellRenderer>.\n\t * Default is hexagon.\n\t */\n\tSHAPE_HEXAGON: 'hexagon',\n\n\t/**\n\t * Variable: ARROW_CLASSIC\n\t * \n\t * Constant for classic arrow markers.\n\t */\n\tARROW_CLASSIC: 'classic',\n\n\t/**\n\t * Variable: ARROW_CLASSIC_THIN\n\t * \n\t * Constant for thin classic arrow markers.\n\t */\n\tARROW_CLASSIC_THIN: 'classicThin',\n\n\t/**\n\t * Variable: ARROW_BLOCK\n\t * \n\t * Constant for block arrow markers.\n\t */\n\tARROW_BLOCK: 'block',\n\n\t/**\n\t * Variable: ARROW_BLOCK_THIN\n\t * \n\t * Constant for thin block arrow markers.\n\t */\n\tARROW_BLOCK_THIN: 'blockThin',\n\n\t/**\n\t * Variable: ARROW_OPEN\n\t * \n\t * Constant for open arrow markers.\n\t */\n\tARROW_OPEN: 'open',\n\n\t/**\n\t * Variable: ARROW_OPEN_THIN\n\t * \n\t * Constant for thin open arrow markers.\n\t */\n\tARROW_OPEN_THIN: 'openThin',\n\n\t/**\n\t * Variable: ARROW_OVAL\n\t * \n\t * Constant for oval arrow markers.\n\t */\n\tARROW_OVAL: 'oval',\n\n\t/**\n\t * Variable: ARROW_DIAMOND\n\t * \n\t * Constant for diamond arrow markers.\n\t */\n\tARROW_DIAMOND: 'diamond',\n\n\t/**\n\t * Variable: ARROW_DIAMOND_THIN\n\t * \n\t * Constant for thin diamond arrow markers.\n\t */\n\tARROW_DIAMOND_THIN: 'diamondThin',\n\n\t/**\n\t * Variable: ALIGN_LEFT\n\t * \n\t * Constant for left horizontal alignment. Default is left.\n\t */\n\tALIGN_LEFT: 'left',\n\n\t/**\n\t * Variable: ALIGN_CENTER\n\t * \n\t * Constant for center horizontal alignment. Default is center.\n\t */\n\tALIGN_CENTER: 'center',\n\n\t/**\n\t * Variable: ALIGN_RIGHT\n\t * \n\t * Constant for right horizontal alignment. Default is right.\n\t */\n\tALIGN_RIGHT: 'right',\n\n\t/**\n\t * Variable: ALIGN_TOP\n\t * \n\t * Constant for top vertical alignment. Default is top.\n\t */\n\tALIGN_TOP: 'top',\n\n\t/**\n\t * Variable: ALIGN_MIDDLE\n\t * \n\t * Constant for middle vertical alignment. Default is middle.\n\t */\n\tALIGN_MIDDLE: 'middle',\n\n\t/**\n\t * Variable: ALIGN_BOTTOM\n\t * \n\t * Constant for bottom vertical alignment. Default is bottom.\n\t */\n\tALIGN_BOTTOM: 'bottom',\n\n\t/**\n\t * Variable: DIRECTION_NORTH\n\t * \n\t * Constant for direction north. Default is north.\n\t */\n\tDIRECTION_NORTH: 'north',\n\n\t/**\n\t * Variable: DIRECTION_SOUTH\n\t * \n\t * Constant for direction south. Default is south.\n\t */\n\tDIRECTION_SOUTH: 'south',\n\n\t/**\n\t * Variable: DIRECTION_EAST\n\t * \n\t * Constant for direction east. Default is east.\n\t */\n\tDIRECTION_EAST: 'east',\n\n\t/**\n\t * Variable: DIRECTION_WEST\n\t * \n\t * Constant for direction west. Default is west.\n\t */\n\tDIRECTION_WEST: 'west',\n\n\t/**\n\t * Variable: TEXT_DIRECTION_DEFAULT\n\t * \n\t * Constant for text direction default. Default is an empty string. Use\n\t * this value to use the default text direction of the operating system. \n\t */\n\tTEXT_DIRECTION_DEFAULT: '',\n\n\t/**\n\t * Variable: TEXT_DIRECTION_AUTO\n\t * \n\t * Constant for text direction automatic. Default is auto. Use this value\n\t * to find the direction for a given text with <mxText.getAutoDirection>. \n\t */\n\tTEXT_DIRECTION_AUTO: 'auto',\n\n\t/**\n\t * Variable: TEXT_DIRECTION_LTR\n\t * \n\t * Constant for text direction left to right. Default is ltr. Use this\n\t * value for left to right text direction.\n\t */\n\tTEXT_DIRECTION_LTR: 'ltr',\n\n\t/**\n\t * Variable: TEXT_DIRECTION_RTL\n\t * \n\t * Constant for text direction right to left. Default is rtl. Use this\n\t * value for right to left text direction.\n\t */\n\tTEXT_DIRECTION_RTL: 'rtl',\n\n\t/**\n\t * Variable: DIRECTION_MASK_NONE\n\t * \n\t * Constant for no direction.\n\t */\n\tDIRECTION_MASK_NONE: 0,\n\n\t/**\n\t * Variable: DIRECTION_MASK_WEST\n\t * \n\t * Bitwise mask for west direction.\n\t */\n\tDIRECTION_MASK_WEST: 1,\n\t\n\t/**\n\t * Variable: DIRECTION_MASK_NORTH\n\t * \n\t * Bitwise mask for north direction.\n\t */\n\tDIRECTION_MASK_NORTH: 2,\n\n\t/**\n\t * Variable: DIRECTION_MASK_SOUTH\n\t * \n\t * Bitwise mask for south direction.\n\t */\n\tDIRECTION_MASK_SOUTH: 4,\n\n\t/**\n\t * Variable: DIRECTION_MASK_EAST\n\t * \n\t * Bitwise mask for east direction.\n\t */\n\tDIRECTION_MASK_EAST: 8,\n\t\n\t/**\n\t * Variable: DIRECTION_MASK_ALL\n\t * \n\t * Bitwise mask for all directions.\n\t */\n\tDIRECTION_MASK_ALL: 15,\n\n\t/**\n\t * Variable: ELBOW_VERTICAL\n\t * \n\t * Constant for elbow vertical. Default is horizontal.\n\t */\n\tELBOW_VERTICAL: 'vertical',\n\n\t/**\n\t * Variable: ELBOW_HORIZONTAL\n\t * \n\t * Constant for elbow horizontal. Default is horizontal.\n\t */\n\tELBOW_HORIZONTAL: 'horizontal',\n\n\t/**\n\t * Variable: EDGESTYLE_ELBOW\n\t * \n\t * Name of the elbow edge style. Can be used as a string value\n\t * for the STYLE_EDGE style.\n\t */\n\tEDGESTYLE_ELBOW: 'elbowEdgeStyle',\n\n\t/**\n\t * Variable: EDGESTYLE_ENTITY_RELATION\n\t * \n\t * Name of the entity relation edge style. Can be used as a string value\n\t * for the STYLE_EDGE style.\n\t */\n\tEDGESTYLE_ENTITY_RELATION: 'entityRelationEdgeStyle',\n\n\t/**\n\t * Variable: EDGESTYLE_LOOP\n\t * \n\t * Name of the loop edge style. Can be used as a string value\n\t * for the STYLE_EDGE style.\n\t */\n\tEDGESTYLE_LOOP: 'loopEdgeStyle',\n\n\t/**\n\t * Variable: EDGESTYLE_SIDETOSIDE\n\t * \n\t * Name of the side to side edge style. Can be used as a string value\n\t * for the STYLE_EDGE style.\n\t */\n\tEDGESTYLE_SIDETOSIDE: 'sideToSideEdgeStyle',\n\n\t/**\n\t * Variable: EDGESTYLE_TOPTOBOTTOM\n\t * \n\t * Name of the top to bottom edge style. Can be used as a string value\n\t * for the STYLE_EDGE style.\n\t */\n\tEDGESTYLE_TOPTOBOTTOM: 'topToBottomEdgeStyle',\n\n\t/**\n\t * Variable: EDGESTYLE_ORTHOGONAL\n\t * \n\t * Name of the generic orthogonal edge style. Can be used as a string value\n\t * for the STYLE_EDGE style.\n\t */\n\tEDGESTYLE_ORTHOGONAL: 'orthogonalEdgeStyle',\n\n\t/**\n\t * Variable: EDGESTYLE_SEGMENT\n\t * \n\t * Name of the generic segment edge style. Can be used as a string value\n\t * for the STYLE_EDGE style.\n\t */\n\tEDGESTYLE_SEGMENT: 'segmentEdgeStyle',\n \n\t/**\n\t * Variable: PERIMETER_ELLIPSE\n\t * \n\t * Name of the ellipse perimeter. Can be used as a string value\n\t * for the STYLE_PERIMETER style.\n\t */\n\tPERIMETER_ELLIPSE: 'ellipsePerimeter',\n\n\t/**\n\t * Variable: PERIMETER_RECTANGLE\n\t *\n\t * Name of the rectangle perimeter. Can be used as a string value\n\t * for the STYLE_PERIMETER style.\n\t */\n\tPERIMETER_RECTANGLE: 'rectanglePerimeter',\n\n\t/**\n\t * Variable: PERIMETER_RHOMBUS\n\t * \n\t * Name of the rhombus perimeter. Can be used as a string value\n\t * for the STYLE_PERIMETER style.\n\t */\n\tPERIMETER_RHOMBUS: 'rhombusPerimeter',\n\n\t/**\n\t * Variable: PERIMETER_HEXAGON\n\t * \n\t * Name of the hexagon perimeter. Can be used as a string value \n\t * for the STYLE_PERIMETER style.\n\t */\n\tPERIMETER_HEXAGON: 'hexagonPerimeter',\n\n\t/**\n\t * Variable: PERIMETER_TRIANGLE\n\t * \n\t * Name of the triangle perimeter. Can be used as a string value\n\t * for the STYLE_PERIMETER style.\n\t */\n\tPERIMETER_TRIANGLE: 'trianglePerimeter'\n};\n\n__mxOutput.mxConstants = typeof mxConstants !== 'undefined' ? mxConstants : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxEventObject\n * \n * The mxEventObject is a wrapper for all properties of a single event.\n * Additionally, it also offers functions to consume the event and check if it\n * was consumed as follows:\n * \n * (code)\n * evt.consume();\n * INV: evt.isConsumed() == true\n * (end)\n * \n * Constructor: mxEventObject\n *\n * Constructs a new event object with the specified name. An optional\n * sequence of key, value pairs can be appended to define properties.\n * \n * Example:\n *\n * (code)\n * new mxEventObject(\"eventName\", key1, val1, .., keyN, valN)\n * (end)\n */\nfunction mxEventObject(name)\n{\n\tthis.name = name;\n\tthis.properties = [];\n\t\n\tfor (var i = 1; i < arguments.length; i += 2)\n\t{\n\t\tif (arguments[i + 1] != null)\n\t\t{\n\t\t\tthis.properties[arguments[i]] = arguments[i + 1];\n\t\t}\n\t}\n};\n\n/**\n * Variable: name\n *\n * Holds the name.\n */\nmxEventObject.prototype.name = null;\n\n/**\n * Variable: properties\n *\n * Holds the properties as an associative array.\n */\nmxEventObject.prototype.properties = null;\n\n/**\n * Variable: consumed\n *\n * Holds the consumed state. Default is false.\n */\nmxEventObject.prototype.consumed = false;\n\n/**\n * Function: getName\n * \n * Returns <name>.\n */\nmxEventObject.prototype.getName = function()\n{\n\treturn this.name;\n};\n\n/**\n * Function: getProperties\n * \n * Returns <properties>.\n */\nmxEventObject.prototype.getProperties = function()\n{\n\treturn this.properties;\n};\n\n/**\n * Function: getProperty\n * \n * Returns the property for the given key.\n */\nmxEventObject.prototype.getProperty = function(key)\n{\n\treturn this.properties[key];\n};\n\n/**\n * Function: isConsumed\n *\n * Returns true if the event has been consumed.\n */\nmxEventObject.prototype.isConsumed = function()\n{\n\treturn this.consumed;\n};\n\n/**\n * Function: consume\n *\n * Consumes the event.\n */\nmxEventObject.prototype.consume = function()\n{\n\tthis.consumed = true;\n};\n\n__mxOutput.mxEventObject = typeof mxEventObject !== 'undefined' ? mxEventObject : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxMouseEvent\n * \n * Base class for all mouse events in mxGraph. A listener for this event should\n * implement the following methods:\n * \n * (code)\n * graph.addMouseListener(\n * {\n *   mouseDown: function(sender, evt)\n *   {\n *     mxLog.debug('mouseDown');\n *   },\n *   mouseMove: function(sender, evt)\n *   {\n *     mxLog.debug('mouseMove');\n *   },\n *   mouseUp: function(sender, evt)\n *   {\n *     mxLog.debug('mouseUp');\n *   }\n * });\n * (end)\n * \n * Constructor: mxMouseEvent\n *\n * Constructs a new event object for the given arguments.\n * \n * Parameters:\n * \n * evt - Native mouse event.\n * state - Optional <mxCellState> under the mouse.\n * \n */\nfunction mxMouseEvent(evt, state)\n{\n\tthis.evt = evt;\n\tthis.state = state;\n\tthis.sourceState = state;\n};\n\n/**\n * Variable: consumed\n *\n * Holds the consumed state of this event.\n */\nmxMouseEvent.prototype.consumed = false;\n\n/**\n * Variable: evt\n *\n * Holds the inner event object.\n */\nmxMouseEvent.prototype.evt = null;\n\n/**\n * Variable: graphX\n *\n * Holds the x-coordinate of the event in the graph. This value is set in\n * <mxGraph.fireMouseEvent>.\n */\nmxMouseEvent.prototype.graphX = null;\n\n/**\n * Variable: graphY\n *\n * Holds the y-coordinate of the event in the graph. This value is set in\n * <mxGraph.fireMouseEvent>.\n */\nmxMouseEvent.prototype.graphY = null;\n\n/**\n * Variable: state\n *\n * Holds the optional <mxCellState> associated with this event.\n */\nmxMouseEvent.prototype.state = null;\n\n/**\n * Variable: sourceState\n * \n * Holds the <mxCellState> that was passed to the constructor. This can be\n * different from <state> depending on the result of <mxGraph.getEventState>.\n */\nmxMouseEvent.prototype.sourceState = null;\n\n/**\n * Function: getEvent\n * \n * Returns <evt>.\n */\nmxMouseEvent.prototype.getEvent = function()\n{\n\treturn this.evt;\n};\n\n/**\n * Function: getSource\n * \n * Returns the target DOM element using <mxEvent.getSource> for <evt>.\n */\nmxMouseEvent.prototype.getSource = function()\n{\n\treturn mxEvent.getSource(this.evt);\n};\n\n/**\n * Function: isSource\n * \n * Returns true if the given <mxShape> is the source of <evt>.\n */\nmxMouseEvent.prototype.isSource = function(shape)\n{\n\tif (shape != null)\n\t{\n\t\treturn mxUtils.isAncestorNode(shape.node, this.getSource());\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: getX\n * \n * Returns <evt.clientX>.\n */\nmxMouseEvent.prototype.getX = function()\n{\n\treturn mxEvent.getClientX(this.getEvent());\n};\n\n/**\n * Function: getY\n * \n * Returns <evt.clientY>.\n */\nmxMouseEvent.prototype.getY = function()\n{\n\treturn mxEvent.getClientY(this.getEvent());\n};\n\n/**\n * Function: getGraphX\n * \n * Returns <graphX>.\n */\nmxMouseEvent.prototype.getGraphX = function()\n{\n\treturn this.graphX;\n};\n\n/**\n * Function: getGraphY\n * \n * Returns <graphY>.\n */\nmxMouseEvent.prototype.getGraphY = function()\n{\n\treturn this.graphY;\n};\n\n/**\n * Function: getState\n * \n * Returns <state>.\n */\nmxMouseEvent.prototype.getState = function()\n{\n\treturn this.state;\n};\n\n/**\n * Function: getCell\n * \n * Returns the <mxCell> in <state> is not null.\n */\nmxMouseEvent.prototype.getCell = function()\n{\n\tvar state = this.getState();\n\t\n\tif (state != null)\n\t{\n\t\treturn state.cell;\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: isPopupTrigger\n *\n * Returns true if the event is a popup trigger.\n */\nmxMouseEvent.prototype.isPopupTrigger = function()\n{\n\treturn mxEvent.isPopupTrigger(this.getEvent());\n};\n\n/**\n * Function: isConsumed\n *\n * Returns <consumed>.\n */\nmxMouseEvent.prototype.isConsumed = function()\n{\n\treturn this.consumed;\n};\n\n/**\n * Function: consume\n *\n * Sets <consumed> to true and invokes preventDefault on the native event\n * if such a method is defined. This is used mainly to avoid the cursor from\n * being changed to a text cursor in Webkit. You can use the preventDefault\n * flag to disable this functionality.\n * \n * Parameters:\n * \n * preventDefault - Specifies if the native event should be canceled. Default\n * is true.\n */\nmxMouseEvent.prototype.consume = function(preventDefault)\n{\n\tpreventDefault = (preventDefault != null) ? preventDefault :\n\t\t(this.evt.touches != null || mxEvent.isMouseEvent(this.evt));\n\t\n\tif (preventDefault && this.evt.preventDefault)\n\t{\n\t\tthis.evt.preventDefault();\n\t}\n\n\t// Workaround for images being dragged in IE\n\t// Does not change returnValue in Opera\n\tif (mxClient.IS_IE)\n\t{\n\t\tthis.evt.returnValue = true;\n\t}\n\n\t// Sets local consumed state\n\tthis.consumed = true;\n};\n\n__mxOutput.mxMouseEvent = typeof mxMouseEvent !== 'undefined' ? mxMouseEvent : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxEventSource\n *\n * Base class for objects that dispatch named events. To create a subclass that\n * inherits from mxEventSource, the following code is used.\n *\n * (code)\n * function MyClass() { };\n *\n * MyClass.prototype = new mxEventSource();\n * MyClass.prototype.constructor = MyClass;\n * (end)\n *\n * Known Subclasses:\n *\n * <mxGraphModel>, <mxGraph>, <mxGraphView>, <mxEditor>, <mxCellOverlay>,\n * <mxToolbar>, <mxWindow>\n * \n * Constructor: mxEventSource\n *\n * Constructs a new event source.\n */\nfunction mxEventSource(eventSource)\n{\n\tthis.setEventSource(eventSource);\n};\n\n/**\n * Variable: eventListeners\n *\n * Holds the event names and associated listeners in an array. The array\n * contains the event name followed by the respective listener for each\n * registered listener.\n */\nmxEventSource.prototype.eventListeners = null;\n\n/**\n * Variable: eventsEnabled\n *\n * Specifies if events can be fired. Default is true.\n */\nmxEventSource.prototype.eventsEnabled = true;\n\n/**\n * Variable: eventSource\n *\n * Optional source for events. Default is null.\n */\nmxEventSource.prototype.eventSource = null;\n\n/**\n * Function: isEventsEnabled\n * \n * Returns <eventsEnabled>.\n */\nmxEventSource.prototype.isEventsEnabled = function()\n{\n\treturn this.eventsEnabled;\n};\n\n/**\n * Function: setEventsEnabled\n * \n * Sets <eventsEnabled>.\n */\nmxEventSource.prototype.setEventsEnabled = function(value)\n{\n\tthis.eventsEnabled = value;\n};\n\n/**\n * Function: getEventSource\n * \n * Returns <eventSource>.\n */\nmxEventSource.prototype.getEventSource = function()\n{\n\treturn this.eventSource;\n};\n\n/**\n * Function: setEventSource\n * \n * Sets <eventSource>.\n */\nmxEventSource.prototype.setEventSource = function(value)\n{\n\tthis.eventSource = value;\n};\n\n/**\n * Function: addListener\n *\n * Binds the specified function to the given event name. If no event name\n * is given, then the listener is registered for all events.\n * \n * The parameters of the listener are the sender and an <mxEventObject>.\n */\nmxEventSource.prototype.addListener = function(name, funct)\n{\n\tif (this.eventListeners == null)\n\t{\n\t\tthis.eventListeners = [];\n\t}\n\t\n\tthis.eventListeners.push(name);\n\tthis.eventListeners.push(funct);\n};\n\n/**\n * Function: removeListener\n *\n * Removes all occurrences of the given listener from <eventListeners>.\n */\nmxEventSource.prototype.removeListener = function(funct)\n{\n\tif (this.eventListeners != null)\n\t{\n\t\tvar i = 0;\n\t\t\n\t\twhile (i < this.eventListeners.length)\n\t\t{\n\t\t\tif (this.eventListeners[i+1] == funct)\n\t\t\t{\n\t\t\t\tthis.eventListeners.splice(i, 2);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ti += 2;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: fireEvent\n *\n * Dispatches the given event to the listeners which are registered for\n * the event. The sender argument is optional. The current execution scope\n * (\"this\") is used for the listener invocation (see <mxUtils.bind>).\n *\n * Example:\n *\n * (code)\n * fireEvent(new mxEventObject(\"eventName\", key1, val1, .., keyN, valN))\n * (end)\n * \n * Parameters:\n *\n * evt - <mxEventObject> that represents the event.\n * sender - Optional sender to be passed to the listener. Default value is\n * the return value of <getEventSource>.\n */\nmxEventSource.prototype.fireEvent = function(evt, sender)\n{\n\tif (this.eventListeners != null && this.isEventsEnabled())\n\t{\n\t\tif (evt == null)\n\t\t{\n\t\t\tevt = new mxEventObject();\n\t\t}\n\t\t\n\t\tif (sender == null)\n\t\t{\n\t\t\tsender = this.getEventSource();\n\t\t}\n\n\t\tif (sender == null)\n\t\t{\n\t\t\tsender = this;\n\t\t}\n\n\t\tvar args = [sender, evt];\n\t\t\n\t\tfor (var i = 0; i < this.eventListeners.length; i += 2)\n\t\t{\n\t\t\tvar listen = this.eventListeners[i];\n\t\t\t\n\t\t\tif (listen == null || listen == evt.getName())\n\t\t\t{\n\t\t\t\tthis.eventListeners[i+1].apply(this, args);\n\t\t\t}\n\t\t}\n\t}\n};\n\n__mxOutput.mxEventSource = typeof mxEventSource !== 'undefined' ? mxEventSource : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxEvent =\n{\n\n\t/**\n\t * Class: mxEvent\n\t * \n\t * Cross-browser DOM event support. For internal event handling,\n\t * <mxEventSource> and the graph event dispatch loop in <mxGraph> are used.\n\t * \n\t * Memory Leaks:\n\t * \n\t * Use this class for adding and removing listeners to/from DOM nodes. The\n\t * <removeAllListeners> function is provided to remove all listeners that\n\t * have been added using <addListener>. The function should be invoked when\n\t * the last reference is removed in the JavaScript code, typically when the\n\t * referenced DOM node is removed from the DOM.\n\t *\n\t * Function: addListener\n\t * \n\t * Binds the function to the specified event on the given element. Use\n\t * <mxUtils.bind> in order to bind the \"this\" keyword inside the function\n\t * to a given execution scope.\n\t */\n\taddListener: function()\n\t{\n\t\tvar updateListenerList = function(element, eventName, funct)\n\t\t{\n\t\t\tif (element.mxListenerList == null)\n\t\t\t{\n\t\t\t\telement.mxListenerList = [];\n\t\t\t}\n\t\t\t\n\t\t\tvar entry = {name: eventName, f: funct};\n\t\t\telement.mxListenerList.push(entry);\n\t\t};\n\t\t\n\t\tif (window.addEventListener)\n\t\t{\n\t\t\treturn function(element, eventName, funct)\n\t\t\t{\n\t\t\t\telement.addEventListener(eventName, funct, false);\n\t\t\t\tupdateListenerList(element, eventName, funct);\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn function(element, eventName, funct)\n\t\t\t{\n\t\t\t\telement.attachEvent('on' + eventName, funct);\n\t\t\t\tupdateListenerList(element, eventName, funct);\t\t\t\t\n\t\t\t};\n\t\t}\n\t}(),\n\n\t/**\n\t * Function: removeListener\n\t *\n\t * Removes the specified listener from the given element.\n\t */\n\tremoveListener: function()\n\t{\n\t\tvar updateListener = function(element, eventName, funct)\n\t\t{\n\t\t\tif (element.mxListenerList != null)\n\t\t\t{\n\t\t\t\tvar listenerCount = element.mxListenerList.length;\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < listenerCount; i++)\n\t\t\t\t{\n\t\t\t\t\tvar entry = element.mxListenerList[i];\n\t\t\t\t\t\n\t\t\t\t\tif (entry.f == funct)\n\t\t\t\t\t{\n\t\t\t\t\t\telement.mxListenerList.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (element.mxListenerList.length == 0)\n\t\t\t\t{\n\t\t\t\t\telement.mxListenerList = null;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tif (window.removeEventListener)\n\t\t{\n\t\t\treturn function(element, eventName, funct)\n\t\t\t{\n\t\t\t\telement.removeEventListener(eventName, funct, false);\n\t\t\t\tupdateListener(element, eventName, funct);\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn function(element, eventName, funct)\n\t\t\t{\n\t\t\t\telement.detachEvent('on' + eventName, funct);\n\t\t\t\tupdateListener(element, eventName, funct);\n\t\t\t};\n\t\t}\n\t}(),\n\n\t/**\n\t * Function: removeAllListeners\n\t * \n\t * Removes all listeners from the given element.\n\t */\n\tremoveAllListeners: function(element)\n\t{\n\t\tvar list = element.mxListenerList;\n\n\t\tif (list != null)\n\t\t{\n\t\t\twhile (list.length > 0)\n\t\t\t{\n\t\t\t\tvar entry = list[0];\n\t\t\t\tmxEvent.removeListener(element, entry.name, entry.f);\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: addGestureListeners\n\t * \n\t * Adds the given listeners for touch, mouse and/or pointer events. If\n\t * <mxClient.IS_POINTER> is true then pointer events will be registered,\n\t * else the respective mouse events will be registered. If <mxClient.IS_POINTER>\n\t * is false and <mxClient.IS_TOUCH> is true then the respective touch events\n\t * will be registered as well as the mouse events.\n\t */\n\taddGestureListeners: function(node, startListener, moveListener, endListener)\n\t{\n\t\tif (startListener != null)\n\t\t{\n\t\t\tmxEvent.addListener(node, (mxClient.IS_POINTER) ? 'pointerdown' : 'mousedown', startListener);\n\t\t}\n\t\t\n\t\tif (moveListener != null)\n\t\t{\n\t\t\tmxEvent.addListener(node, (mxClient.IS_POINTER) ? 'pointermove' : 'mousemove', moveListener);\n\t\t}\n\t\t\n\t\tif (endListener != null)\n\t\t{\n\t\t\tmxEvent.addListener(node, (mxClient.IS_POINTER) ? 'pointerup' : 'mouseup', endListener);\n\t\t}\n\t\t\n\t\tif (!mxClient.IS_POINTER && mxClient.IS_TOUCH)\n\t\t{\n\t\t\tif (startListener != null)\n\t\t\t{\n\t\t\t\tmxEvent.addListener(node, 'touchstart', startListener);\n\t\t\t}\n\t\t\t\n\t\t\tif (moveListener != null)\n\t\t\t{\n\t\t\t\tmxEvent.addListener(node, 'touchmove', moveListener);\n\t\t\t}\n\t\t\t\n\t\t\tif (endListener != null)\n\t\t\t{\n\t\t\t\tmxEvent.addListener(node, 'touchend', endListener);\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: removeGestureListeners\n\t * \n\t * Removes the given listeners from mousedown, mousemove, mouseup and the\n\t * respective touch events if <mxClient.IS_TOUCH> is true.\n\t */\n\tremoveGestureListeners: function(node, startListener, moveListener, endListener)\n\t{\n\t\tif (startListener != null)\n\t\t{\n\t\t\tmxEvent.removeListener(node, (mxClient.IS_POINTER) ? 'pointerdown' : 'mousedown', startListener);\n\t\t}\n\t\t\n\t\tif (moveListener != null)\n\t\t{\n\t\t\tmxEvent.removeListener(node, (mxClient.IS_POINTER) ? 'pointermove' : 'mousemove', moveListener);\n\t\t}\n\t\t\n\t\tif (endListener != null)\n\t\t{\n\t\t\tmxEvent.removeListener(node, (mxClient.IS_POINTER) ? 'pointerup' : 'mouseup', endListener);\n\t\t}\n\t\t\n\t\tif (!mxClient.IS_POINTER && mxClient.IS_TOUCH)\n\t\t{\n\t\t\tif (startListener != null)\n\t\t\t{\n\t\t\t\tmxEvent.removeListener(node, 'touchstart', startListener);\n\t\t\t}\n\t\t\t\n\t\t\tif (moveListener != null)\n\t\t\t{\n\t\t\t\tmxEvent.removeListener(node, 'touchmove', moveListener);\n\t\t\t}\n\t\t\t\n\t\t\tif (endListener != null)\n\t\t\t{\n\t\t\t\tmxEvent.removeListener(node, 'touchend', endListener);\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: redirectMouseEvents\n\t *\n\t * Redirects the mouse events from the given DOM node to the graph dispatch\n\t * loop using the event and given state as event arguments. State can\n\t * either be an instance of <mxCellState> or a function that returns an\n\t * <mxCellState>. The down, move, up and dblClick arguments are optional\n\t * functions that take the trigger event as arguments and replace the\n\t * default behaviour.\n\t */\n\tredirectMouseEvents: function(node, graph, state, down, move, up, dblClick)\n\t{\n\t\tvar getState = function(evt)\n\t\t{\n\t\t\treturn (typeof(state) == 'function') ? state(evt) : state;\n\t\t};\n\t\t\n\t\tmxEvent.addGestureListeners(node, function (evt)\n\t\t{\n\t\t\tif (down != null)\n\t\t\t{\n\t\t\t\tdown(evt);\n\t\t\t}\n\t\t\telse if (!mxEvent.isConsumed(evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt, getState(evt)));\n\t\t\t}\n\t\t},\n\t\tfunction (evt)\n\t\t{\n\t\t\tif (move != null)\n\t\t\t{\n\t\t\t\tmove(evt);\n\t\t\t}\n\t\t\telse if (!mxEvent.isConsumed(evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt, getState(evt)));\n\t\t\t}\n\t\t},\n\t\tfunction (evt)\n\t\t{\n\t\t\tif (up != null)\n\t\t\t{\n\t\t\t\tup(evt);\n\t\t\t}\n\t\t\telse if (!mxEvent.isConsumed(evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt, getState(evt)));\n\t\t\t}\n\t\t});\n\n\t\tmxEvent.addListener(node, 'dblclick', function (evt)\n\t\t{\n\t\t\tif (dblClick != null)\n\t\t\t{\n\t\t\t\tdblClick(evt);\n\t\t\t}\n\t\t\telse if (!mxEvent.isConsumed(evt))\n\t\t\t{\n\t\t\t\tvar tmp = getState(evt);\n\t\t\t\tgraph.dblClick(evt, (tmp != null) ? tmp.cell : null);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Function: release\n\t * \n\t * Removes the known listeners from the given DOM node and its descendants.\n\t * \n\t * Parameters:\n\t * \n\t * element - DOM node to remove the listeners from.\n\t */\n\trelease: function(element)\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (element != null)\n\t\t\t{\n\t\t\t\tmxEvent.removeAllListeners(element);\n\t\t\t\t\n\t\t\t\tvar children = element.childNodes;\n\t\t\t\t\n\t\t\t\tif (children != null)\n\t\t\t\t{\n\t\t\t        var childCount = children.length;\n\t\t\t        \n\t\t\t        for (var i = 0; i < childCount; i += 1)\n\t\t\t        {\n\t\t\t        \tmxEvent.release(children[i]);\n\t\t\t        }\n\t\t\t    }\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\t// ignores errors as this is typically called in cleanup code\n\t\t}\n\t},\n\n\t/**\n\t * Function: addMouseWheelListener\n\t * \n\t * Installs the given function as a handler for mouse wheel events. The\n\t * function has two arguments: the mouse event and a boolean that specifies\n\t * if the wheel was moved up or down.\n\t * \n\t * This has been tested with IE 6 and 7, Firefox (all versions), Opera and\n\t * Safari. It does currently not work on Safari for Mac.\n\t * \n\t * Example:\n\t * \n\t * (code)\n\t * mxEvent.addMouseWheelListener(function (evt, up, pinch)\n\t * {\n\t *   mxLog.show();\n\t *   mxLog.debug('mouseWheel: up='+up);\n\t * });\n\t *(end)\n\t * \n\t * Parameters:\n\t * \n\t * funct - Handler function that takes the event argument, a boolean argument\n\t * for the mousewheel direction and a boolean to specify if the underlying\n\t * event was a pinch gesture on a touch device.\n\t * target - Target for installing the listener in Google Chrome. See \n\t * https://www.chromestatus.com/features/6662647093133312.\n\t */\n\taddMouseWheelListener: function(funct, target)\n\t{\n\t\tif (funct != null)\n\t\t{\n\t\t\tvar wheelHandler = function(evt)\n\t\t\t{\n\t\t\t\t// IE does not give an event object but the\n\t\t\t\t// global event object is the mousewheel event\n\t\t\t\t// at this point in time.\n\t\t\t\tif (evt == null)\n\t\t\t\t{\n\t\t\t\t\tevt = window.event;\n\t\t\t\t}\n\t\t\t\n\t\t\t\t//To prevent window zoom on trackpad pinch\n\t\t\t\tif (evt.ctrlKey) \n\t\t\t\t{\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\n\t\t\t\tvar delta = -evt.deltaY;\n\t\t\t\t\n\t\t\t\t// Handles the event using the given function\n\t\t\t\tif (Math.abs(evt.deltaX) > 0.5 || Math.abs(evt.deltaY) > 0.5)\n\t\t\t\t{\n\t\t\t\t\tfunct(evt, (evt.deltaY == 0) ?  -evt.deltaX > 0 : -evt.deltaY > 0);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\ttarget = target != null ? target : window;\n\t\t\t\t\t\n\t\t\tif (mxClient.IS_SF && !mxClient.IS_TOUCH)\n\t\t\t{\n\t\t\t\tvar scale = 1;\n\t\t\t\t\n\t\t\t\tmxEvent.addListener(target, 'gesturestart', function(evt)\n\t\t\t\t{\n\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t\tscale = 1;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tmxEvent.addListener(target, 'gesturechange', function(evt)\n\t\t\t\t{\n\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t\tvar diff = scale - evt.scale;\n\t\t\t\t\t\n\t\t\t\t\tif (Math.abs(diff) > 0.2)\n\t\t\t\t\t{\n\t\t\t\t\t\tfunct(evt, diff < 0, true);\n\t\t\t\t\t\tscale = evt.scale;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmxEvent.addListener(target, 'gestureend', function(evt)\n\t\t\t\t{\n\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar evtCache = [];\n\t\t\t\tvar dx0 = 0;\n\t\t\t\tvar dy0 = 0;\n\t\t\t\t\n\t\t\t\t// Adds basic listeners for graph event dispatching\n\t\t\t\tmxEvent.addGestureListeners(target, mxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\tif (!mxEvent.isMouseEvent(evt) && evt.pointerId != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tevtCache.push(evt);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\tif (!mxEvent.isMouseEvent(evt) && evtCache.length == 2)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Find this event in the cache and update its record with this event\n\t\t\t\t\t\tfor (var i = 0; i < evtCache.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (evt.pointerId == evtCache[i].pointerId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tevtCache[i] = evt;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t   \t// Calculate the distance between the two pointers\n\t\t\t\t\t\tvar dx = Math.abs(evtCache[0].clientX - evtCache[1].clientX);\n\t\t\t\t\t\tvar dy = Math.abs(evtCache[0].clientY - evtCache[1].clientY);\n\t\t\t\t\t\tvar tx = Math.abs(dx - dx0);\n\t\t\t\t\t\tvar ty = Math.abs(dy - dy0);\n\t\t\t\t\t\n\t\t\t\t\t\tif (tx > mxEvent.PINCH_THRESHOLD || ty > mxEvent.PINCH_THRESHOLD)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar cx = evtCache[0].clientX + (evtCache[1].clientX - evtCache[0].clientX) / 2;\n\t\t\t\t\t\t\tvar cy = evtCache[0].clientY + (evtCache[1].clientY - evtCache[0].clientY) / 2;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tfunct(evtCache[0], (tx > ty) ? dx > dx0 : dy > dy0, true, cx, cy);\n\t\t\t\t\t\t\n\t\t\t\t\t\t   \t// Cache the distance for the next move event \n\t\t\t\t\t\t\tdx0 = dx;\n\t\t\t\t\t\t\tdy0 = dy;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\tevtCache = [];\n\t\t\t\t\tdx0 = 0;\n\t\t\t\t\tdy0 = 0;\n\t\t\t\t}));\n\t\t\t}\n\t\t\t\n\t\t\tmxEvent.addListener(target, 'wheel', wheelHandler);\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: disableContextMenu\n\t *\n\t * Disables the context menu for the given element.\n\t */\n\tdisableContextMenu: function(element)\n\t{\n\t\tmxEvent.addListener(element, 'contextmenu', function(evt)\n\t\t{\n\t\t\tif (evt.preventDefault)\n\t\t\t{\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t});\n\t},\n\t\n\t/**\n\t * Function: getSource\n\t * \n\t * Returns the event's target or srcElement depending on the browser.\n\t */\n\tgetSource: function(evt)\n\t{\n\t\treturn (evt.srcElement != null) ? evt.srcElement : evt.target;\n\t},\n\n\t/**\n\t * Function: isConsumed\n\t * \n\t * Returns true if the event has been consumed using <consume>.\n\t */\n\tisConsumed: function(evt)\n\t{\n\t\treturn evt.isConsumed != null && evt.isConsumed;\n\t},\n\n\t/**\n\t * Function: isTouchEvent\n\t * \n\t * Returns true if the event was generated using a touch device (not a pen or mouse).\n\t */\n\tisTouchEvent: function(evt)\n\t{\n\t\treturn (evt.pointerType != null) ? (evt.pointerType == 'touch' || evt.pointerType ===\n\t\t\tevt.MSPOINTER_TYPE_TOUCH) : ((evt.mozInputSource != null) ?\n\t\t\t\t\tevt.mozInputSource == 5 : evt.type.indexOf('touch') == 0);\n\t},\n\n\t/**\n\t * Function: isPenEvent\n\t * \n\t * Returns true if the event was generated using a pen (not a touch device or mouse).\n\t */\n\tisPenEvent: function(evt)\n\t{\n\t\treturn (evt.pointerType != null) ? (evt.pointerType == 'pen' || evt.pointerType ===\n\t\t\tevt.MSPOINTER_TYPE_PEN) : ((evt.mozInputSource != null) ?\n\t\t\t\t\tevt.mozInputSource == 2 : evt.type.indexOf('pen') == 0);\n\t},\n\n\t/**\n\t * Function: isMultiTouchEvent\n\t * \n\t * Returns true if the event was generated using a touch device (not a pen or mouse).\n\t */\n\tisMultiTouchEvent: function(evt)\n\t{\n\t\treturn (evt.type != null && evt.type.indexOf('touch') == 0 && evt.touches != null && evt.touches.length > 1);\n\t},\n\n\t/**\n\t * Function: isMouseEvent\n\t * \n\t * Returns true if the event was generated using a mouse (not a pen or touch device).\n\t */\n\tisMouseEvent: function(evt)\n\t{\n\t\treturn (evt.pointerType != null) ? (evt.pointerType == 'mouse' || evt.pointerType ===\n\t\t\tevt.MSPOINTER_TYPE_MOUSE) : ((evt.mozInputSource != null) ?\n\t\t\t\tevt.mozInputSource == 1 : evt.type.indexOf('mouse') == 0);\n\t},\n\t\n\t/**\n\t * Function: isLeftMouseButton\n\t * \n\t * Returns true if the left mouse button is pressed for the given event.\n\t * To check if a button is pressed during a mouseMove you should use the\n\t * <mxGraph.isMouseDown> property. Note that this returns true in Firefox\n\t * for control+left-click on the Mac.\n\t */\n\tisLeftMouseButton: function(evt)\n\t{\n\t\t// Special case for mousemove and mousedown we check the buttons\n\t\t// if it exists because which is 0 even if no button is pressed\n\t\tif ('buttons' in evt && (evt.type == 'mousedown' || evt.type == 'mousemove'))\n\t\t{\n\t\t\treturn evt.buttons == 1;\n\t\t}\n\t\telse if ('which' in evt)\n\t\t{\n\t        return evt.which === 1;\n\t    }\n\t\telse\n\t\t{\n\t        return evt.button === 1;\n\t    }\n\t},\n\t\n\t/**\n\t * Function: isMiddleMouseButton\n\t * \n\t * Returns true if the middle mouse button is pressed for the given event.\n\t * To check if a button is pressed during a mouseMove you should use the\n\t * <mxGraph.isMouseDown> property.\n\t */\n\tisMiddleMouseButton: function(evt)\n\t{\n\t\tif ('which' in evt)\n\t\t{\n\t        return evt.which === 2;\n\t    }\n\t\telse\n\t\t{\n\t        return evt.button === 4;\n\t    }\n\t},\n\t\n\t/**\n\t * Function: isRightMouseButton\n\t * \n\t * Returns true if the right mouse button was pressed. Note that this\n\t * button might not be available on some systems. For handling a popup\n\t * trigger <isPopupTrigger> should be used.\n\t */\n\tisRightMouseButton: function(evt)\n\t{\n\t\tif ('which' in evt)\n\t\t{\n\t        return evt.which === 3;\n\t    }\n\t\telse\n\t\t{\n\t        return evt.button === 2;\n\t    }\n\t},\n\n\t/**\n\t * Function: isPopupTrigger\n\t * \n\t * Returns true if the event is a popup trigger. This implementation\n\t * returns true if the right button or the left button and control was\n\t * pressed on a Mac.\n\t */\n\tisPopupTrigger: function(evt)\n\t{\n\t\treturn mxEvent.isRightMouseButton(evt) || (mxClient.IS_MAC && mxEvent.isControlDown(evt) &&\n\t\t\t!mxEvent.isShiftDown(evt) && !mxEvent.isMetaDown(evt) && !mxEvent.isAltDown(evt));\n\t},\n\n\t/**\n\t * Function: isShiftDown\n\t * \n\t * Returns true if the shift key is pressed for the given event.\n\t */\n\tisShiftDown: function(evt)\n\t{\n\t\treturn (evt != null) ? evt.shiftKey : false;\n\t},\n\n\t/**\n\t * Function: isAltDown\n\t * \n\t * Returns true if the alt key is pressed for the given event.\n\t */\n\tisAltDown: function(evt)\n\t{\n\t\treturn (evt != null) ? evt.altKey : false;\n\t},\n\n\t/**\n\t * Function: isControlDown\n\t * \n\t * Returns true if the control key is pressed for the given event.\n\t */\n\tisControlDown: function(evt)\n\t{\n\t\treturn (evt != null) ? evt.ctrlKey : false;\n\t},\n\n\t/**\n\t * Function: isMetaDown\n\t * \n\t * Returns true if the meta key is pressed for the given event.\n\t */\n\tisMetaDown: function(evt)\n\t{\n\t\treturn (evt != null) ? evt.metaKey : false;\n\t},\n\n\t/**\n\t * Function: getMainEvent\n\t * \n\t * Returns the touch or mouse event that contains the mouse coordinates.\n\t */\n\tgetMainEvent: function(e)\n\t{\n\t\tif ((e.type == 'touchstart' || e.type == 'touchmove') && e.touches != null && e.touches[0] != null)\n\t\t{\n\t\t\te = e.touches[0];\n\t\t}\n\t\telse if (e.type == 'touchend' && e.changedTouches != null && e.changedTouches[0] != null)\n\t\t{\n\t\t\te = e.changedTouches[0];\n\t\t}\n\t\t\n\t\treturn e;\n\t},\n\t\n\t/**\n\t * Function: getClientX\n\t * \n\t * Returns true if the meta key is pressed for the given event.\n\t */\n\tgetClientX: function(e)\n\t{\n\t\treturn mxEvent.getMainEvent(e).clientX;\n\t},\n\n\t/**\n\t * Function: getClientY\n\t * \n\t * Returns true if the meta key is pressed for the given event.\n\t */\n\tgetClientY: function(e)\n\t{\n\t\treturn mxEvent.getMainEvent(e).clientY;\n\t},\n\n\t/**\n\t * Function: consume\n\t * \n\t * Consumes the given event.\n\t * \n\t * Parameters:\n\t * \n\t * evt - Native event to be consumed.\n\t * preventDefault - Optional boolean to prevent the default for the event.\n\t * Default is true.\n\t * stopPropagation - Option boolean to stop event propagation. Default is\n\t * true.\n\t */\n\tconsume: function(evt, preventDefault, stopPropagation)\n\t{\n\t\tpreventDefault = (preventDefault != null) ? preventDefault : true;\n\t\tstopPropagation = (stopPropagation != null) ? stopPropagation : true;\n\t\t\n\t\tif (preventDefault)\n\t\t{\n\t\t\tif (evt.preventDefault)\n\t\t\t{\n\t\t\t\tif (stopPropagation)\n\t\t\t\t{\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t\telse if (stopPropagation)\n\t\t\t{\n\t\t\t\tevt.cancelBubble = true;\n\t\t\t}\n\t\t}\n\n\t\t// Opera\n\t\tevt.isConsumed = true;\n\n\t\t// Other browsers\n\t\tif (!evt.preventDefault)\n\t\t{\n\t\t\tevt.returnValue = false;\n\t\t}\n\t},\n\t\n\t//\n\t// Special handles in mouse events\n\t//\n\t\n\t/**\n\t * Variable: LABEL_HANDLE\n\t * \n\t * Index for the label handle in an mxMouseEvent. This should be a negative\n\t * value that does not interfere with any possible handle indices. Default\n\t * is -1.\n\t */\n\tLABEL_HANDLE: -1,\n\t\n\t/**\n\t * Variable: ROTATION_HANDLE\n\t * \n\t * Index for the rotation handle in an mxMouseEvent. This should be a\n\t * negative value that does not interfere with any possible handle indices.\n\t * Default is -2.\n\t */\n\tROTATION_HANDLE: -2,\n\t\n\t/**\n\t * Variable: CUSTOM_HANDLE\n\t * \n\t * Start index for the custom handles in an mxMouseEvent. This should be a\n\t * negative value and is the start index which is decremented for each\n\t * custom handle. Default is -100.\n\t */\n\tCUSTOM_HANDLE: -100,\n\t\n\t/**\n\t * Variable: VIRTUAL_HANDLE\n\t * \n\t * Start index for the virtual handles in an mxMouseEvent. This should be a\n\t * negative value and is the start index which is decremented for each\n\t * virtual handle. Default is -100000. This assumes that there are no more\n\t * than VIRTUAL_HANDLE - CUSTOM_HANDLE custom handles.\n\t * \n\t */\n\tVIRTUAL_HANDLE: -100000,\n\t\n\t//\n\t// Event names\n\t//\n\t\n\t/**\n\t * Variable: MOUSE_DOWN\n\t *\n\t * Specifies the event name for mouseDown.\n\t */\n\tMOUSE_DOWN: 'mouseDown',\n\t\n\t/**\n\t * Variable: MOUSE_MOVE\n\t *\n\t * Specifies the event name for mouseMove. \n\t */\n\tMOUSE_MOVE: 'mouseMove',\n\t\n\t/**\n\t * Variable: MOUSE_UP\n\t *\n\t * Specifies the event name for mouseUp. \n\t */\n\tMOUSE_UP: 'mouseUp',\n\n\t/**\n\t * Variable: ACTIVATE\n\t *\n\t * Specifies the event name for activate.\n\t */\n\tACTIVATE: 'activate',\n\n\t/**\n\t * Variable: RESIZE_START\n\t *\n\t * Specifies the event name for resizeStart.\n\t */\n\tRESIZE_START: 'resizeStart',\n\n\t/**\n\t * Variable: RESIZE\n\t *\n\t * Specifies the event name for resize.\n\t */\n\tRESIZE: 'resize',\n\n\t/**\n\t * Variable: RESIZE_END\n\t *\n\t * Specifies the event name for resizeEnd.\n\t */\n\tRESIZE_END: 'resizeEnd',\n\n\t/**\n\t * Variable: MOVE_START\n\t *\n\t * Specifies the event name for moveStart.\n\t */\n\tMOVE_START: 'moveStart',\n\n\t/**\n\t * Variable: MOVE\n\t *\n\t * Specifies the event name for move.\n\t */\n\tMOVE: 'move',\n\n\t/**\n\t * Variable: MOVE_END\n\t *\n\t * Specifies the event name for moveEnd.\n\t */\n\tMOVE_END: 'moveEnd',\n\n\t/**\n\t * Variable: PAN_START\n\t *\n\t * Specifies the event name for panStart.\n\t */\n\tPAN_START: 'panStart',\n\n\t/**\n\t * Variable: PAN\n\t *\n\t * Specifies the event name for pan.\n\t */\n\tPAN: 'pan',\n\n\t/**\n\t * Variable: PAN_END\n\t *\n\t * Specifies the event name for panEnd.\n\t */\n\tPAN_END: 'panEnd',\n\n\t/**\n\t * Variable: MINIMIZE\n\t *\n\t * Specifies the event name for minimize.\n\t */\n\tMINIMIZE: 'minimize',\n\n\t/**\n\t * Variable: NORMALIZE\n\t *\n\t * Specifies the event name for normalize.\n\t */\n\tNORMALIZE: 'normalize',\n\n\t/**\n\t * Variable: MAXIMIZE\n\t *\n\t * Specifies the event name for maximize.\n\t */\n\tMAXIMIZE: 'maximize',\n\n\t/**\n\t * Variable: HIDE\n\t *\n\t * Specifies the event name for hide.\n\t */\n\tHIDE: 'hide',\n\n\t/**\n\t * Variable: SHOW\n\t *\n\t * Specifies the event name for show.\n\t */\n\tSHOW: 'show',\n\n\t/**\n\t * Variable: CLOSE\n\t *\n\t * Specifies the event name for close.\n\t */\n\tCLOSE: 'close',\n\n\t/**\n\t * Variable: DESTROY\n\t *\n\t * Specifies the event name for destroy.\n\t */\n\tDESTROY: 'destroy',\n\n\t/**\n\t * Variable: REFRESH\n\t *\n\t * Specifies the event name for refresh.\n\t */\n\tREFRESH: 'refresh',\n\n\t/**\n\t * Variable: SIZE\n\t *\n\t * Specifies the event name for size.\n\t */\n\tSIZE: 'size',\n\t\n\t/**\n\t * Variable: SELECT\n\t *\n\t * Specifies the event name for select.\n\t */\n\tSELECT: 'select',\n\n\t/**\n\t * Variable: FIRED\n\t *\n\t * Specifies the event name for fired.\n\t */\n\tFIRED: 'fired',\n\n\t/**\n\t * Variable: FIRE_MOUSE_EVENT\n\t *\n\t * Specifies the event name for fireMouseEvent.\n\t */\n\tFIRE_MOUSE_EVENT: 'fireMouseEvent',\n\n\t/**\n\t * Variable: GESTURE\n\t *\n\t * Specifies the event name for gesture.\n\t */\n\tGESTURE: 'gesture',\n\n\t/**\n\t * Variable: TAP_AND_HOLD\n\t *\n\t * Specifies the event name for tapAndHold.\n\t */\n\tTAP_AND_HOLD: 'tapAndHold',\n\n\t/**\n\t * Variable: GET\n\t *\n\t * Specifies the event name for get.\n\t */\n\tGET: 'get',\n\n\t/**\n\t * Variable: RECEIVE\n\t *\n\t * Specifies the event name for receive.\n\t */\n\tRECEIVE: 'receive',\n\n\t/**\n\t * Variable: CONNECT\n\t *\n\t * Specifies the event name for connect.\n\t */\n\tCONNECT: 'connect',\n\n\t/**\n\t * Variable: DISCONNECT\n\t *\n\t * Specifies the event name for disconnect.\n\t */\n\tDISCONNECT: 'disconnect',\n\n\t/**\n\t * Variable: SUSPEND\n\t *\n\t * Specifies the event name for suspend.\n\t */\n\tSUSPEND: 'suspend',\n\n\t/**\n\t * Variable: RESUME\n\t *\n\t * Specifies the event name for suspend.\n\t */\n\tRESUME: 'resume',\n\n\t/**\n\t * Variable: MARK\n\t *\n\t * Specifies the event name for mark.\n\t */\n\tMARK: 'mark',\n\n\t/**\n\t * Variable: ROOT\n\t *\n\t * Specifies the event name for root.\n\t */\n\tROOT: 'root',\n\n\t/**\n\t * Variable: POST\n\t *\n\t * Specifies the event name for post.\n\t */\n\tPOST: 'post',\n\n\t/**\n\t * Variable: OPEN\n\t *\n\t * Specifies the event name for open.\n\t */\n\tOPEN: 'open',\n\n\t/**\n\t * Variable: SAVE\n\t *\n\t * Specifies the event name for open.\n\t */\n\tSAVE: 'save',\n\n\t/**\n\t * Variable: BEFORE_ADD_VERTEX\n\t *\n\t * Specifies the event name for beforeAddVertex.\n\t */\n\tBEFORE_ADD_VERTEX: 'beforeAddVertex',\n\n\t/**\n\t * Variable: ADD_VERTEX\n\t *\n\t * Specifies the event name for addVertex.\n\t */\n\tADD_VERTEX: 'addVertex',\n\n\t/**\n\t * Variable: AFTER_ADD_VERTEX\n\t *\n\t * Specifies the event name for afterAddVertex.\n\t */\n\tAFTER_ADD_VERTEX: 'afterAddVertex',\n\n\t/**\n\t * Variable: DONE\n\t *\n\t * Specifies the event name for done.\n\t */\n\tDONE: 'done',\n\n\t/**\n\t * Variable: EXECUTE\n\t *\n\t * Specifies the event name for execute.\n\t */\n\tEXECUTE: 'execute',\n\n\t/**\n\t * Variable: EXECUTED\n\t *\n\t * Specifies the event name for executed.\n\t */\n\tEXECUTED: 'executed',\n\n\t/**\n\t * Variable: BEGIN_UPDATE\n\t *\n\t * Specifies the event name for beginUpdate.\n\t */\n\tBEGIN_UPDATE: 'beginUpdate',\n\n\t/**\n\t * Variable: START_EDIT\n\t *\n\t * Specifies the event name for startEdit.\n\t */\n\tSTART_EDIT: 'startEdit',\n\n\t/**\n\t * Variable: END_UPDATE\n\t *\n\t * Specifies the event name for endUpdate.\n\t */\n\tEND_UPDATE: 'endUpdate',\n\n\t/**\n\t * Variable: END_EDIT\n\t *\n\t * Specifies the event name for endEdit.\n\t */\n\tEND_EDIT: 'endEdit',\n\n\t/**\n\t * Variable: BEFORE_UNDO\n\t *\n\t * Specifies the event name for beforeUndo.\n\t */\n\tBEFORE_UNDO: 'beforeUndo',\n\n\t/**\n\t * Variable: UNDO\n\t *\n\t * Specifies the event name for undo.\n\t */\n\tUNDO: 'undo',\n\n\t/**\n\t * Variable: REDO\n\t *\n\t * Specifies the event name for redo.\n\t */\n\tREDO: 'redo',\n\n\t/**\n\t * Variable: CHANGE\n\t *\n\t * Specifies the event name for change.\n\t */\n\tCHANGE: 'change',\n\n\t/**\n\t * Variable: NOTIFY\n\t *\n\t * Specifies the event name for notify.\n\t */\n\tNOTIFY: 'notify',\n\n\t/**\n\t * Variable: LAYOUT_CELLS\n\t *\n\t * Specifies the event name for layoutCells.\n\t */\n\tLAYOUT_CELLS: 'layoutCells',\n\n\t/**\n\t * Variable: CLICK\n\t *\n\t * Specifies the event name for click.\n\t */\n\tCLICK: 'click',\n\n\t/**\n\t * Variable: SCALE\n\t *\n\t * Specifies the event name for scale.\n\t */\n\tSCALE: 'scale',\n\n\t/**\n\t * Variable: TRANSLATE\n\t *\n\t * Specifies the event name for translate.\n\t */\n\tTRANSLATE: 'translate',\n\n\t/**\n\t * Variable: SCALE_AND_TRANSLATE\n\t *\n\t * Specifies the event name for scaleAndTranslate.\n\t */\n\tSCALE_AND_TRANSLATE: 'scaleAndTranslate',\n\n\t/**\n\t * Variable: UP\n\t *\n\t * Specifies the event name for up.\n\t */\n\tUP: 'up',\n\n\t/**\n\t * Variable: DOWN\n\t *\n\t * Specifies the event name for down.\n\t */\n\tDOWN: 'down',\n\n\t/**\n\t * Variable: ADD\n\t *\n\t * Specifies the event name for add.\n\t */\n\tADD: 'add',\n\n\t/**\n\t * Variable: REMOVE\n\t *\n\t * Specifies the event name for remove.\n\t */\n\tREMOVE: 'remove',\n\t\n\t/**\n\t * Variable: CLEAR\n\t *\n\t * Specifies the event name for clear.\n\t */\n\tCLEAR: 'clear',\n\n\t/**\n\t * Variable: ADD_CELLS\n\t *\n\t * Specifies the event name for addCells.\n\t */\n\tADD_CELLS: 'addCells',\n\n\t/**\n\t * Variable: CELLS_ADDED\n\t *\n\t * Specifies the event name for cellsAdded.\n\t */\n\tCELLS_ADDED: 'cellsAdded',\n\n\t/**\n\t * Variable: MOVE_CELLS\n\t *\n\t * Specifies the event name for moveCells.\n\t */\n\tMOVE_CELLS: 'moveCells',\n\n\t/**\n\t * Variable: CELLS_MOVED\n\t *\n\t * Specifies the event name for cellsMoved.\n\t */\n\tCELLS_MOVED: 'cellsMoved',\n\n\t/**\n\t * Variable: RESIZE_CELLS\n\t *\n\t * Specifies the event name for resizeCells.\n\t */\n\tRESIZE_CELLS: 'resizeCells',\n\n\t/**\n\t * Variable: CELLS_RESIZED\n\t *\n\t * Specifies the event name for cellsResized.\n\t */\n\tCELLS_RESIZED: 'cellsResized',\n\n\t/**\n\t * Variable: TOGGLE_CELLS\n\t *\n\t * Specifies the event name for toggleCells.\n\t */\n\tTOGGLE_CELLS: 'toggleCells',\n\n\t/**\n\t * Variable: CELLS_TOGGLED\n\t *\n\t * Specifies the event name for cellsToggled.\n\t */\n\tCELLS_TOGGLED: 'cellsToggled',\n\n\t/**\n\t * Variable: ORDER_CELLS\n\t *\n\t * Specifies the event name for orderCells.\n\t */\n\tORDER_CELLS: 'orderCells',\n\n\t/**\n\t * Variable: CELLS_ORDERED\n\t *\n\t * Specifies the event name for cellsOrdered.\n\t */\n\tCELLS_ORDERED: 'cellsOrdered',\n\n\t/**\n\t * Variable: REMOVE_CELLS\n\t *\n\t * Specifies the event name for removeCells.\n\t */\n\tREMOVE_CELLS: 'removeCells',\n\n\t/**\n\t * Variable: CELLS_REMOVED\n\t *\n\t * Specifies the event name for cellsRemoved.\n\t */\n\tCELLS_REMOVED: 'cellsRemoved',\n\n\t/**\n\t * Variable: GROUP_CELLS\n\t *\n\t * Specifies the event name for groupCells.\n\t */\n\tGROUP_CELLS: 'groupCells',\n\n\t/**\n\t * Variable: UNGROUP_CELLS\n\t *\n\t * Specifies the event name for ungroupCells.\n\t */\n\tUNGROUP_CELLS: 'ungroupCells',\n\n\t/**\n\t * Variable: REMOVE_CELLS_FROM_PARENT\n\t *\n\t * Specifies the event name for removeCellsFromParent.\n\t */\n\tREMOVE_CELLS_FROM_PARENT: 'removeCellsFromParent',\n\n\t/**\n\t * Variable: FOLD_CELLS\n\t *\n\t * Specifies the event name for foldCells.\n\t */\n\tFOLD_CELLS: 'foldCells',\n\n\t/**\n\t * Variable: CELLS_FOLDED\n\t *\n\t * Specifies the event name for cellsFolded.\n\t */\n\tCELLS_FOLDED: 'cellsFolded',\n\n\t/**\n\t * Variable: ALIGN_CELLS\n\t *\n\t * Specifies the event name for alignCells.\n\t */\n\tALIGN_CELLS: 'alignCells',\n\n\t/**\n\t * Variable: LABEL_CHANGED\n\t *\n\t * Specifies the event name for labelChanged.\n\t */\n\tLABEL_CHANGED: 'labelChanged',\n\n\t/**\n\t * Variable: CONNECT_CELL\n\t *\n\t * Specifies the event name for connectCell.\n\t */\n\tCONNECT_CELL: 'connectCell',\n\n\t/**\n\t * Variable: CELL_CONNECTED\n\t *\n\t * Specifies the event name for cellConnected.\n\t */\n\tCELL_CONNECTED: 'cellConnected',\n\n\t/**\n\t * Variable: SPLIT_EDGE\n\t *\n\t * Specifies the event name for splitEdge.\n\t */\n\tSPLIT_EDGE: 'splitEdge',\n\n\t/**\n\t * Variable: FLIP_EDGE\n\t *\n\t * Specifies the event name for flipEdge.\n\t */\n\tFLIP_EDGE: 'flipEdge',\n\n\t/**\n\t * Variable: START_EDITING\n\t *\n\t * Specifies the event name for startEditing.\n\t */\n\tSTART_EDITING: 'startEditing',\n\n\t/**\n\t * Variable: EDITING_STARTED\n\t *\n\t * Specifies the event name for editingStarted.\n\t */\n\tEDITING_STARTED: 'editingStarted',\n\n\t/**\n\t * Variable: EDITING_STOPPED\n\t *\n\t * Specifies the event name for editingStopped.\n\t */\n\tEDITING_STOPPED: 'editingStopped',\n\n\t/**\n\t * Variable: ADD_OVERLAY\n\t *\n\t * Specifies the event name for addOverlay.\n\t */\n\tADD_OVERLAY: 'addOverlay',\n\n\t/**\n\t * Variable: REMOVE_OVERLAY\n\t *\n\t * Specifies the event name for removeOverlay.\n\t */\n\tREMOVE_OVERLAY: 'removeOverlay',\n\n\t/**\n\t * Variable: UPDATE_CELL_SIZE\n\t *\n\t * Specifies the event name for updateCellSize.\n\t */\n\tUPDATE_CELL_SIZE: 'updateCellSize',\n\n\t/**\n\t * Variable: ESCAPE\n\t *\n\t * Specifies the event name for escape.\n\t */\n\tESCAPE: 'escape',\n\n\t/**\n\t * Variable: DOUBLE_CLICK\n\t *\n\t * Specifies the event name for doubleClick.\n\t */\n\tDOUBLE_CLICK: 'doubleClick',\n\n\t/**\n\t * Variable: START\n\t *\n\t * Specifies the event name for start.\n\t */\n\tSTART: 'start',\n\n\t/**\n\t * Variable: RESET\n\t *\n\t * Specifies the event name for reset.\n\t */\n\tRESET: 'reset',\n\n\t/**\n\t * Variable: PINCH_THRESHOLD\n\t *\n\t * Threshold for pinch gestures to fire a mouse wheel event.\n\t * Default value is 10.\n\t */\n\tPINCH_THRESHOLD: 10\n\n};\n\n__mxOutput.mxEvent = typeof mxEvent !== 'undefined' ? mxEvent : undefined;\n\n/**\n * Copyright (c) 2006-2020, JGraph Ltd\n * Copyright (c) 2006-2020, draw.io AG\n */\n/**\n * Class: mxXmlRequest\n * \n * XML HTTP request wrapper. See also: <mxUtils.get>, <mxUtils.post> and\n * <mxUtils.load>. This class provides a cross-browser abstraction for Ajax\n * requests.\n * \n * Encoding:\n * \n * For encoding parameter values, the built-in encodeURIComponent JavaScript\n * method must be used. For automatic encoding of post data in <mxEditor> the\n * <mxEditor.escapePostData> switch can be set to true (default). The encoding\n * will be carried out using the conte type of the page. That is, the page\n * containting the editor should contain a meta tag in the header, eg.\n * <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n * \n * Example:\n * \n * (code)\n * var onload = function(req)\n * {\n *   mxUtils.alert(req.getDocumentElement());\n * }\n * \n * var onerror = function(req)\n * {\n *   mxUtils.alert('Error');\n * }\n * new mxXmlRequest(url, 'key=value').send(onload, onerror);\n * (end)\n * \n * Sends an asynchronous POST request to the specified URL.\n * \n * Example:\n * \n * (code)\n * var req = new mxXmlRequest(url, 'key=value', 'POST', false);\n * req.send();\n * mxUtils.alert(req.getDocumentElement());\n * (end)\n * \n * Sends a synchronous POST request to the specified URL.\n * \n * Example:\n * \n * (code)\n * var encoder = new mxCodec();\n * var result = encoder.encode(graph.getModel());\n * var xml = encodeURIComponent(mxUtils.getXml(result));\n * new mxXmlRequest(url, 'xml='+xml).send();\n * (end)\n * \n * Sends an encoded graph model to the specified URL using xml as the\n * parameter name. The parameter can then be retrieved in C# as follows:\n * \n * (code)\n * string xml = HttpUtility.UrlDecode(context.Request.Params[\"xml\"]);\n * (end)\n * \n * Or in Java as follows:\n * \n * (code)\n * String xml = URLDecoder.decode(request.getParameter(\"xml\"), \"UTF-8\").replace(\"\\n\", \"&#xa;\");\n * (end)\n *\n * Note that the linefeeds should only be replaced if the XML is\n * processed in Java, for example when creating an image.\n * \n * Constructor: mxXmlRequest\n * \n * Constructs an XML HTTP request.\n * \n * Parameters:\n * \n * url - Target URL of the request.\n * params - Form encoded parameters to send with a POST request.\n * method - String that specifies the request method. Possible values are\n * POST and GET. Default is POST.\n * async - Boolean specifying if an asynchronous request should be used.\n * Default is true.\n * username - String specifying the username to be used for the request.\n * password - String specifying the password to be used for the request.\n */\nfunction mxXmlRequest(url, params, method, async, username, password)\n{\n\tthis.url = url;\n\tthis.params = params;\n\tthis.method = method || 'POST';\n\tthis.async = (async != null) ? async : true;\n\tthis.username = username;\n\tthis.password = password;\n};\n\n/**\n * Variable: url\n * \n * Holds the target URL of the request.\n */\nmxXmlRequest.prototype.url = null;\n\n/**\n * Variable: params\n * \n * Holds the form encoded data for the POST request.\n */\nmxXmlRequest.prototype.params = null;\n\n/**\n * Variable: method\n * \n * Specifies the request method. Possible values are POST and GET. Default\n * is POST.\n */\nmxXmlRequest.prototype.method = null;\n\n/**\n * Variable: async\n * \n * Boolean indicating if the request is asynchronous.\n */\nmxXmlRequest.prototype.async = null;\n\n/**\n * Variable: binary\n * \n * Boolean indicating if the request is binary. This option is ignored in IE.\n * In all other browsers the requested mime type is set to\n * text/plain; charset=x-user-defined. Default is false.\n */\nmxXmlRequest.prototype.binary = false;\n\n/**\n * Variable: withCredentials\n * \n * Specifies if withCredentials should be used in HTML5-compliant browsers. Default is\n * false.\n */\nmxXmlRequest.prototype.withCredentials = false;\n\n/**\n * Variable: username\n * \n * Specifies the username to be used for authentication.\n */\nmxXmlRequest.prototype.username = null;\n\n/**\n * Variable: password\n * \n * Specifies the password to be used for authentication.\n */\nmxXmlRequest.prototype.password = null;\n\n/**\n * Variable: request\n * \n * Holds the inner, browser-specific request object.\n */\nmxXmlRequest.prototype.request = null;\n\n/**\n * Variable: decodeSimulateValues\n * \n * Specifies if request values should be decoded as URIs before setting the\n * textarea value in <simulate>. Defaults to false for backwards compatibility,\n * to avoid another decode on the server this should be set to true.\n */\nmxXmlRequest.prototype.decodeSimulateValues = false;\n\n/**\n * Function: isBinary\n * \n * Returns <binary>.\n */\nmxXmlRequest.prototype.isBinary = function()\n{\n\treturn this.binary;\n};\n\n/**\n * Function: setBinary\n * \n * Sets <binary>.\n */\nmxXmlRequest.prototype.setBinary = function(value)\n{\n\tthis.binary = value;\n};\n\n/**\n * Function: getText\n * \n * Returns the response as a string.\n */\nmxXmlRequest.prototype.getText = function()\n{\n\treturn this.request.responseText;\n};\n\n/**\n * Function: isReady\n * \n * Returns true if the response is ready.\n */\nmxXmlRequest.prototype.isReady = function()\n{\n\treturn this.request.readyState == 4;\n};\n\n/**\n * Function: getDocumentElement\n * \n * Returns the document element of the response XML document.\n */\nmxXmlRequest.prototype.getDocumentElement = function()\n{\n\tvar doc = this.getXml();\n\t\n\tif (doc != null)\n\t{\n\t\treturn doc.documentElement;\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: getXml\n * \n * Returns the response as an XML document. Use <getDocumentElement> to get\n * the document element of the XML document.\n */\nmxXmlRequest.prototype.getXml = function()\n{\n\tvar xml = this.request.responseXML;\n\t\n\t// Handles missing response headers in IE, the first condition handles\n\t// the case where responseXML is there, but using its nodes leads to\n\t// type errors in the mxCellCodec when putting the nodes into a new\n\t// document. This happens in IE9 standards mode and with XML user\n\t// objects only, as they are used directly as values in cells.\n\tif (document.documentMode >= 9 || xml == null || xml.documentElement == null)\n\t{\n\t\txml = mxUtils.parseXml(this.request.responseText);\n\t}\n\t\n\treturn xml;\n};\n\n/**\n * Function: getStatus\n * \n * Returns the status as a number, eg. 404 for \"Not found\" or 200 for \"OK\".\n * Note: The NS_ERROR_NOT_AVAILABLE for invalid responses cannot be cought.\n */\nmxXmlRequest.prototype.getStatus = function()\n{\n\treturn (this.request != null) ? this.request.status : null;\n};\n\n/**\n * Function: create\n * \n * Creates and returns the inner <request> object.\n */\nmxXmlRequest.prototype.create = function()\n{\n\tif (window.XMLHttpRequest)\n\t{\n\t\treturn function()\n\t\t{\n\t\t\tvar req = new XMLHttpRequest();\n\t\t\t\n\t\t\t// TODO: Check for overrideMimeType required here?\n\t\t\tif (this.isBinary() && req.overrideMimeType)\n\t\t\t{\n\t\t\t\treq.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\n\t\t\treturn req;\n\t\t};\n\t}\n\telse if (typeof(ActiveXObject) != 'undefined')\n\t{\n\t\treturn function()\n\t\t{\n\t\t\t// TODO: Implement binary option\n\t\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\n\t\t};\n\t}\n}();\n\n/**\n * Function: send\n * \n * Send the <request> to the target URL using the specified functions to\n * process the response asychronously.\n * \n * Note: Due to technical limitations, onerror is currently ignored.\n * \n * Parameters:\n * \n * onload - Function to be invoked if a successful response was received.\n * onerror - Function to be called on any error. Unused in this implementation, intended for overriden function.\n * timeout - Optional timeout in ms before calling ontimeout.\n * ontimeout - Optional function to execute on timeout.\n */\nmxXmlRequest.prototype.send = function(onload, onerror, timeout, ontimeout)\n{\n\tthis.request = this.create();\n\t\n\tif (this.request != null)\n\t{\n\t\tif (onload != null)\n\t\t{\n\t\t\tthis.request.onreadystatechange = mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tif (this.isReady())\n\t\t\t\t{\n\t\t\t\t\tonload(this);\n\t\t\t\t\tthis.request.onreadystatechange = null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.request.open(this.method, this.url, this.async,\n\t\t\tthis.username, this.password);\n\t\tthis.setRequestHeaders(this.request, this.params);\n\t\t\n\t\tif (window.XMLHttpRequest && this.withCredentials)\n\t\t{\n\t\t\tthis.request.withCredentials = 'true';\n\t\t}\n\t\t\n\t\tif (!mxClient.IS_QUIRKS && (document.documentMode == null || document.documentMode > 9) &&\n\t\t\twindow.XMLHttpRequest && timeout != null && ontimeout != null)\n\t\t{\n\t\t\tthis.request.timeout = timeout;\n\t\t\tthis.request.ontimeout = ontimeout;\n\t\t}\n\t\t\t\t\n\t\tthis.request.send(this.params);\n\t}\n};\n\n/**\n * Function: setRequestHeaders\n * \n * Sets the headers for the given request and parameters. This sets the\n * content-type to application/x-www-form-urlencoded if any params exist.\n * \n * Example:\n * \n * (code)\n * request.setRequestHeaders = function(request, params)\n * {\n *   if (params != null)\n *   {\n *     request.setRequestHeader('Content-Type',\n *             'multipart/form-data');\n *     request.setRequestHeader('Content-Length',\n *             params.length);\n *   }\n * };\n * (end)\n * \n * Use the code above before calling <send> if you require a\n * multipart/form-data request.   \n */\nmxXmlRequest.prototype.setRequestHeaders = function(request, params)\n{\n\tif (params != null)\n\t{\n\t\trequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\t}\n};\n\n/**\n * Function: simulate\n * \n * Creates and posts a request to the given target URL using a dynamically\n * created form inside the given document.\n * \n * Parameters:\n * \n * docs - Document that contains the form element.\n * target - Target to send the form result to.\n */\nmxXmlRequest.prototype.simulate = function(doc, target)\n{\n\tdoc = doc || document;\n\tvar old = null;\n\n\tif (doc == document)\n\t{\n\t\told = window.onbeforeunload;\t\t\n\t\twindow.onbeforeunload = null;\n\t}\n\t\t\t\n\tvar form = doc.createElement('form');\n\tform.setAttribute('method', this.method);\n\tform.setAttribute('action', this.url);\n\n\tif (target != null)\n\t{\n\t\tform.setAttribute('target', target);\n\t}\n\n\tform.style.display = 'none';\n\tform.style.visibility = 'hidden';\n\t\n\tvar pars = (this.params.indexOf('&') > 0) ?\n\t\tthis.params.split('&') :\n\t\tthis.params.split();\n\n\t// Adds the parameters as textareas to the form\n\tfor (var i=0; i<pars.length; i++)\n\t{\n\t\tvar pos = pars[i].indexOf('=');\n\t\t\n\t\tif (pos > 0)\n\t\t{\n\t\t\tvar name = pars[i].substring(0, pos);\n\t\t\tvar value = pars[i].substring(pos+1);\n\t\t\t\n\t\t\tif (this.decodeSimulateValues)\n\t\t\t{\n\t\t\t\tvalue = decodeURIComponent(value);\n\t\t\t}\n\t\t\t\n\t\t\tvar textarea = doc.createElement('textarea');\n\t\t\ttextarea.setAttribute('wrap', 'off');\n\t\t\ttextarea.setAttribute('name', name);\n\t\t\tmxUtils.write(textarea, value);\n\t\t\tform.appendChild(textarea);\n\t\t}\n\t}\n\t\n\tdoc.body.appendChild(form);\n\tform.submit();\n\t\n\tif (form.parentNode != null)\n\t{\n\t\tform.parentNode.removeChild(form);\n\t}\n\n\tif (old != null)\n\t{\t\t\n\t\twindow.onbeforeunload = old;\n\t}\n};\n\n__mxOutput.mxXmlRequest = typeof mxXmlRequest !== 'undefined' ? mxXmlRequest : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxClipboard =\n{\n\t/**\n\t * Class: mxClipboard\n\t * \n\t * Singleton that implements a clipboard for graph cells.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * mxClipboard.copy(graph);\n\t * mxClipboard.paste(graph2);\n\t * (end)\n\t *\n\t * This copies the selection cells from the graph to the clipboard and\n\t * pastes them into graph2.\n\t * \n\t * For fine-grained control of the clipboard data the <mxGraph.canExportCell>\n\t * and <mxGraph.canImportCell> functions can be overridden.\n\t * \n\t * To restore previous parents for pasted cells, the implementation for\n\t * <copy> and <paste> can be changed as follows.\n\t * \n\t * (code)\n\t * mxClipboard.copy = function(graph, cells)\n\t * {\n\t *   cells = cells || graph.getSelectionCells();\n\t *   var result = graph.getExportableCells(cells);\n\t *   \n\t *   mxClipboard.parents = new Object();\n\t *   \n\t *   for (var i = 0; i < result.length; i++)\n\t *   {\n\t *     mxClipboard.parents[i] = graph.model.getParent(cells[i]);\n\t *   }\n\t *   \n\t *   mxClipboard.insertCount = 1;\n\t *   mxClipboard.setCells(graph.cloneCells(result));\n\t *   \n\t *   return result;\n\t * };\n\t * \n\t * mxClipboard.paste = function(graph)\n\t * {\n\t *   if (!mxClipboard.isEmpty())\n\t *   {\n\t *     var cells = graph.getImportableCells(mxClipboard.getCells());\n\t *     var delta = mxClipboard.insertCount * mxClipboard.STEPSIZE;\n\t *     var parent = graph.getDefaultParent();\n\t *     \n\t *     graph.model.beginUpdate();\n\t *     try\n\t *     {\n\t *       for (var i = 0; i < cells.length; i++)\n\t *       {\n\t *         var tmp = (mxClipboard.parents != null && graph.model.contains(mxClipboard.parents[i])) ?\n\t *              mxClipboard.parents[i] : parent;\n\t *         cells[i] = graph.importCells([cells[i]], delta, delta, tmp)[0];\n\t *       }\n\t *     }\n\t *     finally\n\t *     {\n\t *       graph.model.endUpdate();\n\t *     }\n\t *     \n\t *     // Increments the counter and selects the inserted cells\n\t *     mxClipboard.insertCount++;\n\t *     graph.setSelectionCells(cells);\n\t *   }\n\t * };\n\t * (end)\n\t * \n\t * Variable: STEPSIZE\n\t * \n\t * Defines the step size to offset the cells after each paste operation.\n\t * Default is 10.\n\t */\n\tSTEPSIZE: 10,\n\n\t/**\n\t * Variable: insertCount\n\t * \n\t * Counts the number of times the clipboard data has been inserted.\n\t */\n\tinsertCount: 1,\n\n\t/**\n\t * Variable: cells\n\t * \n\t * Holds the array of <mxCells> currently in the clipboard.\n\t */\n\tcells: null,\n\n\t/**\n\t * Function: setCells\n\t * \n\t * Sets the cells in the clipboard. Fires a <mxEvent.CHANGE> event.\n\t */\n\tsetCells: function(cells)\n\t{\n\t\tmxClipboard.cells = cells;\n\t},\n\n\t/**\n\t * Function: getCells\n\t * \n\t * Returns  the cells in the clipboard.\n\t */\n\tgetCells: function()\n\t{\n\t\treturn mxClipboard.cells;\n\t},\n\t\n\t/**\n\t * Function: isEmpty\n\t * \n\t * Returns true if the clipboard currently has not data stored.\n\t */\n\tisEmpty: function()\n\t{\n\t\treturn mxClipboard.getCells() == null;\n\t},\n\t\n\t/**\n\t * Function: cut\n\t * \n\t * Cuts the given array of <mxCells> from the specified graph.\n\t * If cells is null then the selection cells of the graph will\n\t * be used. Returns the cells that have been cut from the graph.\n\t *\n\t * Parameters:\n\t * \n\t * graph - <mxGraph> that contains the cells to be cut.\n\t * cells - Optional array of <mxCells> to be cut.\n\t */\n\tcut: function(graph, cells)\n\t{\n\t\tcells = mxClipboard.copy(graph, cells);\n\t\tmxClipboard.insertCount = 0;\n\t\tmxClipboard.removeCells(graph, cells);\n\t\t\n\t\treturn cells;\n\t},\n\n\t/**\n\t * Function: removeCells\n\t * \n\t * Hook to remove the given cells from the given graph after\n\t * a cut operation.\n\t *\n\t * Parameters:\n\t * \n\t * graph - <mxGraph> that contains the cells to be cut.\n\t * cells - Array of <mxCells> to be cut.\n\t */\n\tremoveCells: function(graph, cells)\n\t{\n\t\tgraph.removeCells(cells);\n\t},\n\n\t/**\n\t * Function: copy\n\t * \n\t * Copies the given array of <mxCells> from the specified\n\t * graph to <cells>. Returns the original array of cells that has\n\t * been cloned. Descendants of cells in the array are ignored.\n\t * \n\t * Parameters:\n\t * \n\t * graph - <mxGraph> that contains the cells to be copied.\n\t * cells - Optional array of <mxCells> to be copied.\n\t */\n\tcopy: function(graph, cells)\n\t{\n\t\tcells = cells || graph.getSelectionCells();\n\t\tvar result = graph.getExportableCells(graph.model.getTopmostCells(cells));\n\t\tmxClipboard.insertCount = 1;\n\t\tmxClipboard.setCells(graph.cloneCells(result));\n\n\t\treturn result;\n\t},\n\n\t/**\n\t * Function: paste\n\t * \n\t * Pastes the <cells> into the specified graph restoring\n\t * the relation to <parents>, if possible. If the parents\n\t * are no longer in the graph or invisible then the\n\t * cells are added to the graph's default or into the\n\t * swimlane under the cell's new location if one exists.\n\t * The cells are added to the graph using <mxGraph.importCells>\n\t * and returned.\n\t * \n\t * Parameters:\n\t * \n\t * graph - <mxGraph> to paste the <cells> into.\n\t */\n\tpaste: function(graph)\n\t{\n\t\tvar cells = null;\n\t\t\n\t\tif (!mxClipboard.isEmpty())\n\t\t{\n\t\t\tcells = graph.getImportableCells(mxClipboard.getCells());\n\t\t\tvar delta = mxClipboard.insertCount * mxClipboard.STEPSIZE;\n\t\t\tvar parent = graph.getDefaultParent();\n\t\t\tcells = graph.importCells(cells, delta, delta, parent);\n\t\t\t\n\t\t\t// Increments the counter and selects the inserted cells\n\t\t\tmxClipboard.insertCount++;\n\t\t\tgraph.setSelectionCells(cells);\n\t\t}\n\t\t\n\t\treturn cells;\n\t}\n\n};\n\n__mxOutput.mxClipboard = typeof mxClipboard !== 'undefined' ? mxClipboard : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxWindow\n * \n * Basic window inside a document.\n * \n * Examples:\n * \n * Creating a simple window.\n *\n * (code)\n * var tb = document.createElement('div');\n * var wnd = new mxWindow('Title', tb, 100, 100, 200, 200, true, true);\n * wnd.setVisible(true); \n * (end)\n *\n * Creating a window that contains an iframe. \n * \n * (code)\n * var frame = document.createElement('iframe');\n * frame.setAttribute('width', '192px');\n * frame.setAttribute('height', '172px');\n * frame.setAttribute('src', 'http://www.example.com/');\n * frame.style.backgroundColor = 'white';\n * \n * var w = document.body.clientWidth;\n * var h = (document.body.clientHeight || document.documentElement.clientHeight);\n * var wnd = new mxWindow('Title', frame, (w-200)/2, (h-200)/3, 200, 200);\n * wnd.setVisible(true);\n * (end)\n * \n * To limit the movement of a window, eg. to keep it from being moved beyond\n * the top, left corner the following method can be overridden (recommended):\n * \n * (code)\n * wnd.setLocation = function(x, y)\n * {\n *   x = Math.max(0, x);\n *   y = Math.max(0, y);\n *   mxWindow.prototype.setLocation.apply(this, arguments);\n * };\n * (end)\n * \n * Or the following event handler can be used:\n * \n * (code)\n * wnd.addListener(mxEvent.MOVE, function(e)\n * {\n *   wnd.setLocation(Math.max(0, wnd.getX()), Math.max(0, wnd.getY()));\n * });\n * (end)\n * \n * To keep a window inside the current window:\n * \n * (code)\n * mxEvent.addListener(window, 'resize', mxUtils.bind(this, function()\n * {\n *   var iw = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n *   var ih = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n *   \n *   var x = this.window.getX();\n *   var y = this.window.getY();\n *   \n *   if (x + this.window.table.clientWidth > iw)\n *   {\n *     x = Math.max(0, iw - this.window.table.clientWidth);\n *   }\n *   \n *   if (y + this.window.table.clientHeight > ih)\n *   {\n *     y = Math.max(0, ih - this.window.table.clientHeight);\n *   }\n *   \n *   if (this.window.getX() != x || this.window.getY() != y)\n *   {\n *     this.window.setLocation(x, y);\n *   }\n * }));\n * (end)\n *\n * Event: mxEvent.MOVE_START\n *\n * Fires before the window is moved. The <code>event</code> property contains\n * the corresponding mouse event.\n *\n * Event: mxEvent.MOVE\n *\n * Fires while the window is being moved. The <code>event</code> property\n * contains the corresponding mouse event.\n *\n * Event: mxEvent.MOVE_END\n *\n * Fires after the window is moved. The <code>event</code> property contains\n * the corresponding mouse event.\n *\n * Event: mxEvent.RESIZE_START\n *\n * Fires before the window is resized. The <code>event</code> property contains\n * the corresponding mouse event.\n *\n * Event: mxEvent.RESIZE\n *\n * Fires while the window is being resized. The <code>event</code> property\n * contains the corresponding mouse event.\n *\n * Event: mxEvent.RESIZE_END\n *\n * Fires after the window is resized. The <code>event</code> property contains\n * the corresponding mouse event.\n *\n * Event: mxEvent.MAXIMIZE\n * \n * Fires after the window is maximized. The <code>event</code> property\n * contains the corresponding mouse event.\n * \n * Event: mxEvent.MINIMIZE\n * \n * Fires after the window is minimized. The <code>event</code> property\n * contains the corresponding mouse event.\n * \n * Event: mxEvent.NORMALIZE\n * \n * Fires after the window is normalized, that is, it returned from\n * maximized or minimized state. The <code>event</code> property contains the\n * corresponding mouse event.\n *  \n * Event: mxEvent.ACTIVATE\n * \n * Fires after a window is activated. The <code>previousWindow</code> property\n * contains the previous window. The event sender is the active window.\n * \n * Event: mxEvent.SHOW\n * \n * Fires after the window is shown. This event has no properties.\n * \n * Event: mxEvent.HIDE\n * \n * Fires after the window is hidden. This event has no properties.\n * \n * Event: mxEvent.CLOSE\n * \n * Fires before the window is closed. The <code>event</code> property contains\n * the corresponding mouse event.\n * \n * Event: mxEvent.DESTROY\n * \n * Fires before the window is destroyed. This event has no properties.\n * \n * Constructor: mxWindow\n * \n * Constructs a new window with the given dimension and title to display\n * the specified content. The window elements use the given style as a\n * prefix for the classnames of the respective window elements, namely,\n * the window title and window pane. The respective postfixes are appended\n * to the given stylename as follows:\n * \n *   style - Base style for the window.\n *   style+Title - Style for the window title.\n *   style+Pane - Style for the window pane.\n * \n * The default value for style is mxWindow, resulting in the following\n * classnames for the window elements: mxWindow, mxWindowTitle and\n * mxWindowPane.\n * \n * If replaceNode is given then the window replaces the given DOM node in\n * the document.\n * \n * Parameters:\n * \n * title - String that represents the title of the new window.\n * content - DOM node that is used as the window content.\n * x - X-coordinate of the window location.\n * y - Y-coordinate of the window location.\n * width - Width of the window.\n * height - Optional height of the window. Default is to match the height\n * of the content at the specified width.\n * minimizable - Optional boolean indicating if the window is minimizable.\n * Default is true.\n * movable - Optional boolean indicating if the window is movable. Default\n * is true.\n * replaceNode - Optional DOM node that the window should replace.\n * style - Optional base classname for the window elements. Default is\n * mxWindow.\n */\nfunction mxWindow(title, content, x, y, width, height, minimizable, movable, replaceNode, style)\n{\n\tif (content != null)\n\t{\n\t\tminimizable = (minimizable != null) ? minimizable : true;\n\t\tthis.content = content;\n\t\tthis.init(x, y, width, height, style);\n\t\t\n\t\tthis.installMaximizeHandler();\n\t\tthis.installMinimizeHandler();\n\t\tthis.installCloseHandler();\n\t\tthis.setMinimizable(minimizable);\n\t\tthis.setTitle(title);\n\t\t\n\t\tif (movable == null || movable)\n\t\t{\n\t\t\tthis.installMoveHandler();\n\t\t}\n\n\t\tif (replaceNode != null && replaceNode.parentNode != null)\n\t\t{\n\t\t\treplaceNode.parentNode.replaceChild(this.div, replaceNode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.body.appendChild(this.div);\n\t\t}\n\t}\n};\n\n/**\n * Extends mxEventSource.\n */\nmxWindow.prototype = new mxEventSource();\nmxWindow.prototype.constructor = mxWindow;\n\n/**\n * Variable: closeImage\n * \n * URL of the image to be used for the close icon in the titlebar.\n */\nmxWindow.prototype.closeImage = mxClient.imageBasePath + '/close.gif';\n\n/**\n * Variable: minimizeImage\n * \n * URL of the image to be used for the minimize icon in the titlebar.\n */\nmxWindow.prototype.minimizeImage = mxClient.imageBasePath + '/minimize.gif';\n\t\n/**\n * Variable: normalizeImage\n * \n * URL of the image to be used for the normalize icon in the titlebar.\n */\nmxWindow.prototype.normalizeImage = mxClient.imageBasePath + '/normalize.gif';\n\t\n/**\n * Variable: maximizeImage\n * \n * URL of the image to be used for the maximize icon in the titlebar.\n */\nmxWindow.prototype.maximizeImage = mxClient.imageBasePath + '/maximize.gif';\n\n/**\n * Variable: resizeImage\n * \n * URL of the image to be used for the resize icon.\n */\nmxWindow.prototype.resizeImage = mxClient.imageBasePath + '/resize.gif';\n\n/**\n * Variable: visible\n * \n * Boolean flag that represents the visible state of the window.\n */\nmxWindow.prototype.visible = false;\n\n/**\n * Variable: minimumSize\n * \n * <mxRectangle> that specifies the minimum width and height of the window.\n * Default is (50, 40).\n */\nmxWindow.prototype.minimumSize = new mxRectangle(0, 0, 50, 40);\n\n/**\n * Variable: destroyOnClose\n * \n * Specifies if the window should be destroyed when it is closed. If this\n * is false then the window is hidden using <setVisible>. Default is true.\n */\nmxWindow.prototype.destroyOnClose = true;\n\n/**\n * Variable: contentHeightCorrection\n * \n * Defines the correction factor for computing the height of the contentWrapper.\n * Default is 6 for IE 7/8 standards mode and 2 for all other browsers and modes.\n */\nmxWindow.prototype.contentHeightCorrection = (document.documentMode == 8 || document.documentMode == 7) ? 6 : 2;\n\n/**\n * Variable: title\n * \n * Reference to the DOM node (TD) that contains the title.\n */\nmxWindow.prototype.title = null;\n\n/**\n * Variable: content\n * \n * Reference to the DOM node that represents the window content.\n */\nmxWindow.prototype.content = null;\n\n/**\n * Function: init\n * \n * Initializes the DOM tree that represents the window.\n */\nmxWindow.prototype.init = function(x, y, width, height, style)\n{\n\tstyle = (style != null) ? style : 'mxWindow';\n\t\n\tthis.div = document.createElement('div');\n\tthis.div.className = style;\n\n\tthis.div.style.left = x + 'px';\n\tthis.div.style.top = y + 'px';\n\tthis.table = document.createElement('table');\n\tthis.table.className = style;\n\n\t// Disables built-in pan and zoom in IE10 and later\n\tif (mxClient.IS_POINTER)\n\t{\n\t\tthis.div.style.touchAction = 'none';\n\t}\n\t\n\t// Workaround for table size problems in FF\n\tif (width != null)\n\t{\n\t\tif (!mxClient.IS_QUIRKS)\n\t\t{\n\t\t\tthis.div.style.width = width + 'px'; \n\t\t}\n\t\t\n\t\tthis.table.style.width = width + 'px';\n\t} \n\t\n\tif (height != null)\n\t{\n\t\tif (!mxClient.IS_QUIRKS)\n\t\t{\n\t\t\tthis.div.style.height = height + 'px';\n\t\t}\n\t\t\n\t\tthis.table.style.height = height + 'px';\n\t}\t\t\n\t\n\t// Creates title row\n\tvar tbody = document.createElement('tbody');\n\tvar tr = document.createElement('tr');\n\t\n\tthis.title = document.createElement('td');\n\tthis.title.className = style + 'Title';\n\t\n\tthis.buttons = document.createElement('div');\n\tthis.buttons.style.position = 'absolute';\n\tthis.buttons.style.display = 'inline-block';\n\tthis.buttons.style.right = '4px';\n\tthis.buttons.style.top = '5px';\n\tthis.title.appendChild(this.buttons);\n\t\n\ttr.appendChild(this.title);\n\ttbody.appendChild(tr);\n\t\n\t// Creates content row and table cell\n\ttr = document.createElement('tr');\n\tthis.td = document.createElement('td');\n\tthis.td.className = style + 'Pane';\n\t\n\tif (document.documentMode == 7)\n\t{\n\t\tthis.td.style.height = '100%';\n\t}\n\n\tthis.contentWrapper = document.createElement('div');\n\tthis.contentWrapper.className = style + 'Pane';\n\tthis.contentWrapper.style.width = '100%';\n\tthis.contentWrapper.appendChild(this.content);\n\n\t// Workaround for div around div restricts height\n\t// of inner div if outerdiv has hidden overflow\n\tif (mxClient.IS_QUIRKS || this.content.nodeName.toUpperCase() != 'DIV')\n\t{\n\t\tthis.contentWrapper.style.height = '100%';\n\t}\n\n\t// Puts all content into the DOM\n\tthis.td.appendChild(this.contentWrapper);\n\ttr.appendChild(this.td);\n\ttbody.appendChild(tr);\n\tthis.table.appendChild(tbody);\n\tthis.div.appendChild(this.table);\n\t\n\t// Puts the window on top of other windows when clicked\n\tvar activator = mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.activate();\n\t});\n\t\n\tmxEvent.addGestureListeners(this.title, activator);\n\tmxEvent.addGestureListeners(this.table, activator);\n\n\tthis.hide();\n};\n\n/**\n * Function: setTitle\n * \n * Sets the window title to the given string. HTML markup inside the title\n * will be escaped.\n */\nmxWindow.prototype.setTitle = function(title)\n{\n\t// Removes all text content nodes (normally just one)\n\tvar child = this.title.firstChild;\n\t\n\twhile (child != null)\n\t{\n\t\tvar next = child.nextSibling;\n\t\t\n\t\tif (child.nodeType == mxConstants.NODETYPE_TEXT)\n\t\t{\n\t\t\tchild.parentNode.removeChild(child);\n\t\t}\n\t\t\n\t\tchild = next;\n\t}\n\t\n\tmxUtils.write(this.title, title || '');\n\tthis.title.appendChild(this.buttons);\n};\n\n/**\n * Function: setScrollable\n * \n * Sets if the window contents should be scrollable.\n */\nmxWindow.prototype.setScrollable = function(scrollable)\n{\n\t// Workaround for hang in Presto 2.5.22 (Opera 10.5)\n\tif (navigator.userAgent == null ||\n\t\tnavigator.userAgent.indexOf('Presto/2.5') < 0)\n\t{\n\t\tif (scrollable)\n\t\t{\n\t\t\tthis.contentWrapper.style.overflow = 'auto';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.contentWrapper.style.overflow = 'hidden';\n\t\t}\n\t}\n};\n\n/**\n * Function: activate\n * \n * Puts the window on top of all other windows.\n */\nmxWindow.prototype.activate = function()\n{\n\tif (mxWindow.activeWindow != this)\n\t{\n\t\tvar style = mxUtils.getCurrentStyle(this.getElement());\n\t\tvar index = (style != null) ? style.zIndex : 3;\n\n\t\tif (mxWindow.activeWindow)\n\t\t{\n\t\t\tvar elt = mxWindow.activeWindow.getElement();\n\t\t\t\n\t\t\tif (elt != null && elt.style != null)\n\t\t\t{\n\t\t\t\telt.style.zIndex = index;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar previousWindow = mxWindow.activeWindow;\n\t\tthis.getElement().style.zIndex = parseInt(index) + 1;\n\t\tmxWindow.activeWindow = this;\n\t\t\n\t\tthis.fireEvent(new mxEventObject(mxEvent.ACTIVATE, 'previousWindow', previousWindow));\n\t}\n};\n\n/**\n * Function: getElement\n * \n * Returuns the outermost DOM node that makes up the window.\n */\nmxWindow.prototype.getElement = function()\n{\n\treturn this.div;\n};\n\n/**\n * Function: fit\n * \n * Makes sure the window is inside the client area of the window.\n */\nmxWindow.prototype.fit = function()\n{\n\tmxUtils.fit(this.div);\n};\n\n/**\n * Function: isResizable\n * \n * Returns true if the window is resizable.\n */\nmxWindow.prototype.isResizable = function()\n{\n\tif (this.resize != null)\n\t{\n\t\treturn this.resize.style.display != 'none';\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: setResizable\n * \n * Sets if the window should be resizable. To avoid interference with some\n * built-in features of IE10 and later, the use of the following code is\n * recommended if there are resizable <mxWindow>s in the page:\n * \n * (code)\n * if (mxClient.IS_POINTER)\n * {\n *   document.body.style.msTouchAction = 'none';\n * }\n * (end)\n */\nmxWindow.prototype.setResizable = function(resizable)\n{\n\tif (resizable)\n\t{\n\t\tif (this.resize == null)\n\t\t{\n\t\t\tthis.resize = document.createElement('img');\n\t\t\tthis.resize.style.position = 'absolute';\n\t\t\tthis.resize.style.bottom = '2px';\n\t\t\tthis.resize.style.right = '2px';\n\n\t\t\tthis.resize.setAttribute('src', this.resizeImage);\n\t\t\tthis.resize.style.cursor = 'nw-resize';\n\t\t\t\n\t\t\tvar startX = null;\n\t\t\tvar startY = null;\n\t\t\tvar width = null;\n\t\t\tvar height = null;\n\t\t\t\n\t\t\tvar start = mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\t// LATER: pointerdown starting on border of resize does start\n\t\t\t\t// the drag operation but does not fire consecutive events via\n\t\t\t\t// one of the listeners below (does pan instead).\n\t\t\t\t// Workaround: document.body.style.msTouchAction = 'none'\n\t\t\t\tthis.activate();\n\t\t\t\tstartX = mxEvent.getClientX(evt);\n\t\t\t\tstartY = mxEvent.getClientY(evt);\n\t\t\t\twidth = this.div.offsetWidth;\n\t\t\t\theight = this.div.offsetHeight;\n\t\t\t\t\n\t\t\t\tmxEvent.addGestureListeners(document, null, dragHandler, dropHandler);\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.RESIZE_START, 'event', evt));\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t});\n\n\t\t\t// Adds a temporary pair of listeners to intercept\n\t\t\t// the gesture event in the document\n\t\t\tvar dragHandler = mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (startX != null && startY != null)\n\t\t\t\t{\n\t\t\t\t\tvar dx = mxEvent.getClientX(evt) - startX;\n\t\t\t\t\tvar dy = mxEvent.getClientY(evt) - startY;\n\t\n\t\t\t\t\tthis.setSize(width + dx, height + dy);\n\t\n\t\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.RESIZE, 'event', evt));\n\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tvar dropHandler = mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (startX != null && startY != null)\n\t\t\t\t{\n\t\t\t\t\tstartX = null;\n\t\t\t\t\tstartY = null;\n\t\t\t\t\tmxEvent.removeGestureListeners(document, null, dragHandler, dropHandler);\n\t\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.RESIZE_END, 'event', evt));\n\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tmxEvent.addGestureListeners(this.resize, start, dragHandler, dropHandler);\n\t\t\tthis.div.appendChild(this.resize);\n\t\t}\n\t\telse \n\t\t{\n\t\t\tthis.resize.style.display = 'inline';\n\t\t}\n\t}\n\telse if (this.resize != null)\n\t{\n\t\tthis.resize.style.display = 'none';\n\t}\n};\n\t\n/**\n * Function: setSize\n * \n * Sets the size of the window.\n */\nmxWindow.prototype.setSize = function(width, height)\n{\n\twidth = Math.max(this.minimumSize.width, width);\n\theight = Math.max(this.minimumSize.height, height);\n\n\t// Workaround for table size problems in FF\n\tif (!mxClient.IS_QUIRKS)\n\t{\n\t\tthis.div.style.width =  width + 'px';\n\t\tthis.div.style.height = height + 'px';\n\t}\n\t\n\tthis.table.style.width =  width + 'px';\n\tthis.table.style.height = height + 'px';\n\n\tif (!mxClient.IS_QUIRKS)\n\t{\n\t\tthis.contentWrapper.style.height = (this.div.offsetHeight -\n\t\t\tthis.title.offsetHeight - this.contentHeightCorrection) + 'px';\n\t}\n};\n\t\n/**\n * Function: setMinimizable\n * \n * Sets if the window is minimizable.\n */\nmxWindow.prototype.setMinimizable = function(minimizable)\n{\n\tthis.minimize.style.display = (minimizable) ? '' : 'none';\n};\n\n/**\n * Function: getMinimumSize\n * \n * Returns an <mxRectangle> that specifies the size for the minimized window.\n * A width or height of 0 means keep the existing width or height. This\n * implementation returns the height of the window title and keeps the width.\n */\nmxWindow.prototype.getMinimumSize = function()\n{\n\treturn new mxRectangle(0, 0, 0, this.title.offsetHeight);\n};\n\n/**\n * Function: installMinimizeHandler\n * \n * Installs the event listeners required for minimizing the window.\n */\nmxWindow.prototype.installMinimizeHandler = function()\n{\n\tthis.minimize = document.createElement('img');\n\t\n\tthis.minimize.setAttribute('src', this.minimizeImage);\n\tthis.minimize.setAttribute('title', 'Minimize');\n\tthis.minimize.style.cursor = 'pointer';\n\tthis.minimize.style.marginLeft = '2px';\n\tthis.minimize.style.display = 'none';\n\t\n\tthis.buttons.appendChild(this.minimize);\n\t\n\tvar minimized = false;\n\tvar maxDisplay = null;\n\tvar height = null;\n\n\tvar funct = mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.activate();\n\t\t\n\t\tif (!minimized)\n\t\t{\n\t\t\tminimized = true;\n\t\t\t\n\t\t\tthis.minimize.setAttribute('src', this.normalizeImage);\n\t\t\tthis.minimize.setAttribute('title', 'Normalize');\n\t\t\tthis.contentWrapper.style.display = 'none';\n\t\t\tmaxDisplay = this.maximize.style.display;\n\t\t\t\n\t\t\tthis.maximize.style.display = 'none';\n\t\t\theight = this.table.style.height;\n\t\t\t\n\t\t\tvar minSize = this.getMinimumSize();\n\t\t\t\n\t\t\tif (minSize.height > 0)\n\t\t\t{\n\t\t\t\tif (!mxClient.IS_QUIRKS)\n\t\t\t\t{\n\t\t\t\t\tthis.div.style.height = minSize.height + 'px';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.style.height = minSize.height + 'px';\n\t\t\t}\n\t\t\t\n\t\t\tif (minSize.width > 0)\n\t\t\t{\n\t\t\t\tif (!mxClient.IS_QUIRKS)\n\t\t\t\t{\n\t\t\t\t\tthis.div.style.width = minSize.width + 'px';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.style.width = minSize.width + 'px';\n\t\t\t}\n\t\t\t\n\t\t\tif (this.resize != null)\n\t\t\t{\n\t\t\t\tthis.resize.style.visibility = 'hidden';\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.MINIMIZE, 'event', evt));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tminimized = false;\n\t\t\t\n\t\t\tthis.minimize.setAttribute('src', this.minimizeImage);\n\t\t\tthis.minimize.setAttribute('title', 'Minimize');\n\t\t\tthis.contentWrapper.style.display = ''; // default\n\t\t\tthis.maximize.style.display = maxDisplay;\n\t\t\t\n\t\t\tif (!mxClient.IS_QUIRKS)\n\t\t\t{\n\t\t\t\tthis.div.style.height = height;\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.style.height = height;\n\n\t\t\tif (this.resize != null)\n\t\t\t{\n\t\t\t\tthis.resize.style.visibility = '';\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.NORMALIZE, 'event', evt));\n\t\t}\n\t\t\n\t\tmxEvent.consume(evt);\n\t});\n\t\n\tmxEvent.addGestureListeners(this.minimize, funct);\n};\n\t\n/**\n * Function: setMaximizable\n * \n * Sets if the window is maximizable.\n */\nmxWindow.prototype.setMaximizable = function(maximizable)\n{\n\tthis.maximize.style.display = (maximizable) ? '' : 'none';\n};\n\n/**\n * Function: installMaximizeHandler\n * \n * Installs the event listeners required for maximizing the window.\n */\nmxWindow.prototype.installMaximizeHandler = function()\n{\n\tthis.maximize = document.createElement('img');\n\t\n\tthis.maximize.setAttribute('src', this.maximizeImage);\n\tthis.maximize.setAttribute('title', 'Maximize');\n\tthis.maximize.style.cursor = 'default';\n\tthis.maximize.style.marginLeft = '2px';\n\tthis.maximize.style.cursor = 'pointer';\n\tthis.maximize.style.display = 'none';\n\t\n\tthis.buttons.appendChild(this.maximize);\n\t\n\tvar maximized = false;\n\tvar x = null;\n\tvar y = null;\n\tvar height = null;\n\tvar width = null;\n\tvar minDisplay = null;\n\n\tvar funct = mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.activate();\n\t\t\n\t\tif (this.maximize.style.display != 'none')\n\t\t{\n\t\t\tif (!maximized)\n\t\t\t{\n\t\t\t\tmaximized = true;\n\t\t\t\t\n\t\t\t\tthis.maximize.setAttribute('src', this.normalizeImage);\n\t\t\t\tthis.maximize.setAttribute('title', 'Normalize');\n\t\t\t\tthis.contentWrapper.style.display = '';\n\t\t\t\tminDisplay = this.minimize.style.display;\n\t\t\t\tthis.minimize.style.display = 'none';\n\t\t\t\t\n\t\t\t\t// Saves window state\n\t\t\t\tx = parseInt(this.div.style.left);\n\t\t\t\ty = parseInt(this.div.style.top);\n\t\t\t\theight = this.table.style.height;\n\t\t\t\twidth = this.table.style.width;\n\n\t\t\t\tthis.div.style.left = '0px';\n\t\t\t\tthis.div.style.top = '0px';\n\t\t\t\tvar docHeight = Math.max(document.body.clientHeight || 0, document.documentElement.clientHeight || 0);\n\n\t\t\t\tif (!mxClient.IS_QUIRKS)\n\t\t\t\t{\n\t\t\t\t\tthis.div.style.width = (document.body.clientWidth - 2) + 'px';\n\t\t\t\t\tthis.div.style.height = (docHeight - 2) + 'px';\n\t\t\t\t}\n\n\t\t\t\tthis.table.style.width = (document.body.clientWidth - 2) + 'px';\n\t\t\t\tthis.table.style.height = (docHeight - 2) + 'px';\n\t\t\t\t\n\t\t\t\tif (this.resize != null)\n\t\t\t\t{\n\t\t\t\t\tthis.resize.style.visibility = 'hidden';\n\t\t\t\t}\n\n\t\t\t\tif (!mxClient.IS_QUIRKS)\n\t\t\t\t{\n\t\t\t\t\tvar style = mxUtils.getCurrentStyle(this.contentWrapper);\n\t\t\n\t\t\t\t\tif (style.overflow == 'auto' || this.resize != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.contentWrapper.style.height = (this.div.offsetHeight -\n\t\t\t\t\t\t\tthis.title.offsetHeight - this.contentHeightCorrection) + 'px';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.MAXIMIZE, 'event', evt));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmaximized = false;\n\t\t\t\t\n\t\t\t\tthis.maximize.setAttribute('src', this.maximizeImage);\n\t\t\t\tthis.maximize.setAttribute('title', 'Maximize');\n\t\t\t\tthis.contentWrapper.style.display = '';\n\t\t\t\tthis.minimize.style.display = minDisplay;\n\n\t\t\t\t// Restores window state\n\t\t\t\tthis.div.style.left = x+'px';\n\t\t\t\tthis.div.style.top = y+'px';\n\t\t\t\t\n\t\t\t\tif (!mxClient.IS_QUIRKS)\n\t\t\t\t{\n\t\t\t\t\tthis.div.style.height = height;\n\t\t\t\t\tthis.div.style.width = width;\n\n\t\t\t\t\tvar style = mxUtils.getCurrentStyle(this.contentWrapper);\n\t\t\n\t\t\t\t\tif (style.overflow == 'auto' || this.resize != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.contentWrapper.style.height = (this.div.offsetHeight -\n\t\t\t\t\t\t\tthis.title.offsetHeight - this.contentHeightCorrection) + 'px';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.style.height = height;\n\t\t\t\tthis.table.style.width = width;\n\n\t\t\t\tif (this.resize != null)\n\t\t\t\t{\n\t\t\t\t\tthis.resize.style.visibility = '';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.NORMALIZE, 'event', evt));\n\t\t\t}\n\t\t\t\n\t\t\tmxEvent.consume(evt);\n\t\t}\n\t});\n\t\n\tmxEvent.addGestureListeners(this.maximize, funct);\n\tmxEvent.addListener(this.title, 'dblclick', funct);\n};\n\t\n/**\n * Function: installMoveHandler\n * \n * Installs the event listeners required for moving the window.\n */\nmxWindow.prototype.installMoveHandler = function()\n{\n\tthis.title.style.cursor = 'move';\n\t\n\tmxEvent.addGestureListeners(this.title,\n\t\tmxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tvar startX = mxEvent.getClientX(evt);\n\t\t\tvar startY = mxEvent.getClientY(evt);\n\t\t\tvar x = this.getX();\n\t\t\tvar y = this.getY();\n\t\t\t\t\t\t\n\t\t\t// Adds a temporary pair of listeners to intercept\n\t\t\t// the gesture event in the document\n\t\t\tvar dragHandler = mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tvar dx = mxEvent.getClientX(evt) - startX;\n\t\t\t\tvar dy = mxEvent.getClientY(evt) - startY;\n\t\t\t\tthis.setLocation(x + dx, y + dy);\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.MOVE, 'event', evt));\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t});\n\t\t\t\n\t\t\tvar dropHandler = mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tmxEvent.removeGestureListeners(document, null, dragHandler, dropHandler);\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.MOVE_END, 'event', evt));\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t});\n\t\t\t\n\t\t\tmxEvent.addGestureListeners(document, null, dragHandler, dropHandler);\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.MOVE_START, 'event', evt));\n\t\t\tmxEvent.consume(evt);\n\t\t}));\n\t\n\t// Disables built-in pan and zoom in IE10 and later\n\tif (mxClient.IS_POINTER)\n\t{\n\t\tthis.title.style.touchAction = 'none';\n\t}\n};\n\n/**\n * Function: setLocation\n * \n * Sets the upper, left corner of the window.\n */\n mxWindow.prototype.setLocation = function(x, y)\n {\n\tthis.div.style.left = x + 'px';\n\tthis.div.style.top = y + 'px';\n };\n\n/**\n * Function: getX\n *\n * Returns the current position on the x-axis.\n */\nmxWindow.prototype.getX = function()\n{\n\treturn parseInt(this.div.style.left);\n};\n\n/**\n * Function: getY\n *\n * Returns the current position on the y-axis.\n */\nmxWindow.prototype.getY = function()\n{\n\treturn parseInt(this.div.style.top);\n};\n\n/**\n * Function: installCloseHandler\n *\n * Adds the <closeImage> as a new image node in <closeImg> and installs the\n * <close> event.\n */\nmxWindow.prototype.installCloseHandler = function()\n{\n\tthis.closeImg = document.createElement('img');\n\t\n\tthis.closeImg.setAttribute('src', this.closeImage);\n\tthis.closeImg.setAttribute('title', 'Close');\n\tthis.closeImg.style.marginLeft = '2px';\n\tthis.closeImg.style.cursor = 'pointer';\n\tthis.closeImg.style.display = 'none';\n\t\n\tthis.buttons.appendChild(this.closeImg);\n\n\tmxEvent.addGestureListeners(this.closeImg,\n\t\tmxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CLOSE, 'event', evt));\n\t\t\t\n\t\t\tif (this.destroyOnClose)\n\t\t\t{\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setVisible(false);\n\t\t\t}\n\t\t\t\n\t\t\tmxEvent.consume(evt);\n\t\t}));\n};\n\n/**\n * Function: setImage\n * \n * Sets the image associated with the window.\n * \n * Parameters:\n * \n * image - URL of the image to be used.\n */\nmxWindow.prototype.setImage = function(image)\n{\n\tthis.image = document.createElement('img');\n\tthis.image.setAttribute('src', image);\n\tthis.image.setAttribute('align', 'left');\n\tthis.image.style.marginRight = '4px';\n\tthis.image.style.marginLeft = '0px';\n\tthis.image.style.marginTop = '-2px';\n\t\n\tthis.title.insertBefore(this.image, this.title.firstChild);\n};\n\n/**\n * Function: setClosable\n * \n * Sets the image associated with the window.\n * \n * Parameters:\n * \n * closable - Boolean specifying if the window should be closable.\n */\nmxWindow.prototype.setClosable = function(closable)\n{\n\tthis.closeImg.style.display = (closable) ? '' : 'none';\n};\n\n/**\n * Function: isVisible\n * \n * Returns true if the window is visible.\n */\nmxWindow.prototype.isVisible = function()\n{\n\tif (this.div != null)\n\t{\n\t\treturn this.div.style.display != 'none';\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: setVisible\n *\n * Shows or hides the window depending on the given flag.\n * \n * Parameters:\n * \n * visible - Boolean indicating if the window should be made visible.\n */\nmxWindow.prototype.setVisible = function(visible)\n{\n\tif (this.div != null && this.isVisible() != visible)\n\t{\n\t\tif (visible)\n\t\t{\n\t\t\tthis.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hide();\n\t\t}\n\t}\n};\n\n/**\n * Function: show\n *\n * Shows the window.\n */\nmxWindow.prototype.show = function()\n{\n\tthis.div.style.display = '';\n\tthis.activate();\n\t\n\tvar style = mxUtils.getCurrentStyle(this.contentWrapper);\n\t\n\tif (!mxClient.IS_QUIRKS && (style.overflow == 'auto' || this.resize != null) &&\n\t\tthis.contentWrapper.style.display != 'none')\n\t{\n\t\tthis.contentWrapper.style.height = (this.div.offsetHeight -\n\t\t\t\tthis.title.offsetHeight - this.contentHeightCorrection) + 'px';\n\t}\n\t\n\tthis.fireEvent(new mxEventObject(mxEvent.SHOW));\n};\n\n/**\n * Function: hide\n *\n * Hides the window.\n */\nmxWindow.prototype.hide = function()\n{\n\tthis.div.style.display = 'none';\n\tthis.fireEvent(new mxEventObject(mxEvent.HIDE));\n};\n\n/**\n * Function: destroy\n *\n * Destroys the window and removes all associated resources. Fires a\n * <destroy> event prior to destroying the window.\n */\nmxWindow.prototype.destroy = function()\n{\n\tthis.fireEvent(new mxEventObject(mxEvent.DESTROY));\n\t\n\tif (this.div != null)\n\t{\n\t\tmxEvent.release(this.div);\n\t\tthis.div.parentNode.removeChild(this.div);\n\t\tthis.div = null;\n\t}\n\t\n\tthis.title = null;\n\tthis.content = null;\n\tthis.contentWrapper = null;\n};\n\n__mxOutput.mxWindow = typeof mxWindow !== 'undefined' ? mxWindow : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxForm\n * \n * A simple class for creating HTML forms.\n * \n * Constructor: mxForm\n * \n * Creates a HTML table using the specified classname.\n */\nfunction mxForm(className)\n{\n\tthis.table = document.createElement('table');\n\tthis.table.className = className;\n\tthis.body = document.createElement('tbody');\n\t\n\tthis.table.appendChild(this.body);\n};\n\n/**\n * Variable: table\n * \n * Holds the DOM node that represents the table.\n */\nmxForm.prototype.table = null;\n\n/**\n * Variable: body\n * \n * Holds the DOM node that represents the tbody (table body). New rows\n * can be added to this object using DOM API.\n */\nmxForm.prototype.body = false;\n\n/**\n * Function: getTable\n * \n * Returns the table that contains this form.\n */\nmxForm.prototype.getTable = function()\n{\n\treturn this.table;\n};\n\n/**\n * Function: addButtons\n * \n * Helper method to add an OK and Cancel button using the respective\n * functions.\n */\nmxForm.prototype.addButtons = function(okFunct, cancelFunct)\n{\n\tvar tr = document.createElement('tr');\n\tvar td = document.createElement('td');\n\ttr.appendChild(td);\n\ttd = document.createElement('td');\n\n\t// Adds the ok button\n\tvar button = document.createElement('button');\n\tmxUtils.write(button, mxResources.get('ok') || 'OK');\n\ttd.appendChild(button);\n\n\tmxEvent.addListener(button, 'click', function()\n\t{\n\t\tokFunct();\n\t});\n\t\n\t// Adds the cancel button\n\tbutton = document.createElement('button');\n\tmxUtils.write(button, mxResources.get('cancel') || 'Cancel');\n\ttd.appendChild(button);\n\t\n\tmxEvent.addListener(button, 'click', function()\n\t{\n\t\tcancelFunct();\n\t});\n\t\n\ttr.appendChild(td);\n\tthis.body.appendChild(tr);\n};\n\n/**\n * Function: addText\n * \n * Adds an input for the given name, type and value and returns it.\n */\nmxForm.prototype.addText = function(name, value, type)\n{\n\tvar input = document.createElement('input');\n\t\n\tinput.setAttribute('type', type || 'text');\n\tinput.value = value;\n\t\n\treturn this.addField(name, input);\n};\n\n/**\n * Function: addCheckbox\n * \n * Adds a checkbox for the given name and value and returns the textfield.\n */\nmxForm.prototype.addCheckbox = function(name, value)\n{\n\tvar input = document.createElement('input');\n\t\n\tinput.setAttribute('type', 'checkbox');\n\tthis.addField(name, input);\n\n\t// IE can only change the checked value if the input is inside the DOM\n\tif (value)\n\t{\n\t\tinput.checked = true;\n\t}\n\n\treturn input;\n};\n\n/**\n * Function: addTextarea\n * \n * Adds a textarea for the given name and value and returns the textarea.\n */\nmxForm.prototype.addTextarea = function(name, value, rows)\n{\n\tvar input = document.createElement('textarea');\n\t\n\tif (mxClient.IS_NS)\n\t{\n\t\trows--;\n\t}\n\t\n\tinput.setAttribute('rows', rows || 2);\n\tinput.value = value;\n\t\n\treturn this.addField(name, input);\n};\n\n/**\n * Function: addCombo\n * \n * Adds a combo for the given name and returns the combo.\n */\nmxForm.prototype.addCombo = function(name, isMultiSelect, size)\n{\n\tvar select = document.createElement('select');\n\t\n\tif (size != null)\n\t{\n\t\tselect.setAttribute('size', size);\n\t}\n\t\n\tif (isMultiSelect)\n\t{\n\t\tselect.setAttribute('multiple', 'true');\n\t}\n\t\n\treturn this.addField(name, select);\n};\n\n/**\n * Function: addOption\n * \n * Adds an option for the given label to the specified combo.\n */\nmxForm.prototype.addOption = function(combo, label, value, isSelected)\n{\n\tvar option = document.createElement('option');\n\t\n\tmxUtils.writeln(option, label);\n\toption.setAttribute('value', value);\n\t\n\tif (isSelected)\n\t{\n\t\toption.setAttribute('selected', isSelected);\n\t}\n\t\n\tcombo.appendChild(option);\n};\n\n/**\n * Function: addField\n * \n * Adds a new row with the name and the input field in two columns and\n * returns the given input.\n */\nmxForm.prototype.addField = function(name, input)\n{\n\tvar tr = document.createElement('tr');\n\tvar td = document.createElement('td');\n\tmxUtils.write(td, name);\n\ttr.appendChild(td);\n\t\n\ttd = document.createElement('td');\n\ttd.appendChild(input);\n\ttr.appendChild(td);\n\tthis.body.appendChild(tr);\n\t\n\treturn input;\n};\n\n__mxOutput.mxForm = typeof mxForm !== 'undefined' ? mxForm : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxImage\n *\n * Encapsulates the URL, width and height of an image.\n * \n * Constructor: mxImage\n * \n * Constructs a new image.\n */\nfunction mxImage(src, width, height)\n{\n\tthis.src = src;\n\tthis.width = width;\n\tthis.height = height;\n};\n\n/**\n * Variable: src\n *\n * String that specifies the URL of the image.\n */\nmxImage.prototype.src = null;\n\n/**\n * Variable: width\n *\n * Integer that specifies the width of the image.\n */\nmxImage.prototype.width = null;\n\n/**\n * Variable: height\n *\n * Integer that specifies the height of the image.\n */\nmxImage.prototype.height = null;\n\n__mxOutput.mxImage = typeof mxImage !== 'undefined' ? mxImage : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDivResizer\n * \n * Maintains the size of a div element in Internet Explorer. This is a\n * workaround for the right and bottom style being ignored in IE.\n * \n * If you need a div to cover the scrollwidth and -height of a document,\n * then you can use this class as follows:\n * \n * (code)\n * var resizer = new mxDivResizer(background);\n * resizer.getDocumentHeight = function()\n * {\n *   return document.body.scrollHeight;\n * }\n * resizer.getDocumentWidth = function()\n * {\n *   return document.body.scrollWidth;\n * }\n * resizer.resize();\n * (end)\n * \n * Constructor: mxDivResizer\n * \n * Constructs an object that maintains the size of a div\n * element when the window is being resized. This is only\n * required for Internet Explorer as it ignores the respective\n * stylesheet information for DIV elements.\n * \n * Parameters:\n * \n * div - Reference to the DOM node whose size should be maintained.\n * container - Optional Container that contains the div. Default is the\n * window.\n */\nfunction mxDivResizer(div, container)\n{\n\tif (div.nodeName.toLowerCase() == 'div')\n\t{\n\t\tif (container == null)\n\t\t{\n\t\t\tcontainer = window;\n\t\t}\n\n\t\tthis.div = div;\n\t\tvar style = mxUtils.getCurrentStyle(div);\n\t\t\n\t\tif (style != null)\n\t\t{\n\t\t\tthis.resizeWidth = style.width == 'auto';\n\t\t\tthis.resizeHeight = style.height == 'auto';\n\t\t}\n\t\t\n\t\tmxEvent.addListener(container, 'resize',\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (!this.handlingResize)\n\t\t\t\t{\n\t\t\t\t\tthis.handlingResize = true;\n\t\t\t\t\tthis.resize();\n\t\t\t\t\tthis.handlingResize = false;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\t\n\t\tthis.resize();\n\t}\n};\n\n/**\n * Function: resizeWidth\n * \n * Boolean specifying if the width should be updated.\n */\nmxDivResizer.prototype.resizeWidth = true;\n\n/**\n * Function: resizeHeight\n * \n * Boolean specifying if the height should be updated.\n */\nmxDivResizer.prototype.resizeHeight = true;\n\n/**\n * Function: handlingResize\n * \n * Boolean specifying if the width should be updated.\n */\nmxDivResizer.prototype.handlingResize = false;\n\n/**\n * Function: resize\n * \n * Updates the style of the DIV after the window has been resized.\n */\nmxDivResizer.prototype.resize = function()\n{\n\tvar w = this.getDocumentWidth();\n\tvar h = this.getDocumentHeight();\n\n\tvar l = parseInt(this.div.style.left);\n\tvar r = parseInt(this.div.style.right);\n\tvar t = parseInt(this.div.style.top);\n\tvar b = parseInt(this.div.style.bottom);\n\t\n\tif (this.resizeWidth &&\n\t\t!isNaN(l) &&\n\t\t!isNaN(r) &&\n\t\tl >= 0 &&\n\t\tr >= 0 &&\n\t\tw - r - l > 0)\n\t{\n\t\tthis.div.style.width = (w - r - l)+'px';\n\t}\n\t\n\tif (this.resizeHeight &&\n\t\t!isNaN(t) &&\n\t\t!isNaN(b) &&\n\t\tt >= 0 &&\n\t\tb >= 0 &&\n\t\th - t - b > 0)\n\t{\n\t\tthis.div.style.height = (h - t - b)+'px';\n\t}\n};\n\n/**\n * Function: getDocumentWidth\n * \n * Hook for subclassers to return the width of the document (without\n * scrollbars).\n */\nmxDivResizer.prototype.getDocumentWidth = function()\n{\n\treturn document.body.clientWidth;\n};\n\n/**\n * Function: getDocumentHeight\n * \n * Hook for subclassers to return the height of the document (without\n * scrollbars).\n */\nmxDivResizer.prototype.getDocumentHeight = function()\n{\n\treturn document.body.clientHeight;\n};\n\n__mxOutput.mxDivResizer = typeof mxDivResizer !== 'undefined' ? mxDivResizer : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDragSource\n * \n * Wrapper to create a drag source from a DOM element so that the element can\n * be dragged over a graph and dropped into the graph as a new cell.\n * \n * Problem is that in the dropHandler the current preview location is not\n * available, so the preview and the dropHandler must match.\n * \n * Constructor: mxDragSource\n * \n * Constructs a new drag source for the given element.\n */\nfunction mxDragSource(element, dropHandler)\n{\n\tthis.element = element;\n\tthis.dropHandler = dropHandler;\n\t\n\t// Handles a drag gesture on the element\n\tmxEvent.addGestureListeners(element, mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.mouseDown(evt);\n\t}));\n\t\n\t// Prevents native drag and drop\n\tmxEvent.addListener(element, 'dragstart', function(evt)\n\t{\n\t\tmxEvent.consume(evt);\n\t});\n\t\n\tthis.eventConsumer = function(sender, evt)\n\t{\n\t\tvar evtName = evt.getProperty('eventName');\n\t\tvar me = evt.getProperty('event');\n\t\t\n\t\tif (evtName != mxEvent.MOUSE_DOWN)\n\t\t{\n\t\t\tme.consume();\n\t\t}\n\t};\n};\n\n/**\n * Variable: element\n *\n * Reference to the DOM node which was made draggable.\n */\nmxDragSource.prototype.element = null;\n\n/**\n * Variable: dropHandler\n *\n * Holds the DOM node that is used to represent the drag preview. If this is\n * null then the source element will be cloned and used for the drag preview.\n */\nmxDragSource.prototype.dropHandler = null;\n\n/**\n * Variable: dragOffset\n *\n * <mxPoint> that specifies the offset of the <dragElement>. Default is null.\n */\nmxDragSource.prototype.dragOffset = null;\n\n/**\n * Variable: dragElement\n *\n * Holds the DOM node that is used to represent the drag preview. If this is\n * null then the source element will be cloned and used for the drag preview.\n */\nmxDragSource.prototype.dragElement = null;\n\n/**\n * Variable: previewElement\n *\n * Optional <mxRectangle> that specifies the unscaled size of the preview.\n */\nmxDragSource.prototype.previewElement = null;\n\n/**\n * Variable: previewOffset\n *\n * Optional <mxPoint> that specifies the offset of the preview in pixels.\n */\nmxDragSource.prototype.previewOffset = null;\n\n/**\n * Variable: enabled\n *\n * Specifies if this drag source is enabled. Default is true.\n */\nmxDragSource.prototype.enabled = true;\n\n/**\n * Variable: currentGraph\n *\n * Reference to the <mxGraph> that is the current drop target.\n */\nmxDragSource.prototype.currentGraph = null;\n\n/**\n * Variable: currentDropTarget\n *\n * Holds the current drop target under the mouse.\n */\nmxDragSource.prototype.currentDropTarget = null;\n\n/**\n * Variable: currentPoint\n *\n * Holds the current drop location.\n */\nmxDragSource.prototype.currentPoint = null;\n\n/**\n * Variable: currentGuide\n *\n * Holds an <mxGuide> for the <currentGraph> if <dragPreview> is not null.\n */\nmxDragSource.prototype.currentGuide = null;\n\n/**\n * Variable: currentGuide\n *\n * Holds an <mxGuide> for the <currentGraph> if <dragPreview> is not null.\n */\nmxDragSource.prototype.currentHighlight = null;\n\n/**\n * Variable: autoscroll\n *\n * Specifies if the graph should scroll automatically. Default is true.\n */\nmxDragSource.prototype.autoscroll = true;\n\n/**\n * Variable: guidesEnabled\n *\n * Specifies if <mxGuide> should be enabled. Default is true.\n */\nmxDragSource.prototype.guidesEnabled = true;\n\n/**\n * Variable: gridEnabled\n *\n * Specifies if the grid should be allowed. Default is true.\n */\nmxDragSource.prototype.gridEnabled = true;\n\n/**\n * Variable: highlightDropTargets\n *\n * Specifies if drop targets should be highlighted. Default is true.\n */\nmxDragSource.prototype.highlightDropTargets = true;\n\n/**\n * Variable: dragElementZIndex\n * \n * ZIndex for the drag element. Default is 100.\n */\nmxDragSource.prototype.dragElementZIndex = 100;\n\n/**\n * Variable: dragElementOpacity\n * \n * Opacity of the drag element in %. Default is 70.\n */\nmxDragSource.prototype.dragElementOpacity = 70;\n\n/**\n * Variable: checkEventSource\n * \n * Whether the event source should be checked in <graphContainerEvent>. Default\n * is true.\n */\nmxDragSource.prototype.checkEventSource = true;\n\n/**\n * Function: isEnabled\n * \n * Returns <enabled>.\n */\nmxDragSource.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Sets <enabled>.\n */\nmxDragSource.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: isGuidesEnabled\n * \n * Returns <guidesEnabled>.\n */\nmxDragSource.prototype.isGuidesEnabled = function()\n{\n\treturn this.guidesEnabled;\n};\n\n/**\n * Function: setGuidesEnabled\n * \n * Sets <guidesEnabled>.\n */\nmxDragSource.prototype.setGuidesEnabled = function(value)\n{\n\tthis.guidesEnabled = value;\n};\n\n/**\n * Function: isGridEnabled\n * \n * Returns <gridEnabled>.\n */\nmxDragSource.prototype.isGridEnabled = function()\n{\n\treturn this.gridEnabled;\n};\n\n/**\n * Function: setGridEnabled\n * \n * Sets <gridEnabled>.\n */\nmxDragSource.prototype.setGridEnabled = function(value)\n{\n\tthis.gridEnabled = value;\n};\n\n/**\n * Function: getGraphForEvent\n * \n * Returns the graph for the given mouse event. This implementation returns\n * null.\n */\nmxDragSource.prototype.getGraphForEvent = function(evt)\n{\n\treturn null;\n};\n\n/**\n * Function: getDropTarget\n * \n * Returns the drop target for the given graph and coordinates. This\n * implementation uses <mxGraph.getCellAt>.\n */\nmxDragSource.prototype.getDropTarget = function(graph, x, y, evt)\n{\n\treturn graph.getCellAt(x, y);\n};\n\n/**\n * Function: createDragElement\n * \n * Creates and returns a clone of the <dragElementPrototype> or the <element>\n * if the former is not defined.\n */\nmxDragSource.prototype.createDragElement = function(evt)\n{\n\treturn this.element.cloneNode(true);\n};\n\n/**\n * Function: createPreviewElement\n * \n * Creates and returns an element which can be used as a preview in the given\n * graph.\n */\nmxDragSource.prototype.createPreviewElement = function(graph)\n{\n\treturn null;\n};\n\n/**\n * Function: isActive\n * \n * Returns true if this drag source is active.\n */\nmxDragSource.prototype.isActive = function()\n{\n\treturn this.mouseMoveHandler != null;\n};\n\n/**\n * Function: reset\n * \n * Stops and removes everything and restores the state of the object.\n */\nmxDragSource.prototype.reset = function()\n{\n\tif (this.currentGraph != null)\n\t{\n\t\tthis.dragExit(this.currentGraph);\n\t\tthis.currentGraph = null;\n\t}\n\t\n\tthis.removeDragElement();\n\tthis.removeListeners();\n\tthis.stopDrag();\n};\n\n/**\n * Function: mouseDown\n * \n * Returns the drop target for the given graph and coordinates. This\n * implementation uses <mxGraph.getCellAt>.\n * \n * To ignore popup menu events for a drag source, this function can be\n * overridden as follows.\n * \n * (code)\n * var mouseDown = dragSource.mouseDown;\n * \n * dragSource.mouseDown = function(evt)\n * {\n *   if (!mxEvent.isPopupTrigger(evt))\n *   {\n *     mouseDown.apply(this, arguments);\n *   }\n * };\n * (end)\n */\nmxDragSource.prototype.mouseDown = function(evt)\n{\n\tif (this.enabled && !mxEvent.isConsumed(evt) && this.mouseMoveHandler == null)\n\t{\n\t\tthis.startDrag(evt);\n\t\tthis.mouseMoveHandler = mxUtils.bind(this, this.mouseMove);\n\t\tthis.mouseUpHandler = mxUtils.bind(this, this.mouseUp);\t\t\n\t\tmxEvent.addGestureListeners(document, null, this.mouseMoveHandler, this.mouseUpHandler);\n\t\t\n\t\tif (mxClient.IS_TOUCH && !mxEvent.isMouseEvent(evt))\n\t\t{\n\t\t\tthis.eventSource = mxEvent.getSource(evt);\n\t\t\tmxEvent.addGestureListeners(this.eventSource, null, this.mouseMoveHandler, this.mouseUpHandler);\n\t\t}\n\t}\n};\n\n/**\n * Function: startDrag\n * \n * Creates the <dragElement> using <createDragElement>.\n */\nmxDragSource.prototype.startDrag = function(evt)\n{\n\tthis.dragElement = this.createDragElement(evt);\n\tthis.dragElement.style.position = 'absolute';\n\tthis.dragElement.style.zIndex = this.dragElementZIndex;\n\tmxUtils.setOpacity(this.dragElement, this.dragElementOpacity);\n\n\tif (this.checkEventSource && mxClient.IS_SVG)\n\t{\n\t\tthis.dragElement.style.pointerEvents = 'none';\n\t}\n};\n\n/**\n * Function: stopDrag\n * \n * Invokes <removeDragElement>.\n */\nmxDragSource.prototype.stopDrag = function()\n{\n\t// LATER: This used to have a mouse event. If that is still needed we need to add another\n\t// final call to the DnD protocol to add a cleanup step in the case of escape press, which\n\t// is not associated with a mouse event and which currently calles this method.\n\tthis.removeDragElement();\n};\n\n/**\n * Function: removeDragElement\n * \n * Removes and destroys the <dragElement>.\n */\nmxDragSource.prototype.removeDragElement = function()\n{\n\tif (this.dragElement != null)\n\t{\n\t\tif (this.dragElement.parentNode != null)\n\t\t{\n\t\t\tthis.dragElement.parentNode.removeChild(this.dragElement);\n\t\t}\n\t\t\n\t\tthis.dragElement = null;\n\t}\n};\n\n/**\n * Function: getElementForEvent\n * \n * Returns the topmost element under the given event.\n */\nmxDragSource.prototype.getElementForEvent = function(evt)\n{\n\treturn ((mxEvent.isTouchEvent(evt) || mxEvent.isPenEvent(evt)) ?\n\t\t\tdocument.elementFromPoint(mxEvent.getClientX(evt), mxEvent.getClientY(evt)) :\n\t\t\t\tmxEvent.getSource(evt));\n};\n\n/**\n * Function: graphContainsEvent\n * \n * Returns true if the given graph contains the given event.\n */\nmxDragSource.prototype.graphContainsEvent = function(graph, evt)\n{\n\tvar x = mxEvent.getClientX(evt);\n\tvar y = mxEvent.getClientY(evt);\n\tvar offset = mxUtils.getOffset(graph.container);\n\tvar origin = mxUtils.getScrollOrigin();\n\tvar elt = this.getElementForEvent(evt);\n\t\n\tif (this.checkEventSource)\n\t{\n\t\twhile (elt != null && elt != graph.container)\n\t\t{\n\t\t\telt = elt.parentNode;\n\t\t}\n\t}\n\n\t// Checks if event is inside the bounds of the graph container\n\treturn elt != null && x >= offset.x - origin.x && y >= offset.y - origin.y &&\n\t\tx <= offset.x - origin.x + graph.container.offsetWidth &&\n\t\ty <= offset.y - origin.y + graph.container.offsetHeight;\n};\n\n/**\n * Function: mouseMove\n * \n * Gets the graph for the given event using <getGraphForEvent>, updates the\n * <currentGraph>, calling <dragEnter> and <dragExit> on the new and old graph,\n * respectively, and invokes <dragOver> if <currentGraph> is not null.\n */\nmxDragSource.prototype.mouseMove = function(evt)\n{\n\tvar graph = this.getGraphForEvent(evt);\n\t\n\t// Checks if event is inside the bounds of the graph container\n\tif (graph != null && !this.graphContainsEvent(graph, evt))\n\t{\n\t\tgraph = null;\n\t}\n\n\tif (graph != this.currentGraph)\n\t{\n\t\tif (this.currentGraph != null)\n\t\t{\n\t\t\tthis.dragExit(this.currentGraph, evt);\n\t\t}\n\t\t\n\t\tthis.currentGraph = graph;\n\t\t\n\t\tif (this.currentGraph != null)\n\t\t{\n\t\t\tthis.dragEnter(this.currentGraph, evt);\n\t\t}\n\t}\n\t\n\tif (this.currentGraph != null)\n\t{\n\t\tthis.dragOver(this.currentGraph, evt);\n\t}\n\n\tif (this.dragElement != null && (this.previewElement == null || this.previewElement.style.visibility != 'visible'))\n\t{\n\t\tvar x = mxEvent.getClientX(evt);\n\t\tvar y = mxEvent.getClientY(evt);\n\t\t\n\t\tif (this.dragElement.parentNode == null)\n\t\t{\n\t\t\tdocument.body.appendChild(this.dragElement);\n\t\t}\n\n\t\tthis.dragElement.style.visibility = 'visible';\n\t\t\n\t\tif (this.dragOffset != null)\n\t\t{\n\t\t\tx += this.dragOffset.x;\n\t\t\ty += this.dragOffset.y;\n\t\t}\n\t\t\n\t\tvar offset = mxUtils.getDocumentScrollOrigin(document);\n\t\t\n\t\tthis.dragElement.style.left = (x + offset.x) + 'px';\n\t\tthis.dragElement.style.top = (y + offset.y) + 'px';\n\t}\n\telse if (this.dragElement != null)\n\t{\n\t\tthis.dragElement.style.visibility = 'hidden';\n\t}\n\t\n\tmxEvent.consume(evt);\n};\n\n/**\n * Function: mouseUp\n * \n * Processes the mouse up event and invokes <drop>, <dragExit> and <stopDrag>\n * as required.\n */\nmxDragSource.prototype.mouseUp = function(evt)\n{\n\tif (this.currentGraph != null)\n\t{\n\t\tif (this.currentPoint != null && (this.previewElement == null ||\n\t\t\tthis.previewElement.style.visibility != 'hidden'))\n\t\t{\n\t\t\tvar scale = this.currentGraph.view.scale;\n\t\t\tvar tr = this.currentGraph.view.translate;\n\t\t\tvar x = this.currentPoint.x / scale - tr.x;\n\t\t\tvar y = this.currentPoint.y / scale - tr.y;\n\t\t\t\n\t\t\tthis.drop(this.currentGraph, evt, this.currentDropTarget, x, y);\n\t\t}\n\t\t\n\t\tthis.dragExit(this.currentGraph);\n\t\tthis.currentGraph = null;\n\t}\n\n\tthis.stopDrag();\n\tthis.removeListeners();\n\t\n\tmxEvent.consume(evt);\n};\n\n/**\n * Function: removeListeners\n * \n * Actives the given graph as a drop target.\n */\nmxDragSource.prototype.removeListeners = function()\n{\n\tif (this.eventSource != null)\n\t{\n\t\tmxEvent.removeGestureListeners(this.eventSource, null, this.mouseMoveHandler, this.mouseUpHandler);\n\t\tthis.eventSource = null;\n\t}\n\t\n\tmxEvent.removeGestureListeners(document, null, this.mouseMoveHandler, this.mouseUpHandler);\n\tthis.mouseMoveHandler = null;\n\tthis.mouseUpHandler = null;\n};\n\n/**\n * Function: dragEnter\n * \n * Actives the given graph as a drop target.\n */\nmxDragSource.prototype.dragEnter = function(graph, evt)\n{\n\tgraph.isMouseDown = true;\n\tgraph.isMouseTrigger = mxEvent.isMouseEvent(evt);\n\tthis.previewElement = this.createPreviewElement(graph);\n\t\n\tif (this.previewElement != null && this.checkEventSource && mxClient.IS_SVG)\n\t{\n\t\tthis.previewElement.style.pointerEvents = 'none';\n\t}\n\t\n\t// Guide is only needed if preview element is used\n\tif (this.isGuidesEnabled() && this.previewElement != null)\n\t{\n\t\tthis.currentGuide = new mxGuide(graph, graph.graphHandler.getGuideStates());\n\t}\n\t\n\tif (this.highlightDropTargets)\n\t{\n\t\tthis.currentHighlight = new mxCellHighlight(graph, mxConstants.DROP_TARGET_COLOR);\n\t}\n\t\n\t// Consumes all events in the current graph before they are fired\n\tgraph.addListener(mxEvent.FIRE_MOUSE_EVENT, this.eventConsumer);\n};\n\n/**\n * Function: dragExit\n * \n * Deactivates the given graph as a drop target.\n */\nmxDragSource.prototype.dragExit = function(graph, evt)\n{\n\tthis.currentDropTarget = null;\n\tthis.currentPoint = null;\n\tgraph.isMouseDown = false;\n\t\n\t// Consumes all events in the current graph before they are fired\n\tgraph.removeListener(this.eventConsumer);\n\t\n\tif (this.previewElement != null)\n\t{\n\t\tif (this.previewElement.parentNode != null)\n\t\t{\n\t\t\tthis.previewElement.parentNode.removeChild(this.previewElement);\n\t\t}\n\t\t\n\t\tthis.previewElement = null;\n\t}\n\t\n\tif (this.currentGuide != null)\n\t{\n\t\tthis.currentGuide.destroy();\n\t\tthis.currentGuide = null;\n\t}\n\t\n\tif (this.currentHighlight != null)\n\t{\n\t\tthis.currentHighlight.destroy();\n\t\tthis.currentHighlight = null;\n\t}\n};\n\n/**\n * Function: dragOver\n * \n * Implements autoscroll, updates the <currentPoint>, highlights any drop\n * targets and updates the preview.\n */\nmxDragSource.prototype.dragOver = function(graph, evt)\n{\n\tvar offset = mxUtils.getOffset(graph.container);\n\tvar origin = mxUtils.getScrollOrigin(graph.container);\n\tvar x = mxEvent.getClientX(evt) - offset.x + origin.x - graph.panDx;\n\tvar y = mxEvent.getClientY(evt) - offset.y + origin.y - graph.panDy;\n\n\tif (graph.autoScroll && (this.autoscroll == null || this.autoscroll))\n\t{\n\t\tgraph.scrollPointToVisible(x, y, graph.autoExtend);\n\t}\n\n\t// Highlights the drop target under the mouse\n\tif (this.currentHighlight != null && graph.isDropEnabled())\n\t{\n\t\tthis.currentDropTarget = this.getDropTarget(graph, x, y, evt);\n\t\tvar state = graph.getView().getState(this.currentDropTarget);\n\t\tthis.currentHighlight.highlight(state);\n\t}\n\n\t// Updates the location of the preview\n\tif (this.previewElement != null)\n\t{\n\t\tif (this.previewElement.parentNode == null)\n\t\t{\n\t\t\tgraph.container.appendChild(this.previewElement);\n\t\t\t\n\t\t\tthis.previewElement.style.zIndex = '3';\n\t\t\tthis.previewElement.style.position = 'absolute';\n\t\t}\n\t\t\n\t\tvar gridEnabled = this.isGridEnabled() && graph.isGridEnabledEvent(evt);\n\t\tvar hideGuide = true;\n\n\t\t// Grid and guides\n\t\tif (this.currentGuide != null && this.currentGuide.isEnabledForEvent(evt))\n\t\t{\n\t\t\t// LATER: HTML preview appears smaller than SVG preview\n\t\t\tvar w = parseInt(this.previewElement.style.width);\n\t\t\tvar h = parseInt(this.previewElement.style.height);\n\t\t\tvar bounds = new mxRectangle(0, 0, w, h);\n\t\t\tvar delta = new mxPoint(x, y);\n\t\t\tdelta = this.currentGuide.move(bounds, delta, gridEnabled, true);\n\t\t\thideGuide = false;\n\t\t\tx = delta.x;\n\t\t\ty = delta.y;\n\t\t}\n\t\telse if (gridEnabled)\n\t\t{\n\t\t\tvar scale = graph.view.scale;\n\t\t\tvar tr = graph.view.translate;\n\t\t\tvar off = graph.gridSize / 2;\n\t\t\tx = (graph.snap(x / scale - tr.x - off) + tr.x) * scale;\n\t\t\ty = (graph.snap(y / scale - tr.y - off) + tr.y) * scale;\n\t\t}\n\t\t\n\t\tif (this.currentGuide != null && hideGuide)\n\t\t{\n\t\t\tthis.currentGuide.hide();\n\t\t}\n\t\t\n\t\tif (this.previewOffset != null)\n\t\t{\n\t\t\tx += this.previewOffset.x;\n\t\t\ty += this.previewOffset.y;\n\t\t}\n\n\t\tthis.previewElement.style.left = Math.round(x) + 'px';\n\t\tthis.previewElement.style.top = Math.round(y) + 'px';\n\t\tthis.previewElement.style.visibility = 'visible';\n\t}\n\t\n\tthis.currentPoint = new mxPoint(x, y);\n};\n\n/**\n * Function: drop\n * \n * Returns the drop target for the given graph and coordinates. This\n * implementation uses <mxGraph.getCellAt>.\n */\nmxDragSource.prototype.drop = function(graph, evt, dropTarget, x, y)\n{\n\tthis.dropHandler.apply(this, arguments);\n\t\n\t// Had to move this to after the insert because it will\n\t// affect the scrollbars of the window in IE to try and\n\t// make the complete container visible.\n\t// LATER: Should be made optional.\n\tif (graph.container.style.visibility != 'hidden')\n\t{\n\t\tgraph.container.focus();\n\t}\n};\n\n__mxOutput.mxDragSource = typeof mxDragSource !== 'undefined' ? mxDragSource : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxToolbar\n * \n * Creates a toolbar inside a given DOM node. The toolbar may contain icons,\n * buttons and combo boxes.\n * \n * Event: mxEvent.SELECT\n * \n * Fires when an item was selected in the toolbar. The <code>function</code>\n * property contains the function that was selected in <selectMode>.\n * \n * Constructor: mxToolbar\n * \n * Constructs a toolbar in the specified container.\n *\n * Parameters:\n *\n * container - DOM node that contains the toolbar.\n */\nfunction mxToolbar(container)\n{\n\tthis.container = container;\n};\n\n/**\n * Extends mxEventSource.\n */\nmxToolbar.prototype = new mxEventSource();\nmxToolbar.prototype.constructor = mxToolbar;\n\n/**\n * Variable: container\n * \n * Reference to the DOM nodes that contains the toolbar.\n */\nmxToolbar.prototype.container = null;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxToolbar.prototype.enabled = true;\n\n/**\n * Variable: noReset\n * \n * Specifies if <resetMode> requires a forced flag of true for resetting\n * the current mode in the toolbar. Default is false. This is set to true\n * if the toolbar item is double clicked to avoid a reset after a single\n * use of the item.\n */\nmxToolbar.prototype.noReset = false;\n\n/**\n * Variable: updateDefaultMode\n * \n * Boolean indicating if the default mode should be the last selected\n * switch mode or the first inserted switch mode. Default is true, that\n * is the last selected switch mode is the default mode. The default mode\n * is the mode to be selected after a reset of the toolbar. If this is\n * false, then the default mode is the first inserted mode item regardless\n * of what was last selected. Otherwise, the selected item after a reset is\n * the previously selected item.\n */\nmxToolbar.prototype.updateDefaultMode = true;\n\n/**\n * Function: addItem\n * \n * Adds the given function as an image with the specified title and icon\n * and returns the new image node.\n * \n * Parameters:\n * \n * title - Optional string that is used as the tooltip.\n * icon - Optional URL of the image to be used. If no URL is given, then a\n * button is created.\n * funct - Function to execute on a mouse click.\n * pressedIcon - Optional URL of the pressed image. Default is a gray\n * background.\n * style - Optional style classname. Default is mxToolbarItem.\n * factoryMethod - Optional factory method for popup menu, eg.\n * function(menu, evt, cell) { menu.addItem('Hello, World!'); }\n */\nmxToolbar.prototype.addItem = function(title, icon, funct, pressedIcon, style, factoryMethod)\n{\n\tvar img = document.createElement((icon != null) ? 'img' : 'button');\n\tvar initialClassName = style || ((factoryMethod != null) ?\n\t\t\t'mxToolbarMode' : 'mxToolbarItem');\n\timg.className = initialClassName;\n\timg.setAttribute('src', icon);\n\t\n\tif (title != null)\n\t{\n\t\tif (icon != null)\n\t\t{\n\t\t\timg.setAttribute('title', title);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmxUtils.write(img, title);\n\t\t}\n\t}\n\t\n\tthis.container.appendChild(img);\n\n\t// Invokes the function on a click on the toolbar item\n\tif (funct != null)\n\t{\n\t\tmxEvent.addListener(img, 'click', funct);\n\t\t\n\t\tif (mxClient.IS_TOUCH)\n\t\t{\n\t\t\tmxEvent.addListener(img, 'touchend', funct);\n\t\t}\n\t}\n\n\tvar mouseHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tif (pressedIcon != null)\n\t\t{\n\t\t\timg.setAttribute('src', icon);\n\t\t}\n\t\telse\n\t\t{\n\t\t\timg.style.backgroundColor = '';\n\t\t}\n\t});\n\n\t// Highlights the toolbar item with a gray background\n\t// while it is being clicked with the mouse\n\tmxEvent.addGestureListeners(img, mxUtils.bind(this, function(evt)\n\t{\n\t\tif (pressedIcon != null)\n\t\t{\n\t\t\timg.setAttribute('src', pressedIcon);\n\t\t}\n\t\telse\n\t\t{\n\t\t\timg.style.backgroundColor = 'gray';\n\t\t}\n\t\t\n\t\t// Popup Menu\n\t\tif (factoryMethod != null)\n\t\t{\n\t\t\tif (this.menu == null)\n\t\t\t{\n\t\t\t\tthis.menu = new mxPopupMenu();\n\t\t\t\tthis.menu.init();\n\t\t\t}\n\t\t\t\n\t\t\tvar last = this.currentImg;\n\t\t\t\n\t\t\tif (this.menu.isMenuShowing())\n\t\t\t{\n\t\t\t\tthis.menu.hideMenu();\n\t\t\t}\n\t\t\t\n\t\t\tif (last != img)\n\t\t\t{\n\t\t\t\t// Redirects factory method to local factory method\n\t\t\t\tthis.currentImg = img;\n\t\t\t\tthis.menu.factoryMethod = factoryMethod;\n\t\t\t\t\n\t\t\t\tvar point = new mxPoint(\n\t\t\t\t\timg.offsetLeft,\n\t\t\t\t\timg.offsetTop + img.offsetHeight);\n\t\t\t\tthis.menu.popup(point.x, point.y, null, evt);\n\n\t\t\t\t// Sets and overrides to restore classname\n\t\t\t\tif (this.menu.isMenuShowing())\n\t\t\t\t{\n\t\t\t\t\timg.className = initialClassName + 'Selected';\n\t\t\t\t\t\n\t\t\t\t\tthis.menu.hideMenu = function()\n\t\t\t\t\t{\n\t\t\t\t\t\tmxPopupMenu.prototype.hideMenu.apply(this);\n\t\t\t\t\t\timg.className = initialClassName;\n\t\t\t\t\t\tthis.currentImg = null;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}), null, mouseHandler);\n\n\tmxEvent.addListener(img, 'mouseout', mouseHandler);\n\t\n\treturn img;\n};\n\n/**\n * Function: addCombo\n * \n * Adds and returns a new SELECT element using the given style. The element\n * is placed inside a DIV with the mxToolbarComboContainer style classname.\n * \n * Parameters:\n * \n * style - Optional style classname. Default is mxToolbarCombo.\n */\nmxToolbar.prototype.addCombo = function(style)\n{\n\tvar div = document.createElement('div');\n\tdiv.style.display = 'inline';\n\tdiv.className = 'mxToolbarComboContainer';\n\t\n\tvar select = document.createElement('select');\n\tselect.className = style || 'mxToolbarCombo';\n\tdiv.appendChild(select);\n\t\n\tthis.container.appendChild(div);\n\t\n\treturn select;\n};\n\n/**\n * Function: addActionCombo\n * \n * Adds and returns a new SELECT element using the given title as the\n * default element. The selection is reset to this element after each\n * change.\n * \n * Parameters:\n * \n * title - String that specifies the title of the default element.\n * style - Optional style classname. Default is mxToolbarCombo.\n */\nmxToolbar.prototype.addActionCombo = function(title, style)\n{\n\tvar select = document.createElement('select');\n\tselect.className = style || 'mxToolbarCombo';\n\tthis.addOption(select, title, null);\n\t\n\tmxEvent.addListener(select, 'change', function(evt)\n\t{\n\t\tvar value = select.options[select.selectedIndex];\n\t\tselect.selectedIndex = 0;\n\t\t\n\t\tif (value.funct != null)\n\t\t{\n\t\t\tvalue.funct(evt);\n\t\t}\n\t});\n\t\n\tthis.container.appendChild(select);\n\t\n\treturn select;\n};\n\n/**\n * Function: addOption\n * \n * Adds and returns a new OPTION element inside the given SELECT element.\n * If the given value is a function then it is stored in the option's funct\n * field.\n * \n * Parameters:\n * \n * combo - SELECT element that will contain the new entry.\n * title - String that specifies the title of the option.\n * value - Specifies the value associated with this option.\n */\nmxToolbar.prototype.addOption = function(combo, title, value)\n{\n\tvar option = document.createElement('option');\n\tmxUtils.writeln(option, title);\n\t\n\tif (typeof(value) == 'function')\n\t{\n\t\toption.funct = value;\n\t}\n\telse\n\t{\n\t\toption.setAttribute('value', value);\n\t}\n\t\n\tcombo.appendChild(option);\n\t\n\treturn option;\n};\n\n/**\n * Function: addSwitchMode\n * \n * Adds a new selectable item to the toolbar. Only one switch mode item may\n * be selected at a time. The currently selected item is the default item\n * after a reset of the toolbar.\n */\nmxToolbar.prototype.addSwitchMode = function(title, icon, funct, pressedIcon, style)\n{\n\tvar img = document.createElement('img');\n\timg.initialClassName = style || 'mxToolbarMode';\n\timg.className = img.initialClassName;\n\timg.setAttribute('src', icon);\n\timg.altIcon = pressedIcon;\n\t\n\tif (title != null)\n\t{\n\t\timg.setAttribute('title', title);\n\t}\n\t\n\tmxEvent.addListener(img, 'click', mxUtils.bind(this, function(evt)\n\t{\n\t\tvar tmp = this.selectedMode.altIcon;\n\t\t\n\t\tif (tmp != null)\n\t\t{\n\t\t\tthis.selectedMode.altIcon = this.selectedMode.getAttribute('src');\n\t\t\tthis.selectedMode.setAttribute('src', tmp);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.selectedMode.className = this.selectedMode.initialClassName;\n\t\t}\n\t\t\n\t\tif (this.updateDefaultMode)\n\t\t{\n\t\t\tthis.defaultMode = img;\n\t\t}\n\t\t\n\t\tthis.selectedMode = img;\n\t\t\n\t\tvar tmp = img.altIcon;\n\t\t\n\t\tif (tmp != null)\n\t\t{\n\t\t\timg.altIcon = img.getAttribute('src');\n\t\t\timg.setAttribute('src', tmp);\n\t\t}\n\t\telse\n\t\t{\n\t\t\timg.className = img.initialClassName+'Selected';\n\t\t}\n\t\t\n\t\tthis.fireEvent(new mxEventObject(mxEvent.SELECT));\n\t\tfunct();\n\t}));\n\t\n\tthis.container.appendChild(img);\n\t\n\tif (this.defaultMode == null)\n\t{\n\t\tthis.defaultMode = img;\n\t\t\n\t\t// Function should fire only once so\n\t\t// do not pass it with the select event\n\t\tthis.selectMode(img);\n\t\tfunct();\n\t}\n\t\n\treturn img;\n};\n\n/**\n * Function: addMode\n * \n * Adds a new item to the toolbar. The selection is typically reset after\n * the item has been consumed, for example by adding a new vertex to the\n * graph. The reset is not carried out if the item is double clicked.\n * \n * The function argument uses the following signature: funct(evt, cell) where\n * evt is the native mouse event and cell is the cell under the mouse.\n */\nmxToolbar.prototype.addMode = function(title, icon, funct, pressedIcon, style, toggle)\n{\n\ttoggle = (toggle != null) ? toggle : true;\n\tvar img = document.createElement((icon != null) ? 'img' : 'button');\n\t\n\timg.initialClassName = style || 'mxToolbarMode';\n\timg.className = img.initialClassName;\n\timg.setAttribute('src', icon);\n\timg.altIcon = pressedIcon;\n\n\tif (title != null)\n\t{\n\t\timg.setAttribute('title', title);\n\t}\n\t\n\tif (this.enabled && toggle)\n\t{\n\t\tmxEvent.addListener(img, 'click', mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.selectMode(img, funct);\n\t\t\tthis.noReset = false;\n\t\t}));\n\t\t\n\t\tmxEvent.addListener(img, 'dblclick', mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.selectMode(img, funct);\n\t\t\tthis.noReset = true;\n\t\t}));\n\t\t\n\t\tif (this.defaultMode == null)\n\t\t{\n\t\t\tthis.defaultMode = img;\n\t\t\tthis.defaultFunction = funct;\n\t\t\tthis.selectMode(img, funct);\n\t\t}\n\t}\n\n\tthis.container.appendChild(img);\t\t\t\t\t\n\n\treturn img;\n};\n\n/**\n * Function: selectMode\n * \n * Resets the state of the previously selected mode and displays the given\n * DOM node as selected. This function fires a select event with the given\n * function as a parameter.\n */\nmxToolbar.prototype.selectMode = function(domNode, funct)\n{\n\tif (this.selectedMode != domNode)\n\t{\n\t\tif (this.selectedMode != null)\n\t\t{\n\t\t\tvar tmp = this.selectedMode.altIcon;\n\t\t\t\n\t\t\tif (tmp != null)\n\t\t\t{\n\t\t\t\tthis.selectedMode.altIcon = this.selectedMode.getAttribute('src');\n\t\t\t\tthis.selectedMode.setAttribute('src', tmp);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedMode.className = this.selectedMode.initialClassName;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.selectedMode = domNode;\n\t\tvar tmp = this.selectedMode.altIcon;\n\t\t\n\t\tif (tmp != null)\n\t\t{\n\t\t\tthis.selectedMode.altIcon = this.selectedMode.getAttribute('src');\n\t\t\tthis.selectedMode.setAttribute('src', tmp);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.selectedMode.className = this.selectedMode.initialClassName+'Selected';\n\t\t}\n\t\t\n\t\tthis.fireEvent(new mxEventObject(mxEvent.SELECT, \"function\", funct));\n\t}\n};\n\n/**\n * Function: resetMode\n * \n * Selects the default mode and resets the state of the previously selected\n * mode.\n */\nmxToolbar.prototype.resetMode = function(forced)\n{\n\tif ((forced || !this.noReset) && this.selectedMode != this.defaultMode)\n\t{\n\t\t// The last selected switch mode will be activated\n\t\t// so the function was already executed and is\n\t\t// no longer required here\n\t\tthis.selectMode(this.defaultMode, this.defaultFunction);\n\t}\n};\n\n/**\n * Function: addSeparator\n * \n * Adds the specifies image as a separator.\n * \n * Parameters:\n * \n * icon - URL of the separator icon.\n */\nmxToolbar.prototype.addSeparator = function(icon)\n{\n\treturn this.addItem(null, icon, null);\n};\n\n/**\n * Function: addBreak\n * \n * Adds a break to the container.\n */\nmxToolbar.prototype.addBreak = function()\n{\n\tmxUtils.br(this.container);\n};\n\n/**\n * Function: addLine\n * \n * Adds a horizontal line to the container.\n */\nmxToolbar.prototype.addLine = function()\n{\n\tvar hr = document.createElement('hr');\n\t\n\thr.style.marginRight = '6px';\n\thr.setAttribute('size', '1');\n\t\n\tthis.container.appendChild(hr);\n};\n\n/**\n * Function: destroy\n * \n * Removes the toolbar and all its associated resources.\n */\nmxToolbar.prototype.destroy = function ()\n{\n\tmxEvent.release(this.container);\n\tthis.container = null;\n\tthis.defaultMode = null;\n\tthis.defaultFunction = null;\n\tthis.selectedMode = null;\n\t\n\tif (this.menu != null)\n\t{\n\t\tthis.menu.destroy();\n\t}\n};\n\n__mxOutput.mxToolbar = typeof mxToolbar !== 'undefined' ? mxToolbar : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxUndoableEdit\n * \n * Implements a composite undoable edit. Here is an example for a custom change\n * which gets executed via the model:\n * \n * (code)\n * function CustomChange(model, name)\n * {\n *   this.model = model;\n *   this.name = name;\n *   this.previous = name;\n * };\n * \n * CustomChange.prototype.execute = function()\n * {\n *   var tmp = this.model.name;\n *   this.model.name = this.previous;\n *   this.previous = tmp;\n * };\n * \n * var name = prompt('Enter name');\n * graph.model.execute(new CustomChange(graph.model, name));\n * (end)\n * \n * Event: mxEvent.EXECUTED\n * \n * Fires between START_EDIT and END_EDIT after an atomic change was executed.\n * The <code>change</code> property contains the change that was executed.\n * \n * Event: mxEvent.START_EDIT\n * \n * Fires before a set of changes will be executed in <undo> or <redo>.\n * This event contains no properties.\n * \n * Event: mxEvent.END_EDIT\n *\n * Fires after a set of changeswas executed in <undo> or <redo>.\n * This event contains no properties.\n * \n * Constructor: mxUndoableEdit\n * \n * Constructs a new undoable edit for the given source.\n */\nfunction mxUndoableEdit(source, significant)\n{\n\tthis.source = source;\n\tthis.changes = [];\n\tthis.significant = (significant != null) ? significant : true;\n};\n\n/**\n * Variable: source\n * \n * Specifies the source of the edit.\n */\nmxUndoableEdit.prototype.source = null;\n\n/**\n * Variable: changes\n * \n * Array that contains the changes that make up this edit. The changes are\n * expected to either have an undo and redo function, or an execute\n * function. Default is an empty array.\n */\nmxUndoableEdit.prototype.changes = null;\n\n/**\n * Variable: significant\n * \n * Specifies if the undoable change is significant.\n * Default is true.\n */\nmxUndoableEdit.prototype.significant = null;\n\n/**\n * Variable: undone\n * \n * Specifies if this edit has been undone. Default is false.\n */\nmxUndoableEdit.prototype.undone = false;\n\n/**\n * Variable: redone\n * \n * Specifies if this edit has been redone. Default is false.\n */\nmxUndoableEdit.prototype.redone = false;\n\n/**\n * Function: isEmpty\n * \n * Returns true if the this edit contains no changes.\n */\nmxUndoableEdit.prototype.isEmpty = function()\n{\n\treturn this.changes.length == 0;\n};\n\n/**\n * Function: isSignificant\n * \n * Returns <significant>.\n */\nmxUndoableEdit.prototype.isSignificant = function()\n{\n\treturn this.significant;\n};\n\n/**\n * Function: add\n * \n * Adds the specified change to this edit. The change is an object that is\n * expected to either have an undo and redo, or an execute function.\n */\nmxUndoableEdit.prototype.add = function(change)\n{\n\tthis.changes.push(change);\n};\n\n/**\n * Function: notify\n * \n * Hook to notify any listeners of the changes after an <undo> or <redo>\n * has been carried out. This implementation is empty.\n */\nmxUndoableEdit.prototype.notify = function() { };\n\n/**\n * Function: die\n * \n * Hook to free resources after the edit has been removed from the command\n * history. This implementation is empty.\n */\nmxUndoableEdit.prototype.die = function() { };\n\n/**\n * Function: undo\n * \n * Undoes all changes in this edit.\n */\nmxUndoableEdit.prototype.undo = function()\n{\n\tif (!this.undone)\n\t{\n\t\tthis.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));\n\t\tvar count = this.changes.length;\n\t\t\n\t\tfor (var i = count - 1; i >= 0; i--)\n\t\t{\n\t\t\tvar change = this.changes[i];\n\t\t\t\n\t\t\tif (change.execute != null)\n\t\t\t{\n\t\t\t\tchange.execute();\n\t\t\t}\n\t\t\telse if (change.undo != null)\n\t\t\t{\n\t\t\t\tchange.undo();\n\t\t\t}\n\t\t\t\n\t\t\t// New global executed event\n\t\t\tthis.source.fireEvent(new mxEventObject(mxEvent.EXECUTED, 'change', change));\n\t\t}\n\t\t\n\t\tthis.undone = true;\n\t\tthis.redone = false;\n\t\tthis.source.fireEvent(new mxEventObject(mxEvent.END_EDIT));\n\t}\n\t\n\tthis.notify();\n};\n\n/**\n * Function: redo\n * \n * Redoes all changes in this edit.\n */\nmxUndoableEdit.prototype.redo = function()\n{\n\tif (!this.redone)\n\t{\n\t\tthis.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));\n\t\tvar count = this.changes.length;\n\t\t\n\t\tfor (var i = 0; i < count; i++)\n\t\t{\n\t\t\tvar change = this.changes[i];\n\t\t\t\n\t\t\tif (change.execute != null)\n\t\t\t{\n\t\t\t\tchange.execute();\n\t\t\t}\n\t\t\telse if (change.redo != null)\n\t\t\t{\n\t\t\t\tchange.redo();\n\t\t\t}\n\t\t\t\n\t\t\t// New global executed event\n\t\t\tthis.source.fireEvent(new mxEventObject(mxEvent.EXECUTED, 'change', change));\n\t\t}\n\t\t\n\t\tthis.undone = false;\n\t\tthis.redone = true;\n\t\tthis.source.fireEvent(new mxEventObject(mxEvent.END_EDIT));\n\t}\n\t\n\tthis.notify();\n};\n\n__mxOutput.mxUndoableEdit = typeof mxUndoableEdit !== 'undefined' ? mxUndoableEdit : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxUndoManager\n *\n * Implements a command history. When changing the graph model, an\n * <mxUndoableChange> object is created at the start of the transaction (when\n * model.beginUpdate is called). All atomic changes are then added to this\n * object until the last model.endUpdate call, at which point the\n * <mxUndoableEdit> is dispatched in an event, and added to the history inside\n * <mxUndoManager>. This is done by an event listener in\n * <mxEditor.installUndoHandler>.\n * \n * Each atomic change of the model is represented by an object (eg.\n * <mxRootChange>, <mxChildChange>, <mxTerminalChange> etc) which contains the\n * complete undo information. The <mxUndoManager> also listens to the\n * <mxGraphView> and stores it's changes to the current root as insignificant\n * undoable changes, so that drilling (step into, step up) is undone.\n * \n * This means when you execute an atomic change on the model, then change the\n * current root on the view and click undo, the change of the root will be\n * undone together with the change of the model so that the display represents\n * the state at which the model was changed. However, these changes are not\n * transmitted for sharing as they do not represent a state change.\n *\n * Example:\n * \n * When adding an undo manager to a graph, make sure to add it\n * to the model and the view as well to maintain a consistent\n * display across multiple undo/redo steps.\n *\n * (code)\n * var undoManager = new mxUndoManager();\n * var listener = function(sender, evt)\n * {\n *   undoManager.undoableEditHappened(evt.getProperty('edit'));\n * };\n * graph.getModel().addListener(mxEvent.UNDO, listener);\n * graph.getView().addListener(mxEvent.UNDO, listener);\n * (end)\n * \n * The code creates a function that informs the undoManager\n * of an undoable edit and binds it to the undo event of\n * <mxGraphModel> and <mxGraphView> using\n * <mxEventSource.addListener>.\n * \n * Event: mxEvent.CLEAR\n * \n * Fires after <clear> was invoked. This event has no properties.\n * \n * Event: mxEvent.UNDO\n * \n * Fires afer a significant edit was undone in <undo>. The <code>edit</code>\n * property contains the <mxUndoableEdit> that was undone.\n * \n * Event: mxEvent.REDO\n * \n * Fires afer a significant edit was redone in <redo>. The <code>edit</code>\n * property contains the <mxUndoableEdit> that was redone.\n * \n * Event: mxEvent.ADD\n * \n * Fires after an undoable edit was added to the history. The <code>edit</code>\n * property contains the <mxUndoableEdit> that was added.\n * \n * Constructor: mxUndoManager\n *\n * Constructs a new undo manager with the given history size. If no history\n * size is given, then a default size of 100 steps is used.\n */\nfunction mxUndoManager(size)\n{\n\tthis.size = (size != null) ? size : 100;\n\tthis.clear();\n};\n\n/**\n * Extends mxEventSource.\n */\nmxUndoManager.prototype = new mxEventSource();\nmxUndoManager.prototype.constructor = mxUndoManager;\n\n/**\n * Variable: size\n * \n * Maximum command history size. 0 means unlimited history. Default is\n * 100.\n */\nmxUndoManager.prototype.size = null;\n\n/**\n * Variable: history\n * \n * Array that contains the steps of the command history.\n */\nmxUndoManager.prototype.history = null;\n\n/**\n * Variable: indexOfNextAdd\n * \n * Index of the element to be added next.\n */\nmxUndoManager.prototype.indexOfNextAdd = 0;\n\n/**\n * Function: isEmpty\n * \n * Returns true if the history is empty.\n */\nmxUndoManager.prototype.isEmpty = function()\n{\n\treturn this.history.length == 0;\n};\n\n/**\n * Function: clear\n * \n * Clears the command history.\n */\nmxUndoManager.prototype.clear = function()\n{\n\tthis.history = [];\n\tthis.indexOfNextAdd = 0;\n\tthis.fireEvent(new mxEventObject(mxEvent.CLEAR));\n};\n\n/**\n * Function: canUndo\n * \n * Returns true if an undo is possible.\n */\nmxUndoManager.prototype.canUndo = function()\n{\n\treturn this.indexOfNextAdd > 0;\n};\n\n/**\n * Function: undo\n * \n * Undoes the last change.\n */\nmxUndoManager.prototype.undo = function()\n{\n    while (this.indexOfNextAdd > 0)\n    {\n        var edit = this.history[--this.indexOfNextAdd];\n        edit.undo();\n\n\t\tif (edit.isSignificant())\n        {\n        \tthis.fireEvent(new mxEventObject(mxEvent.UNDO, 'edit', edit));\n            break;\n        }\n    }\n};\n\n/**\n * Function: canRedo\n * \n * Returns true if a redo is possible.\n */\nmxUndoManager.prototype.canRedo = function()\n{\n\treturn this.indexOfNextAdd < this.history.length;\n};\n\n/**\n * Function: redo\n * \n * Redoes the last change.\n */\nmxUndoManager.prototype.redo = function()\n{\n    var n = this.history.length;\n    \n    while (this.indexOfNextAdd < n)\n    {\n        var edit =  this.history[this.indexOfNextAdd++];\n        edit.redo();\n        \n        if (edit.isSignificant())\n        {\n        \tthis.fireEvent(new mxEventObject(mxEvent.REDO, 'edit', edit));\n            break;\n        }\n    }\n};\n\n/**\n * Function: undoableEditHappened\n * \n * Method to be called to add new undoable edits to the <history>.\n */\nmxUndoManager.prototype.undoableEditHappened = function(undoableEdit)\n{\n\tthis.trim();\n\t\n\tif (this.size > 0 &&\n\t\tthis.size == this.history.length)\n\t{\n\t\tthis.history.shift();\n\t}\n\t\n\tthis.history.push(undoableEdit);\n\tthis.indexOfNextAdd = this.history.length;\n\tthis.fireEvent(new mxEventObject(mxEvent.ADD, 'edit', undoableEdit));\n};\n\n/**\n * Function: trim\n * \n * Removes all pending steps after <indexOfNextAdd> from the history,\n * invoking die on each edit. This is called from <undoableEditHappened>.\n */\nmxUndoManager.prototype.trim = function()\n{\n\tif (this.history.length > this.indexOfNextAdd)\n\t{\n\t\tvar edits = this.history.splice(this.indexOfNextAdd,\n\t\t\tthis.history.length - this.indexOfNextAdd);\n\t\t\t\n\t\tfor (var i = 0; i < edits.length; i++)\n\t\t{\n\t\t\tedits[i].die();\n\t\t}\n\t}\n};\n\n__mxOutput.mxUndoManager = typeof mxUndoManager !== 'undefined' ? mxUndoManager : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n *\n * Class: mxUrlConverter\n * \n * Converts relative and absolute URLs to absolute URLs with protocol and domain.\n */\nvar mxUrlConverter = function()\n{\n\t// Empty constructor\n};\n\n/**\n * Variable: enabled\n * \n * Specifies if the converter is enabled. Default is true.\n */\nmxUrlConverter.prototype.enabled = true;\n\n/**\n * Variable: baseUrl\n * \n * Specifies the base URL to be used as a prefix for relative URLs.\n */\nmxUrlConverter.prototype.baseUrl = null;\n\n/**\n * Variable: baseDomain\n * \n * Specifies the base domain to be used as a prefix for absolute URLs.\n */\nmxUrlConverter.prototype.baseDomain = null;\n\n/**\n * Function: updateBaseUrl\n * \n * Private helper function to update the base URL.\n */\nmxUrlConverter.prototype.updateBaseUrl = function()\n{\n\tthis.baseDomain = location.protocol + '//' + location.host;\n\tthis.baseUrl = this.baseDomain + location.pathname;\n\tvar tmp = this.baseUrl.lastIndexOf('/');\n\t\n\t// Strips filename etc\n\tif (tmp > 0)\n\t{\n\t\tthis.baseUrl = this.baseUrl.substring(0, tmp + 1);\n\t}\n};\n\n/**\n * Function: isEnabled\n * \n * Returns <enabled>.\n */\nmxUrlConverter.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Sets <enabled>.\n */\nmxUrlConverter.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: getBaseUrl\n * \n * Returns <baseUrl>.\n */\nmxUrlConverter.prototype.getBaseUrl = function()\n{\n\treturn this.baseUrl;\n};\n\n/**\n * Function: setBaseUrl\n * \n * Sets <baseUrl>.\n */\nmxUrlConverter.prototype.setBaseUrl = function(value)\n{\n\tthis.baseUrl = value;\n};\n\n/**\n * Function: getBaseDomain\n * \n * Returns <baseDomain>.\n */\nmxUrlConverter.prototype.getBaseDomain = function()\n{\n\treturn this.baseDomain;\n};\n\n/**\n * Function: setBaseDomain\n * \n * Sets <baseDomain>.\n */\nmxUrlConverter.prototype.setBaseDomain = function(value)\n{\n\tthis.baseDomain = value;\n};\n\n/**\n * Function: isRelativeUrl\n * \n * Returns true if the given URL is relative.\n */\nmxUrlConverter.prototype.isRelativeUrl = function(url)\n{\n\treturn url != null && url.substring(0, 2) != '//' && url.substring(0, 7) != 'http://' &&\n\t\turl.substring(0, 8) != 'https://' && url.substring(0, 10) != 'data:image' &&\n\t\turl.substring(0, 7) != 'file://';\n};\n\n/**\n * Function: convert\n * \n * Converts the given URL to an absolute URL with protol and domain.\n * Relative URLs are first converted to absolute URLs.\n */\nmxUrlConverter.prototype.convert = function(url)\n{\n\tif (this.isEnabled() && this.isRelativeUrl(url))\n\t{\n\t\tif (this.getBaseUrl() == null)\n\t\t{\n\t\t\tthis.updateBaseUrl();\n\t\t}\n\t\t\n\t\tif (url.charAt(0) == '/')\n\t\t{\n\t\t\turl = this.getBaseDomain() + url;\n\t\t}\n\t\telse\n\t\t{\n\t\t\turl = this.getBaseUrl() + url;\n\t\t}\n\t}\n\t\n\treturn url;\n};\n\n__mxOutput.mxUrlConverter = typeof mxUrlConverter !== 'undefined' ? mxUrlConverter : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPanningManager\n *\n * Implements a handler for panning.\n */\nfunction mxPanningManager(graph)\n{\n\tthis.thread = null;\n\tthis.active = false;\n\tthis.tdx = 0;\n\tthis.tdy = 0;\n\tthis.t0x = 0;\n\tthis.t0y = 0;\n\tthis.dx = 0;\n\tthis.dy = 0;\n\tthis.scrollbars = false;\n\tthis.scrollLeft = 0;\n\tthis.scrollTop = 0;\n\t\n\tthis.mouseListener =\n\t{\n\t    mouseDown: function(sender, me) { },\n\t    mouseMove: function(sender, me) { },\n\t    mouseUp: mxUtils.bind(this, function(sender, me)\n\t    {\n\t    \tif (this.active)\n\t    \t{\n\t    \t\tthis.stop();\n\t    \t}\n\t    })\n\t};\n\t\n\tgraph.addMouseListener(this.mouseListener);\n\t\n\tthis.mouseUpListener = mxUtils.bind(this, function()\n\t{\n\t    \tif (this.active)\n\t    \t{\n\t    \t\tthis.stop();\n\t    \t}\n\t});\n\t\n\t// Stops scrolling on every mouseup anywhere in the document\n\tmxEvent.addListener(document, 'mouseup', this.mouseUpListener);\n\t\n\tvar createThread = mxUtils.bind(this, function()\n\t{\n\t    \tthis.scrollbars = mxUtils.hasScrollbars(graph.container);\n\t    \tthis.scrollLeft = graph.container.scrollLeft;\n\t    \tthis.scrollTop = graph.container.scrollTop;\n\t\n\t    \treturn window.setInterval(mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.tdx -= this.dx;\n\t\t\tthis.tdy -= this.dy;\n\n\t\t\tif (this.scrollbars)\n\t\t\t{\n\t\t\t\tvar left = -graph.container.scrollLeft - Math.ceil(this.dx);\n\t\t\t\tvar top = -graph.container.scrollTop - Math.ceil(this.dy);\n\t\t\t\tgraph.panGraph(left, top);\n\t\t\t\tgraph.panDx = this.scrollLeft - graph.container.scrollLeft;\n\t\t\t\tgraph.panDy = this.scrollTop - graph.container.scrollTop;\n\t\t\t\tgraph.fireEvent(new mxEventObject(mxEvent.PAN));\n\t\t\t\t// TODO: Implement graph.autoExtend\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgraph.panGraph(this.getDx(), this.getDy());\n\t\t\t}\n\t\t}), this.delay);\n\t});\n\t\n\tthis.isActive = function()\n\t{\n\t\treturn active;\n\t};\n\t\n\tthis.getDx = function()\n\t{\n\t\treturn Math.round(this.tdx);\n\t};\n\t\n\tthis.getDy = function()\n\t{\n\t\treturn Math.round(this.tdy);\n\t};\n\t\n\tthis.start = function()\n\t{\n\t\tthis.t0x = graph.view.translate.x;\n\t\tthis.t0y = graph.view.translate.y;\n\t\tthis.active = true;\n\t};\n\t\n\tthis.panTo = function(x, y, w, h)\n\t{\n\t\tif (!this.active)\n\t\t{\n\t\t\tthis.start();\n\t\t}\n\t\t\n    \tthis.scrollLeft = graph.container.scrollLeft;\n    \tthis.scrollTop = graph.container.scrollTop;\n\t\t\n\t\tw = (w != null) ? w : 0;\n\t\th = (h != null) ? h : 0;\n\t\t\n\t\tvar c = graph.container;\n\t\tthis.dx = x + w - c.scrollLeft - c.clientWidth;\n\t\t\n\t\tif (this.dx < 0 && Math.abs(this.dx) < this.border)\n\t\t{\n\t\t\tthis.dx = this.border + this.dx;\n\t\t}\n\t\telse if (this.handleMouseOut)\n\t\t{\n\t\t\tthis.dx = Math.max(this.dx, 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.dx = 0;\n\t\t}\n\t\t\n\t\tif (this.dx == 0)\n\t\t{\n\t\t\tthis.dx = x - c.scrollLeft;\n\t\t\t\n\t\t\tif (this.dx > 0 && this.dx < this.border)\n\t\t\t{\n\t\t\t\tthis.dx = this.dx - this.border;\n\t\t\t}\n\t\t\telse if (this.handleMouseOut)\n\t\t\t{\n\t\t\t\tthis.dx = Math.min(0, this.dx);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dx = 0;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.dy = y + h - c.scrollTop - c.clientHeight;\n\n\t\tif (this.dy < 0 && Math.abs(this.dy) < this.border)\n\t\t{\n\t\t\tthis.dy = this.border + this.dy;\n\t\t}\n\t\telse if (this.handleMouseOut)\n\t\t{\n\t\t\tthis.dy = Math.max(this.dy, 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.dy = 0;\n\t\t}\n\t\t\n\t\tif (this.dy == 0)\n\t\t{\n\t\t\tthis.dy = y - c.scrollTop;\n\t\t\t\n\t\t\tif (this.dy > 0 && this.dy < this.border)\n\t\t\t{\n\t\t\t\tthis.dy = this.dy - this.border;\n\t\t\t}\n\t\t\telse if (this.handleMouseOut)\n\t\t\t{\n\t\t\t\tthis.dy = Math.min(0, this.dy);\n\t\t\t} \n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dy = 0;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.dx != 0 || this.dy != 0)\n\t\t{\n\t\t\tthis.dx *= this.damper;\n\t\t\tthis.dy *= this.damper;\n\t\t\t\n\t\t\tif (this.thread == null)\n\t\t\t{\n\t\t\t\tthis.thread = createThread();\n\t\t\t}\n\t\t}\n\t\telse if (this.thread != null)\n\t\t{\n\t\t\twindow.clearInterval(this.thread);\n\t\t\tthis.thread = null;\n\t\t}\n\t};\n\t\n\tthis.stop = function()\n\t{\n\t\tif (this.active)\n\t\t{\n\t\t\tthis.active = false;\n\t\t\n\t\t\tif (this.thread != null)\n\t    \t{\n\t\t\t\twindow.clearInterval(this.thread);\n\t\t\t\tthis.thread = null;\n\t    \t}\n\t\t\t\n\t\t\tthis.tdx = 0;\n\t\t\tthis.tdy = 0;\n\t\t\t\n\t\t\tif (!this.scrollbars)\n\t\t\t{\n\t\t\t\tvar px = graph.panDx;\n\t\t\t\tvar py = graph.panDy;\n\t\t    \t\n\t\t    \tif (px != 0 || py != 0)\n\t\t    \t{\n\t\t    \t\tgraph.panGraph(0, 0);\n\t\t\t    \tgraph.view.setTranslate(this.t0x + px / graph.view.scale, this.t0y + py / graph.view.scale);\n\t\t    \t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgraph.panDx = 0;\n\t\t\t\tgraph.panDy = 0;\n\t\t\t\tgraph.fireEvent(new mxEventObject(mxEvent.PAN));\n\t\t\t}\n\t\t}\n\t};\n\t\n\tthis.destroy = function()\n\t{\n\t\tgraph.removeMouseListener(this.mouseListener);\n\t\tmxEvent.removeListener(document, 'mouseup', this.mouseUpListener);\n\t};\n};\n\n/**\n * Variable: damper\n * \n * Damper value for the panning. Default is 1/6.\n */\nmxPanningManager.prototype.damper = 1/6;\n\n/**\n * Variable: delay\n * \n * Delay in milliseconds for the panning. Default is 10.\n */\nmxPanningManager.prototype.delay = 10;\n\n/**\n * Variable: handleMouseOut\n * \n * Specifies if mouse events outside of the component should be handled. Default is true. \n */\nmxPanningManager.prototype.handleMouseOut = true;\n\n/**\n * Variable: border\n * \n * Border to handle automatic panning inside the component. Default is 0 (disabled).\n */\nmxPanningManager.prototype.border = 0;\n\n__mxOutput.mxPanningManager = typeof mxPanningManager !== 'undefined' ? mxPanningManager : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPopupMenu\n * \n * Basic popup menu. To add a vertical scrollbar to a given submenu, the\n * following code can be used.\n * \n * (code)\n * var mxPopupMenuShowMenu = mxPopupMenu.prototype.showMenu;\n * mxPopupMenu.prototype.showMenu = function()\n * {\n *   mxPopupMenuShowMenu.apply(this, arguments);\n *   \n *   this.div.style.overflowY = 'auto';\n *   this.div.style.overflowX = 'hidden';\n *   this.div.style.maxHeight = '160px';\n * };\n * (end)\n * \n * Constructor: mxPopupMenu\n * \n * Constructs a popupmenu.\n * \n * Event: mxEvent.SHOW\n *\n * Fires after the menu has been shown in <popup>.\n */\nfunction mxPopupMenu(factoryMethod)\n{\n\tthis.factoryMethod = factoryMethod;\n\t\n\tif (factoryMethod != null)\n\t{\n\t\tthis.init();\n\t}\n};\n\n/**\n * Extends mxEventSource.\n */\nmxPopupMenu.prototype = new mxEventSource();\nmxPopupMenu.prototype.constructor = mxPopupMenu;\n\n/**\n * Variable: submenuImage\n * \n * URL of the image to be used for the submenu icon.\n */\nmxPopupMenu.prototype.submenuImage = mxClient.imageBasePath + '/submenu.gif';\n\n/**\n * Variable: zIndex\n * \n * Specifies the zIndex for the popupmenu and its shadow. Default is 10006.\n */\nmxPopupMenu.prototype.zIndex = 10006;\n\n/**\n * Variable: factoryMethod\n * \n * Function that is used to create the popup menu. The function takes the\n * current panning handler, the <mxCell> under the mouse and the mouse\n * event that triggered the call as arguments.\n */\nmxPopupMenu.prototype.factoryMethod = null;\n\n/**\n * Variable: useLeftButtonForPopup\n * \n * Specifies if popupmenus should be activated by clicking the left mouse\n * button. Default is false.\n */\nmxPopupMenu.prototype.useLeftButtonForPopup = false;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxPopupMenu.prototype.enabled = true;\n\n/**\n * Variable: itemCount\n * \n * Contains the number of times <addItem> has been called for a new menu.\n */\nmxPopupMenu.prototype.itemCount = 0;\n\n/**\n * Variable: autoExpand\n * \n * Specifies if submenus should be expanded on mouseover. Default is false.\n */\nmxPopupMenu.prototype.autoExpand = false;\n\n/**\n * Variable: smartSeparators\n * \n * Specifies if separators should only be added if a menu item follows them.\n * Default is false.\n */\nmxPopupMenu.prototype.smartSeparators = false;\n\n/**\n * Variable: labels\n * \n * Specifies if any labels should be visible. Default is true.\n */\nmxPopupMenu.prototype.labels = true;\n\n/**\n * Function: init\n * \n * Initializes the shapes required for this vertex handler.\n */\nmxPopupMenu.prototype.init = function()\n{\n\t// Adds the inner table\n\tthis.table = document.createElement('table');\n\tthis.table.className = 'mxPopupMenu';\n\t\n\tthis.tbody = document.createElement('tbody');\n\tthis.table.appendChild(this.tbody);\n\n\t// Adds the outer div\n\tthis.div = document.createElement('div');\n\tthis.div.className = 'mxPopupMenu';\n\tthis.div.style.display = 'inline';\n\tthis.div.style.zIndex = this.zIndex;\n\tthis.div.appendChild(this.table);\n\n\t// Disables the context menu on the outer div\n\tmxEvent.disableContextMenu(this.div);\n};\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxPopupMenu.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\t\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n */\nmxPopupMenu.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isPopupTrigger\n * \n * Returns true if the given event is a popupmenu trigger for the optional\n * given cell.\n * \n * Parameters:\n * \n * me - <mxMouseEvent> that represents the mouse event.\n */\nmxPopupMenu.prototype.isPopupTrigger = function(me)\n{\n\treturn me.isPopupTrigger() || (this.useLeftButtonForPopup && mxEvent.isLeftMouseButton(me.getEvent()));\n};\n\n/**\n * Function: addItem\n * \n * Adds the given item to the given parent item. If no parent item is specified\n * then the item is added to the top-level menu. The return value may be used\n * as the parent argument, ie. as a submenu item. The return value is the table\n * row that represents the item.\n * \n * Paramters:\n * \n * title - String that represents the title of the menu item.\n * image - Optional URL for the image icon.\n * funct - Function associated that takes a mouseup or touchend event.\n * parent - Optional item returned by <addItem>.\n * iconCls - Optional string that represents the CSS class for the image icon.\n * IconsCls is ignored if image is given.\n * enabled - Optional boolean indicating if the item is enabled. Default is true.\n * active - Optional boolean indicating if the menu should implement any event handling.\n * Default is true.\n * noHover - Optional boolean to disable hover state.\n */\nmxPopupMenu.prototype.addItem = function(title, image, funct, parent, iconCls, enabled, active, noHover)\n{\n\tparent = parent || this;\n\tthis.itemCount++;\n\t\n\t// Smart separators only added if element contains items\n\tif (parent.willAddSeparator)\n\t{\n\t\tif (parent.containsItems)\n\t\t{\n\t\t\tthis.addSeparator(parent, true);\n\t\t}\n\n\t\tparent.willAddSeparator = false;\n\t}\n\n\tparent.containsItems = true;\n\tvar tr = document.createElement('tr');\n\ttr.className = 'mxPopupMenuItem';\n\tvar col1 = document.createElement('td');\n\tcol1.className = 'mxPopupMenuIcon';\n\n\t// Adds the given image into the first column\n\tif (image != null)\n\t{\n\t\tvar img = document.createElement('img');\n\t\timg.src = image;\n\t\tcol1.appendChild(img);\n\t}\n\telse if (iconCls != null)\n\t{\n\t\tvar div = document.createElement('div');\n\t\tdiv.className = iconCls;\n\t\tcol1.appendChild(div);\n\t}\n\t\n\ttr.appendChild(col1);\n\t\n\tif (this.labels)\n\t{\n\t\tvar col2 = document.createElement('td');\n\t\tcol2.className = 'mxPopupMenuItem' +\n\t\t\t((enabled != null && !enabled) ? ' mxDisabled' : '');\n\t\t\n\t\tmxUtils.write(col2, title);\n\t\tcol2.align = 'left';\n\t\ttr.appendChild(col2);\n\t\n\t\tvar col3 = document.createElement('td');\n\t\tcol3.className = 'mxPopupMenuItem' +\n\t\t\t((enabled != null && !enabled) ? ' mxDisabled' : '');\n\t\tcol3.style.paddingRight = '6px';\n\t\tcol3.style.textAlign = 'right';\n\t\t\n\t\ttr.appendChild(col3);\n\t\t\n\t\tif (parent.div == null)\n\t\t{\n\t\t\tthis.createSubmenu(parent);\n\t\t}\n\t}\n\t\n\tparent.tbody.appendChild(tr);\n\n\tif (active != false && enabled != false)\n\t{\n\t\tvar currentSelection = null;\n\t\t\n\t\tmxEvent.addGestureListeners(tr,\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tthis.eventReceiver = tr;\n\t\t\t\t\n\t\t\t\tif (parent.activeRow != tr && parent.activeRow != parent)\n\t\t\t\t{\n\t\t\t\t\tif (parent.activeRow != null && parent.activeRow.div.parentNode != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideSubmenu(parent);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (tr.div != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showSubmenu(parent, tr);\n\t\t\t\t\t\tparent.activeRow = tr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Workaround for lost current selection in page because of focus in IE\n\t\t\t\tif (document.selection != null && (mxClient.IS_QUIRKS || document.documentMode == 8))\n\t\t\t\t{\n\t\t\t\t\tcurrentSelection = document.selection.createRange();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}),\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (parent.activeRow != tr && parent.activeRow != parent)\n\t\t\t\t{\n\t\t\t\t\tif (parent.activeRow != null && parent.activeRow.div.parentNode != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideSubmenu(parent);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.autoExpand && tr.div != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showSubmenu(parent, tr);\n\t\t\t\t\t\tparent.activeRow = tr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\t// Sets hover style because TR in IE doesn't have hover\n\t\t\t\tif (!noHover)\n\t\t\t\t{\n\t\t\t\t\ttr.className = 'mxPopupMenuItemHover';\n\t\t\t\t}\n\t\t\t}),\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\t// EventReceiver avoids clicks on a submenu item\n\t\t\t\t// which has just been shown in the mousedown\n\t\t\t\tif (this.eventReceiver == tr)\n\t\t\t\t{\n\t\t\t\t\tif (parent.activeRow != tr)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideMenu();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Workaround for lost current selection in page because of focus in IE\n\t\t\t\t\tif (currentSelection != null)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Workaround for \"unspecified error\" in IE8 standards\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrentSelection.select();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// ignore\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurrentSelection = null;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (funct != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfunct(evt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.eventReceiver = null;\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t})\n\t\t);\n\t\n\t\t// Resets hover style because TR in IE doesn't have hover\n\t\tif (!noHover)\n\t\t{\n\t\t\tmxEvent.addListener(tr, 'mouseout',\n\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\ttr.className = 'mxPopupMenuItem';\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\t\n\treturn tr;\n};\n\n/**\n * Adds a checkmark to the given menuitem.\n */\nmxPopupMenu.prototype.addCheckmark = function(item, img)\n{\n\tvar td = item.firstChild.nextSibling;\n\ttd.style.backgroundImage = 'url(\\'' + img + '\\')';\n\ttd.style.backgroundRepeat = 'no-repeat';\n\ttd.style.backgroundPosition = '2px 50%';\n};\n\n/**\n * Function: createSubmenu\n * \n * Creates the nodes required to add submenu items inside the given parent\n * item. This is called in <addItem> if a parent item is used for the first\n * time. This adds various DOM nodes and a <submenuImage> to the parent.\n * \n * Parameters:\n * \n * parent - An item returned by <addItem>.\n */\nmxPopupMenu.prototype.createSubmenu = function(parent)\n{\n\tparent.table = document.createElement('table');\n\tparent.table.className = 'mxPopupMenu';\n\n\tparent.tbody = document.createElement('tbody');\n\tparent.table.appendChild(parent.tbody);\n\n\tparent.div = document.createElement('div');\n\tparent.div.className = 'mxPopupMenu';\n\n\tparent.div.style.position = 'absolute';\n\tparent.div.style.display = 'inline';\n\tparent.div.style.zIndex = this.zIndex;\n\t\n\tparent.div.appendChild(parent.table);\n\t\n\tvar img = document.createElement('img');\n\timg.setAttribute('src', this.submenuImage);\n\t\n\t// Last column of the submenu item in the parent menu\n\ttd = parent.firstChild.nextSibling.nextSibling;\n\ttd.appendChild(img);\n};\n\n/**\n * Function: showSubmenu\n * \n * Shows the submenu inside the given parent row.\n */\nmxPopupMenu.prototype.showSubmenu = function(parent, row)\n{\n\tif (row.div != null)\n\t{\n\t\trow.div.style.left = (parent.div.offsetLeft +\n\t\t\trow.offsetLeft+row.offsetWidth - 1) + 'px';\n\t\trow.div.style.top = (parent.div.offsetTop+row.offsetTop) + 'px';\n\t\tdocument.body.appendChild(row.div);\n\t\t\n\t\t// Moves the submenu to the left side if there is no space\n\t\tvar left = parseInt(row.div.offsetLeft);\n\t\tvar width = parseInt(row.div.offsetWidth);\n\t\tvar offset = mxUtils.getDocumentScrollOrigin(document);\n\t\t\n\t\tvar b = document.body;\n\t\tvar d = document.documentElement;\n\t\t\n\t\tvar right = offset.x + (b.clientWidth || d.clientWidth);\n\t\t\n\t\tif (left + width > right)\n\t\t{\n\t\t\trow.div.style.left = Math.max(0, (parent.div.offsetLeft - width + ((mxClient.IS_IE) ? 6 : -6))) + 'px';\n\t\t}\n\t\t\n\t\tmxUtils.fit(row.div);\n\t}\n};\n\n/**\n * Function: addSeparator\n * \n * Adds a horizontal separator in the given parent item or the top-level menu\n * if no parent is specified.\n * \n * Parameters:\n * \n * parent - Optional item returned by <addItem>.\n * force - Optional boolean to ignore <smartSeparators>. Default is false.\n */\nmxPopupMenu.prototype.addSeparator = function(parent, force)\n{\n\tparent = parent || this;\n\t\n\tif (this.smartSeparators && !force)\n\t{\n\t\tparent.willAddSeparator = true;\n\t}\n\telse if (parent.tbody != null)\n\t{\n\t\tparent.willAddSeparator = false;\n\t\tvar tr = document.createElement('tr');\n\t\t\n\t\tvar col1 = document.createElement('td');\n\t\tcol1.className = 'mxPopupMenuIcon';\n\t\tcol1.style.padding = '0 0 0 0px';\n\t\t\n\t\ttr.appendChild(col1);\n\t\t\n\t\tvar col2 = document.createElement('td');\n\t\tcol2.style.padding = '0 0 0 0px';\n\t\tcol2.setAttribute('colSpan', '2');\n\t\n\t\tvar hr = document.createElement('hr');\n\t\thr.setAttribute('size', '1');\n\t\tcol2.appendChild(hr);\n\t\t\n\t\ttr.appendChild(col2);\n\t\t\n\t\tparent.tbody.appendChild(tr);\n\t}\n};\n\n/**\n * Function: popup\n * \n * Shows the popup menu for the given event and cell.\n * \n * Example:\n * \n * (code)\n * graph.panningHandler.popup = function(x, y, cell, evt)\n * {\n *   mxUtils.alert('Hello, World!');\n * }\n * (end)\n */\nmxPopupMenu.prototype.popup = function(x, y, cell, evt)\n{\n\tif (this.div != null && this.tbody != null && this.factoryMethod != null)\n\t{\n\t\tthis.div.style.left = x + 'px';\n\t\tthis.div.style.top = y + 'px';\n\t\t\n\t\t// Removes all child nodes from the existing menu\n\t\twhile (this.tbody.firstChild != null)\n\t\t{\n\t\t\tmxEvent.release(this.tbody.firstChild);\n\t\t\tthis.tbody.removeChild(this.tbody.firstChild);\n\t\t}\n\t\t\n\t\tthis.itemCount = 0;\n\t\tthis.factoryMethod(this, cell, evt);\n\t\t\n\t\tif (this.itemCount > 0)\n\t\t{\n\t\t\tthis.showMenu();\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.SHOW));\n\t\t}\n\t}\n};\n\n/**\n * Function: isMenuShowing\n * \n * Returns true if the menu is showing.\n */\nmxPopupMenu.prototype.isMenuShowing = function()\n{\n\treturn this.div != null && this.div.parentNode == document.body;\n};\n\n/**\n * Function: showMenu\n * \n * Shows the menu.\n */\nmxPopupMenu.prototype.showMenu = function()\n{\n\t// Disables filter-based shadow in IE9 standards mode\n\tif (document.documentMode >= 9)\n\t{\n\t\tthis.div.style.filter = 'none';\n\t}\n\t\n\t// Fits the div inside the viewport\n\tdocument.body.appendChild(this.div);\n\tmxUtils.fit(this.div);\n};\n\n/**\n * Function: hideMenu\n * \n * Removes the menu and all submenus.\n */\nmxPopupMenu.prototype.hideMenu = function()\n{\n\tif (this.div != null)\n\t{\n\t\tif (this.div.parentNode != null)\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t\t\n\t\tthis.hideSubmenu(this);\n\t\tthis.containsItems = false;\n\t\tthis.fireEvent(new mxEventObject(mxEvent.HIDE));\n\t}\n};\n\n/**\n * Function: hideSubmenu\n * \n * Removes all submenus inside the given parent.\n * \n * Parameters:\n * \n * parent - An item returned by <addItem>.\n */\nmxPopupMenu.prototype.hideSubmenu = function(parent)\n{\n\tif (parent.activeRow != null)\n\t{\n\t\tthis.hideSubmenu(parent.activeRow);\n\t\t\n\t\tif (parent.activeRow.div.parentNode != null)\n\t\t{\n\t\t\tparent.activeRow.div.parentNode.removeChild(parent.activeRow.div);\n\t\t}\n\t\t\n\t\tparent.activeRow = null;\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxPopupMenu.prototype.destroy = function()\n{\n\tif (this.div != null)\n\t{\n\t\tmxEvent.release(this.div);\n\t\t\n\t\tif (this.div.parentNode != null)\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t\t\n\t\tthis.div = null;\n\t}\n};\n\n__mxOutput.mxPopupMenu = typeof mxPopupMenu !== 'undefined' ? mxPopupMenu : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxAutoSaveManager\n * \n * Manager for automatically saving diagrams. The <save> hook must be\n * implemented.\n * \n * Example:\n * \n * (code)\n * var mgr = new mxAutoSaveManager(editor.graph);\n * mgr.save = function()\n * {\n *   mxLog.show();\n *   mxLog.debug('save');\n * };\n * (end)\n * \n * Constructor: mxAutoSaveManager\n *\n * Constructs a new automatic layout for the given graph.\n *\n * Arguments:\n * \n * graph - Reference to the enclosing graph. \n */\nfunction mxAutoSaveManager(graph)\n{\n\t// Notifies the manager of a change\n\tthis.changeHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.graphModelChanged(evt.getProperty('edit').changes);\n\t\t}\n\t});\n\n\tthis.setGraph(graph);\n};\n\n/**\n * Extends mxEventSource.\n */\nmxAutoSaveManager.prototype = new mxEventSource();\nmxAutoSaveManager.prototype.constructor = mxAutoSaveManager;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxAutoSaveManager.prototype.graph = null;\n\n/**\n * Variable: autoSaveDelay\n * \n * Minimum amount of seconds between two consecutive autosaves. Eg. a\n * value of 1 (s) means the graph is not stored more than once per second.\n * Default is 10.\n */\nmxAutoSaveManager.prototype.autoSaveDelay = 10;\n\n/**\n * Variable: autoSaveThrottle\n * \n * Minimum amount of seconds between two consecutive autosaves triggered by\n * more than <autoSaveThreshhold> changes within a timespan of less than\n * <autoSaveDelay> seconds. Eg. a value of 1 (s) means the graph is not\n * stored more than once per second even if there are more than\n * <autoSaveThreshold> changes within that timespan. Default is 2.\n */\nmxAutoSaveManager.prototype.autoSaveThrottle = 2;\n\n/**\n * Variable: autoSaveThreshold\n * \n * Minimum amount of ignored changes before an autosave. Eg. a value of 2\n * means after 2 change of the graph model the autosave will trigger if the\n * condition below is true. Default is 5.\n */\nmxAutoSaveManager.prototype.autoSaveThreshold = 5;\n\n/**\n * Variable: ignoredChanges\n * \n * Counter for ignored changes in autosave.\n */\nmxAutoSaveManager.prototype.ignoredChanges = 0;\n\n/**\n * Variable: lastSnapshot\n * \n * Used for autosaving. See <autosave>.\n */\nmxAutoSaveManager.prototype.lastSnapshot = 0;\n\n/**\n * Variable: enabled\n * \n * Specifies if event handling is enabled. Default is true.\n */\nmxAutoSaveManager.prototype.enabled = true;\n\n/**\n * Variable: changeHandler\n * \n * Holds the function that handles graph model changes.\n */\nmxAutoSaveManager.prototype.changeHandler = null;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxAutoSaveManager.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n * \n * Parameters:\n * \n * enabled - Boolean that specifies the new enabled state.\n */\nmxAutoSaveManager.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: setGraph\n * \n * Sets the graph that the layouts operate on.\n */\nmxAutoSaveManager.prototype.setGraph = function(graph)\n{\n\tif (this.graph != null)\n\t{\n\t\tthis.graph.getModel().removeListener(this.changeHandler);\n\t}\n\t\n\tthis.graph = graph;\n\t\n\tif (this.graph != null)\n\t{\n\t\tthis.graph.getModel().addListener(mxEvent.CHANGE, this.changeHandler);\n\t}\n};\n\n/**\n * Function: save\n * \n * Empty hook that is called if the graph should be saved.\n */\nmxAutoSaveManager.prototype.save = function()\n{\n\t// empty\n};\n\n/**\n * Function: graphModelChanged\n * \n * Invoked when the graph model has changed.\n */\nmxAutoSaveManager.prototype.graphModelChanged = function(changes)\n{\n\tvar now = new Date().getTime();\n\tvar dt = (now - this.lastSnapshot) / 1000;\n\t\n\tif (dt > this.autoSaveDelay ||\n\t\t(this.ignoredChanges >= this.autoSaveThreshold &&\n\t\t dt > this.autoSaveThrottle))\n\t{\n\t\tthis.save();\n\t\tthis.reset();\n\t}\n\telse\n\t{\n\t\t// Increments the number of ignored changes\n\t\tthis.ignoredChanges++;\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets all counters.\n */\nmxAutoSaveManager.prototype.reset = function()\n{\n\tthis.lastSnapshot = new Date().getTime();\n\tthis.ignoredChanges = 0;\n};\n\n/**\n * Function: destroy\n * \n * Removes all handlers from the <graph> and deletes the reference to it.\n */\nmxAutoSaveManager.prototype.destroy = function()\n{\n\tthis.setGraph(null);\n};\n\n__mxOutput.mxAutoSaveManager = typeof mxAutoSaveManager !== 'undefined' ? mxAutoSaveManager : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n *\n * Class: mxAnimation\n * \n * Implements a basic animation in JavaScript.\n * \n * Constructor: mxAnimation\n * \n * Constructs an animation.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n */\nfunction mxAnimation(delay)\n{\n\tthis.delay = (delay != null) ? delay : 20;\n};\n\n/**\n * Extends mxEventSource.\n */\nmxAnimation.prototype = new mxEventSource();\nmxAnimation.prototype.constructor = mxAnimation;\n\n/**\n * Variable: delay\n * \n * Specifies the delay between the animation steps. Defaul is 30ms.\n */\nmxAnimation.prototype.delay = null;\n\n/**\n * Variable: thread\n * \n * Reference to the thread while the animation is running.\n */\nmxAnimation.prototype.thread = null;\n\n/**\n * Function: isRunning\n * \n * Returns true if the animation is running.\n */\nmxAnimation.prototype.isRunning = function()\n{\n\treturn this.thread != null;\n};\n\n/**\n * Function: startAnimation\n *\n * Starts the animation by repeatedly invoking updateAnimation.\n */\nmxAnimation.prototype.startAnimation = function()\n{\n\tif (this.thread == null)\n\t{\n\t\tthis.thread = window.setInterval(mxUtils.bind(this, this.updateAnimation), this.delay);\n\t}\n};\n\n/**\n * Function: updateAnimation\n *\n * Hook for subclassers to implement the animation. Invoke stopAnimation\n * when finished, startAnimation to resume. This is called whenever the\n * timer fires and fires an mxEvent.EXECUTE event with no properties.\n */\nmxAnimation.prototype.updateAnimation = function()\n{\n\tthis.fireEvent(new mxEventObject(mxEvent.EXECUTE));\n};\n\n/**\n * Function: stopAnimation\n *\n * Stops the animation by deleting the timer and fires an <mxEvent.DONE>.\n */\nmxAnimation.prototype.stopAnimation = function()\n{\n\tif (this.thread != null)\n\t{\n\t\twindow.clearInterval(this.thread);\n\t\tthis.thread = null;\n\t\tthis.fireEvent(new mxEventObject(mxEvent.DONE));\n\t}\n};\n\n__mxOutput.mxAnimation = typeof mxAnimation !== 'undefined' ? mxAnimation : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n *\n * Class: mxMorphing\n * \n * Implements animation for morphing cells. Here is an example of\n * using this class for animating the result of a layout algorithm:\n * \n * (code)\n * graph.getModel().beginUpdate();\n * try\n * {\n *   var circleLayout = new mxCircleLayout(graph);\n *   circleLayout.execute(graph.getDefaultParent());\n * }\n * finally\n * {\n *   var morph = new mxMorphing(graph);\n *   morph.addListener(mxEvent.DONE, function()\n *   {\n *     graph.getModel().endUpdate();\n *   });\n *   \n *   morph.startAnimation();\n * }\n * (end)\n * \n * Constructor: mxMorphing\n * \n * Constructs an animation.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * steps - Optional number of steps in the morphing animation. Default is 6.\n * ease - Optional easing constant for the animation. Default is 1.5.\n * delay - Optional delay between the animation steps. Passed to <mxAnimation>.\n */\nfunction mxMorphing(graph, steps, ease, delay)\n{\n\tmxAnimation.call(this, delay);\n\tthis.graph = graph;\n\tthis.steps = (steps != null) ? steps : 6;\n\tthis.ease = (ease != null) ? ease : 1.5;\n};\n\n/**\n * Extends mxEventSource.\n */\nmxMorphing.prototype = new mxAnimation();\nmxMorphing.prototype.constructor = mxMorphing;\n\n/**\n * Variable: graph\n * \n * Specifies the delay between the animation steps. Defaul is 30ms.\n */\nmxMorphing.prototype.graph = null;\n\n/**\n * Variable: steps\n * \n * Specifies the maximum number of steps for the morphing.\n */\nmxMorphing.prototype.steps = null;\n\n/**\n * Variable: step\n * \n * Contains the current step.\n */\nmxMorphing.prototype.step = 0;\n\n/**\n * Variable: ease\n * \n * Ease-off for movement towards the given vector. Larger values are\n * slower and smoother. Default is 4.\n */\nmxMorphing.prototype.ease = null;\n\n/**\n * Variable: cells\n * \n * Optional array of cells to be animated. If this is not specified\n * then all cells are checked and animated if they have been moved\n * in the current transaction.\n */\nmxMorphing.prototype.cells = null;\n\n/**\n * Function: updateAnimation\n *\n * Animation step.\n */\nmxMorphing.prototype.updateAnimation = function()\n{\n\tmxAnimation.prototype.updateAnimation.apply(this, arguments);\n\tvar move = new mxCellStatePreview(this.graph);\n\n\tif (this.cells != null)\n\t{\n\t\t// Animates the given cells individually without recursion\n\t\tfor (var i = 0; i < this.cells.length; i++)\n\t\t{\n\t\t\tthis.animateCell(this.cells[i], move, false);\n\t\t}\n\t}\n\telse\n\t{\n\t\t// Animates all changed cells by using recursion to find\n\t\t// the changed cells but not for the animation itself\n\t\tthis.animateCell(this.graph.getModel().getRoot(), move, true);\n\t}\n\t\n\tthis.show(move);\n\t\n\tif (move.isEmpty() || this.step++ >= this.steps)\n\t{\n\t\tthis.stopAnimation();\n\t}\n};\n\n/**\n * Function: show\n *\n * Shows the changes in the given <mxCellStatePreview>.\n */\nmxMorphing.prototype.show = function(move)\n{\n\tmove.show();\n};\n\n/**\n * Function: animateCell\n *\n * Animates the given cell state using <mxCellStatePreview.moveState>.\n */\nmxMorphing.prototype.animateCell = function(cell, move, recurse)\n{\n\tvar state = this.graph.getView().getState(cell);\n\tvar delta = null;\n\n\tif (state != null)\n\t{\n\t\t// Moves the animated state from where it will be after the model\n\t\t// change by subtracting the given delta vector from that location\n\t\tdelta = this.getDelta(state);\n\n\t\tif (this.graph.getModel().isVertex(cell) && (delta.x != 0 || delta.y != 0))\n\t\t{\n\t\t\tvar translate = this.graph.view.getTranslate();\n\t\t\tvar scale = this.graph.view.getScale();\n\t\t\t\n\t\t\tdelta.x += translate.x * scale;\n\t\t\tdelta.y += translate.y * scale;\n\t\t\t\n\t\t\tmove.moveState(state, -delta.x / this.ease, -delta.y / this.ease);\n\t\t}\n\t}\n\t\n\tif (recurse && !this.stopRecursion(state, delta))\n\t{\n\t\tvar childCount = this.graph.getModel().getChildCount(cell);\n\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tthis.animateCell(this.graph.getModel().getChildAt(cell, i), move, recurse);\n\t\t}\n\t}\n};\n\n/**\n * Function: stopRecursion\n *\n * Returns true if the animation should not recursively find more\n * deltas for children if the given parent state has been animated.\n */\nmxMorphing.prototype.stopRecursion = function(state, delta)\n{\n\treturn delta != null && (delta.x != 0 || delta.y != 0);\n};\n\n/**\n * Function: getDelta\n *\n * Returns the vector between the current rendered state and the future\n * location of the state after the display will be updated.\n */\nmxMorphing.prototype.getDelta = function(state)\n{\n\tvar origin = this.getOriginForCell(state.cell);\n\tvar translate = this.graph.getView().getTranslate();\n\tvar scale = this.graph.getView().getScale();\n\tvar x = state.x / scale - translate.x;\n\tvar y = state.y / scale - translate.y;\n\n\treturn new mxPoint((origin.x - x) * scale, (origin.y - y) * scale);\n};\n\n/**\n * Function: getOriginForCell\n *\n * Returns the top, left corner of the given cell. TODO: Improve performance\n * by using caching inside this method as the result per cell never changes\n * during the lifecycle of this object.\n */\nmxMorphing.prototype.getOriginForCell = function(cell)\n{\n\tvar result = null;\n\t\n\tif (cell != null)\n\t{\n\t\tvar parent = this.graph.getModel().getParent(cell);\n\t\tvar geo = this.graph.getCellGeometry(cell);\n\t\tresult = this.getOriginForCell(parent);\n\t\t\n\t\t// TODO: Handle offsets\n\t\tif (geo != null)\n\t\t{\n\t\t\tif (geo.relative)\n\t\t\t{\n\t\t\t\tvar pgeo = this.graph.getCellGeometry(parent);\n\t\t\t\t\n\t\t\t\tif (pgeo != null)\n\t\t\t\t{\n\t\t\t\t\tresult.x += geo.x * pgeo.width;\n\t\t\t\t\tresult.y += geo.y * pgeo.height;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.x += geo.x;\n\t\t\t\tresult.y += geo.y;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif (result == null)\n\t{\n\t\tvar t = this.graph.view.getTranslate();\n\t\tresult = new mxPoint(-t.x, -t.y);\n\t}\n\t\n\treturn result;\n};\n\n__mxOutput.mxMorphing = typeof mxMorphing !== 'undefined' ? mxMorphing : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxImageBundle\n *\n * Maps from keys to base64 encoded images or file locations. All values must\n * be URLs or use the format data:image/format followed by a comma and the base64\n * encoded image data, eg. \"data:image/gif,XYZ\", where XYZ is the base64 encoded\n * image data.\n * \n * To add a new image bundle to an existing graph, the following code is used:\n * \n * (code)\n * var bundle = new mxImageBundle(alt);\n * bundle.putImage('myImage', 'data:image/gif,R0lGODlhEAAQAMIGAAAAAICAAICAgP' +\n *   '//AOzp2O3r2////////yH+FUNyZWF0ZWQgd2l0aCBUaGUgR0lNUAAh+QQBCgAHACwAAAAA' +\n *   'EAAQAAADTXi63AowynnAMDfjPUDlnAAJhmeBFxAEloliKltWmiYCQvfVr6lBPB1ggxN1hi' +\n *   'laSSASFQpIV5HJBDyHpqK2ejVRm2AAgZCdmCGO9CIBADs=', fallback);\n * bundle.putImage('mySvgImage', 'data:image/svg+xml,' + encodeURIComponent(\n *   '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\">' +\n *   '<linearGradient id=\"gradient\"><stop offset=\"10%\" stop-color=\"#F00\"/>' +\n *   '<stop offset=\"90%\" stop-color=\"#fcc\"/></linearGradient>' +\n *   '<rect fill=\"url(#gradient)\" width=\"100%\" height=\"100%\"/></svg>'), fallback);\n * graph.addImageBundle(bundle);\n * (end);\n * \n * Alt is an optional boolean (default is false) that specifies if the value\n * or the fallback should be returned in <getImage>.\n * \n * The image can then be referenced in any cell style using image=myImage.\n * If you are using mxOutline, you should use the same image bundles in the\n * graph that renders the outline.\n * \n * The keys for images are resolved in <mxGraph.postProcessCellStyle> and\n * turned into a data URI if the returned value has a short data URI format\n * as specified above.\n * \n * A typical value for the fallback is a MTHML link as defined in RFC 2557.\n * Note that this format requires a file to be dynamically created on the\n * server-side, or the page that contains the graph to be modified to contain\n * the resources, this can be done by adding a comment that contains the\n * resource in the HEAD section of the page after the title tag.\n * \n * This type of fallback mechanism should be used in IE6 and IE7. IE8 does\n * support data URIs, but the maximum size is limited to 32 KB, which means\n * all data URIs should be limited to 32 KB.\n */\nfunction mxImageBundle(alt)\n{\n\tthis.images = [];\n\tthis.alt = (alt != null) ? alt : false;\n};\n\n/**\n * Variable: images\n * \n * Maps from keys to images.\n */\nmxImageBundle.prototype.images = null;\n\n/**\n * Variable: alt\n * \n * Specifies if the fallback representation should be returned.\n */\nmxImageBundle.prototype.alt = null;\n\n/**\n * Function: putImage\n * \n * Adds the specified entry to the map. The entry is an object with a value and\n * fallback property as specified in the arguments.\n */\nmxImageBundle.prototype.putImage = function(key, value, fallback)\n{\n\tthis.images[key] = {value: value, fallback: fallback};\n};\n\n/**\n * Function: getImage\n * \n * Returns the value for the given key. This returns the value\n * or fallback, depending on <alt>. The fallback is returned if\n * <alt> is true, the value is returned otherwise.\n */\nmxImageBundle.prototype.getImage = function(key)\n{\n\tvar result = null;\n\t\n\tif (key != null)\n\t{\n\t\tvar img = this.images[key];\n\t\t\n\t\tif (img != null)\n\t\t{\n\t\t\tresult = (this.alt) ? img.fallback : img.value;\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n__mxOutput.mxImageBundle = typeof mxImageBundle !== 'undefined' ? mxImageBundle : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxImageExport\n * \n * Creates a new image export instance to be used with an export canvas. Here\n * is an example that uses this class to create an image via a backend using\n * <mxXmlExportCanvas>.\n * \n * (code)\n * var xmlDoc = mxUtils.createXmlDocument();\n * var root = xmlDoc.createElement('output');\n * xmlDoc.appendChild(root);\n * \n * var xmlCanvas = new mxXmlCanvas2D(root);\n * var imgExport = new mxImageExport();\n * imgExport.drawState(graph.getView().getState(graph.model.root), xmlCanvas);\n * \n * var bounds = graph.getGraphBounds();\n * var w = Math.ceil(bounds.x + bounds.width);\n * var h = Math.ceil(bounds.y + bounds.height);\n * \n * var xml = mxUtils.getXml(root);\n * new mxXmlRequest('export', 'format=png&w=' + w +\n * \t\t'&h=' + h + '&bg=#F9F7ED&xml=' + encodeURIComponent(xml))\n * \t\t.simulate(document, '_blank');\n * (end)\n * \n * Constructor: mxImageExport\n * \n * Constructs a new image export.\n */\nfunction mxImageExport() { };\n\n/**\n * Variable: includeOverlays\n * \n * Specifies if overlays should be included in the export. Default is false.\n */\nmxImageExport.prototype.includeOverlays = false;\n\n/**\n * Function: drawState\n * \n * Draws the given state and all its descendants to the given canvas.\n */\nmxImageExport.prototype.drawState = function(state, canvas)\n{\n\tif (state != null)\n\t{\n\t\tthis.visitStatesRecursive(state, canvas, mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.drawCellState.apply(this, arguments);\n\t\t}));\n\t\t\t\t\n\t\t// Paints the overlays\n\t\tif (this.includeOverlays)\n\t\t{\n\t\t\tthis.visitStatesRecursive(state, canvas, mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tthis.drawOverlays.apply(this, arguments);\n\t\t\t}));\n\t\t}\n\t}\n};\n\n/**\n * Function: visitStatesRecursive\n * \n * Visits the given state and all its descendants to the given canvas recursively.\n */\nmxImageExport.prototype.visitStatesRecursive = function(state, canvas, visitor)\n{\n\tif (state != null)\n\t{\n\t\tvisitor(state, canvas);\n\t\t\n\t\tvar graph = state.view.graph;\n\t\tvar childCount = graph.model.getChildCount(state.cell);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar childState = graph.view.getState(graph.model.getChildAt(state.cell, i));\n\t\t\tthis.visitStatesRecursive(childState, canvas, visitor);\n\t\t}\n\t}\n};\n\n/**\n * Function: getLinkForCellState\n * \n * Returns the link for the given cell state and canvas. This returns null.\n */\nmxImageExport.prototype.getLinkForCellState = function(state, canvas)\n{\n\treturn null;\n};\n\n/**\n * Function: drawCellState\n * \n * Draws the given state to the given canvas.\n */\nmxImageExport.prototype.drawCellState = function(state, canvas)\n{\n\t// Experimental feature\n\tvar link = this.getLinkForCellState(state, canvas);\n\t\n\tif (link != null)\n\t{\n\t\tcanvas.setLink(link);\n\t}\n\t\n\t// Paints the shape and text\n\tthis.drawShape(state, canvas);\n\tthis.drawText(state, canvas);\n\n\tif (link != null)\n\t{\n\t\tcanvas.setLink(null);\n\t}\n};\n\n/**\n * Function: drawShape\n * \n * Draws the shape of the given state.\n */\nmxImageExport.prototype.drawShape = function(state, canvas)\n{\n\tif (state.shape instanceof mxShape && state.shape.checkBounds())\n\t{\n\t\tcanvas.save();\n\t\t\n\t\tstate.shape.beforePaint(canvas);\n\t\tstate.shape.paint(canvas);\n\t\tstate.shape.afterPaint(canvas);\n\t\t\n\t\tcanvas.restore();\n\t}\n};\n\n/**\n * Function: drawText\n * \n * Draws the text of the given state.\n */\nmxImageExport.prototype.drawText = function(state, canvas)\n{\n\tif (state.text != null && state.text.checkBounds())\n\t{\n\t\tcanvas.save();\n\t\t\n\t\tstate.text.beforePaint(canvas);\n\t\tstate.text.paint(canvas);\n\t\tstate.text.afterPaint(canvas);\n\t\t\n\t\tcanvas.restore();\n\t}\n};\n\n/**\n * Function: drawOverlays\n * \n * Draws the overlays for the given state. This is called if <includeOverlays>\n * is true.\n */\nmxImageExport.prototype.drawOverlays = function(state, canvas)\n{\n\tif (state.overlays != null)\n\t{\n\t\tstate.overlays.visit(function(id, shape)\n\t\t{\n\t\t\tif (shape instanceof mxShape)\n\t\t\t{\n\t\t\t\tshape.paint(canvas);\n\t\t\t}\n\t\t});\n\t}\n};\n\n\n__mxOutput.mxImageExport = typeof mxImageExport !== 'undefined' ? mxImageExport : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxAbstractCanvas2D\n *\n * Base class for all canvases. A description of the public API is available in <mxXmlCanvas2D>.\n * All color values of <mxConstants.NONE> will be converted to null in the state.\n * \n * Constructor: mxAbstractCanvas2D\n *\n * Constructs a new abstract canvas.\n */\nfunction mxAbstractCanvas2D()\n{\n\t/**\n\t * Variable: converter\n\t * \n\t * Holds the <mxUrlConverter> to convert image URLs.\n\t */\n\tthis.converter = this.createUrlConverter();\n\t\n\tthis.reset();\n};\n\n/**\n * Variable: state\n * \n * Holds the current state.\n */\nmxAbstractCanvas2D.prototype.state = null;\n\n/**\n * Variable: states\n * \n * Stack of states.\n */\nmxAbstractCanvas2D.prototype.states = null;\n\n/**\n * Variable: path\n * \n * Holds the current path as an array.\n */\nmxAbstractCanvas2D.prototype.path = null;\n\n/**\n * Variable: rotateHtml\n * \n * Switch for rotation of HTML. Default is false.\n */\nmxAbstractCanvas2D.prototype.rotateHtml = true;\n\n/**\n * Variable: lastX\n * \n * Holds the last x coordinate.\n */\nmxAbstractCanvas2D.prototype.lastX = 0;\n\n/**\n * Variable: lastY\n * \n * Holds the last y coordinate.\n */\nmxAbstractCanvas2D.prototype.lastY = 0;\n\n/**\n * Variable: moveOp\n * \n * Contains the string used for moving in paths. Default is 'M'.\n */\nmxAbstractCanvas2D.prototype.moveOp = 'M';\n\n/**\n * Variable: lineOp\n * \n * Contains the string used for moving in paths. Default is 'L'.\n */\nmxAbstractCanvas2D.prototype.lineOp = 'L';\n\n/**\n * Variable: quadOp\n * \n * Contains the string used for quadratic paths. Default is 'Q'.\n */\nmxAbstractCanvas2D.prototype.quadOp = 'Q';\n\n/**\n * Variable: curveOp\n * \n * Contains the string used for bezier curves. Default is 'C'.\n */\nmxAbstractCanvas2D.prototype.curveOp = 'C';\n\n/**\n * Variable: closeOp\n * \n * Holds the operator for closing curves. Default is 'Z'.\n */\nmxAbstractCanvas2D.prototype.closeOp = 'Z';\n\n/**\n * Variable: pointerEvents\n * \n * Boolean value that specifies if events should be handled. Default is false.\n */\nmxAbstractCanvas2D.prototype.pointerEvents = false;\n\n/**\n * Function: createUrlConverter\n * \n * Create a new <mxUrlConverter> and returns it.\n */\nmxAbstractCanvas2D.prototype.createUrlConverter = function()\n{\n\treturn new mxUrlConverter();\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this canvas.\n */\nmxAbstractCanvas2D.prototype.reset = function()\n{\n\tthis.state = this.createState();\n\tthis.states = [];\n};\n\n/**\n * Function: createState\n * \n * Creates the state of the this canvas.\n */\nmxAbstractCanvas2D.prototype.createState = function()\n{\n\treturn {\n\t\tdx: 0,\n\t\tdy: 0,\n\t\tscale: 1,\n\t\talpha: 1,\n\t\tfillAlpha: 1,\n\t\tstrokeAlpha: 1,\n\t\tfillColor: null,\n\t\tgradientFillAlpha: 1,\n\t\tgradientColor: null,\n\t\tgradientAlpha: 1,\n\t\tgradientDirection: null,\n\t\tstrokeColor: null,\n\t\tstrokeWidth: 1,\n\t\tdashed: false,\n\t\tdashPattern: '3 3',\n\t\tfixDash: false,\n\t\tlineCap: 'flat',\n\t\tlineJoin: 'miter',\n\t\tmiterLimit: 10,\n\t\tfontColor: '#000000',\n\t\tfontBackgroundColor: null,\n\t\tfontBorderColor: null,\n\t\tfontSize: mxConstants.DEFAULT_FONTSIZE,\n\t\tfontFamily: mxConstants.DEFAULT_FONTFAMILY,\n\t\tfontStyle: 0,\n\t\tshadow: false,\n\t\tshadowColor: mxConstants.SHADOWCOLOR,\n\t\tshadowAlpha: mxConstants.SHADOW_OPACITY,\n\t\tshadowDx: mxConstants.SHADOW_OFFSET_X,\n\t\tshadowDy: mxConstants.SHADOW_OFFSET_Y,\n\t\trotation: 0,\n\t\trotationCx: 0,\n\t\trotationCy: 0\n\t};\n};\n\n/**\n * Function: format\n * \n * Rounds all numbers to integers.\n */\nmxAbstractCanvas2D.prototype.format = function(value)\n{\n\treturn Math.round(parseFloat(value));\n};\n\n/**\n * Function: addOp\n * \n * Adds the given operation to the path.\n */\nmxAbstractCanvas2D.prototype.addOp = function()\n{\n\tif (this.path != null)\n\t{\n\t\tthis.path.push(arguments[0]);\n\t\t\n\t\tif (arguments.length > 2)\n\t\t{\n\t\t\tvar s = this.state;\n\n\t\t\tfor (var i = 2; i < arguments.length; i += 2)\n\t\t\t{\n\t\t\t\tthis.lastX = arguments[i - 1];\n\t\t\t\tthis.lastY = arguments[i];\n\t\t\t\t\n\t\t\t\tthis.path.push(this.format((this.lastX + s.dx) * s.scale));\n\t\t\t\tthis.path.push(this.format((this.lastY + s.dy) * s.scale));\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: rotatePoint\n * \n * Rotates the given point and returns the result as an <mxPoint>.\n */\nmxAbstractCanvas2D.prototype.rotatePoint = function(x, y, theta, cx, cy)\n{\n\tvar rad = theta * (Math.PI / 180);\n\t\n\treturn mxUtils.getRotatedPoint(new mxPoint(x, y), Math.cos(rad),\n\t\tMath.sin(rad), new mxPoint(cx, cy));\n};\n\n/**\n * Function: save\n * \n * Saves the current state.\n */\nmxAbstractCanvas2D.prototype.save = function()\n{\n\tthis.states.push(this.state);\n\tthis.state = mxUtils.clone(this.state);\n};\n\n/**\n * Function: restore\n * \n * Restores the current state.\n */\nmxAbstractCanvas2D.prototype.restore = function()\n{\n\tif (this.states.length > 0)\n\t{\n\t\tthis.state = this.states.pop();\n\t}\n};\n\n/**\n * Function: setLink\n * \n * Sets the current link. Hook for subclassers.\n */\nmxAbstractCanvas2D.prototype.setLink = function(link)\n{\n\t// nop\n};\n\n/**\n * Function: scale\n * \n * Scales the current state.\n */\nmxAbstractCanvas2D.prototype.scale = function(value)\n{\n\tthis.state.scale *= value;\n\tthis.state.strokeWidth *= value;\n};\n\n/**\n * Function: translate\n * \n * Translates the current state.\n */\nmxAbstractCanvas2D.prototype.translate = function(dx, dy)\n{\n\tthis.state.dx += dx;\n\tthis.state.dy += dy;\n};\n\n/**\n * Function: rotate\n * \n * Rotates the current state.\n */\nmxAbstractCanvas2D.prototype.rotate = function(theta, flipH, flipV, cx, cy)\n{\n\t// nop\n};\n\n/**\n * Function: setAlpha\n * \n * Sets the current alpha.\n */\nmxAbstractCanvas2D.prototype.setAlpha = function(value)\n{\n\tthis.state.alpha = value;\n};\n\n/**\n * Function: setFillAlpha\n * \n * Sets the current solid fill alpha.\n */\nmxAbstractCanvas2D.prototype.setFillAlpha = function(value)\n{\n\tthis.state.fillAlpha = value;\n};\n\n/**\n * Function: setStrokeAlpha\n * \n * Sets the current stroke alpha.\n */\nmxAbstractCanvas2D.prototype.setStrokeAlpha = function(value)\n{\n\tthis.state.strokeAlpha = value;\n};\n\n/**\n * Function: setFillColor\n * \n * Sets the current fill color.\n */\nmxAbstractCanvas2D.prototype.setFillColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tthis.state.fillColor = value;\n\tthis.state.gradientColor = null;\n};\n\n/**\n * Function: setGradient\n * \n * Sets the current gradient.\n */\nmxAbstractCanvas2D.prototype.setGradient = function(color1, color2, x, y, w, h, direction, alpha1, alpha2)\n{\n\tvar s = this.state;\n\ts.fillColor = color1;\n\ts.gradientFillAlpha = (alpha1 != null) ? alpha1 : 1;\n\ts.gradientColor = color2;\n\ts.gradientAlpha = (alpha2 != null) ? alpha2 : 1;\n\ts.gradientDirection = direction;\n};\n\n/**\n * Function: setStrokeColor\n * \n * Sets the current stroke color.\n */\nmxAbstractCanvas2D.prototype.setStrokeColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tthis.state.strokeColor = value;\n};\n\n/**\n * Function: setStrokeWidth\n * \n * Sets the current stroke width.\n */\nmxAbstractCanvas2D.prototype.setStrokeWidth = function(value)\n{\n\tthis.state.strokeWidth = value;\n};\n\n/**\n * Function: setDashed\n * \n * Enables or disables dashed lines.\n */\nmxAbstractCanvas2D.prototype.setDashed = function(value, fixDash)\n{\n\tthis.state.dashed = value;\n\tthis.state.fixDash = fixDash;\n};\n\n/**\n * Function: setDashPattern\n * \n * Sets the current dash pattern.\n */\nmxAbstractCanvas2D.prototype.setDashPattern = function(value)\n{\n\tthis.state.dashPattern = value;\n};\n\n/**\n * Function: setLineCap\n * \n * Sets the current line cap.\n */\nmxAbstractCanvas2D.prototype.setLineCap = function(value)\n{\n\tthis.state.lineCap = value;\n};\n\n/**\n * Function: setLineJoin\n * \n * Sets the current line join.\n */\nmxAbstractCanvas2D.prototype.setLineJoin = function(value)\n{\n\tthis.state.lineJoin = value;\n};\n\n/**\n * Function: setMiterLimit\n * \n * Sets the current miter limit.\n */\nmxAbstractCanvas2D.prototype.setMiterLimit = function(value)\n{\n\tthis.state.miterLimit = value;\n};\n\n/**\n * Function: setFontColor\n * \n * Sets the current font color.\n */\nmxAbstractCanvas2D.prototype.setFontColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tthis.state.fontColor = value;\n};\n\n/**\n * Function: setFontBackgroundColor\n * \n * Sets the current font background color.\n */\nmxAbstractCanvas2D.prototype.setFontBackgroundColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tthis.state.fontBackgroundColor = value;\n};\n\n/**\n * Function: setFontBorderColor\n * \n * Sets the current font border color.\n */\nmxAbstractCanvas2D.prototype.setFontBorderColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tthis.state.fontBorderColor = value;\n};\n\n/**\n * Function: setFontSize\n * \n * Sets the current font size.\n */\nmxAbstractCanvas2D.prototype.setFontSize = function(value)\n{\n\tthis.state.fontSize = parseFloat(value);\n};\n\n/**\n * Function: setFontFamily\n * \n * Sets the current font family.\n */\nmxAbstractCanvas2D.prototype.setFontFamily = function(value)\n{\n\tthis.state.fontFamily = value;\n};\n\n/**\n * Function: setFontStyle\n * \n * Sets the current font style.\n */\nmxAbstractCanvas2D.prototype.setFontStyle = function(value)\n{\n\tif (value == null)\n\t{\n\t\tvalue = 0;\n\t}\n\t\n\tthis.state.fontStyle = value;\n};\n\n/**\n * Function: setShadow\n * \n * Enables or disables and configures the current shadow.\n */\nmxAbstractCanvas2D.prototype.setShadow = function(enabled)\n{\n\tthis.state.shadow = enabled;\n};\n\n/**\n * Function: setShadowColor\n * \n * Enables or disables and configures the current shadow.\n */\nmxAbstractCanvas2D.prototype.setShadowColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tthis.state.shadowColor = value;\n};\n\n/**\n * Function: setShadowAlpha\n * \n * Enables or disables and configures the current shadow.\n */\nmxAbstractCanvas2D.prototype.setShadowAlpha = function(value)\n{\n\tthis.state.shadowAlpha = value;\n};\n\n/**\n * Function: setShadowOffset\n * \n * Enables or disables and configures the current shadow.\n */\nmxAbstractCanvas2D.prototype.setShadowOffset = function(dx, dy)\n{\n\tthis.state.shadowDx = dx;\n\tthis.state.shadowDy = dy;\n};\n\n/**\n * Function: begin\n * \n * Starts a new path.\n */\nmxAbstractCanvas2D.prototype.begin = function()\n{\n\tthis.lastX = 0;\n\tthis.lastY = 0;\n\tthis.path = [];\n};\n\n/**\n * Function: moveTo\n * \n *  Moves the current path the given coordinates.\n */\nmxAbstractCanvas2D.prototype.moveTo = function(x, y)\n{\n\tthis.addOp(this.moveOp, x, y);\n};\n\n/**\n * Function: lineTo\n * \n * Draws a line to the given coordinates. Uses moveTo with the op argument.\n */\nmxAbstractCanvas2D.prototype.lineTo = function(x, y)\n{\n\tthis.addOp(this.lineOp, x, y);\n};\n\n/**\n * Function: quadTo\n * \n * Adds a quadratic curve to the current path.\n */\nmxAbstractCanvas2D.prototype.quadTo = function(x1, y1, x2, y2)\n{\n\tthis.addOp(this.quadOp, x1, y1, x2, y2);\n};\n\n/**\n * Function: curveTo\n * \n * Adds a bezier curve to the current path.\n */\nmxAbstractCanvas2D.prototype.curveTo = function(x1, y1, x2, y2, x3, y3)\n{\n\tthis.addOp(this.curveOp, x1, y1, x2, y2, x3, y3);\n};\n\n/**\n * Function: arcTo\n * \n * Adds the given arc to the current path. This is a synthetic operation that\n * is broken down into curves.\n */\nmxAbstractCanvas2D.prototype.arcTo = function(rx, ry, angle, largeArcFlag, sweepFlag, x, y)\n{\n\tvar curves = mxUtils.arcToCurves(this.lastX, this.lastY, rx, ry, angle, largeArcFlag, sweepFlag, x, y);\n\t\n\tif (curves != null)\n\t{\n\t\tfor (var i = 0; i < curves.length; i += 6) \n\t\t{\n\t\t\tthis.curveTo(curves[i], curves[i + 1], curves[i + 2],\n\t\t\t\tcurves[i + 3], curves[i + 4], curves[i + 5]);\n\t\t}\n\t}\n};\n\n/**\n * Function: close\n * \n * Closes the current path.\n */\nmxAbstractCanvas2D.prototype.close = function(x1, y1, x2, y2, x3, y3)\n{\n\tthis.addOp(this.closeOp);\n};\n\n/**\n * Function: end\n * \n * Empty implementation for backwards compatibility. This will be removed.\n */\nmxAbstractCanvas2D.prototype.end = function() { };\n\n__mxOutput.mxAbstractCanvas2D = typeof mxAbstractCanvas2D !== 'undefined' ? mxAbstractCanvas2D : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxXmlCanvas2D\n *\n * Base class for all canvases. The following methods make up the public\n * interface of the canvas 2D for all painting in mxGraph:\n * \n * - <save>, <restore>\n * - <scale>, <translate>, <rotate>\n * - <setAlpha>, <setFillAlpha>, <setStrokeAlpha>, <setFillColor>, <setGradient>,\n *   <setStrokeColor>, <setStrokeWidth>, <setDashed>, <setDashPattern>, <setLineCap>, \n *   <setLineJoin>, <setMiterLimit>\n * - <setFontColor>, <setFontBackgroundColor>, <setFontBorderColor>, <setFontSize>,\n *   <setFontFamily>, <setFontStyle>\n * - <setShadow>, <setShadowColor>, <setShadowAlpha>, <setShadowOffset>\n * - <rect>, <roundrect>, <ellipse>, <image>, <text>\n * - <begin>, <moveTo>, <lineTo>, <quadTo>, <curveTo>\n * - <stroke>, <fill>, <fillAndStroke>\n * \n * <mxAbstractCanvas2D.arcTo> is an additional method for drawing paths. This is\n * a synthetic method, meaning that it is turned into a sequence of curves by\n * default. Subclassers may add native support for arcs.\n * \n * Constructor: mxXmlCanvas2D\n *\n * Constructs a new abstract canvas.\n */\nfunction mxXmlCanvas2D(root)\n{\n\tmxAbstractCanvas2D.call(this);\n\n\t/**\n\t * Variable: root\n\t * \n\t * Reference to the container for the SVG content.\n\t */\n\tthis.root = root;\n\n\t// Writes default settings;\n\tthis.writeDefaults();\n};\n\n/**\n * Extends mxAbstractCanvas2D\n */\nmxUtils.extend(mxXmlCanvas2D, mxAbstractCanvas2D);\n\n/**\n * Variable: textEnabled\n * \n * Specifies if text output should be enabled. Default is true.\n */\nmxXmlCanvas2D.prototype.textEnabled = true;\n\n/**\n * Variable: compressed\n * \n * Specifies if the output should be compressed by removing redundant calls.\n * Default is true.\n */\nmxXmlCanvas2D.prototype.compressed = true;\n\n/**\n * Function: writeDefaults\n * \n * Writes the rendering defaults to <root>:\n */\nmxXmlCanvas2D.prototype.writeDefaults = function()\n{\n\tvar elem;\n\t\n\t// Writes font defaults\n\telem = this.createElement('fontfamily');\n\telem.setAttribute('family', mxConstants.DEFAULT_FONTFAMILY);\n\tthis.root.appendChild(elem);\n\t\n\telem = this.createElement('fontsize');\n\telem.setAttribute('size', mxConstants.DEFAULT_FONTSIZE);\n\tthis.root.appendChild(elem);\n\t\n\t// Writes shadow defaults\n\telem = this.createElement('shadowcolor');\n\telem.setAttribute('color', mxConstants.SHADOWCOLOR);\n\tthis.root.appendChild(elem);\n\t\n\telem = this.createElement('shadowalpha');\n\telem.setAttribute('alpha', mxConstants.SHADOW_OPACITY);\n\tthis.root.appendChild(elem);\n\t\n\telem = this.createElement('shadowoffset');\n\telem.setAttribute('dx', mxConstants.SHADOW_OFFSET_X);\n\telem.setAttribute('dy', mxConstants.SHADOW_OFFSET_Y);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: format\n * \n * Returns a formatted number with 2 decimal places.\n */\nmxXmlCanvas2D.prototype.format = function(value)\n{\n\treturn parseFloat(parseFloat(value).toFixed(2));\n};\n\n/**\n * Function: createElement\n * \n * Creates the given element using the owner document of <root>.\n */\nmxXmlCanvas2D.prototype.createElement = function(name)\n{\n\treturn this.root.ownerDocument.createElement(name);\n};\n\n/**\n * Function: save\n * \n * Saves the drawing state.\n */\nmxXmlCanvas2D.prototype.save = function()\n{\n\tif (this.compressed)\n\t{\n\t\tmxAbstractCanvas2D.prototype.save.apply(this, arguments);\n\t}\n\t\n\tthis.root.appendChild(this.createElement('save'));\n};\n\n/**\n * Function: restore\n * \n * Restores the drawing state.\n */\nmxXmlCanvas2D.prototype.restore = function()\n{\n\tif (this.compressed)\n\t{\n\t\tmxAbstractCanvas2D.prototype.restore.apply(this, arguments);\n\t}\n\t\n\tthis.root.appendChild(this.createElement('restore'));\n};\n\n/**\n * Function: scale\n * \n * Scales the output.\n * \n * Parameters:\n * \n * scale - Number that represents the scale where 1 is equal to 100%.\n */\nmxXmlCanvas2D.prototype.scale = function(value)\n{\n        var elem = this.createElement('scale');\n        elem.setAttribute('scale', value);\n        this.root.appendChild(elem);\n};\n\n/**\n * Function: translate\n * \n * Translates the output.\n * \n * Parameters:\n * \n * dx - Number that specifies the horizontal translation.\n * dy - Number that specifies the vertical translation.\n */\nmxXmlCanvas2D.prototype.translate = function(dx, dy)\n{\n\tvar elem = this.createElement('translate');\n\telem.setAttribute('dx', this.format(dx));\n\telem.setAttribute('dy', this.format(dy));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: rotate\n * \n * Rotates and/or flips the output around a given center. (Note: Due to\n * limitations in VML, the rotation cannot be concatenated.)\n * \n * Parameters:\n * \n * theta - Number that represents the angle of the rotation (in degrees).\n * flipH - Boolean indicating if the output should be flipped horizontally.\n * flipV - Boolean indicating if the output should be flipped vertically.\n * cx - Number that represents the x-coordinate of the rotation center.\n * cy - Number that represents the y-coordinate of the rotation center.\n */\nmxXmlCanvas2D.prototype.rotate = function(theta, flipH, flipV, cx, cy)\n{\n\tvar elem = this.createElement('rotate');\n\t\n\tif (theta != 0 || flipH || flipV)\n\t{\n\t\telem.setAttribute('theta', this.format(theta));\n\t\telem.setAttribute('flipH', (flipH) ? '1' : '0');\n\t\telem.setAttribute('flipV', (flipV) ? '1' : '0');\n\t\telem.setAttribute('cx', this.format(cx));\n\t\telem.setAttribute('cy', this.format(cy));\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setAlpha\n * \n * Sets the current alpha.\n * \n * Parameters:\n * \n * value - Number that represents the new alpha. Possible values are between\n * 1 (opaque) and 0 (transparent).\n */\nmxXmlCanvas2D.prototype.setAlpha = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.alpha == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setAlpha.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('alpha');\n\telem.setAttribute('alpha', this.format(value));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setFillAlpha\n * \n * Sets the current fill alpha.\n * \n * Parameters:\n * \n * value - Number that represents the new fill alpha. Possible values are between\n * 1 (opaque) and 0 (transparent).\n */\nmxXmlCanvas2D.prototype.setFillAlpha = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.fillAlpha == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setFillAlpha.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('fillalpha');\n\telem.setAttribute('alpha', this.format(value));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setStrokeAlpha\n * \n * Sets the current stroke alpha.\n * \n * Parameters:\n * \n * value - Number that represents the new stroke alpha. Possible values are between\n * 1 (opaque) and 0 (transparent).\n */\nmxXmlCanvas2D.prototype.setStrokeAlpha = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.strokeAlpha == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('strokealpha');\n\telem.setAttribute('alpha', this.format(value));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setFillColor\n * \n * Sets the current fill color.\n * \n * Parameters:\n * \n * value - Hexadecimal representation of the color or 'none'.\n */\nmxXmlCanvas2D.prototype.setFillColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tif (this.compressed)\n\t{\n\t\tif (this.state.fillColor == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setFillColor.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('fillcolor');\n\telem.setAttribute('color', (value != null) ? value : mxConstants.NONE);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setGradient\n * \n * Sets the gradient. Note that the coordinates may be ignored by some implementations.\n * \n * Parameters:\n * \n * color1 - Hexadecimal representation of the start color.\n * color2 - Hexadecimal representation of the end color.\n * x - X-coordinate of the gradient region.\n * y - y-coordinate of the gradient region.\n * w - Width of the gradient region.\n * h - Height of the gradient region.\n * direction - One of <mxConstants.DIRECTION_NORTH>, <mxConstants.DIRECTION_EAST>,\n * <mxConstants.DIRECTION_SOUTH> or <mxConstants.DIRECTION_WEST>.\n * alpha1 - Optional alpha of the start color. Default is 1. Possible values\n * are between 1 (opaque) and 0 (transparent).\n * alpha2 - Optional alpha of the end color. Default is 1. Possible values\n * are between 1 (opaque) and 0 (transparent).\n */\nmxXmlCanvas2D.prototype.setGradient = function(color1, color2, x, y, w, h, direction, alpha1, alpha2)\n{\n\tif (color1 != null && color2 != null)\n\t{\n\t\tmxAbstractCanvas2D.prototype.setGradient.apply(this, arguments);\n\t\t\n\t\tvar elem = this.createElement('gradient');\n\t\telem.setAttribute('c1', color1);\n\t\telem.setAttribute('c2', color2);\n\t\telem.setAttribute('x', this.format(x));\n\t\telem.setAttribute('y', this.format(y));\n\t\telem.setAttribute('w', this.format(w));\n\t\telem.setAttribute('h', this.format(h));\n\t\t\n\t\t// Default direction is south\n\t\tif (direction != null)\n\t\t{\n\t\t\telem.setAttribute('direction', direction);\n\t\t}\n\t\t\n\t\tif (alpha1 != null)\n\t\t{\n\t\t\telem.setAttribute('alpha1', alpha1);\n\t\t}\n\t\t\n\t\tif (alpha2 != null)\n\t\t{\n\t\t\telem.setAttribute('alpha2', alpha2);\n\t\t}\n\t\t\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setStrokeColor\n * \n * Sets the current stroke color.\n * \n * Parameters:\n * \n * value - Hexadecimal representation of the color or 'none'.\n */\nmxXmlCanvas2D.prototype.setStrokeColor = function(value)\n{\n\tif (value == mxConstants.NONE)\n\t{\n\t\tvalue = null;\n\t}\n\t\n\tif (this.compressed)\n\t{\n\t\tif (this.state.strokeColor == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setStrokeColor.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('strokecolor');\n\telem.setAttribute('color', (value != null) ? value : mxConstants.NONE);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setStrokeWidth\n * \n * Sets the current stroke width.\n * \n * Parameters:\n * \n * value - Numeric representation of the stroke width.\n */\nmxXmlCanvas2D.prototype.setStrokeWidth = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.strokeWidth == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setStrokeWidth.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('strokewidth');\n\telem.setAttribute('width', this.format(value));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setDashed\n * \n * Enables or disables dashed lines.\n * \n * Parameters:\n * \n * value - Boolean that specifies if dashed lines should be enabled.\n * value - Boolean that specifies if the stroke width should be ignored\n * for the dash pattern. Default is false.\n */\nmxXmlCanvas2D.prototype.setDashed = function(value, fixDash)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.dashed == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setDashed.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('dashed');\n\telem.setAttribute('dashed', (value) ? '1' : '0');\n\t\n\tif (fixDash != null)\n\t{\n\t\telem.setAttribute('fixDash', (fixDash) ? '1' : '0');\n\t}\n\t\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setDashPattern\n * \n * Sets the current dash pattern. Default is '3 3'.\n * \n * Parameters:\n * \n * value - String that represents the dash pattern, which is a sequence of\n * numbers defining the length of the dashes and the length of the spaces\n * between the dashes. The lengths are relative to the line width - a length\n * of 1 is equals to the line width.\n */\nmxXmlCanvas2D.prototype.setDashPattern = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.dashPattern == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setDashPattern.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('dashpattern');\n\telem.setAttribute('pattern', value);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setLineCap\n * \n * Sets the line cap. Default is 'flat' which corresponds to 'butt' in SVG.\n * \n * Parameters:\n * \n * value - String that represents the line cap. Possible values are flat, round\n * and square.\n */\nmxXmlCanvas2D.prototype.setLineCap = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.lineCap == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setLineCap.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('linecap');\n\telem.setAttribute('cap', value);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setLineJoin\n * \n * Sets the line join. Default is 'miter'.\n * \n * Parameters:\n * \n * value - String that represents the line join. Possible values are miter,\n * round and bevel.\n */\nmxXmlCanvas2D.prototype.setLineJoin = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.lineJoin == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setLineJoin.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('linejoin');\n\telem.setAttribute('join', value);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setMiterLimit\n * \n * Sets the miter limit. Default is 10.\n * \n * Parameters:\n * \n * value - Number that represents the miter limit.\n */\nmxXmlCanvas2D.prototype.setMiterLimit = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.miterLimit == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setMiterLimit.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('miterlimit');\n\telem.setAttribute('limit', value);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setFontColor\n * \n * Sets the current font color. Default is '#000000'.\n * \n * Parameters:\n * \n * value - Hexadecimal representation of the color or 'none'.\n */\nmxXmlCanvas2D.prototype.setFontColor = function(value)\n{\n\tif (this.textEnabled)\n\t{\n\t\tif (value == mxConstants.NONE)\n\t\t{\n\t\t\tvalue = null;\n\t\t}\n\t\t\n\t\tif (this.compressed)\n\t\t{\n\t\t\tif (this.state.fontColor == value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tmxAbstractCanvas2D.prototype.setFontColor.apply(this, arguments);\n\t\t}\n\t\t\n\t\tvar elem = this.createElement('fontcolor');\n\t\telem.setAttribute('color', (value != null) ? value : mxConstants.NONE);\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setFontBackgroundColor\n * \n * Sets the current font background color.\n * \n * Parameters:\n * \n * value - Hexadecimal representation of the color or 'none'.\n */\nmxXmlCanvas2D.prototype.setFontBackgroundColor = function(value)\n{\n\tif (this.textEnabled)\n\t{\n\t\tif (value == mxConstants.NONE)\n\t\t{\n\t\t\tvalue = null;\n\t\t}\n\t\t\n\t\tif (this.compressed)\n\t\t{\n\t\t\tif (this.state.fontBackgroundColor == value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tmxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this, arguments);\n\t\t}\n\n\t\tvar elem = this.createElement('fontbackgroundcolor');\n\t\telem.setAttribute('color', (value != null) ? value : mxConstants.NONE);\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setFontBorderColor\n * \n * Sets the current font border color.\n * \n * Parameters:\n * \n * value - Hexadecimal representation of the color or 'none'.\n */\nmxXmlCanvas2D.prototype.setFontBorderColor = function(value)\n{\n\tif (this.textEnabled)\n\t{\n\t\tif (value == mxConstants.NONE)\n\t\t{\n\t\t\tvalue = null;\n\t\t}\n\t\t\n\t\tif (this.compressed)\n\t\t{\n\t\t\tif (this.state.fontBorderColor == value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tmxAbstractCanvas2D.prototype.setFontBorderColor.apply(this, arguments);\n\t\t}\n\t\t\n\t\tvar elem = this.createElement('fontbordercolor');\n\t\telem.setAttribute('color', (value != null) ? value : mxConstants.NONE);\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setFontSize\n * \n * Sets the current font size. Default is <mxConstants.DEFAULT_FONTSIZE>.\n * \n * Parameters:\n * \n * value - Numeric representation of the font size.\n */\nmxXmlCanvas2D.prototype.setFontSize = function(value)\n{\n\tif (this.textEnabled)\n\t{\n\t\tif (this.compressed)\n\t\t{\n\t\t\tif (this.state.fontSize == value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tmxAbstractCanvas2D.prototype.setFontSize.apply(this, arguments);\n\t\t}\n\t\t\n\t\tvar elem = this.createElement('fontsize');\n\t\telem.setAttribute('size', value);\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setFontFamily\n * \n * Sets the current font family. Default is <mxConstants.DEFAULT_FONTFAMILY>.\n * \n * Parameters:\n * \n * value - String representation of the font family. This handles the same\n * values as the CSS font-family property.\n */\nmxXmlCanvas2D.prototype.setFontFamily = function(value)\n{\n\tif (this.textEnabled)\n\t{\n\t\tif (this.compressed)\n\t\t{\n\t\t\tif (this.state.fontFamily == value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tmxAbstractCanvas2D.prototype.setFontFamily.apply(this, arguments);\n\t\t}\n\t\t\n\t\tvar elem = this.createElement('fontfamily');\n\t\telem.setAttribute('family', value);\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setFontStyle\n * \n * Sets the current font style.\n * \n * Parameters:\n * \n * value - Numeric representation of the font family. This is the sum of the\n * font styles from <mxConstants>.\n */\nmxXmlCanvas2D.prototype.setFontStyle = function(value)\n{\n\tif (this.textEnabled)\n\t{\n\t\tif (value == null)\n\t\t{\n\t\t\tvalue = 0;\n\t\t}\n\t\t\n\t\tif (this.compressed)\n\t\t{\n\t\t\tif (this.state.fontStyle == value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tmxAbstractCanvas2D.prototype.setFontStyle.apply(this, arguments);\n\t\t}\n\t\t\n\t\tvar elem = this.createElement('fontstyle');\n\t\telem.setAttribute('style', value);\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: setShadow\n * \n * Enables or disables shadows.\n * \n * Parameters:\n * \n * value - Boolean that specifies if shadows should be enabled.\n */\nmxXmlCanvas2D.prototype.setShadow = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.shadow == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setShadow.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('shadow');\n\telem.setAttribute('enabled', (value) ? '1' : '0');\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setShadowColor\n * \n * Sets the current shadow color. Default is <mxConstants.SHADOWCOLOR>.\n * \n * Parameters:\n * \n * value - Hexadecimal representation of the color or 'none'.\n */\nmxXmlCanvas2D.prototype.setShadowColor = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (value == mxConstants.NONE)\n\t\t{\n\t\t\tvalue = null;\n\t\t}\n\t\t\n\t\tif (this.state.shadowColor == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setShadowColor.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('shadowcolor');\n\telem.setAttribute('color', (value != null) ? value : mxConstants.NONE);\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: setShadowAlpha\n * \n * Sets the current shadows alpha. Default is <mxConstants.SHADOW_OPACITY>.\n * \n * Parameters:\n * \n * value - Number that represents the new alpha. Possible values are between\n * 1 (opaque) and 0 (transparent).\n */\nmxXmlCanvas2D.prototype.setShadowAlpha = function(value)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.shadowAlpha == value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setShadowAlpha.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('shadowalpha');\n\telem.setAttribute('alpha', value);\n\tthis.root.appendChild(elem);\n\t\n};\n\n/**\n * Function: setShadowOffset\n * \n * Sets the current shadow offset.\n * \n * Parameters:\n * \n * dx - Number that represents the horizontal offset of the shadow.\n * dy - Number that represents the vertical offset of the shadow.\n */\nmxXmlCanvas2D.prototype.setShadowOffset = function(dx, dy)\n{\n\tif (this.compressed)\n\t{\n\t\tif (this.state.shadowDx == dx && this.state.shadowDy == dy)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxAbstractCanvas2D.prototype.setShadowOffset.apply(this, arguments);\n\t}\n\t\n\tvar elem = this.createElement('shadowoffset');\n\telem.setAttribute('dx', dx);\n\telem.setAttribute('dy', dy);\n\tthis.root.appendChild(elem);\n\t\n};\n\n/**\n * Function: rect\n * \n * Puts a rectangle into the drawing buffer.\n * \n * Parameters:\n * \n * x - Number that represents the x-coordinate of the rectangle.\n * y - Number that represents the y-coordinate of the rectangle.\n * w - Number that represents the width of the rectangle.\n * h - Number that represents the height of the rectangle.\n */\nmxXmlCanvas2D.prototype.rect = function(x, y, w, h)\n{\n\tvar elem = this.createElement('rect');\n\telem.setAttribute('x', this.format(x));\n\telem.setAttribute('y', this.format(y));\n\telem.setAttribute('w', this.format(w));\n\telem.setAttribute('h', this.format(h));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: roundrect\n * \n * Puts a rounded rectangle into the drawing buffer.\n * \n * Parameters:\n * \n * x - Number that represents the x-coordinate of the rectangle.\n * y - Number that represents the y-coordinate of the rectangle.\n * w - Number that represents the width of the rectangle.\n * h - Number that represents the height of the rectangle.\n * dx - Number that represents the horizontal rounding.\n * dy - Number that represents the vertical rounding.\n */\nmxXmlCanvas2D.prototype.roundrect = function(x, y, w, h, dx, dy)\n{\n\tvar elem = this.createElement('roundrect');\n\telem.setAttribute('x', this.format(x));\n\telem.setAttribute('y', this.format(y));\n\telem.setAttribute('w', this.format(w));\n\telem.setAttribute('h', this.format(h));\n\telem.setAttribute('dx', this.format(dx));\n\telem.setAttribute('dy', this.format(dy));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: ellipse\n * \n * Puts an ellipse into the drawing buffer.\n * \n * Parameters:\n * \n * x - Number that represents the x-coordinate of the ellipse.\n * y - Number that represents the y-coordinate of the ellipse.\n * w - Number that represents the width of the ellipse.\n * h - Number that represents the height of the ellipse.\n */\nmxXmlCanvas2D.prototype.ellipse = function(x, y, w, h)\n{\n\tvar elem = this.createElement('ellipse');\n\telem.setAttribute('x', this.format(x));\n\telem.setAttribute('y', this.format(y));\n\telem.setAttribute('w', this.format(w));\n\telem.setAttribute('h', this.format(h));\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: image\n * \n * Paints an image.\n * \n * Parameters:\n * \n * x - Number that represents the x-coordinate of the image.\n * y - Number that represents the y-coordinate of the image.\n * w - Number that represents the width of the image.\n * h - Number that represents the height of the image.\n * src - String that specifies the URL of the image.\n * aspect - Boolean indicating if the aspect of the image should be preserved.\n * flipH - Boolean indicating if the image should be flipped horizontally.\n * flipV - Boolean indicating if the image should be flipped vertically.\n */\nmxXmlCanvas2D.prototype.image = function(x, y, w, h, src, aspect, flipH, flipV)\n{\n\tsrc = this.converter.convert(src);\n\t\n\t// LATER: Add option for embedding images as base64.\n\tvar elem = this.createElement('image');\n\telem.setAttribute('x', this.format(x));\n\telem.setAttribute('y', this.format(y));\n\telem.setAttribute('w', this.format(w));\n\telem.setAttribute('h', this.format(h));\n\telem.setAttribute('src', src);\n\telem.setAttribute('aspect', (aspect) ? '1' : '0');\n\telem.setAttribute('flipH', (flipH) ? '1' : '0');\n\telem.setAttribute('flipV', (flipV) ? '1' : '0');\n\tthis.root.appendChild(elem);\n};\n\n/**\n * Function: begin\n * \n * Starts a new path and puts it into the drawing buffer.\n */\nmxXmlCanvas2D.prototype.begin = function()\n{\n\tthis.root.appendChild(this.createElement('begin'));\n\tthis.lastX = 0;\n\tthis.lastY = 0;\n};\n\n/**\n * Function: moveTo\n * \n * Moves the current path the given point.\n * \n * Parameters:\n * \n * x - Number that represents the x-coordinate of the point.\n * y - Number that represents the y-coordinate of the point.\n */\nmxXmlCanvas2D.prototype.moveTo = function(x, y)\n{\n\tvar elem = this.createElement('move');\n\telem.setAttribute('x', this.format(x));\n\telem.setAttribute('y', this.format(y));\n\tthis.root.appendChild(elem);\n\tthis.lastX = x;\n\tthis.lastY = y;\n};\n\n/**\n * Function: lineTo\n * \n * Draws a line to the given coordinates.\n * \n * Parameters:\n * \n * x - Number that represents the x-coordinate of the endpoint.\n * y - Number that represents the y-coordinate of the endpoint.\n */\nmxXmlCanvas2D.prototype.lineTo = function(x, y)\n{\n\tvar elem = this.createElement('line');\n\telem.setAttribute('x', this.format(x));\n\telem.setAttribute('y', this.format(y));\n\tthis.root.appendChild(elem);\n\tthis.lastX = x;\n\tthis.lastY = y;\n};\n\n/**\n * Function: quadTo\n * \n * Adds a quadratic curve to the current path.\n * \n * Parameters:\n * \n * x1 - Number that represents the x-coordinate of the control point.\n * y1 - Number that represents the y-coordinate of the control point.\n * x2 - Number that represents the x-coordinate of the endpoint.\n * y2 - Number that represents the y-coordinate of the endpoint.\n */\nmxXmlCanvas2D.prototype.quadTo = function(x1, y1, x2, y2)\n{\n\tvar elem = this.createElement('quad');\n\telem.setAttribute('x1', this.format(x1));\n\telem.setAttribute('y1', this.format(y1));\n\telem.setAttribute('x2', this.format(x2));\n\telem.setAttribute('y2', this.format(y2));\n\tthis.root.appendChild(elem);\n\tthis.lastX = x2;\n\tthis.lastY = y2;\n};\n\n/**\n * Function: curveTo\n * \n * Adds a bezier curve to the current path.\n * \n * Parameters:\n * \n * x1 - Number that represents the x-coordinate of the first control point.\n * y1 - Number that represents the y-coordinate of the first control point.\n * x2 - Number that represents the x-coordinate of the second control point.\n * y2 - Number that represents the y-coordinate of the second control point.\n * x3 - Number that represents the x-coordinate of the endpoint.\n * y3 - Number that represents the y-coordinate of the endpoint.\n */\nmxXmlCanvas2D.prototype.curveTo = function(x1, y1, x2, y2, x3, y3)\n{\n\tvar elem = this.createElement('curve');\n\telem.setAttribute('x1', this.format(x1));\n\telem.setAttribute('y1', this.format(y1));\n\telem.setAttribute('x2', this.format(x2));\n\telem.setAttribute('y2', this.format(y2));\n\telem.setAttribute('x3', this.format(x3));\n\telem.setAttribute('y3', this.format(y3));\n\tthis.root.appendChild(elem);\n\tthis.lastX = x3;\n\tthis.lastY = y3;\n};\n\n/**\n * Function: close\n * \n * Closes the current path.\n */\nmxXmlCanvas2D.prototype.close = function()\n{\n\tthis.root.appendChild(this.createElement('close'));\n};\n\n/**\n * Function: text\n * \n * Paints the given text. Possible values for format are empty string for\n * plain text and html for HTML markup. Background and border color as well\n * as clipping is not available in plain text labels for VML. HTML labels\n * are not available as part of shapes with no foreignObject support in SVG\n * (eg. IE9, IE10).\n * \n * Parameters:\n * \n * x - Number that represents the x-coordinate of the text.\n * y - Number that represents the y-coordinate of the text.\n * w - Number that represents the available width for the text or 0 for automatic width.\n * h - Number that represents the available height for the text or 0 for automatic height.\n * str - String that specifies the text to be painted.\n * align - String that represents the horizontal alignment.\n * valign - String that represents the vertical alignment.\n * wrap - Boolean that specifies if word-wrapping is enabled. Requires w > 0.\n * format - Empty string for plain text or 'html' for HTML markup.\n * overflow - Specifies the overflow behaviour of the label. Requires w > 0 and/or h > 0.\n * clip - Boolean that specifies if the label should be clipped. Requires w > 0 and/or h > 0.\n * rotation - Number that specifies the angle of the rotation around the anchor point of the text.\n * dir - Optional string that specifies the text direction. Possible values are rtl and lrt.\n */\nmxXmlCanvas2D.prototype.text = function(x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation, dir)\n{\n\tif (this.textEnabled && str != null)\n\t{\n\t\tif (mxUtils.isNode(str))\n\t\t{\n\t\t\tstr = mxUtils.getOuterHtml(str);\n\t\t}\n\t\t\n\t\tvar elem = this.createElement('text');\n\t\telem.setAttribute('x', this.format(x));\n\t\telem.setAttribute('y', this.format(y));\n\t\telem.setAttribute('w', this.format(w));\n\t\telem.setAttribute('h', this.format(h));\n\t\telem.setAttribute('str', str);\n\t\t\n\t\tif (align != null)\n\t\t{\n\t\t\telem.setAttribute('align', align);\n\t\t}\n\t\t\n\t\tif (valign != null)\n\t\t{\n\t\t\telem.setAttribute('valign', valign);\n\t\t}\n\t\t\n\t\telem.setAttribute('wrap', (wrap) ? '1' : '0');\n\t\t\n\t\tif (format == null)\n\t\t{\n\t\t\tformat = '';\n\t\t}\n\t\t\n\t\telem.setAttribute('format', format);\n\t\t\n\t\tif (overflow != null)\n\t\t{\n\t\t\telem.setAttribute('overflow', overflow);\n\t\t}\n\t\t\n\t\tif (clip != null)\n\t\t{\n\t\t\telem.setAttribute('clip', (clip) ? '1' : '0');\n\t\t}\n\t\t\n\t\tif (rotation != null)\n\t\t{\n\t\t\telem.setAttribute('rotation', rotation);\n\t\t}\n\t\t\n\t\tif (dir != null)\n\t\t{\n\t\t\telem.setAttribute('dir', dir);\n\t\t}\n\t\t\n\t\tthis.root.appendChild(elem);\n\t}\n};\n\n/**\n * Function: stroke\n * \n * Paints the outline of the current drawing buffer.\n */\nmxXmlCanvas2D.prototype.stroke = function()\n{\n\tthis.root.appendChild(this.createElement('stroke'));\n};\n\n/**\n * Function: fill\n * \n * Fills the current drawing buffer.\n */\nmxXmlCanvas2D.prototype.fill = function()\n{\n\tthis.root.appendChild(this.createElement('fill'));\n};\n\n/**\n * Function: fillAndStroke\n * \n * Fills the current drawing buffer and its outline.\n */\nmxXmlCanvas2D.prototype.fillAndStroke = function()\n{\n\tthis.root.appendChild(this.createElement('fillstroke'));\n};\n\n__mxOutput.mxXmlCanvas2D = typeof mxXmlCanvas2D !== 'undefined' ? mxXmlCanvas2D : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxSvgCanvas2D\n *\n * Extends <mxAbstractCanvas2D> to implement a canvas for SVG. This canvas writes all\n * calls as SVG output to the given SVG root node.\n * \n * (code)\n * var svgDoc = mxUtils.createXmlDocument();\n * var root = (svgDoc.createElementNS != null) ?\n * \t\tsvgDoc.createElementNS(mxConstants.NS_SVG, 'svg') : svgDoc.createElement('svg');\n * \n * if (svgDoc.createElementNS == null)\n * {\n *   root.setAttribute('xmlns', mxConstants.NS_SVG);\n *   root.setAttribute('xmlns:xlink', mxConstants.NS_XLINK);\n * }\n * else\n * {\n *   root.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', mxConstants.NS_XLINK);\n * }\n * \n * var bounds = graph.getGraphBounds();\n * root.setAttribute('width', (bounds.x + bounds.width + 4) + 'px');\n * root.setAttribute('height', (bounds.y + bounds.height + 4) + 'px');\n * root.setAttribute('version', '1.1');\n * \n * svgDoc.appendChild(root);\n * \n * var svgCanvas = new mxSvgCanvas2D(root);\n * (end)\n * \n * A description of the public API is available in <mxXmlCanvas2D>.\n * \n * To disable anti-aliasing in the output, use the following code.\n * \n * (code)\n * graph.view.canvas.ownerSVGElement.setAttribute('shape-rendering', 'crispEdges');\n * (end)\n * \n * Or set the respective attribute in the SVG element directly.\n * \n * Constructor: mxSvgCanvas2D\n *\n * Constructs a new SVG canvas.\n * \n * Parameters:\n * \n * root - SVG container for the output.\n * styleEnabled - Optional boolean that specifies if a style section should be\n * added. The style section sets the default font-size, font-family and\n * stroke-miterlimit globally. Default is false.\n */\nfunction mxSvgCanvas2D(root, styleEnabled)\n{\n\tmxAbstractCanvas2D.call(this);\n\n\t/**\n\t * Variable: root\n\t * \n\t * Reference to the container for the SVG content.\n\t */\n\tthis.root = root;\n\n\t/**\n\t * Variable: gradients\n\t * \n\t * Local cache of gradients for quick lookups.\n\t */\n\tthis.gradients = [];\n\n\t/**\n\t * Variable: defs\n\t * \n\t * Reference to the defs section of the SVG document. Only for export.\n\t */\n\tthis.defs = null;\n\t\n\t/**\n\t * Variable: styleEnabled\n\t * \n\t * Stores the value of styleEnabled passed to the constructor.\n\t */\n\tthis.styleEnabled = (styleEnabled != null) ? styleEnabled : false;\n\t\n\tvar svg = null;\n\t\n\t// Adds optional defs section for export\n\tif (root.ownerDocument != document)\n\t{\n\t\tvar node = root;\n\n\t\t// Finds owner SVG element in XML DOM\n\t\twhile (node != null && node.nodeName != 'svg')\n\t\t{\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\t\n\t\tsvg = node;\n\t}\n\n\tif (svg != null)\n\t{\n\t\t// Tries to get existing defs section\n\t\tvar tmp = svg.getElementsByTagName('defs');\n\t\t\n\t\tif (tmp.length > 0)\n\t\t{\n\t\t\tthis.defs = svg.getElementsByTagName('defs')[0];\n\t\t}\n\t\t\n\t\t// Adds defs section if none exists\n\t\tif (this.defs == null)\n\t\t{\n\t\t\tthis.defs = this.createElement('defs');\n\t\t\t\n\t\t\tif (svg.firstChild != null)\n\t\t\t{\n\t\t\t\tsvg.insertBefore(this.defs, svg.firstChild);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsvg.appendChild(this.defs);\n\t\t\t}\n\t\t}\n\n\t\t// Adds stylesheet\n\t\tif (this.styleEnabled)\n\t\t{\n\t\t\tthis.defs.appendChild(this.createStyle());\n\t\t}\n\t}\n};\n\n/**\n * Extends mxAbstractCanvas2D\n */\nmxUtils.extend(mxSvgCanvas2D, mxAbstractCanvas2D);\n\n/**\n * Capability check for DOM parser and checks if base tag is used.\n */\n(function()\n{\n\tmxSvgCanvas2D.prototype.useDomParser = !mxClient.IS_IE && typeof DOMParser === 'function' && typeof XMLSerializer === 'function';\n\t\n\tif (mxSvgCanvas2D.prototype.useDomParser)\n\t{\n\t\t// Checks using a generic test text if the parsing actually works. This is a workaround\n\t\t// for older browsers where the capability check returns true but the parsing fails.\n\t\ttry\n\t\t{\n\t\t\tvar doc = new DOMParser().parseFromString('test text', 'text/html');\n\t\t\tmxSvgCanvas2D.prototype.useDomParser = doc != null;\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tmxSvgCanvas2D.prototype.useDomParser = false;\n\t\t}\n\t}\n\t\n\t// Activates workaround for gradient ID resolution if base tag is used.\n\tmxSvgCanvas2D.prototype.useAbsoluteIds = !mxClient.IS_CHROMEAPP && !mxClient.IS_IE && !mxClient.IS_IE11 &&\n\t\t!mxClient.IS_EDGE && document.getElementsByTagName('base').length > 0;\n})();\n\n/**\n * Variable: path\n * \n * Holds the current DOM node.\n */\nmxSvgCanvas2D.prototype.node = null;\n\n/**\n * Variable: matchHtmlAlignment\n * \n * Specifies if plain text output should match the vertical HTML alignment.\n * Defaul is true.\n */\nmxSvgCanvas2D.prototype.matchHtmlAlignment = true;\n\n/**\n * Variable: textEnabled\n * \n * Specifies if text output should be enabled. Default is true.\n */\nmxSvgCanvas2D.prototype.textEnabled = true;\n\n/**\n * Variable: foEnabled\n * \n * Specifies if use of foreignObject for HTML markup is allowed. Default is true.\n */\nmxSvgCanvas2D.prototype.foEnabled = true;\n\n/**\n * Variable: foAltText\n * \n * Specifies the fallback text for unsupported foreignObjects in exported\n * documents. Default is '[Object]'. If this is set to null then no fallback\n * text is added to the exported document.\n */\nmxSvgCanvas2D.prototype.foAltText = '[Object]';\n\n/**\n * Variable: foOffset\n * \n * Offset to be used for foreignObjects.\n */\nmxSvgCanvas2D.prototype.foOffset = 0;\n\n/**\n * Variable: textOffset\n * \n * Offset to be used for text elements.\n */\nmxSvgCanvas2D.prototype.textOffset = 0;\n\n/**\n * Variable: imageOffset\n * \n * Offset to be used for image elements.\n */\nmxSvgCanvas2D.prototype.imageOffset = 0;\n\n/**\n * Variable: strokeTolerance\n * \n * Adds transparent paths for strokes.\n */\nmxSvgCanvas2D.prototype.strokeTolerance = 0;\n\n/**\n * Variable: minStrokeWidth\n * \n * Minimum stroke width for output.\n */\nmxSvgCanvas2D.prototype.minStrokeWidth = 1;\n\n/**\n * Variable: refCount\n * \n * Local counter for references in SVG export.\n */\nmxSvgCanvas2D.prototype.refCount = 0;\n\n/**\n * Variable: lineHeightCorrection\n * \n * Correction factor for <mxConstants.LINE_HEIGHT> in HTML output. Default is 1.\n */\nmxSvgCanvas2D.prototype.lineHeightCorrection = 1;\n\n/**\n * Variable: pointerEventsValue\n * \n * Default value for active pointer events. Default is all.\n */\nmxSvgCanvas2D.prototype.pointerEventsValue = 'all';\n\n/**\n * Variable: fontMetricsPadding\n * \n * Padding to be added for text that is not wrapped to account for differences\n * in font metrics on different platforms in pixels. Default is 10.\n */\nmxSvgCanvas2D.prototype.fontMetricsPadding = 10;\n\n/**\n * Variable: cacheOffsetSize\n * \n * Specifies if offsetWidth and offsetHeight should be cached. Default is true.\n * This is used to speed up repaint of text in <updateText>.\n */\nmxSvgCanvas2D.prototype.cacheOffsetSize = true;\n\n/**\n * Function: format\n * \n * Rounds all numbers to 2 decimal points.\n */\nmxSvgCanvas2D.prototype.format = function(value)\n{\n\treturn parseFloat(parseFloat(value).toFixed(2));\n};\n\n/**\n * Function: getBaseUrl\n * \n * Returns the URL of the page without the hash part. This needs to use href to\n * include any search part with no params (ie question mark alone). This is a\n * workaround for the fact that window.location.search is empty if there is\n * no search string behind the question mark.\n */\nmxSvgCanvas2D.prototype.getBaseUrl = function()\n{\n\tvar href = window.location.href;\n\tvar hash = href.lastIndexOf('#');\n\t\n\tif (hash > 0)\n\t{\n\t\thref = href.substring(0, hash);\n\t}\n\t\n\treturn href;\n};\n\n/**\n * Function: reset\n * \n * Returns any offsets for rendering pixels.\n */\nmxSvgCanvas2D.prototype.reset = function()\n{\n\tmxAbstractCanvas2D.prototype.reset.apply(this, arguments);\n\tthis.gradients = [];\n};\n\n/**\n * Function: createStyle\n * \n * Creates the optional style section.\n */\nmxSvgCanvas2D.prototype.createStyle = function(x)\n{\n\tvar style = this.createElement('style');\n\tstyle.setAttribute('type', 'text/css');\n\tmxUtils.write(style, 'svg{font-family:' + mxConstants.DEFAULT_FONTFAMILY +\n\t\t\t';font-size:' + mxConstants.DEFAULT_FONTSIZE +\n\t\t\t';fill:none;stroke-miterlimit:10}');\n\t\n\treturn style;\n};\n\n/**\n * Function: createElement\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.createElement = function(tagName, namespace)\n{\n\tif (this.root.ownerDocument.createElementNS != null)\n\t{\n\t\treturn this.root.ownerDocument.createElementNS(namespace || mxConstants.NS_SVG, tagName);\n\t}\n\telse\n\t{\n\t\tvar elt = this.root.ownerDocument.createElement(tagName);\n\t\t\n\t\tif (namespace != null)\n\t\t{\n\t\t\telt.setAttribute('xmlns', namespace);\n\t\t}\n\t\t\n\t\treturn elt;\n\t}\n};\n\n/**\n * Function: getAlternateText\n * \n * Returns the alternate text string for the given foreignObject.\n */\nmxSvgCanvas2D.prototype.getAlternateText = function(fo, x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation)\n{\n\treturn (str != null) ? this.foAltText : null;\n};\n\n/**\n * Function: getAlternateContent\n * \n * Returns the alternate content for the given foreignObject.\n */\nmxSvgCanvas2D.prototype.createAlternateContent = function(fo, x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation)\n{\n\tvar text = this.getAlternateText(fo, x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation);\n\tvar s = this.state;\n\n\tif (text != null && s.fontSize > 0)\n\t{\n\t\tvar dy = (valign == mxConstants.ALIGN_TOP) ? 1 :\n\t\t\t(valign == mxConstants.ALIGN_BOTTOM) ? 0 : 0.3;\n\t\tvar anchor = (align == mxConstants.ALIGN_RIGHT) ? 'end' :\n\t\t\t(align == mxConstants.ALIGN_LEFT) ? 'start' :\n\t\t\t'middle';\n\t\n\t\tvar alt = this.createElement('text');\n\t\talt.setAttribute('x', Math.round(x + s.dx));\n\t\talt.setAttribute('y', Math.round(y + s.dy + dy * s.fontSize));\n\t\talt.setAttribute('fill', s.fontColor || 'black');\n\t\talt.setAttribute('font-family', s.fontFamily);\n\t\talt.setAttribute('font-size', Math.round(s.fontSize) + 'px');\n\n\t\t// Text-anchor start is default in SVG\n\t\tif (anchor != 'start')\n\t\t{\n\t\t\talt.setAttribute('text-anchor', anchor);\n\t\t}\n\t\t\n\t\tif ((s.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t\t{\n\t\t\talt.setAttribute('font-weight', 'bold');\n\t\t}\n\t\t\n\t\tif ((s.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t\t{\n\t\t\talt.setAttribute('font-style', 'italic');\n\t\t}\n\t\t\n\t\tvar txtDecor = [];\n\t\t\n\t\tif ((s.fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t\t{\n\t\t\ttxtDecor.push('underline');\n\t\t}\n\t\t\n\t\tif ((s.fontStyle & mxConstants.FONT_STRIKETHROUGH) == mxConstants.FONT_STRIKETHROUGH)\n\t\t{\n\t\t\ttxtDecor.push('line-through');\n\t\t}\n\t\t\n\t\tif (txtDecor.length > 0)\n\t\t{\n\t\t\talt.setAttribute('text-decoration', txtDecor.join(' '));\n\t\t}\n\t\t\n\t\tmxUtils.write(alt, text);\n\t\t\n\t\treturn alt;\n\t}\n\telse\n\t{\n\t\treturn null;\n\t}\n};\n\n/**\n * Function: createGradientId\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.createGradientId = function(start, end, alpha1, alpha2, direction)\n{\n\t// Removes illegal characters from gradient ID\n\tif (start.charAt(0) == '#')\n\t{\n\t\tstart = start.substring(1);\n\t}\n\t\n\tif (end.charAt(0) == '#')\n\t{\n\t\tend = end.substring(1);\n\t}\n\t\n\t// Workaround for gradient IDs not working in Safari 5 / Chrome 6\n\t// if they contain uppercase characters\n\tstart = start.toLowerCase() + '-' + alpha1;\n\tend = end.toLowerCase() + '-' + alpha2;\n\n\t// Wrong gradient directions possible?\n\tvar dir = null;\n\t\n\tif (direction == null || direction == mxConstants.DIRECTION_SOUTH)\n\t{\n\t\tdir = 's';\n\t}\n\telse if (direction == mxConstants.DIRECTION_EAST)\n\t{\n\t\tdir = 'e';\n\t}\n\telse\n\t{\n\t\tvar tmp = start;\n\t\tstart = end;\n\t\tend = tmp;\n\t\t\n\t\tif (direction == mxConstants.DIRECTION_NORTH)\n\t\t{\n\t\t\tdir = 's';\n\t\t}\n\t\telse if (direction == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\tdir = 'e';\n\t\t}\n\t}\n\t\n\treturn 'mx-gradient-' + start + '-' + end + '-' + dir;\n};\n\n/**\n * Function: getSvgGradient\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.getSvgGradient = function(start, end, alpha1, alpha2, direction)\n{\n\tvar id = this.createGradientId(start, end, alpha1, alpha2, direction);\n\tvar gradient = this.gradients[id];\n\t\n\tif (gradient == null)\n\t{\n\t\tvar svg = this.root.ownerSVGElement;\n\n\t\tvar counter = 0;\n\t\tvar tmpId = id + '-' + counter;\n\n\t\tif (svg != null)\n\t\t{\n\t\t\tgradient = svg.ownerDocument.getElementById(tmpId);\n\t\t\t\n\t\t\twhile (gradient != null && gradient.ownerSVGElement != svg)\n\t\t\t{\n\t\t\t\ttmpId = id + '-' + counter++;\n\t\t\t\tgradient = svg.ownerDocument.getElementById(tmpId);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Uses shorter IDs for export\n\t\t\ttmpId = 'id' + (++this.refCount);\n\t\t}\n\t\t\n\t\tif (gradient == null)\n\t\t{\n\t\t\tgradient = this.createSvgGradient(start, end, alpha1, alpha2, direction);\n\t\t\tgradient.setAttribute('id', tmpId);\n\t\t\t\n\t\t\tif (this.defs != null)\n\t\t\t{\n\t\t\t\tthis.defs.appendChild(gradient);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsvg.appendChild(gradient);\n\t\t\t}\n\t\t}\n\n\t\tthis.gradients[id] = gradient;\n\t}\n\n\treturn gradient.getAttribute('id');\n};\n\n/**\n * Function: createSvgGradient\n * \n * Creates the given SVG gradient.\n */\nmxSvgCanvas2D.prototype.createSvgGradient = function(start, end, alpha1, alpha2, direction)\n{\n\tvar gradient = this.createElement('linearGradient');\n\tgradient.setAttribute('x1', '0%');\n\tgradient.setAttribute('y1', '0%');\n\tgradient.setAttribute('x2', '0%');\n\tgradient.setAttribute('y2', '0%');\n\t\n\tif (direction == null || direction == mxConstants.DIRECTION_SOUTH)\n\t{\n\t\tgradient.setAttribute('y2', '100%');\n\t}\n\telse if (direction == mxConstants.DIRECTION_EAST)\n\t{\n\t\tgradient.setAttribute('x2', '100%');\n\t}\n\telse if (direction == mxConstants.DIRECTION_NORTH)\n\t{\n\t\tgradient.setAttribute('y1', '100%');\n\t}\n\telse if (direction == mxConstants.DIRECTION_WEST)\n\t{\n\t\tgradient.setAttribute('x1', '100%');\n\t}\n\t\n\tvar op = (alpha1 < 1) ? ';stop-opacity:' + alpha1 : '';\n\t\n\tvar stop = this.createElement('stop');\n\tstop.setAttribute('offset', '0%');\n\tstop.setAttribute('style', 'stop-color:' + start + op);\n\tgradient.appendChild(stop);\n\t\n\top = (alpha2 < 1) ? ';stop-opacity:' + alpha2 : '';\n\t\n\tstop = this.createElement('stop');\n\tstop.setAttribute('offset', '100%');\n\tstop.setAttribute('style', 'stop-color:' + end + op);\n\tgradient.appendChild(stop);\n\t\n\treturn gradient;\n};\n\n/**\n * Function: addNode\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.addNode = function(filled, stroked)\n{\n\tvar node = this.node;\n\tvar s = this.state;\n\n\tif (node != null)\n\t{\n\t\tif (node.nodeName == 'path')\n\t\t{\n\t\t\t// Checks if the path is not empty\n\t\t\tif (this.path != null && this.path.length > 0)\n\t\t\t{\n\t\t\t\tnode.setAttribute('d', this.path.join(' '));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (filled && s.fillColor != null)\n\t\t{\n\t\t\tthis.updateFill();\n\t\t}\n\t\telse if (!this.styleEnabled)\n\t\t{\n\t\t\t// Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=814952\n\t\t\tif (node.nodeName == 'ellipse' && mxClient.IS_FF)\n\t\t\t{\n\t\t\t\tnode.setAttribute('fill', 'transparent');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnode.setAttribute('fill', 'none');\n\t\t\t}\n\t\t\t\n\t\t\t// Sets the actual filled state for stroke tolerance\n\t\t\tfilled = false;\n\t\t}\n\t\t\n\t\tif (stroked && s.strokeColor != null)\n\t\t{\n\t\t\tthis.updateStroke();\n\t\t}\n\t\telse if (!this.styleEnabled)\n\t\t{\n\t\t\tnode.setAttribute('stroke', 'none');\n\t\t}\n\t\t\n\t\tif (s.transform != null && s.transform.length > 0)\n\t\t{\n\t\t\tnode.setAttribute('transform', s.transform);\n\t\t}\n\t\t\n\t\tif (s.shadow)\n\t\t{\n\t\t\tthis.root.appendChild(this.createShadow(node));\n\t\t}\n\t\n\t\t// Adds stroke tolerance\n\t\tif (this.strokeTolerance > 0 && !filled)\n\t\t{\n\t\t\tthis.root.appendChild(this.createTolerance(node));\n\t\t}\n\n\t\t// Adds pointer events\n\t\tif (this.pointerEvents)\n\t\t{\n\t\t\tnode.setAttribute('pointer-events', this.pointerEventsValue);\n\t\t}\n\t\t// Enables clicks for nodes inside a link element\n\t\telse if (!this.pointerEvents && this.originalRoot == null)\n\t\t{\n\t\t\tnode.setAttribute('pointer-events', 'none');\n\t\t}\n\t\t\n\t\t// Removes invisible nodes from output if they don't handle events\n\t\tif ((node.nodeName != 'rect' && node.nodeName != 'path' && node.nodeName != 'ellipse') ||\n\t\t\t(node.getAttribute('fill') != 'none' && node.getAttribute('fill') != 'transparent') ||\n\t\t\tnode.getAttribute('stroke') != 'none' || node.getAttribute('pointer-events') != 'none')\n\t\t{\n\t\t\t// LATER: Update existing DOM for performance\t\t\n\t\t\tthis.root.appendChild(node);\n\t\t}\n\t\t\n\t\tthis.node = null;\n\t}\n};\n\n/**\n * Function: updateFill\n * \n * Transfers the stroke attributes from <state> to <node>.\n */\nmxSvgCanvas2D.prototype.updateFill = function()\n{\n\tvar s = this.state;\n\t\n\tif (s.alpha < 1 || s.fillAlpha < 1)\n\t{\n\t\tthis.node.setAttribute('fill-opacity', s.alpha * s.fillAlpha);\n\t}\n\t\n\tif (s.fillColor != null)\n\t{\n\t\tif (s.gradientColor != null)\n\t\t{\n\t\t\tvar id = this.getSvgGradient(String(s.fillColor), String(s.gradientColor),\n\t\t\t\ts.gradientFillAlpha, s.gradientAlpha, s.gradientDirection);\n\t\t\t\n\t\t\tif (this.root.ownerDocument == document && this.useAbsoluteIds)\n\t\t\t{\n\t\t\t\t// Workaround for no fill with base tag in page (escape brackets)\n\t\t\t\tvar base = this.getBaseUrl().replace(/([\\(\\)])/g, '\\\\$1');\n\t\t\t\tthis.node.setAttribute('fill', 'url(' + base + '#' + id + ')');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.node.setAttribute('fill', 'url(#' + id + ')');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.node.setAttribute('fill', String(s.fillColor).toLowerCase());\n\t\t}\n\t}\n};\n\n/**\n * Function: getCurrentStrokeWidth\n * \n * Returns the current stroke width (>= 1), ie. max(1, this.format(this.state.strokeWidth * this.state.scale)).\n */\nmxSvgCanvas2D.prototype.getCurrentStrokeWidth = function()\n{\n\treturn Math.max(this.minStrokeWidth, Math.max(0.01, this.format(this.state.strokeWidth * this.state.scale)));\n};\n\n/**\n * Function: updateStroke\n * \n * Transfers the stroke attributes from <state> to <node>.\n */\nmxSvgCanvas2D.prototype.updateStroke = function()\n{\n\tvar s = this.state;\n\n\tthis.node.setAttribute('stroke', String(s.strokeColor).toLowerCase());\n\t\n\tif (s.alpha < 1 || s.strokeAlpha < 1)\n\t{\n\t\tthis.node.setAttribute('stroke-opacity', s.alpha * s.strokeAlpha);\n\t}\n\t\n\tvar sw = this.getCurrentStrokeWidth();\n\t\n\tif (sw != 1)\n\t{\n\t\tthis.node.setAttribute('stroke-width', sw);\n\t}\n\t\n\tif (this.node.nodeName == 'path')\n\t{\n\t\tthis.updateStrokeAttributes();\n\t}\n\t\n\tif (s.dashed)\n\t{\n\t\tthis.node.setAttribute('stroke-dasharray', this.createDashPattern(\n\t\t\t((s.fixDash) ? 1 : s.strokeWidth) * s.scale));\n\t}\n};\n\n/**\n * Function: updateStrokeAttributes\n * \n * Transfers the stroke attributes from <state> to <node>.\n */\nmxSvgCanvas2D.prototype.updateStrokeAttributes = function()\n{\n\tvar s = this.state;\n\t\n\t// Linejoin miter is default in SVG\n\tif (s.lineJoin != null && s.lineJoin != 'miter')\n\t{\n\t\tthis.node.setAttribute('stroke-linejoin', s.lineJoin);\n\t}\n\t\n\tif (s.lineCap != null)\n\t{\n\t\t// flat is called butt in SVG\n\t\tvar value = s.lineCap;\n\t\t\n\t\tif (value == 'flat')\n\t\t{\n\t\t\tvalue = 'butt';\n\t\t}\n\t\t\n\t\t// Linecap butt is default in SVG\n\t\tif (value != 'butt')\n\t\t{\n\t\t\tthis.node.setAttribute('stroke-linecap', value);\n\t\t}\n\t}\n\t\n\t// Miterlimit 10 is default in our document\n\tif (s.miterLimit != null && (!this.styleEnabled || s.miterLimit != 10))\n\t{\n\t\tthis.node.setAttribute('stroke-miterlimit', s.miterLimit);\n\t}\n};\n\n/**\n * Function: createDashPattern\n * \n * Creates the SVG dash pattern for the given state.\n */\nmxSvgCanvas2D.prototype.createDashPattern = function(scale)\n{\n\tvar pat = [];\n\t\n\tif (typeof(this.state.dashPattern) === 'string')\n\t{\n\t\tvar dash = this.state.dashPattern.split(' ');\n\t\t\n\t\tif (dash.length > 0)\n\t\t{\n\t\t\tfor (var i = 0; i < dash.length; i++)\n\t\t\t{\n\t\t\t\tpat[i] = Number(dash[i]) * scale;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn pat.join(' ');\n};\n\n/**\n * Function: createTolerance\n * \n * Creates a hit detection tolerance shape for the given node.\n */\nmxSvgCanvas2D.prototype.createTolerance = function(node)\n{\n\tvar tol = node.cloneNode(true);\n\tvar sw = parseFloat(tol.getAttribute('stroke-width') || 1) + this.strokeTolerance;\n\ttol.setAttribute('pointer-events', 'stroke');\n\ttol.setAttribute('visibility', 'hidden');\n\ttol.removeAttribute('stroke-dasharray');\n\ttol.setAttribute('stroke-width', sw);\n\ttol.setAttribute('fill', 'none');\n\t\n\t// Workaround for Opera ignoring the visiblity attribute above while\n\t// other browsers need a stroke color to perform the hit-detection but\n\t// do not ignore the visibility attribute. Side-effect is that Opera's\n\t// hit detection for horizontal/vertical edges seems to ignore the tol.\n\ttol.setAttribute('stroke', (mxClient.IS_OT) ? 'none' : 'white');\n\t\n\treturn tol;\n};\n\n/**\n * Function: createShadow\n * \n * Creates a shadow for the given node.\n */\nmxSvgCanvas2D.prototype.createShadow = function(node)\n{\n\tvar shadow = node.cloneNode(true);\n\tvar s = this.state;\n\n\t// Firefox uses transparent for no fill in ellipses\n\tif (shadow.getAttribute('fill') != 'none' && (!mxClient.IS_FF || shadow.getAttribute('fill') != 'transparent'))\n\t{\n\t\tshadow.setAttribute('fill', s.shadowColor);\n\t}\n\t\n\tif (shadow.getAttribute('stroke') != 'none')\n\t{\n\t\tshadow.setAttribute('stroke', s.shadowColor);\n\t}\n\n\tshadow.setAttribute('transform', 'translate(' + this.format(s.shadowDx * s.scale) +\n\t\t',' + this.format(s.shadowDy * s.scale) + ')' + (s.transform || ''));\n\tshadow.setAttribute('opacity', s.shadowAlpha);\n\t\n\treturn shadow;\n};\n\n/**\n * Function: setLink\n * \n * Experimental implementation for hyperlinks.\n */\nmxSvgCanvas2D.prototype.setLink = function(link)\n{\n\tif (link == null)\n\t{\n\t\tthis.root = this.originalRoot;\n\t}\n\telse\n\t{\n\t\tthis.originalRoot = this.root;\n\t\t\n\t\tvar node = this.createElement('a');\n\t\t\n\t\t// Workaround for implicit namespace handling in HTML5 export, IE adds NS1 namespace so use code below\n\t\t// in all IE versions except quirks mode. KNOWN: Adds xlink namespace to each image tag in output.\n\t\tif (node.setAttributeNS == null || (this.root.ownerDocument != document && document.documentMode == null))\n\t\t{\n\t\t\tnode.setAttribute('xlink:href', link);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.setAttributeNS(mxConstants.NS_XLINK, 'xlink:href', link);\n\t\t}\n\t\t\n\t\tthis.root.appendChild(node);\n\t\tthis.root = node;\n\t}\n};\n\n/**\n * Function: rotate\n * \n * Sets the rotation of the canvas. Note that rotation cannot be concatenated.\n */\nmxSvgCanvas2D.prototype.rotate = function(theta, flipH, flipV, cx, cy)\n{\n\tif (theta != 0 || flipH || flipV)\n\t{\n\t\tvar s = this.state;\n\t\tcx += s.dx;\n\t\tcy += s.dy;\n\t\n\t\tcx *= s.scale;\n\t\tcy *= s.scale;\n\n\t\ts.transform = s.transform || '';\n\t\t\n\t\t// This implementation uses custom scale/translate and built-in rotation\n\t\t// Rotation state is part of the AffineTransform in state.transform\n\t\tif (flipH && flipV)\n\t\t{\n\t\t\ttheta += 180;\n\t\t}\n\t\telse if (flipH != flipV)\n\t\t{\n\t\t\tvar tx = (flipH) ? cx : 0;\n\t\t\tvar sx = (flipH) ? -1 : 1;\n\t\n\t\t\tvar ty = (flipV) ? cy : 0;\n\t\t\tvar sy = (flipV) ? -1 : 1;\n\n\t\t\ts.transform += 'translate(' + this.format(tx) + ',' + this.format(ty) + ')' +\n\t\t\t\t'scale(' + this.format(sx) + ',' + this.format(sy) + ')' +\n\t\t\t\t'translate(' + this.format(-tx) + ',' + this.format(-ty) + ')';\n\t\t}\n\t\t\n\t\tif (flipH ? !flipV : flipV)\n\t\t{\n\t\t\ttheta *= -1;\n\t\t}\n\t\t\n\t\tif (theta != 0)\n\t\t{\n\t\t\ts.transform += 'rotate(' + this.format(theta) + ',' + this.format(cx) + ',' + this.format(cy) + ')';\n\t\t}\n\t\t\n\t\ts.rotation = s.rotation + theta;\n\t\ts.rotationCx = cx;\n\t\ts.rotationCy = cy;\n\t}\n};\n\n/**\n * Function: begin\n * \n * Extends superclass to create path.\n */\nmxSvgCanvas2D.prototype.begin = function()\n{\n\tmxAbstractCanvas2D.prototype.begin.apply(this, arguments);\n\tthis.node = this.createElement('path');\n};\n\n/**\n * Function: rect\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.rect = function(x, y, w, h)\n{\n\tvar s = this.state;\n\tvar n = this.createElement('rect');\n\tn.setAttribute('x', this.format((x + s.dx) * s.scale));\n\tn.setAttribute('y', this.format((y + s.dy) * s.scale));\n\tn.setAttribute('width', this.format(w * s.scale));\n\tn.setAttribute('height', this.format(h * s.scale));\n\t\n\tthis.node = n;\n};\n\n/**\n * Function: roundrect\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.roundrect = function(x, y, w, h, dx, dy)\n{\n\tthis.rect(x, y, w, h);\n\t\n\tif (dx > 0)\n\t{\n\t\tthis.node.setAttribute('rx', this.format(dx * this.state.scale));\n\t}\n\t\n\tif (dy > 0)\n\t{\n\t\tthis.node.setAttribute('ry', this.format(dy * this.state.scale));\n\t}\n};\n\n/**\n * Function: ellipse\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.ellipse = function(x, y, w, h)\n{\n\tvar s = this.state;\n\tvar n = this.createElement('ellipse');\n\t// No rounding for consistent output with 1.x\n\tn.setAttribute('cx', this.format((x + w / 2 + s.dx) * s.scale));\n\tn.setAttribute('cy', this.format((y + h / 2 + s.dy) * s.scale));\n\tn.setAttribute('rx', w / 2 * s.scale);\n\tn.setAttribute('ry', h / 2 * s.scale);\n\tthis.node = n;\n};\n\n/**\n * Function: image\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.image = function(x, y, w, h, src, aspect, flipH, flipV)\n{\n\tsrc = this.converter.convert(src);\n\t\n\t// LATER: Add option for embedding images as base64.\n\taspect = (aspect != null) ? aspect : true;\n\tflipH = (flipH != null) ? flipH : false;\n\tflipV = (flipV != null) ? flipV : false;\n\t\n\tvar s = this.state;\n\tx += s.dx;\n\ty += s.dy;\n\t\n\tvar node = this.createElement('image');\n\tnode.setAttribute('x', this.format(x * s.scale) + this.imageOffset);\n\tnode.setAttribute('y', this.format(y * s.scale) + this.imageOffset);\n\tnode.setAttribute('width', this.format(w * s.scale));\n\tnode.setAttribute('height', this.format(h * s.scale));\n\t\n\t// Workaround for missing namespace support\n\tif (node.setAttributeNS == null)\n\t{\n\t\tnode.setAttribute('xlink:href', src);\n\t}\n\telse\n\t{\n\t\tnode.setAttributeNS(mxConstants.NS_XLINK, 'xlink:href', src);\n\t}\n\t\n\tif (!aspect)\n\t{\n\t\tnode.setAttribute('preserveAspectRatio', 'none');\n\t}\n\n\tif (s.alpha < 1 || s.fillAlpha < 1)\n\t{\n\t\tnode.setAttribute('opacity', s.alpha * s.fillAlpha);\n\t}\n\t\n\tvar tr = this.state.transform || '';\n\t\n\tif (flipH || flipV)\n\t{\n\t\tvar sx = 1;\n\t\tvar sy = 1;\n\t\tvar dx = 0;\n\t\tvar dy = 0;\n\t\t\n\t\tif (flipH)\n\t\t{\n\t\t\tsx = -1;\n\t\t\tdx = -w - 2 * x;\n\t\t}\n\t\t\n\t\tif (flipV)\n\t\t{\n\t\t\tsy = -1;\n\t\t\tdy = -h - 2 * y;\n\t\t}\n\t\t\n\t\t// Adds image tansformation to existing transform\n\t\ttr += 'scale(' + sx + ',' + sy + ')translate(' + (dx * s.scale) + ',' + (dy * s.scale) + ')';\n\t}\n\n\tif (tr.length > 0)\n\t{\n\t\tnode.setAttribute('transform', tr);\n\t}\n\t\n\tif (!this.pointerEvents)\n\t{\n\t\tnode.setAttribute('pointer-events', 'none');\n\t}\n\t\n\tthis.root.appendChild(node);\n};\n\n/**\n * Function: convertHtml\n * \n * Converts the given HTML string to XHTML.\n */\nmxSvgCanvas2D.prototype.convertHtml = function(val)\n{\n\tif (this.useDomParser)\n\t{\n\t\tvar doc = new DOMParser().parseFromString(val, 'text/html');\n\n\t\tif (doc != null)\n\t\t{\n\t\t\tval = new XMLSerializer().serializeToString(doc.body);\n\t\t\t\n\t\t\t// Extracts body content from DOM\n\t\t\tif (val.substring(0, 5) == '<body')\n\t\t\t{\n\t\t\t\tval = val.substring(val.indexOf('>', 5) + 1);\n\t\t\t}\n\t\t\t\n\t\t\tif (val.substring(val.length - 7, val.length) == '</body>')\n\t\t\t{\n\t\t\t\tval = val.substring(0, val.length - 7);\n\t\t\t}\n\t\t}\n\t}\n\telse if (document.implementation != null && document.implementation.createDocument != null)\n\t{\n\t\tvar xd = document.implementation.createDocument('http://www.w3.org/1999/xhtml', 'html', null);\n\t\tvar xb = xd.createElement('body');\n\t\txd.documentElement.appendChild(xb);\n\t\t\n\t\tvar div = document.createElement('div');\n\t\tdiv.innerHTML = val;\n\t\tvar child = div.firstChild;\n\t\t\n\t\twhile (child != null)\n\t\t{\n\t\t\tvar next = child.nextSibling;\n\t\t\txb.appendChild(xd.adoptNode(child));\n\t\t\tchild = next;\n\t\t}\n\t\t\n\t\treturn xb.innerHTML;\n\t}\n\telse\n\t{\n\t\tvar ta = document.createElement('textarea');\n\t\t\n\t\t// Handles special HTML entities < and > and double escaping\n\t\t// and converts unclosed br, hr and img tags to XHTML\n\t\t// LATER: Convert all unclosed tags\n\t\tta.innerHTML = val.replace(/&amp;/g, '&amp;amp;').\n\t\t\treplace(/&#60;/g, '&amp;lt;').replace(/&#62;/g, '&amp;gt;').\n\t\t\treplace(/&lt;/g, '&amp;lt;').replace(/&gt;/g, '&amp;gt;').\n\t\t\treplace(/</g, '&lt;').replace(/>/g, '&gt;');\n\t\tval = ta.value.replace(/&/g, '&amp;').replace(/&amp;lt;/g, '&lt;').\n\t\t\treplace(/&amp;gt;/g, '&gt;').replace(/&amp;amp;/g, '&amp;').\n\t\t\treplace(/<br>/g, '<br />').replace(/<hr>/g, '<hr />').\n\t\t\treplace(/(<img[^>]+)>/gm, \"$1 />\");\n\t}\n\t\n\treturn val;\n};\n\n/**\n * Function: createDiv\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.createDiv = function(str)\n{\n\tvar val = str;\n\t\n\tif (!mxUtils.isNode(val))\n\t{\n\t\tval = '<div><div>' + this.convertHtml(val) + '</div></div>';\n\t}\n\n\t// IE uses this code for export as it cannot render foreignObjects\n\tif (!mxClient.IS_IE && !mxClient.IS_IE11 && document.createElementNS)\n\t{\n\t\tvar div = document.createElementNS('http://www.w3.org/1999/xhtml', 'div');\n\t\t\n\t\tif (mxUtils.isNode(val))\n\t\t{\n\t\t\tvar div2 = document.createElement('div');\n\t\t\tvar div3 = div2.cloneNode(false);\n\t\t\t\n\t\t\t// Creates a copy for export\n\t\t\tif (this.root.ownerDocument != document)\n\t\t\t{\n\t\t\t\tdiv2.appendChild(val.cloneNode(true));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdiv2.appendChild(val);\n\t\t\t}\n\t\t\t\n\t\t\tdiv3.appendChild(div2);\n\t\t\tdiv.appendChild(div3);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdiv.innerHTML = val;\n\t\t}\n\t\t\n\t\treturn div;\n\t}\n\telse\n\t{\n\t\tif (mxUtils.isNode(val))\n\t\t{\n\t\t\tval = '<div><div>' + mxUtils.getXml(val) + '</div></div>';\n\t\t}\n\t\t\n\t\tval = '<div xmlns=\"http://www.w3.org/1999/xhtml\">' + val + '</div>';\n\n\t\t// NOTE: FF 3.6 crashes if content CSS contains \"height:100%\"\n\t\treturn  mxUtils.parseXml(val).documentElement;\n\t}\n};\n\n/**\n * Updates existing DOM nodes for text rendering. LATER: Merge common parts with text function below.\n */\nmxSvgCanvas2D.prototype.updateText = function(x, y, w, h, align, valign, wrap, overflow, clip, rotation, node)\n{\n\tif (node != null && node.firstChild != null && node.firstChild.firstChild != null)\n\t{\n\t\tthis.updateTextNodes(x, y, w, h, align, valign, wrap, overflow, clip, rotation, node.firstChild);\n\t}\n};\n\n/**\n * Function: addForeignObject\n * \n * Creates a foreignObject for the given string and adds it to the given root.\n */\nmxSvgCanvas2D.prototype.addForeignObject = function(x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation, dir, div, root)\n{\n\tvar group = this.createElement('g');\n\tvar fo = this.createElement('foreignObject');\n\t\n\t// Workarounds for print clipping and static position in Safari\n\tfo.setAttribute('style', 'overflow: visible; text-align: left;');\n\tfo.setAttribute('pointer-events', 'none');\n\t\n\t// Import needed for older versions of IE\n\tif (div.ownerDocument != document)\n\t{\n\t\tdiv = mxUtils.importNodeImplementation(fo.ownerDocument, div, true);\n\t}\n\n\tfo.appendChild(div);\n\tgroup.appendChild(fo);\n\n\tthis.updateTextNodes(x, y, w, h, align, valign, wrap, overflow, clip, rotation, group);\n\t\n\t// Alternate content if foreignObject not supported\n\tif (this.root.ownerDocument != document)\n\t{\n\t\tvar alt = this.createAlternateContent(fo, x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation);\n\t\t\n\t\tif (alt != null)\n\t\t{\n\t\t\tfo.setAttribute('requiredFeatures', 'http://www.w3.org/TR/SVG11/feature#Extensibility');\n\t\t\tvar sw = this.createElement('switch');\n\t\t\tsw.appendChild(fo);\n\t\t\tsw.appendChild(alt);\n\t\t\tgroup.appendChild(sw);\n\t\t}\n\t}\n\t\n\troot.appendChild(group);\n};\n\n/**\n * Updates existing DOM nodes for text rendering.\n */\nmxSvgCanvas2D.prototype.updateTextNodes = function(x, y, w, h, align, valign, wrap, overflow, clip, rotation, g)\n{\n\tvar s = this.state.scale;\n\n\tmxSvgCanvas2D.createCss(w + 2, h, align, valign, wrap, overflow, clip,\n\t\t(this.state.fontBackgroundColor != null) ? this.state.fontBackgroundColor : null,\n\t\t(this.state.fontBorderColor != null) ? this.state.fontBorderColor : null,\n\t\t'display: flex; align-items: unsafe ' +\n\t\t((valign == mxConstants.ALIGN_TOP) ? 'flex-start' :\n\t\t((valign == mxConstants.ALIGN_BOTTOM) ? 'flex-end' : 'center'))  + '; ' +\n\t\t'justify-content: unsafe ' + ((align == mxConstants.ALIGN_LEFT) ? 'flex-start' :\n\t\t((align == mxConstants.ALIGN_RIGHT) ? 'flex-end' : 'center'))  + '; ',\n\t\tthis.getTextCss(), s, mxUtils.bind(this, function(dx, dy, flex, item, block)\n\t{\n\t\tx += this.state.dx;\n\t\ty += this.state.dy;\n\n\t\tvar fo = g.firstChild;\n\t\tvar div = fo.firstChild;\n\t\tvar box = div.firstChild;\n\t\tvar text = box.firstChild;\n\t\tvar r = ((this.rotateHtml) ? this.state.rotation : 0) + ((rotation != null) ? rotation : 0);\n\t\tvar t = ((this.foOffset != 0) ? 'translate(' + this.foOffset + ' ' + this.foOffset + ')' : '') +\n\t\t\t((s != 1) ? 'scale(' + s + ')' : '');\n\t\t\n\t\ttext.setAttribute('style', block);\n\t\tbox.setAttribute('style', item);\n\t\t\n\t\t// Workaround for clipping in Webkit with scrolling and zoom\n\t\tfo.setAttribute('width', Math.ceil(1 / Math.min(1, s) * 100) + '%');\n\t\tfo.setAttribute('height', Math.ceil(1 / Math.min(1, s) * 100) + '%');\n\t\tvar yp = Math.round(y + dy);\n\t\t\n\t\t// Allows for negative values which are causing problems with\n\t\t// transformed content where the top edge of the foreignObject\n\t\t// limits the text box being moved further up in the diagram.\n\t\t// KNOWN: Possible clipping problems with zoom and scrolling\n\t\t// but this is normally not used with scrollbars as the\n\t\t// coordinates are always positive with scrollbars.\n\t\t// Margin-top is ignored in Safari and no negative values allowed\n\t\t// for padding.\n\t\tif (yp < 0)\n\t\t{\n\t\t\tfo.setAttribute('y', yp);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfo.removeAttribute('y');\n\t\t\tflex += 'padding-top: ' + yp + 'px; ';\n\t\t}\n\t\t\n\t\tdiv.setAttribute('style', flex + 'margin-left: ' + Math.round(x + dx) + 'px;');\n\t\tt += ((r != 0) ? ('rotate(' + r + ' ' + x + ' ' + y + ')') : '');\n\n\t\t// Output allows for reflow but Safari cannot use absolute position,\n\t\t// transforms or opacity. https://bugs.webkit.org/show_bug.cgi?id=23113\n\t\tif (t != '')\n\t\t{\t\n\t\t\tg.setAttribute('transform', t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tg.removeAttribute('transform');\n\t\t}\n\t\t\n\t\tif (this.state.alpha != 1)\n\t\t{\n\t\t\tg.setAttribute('opacity', this.state.alpha);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tg.removeAttribute('opacity');\n\t\t}\n\t}));\n};\n\n/**\n * Updates existing DOM nodes for text rendering.\n */\nmxSvgCanvas2D.createCss = function(w, h, align, valign, wrap, overflow, clip, bg, border, flex, block, s, callback)\n{\n\tvar item = 'box-sizing: border-box; font-size: 0; text-align: ' + ((align == mxConstants.ALIGN_LEFT) ? 'left' :\n\t\t((align == mxConstants.ALIGN_RIGHT) ? 'right' : 'center')) + '; ';\n\tvar pt = mxUtils.getAlignmentAsPoint(align, valign);\n\tvar ofl = 'overflow: hidden; ';\n\tvar fw = 'width: 1px; ';\n\tvar fh = 'height: 1px; ';\n\tvar dx = pt.x * w;\n\tvar dy = pt.y * h;\n\t\n\tif (clip)\n\t{\n\t\tfw = 'width: ' + Math.round(w) + 'px; ';\n\t\titem += 'max-height: ' + Math.round(h) + 'px; ';\n\t\tdy = 0;\n\t}\n\telse if (overflow == 'fill')\n\t{\n\t\tfw = 'width: ' + Math.round(w) + 'px; ';\n\t\tfh = 'height: ' + Math.round(h) + 'px; ';\n\t\tblock += 'width: 100%; height: 100%; ';\n\t\titem += fw + fh;\n\t}\n\telse if (overflow == 'width')\n\t{\n\t\tfw = 'width: ' + Math.round(w) + 'px; ';\n\t\tblock += 'width: 100%; ';\n\t\titem += fw;\n\t\tdy = 0;\n\t\t\n\t\tif (h > 0)\n\t\t{\n\t\t\titem += 'max-height: ' + Math.round(h) + 'px; ';\n\t\t}\n\t}\n\telse\n\t{\n\t\tofl = '';\n\t\tdy = 0;\n\t}\n\t\n\tvar bgc = '';\n\t\n\tif (bg != null)\n\t{\n\t\tbgc += 'background-color: ' + bg + '; ';\n\t}\n\t\n\tif (border != null)\n\t{\n\t\tbgc += 'border: 1px solid ' + border + '; ';\n\t}\n\t\n\tif (ofl == '' || clip)\n\t{\n\t\tblock += bgc;\n\t}\n\telse\n\t{\n\t\titem += bgc;\n\t}\n\n\tif (wrap && w > 0)\n\t{\n\t\tblock += 'white-space: normal; word-wrap: ' + mxConstants.WORD_WRAP + '; ';\n\t\tfw = 'width: ' + Math.round(w) + 'px; ';\n\t\t\n\t\tif (ofl != '' && overflow != 'fill')\n\t\t{\n\t\t\tdy = 0;\n\t\t}\n\t}\n\telse\n\t{\n\t\tblock += 'white-space: nowrap; ';\n\t\t\n\t\tif (ofl == '')\n\t\t{\n\t\t\tdx = 0;\n\t\t}\n\t}\n\t\n\tcallback(dx, dy, flex + fw + fh, item + ofl, block, ofl);\n};\n\n/**\n * Function: getTextCss\n * \n * Private helper function to create SVG elements\n */\nmxSvgCanvas2D.prototype.getTextCss = function()\n{\n\tvar s = this.state;\n\tvar lh = (mxConstants.ABSOLUTE_LINE_HEIGHT) ? (s.fontSize * mxConstants.LINE_HEIGHT) + 'px' :\n\t\t(mxConstants.LINE_HEIGHT * this.lineHeightCorrection);\n\tvar css = 'display: inline-block; font-size: ' + s.fontSize + 'px; ' +\n\t\t'font-family: ' + s.fontFamily + '; color: ' + s.fontColor + '; line-height: ' + lh +\n\t\t'; pointer-events: ' + ((this.pointerEvents) ? this.pointerEventsValue : 'none') + '; ';\n\t\n\tif ((s.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t{\n\t\tcss += 'font-weight: bold; ';\n\t}\n\n\tif ((s.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t{\n\t\tcss += 'font-style: italic; ';\n\t}\n\n\tvar deco = [];\n\t\n\tif ((s.fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t{\n\t\tdeco.push('underline');\n\t}\n\t\n\tif ((s.fontStyle & mxConstants.FONT_STRIKETHROUGH) == mxConstants.FONT_STRIKETHROUGH)\n\t{\n\t\tdeco.push('line-through');\n\t}\n\t\n\tif (deco.length > 0)\n\t{\n\t\tcss += 'text-decoration: ' + deco.join(' ') + '; ';\n\t}\n\n\treturn css;\n};\n\n/**\n * Function: text\n * \n * Paints the given text. Possible values for format are empty string for plain\n * text and html for HTML markup. Note that HTML markup is only supported if\n * foreignObject is supported and <foEnabled> is true. (This means IE9 and later\n * does currently not support HTML text as part of shapes.)\n */\nmxSvgCanvas2D.prototype.text = function(x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation, dir)\n{\n\tif (this.textEnabled && str != null)\n\t{\n\t\trotation = (rotation != null) ? rotation : 0;\n\n\t\tif (this.foEnabled && format == 'html')\n\t\t{\n\t\t\tvar div = this.createDiv(str);\n\t\t\t\n\t\t\t// Ignores invalid XHTML labels\n\t\t\tif (div != null)\n\t\t\t{\n\t\t\t\tif (dir != null)\n\t\t\t\t{\n\t\t\t\t\tdiv.setAttribute('dir', dir);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.addForeignObject(x, y, w, h, str, align, valign, wrap,\n\t\t\t\t\tformat, overflow, clip, rotation, dir, div, this.root);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.plainText(x + this.state.dx, y + this.state.dy, w, h, str,\n\t\t\t\talign, valign, wrap, overflow, clip, rotation, dir);\n\t\t}\n\t}\n};\n\n/**\n * Function: createClip\n * \n * Creates a clip for the given coordinates.\n */\nmxSvgCanvas2D.prototype.createClip = function(x, y, w, h)\n{\n\tx = Math.round(x);\n\ty = Math.round(y);\n\tw = Math.round(w);\n\th = Math.round(h);\n\t\n\tvar id = 'mx-clip-' + x + '-' + y + '-' + w + '-' + h;\n\n\tvar counter = 0;\n\tvar tmp = id + '-' + counter;\n\t\n\t// Resolves ID conflicts\n\twhile (document.getElementById(tmp) != null)\n\t{\n\t\ttmp = id + '-' + (++counter);\n\t}\n\t\n\tclip = this.createElement('clipPath');\n\tclip.setAttribute('id', tmp);\n\t\n\tvar rect = this.createElement('rect');\n\trect.setAttribute('x', x);\n\trect.setAttribute('y', y);\n\trect.setAttribute('width', w);\n\trect.setAttribute('height', h);\n\t\t\n\tclip.appendChild(rect);\n\t\n\treturn clip;\n};\n\n/**\n * Function: plainText\n * \n * Paints the given text. Possible values for format are empty string for\n * plain text and html for HTML markup.\n */\nmxSvgCanvas2D.prototype.plainText = function(x, y, w, h, str, align, valign, wrap, overflow, clip, rotation, dir)\n{\n\trotation = (rotation != null) ? rotation : 0;\n\tvar s = this.state;\n\tvar size = s.fontSize;\n\tvar node = this.createElement('g');\n\tvar tr = s.transform || '';\n\tthis.updateFont(node);\n\t\t\t\t\n\t// Ignores pointer events\n\tif (!this.pointerEvents && this.originalRoot == null)\n\t{\n\t\tnode.setAttribute('pointer-events', 'none');\n\t}\n\t\t\n\t// Non-rotated text\n\tif (rotation != 0)\n\t{\n\t\ttr += 'rotate(' + rotation  + ',' + this.format(x * s.scale) + ',' + this.format(y * s.scale) + ')';\n\t}\n\t\n\tif (dir != null)\n\t{\n\t\tnode.setAttribute('direction', dir);\n\t}\n\n\tif (clip && w > 0 && h > 0)\n\t{\n\t\tvar cx = x;\n\t\tvar cy = y;\n\t\t\n\t\tif (align == mxConstants.ALIGN_CENTER)\n\t\t{\n\t\t\tcx -= w / 2;\n\t\t}\n\t\telse if (align == mxConstants.ALIGN_RIGHT)\n\t\t{\n\t\t\tcx -= w;\n\t\t}\n\t\t\n\t\tif (overflow != 'fill')\n\t\t{\n\t\t\tif (valign == mxConstants.ALIGN_MIDDLE)\n\t\t\t{\n\t\t\t\tcy -= h / 2;\n\t\t\t}\n\t\t\telse if (valign == mxConstants.ALIGN_BOTTOM)\n\t\t\t{\n\t\t\t\tcy -= h;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// LATER: Remove spacing from clip rectangle\n\t\tvar c = this.createClip(cx * s.scale - 2, cy * s.scale - 2, w * s.scale + 4, h * s.scale + 4);\n\t\t\n\t\tif (this.defs != null)\n\t\t{\n\t\t\tthis.defs.appendChild(c);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Makes sure clip is removed with referencing node\n\t\t\tthis.root.appendChild(c);\n\t\t}\n\t\t\n\t\tif (!mxClient.IS_CHROMEAPP && !mxClient.IS_IE && !mxClient.IS_IE11 &&\n\t\t\t!mxClient.IS_EDGE && this.root.ownerDocument == document)\n\t\t{\n\t\t\t// Workaround for potential base tag\n\t\t\tvar base = this.getBaseUrl().replace(/([\\(\\)])/g, '\\\\$1');\n\t\t\tnode.setAttribute('clip-path', 'url(' + base + '#' + c.getAttribute('id') + ')');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.setAttribute('clip-path', 'url(#' + c.getAttribute('id') + ')');\n\t\t}\n\t}\n\n\t// Default is left\n\tvar anchor = (align == mxConstants.ALIGN_RIGHT) ? 'end' :\n\t\t\t\t\t(align == mxConstants.ALIGN_CENTER) ? 'middle' :\n\t\t\t\t\t'start';\n\n\t// Text-anchor start is default in SVG\n\tif (anchor != 'start')\n\t{\n\t\tnode.setAttribute('text-anchor', anchor);\n\t}\n\t\n\tif (!this.styleEnabled || size != mxConstants.DEFAULT_FONTSIZE)\n\t{\n\t\tnode.setAttribute('font-size', (size * s.scale) + 'px');\n\t}\n\t\n\tif (tr.length > 0)\n\t{\n\t\tnode.setAttribute('transform', tr);\n\t}\n\t\n\tif (s.alpha < 1)\n\t{\n\t\tnode.setAttribute('opacity', s.alpha);\n\t}\n\t\n\tvar lines = str.split('\\n');\n\tvar lh = Math.round(size * mxConstants.LINE_HEIGHT);\n\tvar textHeight = size + (lines.length - 1) * lh;\n\n\tvar cy = y + size - 1;\n\n\tif (valign == mxConstants.ALIGN_MIDDLE)\n\t{\n\t\tif (overflow == 'fill')\n\t\t{\n\t\t\tcy -= h / 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar dy = ((this.matchHtmlAlignment && clip && h > 0) ? Math.min(textHeight, h) : textHeight) / 2;\n\t\t\tcy -= dy;\n\t\t}\n\t}\n\telse if (valign == mxConstants.ALIGN_BOTTOM)\n\t{\n\t\tif (overflow == 'fill')\n\t\t{\n\t\t\tcy -= h;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar dy = (this.matchHtmlAlignment && clip && h > 0) ? Math.min(textHeight, h) : textHeight;\n\t\t\tcy -= dy + 1;\n\t\t}\n\t}\n\n\tfor (var i = 0; i < lines.length; i++)\n\t{\n\t\t// Workaround for bounding box of empty lines and spaces\n\t\tif (lines[i].length > 0 && mxUtils.trim(lines[i]).length > 0)\n\t\t{\n\t\t\tvar text = this.createElement('text');\n\t\t\t// LATER: Match horizontal HTML alignment\n\t\t\ttext.setAttribute('x', this.format(x * s.scale) + this.textOffset);\n\t\t\ttext.setAttribute('y', this.format(cy * s.scale) + this.textOffset);\n\t\n\t\t\tmxUtils.write(text, lines[i]);\n\t\t\tnode.appendChild(text);\n\t\t}\n\n\t\tcy += lh;\n\t}\n\n\tthis.root.appendChild(node);\n\tthis.addTextBackground(node, str, x, y, w, (overflow == 'fill') ? h : textHeight, align, valign, overflow);\n};\n\n/**\n * Function: updateFont\n * \n * Updates the text properties for the given node. (NOTE: For this to work in\n * IE, the given node must be a text or tspan element.)\n */\nmxSvgCanvas2D.prototype.updateFont = function(node)\n{\n\tvar s = this.state;\n\n\tnode.setAttribute('fill', s.fontColor);\n\t\n\tif (!this.styleEnabled || s.fontFamily != mxConstants.DEFAULT_FONTFAMILY)\n\t{\n\t\tnode.setAttribute('font-family', s.fontFamily);\n\t}\n\n\tif ((s.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t{\n\t\tnode.setAttribute('font-weight', 'bold');\n\t}\n\n\tif ((s.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t{\n\t\tnode.setAttribute('font-style', 'italic');\n\t}\n\t\n\tvar txtDecor = [];\n\t\n\tif ((s.fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t{\n\t\ttxtDecor.push('underline');\n\t}\n\t\n\tif ((s.fontStyle & mxConstants.FONT_STRIKETHROUGH) == mxConstants.FONT_STRIKETHROUGH)\n\t{\n\t\ttxtDecor.push('line-through');\n\t}\n\t\n\tif (txtDecor.length > 0)\n\t{\n\t\tnode.setAttribute('text-decoration', txtDecor.join(' '));\n\t}\n};\n\n/**\n * Function: addTextBackground\n * \n * Background color and border\n */\nmxSvgCanvas2D.prototype.addTextBackground = function(node, str, x, y, w, h, align, valign, overflow)\n{\n\tvar s = this.state;\n\n\tif (s.fontBackgroundColor != null || s.fontBorderColor != null)\n\t{\n\t\tvar bbox = null;\n\t\t\n\t\tif (overflow == 'fill' || overflow == 'width')\n\t\t{\n\t\t\tif (align == mxConstants.ALIGN_CENTER)\n\t\t\t{\n\t\t\t\tx -= w / 2;\n\t\t\t}\n\t\t\telse if (align == mxConstants.ALIGN_RIGHT)\n\t\t\t{\n\t\t\t\tx -= w;\n\t\t\t}\n\t\t\t\n\t\t\tif (valign == mxConstants.ALIGN_MIDDLE)\n\t\t\t{\n\t\t\t\ty -= h / 2;\n\t\t\t}\n\t\t\telse if (valign == mxConstants.ALIGN_BOTTOM)\n\t\t\t{\n\t\t\t\ty -= h;\n\t\t\t}\n\t\t\t\n\t\t\tbbox = new mxRectangle((x + 1) * s.scale, y * s.scale, (w - 2) * s.scale, (h + 2) * s.scale);\n\t\t}\n\t\telse if (node.getBBox != null && this.root.ownerDocument == document)\n\t\t{\n\t\t\t// Uses getBBox only if inside document for correct size\n\t\t\ttry\n\t\t\t{\n\t\t\t\tbbox = node.getBBox();\n\t\t\t\tvar ie = mxClient.IS_IE && mxClient.IS_SVG;\n\t\t\t\tbbox = new mxRectangle(bbox.x, bbox.y + ((ie) ? 0 : 1), bbox.width, bbox.height + ((ie) ? 1 : 0));\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\t// Ignores NS_ERROR_FAILURE in FF if container display is none.\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (bbox == null || bbox.width == 0 || bbox.height == 0)\n\t\t{\n\t\t\t// Computes size if not in document or no getBBox available\n\t\t\tvar div = document.createElement('div');\n\n\t\t\t// Wrapping and clipping can be ignored here\n\t\t\tdiv.style.lineHeight = (mxConstants.ABSOLUTE_LINE_HEIGHT) ? (s.fontSize * mxConstants.LINE_HEIGHT) + 'px' : mxConstants.LINE_HEIGHT;\n\t\t\tdiv.style.fontSize = s.fontSize + 'px';\n\t\t\tdiv.style.fontFamily = s.fontFamily;\n\t\t\tdiv.style.whiteSpace = 'nowrap';\n\t\t\tdiv.style.position = 'absolute';\n\t\t\tdiv.style.visibility = 'hidden';\n\t\t\tdiv.style.display = (mxClient.IS_QUIRKS) ? 'inline' : 'inline-block';\n\t\t\tdiv.style.zoom = '1';\n\t\t\t\n\t\t\tif ((s.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t\t\t{\n\t\t\t\tdiv.style.fontWeight = 'bold';\n\t\t\t}\n\n\t\t\tif ((s.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t\t\t{\n\t\t\t\tdiv.style.fontStyle = 'italic';\n\t\t\t}\n\t\t\t\n\t\t\tstr = mxUtils.htmlEntities(str, false);\n\t\t\tdiv.innerHTML = str.replace(/\\n/g, '<br/>');\n\t\t\t\n\t\t\tdocument.body.appendChild(div);\n\t\t\tvar w = div.offsetWidth;\n\t\t\tvar h = div.offsetHeight;\n\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\n\t\t\tif (align == mxConstants.ALIGN_CENTER)\n\t\t\t{\n\t\t\t\tx -= w / 2;\n\t\t\t}\n\t\t\telse if (align == mxConstants.ALIGN_RIGHT)\n\t\t\t{\n\t\t\t\tx -= w;\n\t\t\t}\n\t\t\t\n\t\t\tif (valign == mxConstants.ALIGN_MIDDLE)\n\t\t\t{\n\t\t\t\ty -= h / 2;\n\t\t\t}\n\t\t\telse if (valign == mxConstants.ALIGN_BOTTOM)\n\t\t\t{\n\t\t\t\ty -= h;\n\t\t\t}\n\t\t\t\n\t\t\tbbox = new mxRectangle((x + 1) * s.scale, (y + 2) * s.scale, w * s.scale, (h + 1) * s.scale);\n\t\t}\n\t\t\n\t\tif (bbox != null)\n\t\t{\n\t\t\tvar n = this.createElement('rect');\n\t\t\tn.setAttribute('fill', s.fontBackgroundColor || 'none');\n\t\t\tn.setAttribute('stroke', s.fontBorderColor || 'none');\n\t\t\tn.setAttribute('x', Math.floor(bbox.x - 1));\n\t\t\tn.setAttribute('y', Math.floor(bbox.y - 1));\n\t\t\tn.setAttribute('width', Math.ceil(bbox.width + 2));\n\t\t\tn.setAttribute('height', Math.ceil(bbox.height));\n\n\t\t\tvar sw = (s.fontBorderColor != null) ? Math.max(1, this.format(s.scale)) : 0;\n\t\t\tn.setAttribute('stroke-width', sw);\n\t\t\t\n\t\t\t// Workaround for crisp rendering - only required if not exporting\n\t\t\tif (this.root.ownerDocument == document && mxUtils.mod(sw, 2) == 1)\n\t\t\t{\n\t\t\t\tn.setAttribute('transform', 'translate(0.5, 0.5)');\n\t\t\t}\n\t\t\t\n\t\t\tnode.insertBefore(n, node.firstChild);\n\t\t}\n\t}\n};\n\n/**\n * Function: stroke\n * \n * Paints the outline of the current path.\n */\nmxSvgCanvas2D.prototype.stroke = function()\n{\n\tthis.addNode(false, true);\n};\n\n/**\n * Function: fill\n * \n * Fills the current path.\n */\nmxSvgCanvas2D.prototype.fill = function()\n{\n\tthis.addNode(true, false);\n};\n\n/**\n * Function: fillAndStroke\n * \n * Fills and paints the outline of the current path.\n */\nmxSvgCanvas2D.prototype.fillAndStroke = function()\n{\n\tthis.addNode(true, true);\n};\n\n__mxOutput.mxSvgCanvas2D = typeof mxSvgCanvas2D !== 'undefined' ? mxSvgCanvas2D : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n *\n * Class: mxVmlCanvas2D\n * \n * Implements a canvas to be used for rendering VML. Here is an example of implementing a\n * fallback for SVG images which are not supported in VML-based browsers.\n * \n * (code)\n * var mxVmlCanvas2DImage = mxVmlCanvas2D.prototype.image;\n * mxVmlCanvas2D.prototype.image = function(x, y, w, h, src, aspect, flipH, flipV)\n * {\n *   if (src.substring(src.length - 4, src.length) == '.svg')\n *   {\n *     src = 'http://www.jgraph.com/images/mxgraph.gif';\n *   }\n *   \n *   mxVmlCanvas2DImage.apply(this, arguments);\n * };\n * (end)\n * \n * To disable anti-aliasing in the output, use the following code.\n * \n * (code)\n * document.createStyleSheet().cssText = mxClient.VML_PREFIX + '\\\\:*{antialias:false;)}';\n * (end)\n * \n * A description of the public API is available in <mxXmlCanvas2D>. Note that\n * there is a known issue in VML where gradients are painted using the outer\n * bounding box of rotated shapes, not the actual bounds of the shape. See\n * also <text> for plain text label restrictions in shapes for VML.\n */\nvar mxVmlCanvas2D = function(root)\n{\n\tmxAbstractCanvas2D.call(this);\n\n\t/**\n\t * Variable: root\n\t * \n\t * Reference to the container for the SVG content.\n\t */\n\tthis.root = root;\n};\n\n/**\n * Extends mxAbstractCanvas2D\n */\nmxUtils.extend(mxVmlCanvas2D, mxAbstractCanvas2D);\n\n/**\n * Variable: path\n * \n * Holds the current DOM node.\n */\nmxVmlCanvas2D.prototype.node = null;\n\n/**\n * Variable: textEnabled\n * \n * Specifies if text output should be enabledetB. Default is true.\n */\nmxVmlCanvas2D.prototype.textEnabled = true;\n\n/**\n * Variable: moveOp\n * \n * Contains the string used for moving in paths. Default is 'm'.\n */\nmxVmlCanvas2D.prototype.moveOp = 'm';\n\n/**\n * Variable: lineOp\n * \n * Contains the string used for moving in paths. Default is 'l'.\n */\nmxVmlCanvas2D.prototype.lineOp = 'l';\n\n/**\n * Variable: curveOp\n * \n * Contains the string used for bezier curves. Default is 'c'.\n */\nmxVmlCanvas2D.prototype.curveOp = 'c';\n\n/**\n * Variable: closeOp\n * \n * Holds the operator for closing curves. Default is 'x e'.\n */\nmxVmlCanvas2D.prototype.closeOp = 'x';\n\n/**\n * Variable: rotatedHtmlBackground\n * \n * Background color for rotated HTML. Default is ''. This can be set to eg.\n * white to improve rendering of rotated text in VML for IE9.\n */\nmxVmlCanvas2D.prototype.rotatedHtmlBackground = '';\n\n/**\n * Variable: vmlScale\n * \n * Specifies the scale used to draw VML shapes.\n */\nmxVmlCanvas2D.prototype.vmlScale = 1;\n\n/**\n * Function: createElement\n * \n * Creates the given element using the document.\n */\nmxVmlCanvas2D.prototype.createElement = function(name)\n{\n\treturn document.createElement(name);\n};\n\n/**\n * Function: createVmlElement\n * \n * Creates a new element using <createElement> and prefixes the given name with\n * <mxClient.VML_PREFIX>.\n */\nmxVmlCanvas2D.prototype.createVmlElement = function(name)\n{\n\treturn this.createElement(mxClient.VML_PREFIX + ':' + name);\n};\n\n/**\n * Function: addNode\n * \n * Adds the current node to the <root>.\n */\nmxVmlCanvas2D.prototype.addNode = function(filled, stroked)\n{\n\tvar node = this.node;\n\tvar s = this.state;\n\t\n\tif (node != null)\n\t{\n\t\tif (node.nodeName == 'shape')\n\t\t{\n\t\t\t// Checks if the path is not empty\n\t\t\tif (this.path != null && this.path.length > 0)\n\t\t\t{\n\t\t\t\tnode.path = this.path.join(' ') + ' e';\n\t\t\t\tnode.style.width = this.root.style.width;\n\t\t\t\tnode.style.height = this.root.style.height;\n\t\t\t\tnode.coordsize = parseInt(node.style.width) + ' ' + parseInt(node.style.height);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tnode.strokeweight = this.format(Math.max(1, s.strokeWidth * s.scale / this.vmlScale)) + 'px';\n\t\t\n\t\tif (s.shadow)\n\t\t{\n\t\t\tthis.root.appendChild(this.createShadow(node,\n\t\t\t\tfilled && s.fillColor != null,\n\t\t\t\tstroked && s.strokeColor != null));\n\t\t}\n\t\t\n\t\tif (stroked && s.strokeColor != null)\n\t\t{\n\t\t\tnode.stroked = 'true';\n\t\t\tnode.strokecolor = s.strokeColor;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.stroked = 'false';\n\t\t}\n\n\t\tnode.appendChild(this.createStroke());\n\n\t\tif (filled && s.fillColor != null)\n\t\t{\n\t\t\tnode.appendChild(this.createFill());\n\t\t}\n\t\telse if (this.pointerEvents && (node.nodeName != 'shape' ||\n\t\t\tthis.path[this.path.length - 1] == this.closeOp))\n\t\t{\n\t\t\tnode.appendChild(this.createTransparentFill());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.filled = 'false';\n\t\t}\n\n\t\t// LATER: Update existing DOM for performance\n\t\tthis.root.appendChild(node);\n\t}\n};\n\n/**\n * Function: createTransparentFill\n * \n * Creates a transparent fill.\n */\nmxVmlCanvas2D.prototype.createTransparentFill = function()\n{\n\tvar fill = this.createVmlElement('fill');\n\tfill.src = mxClient.imageBasePath + '/transparent.gif';\n\tfill.type = 'tile';\n\t\n\treturn fill;\n};\n\n/**\n * Function: createFill\n * \n * Creates a fill for the current state.\n */\nmxVmlCanvas2D.prototype.createFill = function()\n{\n\tvar s = this.state;\n\t\n\t// Gradients in foregrounds not supported because special gradients\n\t// with bounds must be created for each element in graphics-canvases\n\tvar fill = this.createVmlElement('fill');\n\tfill.color = s.fillColor;\n\n\tif (s.gradientColor != null)\n\t{\n\t\tfill.type = 'gradient';\n\t\tfill.method = 'none';\n\t\tfill.color2 = s.gradientColor;\n\t\tvar angle = 180 - s.rotation;\n\t\t\n\t\tif (s.gradientDirection == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\tangle -= 90 + ((this.root.style.flip == 'x') ? 180 : 0);\n\t\t}\n\t\telse if (s.gradientDirection == mxConstants.DIRECTION_EAST)\n\t\t{\n\t\t\tangle += 90 + ((this.root.style.flip == 'x') ? 180 : 0);\n\t\t}\n\t\telse if (s.gradientDirection == mxConstants.DIRECTION_NORTH)\n\t\t{\n\t\t\tangle -= 180 + ((this.root.style.flip == 'y') ? -180 : 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t angle += ((this.root.style.flip == 'y') ? -180 : 0);\n\t\t}\n\t\t\n\t\tif (this.root.style.flip == 'x' || this.root.style.flip == 'y')\n\t\t{\n\t\t\tangle *= -1;\n\t\t}\n\n\t\t// LATER: Fix outer bounding box for rotated shapes used in VML.\n\t\tfill.angle = mxUtils.mod(angle, 360);\n\t\tfill.opacity = (s.alpha * s.gradientFillAlpha * 100) + '%';\n\t\tfill.setAttribute(mxClient.OFFICE_PREFIX + ':opacity2', (s.alpha * s.gradientAlpha * 100) + '%');\n\t}\n\telse if (s.alpha < 1 || s.fillAlpha < 1)\n\t{\n\t\tfill.opacity = (s.alpha * s.fillAlpha * 100) + '%';\t\t\t\n\t}\n\t\n\treturn fill;\n};\n/**\n * Function: createStroke\n * \n * Creates a fill for the current state.\n */\nmxVmlCanvas2D.prototype.createStroke = function()\n{\n\tvar s = this.state;\n\tvar stroke = this.createVmlElement('stroke');\n\tstroke.endcap = s.lineCap || 'flat';\n\tstroke.joinstyle = s.lineJoin || 'miter';\n\tstroke.miterlimit = s.miterLimit || '10';\n\t\n\tif (s.alpha < 1 || s.strokeAlpha < 1)\n\t{\n\t\tstroke.opacity = (s.alpha * s.strokeAlpha * 100) + '%';\n\t}\n\t\n\tif (s.dashed)\n\t{\n\t\tstroke.dashstyle = this.getVmlDashStyle();\n\t}\n\t\n\treturn stroke;\n};\n\n/**\n * Function: getVmlDashPattern\n * \n * Returns a VML dash pattern for the current dashPattern.\n * See http://msdn.microsoft.com/en-us/library/bb264085(v=vs.85).aspx\n */\nmxVmlCanvas2D.prototype.getVmlDashStyle = function()\n{\n\tvar result = 'dash';\n\t\n\tif (typeof(this.state.dashPattern) === 'string')\n\t{\n\t\tvar tok = this.state.dashPattern.split(' ');\n\t\t\n\t\tif (tok.length > 0 && tok[0] == 1)\n\t\t{\n\t\t\tresult = '0 2';\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: createShadow\n * \n * Creates a shadow for the given node.\n */\nmxVmlCanvas2D.prototype.createShadow = function(node, filled, stroked)\n{\n\tvar s = this.state;\n\tvar rad = -s.rotation * (Math.PI / 180);\n\tvar cos = Math.cos(rad);\n\tvar sin = Math.sin(rad);\n\n\tvar dx = s.shadowDx * s.scale;\n\tvar dy = s.shadowDy * s.scale;\n\n\tif (this.root.style.flip == 'x')\n\t{\n\t\tdx *= -1;\n\t}\n\telse if (this.root.style.flip == 'y')\n\t{\n\t\tdy *= -1;\n\t}\n\t\n\tvar shadow = node.cloneNode(true);\n\tshadow.style.marginLeft = Math.round(dx * cos - dy * sin) + 'px';\n\tshadow.style.marginTop = Math.round(dx * sin + dy * cos) + 'px';\n\n\t// Workaround for wrong cloning in IE8 standards mode\n\tif (document.documentMode == 8)\n\t{\n\t\tshadow.strokeweight = node.strokeweight;\n\t\t\n\t\tif (node.nodeName == 'shape')\n\t\t{\n\t\t\tshadow.path = this.path.join(' ') + ' e';\n\t\t\tshadow.style.width = this.root.style.width;\n\t\t\tshadow.style.height = this.root.style.height;\n\t\t\tshadow.coordsize = parseInt(node.style.width) + ' ' + parseInt(node.style.height);\n\t\t}\n\t}\n\t\n\tif (stroked)\n\t{\n\t\tshadow.strokecolor = s.shadowColor;\n\t\tshadow.appendChild(this.createShadowStroke());\n\t}\n\telse\n\t{\n\t\tshadow.stroked = 'false';\n\t}\n\t\n\tif (filled)\n\t{\n\t\tshadow.appendChild(this.createShadowFill());\n\t}\n\telse\n\t{\n\t\tshadow.filled = 'false';\n\t}\n\t\n\treturn shadow;\n};\n\n/**\n * Function: createShadowFill\n * \n * Creates the fill for the shadow.\n */\nmxVmlCanvas2D.prototype.createShadowFill = function()\n{\n\tvar fill = this.createVmlElement('fill');\n\tfill.color = this.state.shadowColor;\n\tfill.opacity = (this.state.alpha * this.state.shadowAlpha * 100) + '%';\n\t\n\treturn fill;\n};\n\n/**\n * Function: createShadowStroke\n * \n * Creates the stroke for the shadow.\n */\nmxVmlCanvas2D.prototype.createShadowStroke = function()\n{\n\tvar stroke = this.createStroke();\n\tstroke.opacity = (this.state.alpha * this.state.shadowAlpha * 100) + '%';\n\t\n\treturn stroke;\n};\n\n/**\n * Function: rotate\n * \n * Sets the rotation of the canvas. Note that rotation cannot be concatenated.\n */\nmxVmlCanvas2D.prototype.rotate = function(theta, flipH, flipV, cx, cy)\n{\n\tif (flipH && flipV)\n\t{\n\t\ttheta += 180;\n\t}\n\telse if (flipH)\n\t{\n\t\tthis.root.style.flip = 'x';\n\t}\n\telse if (flipV)\n\t{\n\t\tthis.root.style.flip = 'y';\n\t}\n\n\tif (flipH ? !flipV : flipV)\n\t{\n\t\ttheta *= -1;\n\t}\n\n\tthis.root.style.rotation = theta;\n\tthis.state.rotation = this.state.rotation + theta;\n\tthis.state.rotationCx = cx;\n\tthis.state.rotationCy = cy;\n};\n\n/**\n * Function: begin\n * \n * Extends superclass to create path.\n */\nmxVmlCanvas2D.prototype.begin = function()\n{\n\tmxAbstractCanvas2D.prototype.begin.apply(this, arguments);\n\tthis.node = this.createVmlElement('shape');\n\tthis.node.style.position = 'absolute';\n};\n\n/**\n * Function: quadTo\n * \n * Replaces quadratic curve with bezier curve in VML.\n */\nmxVmlCanvas2D.prototype.quadTo = function(x1, y1, x2, y2)\n{\n\tvar s = this.state;\n\n\tvar cpx0 = (this.lastX + s.dx) * s.scale;\n\tvar cpy0 = (this.lastY + s.dy) * s.scale;\n\tvar qpx1 = (x1 + s.dx) * s.scale;\n\tvar qpy1 = (y1 + s.dy) * s.scale;\n\tvar cpx3 = (x2 + s.dx) * s.scale;\n\tvar cpy3 = (y2 + s.dy) * s.scale;\n\t\n\tvar cpx1 = cpx0 + 2/3 * (qpx1 - cpx0);\n\tvar cpy1 = cpy0 + 2/3 * (qpy1 - cpy0);\n\t\n\tvar cpx2 = cpx3 + 2/3 * (qpx1 - cpx3);\n\tvar cpy2 = cpy3 + 2/3 * (qpy1 - cpy3);\n\t\n\tthis.path.push('c ' + this.format(cpx1) + ' ' + this.format(cpy1) +\n\t\t\t' ' + this.format(cpx2) + ' ' + this.format(cpy2) +\n\t\t\t' ' + this.format(cpx3) + ' ' + this.format(cpy3));\n\tthis.lastX = (cpx3 / s.scale) - s.dx;\n\tthis.lastY = (cpy3 / s.scale) - s.dy;\n\t\n};\n\n/**\n * Function: createRect\n * \n * Sets the glass gradient.\n */\nmxVmlCanvas2D.prototype.createRect = function(nodeName, x, y, w, h)\n{\n\tvar s = this.state;\n\tvar n = this.createVmlElement(nodeName);\n\tn.style.position = 'absolute';\n\tn.style.left = this.format((x + s.dx) * s.scale) + 'px';\n\tn.style.top = this.format((y + s.dy) * s.scale) + 'px';\n\tn.style.width = this.format(w * s.scale) + 'px';\n\tn.style.height = this.format(h * s.scale) + 'px';\n\t\n\treturn n;\n};\n\n/**\n * Function: rect\n * \n * Sets the current path to a rectangle.\n */\nmxVmlCanvas2D.prototype.rect = function(x, y, w, h)\n{\n\tthis.node = this.createRect('rect', x, y, w, h);\n};\n\n/**\n * Function: roundrect\n * \n * Sets the current path to a rounded rectangle.\n */\nmxVmlCanvas2D.prototype.roundrect = function(x, y, w, h, dx, dy)\n{\n\tthis.node = this.createRect('roundrect', x, y, w, h);\n\t// SetAttribute needed here for IE8\n\tthis.node.setAttribute('arcsize', Math.max(dx * 100 / w, dy * 100 / h) + '%');\n};\n\n/**\n * Function: ellipse\n * \n * Sets the current path to an ellipse.\n */\nmxVmlCanvas2D.prototype.ellipse = function(x, y, w, h)\n{\n\tthis.node = this.createRect('oval', x, y, w, h);\n};\n\n/**\n * Function: image\n * \n * Paints an image.\n */\nmxVmlCanvas2D.prototype.image = function(x, y, w, h, src, aspect, flipH, flipV)\n{\n\tvar node = null;\n\t\n\tif (!aspect)\n\t{\n\t\tnode = this.createRect('image', x, y, w, h);\n\t\tnode.src = src;\n\t}\n\telse\n\t{\n\t\t// Uses fill with aspect to avoid asynchronous update of size\n\t\tnode = this.createRect('rect', x, y, w, h);\n\t\tnode.stroked = 'false';\n\t\t\n\t\t// Handles image aspect via fill\n\t\tvar fill = this.createVmlElement('fill');\n\t\tfill.aspect = (aspect) ? 'atmost' : 'ignore';\n\t\tfill.rotate = 'true';\n\t\tfill.type = 'frame';\n\t\tfill.src = src;\n\n\t\tnode.appendChild(fill);\n\t}\n\t\n\tif (flipH && flipV)\n\t{\n\t\tnode.style.rotation = '180';\n\t}\n\telse if (flipH)\n\t{\n\t\tnode.style.flip = 'x';\n\t}\n\telse if (flipV)\n\t{\n\t\tnode.style.flip = 'y';\n\t}\n\t\n\tif (this.state.alpha < 1 || this.state.fillAlpha < 1)\n\t{\n\t\t// KNOWN: Borders around transparent images in IE<9. Using fill.opacity\n\t\t// fixes this problem by adding a white background in all IE versions.\n\t\tnode.style.filter += 'alpha(opacity=' + (this.state.alpha * this.state.fillAlpha * 100) + ')';\n\t}\n\n\tthis.root.appendChild(node);\n};\n\n/**\n * Function: createText\n * \n * Creates the innermost element that contains the HTML text.\n */\nmxVmlCanvas2D.prototype.createDiv = function(str, align, valign, overflow)\n{\n\tvar div = this.createElement('div');\n\tvar state = this.state;\n\n\tvar css = '';\n\t\n\tif (state.fontBackgroundColor != null)\n\t{\n\t\tcss += 'background-color:' + mxUtils.htmlEntities(state.fontBackgroundColor) + ';';\n\t}\n\t\n\tif (state.fontBorderColor != null)\n\t{\n\t\tcss += 'border:1px solid ' + mxUtils.htmlEntities(state.fontBorderColor) + ';';\n\t}\n\t\n\tif (mxUtils.isNode(str))\n\t{\n\t\tdiv.appendChild(str);\n\t}\n\telse\n\t{\n\t\tif (overflow != 'fill' && overflow != 'width')\n\t\t{\n\t\t\tvar div2 = this.createElement('div');\n\t\t\tdiv2.style.cssText = css;\n\t\t\tdiv2.style.display = (mxClient.IS_QUIRKS) ? 'inline' : 'inline-block';\n\t\t\tdiv2.style.zoom = '1';\n\t\t\tdiv2.style.textDecoration = 'inherit';\n\t\t\tdiv2.innerHTML = str;\n\t\t\tdiv.appendChild(div2);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdiv.style.cssText = css;\n\t\t\tdiv.innerHTML = str;\n\t\t}\n\t}\n\t\n\tvar style = div.style;\n\n\tstyle.fontSize = (state.fontSize / this.vmlScale) + 'px';\n\tstyle.fontFamily = state.fontFamily;\n\tstyle.color = state.fontColor;\n\tstyle.verticalAlign = 'top';\n\tstyle.textAlign = align || 'left';\n\tstyle.lineHeight = (mxConstants.ABSOLUTE_LINE_HEIGHT) ? (state.fontSize * mxConstants.LINE_HEIGHT / this.vmlScale) + 'px' : mxConstants.LINE_HEIGHT;\n\n\tif ((state.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t{\n\t\tstyle.fontWeight = 'bold';\n\t}\n\n\tif ((state.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t{\n\t\tstyle.fontStyle = 'italic';\n\t}\n\t\n\tif ((state.fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t{\n\t\tstyle.textDecoration = 'underline';\n\t}\n\t\n\treturn div;\n};\n\n/**\n * Function: text\n * \n * Paints the given text. Possible values for format are empty string for plain\n * text and html for HTML markup. Clipping, text background and border are not\n * supported for plain text in VML.\n */\nmxVmlCanvas2D.prototype.text = function(x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation, dir)\n{\n\tif (this.textEnabled && str != null)\n\t{\n\t\tvar s = this.state;\n\t\t\n\t\tif (format == 'html')\n\t\t{\n\t\t\tif (s.rotation != null)\n\t\t\t{\n\t\t\t\tvar pt = this.rotatePoint(x, y, s.rotation, s.rotationCx, s.rotationCy);\n\t\t\t\t\n\t\t\t\tx = pt.x;\n\t\t\t\ty = pt.y;\n\t\t\t}\n\n\t\t\tif (document.documentMode == 8 && !mxClient.IS_EM)\n\t\t\t{\n\t\t\t\tx += s.dx;\n\t\t\t\ty += s.dy;\n\t\t\t\t\n\t\t\t\t// Workaround for rendering offsets\n\t\t\t\tif (overflow != 'fill' && valign == mxConstants.ALIGN_TOP)\n\t\t\t\t{\n\t\t\t\t\ty -= 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tx *= s.scale;\n\t\t\t\ty *= s.scale;\n\t\t\t}\n\n\t\t\t// Adds event transparency in IE8 standards without the transparent background\n\t\t\t// filter which cannot be used due to bugs in the zoomed bounding box (too slow)\n\t\t\t// FIXME: No event transparency if inside v:rect (ie part of shape)\n\t\t\t// KNOWN: Offset wrong for rotated text with word that are longer than the wrapping\n\t\t\t// width in IE8 because real width of text cannot be determined here.\n\t\t\t// This should be fixed in mxText.updateBoundingBox by calling before this and\n\t\t\t// passing the real width to this method if not clipped and wrapped.\n\t\t\tvar abs = (document.documentMode == 8 && !mxClient.IS_EM) ? this.createVmlElement('group') : this.createElement('div');\n\t\t\tabs.style.position = 'absolute';\n\t\t\tabs.style.display = 'inline';\n\t\t\tabs.style.left = this.format(x) + 'px';\n\t\t\tabs.style.top = this.format(y) + 'px';\n\t\t\tabs.style.zoom = s.scale;\n\n\t\t\tvar box = this.createElement('div');\n\t\t\tbox.style.position = 'relative';\n\t\t\tbox.style.display = 'inline';\n\t\t\t\n\t\t\tvar margin = mxUtils.getAlignmentAsPoint(align, valign);\n\t\t\tvar dx = margin.x;\n\t\t\tvar dy = margin.y;\n\n\t\t\tvar div = this.createDiv(str, align, valign, overflow);\n\t\t\tvar inner = this.createElement('div');\n\t\t\t\n\t\t\tif (dir != null)\n\t\t\t{\n\t\t\t\tdiv.setAttribute('dir', dir);\n\t\t\t}\n\n\t\t\tif (wrap && w > 0)\n\t\t\t{\n\t\t\t\tif (!clip)\n\t\t\t\t{\n\t\t\t\t\tdiv.style.width = Math.round(w) + 'px';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiv.style.wordWrap = mxConstants.WORD_WRAP;\n\t\t\t\tdiv.style.whiteSpace = 'normal';\n\t\t\t\t\n\t\t\t\t// LATER: Check if other cases need to be handled\n\t\t\t\tif (div.style.wordWrap == 'break-word')\n\t\t\t\t{\n\t\t\t\t\tvar tmp = div;\n\t\t\t\t\t\n\t\t\t\t\tif (tmp.firstChild != null && tmp.firstChild.nodeName == 'DIV')\n\t\t\t\t\t{\n\t\t\t\t\t\ttmp.firstChild.style.width = '100%';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdiv.style.whiteSpace = 'nowrap';\n\t\t\t}\n\t\t\t\n\t\t\tvar rot = s.rotation + (rotation || 0);\n\t\t\t\n\t\t\tif (this.rotateHtml && rot != 0)\n\t\t\t{\n\t\t\t\tinner.style.display = 'inline';\n\t\t\t\tinner.style.zoom = '1';\n\t\t\t\tinner.appendChild(div);\n\n\t\t\t\t// Box not needed for rendering in IE8 standards\n\t\t\t\tif (document.documentMode == 8 && !mxClient.IS_EM && this.root.nodeName != 'DIV')\n\t\t\t\t{\n\t\t\t\t\tbox.appendChild(inner);\n\t\t\t\t\tabs.appendChild(box);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tabs.appendChild(inner);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (document.documentMode == 8 && !mxClient.IS_EM)\n\t\t\t{\n\t\t\t\tbox.appendChild(div);\n\t\t\t\tabs.appendChild(box);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdiv.style.display = 'inline';\n\t\t\t\tabs.appendChild(div);\n\t\t\t}\n\t\t\t\n\t\t\t// Inserts the node into the DOM\n\t\t\tif (this.root.nodeName != 'DIV')\n\t\t\t{\n\t\t\t\t// Rectangle to fix position in group\n\t\t\t\tvar rect = this.createVmlElement('rect');\n\t\t\t\trect.stroked = 'false';\n\t\t\t\trect.filled = 'false';\n\n\t\t\t\trect.appendChild(abs);\n\t\t\t\tthis.root.appendChild(rect);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.root.appendChild(abs);\n\t\t\t}\n\t\t\t\n\t\t\tif (clip)\n\t\t\t{\n\t\t\t\tdiv.style.overflow = 'hidden';\n\t\t\t\tdiv.style.width = Math.round(w) + 'px';\n\t\t\t\t\n\t\t\t\tif (!mxClient.IS_QUIRKS)\n\t\t\t\t{\n\t\t\t\t\tdiv.style.maxHeight = Math.round(h) + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (overflow == 'fill')\n\t\t\t{\n\t\t\t\t// KNOWN: Affects horizontal alignment in quirks\n\t\t\t\t// but fill should only be used with align=left\n\t\t\t\tdiv.style.overflow = 'hidden';\n\t\t\t\tdiv.style.width = (Math.max(0, w) + 1) + 'px';\n\t\t\t\tdiv.style.height = (Math.max(0, h) + 1) + 'px';\n\t\t\t}\n\t\t\telse if (overflow == 'width')\n\t\t\t{\n\t\t\t\t// KNOWN: Affects horizontal alignment in quirks\n\t\t\t\t// but fill should only be used with align=left\n\t\t\t\tdiv.style.overflow = 'hidden';\n\t\t\t\tdiv.style.width = (Math.max(0, w) + 1) + 'px';\n\t\t\t\tdiv.style.maxHeight = (Math.max(0, h) + 1) + 'px';\n\t\t\t}\n\t\t\t\n\t\t\tif (this.rotateHtml && rot != 0)\n\t\t\t{\n\t\t\t\tvar rad = rot * (Math.PI / 180);\n\t\t\t\t\n\t\t\t\t// Precalculate cos and sin for the rotation\n\t\t\t\tvar real_cos = parseFloat(parseFloat(Math.cos(rad)).toFixed(8));\n\t\t\t\tvar real_sin = parseFloat(parseFloat(Math.sin(-rad)).toFixed(8));\n\n\t\t\t\trad %= 2 * Math.PI;\n\t\t\t\tif (rad < 0) rad += 2 * Math.PI;\n\t\t\t\trad %= Math.PI;\n\t\t\t\tif (rad > Math.PI / 2) rad = Math.PI - rad;\n\t\t\t\t\n\t\t\t\tvar cos = Math.cos(rad);\n\t\t\t\tvar sin = Math.sin(rad);\n\n\t\t\t\t// Adds div to document to measure size\n\t\t\t\tif (document.documentMode == 8 && !mxClient.IS_EM)\n\t\t\t\t{\n\t\t\t\t\tdiv.style.display = 'inline-block';\n\t\t\t\t\tinner.style.display = 'inline-block';\n\t\t\t\t\tbox.style.display = 'inline-block';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiv.style.visibility = 'hidden';\n\t\t\t\tdiv.style.position = 'absolute';\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t\t\n\t\t\t\tvar sizeDiv = div;\n\t\t\t\t\n\t\t\t\tif (sizeDiv.firstChild != null && sizeDiv.firstChild.nodeName == 'DIV')\n\t\t\t\t{\n\t\t\t\t\tsizeDiv = sizeDiv.firstChild;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar tmp = sizeDiv.offsetWidth + 3;\n\t\t\t\tvar oh = sizeDiv.offsetHeight;\n\t\t\t\t\n\t\t\t\tif (clip)\n\t\t\t\t{\n\t\t\t\t\tw = Math.min(w, tmp);\n\t\t\t\t\toh = Math.min(oh, h);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tw = tmp;\n\t\t\t\t}\n\n\t\t\t\t// Handles words that are longer than the given wrapping width\n\t\t\t\tif (wrap)\n\t\t\t\t{\n\t\t\t\t\tdiv.style.width = w + 'px';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Simulates max-height in quirks\n\t\t\t\tif (mxClient.IS_QUIRKS && (clip || overflow == 'width') && oh > h)\n\t\t\t\t{\n\t\t\t\t\toh = h;\n\t\t\t\t\t\n\t\t\t\t\t// Quirks does not support maxHeight\n\t\t\t\t\tdiv.style.height = oh + 'px';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\th = oh;\n\n\t\t\t\tvar top_fix = (h - h * cos + w * -sin) / 2 - real_sin * w * (dx + 0.5) + real_cos * h * (dy + 0.5);\n\t\t\t\tvar left_fix = (w - w * cos + h * -sin) / 2 + real_cos * w * (dx + 0.5) + real_sin * h * (dy + 0.5);\n\n\t\t\t\tif (abs.nodeName == 'group' && this.root.nodeName == 'DIV')\n\t\t\t\t{\n\t\t\t\t\t// Workaround for bug where group gets moved away if left and top are non-zero in IE8 standards\n\t\t\t\t\tvar pos = this.createElement('div');\n\t\t\t\t\tpos.style.display = 'inline-block';\n\t\t\t\t\tpos.style.position = 'absolute';\n\t\t\t\t\tpos.style.left = this.format(x + (left_fix - w / 2) * s.scale) + 'px';\n\t\t\t\t\tpos.style.top = this.format(y + (top_fix - h / 2) * s.scale) + 'px';\n\t\t\t\t\t\n\t\t\t\t\tabs.parentNode.appendChild(pos);\n\t\t\t\t\tpos.appendChild(abs);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar sc = (document.documentMode == 8 && !mxClient.IS_EM) ? 1 : s.scale;\n\t\t\t\t\t\n\t\t\t\t\tabs.style.left = this.format(x + (left_fix - w / 2) * sc) + 'px';\n\t\t\t\t\tabs.style.top = this.format(y + (top_fix - h / 2) * sc) + 'px';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// KNOWN: Rotated text rendering quality is bad for IE9 quirks\n\t\t\t\tinner.style.filter = \"progid:DXImageTransform.Microsoft.Matrix(M11=\"+real_cos+\", M12=\"+\n\t\t\t\t\treal_sin+\", M21=\"+(-real_sin)+\", M22=\"+real_cos+\", sizingMethod='auto expand')\";\n\t\t\t\tinner.style.backgroundColor = this.rotatedHtmlBackground;\n\t\t\t\t\n\t\t\t\tif (this.state.alpha < 1)\n\t\t\t\t{\n\t\t\t\t\tinner.style.filter += 'alpha(opacity=' + (this.state.alpha * 100) + ')';\n\t\t\t\t}\n\n\t\t\t\t// Restore parent node for DIV\n\t\t\t\tinner.appendChild(div);\n\t\t\t\tdiv.style.position = '';\n\t\t\t\tdiv.style.visibility = '';\n\t\t\t}\n\t\t\telse if (document.documentMode != 8 || mxClient.IS_EM)\n\t\t\t{\n\t\t\t\tdiv.style.verticalAlign = 'top';\n\t\t\t\t\n\t\t\t\tif (this.state.alpha < 1)\n\t\t\t\t{\n\t\t\t\t\tabs.style.filter = 'alpha(opacity=' + (this.state.alpha * 100) + ')';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Adds div to document to measure size\n\t\t\t\tvar divParent = div.parentNode;\n\t\t\t\tdiv.style.visibility = 'hidden';\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t\t\n\t\t\t\tw = div.offsetWidth;\n\t\t\t\tvar oh = div.offsetHeight;\n\t\t\t\t\n\t\t\t\t// Simulates max-height in quirks\n\t\t\t\tif (mxClient.IS_QUIRKS && clip && oh > h)\n\t\t\t\t{\n\t\t\t\t\toh = h;\n\t\t\t\t\t\n\t\t\t\t\t// Quirks does not support maxHeight\n\t\t\t\t\tdiv.style.height = oh + 'px';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\th = oh;\n\t\t\t\t\n\t\t\t\tdiv.style.visibility = '';\n\t\t\t\tdivParent.appendChild(div);\n\t\t\t\t\n\t\t\t\tabs.style.left = this.format(x + w * dx * this.state.scale) + 'px';\n\t\t\t\tabs.style.top = this.format(y + h * dy * this.state.scale) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.state.alpha < 1)\n\t\t\t\t{\n\t\t\t\t\tdiv.style.filter = 'alpha(opacity=' + (this.state.alpha * 100) + ')';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Faster rendering in IE8 without offsetWidth/Height\n\t\t\t\tbox.style.left = (dx * 100) + '%';\n\t\t\t\tbox.style.top = (dy * 100) + '%';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.plainText(x, y, w, h, mxUtils.htmlEntities(str, false), align, valign, wrap, format, overflow, clip, rotation, dir);\n\t\t}\n\t}\n};\n\n/**\n * Function: plainText\n * \n * Paints the outline of the current path.\n */\nmxVmlCanvas2D.prototype.plainText = function(x, y, w, h, str, align, valign, wrap, format, overflow, clip, rotation, dir)\n{\n\t// TextDirection is ignored since this code is not used (format is always HTML in the text function)\n\tvar s = this.state;\n\tx = (x + s.dx) * s.scale;\n\ty = (y + s.dy) * s.scale;\n\t\n\tvar node = this.createVmlElement('shape');\n\tnode.style.width = '1px';\n\tnode.style.height = '1px';\n\tnode.stroked = 'false';\n\n\tvar fill = this.createVmlElement('fill');\n\tfill.color = s.fontColor;\n\tfill.opacity = (s.alpha * 100) + '%';\n\tnode.appendChild(fill);\n\t\n\tvar path = this.createVmlElement('path');\n\tpath.textpathok = 'true';\n\tpath.v = 'm ' + this.format(0) + ' ' + this.format(0) + ' l ' + this.format(1) + ' ' + this.format(0);\n\t\n\tnode.appendChild(path);\n\t\n\t// KNOWN: Font family and text decoration ignored\n\tvar tp = this.createVmlElement('textpath');\n\ttp.style.cssText = 'v-text-align:' + align;\n\ttp.style.align = align;\n\ttp.style.fontFamily = s.fontFamily;\n\ttp.string = str;\n\ttp.on = 'true';\n\t\n\t// Scale via fontsize instead of node.style.zoom for correct offsets in IE8\n\tvar size = s.fontSize * s.scale / this.vmlScale;\n\ttp.style.fontSize = size + 'px';\n\t\n\t// Bold\n\tif ((s.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t{\n\t\ttp.style.fontWeight = 'bold';\n\t}\n\t\n\t// Italic\n\tif ((s.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t{\n\t\ttp.style.fontStyle = 'italic';\n\t}\n\n\t// Underline\n\tif ((s.fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t{\n\t\ttp.style.textDecoration = 'underline';\n\t}\n\n\tvar lines = str.split('\\n');\n\tvar textHeight = size + (lines.length - 1) * size * mxConstants.LINE_HEIGHT;\n\tvar dx = 0;\n\tvar dy = 0;\n\n\tif (valign == mxConstants.ALIGN_BOTTOM)\n\t{\n\t\tdy = - textHeight / 2;\n\t}\n\telse if (valign != mxConstants.ALIGN_MIDDLE) // top\n\t{\n\t\tdy = textHeight / 2;\n\t}\n\n\tif (rotation != null)\n\t{\n\t\tnode.style.rotation = rotation;\n\t\tvar rad = rotation * (Math.PI / 180);\n\t\tdx = Math.sin(rad) * dy;\n\t\tdy = Math.cos(rad) * dy;\n\t}\n\n\t// FIXME: Clipping is relative to bounding box\n\t/*if (clip)\n\t{\n\t\tnode.style.clip = 'rect(0px ' + this.format(w) + 'px ' + this.format(h) + 'px 0px)';\n\t}*/\n\t\n\tnode.appendChild(tp);\n\tnode.style.left = this.format(x - dx) + 'px';\n\tnode.style.top = this.format(y + dy) + 'px';\n\t\n\tthis.root.appendChild(node);\n};\n\n/**\n * Function: stroke\n * \n * Paints the outline of the current path.\n */\nmxVmlCanvas2D.prototype.stroke = function()\n{\n\tthis.addNode(false, true);\n};\n\n/**\n * Function: fill\n * \n * Fills the current path.\n */\nmxVmlCanvas2D.prototype.fill = function()\n{\n\tthis.addNode(true, false);\n};\n\n/**\n * Function: fillAndStroke\n * \n * Fills and paints the outline of the current path.\n */\nmxVmlCanvas2D.prototype.fillAndStroke = function()\n{\n\tthis.addNode(true, true);\n};\n\n__mxOutput.mxVmlCanvas2D = typeof mxVmlCanvas2D !== 'undefined' ? mxVmlCanvas2D : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGuide\n *\n * Implements the alignment of selection cells to other cells in the graph.\n * \n * Constructor: mxGuide\n * \n * Constructs a new guide object.\n */\nfunction mxGuide(graph, states)\n{\n\tthis.graph = graph;\n\tthis.setStates(states);\n};\n\n/**\n * Variable: graph\n *\n * Reference to the enclosing <mxGraph> instance.\n */\nmxGuide.prototype.graph = null;\n\n/**\n * Variable: states\n * \n * Contains the <mxCellStates> that are used for alignment.\n */\nmxGuide.prototype.states = null;\n\n/**\n * Variable: horizontal\n *\n * Specifies if horizontal guides are enabled. Default is true.\n */\nmxGuide.prototype.horizontal = true;\n\n/**\n * Variable: vertical\n *\n * Specifies if vertical guides are enabled. Default is true.\n */\nmxGuide.prototype.vertical = true;\n\n/**\n * Variable: guideX\n *\n * Holds the <mxShape> for the horizontal guide.\n */\nmxGuide.prototype.guideX = null;\n\n/**\n * Variable: guideY\n *\n * Holds the <mxShape> for the vertical guide.\n */\nmxGuide.prototype.guideY = null;\n\n/**\n * Variable: rounded\n *\n * Specifies if rounded coordinates should be used. Default is false.\n */\nmxGuide.prototype.rounded = false;\n\n/**\n * Variable: tolerance\n * \n * Default tolerance in px if grid is disabled. Default is 2.\n */\nmxGuide.prototype.tolerance = 2;\n\n/**\n * Function: setStates\n * \n * Sets the <mxCellStates> that should be used for alignment.\n */\nmxGuide.prototype.setStates = function(states)\n{\n\tthis.states = states;\n};\n\n/**\n * Function: isEnabledForEvent\n * \n * Returns true if the guide should be enabled for the given native event. This\n * implementation always returns true.\n */\nmxGuide.prototype.isEnabledForEvent = function(evt)\n{\n\treturn true;\n};\n\n/**\n * Function: getGuideTolerance\n * \n * Returns the tolerance for the guides. Default value is gridSize / 2.\n */\nmxGuide.prototype.getGuideTolerance = function(gridEnabled)\n{\n\treturn (gridEnabled && this.graph.gridEnabled) ? this.graph.gridSize / 2 : this.tolerance;\n};\n\n/**\n * Function: createGuideShape\n * \n * Returns the mxShape to be used for painting the respective guide. This\n * implementation returns a new, dashed and crisp <mxPolyline> using\n * <mxConstants.GUIDE_COLOR> and <mxConstants.GUIDE_STROKEWIDTH> as the format.\n * \n * Parameters:\n * \n * horizontal - Boolean that specifies which guide should be created.\n */\nmxGuide.prototype.createGuideShape = function(horizontal)\n{\n\tvar guide = new mxPolyline([], mxConstants.GUIDE_COLOR, mxConstants.GUIDE_STROKEWIDTH);\n\tguide.isDashed = true;\n\t\n\treturn guide;\n};\n\n/**\n * Function: isStateIgnored\n * \n * Returns true if the given state should be ignored.\n */\nmxGuide.prototype.isStateIgnored = function(state)\n{\n\treturn false;\n};\n\n/**\n * Function: move\n * \n * Moves the <bounds> by the given <mxPoint> and returnt the snapped point.\n */\nmxGuide.prototype.move = function(bounds, delta, gridEnabled, clone)\n{\n\tif (this.states != null && (this.horizontal || this.vertical) && bounds != null && delta != null)\n\t{\n\t\tvar scale = this.graph.getView().scale;\n\t\tvar tt = this.getGuideTolerance(gridEnabled) * scale;\n\t\tvar b = bounds.clone();\n\t\tb.x += delta.x;\n\t\tb.y += delta.y;\n\t\tvar overrideX = false;\n\t\tvar stateX = null;\n\t\tvar valueX = null;\n\t\tvar overrideY = false;\n\t\tvar stateY = null;\n\t\tvar valueY = null;\n\t\tvar ttX = tt;\n\t\tvar ttY = tt;\n\t\tvar left = b.x;\n\t\tvar right = b.x + b.width;\n\t\tvar center = b.getCenterX();\n\t\tvar top = b.y;\n\t\tvar bottom = b.y + b.height;\n\t\tvar middle = b.getCenterY();\n\t\n\t\t// Snaps the left, center and right to the given x-coordinate\n\t\tfunction snapX(x, state, centerAlign)\n\t\t{\n\t\t\tvar override = false;\n\t\t\t\n\t\t\tif (centerAlign && Math.abs(x - center) < ttX)\n\t\t\t{\n\t\t\t\tdelta.x = x - bounds.getCenterX();\n\t\t\t\tttX = Math.abs(x - center);\n\t\t\t\toverride = true;\n\t\t\t}\n\t\t\telse if (!centerAlign)\n\t\t\t{\n\t\t\t\tif (Math.abs(x - left) < ttX)\n\t\t\t\t{\n\t\t\t\t\tdelta.x = x - bounds.x;\n\t\t\t\t\tttX = Math.abs(x - left);\n\t\t\t\t\toverride = true;\n\t\t\t\t}\n\t\t\t\telse if (Math.abs(x - right) < ttX)\n\t\t\t\t{\n\t\t\t\t\tdelta.x = x - bounds.x - bounds.width;\n\t\t\t\t\tttX = Math.abs(x - right);\n\t\t\t\t\toverride = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (override)\n\t\t\t{\n\t\t\t\tstateX = state;\n\t\t\t\tvalueX = x;\n\t\t\t\t\n\t\t\t\tif (this.guideX == null)\n\t\t\t\t{\n\t\t\t\t\tthis.guideX = this.createGuideShape(true);\n\t\t\t\t\t\n\t\t\t\t\t// Makes sure to use either VML or SVG shapes in order to implement\n\t\t\t\t\t// event-transparency on the background area of the rectangle since\n\t\t\t\t\t// HTML shapes do not let mouseevents through even when transparent\n\t\t\t\t\tthis.guideX.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\t\t\t\tmxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\t\t\t\t\tthis.guideX.pointerEvents = false;\n\t\t\t\t\tthis.guideX.init(this.graph.getView().getOverlayPane());\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\toverrideX = overrideX || override;\n\t\t};\n\t\t\n\t\t// Snaps the top, middle or bottom to the given y-coordinate\n\t\tfunction snapY(y, state, centerAlign)\n\t\t{\n\t\t\tvar override = false;\n\t\t\t\n\t\t\tif (centerAlign && Math.abs(y - middle) < ttY)\n\t\t\t{\n\t\t\t\tdelta.y = y - bounds.getCenterY();\n\t\t\t\tttY = Math.abs(y -  middle);\n\t\t\t\toverride = true;\n\t\t\t}\n\t\t\telse if (!centerAlign)\n\t\t\t{\n\t\t\t\tif (Math.abs(y - top) < ttY)\n\t\t\t\t{\n\t\t\t\t\tdelta.y = y - bounds.y;\n\t\t\t\t\tttY = Math.abs(y - top);\n\t\t\t\t\toverride = true;\n\t\t\t\t}\n\t\t\t\telse if (Math.abs(y - bottom) < ttY)\n\t\t\t\t{\n\t\t\t\t\tdelta.y = y - bounds.y - bounds.height;\n\t\t\t\t\tttY = Math.abs(y - bottom);\n\t\t\t\t\toverride = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (override)\n\t\t\t{\n\t\t\t\tstateY = state;\n\t\t\t\tvalueY = y;\n\t\t\t\t\n\t\t\t\tif (this.guideY == null)\n\t\t\t\t{\n\t\t\t\t\tthis.guideY = this.createGuideShape(false);\n\t\t\t\t\t\n\t\t\t\t\t// Makes sure to use either VML or SVG shapes in order to implement\n\t\t\t\t\t// event-transparency on the background area of the rectangle since\n\t\t\t\t\t// HTML shapes do not let mouseevents through even when transparent\n\t\t\t\t\tthis.guideY.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\t\t\t\tmxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\t\t\t\t\tthis.guideY.pointerEvents = false;\n\t\t\t\t\tthis.guideY.init(this.graph.getView().getOverlayPane());\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\toverrideY = overrideY || override;\n\t\t};\n\t\t\n\t\tfor (var i = 0; i < this.states.length; i++)\n\t\t{\n\t\t\tvar state =  this.states[i];\n\t\t\t\n\t\t\tif (state != null && !this.isStateIgnored(state))\n\t\t\t{\n\t\t\t\t// Align x\n\t\t\t\tif (this.horizontal)\n\t\t\t\t{\n\t\t\t\t\tsnapX.call(this, state.getCenterX(), state, true);\n\t\t\t\t\tsnapX.call(this, state.x, state, false);\n\t\t\t\t\tsnapX.call(this, state.x + state.width, state, false);\n\t\t\t\t\t\n\t\t\t\t\t// Aligns left and right of shape to center of page\n\t\t\t\t\tif (state.cell == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tsnapX.call(this, state.getCenterX(), state, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\t// Align y\n\t\t\t\tif (this.vertical)\n\t\t\t\t{\n\t\t\t\t\tsnapY.call(this, state.getCenterY(), state, true);\n\t\t\t\t\tsnapY.call(this, state.y, state, false);\n\t\t\t\t\tsnapY.call(this, state.y + state.height, state, false);\n\t\t\t\t\t\n\t\t\t\t\t// Aligns left and right of shape to center of page\n\t\t\t\t\tif (state.cell == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tsnapY.call(this, state.getCenterY(), state, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Moves cells to the raster if not aligned\n\t\tthis.graph.snapDelta(delta, bounds, !gridEnabled, overrideX, overrideY);\n\t\tdelta = this.getDelta(bounds, stateX, delta.x, stateY, delta.y)\n\t\t\n\t\t// Redraws the guides\n\t\tvar c = this.graph.container;\n\t\t\n\t\tif (!overrideX && this.guideX != null)\n\t\t{\n\t\t\tthis.guideX.node.style.visibility = 'hidden';\n\t\t}\n\t\telse if (this.guideX != null)\n\t\t{\n\t\t\tvar minY = null;\n        \tvar maxY = null;\n        \t\n\t\t\tif (stateX != null && bounds != null)\n\t\t\t{\n\t\t\t\tminY = Math.min(bounds.y + delta.y - this.graph.panDy, stateX.y);\n\t\t\t\tmaxY = Math.max(bounds.y + bounds.height + delta.y - this.graph.panDy, stateX.y + stateX.height);\n\t\t\t}\n\t\t\t\n\t\t\tif (minY != null && maxY != null)\n\t\t\t{\n\t\t\t\tthis.guideX.points = [new mxPoint(valueX, minY), new mxPoint(valueX, maxY)];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.guideX.points = [new mxPoint(valueX, -this.graph.panDy),\n\t\t\t\t\tnew mxPoint(valueX, c.scrollHeight - 3 - this.graph.panDy)];\n\t\t\t}\n\t\t\t\n\t\t\tthis.guideX.stroke = this.getGuideColor(stateX, true);\n\t\t\tthis.guideX.node.style.visibility = 'visible';\n\t\t\tthis.guideX.redraw();\n\t\t}\n\t\t\n\t\tif (!overrideY && this.guideY != null)\n\t\t{\n\t\t\tthis.guideY.node.style.visibility = 'hidden';\n\t\t}\n\t\telse if (this.guideY != null)\n\t\t{\n\t\t\tvar minX = null;\n        \tvar maxX = null;\n        \t\n\t\t\tif (stateY != null && bounds != null)\n\t\t\t{\n\t\t\t\tminX = Math.min(bounds.x + delta.x - this.graph.panDx, stateY.x);\n\t\t\t\tmaxX = Math.max(bounds.x + bounds.width + delta.x - this.graph.panDx, stateY.x + stateY.width);\n\t\t\t}\n\t\t\t\n\t\t\tif (minX != null && maxX != null)\n\t\t\t{\n\t\t\t\tthis.guideY.points = [new mxPoint(minX, valueY), new mxPoint(maxX, valueY)];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.guideY.points = [new mxPoint(-this.graph.panDx, valueY),\n\t\t\t\t\tnew mxPoint(c.scrollWidth - 3 - this.graph.panDx, valueY)];\n\t\t\t}\n\t\t\t\n\t\t\tthis.guideY.stroke = this.getGuideColor(stateY, false);\n\t\t\tthis.guideY.node.style.visibility = 'visible';\n\t\t\tthis.guideY.redraw();\n\t\t}\n\t}\n\t\n\treturn delta;\n};\n\n/**\n * Function: getDelta\n * \n * Rounds to pixels for virtual states (eg. page guides)\n */\nmxGuide.prototype.getDelta = function(bounds, stateX, dx, stateY, dy)\n{\n\tvar s = this.graph.view.scale;\n\t\n\tif (this.rounded || (stateX != null && stateX.cell == null))\n\t{\n\t\tdx = Math.round((bounds.x + dx) / s) * s - bounds.x;\n\t}\n\n\tif (this.rounded || (stateY != null && stateY.cell == null))\n\t{\n\t\tdy = Math.round((bounds.y + dy) / s) * s - bounds.y;\n\t}\n\t\n\treturn new mxPoint(dx, dy);\n};\n\n/**\n * Function: getGuideColor\n * \n * Returns the color for the given state.\n */\nmxGuide.prototype.getGuideColor = function(state, horizontal)\n{\n\treturn mxConstants.GUIDE_COLOR;\n};\n\n/**\n * Function: hide\n * \n * Hides all current guides.\n */\nmxGuide.prototype.hide = function()\n{\n\tthis.setVisible(false);\n};\n\n/**\n * Function: setVisible\n * \n * Shows or hides the current guides.\n */\nmxGuide.prototype.setVisible = function(visible)\n{\n\tif (this.guideX != null)\n\t{\n\t\tthis.guideX.node.style.visibility = (visible) ? 'visible' : 'hidden';\n\t}\n\t\n\tif (this.guideY != null)\n\t{\n\t\tthis.guideY.node.style.visibility = (visible) ? 'visible' : 'hidden';\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys all resources that this object uses.\n */\nmxGuide.prototype.destroy = function()\n{\n\tif (this.guideX != null)\n\t{\n\t\tthis.guideX.destroy();\n\t\tthis.guideX = null;\n\t}\n\t\n\tif (this.guideY != null)\n\t{\n\t\tthis.guideY.destroy();\n\t\tthis.guideY = null;\n\t}\n};\n\n__mxOutput.mxGuide = typeof mxGuide !== 'undefined' ? mxGuide : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxShape\n *\n * Base class for all shapes. A shape in mxGraph is a\n * separate implementation for SVG, VML and HTML. Which\n * implementation to use is controlled by the <dialect>\n * property which is assigned from within the <mxCellRenderer>\n * when the shape is created. The dialect must be assigned\n * for a shape, and it does normally depend on the browser and\n * the confiuration of the graph (see <mxGraph> rendering hint).\n *\n * For each supported shape in SVG and VML, a corresponding\n * shape exists in mxGraph, namely for text, image, rectangle,\n * rhombus, ellipse and polyline. The other shapes are a\n * combination of these shapes (eg. label and swimlane)\n * or they consist of one or more (filled) path objects\n * (eg. actor and cylinder). The HTML implementation is\n * optional but may be required for a HTML-only view of\n * the graph.\n *\n * Custom Shapes:\n *\n * To extend from this class, the basic code looks as follows.\n * In the special case where the custom shape consists only of\n * one filled region or one filled region and an additional stroke\n * the <mxActor> and <mxCylinder> should be subclassed,\n * respectively.\n *\n * (code)\n * function CustomShape() { }\n * \n * CustomShape.prototype = new mxShape();\n * CustomShape.prototype.constructor = CustomShape; \n * (end)\n *\n * To register a custom shape in an existing graph instance,\n * one must register the shape under a new name in the graph's\n * cell renderer as follows:\n *\n * (code)\n * mxCellRenderer.registerShape('customShape', CustomShape);\n * (end)\n *\n * The second argument is the name of the constructor.\n *\n * In order to use the shape you can refer to the given name above\n * in a stylesheet. For example, to change the shape for the default\n * vertex style, the following code is used:\n *\n * (code)\n * var style = graph.getStylesheet().getDefaultVertexStyle();\n * style[mxConstants.STYLE_SHAPE] = 'customShape';\n * (end)\n * \n * Constructor: mxShape\n *\n * Constructs a new shape.\n */\nfunction mxShape(stencil)\n{\n\tthis.stencil = stencil;\n\tthis.initStyles();\n};\n\n/**\n * Variable: dialect\n *\n * Holds the dialect in which the shape is to be painted.\n * This can be one of the DIALECT constants in <mxConstants>.\n */\nmxShape.prototype.dialect = null;\n\n/**\n * Variable: scale\n *\n * Holds the scale in which the shape is being painted.\n */\nmxShape.prototype.scale = 1;\n\n/**\n * Variable: antiAlias\n * \n * Rendering hint for configuring the canvas.\n */\nmxShape.prototype.antiAlias = true;\n\n/**\n * Variable: minSvgStrokeWidth\n * \n * Minimum stroke width for SVG output.\n */\nmxShape.prototype.minSvgStrokeWidth = 1;\n\n/**\n * Variable: bounds\n *\n * Holds the <mxRectangle> that specifies the bounds of this shape.\n */\nmxShape.prototype.bounds = null;\n\n/**\n * Variable: points\n *\n * Holds the array of <mxPoints> that specify the points of this shape.\n */\nmxShape.prototype.points = null;\n\n/**\n * Variable: node\n *\n * Holds the outermost DOM node that represents this shape.\n */\nmxShape.prototype.node = null;\n \n/**\n * Variable: state\n * \n * Optional reference to the corresponding <mxCellState>.\n */\nmxShape.prototype.state = null;\n\n/**\n * Variable: style\n *\n * Optional reference to the style of the corresponding <mxCellState>.\n */\nmxShape.prototype.style = null;\n\n/**\n * Variable: boundingBox\n *\n * Contains the bounding box of the shape, that is, the smallest rectangle\n * that includes all pixels of the shape.\n */\nmxShape.prototype.boundingBox = null;\n\n/**\n * Variable: stencil\n *\n * Holds the <mxStencil> that defines the shape.\n */\nmxShape.prototype.stencil = null;\n\n/**\n * Variable: svgStrokeTolerance\n *\n * Event-tolerance for SVG strokes (in px). Default is 8. This is only passed\n * to the canvas in <createSvgCanvas> if <pointerEvents> is true.\n */\nmxShape.prototype.svgStrokeTolerance = 8;\n\n/**\n * Variable: pointerEvents\n * \n * Specifies if pointer events should be handled. Default is true.\n */\nmxShape.prototype.pointerEvents = true;\n\n/**\n * Variable: svgPointerEvents\n * \n * Specifies if pointer events should be handled. Default is true.\n */\nmxShape.prototype.svgPointerEvents = 'all';\n\n/**\n * Variable: shapePointerEvents\n * \n * Specifies if pointer events outside of shape should be handled. Default\n * is false.\n */\nmxShape.prototype.shapePointerEvents = false;\n\n/**\n * Variable: stencilPointerEvents\n * \n * Specifies if pointer events outside of stencils should be handled. Default\n * is false. Set this to true for backwards compatibility with the 1.x branch.\n */\nmxShape.prototype.stencilPointerEvents = false;\n\n/**\n * Variable: vmlScale\n * \n * Scale for improving the precision of VML rendering. Default is 1.\n */\nmxShape.prototype.vmlScale = 1;\n\n/**\n * Variable: outline\n * \n * Specifies if the shape should be drawn as an outline. This disables all\n * fill colors and can be used to disable other drawing states that should\n * not be painted for outlines. Default is false. This should be set before\n * calling <apply>.\n */\nmxShape.prototype.outline = false;\n\n/**\n * Variable: visible\n * \n * Specifies if the shape is visible. Default is true.\n */\nmxShape.prototype.visible = true;\n\n/**\n * Variable: useSvgBoundingBox\n * \n * Allows to use the SVG bounding box in SVG. Default is false for performance\n * reasons.\n */\nmxShape.prototype.useSvgBoundingBox = false;\n\n/**\n * Function: init\n *\n * Initializes the shape by creaing the DOM node using <create>\n * and adding it into the given container.\n *\n * Parameters:\n *\n * container - DOM node that will contain the shape.\n */\nmxShape.prototype.init = function(container)\n{\n\tif (this.node == null)\n\t{\n\t\tthis.node = this.create(container);\n\t\t\n\t\tif (container != null)\n\t\t{\n\t\t\tcontainer.appendChild(this.node);\n\t\t}\n\t}\n};\n\n/**\n * Function: initStyles\n *\n * Sets the styles to their default values.\n */\nmxShape.prototype.initStyles = function(container)\n{\n\tthis.strokewidth = 1;\n\tthis.rotation = 0;\n\tthis.opacity = 100;\n\tthis.fillOpacity = 100;\n\tthis.strokeOpacity = 100;\n\tthis.flipH = false;\n\tthis.flipV = false;\n};\n\n/**\n * Function: isParseVml\n * \n * Specifies if any VML should be added via insertAdjacentHtml to the DOM. This\n * is only needed in IE8 and only if the shape contains VML markup. This method\n * returns true.\n */\nmxShape.prototype.isParseVml = function()\n{\n\treturn true;\n};\n\n/**\n * Function: isHtmlAllowed\n * \n * Returns true if HTML is allowed for this shape. This implementation always\n * returns false.\n */\nmxShape.prototype.isHtmlAllowed = function()\n{\n\treturn false;\n};\n\n/**\n * Function: getSvgScreenOffset\n * \n * Returns 0, or 0.5 if <strokewidth> % 2 == 1.\n */\nmxShape.prototype.getSvgScreenOffset = function()\n{\n\tvar sw = this.stencil && this.stencil.strokewidth != 'inherit' ? Number(this.stencil.strokewidth) : this.strokewidth;\n\t\n\treturn (mxUtils.mod(Math.max(1, Math.round(sw * this.scale)), 2) == 1) ? 0.5 : 0;\n};\n\n/**\n * Function: create\n *\n * Creates and returns the DOM node(s) for the shape in\n * the given container. This implementation invokes\n * <createSvg>, <createHtml> or <createVml> depending\n * on the <dialect> and style settings.\n *\n * Parameters:\n *\n * container - DOM node that will contain the shape.\n */\nmxShape.prototype.create = function(container)\n{\n\tvar node = null;\n\t\n\tif (container != null && container.ownerSVGElement != null)\n\t{\n\t\tnode = this.createSvg(container);\n\t}\n\telse if (document.documentMode == 8 || !mxClient.IS_VML ||\n\t\t(this.dialect != mxConstants.DIALECT_VML && this.isHtmlAllowed()))\n\t{\n\t\tnode = this.createHtml(container);\n\t}\n\telse\n\t{\n\t\tnode = this.createVml(container);\n\t}\n\t\n\treturn node;\n};\n\n/**\n * Function: createSvg\n *\n * Creates and returns the SVG node(s) to represent this shape.\n */\nmxShape.prototype.createSvg = function()\n{\n\treturn document.createElementNS(mxConstants.NS_SVG, 'g');\n};\n\n/**\n * Function: createVml\n *\n * Creates and returns the VML node to represent this shape.\n */\nmxShape.prototype.createVml = function()\n{\n\tvar node = document.createElement(mxClient.VML_PREFIX + ':group');\n\tnode.style.position = 'absolute';\n\t\n\treturn node;\n};\n\n/**\n * Function: createHtml\n *\n * Creates and returns the HTML DOM node(s) to represent\n * this shape. This implementation falls back to <createVml>\n * so that the HTML creation is optional.\n */\nmxShape.prototype.createHtml = function()\n{\n\tvar node = document.createElement('div');\n\tnode.style.position = 'absolute';\n\t\n\treturn node;\n};\n\n/**\n * Function: reconfigure\n *\n * Reconfigures this shape. This will update the colors etc in\n * addition to the bounds or points.\n */\nmxShape.prototype.reconfigure = function()\n{\n\tthis.redraw();\n};\n\n/**\n * Function: redraw\n *\n * Creates and returns the SVG node(s) to represent this shape.\n */\nmxShape.prototype.redraw = function()\n{\n\tthis.updateBoundsFromPoints();\n\t\n\tif (this.visible && this.checkBounds())\n\t{\n\t\tthis.node.style.visibility = 'visible';\n\t\tthis.clear();\n\t\t\n\t\tif (this.node.nodeName == 'DIV' && (this.isHtmlAllowed() || !mxClient.IS_VML))\n\t\t{\n\t\t\tthis.redrawHtmlShape();\n\t\t}\n\t\telse\n\t\t{\t\n\t\t\tthis.redrawShape();\n\t\t}\n\n\t\tthis.updateBoundingBox();\n\t}\n\telse\n\t{\n\t\tthis.node.style.visibility = 'hidden';\n\t\tthis.boundingBox = null;\n\t}\n};\n\n/**\n * Function: clear\n * \n * Removes all child nodes and resets all CSS.\n */\nmxShape.prototype.clear = function()\n{\n\tif (this.node.ownerSVGElement != null)\n\t{\n\t\twhile (this.node.lastChild != null)\n\t\t{\n\t\t\tthis.node.removeChild(this.node.lastChild);\n\t\t}\n\t}\n\telse\n\t{\n\t\tthis.node.style.cssText = 'position:absolute;' + ((this.cursor != null) ?\n\t\t\t('cursor:' + this.cursor + ';') : '');\n\t\tthis.node.innerHTML = '';\n\t}\n};\n\n/**\n * Function: updateBoundsFromPoints\n * \n * Updates the bounds based on the points.\n */\nmxShape.prototype.updateBoundsFromPoints = function()\n{\n\tvar pts = this.points;\n\t\n\tif (pts != null && pts.length > 0 && pts[0] != null)\n\t{\n\t\tthis.bounds = new mxRectangle(Number(pts[0].x), Number(pts[0].y), 1, 1);\n\t\t\n\t\tfor (var i = 1; i < this.points.length; i++)\n\t\t{\n\t\t\tif (pts[i] != null)\n\t\t\t{\n\t\t\t\tthis.bounds.add(new mxRectangle(Number(pts[i].x), Number(pts[i].y), 1, 1));\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: getLabelBounds\n * \n * Returns the <mxRectangle> for the label bounds of this shape, based on the\n * given scaled and translated bounds of the shape. This method should not\n * change the rectangle in-place. This implementation returns the given rect.\n */\nmxShape.prototype.getLabelBounds = function(rect)\n{\n\tvar d = mxUtils.getValue(this.style, mxConstants.STYLE_DIRECTION, mxConstants.DIRECTION_EAST);\n\tvar bounds = rect;\n\t\n\t// Normalizes argument for getLabelMargins hook\n\tif (d != mxConstants.DIRECTION_SOUTH && d != mxConstants.DIRECTION_NORTH &&\n\t\tthis.state != null && this.state.text != null &&\n\t\tthis.state.text.isPaintBoundsInverted())\n\t{\n\t\tbounds = bounds.clone();\n\t\tvar tmp = bounds.width;\n\t\tbounds.width = bounds.height;\n\t\tbounds.height = tmp;\n\t}\n\t\t\n\tvar m = this.getLabelMargins(bounds);\n\t\n\tif (m != null)\n\t{\n\t\tvar flipH = mxUtils.getValue(this.style, mxConstants.STYLE_FLIPH, false) == '1';\n\t\tvar flipV = mxUtils.getValue(this.style, mxConstants.STYLE_FLIPV, false) == '1';\n\t\t\n\t\t// Handles special case for vertical labels\n\t\tif (this.state != null && this.state.text != null &&\n\t\t\tthis.state.text.isPaintBoundsInverted())\n\t\t{\n\t\t\tvar tmp = m.x;\n\t\t\tm.x = m.height;\n\t\t\tm.height = m.width;\n\t\t\tm.width = m.y;\n\t\t\tm.y = tmp;\n\n\t\t\ttmp = flipH;\n\t\t\tflipH = flipV;\n\t\t\tflipV = tmp;\n\t\t}\n\t\t\n\t\treturn mxUtils.getDirectedBounds(rect, m, this.style, flipH, flipV);\n\t}\n\t\n\treturn rect;\n};\n\n/**\n * Function: getLabelMargins\n * \n * Returns the scaled top, left, bottom and right margin to be used for\n * computing the label bounds as an <mxRectangle>, where the bottom and right\n * margin are defined in the width and height of the rectangle, respectively.\n */\nmxShape.prototype.getLabelMargins= function(rect)\n{\n\treturn null;\n};\n\n/**\n * Function: checkBounds\n * \n * Returns true if the bounds are not null and all of its variables are numeric.\n */\nmxShape.prototype.checkBounds = function()\n{\n\treturn (!isNaN(this.scale) && isFinite(this.scale) && this.scale > 0 &&\n\t\t\tthis.bounds != null && !isNaN(this.bounds.x) && !isNaN(this.bounds.y) &&\n\t\t\t!isNaN(this.bounds.width) && !isNaN(this.bounds.height) &&\n\t\t\tthis.bounds.width > 0 && this.bounds.height > 0);\n};\n\n/**\n * Function: createVmlGroup\n *\n * Returns the temporary element used for rendering in IE8 standards mode.\n */\nmxShape.prototype.createVmlGroup = function()\n{\n\tvar node = document.createElement(mxClient.VML_PREFIX + ':group');\n\tnode.style.position = 'absolute';\n\tnode.style.width = this.node.style.width;\n\tnode.style.height = this.node.style.height;\n\t\n\treturn node;\n};\n\n/**\n * Function: redrawShape\n *\n * Updates the SVG or VML shape.\n */\nmxShape.prototype.redrawShape = function()\n{\n\tvar canvas = this.createCanvas();\n\t\n\tif (canvas != null)\n\t{\n\t\t// Specifies if events should be handled\n\t\tcanvas.pointerEvents = this.pointerEvents;\n\t\n\t\tthis.beforePaint(canvas);\n\t\tthis.paint(canvas);\n\t\tthis.afterPaint(canvas);\n\t\n\t\tif (this.node != canvas.root)\n\t\t{\n\t\t\t// Forces parsing in IE8 standards mode - slow! avoid\n\t\t\tthis.node.insertAdjacentHTML('beforeend', canvas.root.outerHTML);\n\t\t}\n\t\n\t\tif (this.node.nodeName == 'DIV' && document.documentMode == 8)\n\t\t{\n\t\t\t// Makes DIV transparent to events for IE8 in IE8 standards\n\t\t\t// mode (Note: Does not work for IE9 in IE8 standards mode\n\t\t\t// and not for IE11 in enterprise mode)\n\t\t\tthis.node.style.filter = '';\n\t\t\t\n\t\t\t// Adds event transparency in IE8 standards\n\t\t\tmxUtils.addTransparentBackgroundFilter(this.node);\n\t\t}\n\t\t\n\t\tthis.destroyCanvas(canvas);\n\t}\n};\n\n/**\n * Function: createCanvas\n * \n * Creates a new canvas for drawing this shape. May return null.\n */\nmxShape.prototype.createCanvas = function()\n{\n\tvar canvas = null;\n\t\n\t// LATER: Check if reusing existing DOM nodes improves performance\n\tif (this.node.ownerSVGElement != null)\n\t{\n\t\tcanvas = this.createSvgCanvas();\n\t}\n\telse if (mxClient.IS_VML)\n\t{\n\t\tthis.updateVmlContainer();\n\t\tcanvas = this.createVmlCanvas();\n\t}\n\t\n\tif (canvas != null && this.outline)\n\t{\n\t\tcanvas.setStrokeWidth(this.strokewidth);\n\t\tcanvas.setStrokeColor(this.stroke);\n\t\t\n\t\tif (this.isDashed != null)\n\t\t{\n\t\t\tcanvas.setDashed(this.isDashed);\n\t\t}\n\t\t\n\t\tcanvas.setStrokeWidth = function() {};\n\t\tcanvas.setStrokeColor = function() {};\n\t\tcanvas.setFillColor = function() {};\n\t\tcanvas.setGradient = function() {};\n\t\tcanvas.setDashed = function() {};\n\t\tcanvas.text = function() {};\n\t}\n\n\treturn canvas;\n};\n\n/**\n * Function: createSvgCanvas\n * \n * Creates and returns an <mxSvgCanvas2D> for rendering this shape.\n */\nmxShape.prototype.createSvgCanvas = function()\n{\n\tvar canvas = new mxSvgCanvas2D(this.node, false);\n\tcanvas.strokeTolerance = (this.pointerEvents) ? this.svgStrokeTolerance : 0;\n\tcanvas.pointerEventsValue = this.svgPointerEvents;\n\tvar off = this.getSvgScreenOffset();\n\n\tif (off != 0)\n\t{\n\t\tthis.node.setAttribute('transform', 'translate(' + off + ',' + off + ')');\n\t}\n\telse\n\t{\n\t\tthis.node.removeAttribute('transform');\n\t}\n\n\tcanvas.minStrokeWidth = this.minSvgStrokeWidth;\n\t\n\tif (!this.antiAlias)\n\t{\n\t\t// Rounds all numbers in the SVG output to integers\n\t\tcanvas.format = function(value)\n\t\t{\n\t\t\treturn Math.round(parseFloat(value));\n\t\t};\n\t}\n\t\n\treturn canvas;\n};\n\n/**\n * Function: createVmlCanvas\n * \n * Creates and returns an <mxVmlCanvas2D> for rendering this shape.\n */\nmxShape.prototype.createVmlCanvas = function()\n{\n\t// Workaround for VML rendering bug in IE8 standards mode\n\tvar node = (document.documentMode == 8 && this.isParseVml()) ? this.createVmlGroup() : this.node;\n\tvar canvas = new mxVmlCanvas2D(node, false);\n\t\n\tif (node.tagUrn != '')\n\t{\n\t\tvar w = Math.max(1, Math.round(this.bounds.width));\n\t\tvar h = Math.max(1, Math.round(this.bounds.height));\n\t\tnode.coordsize = (w * this.vmlScale) + ',' + (h * this.vmlScale);\n\t\tcanvas.scale(this.vmlScale);\n\t\tcanvas.vmlScale = this.vmlScale;\n\t}\n\n\t// Painting relative to top, left shape corner\n\tvar s = this.scale;\n\tcanvas.translate(-Math.round(this.bounds.x / s), -Math.round(this.bounds.y / s));\n\t\n\treturn canvas;\n};\n\n/**\n * Function: updateVmlContainer\n * \n * Updates the bounds of the VML container.\n */\nmxShape.prototype.updateVmlContainer = function()\n{\n\tthis.node.style.left = Math.round(this.bounds.x) + 'px';\n\tthis.node.style.top = Math.round(this.bounds.y) + 'px';\n\tvar w = Math.max(1, Math.round(this.bounds.width));\n\tvar h = Math.max(1, Math.round(this.bounds.height));\n\tthis.node.style.width = w + 'px';\n\tthis.node.style.height = h + 'px';\n\tthis.node.style.overflow = 'visible';\n};\n\n/**\n * Function: redrawHtml\n *\n * Allow optimization by replacing VML with HTML.\n */\nmxShape.prototype.redrawHtmlShape = function()\n{\n\t// LATER: Refactor methods\n\tthis.updateHtmlBounds(this.node);\n\tthis.updateHtmlFilters(this.node);\n\tthis.updateHtmlColors(this.node);\n};\n\n/**\n * Function: updateHtmlFilters\n *\n * Allow optimization by replacing VML with HTML.\n */\nmxShape.prototype.updateHtmlFilters = function(node)\n{\n\tvar f = '';\n\t\n\tif (this.opacity < 100)\n\t{\n\t\tf += 'alpha(opacity=' + (this.opacity) + ')';\n\t}\n\t\n\tif (this.isShadow)\n\t{\n\t\t// FIXME: Cannot implement shadow transparency with filter\n\t\tf += 'progid:DXImageTransform.Microsoft.dropShadow (' +\n\t\t\t'OffX=\\'' + Math.round(mxConstants.SHADOW_OFFSET_X * this.scale) + '\\', ' +\n\t\t\t'OffY=\\'' + Math.round(mxConstants.SHADOW_OFFSET_Y * this.scale) + '\\', ' +\n\t\t\t'Color=\\'' + mxConstants.VML_SHADOWCOLOR + '\\')';\n\t}\n\t\n\tif (this.fill != null && this.fill != mxConstants.NONE && this.gradient && this.gradient != mxConstants.NONE)\n\t{\n\t\tvar start = this.fill;\n\t\tvar end = this.gradient;\n\t\tvar type = '0';\n\t\t\n\t\tvar lookup = {east:0,south:1,west:2,north:3};\n\t\tvar dir = (this.direction != null) ? lookup[this.direction] : 0;\n\t\t\n\t\tif (this.gradientDirection != null)\n\t\t{\n\t\t\tdir = mxUtils.mod(dir + lookup[this.gradientDirection] - 1, 4);\n\t\t}\n\n\t\tif (dir == 1)\n\t\t{\n\t\t\ttype = '1';\n\t\t\tvar tmp = start;\n\t\t\tstart = end;\n\t\t\tend = tmp;\n\t\t}\n\t\telse if (dir == 2)\n\t\t{\n\t\t\tvar tmp = start;\n\t\t\tstart = end;\n\t\t\tend = tmp;\n\t\t}\n\t\telse if (dir == 3)\n\t\t{\n\t\t\ttype = '1';\n\t\t}\n\t\t\n\t\tf += 'progid:DXImageTransform.Microsoft.gradient(' +\n\t\t\t'startColorStr=\\'' + start + '\\', endColorStr=\\'' + end +\n\t\t\t'\\', gradientType=\\'' + type + '\\')';\n\t}\n\n\tnode.style.filter = f;\n};\n\n/**\n * Function: updateHtmlColors\n *\n * Allow optimization by replacing VML with HTML.\n */\nmxShape.prototype.updateHtmlColors = function(node)\n{\n\tvar color = this.stroke;\n\t\n\tif (color != null && color != mxConstants.NONE)\n\t{\n\t\tnode.style.borderColor = color;\n\n\t\tif (this.isDashed)\n\t\t{\n\t\t\tnode.style.borderStyle = 'dashed';\n\t\t}\n\t\telse if (this.strokewidth > 0)\n\t\t{\n\t\t\tnode.style.borderStyle = 'solid';\n\t\t}\n\n\t\tnode.style.borderWidth = Math.max(1, Math.ceil(this.strokewidth * this.scale)) + 'px';\n\t}\n\telse\n\t{\n\t\tnode.style.borderWidth = '0px';\n\t}\n\n\tcolor = (this.outline) ? null : this.fill;\n\t\n\tif (color != null && color != mxConstants.NONE)\n\t{\n\t\tnode.style.backgroundColor = color;\n\t\tnode.style.backgroundImage = 'none';\n\t}\n\telse if (this.pointerEvents)\n\t{\n\t\t node.style.backgroundColor = 'transparent';\n\t}\n\telse if (document.documentMode == 8)\n\t{\n\t\tmxUtils.addTransparentBackgroundFilter(node);\n\t}\n\telse\n\t{\n\t\tthis.setTransparentBackgroundImage(node);\n\t}\n};\n\n/**\n * Function: updateHtmlBounds\n *\n * Allow optimization by replacing VML with HTML.\n */\nmxShape.prototype.updateHtmlBounds = function(node)\n{\n\tvar sw = (document.documentMode >= 9) ? 0 : Math.ceil(this.strokewidth * this.scale);\n\tnode.style.borderWidth = Math.max(1, sw) + 'px';\n\tnode.style.overflow = 'hidden';\n\t\n\tnode.style.left = Math.round(this.bounds.x - sw / 2) + 'px';\n\tnode.style.top = Math.round(this.bounds.y - sw / 2) + 'px';\n\n\tif (document.compatMode == 'CSS1Compat')\n\t{\n\t\tsw = -sw;\n\t}\n\t\n\tnode.style.width = Math.round(Math.max(0, this.bounds.width + sw)) + 'px';\n\tnode.style.height = Math.round(Math.max(0, this.bounds.height + sw)) + 'px';\n};\n\n/**\n * Function: destroyCanvas\n * \n * Destroys the given canvas which was used for drawing. This implementation\n * increments the reference counts on all shared gradients used in the canvas.\n */\nmxShape.prototype.destroyCanvas = function(canvas)\n{\n\t// Manages reference counts\n\tif (canvas instanceof mxSvgCanvas2D)\n\t{\n\t\t// Increments ref counts\n\t\tfor (var key in canvas.gradients)\n\t\t{\n\t\t\tvar gradient = canvas.gradients[key];\n\t\t\t\n\t\t\tif (gradient != null)\n\t\t\t{\n\t\t\t\tgradient.mxRefCount = (gradient.mxRefCount || 0) + 1;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.releaseSvgGradients(this.oldGradients);\n\t\tthis.oldGradients = canvas.gradients;\n\t}\n};\n\n/**\n * Function: beforePaint\n * \n * Invoked before paint is called.\n */\nmxShape.prototype.beforePaint = function(c) { }\n\n/**\n * Function: afterPaint\n * \n * Invokes after paint was called.\n */\nmxShape.prototype.afterPaint = function(c) { }\n\n/**\n * Function: paint\n * \n * Generic rendering code.\n */\nmxShape.prototype.paint = function(c)\n{\n\tvar strokeDrawn = false;\n\t\n\tif (c != null && this.outline)\n\t{\n\t\tvar stroke = c.stroke;\n\t\t\n\t\tc.stroke = function()\n\t\t{\n\t\t\tstrokeDrawn = true;\n\t\t\tstroke.apply(this, arguments);\n\t\t};\n\n\t\tvar fillAndStroke = c.fillAndStroke;\n\t\t\n\t\tc.fillAndStroke = function()\n\t\t{\n\t\t\tstrokeDrawn = true;\n\t\t\tfillAndStroke.apply(this, arguments);\n\t\t};\n\t}\n\n\t// Scale is passed-through to canvas\n\tvar s = this.scale;\n\tvar x = this.bounds.x / s;\n\tvar y = this.bounds.y / s;\n\tvar w = this.bounds.width / s;\n\tvar h = this.bounds.height / s;\n\n\tif (this.isPaintBoundsInverted())\n\t{\n\t\tvar t = (w - h) / 2;\n\t\tx += t;\n\t\ty -= t;\n\t\tvar tmp = w;\n\t\tw = h;\n\t\th = tmp;\n\t}\n\t\n\tthis.updateTransform(c, x, y, w, h);\n\tthis.configureCanvas(c, x, y, w, h);\n\n\t// Adds background rectangle to capture events\n\tvar bg = null;\n\t\n\tif ((this.stencil == null && this.points == null && this.shapePointerEvents) ||\n\t\t(this.stencil != null && this.stencilPointerEvents))\n\t{\n\t\tvar bb = this.createBoundingBox();\n\t\t\n\t\tif (this.dialect == mxConstants.DIALECT_SVG)\n\t\t{\n\t\t\tbg = this.createTransparentSvgRectangle(bb.x, bb.y, bb.width, bb.height);\n\t\t\tthis.node.appendChild(bg);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar rect = c.createRect('rect', bb.x / s, bb.y / s, bb.width / s, bb.height / s);\n\t\t\trect.appendChild(c.createTransparentFill());\n\t\t\trect.stroked = 'false';\n\t\t\tc.root.appendChild(rect);\n\t\t}\n\t}\n\n\tif (this.stencil != null)\n\t{\n\t\tthis.stencil.drawShape(c, this, x, y, w, h);\n\t}\n\telse\n\t{\n\t\t// Stencils have separate strokewidth\n\t\tc.setStrokeWidth(this.strokewidth);\n\t\t\n\t\tif (this.points != null)\n\t\t{\n\t\t\t// Paints edge shape\n\t\t\tvar pts = [];\n\t\t\t\n\t\t\tfor (var i = 0; i < this.points.length; i++)\n\t\t\t{\n\t\t\t\tif (this.points[i] != null)\n\t\t\t\t{\n\t\t\t\t\tpts.push(new mxPoint(this.points[i].x / s, this.points[i].y / s));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.paintEdgeShape(c, pts);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Paints vertex shape\n\t\t\tthis.paintVertexShape(c, x, y, w, h);\n\t\t}\n\t}\n\t\n\tif (bg != null && c.state != null && c.state.transform != null)\n\t{\n\t\tbg.setAttribute('transform', c.state.transform);\n\t}\n\t\n\t// Draws highlight rectangle if no stroke was used\n\tif (c != null && this.outline && !strokeDrawn)\n\t{\n\t\tc.rect(x, y, w, h);\n\t\tc.stroke();\n\t}\n};\n\n/**\n * Function: configureCanvas\n * \n * Sets the state of the canvas for drawing the shape.\n */\nmxShape.prototype.configureCanvas = function(c, x, y, w, h)\n{\n\tvar dash = null;\n\t\n\tif (this.style != null)\n\t{\n\t\tdash = this.style['dashPattern'];\t\t\n\t}\n\n\tc.setAlpha(this.opacity / 100);\n\tc.setFillAlpha(this.fillOpacity / 100);\n\tc.setStrokeAlpha(this.strokeOpacity / 100);\n\n\t// Sets alpha, colors and gradients\n\tif (this.isShadow != null)\n\t{\n\t\tc.setShadow(this.isShadow);\n\t}\n\t\n\t// Dash pattern\n\tif (this.isDashed != null)\n\t{\n\t\tc.setDashed(this.isDashed, (this.style != null) ?\n\t\t\tmxUtils.getValue(this.style, mxConstants.STYLE_FIX_DASH, false) == 1 : false);\n\t}\n\n\tif (dash != null)\n\t{\n\t\tc.setDashPattern(dash);\n\t}\n\n\tif (this.fill != null && this.fill != mxConstants.NONE && this.gradient && this.gradient != mxConstants.NONE)\n\t{\n\t\tvar b = this.getGradientBounds(c, x, y, w, h);\n\t\tc.setGradient(this.fill, this.gradient, b.x, b.y, b.width, b.height, this.gradientDirection);\n\t}\n\telse\n\t{\n\t\tc.setFillColor(this.fill);\n\t}\n\n\tc.setStrokeColor(this.stroke);\n};\n\n/**\n * Function: getGradientBounds\n * \n * Returns the bounding box for the gradient box for this shape.\n */\nmxShape.prototype.getGradientBounds = function(c, x, y, w, h)\n{\n\treturn new mxRectangle(x, y, w, h);\n};\n\n/**\n * Function: updateTransform\n * \n * Sets the scale and rotation on the given canvas.\n */\nmxShape.prototype.updateTransform = function(c, x, y, w, h)\n{\n\t// NOTE: Currently, scale is implemented in state and canvas. This will\n\t// move to canvas in a later version, so that the states are unscaled\n\t// and untranslated and do not need an update after zooming or panning.\n\tc.scale(this.scale);\n\tc.rotate(this.getShapeRotation(), this.flipH, this.flipV, x + w / 2, y + h / 2);\n};\n\n/**\n * Function: paintVertexShape\n * \n * Paints the vertex shape.\n */\nmxShape.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tthis.paintBackground(c, x, y, w, h);\n\t\n\tif (!this.outline || this.style == null || mxUtils.getValue(\n\t\tthis.style, mxConstants.STYLE_BACKGROUND_OUTLINE, 0) == 0)\n\t{\n\t\tc.setShadow(false);\n\t\tthis.paintForeground(c, x, y, w, h);\n\t}\n};\n\n/**\n * Function: paintBackground\n * \n * Hook for subclassers. This implementation is empty.\n */\nmxShape.prototype.paintBackground = function(c, x, y, w, h) { };\n\n/**\n * Function: paintForeground\n * \n * Hook for subclassers. This implementation is empty.\n */\nmxShape.prototype.paintForeground = function(c, x, y, w, h) { };\n\n/**\n * Function: paintEdgeShape\n * \n * Hook for subclassers. This implementation is empty.\n */\nmxShape.prototype.paintEdgeShape = function(c, pts) { };\n\n/**\n * Function: getArcSize\n * \n * Returns the arc size for the given dimension.\n */\nmxShape.prototype.getArcSize = function(w, h)\n{\n\tvar r = 0;\n\t\n\tif (mxUtils.getValue(this.style, mxConstants.STYLE_ABSOLUTE_ARCSIZE, 0) == '1')\n\t{\n\t\tr = Math.min(w / 2, Math.min(h / 2, mxUtils.getValue(this.style,\n\t\t\tmxConstants.STYLE_ARCSIZE, mxConstants.LINE_ARCSIZE) / 2));\n\t}\n\telse\n\t{\n\t\tvar f = mxUtils.getValue(this.style, mxConstants.STYLE_ARCSIZE,\n\t\t\tmxConstants.RECTANGLE_ROUNDING_FACTOR * 100) / 100;\n\t\tr = Math.min(w * f, h * f);\n\t}\n\t\n\treturn r;\n};\n\n/**\n * Function: paintGlassEffect\n * \n * Paints the glass gradient effect.\n */\nmxShape.prototype.paintGlassEffect = function(c, x, y, w, h, arc)\n{\n\tvar sw = Math.ceil(this.strokewidth / 2);\n\tvar size = 0.4;\n\t\n\tc.setGradient('#ffffff', '#ffffff', x, y, w, h * 0.6, 'south', 0.9, 0.1);\n\tc.begin();\n\tarc += 2 * sw;\n\t\t\n\tif (this.isRounded)\n\t{\n\t\tc.moveTo(x - sw + arc, y - sw);\n\t\tc.quadTo(x - sw, y - sw, x - sw, y - sw + arc);\n\t\tc.lineTo(x - sw, y + h * size);\n\t\tc.quadTo(x + w * 0.5, y + h * 0.7, x + w + sw, y + h * size);\n\t\tc.lineTo(x + w + sw, y - sw + arc);\n\t\tc.quadTo(x + w + sw, y - sw, x + w + sw - arc, y - sw);\n\t}\n\telse\n\t{\n\t\tc.moveTo(x - sw, y - sw);\n\t\tc.lineTo(x - sw, y + h * size);\n\t\tc.quadTo(x + w * 0.5, y + h * 0.7, x + w + sw, y + h * size);\n\t\tc.lineTo(x + w + sw, y - sw);\n\t}\n\t\n\tc.close();\n\tc.fill();\n};\n\n/**\n * Function: addPoints\n * \n * Paints the given points with rounded corners.\n */\nmxShape.prototype.addPoints = function(c, pts, rounded, arcSize, close, exclude, initialMove)\n{\n\tif (pts != null && pts.length > 0)\n\t{\n\t\tinitialMove = (initialMove != null) ? initialMove : true;\n\t\tvar pe = pts[pts.length - 1];\n\t\t\n\t\t// Adds virtual waypoint in the center between start and end point\n\t\tif (close && rounded)\n\t\t{\n\t\t\tpts = pts.slice();\n\t\t\tvar p0 = pts[0];\n\t\t\tvar wp = new mxPoint(pe.x + (p0.x - pe.x) / 2, pe.y + (p0.y - pe.y) / 2);\n\t\t\tpts.splice(0, 0, wp);\n\t\t}\n\t\n\t\tvar pt = pts[0];\n\t\tvar i = 1;\n\t\n\t\t// Draws the line segments\n\t\tif (initialMove)\n\t\t{\n\t\t\tc.moveTo(pt.x, pt.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc.lineTo(pt.x, pt.y);\n\t\t}\n\t\t\n\t\twhile (i < ((close) ? pts.length : pts.length - 1))\n\t\t{\n\t\t\tvar tmp = pts[mxUtils.mod(i, pts.length)];\n\t\t\tvar dx = pt.x - tmp.x;\n\t\t\tvar dy = pt.y - tmp.y;\n\t\n\t\t\tif (rounded && (dx != 0 || dy != 0) && (exclude == null || mxUtils.indexOf(exclude, i - 1) < 0))\n\t\t\t{\n\t\t\t\t// Draws a line from the last point to the current\n\t\t\t\t// point with a spacing of size off the current point\n\t\t\t\t// into direction of the last point\n\t\t\t\tvar dist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tvar nx1 = dx * Math.min(arcSize, dist / 2) / dist;\n\t\t\t\tvar ny1 = dy * Math.min(arcSize, dist / 2) / dist;\n\t\n\t\t\t\tvar x1 = tmp.x + nx1;\n\t\t\t\tvar y1 = tmp.y + ny1;\n\t\t\t\tc.lineTo(x1, y1);\n\t\n\t\t\t\t// Draws a curve from the last point to the current\n\t\t\t\t// point with a spacing of size off the current point\n\t\t\t\t// into direction of the next point\n\t\t\t\tvar next = pts[mxUtils.mod(i + 1, pts.length)];\n\t\t\t\t\n\t\t\t\t// Uses next non-overlapping point\n\t\t\t\twhile (i < pts.length - 2 && Math.round(next.x - tmp.x) == 0 && Math.round(next.y - tmp.y) == 0)\n\t\t\t\t{\n\t\t\t\t\tnext = pts[mxUtils.mod(i + 2, pts.length)];\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdx = next.x - tmp.x;\n\t\t\t\tdy = next.y - tmp.y;\n\t\n\t\t\t\tdist = Math.max(1, Math.sqrt(dx * dx + dy * dy));\n\t\t\t\tvar nx2 = dx * Math.min(arcSize, dist / 2) / dist;\n\t\t\t\tvar ny2 = dy * Math.min(arcSize, dist / 2) / dist;\n\t\n\t\t\t\tvar x2 = tmp.x + nx2;\n\t\t\t\tvar y2 = tmp.y + ny2;\n\t\n\t\t\t\tc.quadTo(tmp.x, tmp.y, x2, y2);\n\t\t\t\ttmp = new mxPoint(x2, y2);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tc.lineTo(tmp.x, tmp.y);\n\t\t\t}\n\t\n\t\t\tpt = tmp;\n\t\t\ti++;\n\t\t}\n\t\n\t\tif (close)\n\t\t{\n\t\t\tc.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc.lineTo(pe.x, pe.y);\n\t\t}\n\t}\n};\n\n/**\n * Function: resetStyles\n * \n * Resets all styles.\n */\nmxShape.prototype.resetStyles = function()\n{\n\tthis.initStyles();\n\n\tthis.spacing = 0;\n\t\n\tdelete this.fill;\n\tdelete this.gradient;\n\tdelete this.gradientDirection;\n\tdelete this.stroke;\n\tdelete this.startSize;\n\tdelete this.endSize;\n\tdelete this.startArrow;\n\tdelete this.endArrow;\n\tdelete this.direction;\n\tdelete this.isShadow;\n\tdelete this.isDashed;\n\tdelete this.isRounded;\n\tdelete this.glass;\n};\n\n/**\n * Function: apply\n * \n * Applies the style of the given <mxCellState> to the shape. This\n * implementation assigns the following styles to local fields:\n * \n * - <mxConstants.STYLE_FILLCOLOR> => fill\n * - <mxConstants.STYLE_GRADIENTCOLOR> => gradient\n * - <mxConstants.STYLE_GRADIENT_DIRECTION> => gradientDirection\n * - <mxConstants.STYLE_OPACITY> => opacity\n * - <mxConstants.STYLE_FILL_OPACITY> => fillOpacity\n * - <mxConstants.STYLE_STROKE_OPACITY> => strokeOpacity\n * - <mxConstants.STYLE_STROKECOLOR> => stroke\n * - <mxConstants.STYLE_STROKEWIDTH> => strokewidth\n * - <mxConstants.STYLE_SHADOW> => isShadow\n * - <mxConstants.STYLE_DASHED> => isDashed\n * - <mxConstants.STYLE_SPACING> => spacing\n * - <mxConstants.STYLE_STARTSIZE> => startSize\n * - <mxConstants.STYLE_ENDSIZE> => endSize\n * - <mxConstants.STYLE_ROUNDED> => isRounded\n * - <mxConstants.STYLE_STARTARROW> => startArrow\n * - <mxConstants.STYLE_ENDARROW> => endArrow\n * - <mxConstants.STYLE_ROTATION> => rotation\n * - <mxConstants.STYLE_DIRECTION> => direction\n * - <mxConstants.STYLE_GLASS> => glass\n *\n * This keeps a reference to the <style>. If you need to keep a reference to\n * the cell, you can override this method and store a local reference to\n * state.cell or the <mxCellState> itself. If <outline> should be true, make\n * sure to set it before calling this method.\n *\n * Parameters:\n *\n * state - <mxCellState> of the corresponding cell.\n */\nmxShape.prototype.apply = function(state)\n{\n\tthis.state = state;\n\tthis.style = state.style;\n\n\tif (this.style != null)\n\t{\n\t\tthis.fill = mxUtils.getValue(this.style, mxConstants.STYLE_FILLCOLOR, this.fill);\n\t\tthis.gradient = mxUtils.getValue(this.style, mxConstants.STYLE_GRADIENTCOLOR, this.gradient);\n\t\tthis.gradientDirection = mxUtils.getValue(this.style, mxConstants.STYLE_GRADIENT_DIRECTION, this.gradientDirection);\n\t\tthis.opacity = mxUtils.getValue(this.style, mxConstants.STYLE_OPACITY, this.opacity);\n\t\tthis.fillOpacity = mxUtils.getValue(this.style, mxConstants.STYLE_FILL_OPACITY, this.fillOpacity);\n\t\tthis.strokeOpacity = mxUtils.getValue(this.style, mxConstants.STYLE_STROKE_OPACITY, this.strokeOpacity);\n\t\tthis.stroke = mxUtils.getValue(this.style, mxConstants.STYLE_STROKECOLOR, this.stroke);\n\t\tthis.strokewidth = mxUtils.getNumber(this.style, mxConstants.STYLE_STROKEWIDTH, this.strokewidth);\n\t\tthis.spacing = mxUtils.getValue(this.style, mxConstants.STYLE_SPACING, this.spacing);\n\t\tthis.startSize = mxUtils.getNumber(this.style, mxConstants.STYLE_STARTSIZE, this.startSize);\n\t\tthis.endSize = mxUtils.getNumber(this.style, mxConstants.STYLE_ENDSIZE, this.endSize);\n\t\tthis.startArrow = mxUtils.getValue(this.style, mxConstants.STYLE_STARTARROW, this.startArrow);\n\t\tthis.endArrow = mxUtils.getValue(this.style, mxConstants.STYLE_ENDARROW, this.endArrow);\n\t\tthis.rotation = mxUtils.getValue(this.style, mxConstants.STYLE_ROTATION, this.rotation);\n\t\tthis.direction = mxUtils.getValue(this.style, mxConstants.STYLE_DIRECTION, this.direction);\n\t\tthis.flipH = mxUtils.getValue(this.style, mxConstants.STYLE_FLIPH, 0) == 1;\n\t\tthis.flipV = mxUtils.getValue(this.style, mxConstants.STYLE_FLIPV, 0) == 1;\t\n\t\t\n\t\t// Legacy support for stencilFlipH/V\n\t\tif (this.stencil != null)\n\t\t{\n\t\t\tthis.flipH = mxUtils.getValue(this.style, 'stencilFlipH', 0) == 1 || this.flipH;\n\t\t\tthis.flipV = mxUtils.getValue(this.style, 'stencilFlipV', 0) == 1 || this.flipV;\n\t\t}\n\t\t\n\t\tif (this.direction == mxConstants.DIRECTION_NORTH || this.direction == mxConstants.DIRECTION_SOUTH)\n\t\t{\n\t\t\tvar tmp = this.flipH;\n\t\t\tthis.flipH = this.flipV;\n\t\t\tthis.flipV = tmp;\n\t\t}\n\n\t\tthis.isShadow = mxUtils.getValue(this.style, mxConstants.STYLE_SHADOW, this.isShadow) == 1;\n\t\tthis.isDashed = mxUtils.getValue(this.style, mxConstants.STYLE_DASHED, this.isDashed) == 1;\n\t\tthis.isRounded = mxUtils.getValue(this.style, mxConstants.STYLE_ROUNDED, this.isRounded) == 1;\n\t\tthis.glass = mxUtils.getValue(this.style, mxConstants.STYLE_GLASS, this.glass) == 1;\n\t\t\n\t\tif (this.fill == mxConstants.NONE)\n\t\t{\n\t\t\tthis.fill = null;\n\t\t}\n\n\t\tif (this.gradient == mxConstants.NONE)\n\t\t{\n\t\t\tthis.gradient = null;\n\t\t}\n\n\t\tif (this.stroke == mxConstants.NONE)\n\t\t{\n\t\t\tthis.stroke = null;\n\t\t}\n\t}\n};\n\n/**\n * Function: setCursor\n * \n * Sets the cursor on the given shape.\n *\n * Parameters:\n *\n * cursor - The cursor to be used.\n */\nmxShape.prototype.setCursor = function(cursor)\n{\n\tif (cursor == null)\n\t{\n\t\tcursor = '';\n\t}\n\t\n\tthis.cursor = cursor;\n\n\tif (this.node != null)\n\t{\n\t\tthis.node.style.cursor = cursor;\n\t}\n};\n\n/**\n * Function: getCursor\n * \n * Returns the current cursor.\n */\nmxShape.prototype.getCursor = function()\n{\n\treturn this.cursor;\n};\n\n/**\n * Function: isRoundable\n * \n * Hook for subclassers.\n */\nmxShape.prototype.isRoundable = function()\n{\n\treturn false;\n};\n\n/**\n * Function: updateBoundingBox\n *\n * Updates the <boundingBox> for this shape using <createBoundingBox> and\n * <augmentBoundingBox> and stores the result in <boundingBox>.\n */\nmxShape.prototype.updateBoundingBox = function()\n{\n\t// Tries to get bounding box from SVG subsystem\n\t// LATER: Use getBoundingClientRect for fallback in VML\n\tif (this.useSvgBoundingBox && this.node != null && this.node.ownerSVGElement != null)\n\t{\n\t\ttry\n\t\t{\n\t\t\tvar b = this.node.getBBox();\n\t\n\t\t\tif (b.width > 0 && b.height > 0)\n\t\t\t{\n\t\t\t\tthis.boundingBox = new mxRectangle(b.x, b.y, b.width, b.height);\n\t\t\t\t\n\t\t\t\t// Adds strokeWidth\n\t\t\t\tthis.boundingBox.grow(this.strokewidth * this.scale / 2);\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\t// fallback to code below\n\t\t}\n\t}\n\n\tif (this.bounds != null)\n\t{\n\t\tvar bbox = this.createBoundingBox();\n\t\t\n\t\tif (bbox != null)\n\t\t{\n\t\t\tthis.augmentBoundingBox(bbox);\n\t\t\tvar rot = this.getShapeRotation();\n\t\t\t\n\t\t\tif (rot != 0)\n\t\t\t{\n\t\t\t\tbbox = mxUtils.getBoundingBox(bbox, rot);\n\t\t\t}\n\t\t}\n\n\t\tthis.boundingBox = bbox;\n\t}\n};\n\n/**\n * Function: createBoundingBox\n *\n * Returns a new rectangle that represents the bounding box of the bare shape\n * with no shadows or strokewidths.\n */\nmxShape.prototype.createBoundingBox = function()\n{\n\tvar bb = this.bounds.clone();\n\n\tif ((this.stencil != null && (this.direction == mxConstants.DIRECTION_NORTH ||\n\t\tthis.direction == mxConstants.DIRECTION_SOUTH)) || this.isPaintBoundsInverted())\n\t{\n\t\tbb.rotate90();\n\t}\n\t\n\treturn bb;\n};\n\n/**\n * Function: augmentBoundingBox\n *\n * Augments the bounding box with the strokewidth and shadow offsets.\n */\nmxShape.prototype.augmentBoundingBox = function(bbox)\n{\n\tif (this.isShadow)\n\t{\n\t\tbbox.width += Math.ceil(mxConstants.SHADOW_OFFSET_X * this.scale);\n\t\tbbox.height += Math.ceil(mxConstants.SHADOW_OFFSET_Y * this.scale);\n\t}\n\t\n\t// Adds strokeWidth\n\tbbox.grow(this.strokewidth * this.scale / 2);\n};\n\n/**\n * Function: isPaintBoundsInverted\n * \n * Returns true if the bounds should be inverted.\n */\nmxShape.prototype.isPaintBoundsInverted = function()\n{\n\t// Stencil implements inversion via aspect\n\treturn this.stencil == null && (this.direction == mxConstants.DIRECTION_NORTH ||\n\t\t\tthis.direction == mxConstants.DIRECTION_SOUTH);\n};\n\n/**\n * Function: getRotation\n * \n * Returns the rotation from the style.\n */\nmxShape.prototype.getRotation = function()\n{\n\treturn (this.rotation != null) ? this.rotation : 0;\n};\n\n/**\n * Function: getTextRotation\n * \n * Returns the rotation for the text label.\n */\nmxShape.prototype.getTextRotation = function()\n{\n\tvar rot = this.getRotation();\n\t\n\tif (mxUtils.getValue(this.style, mxConstants.STYLE_HORIZONTAL, 1) != 1)\n\t{\n\t\trot += mxText.prototype.verticalTextRotation;\n\t}\n\t\n\treturn rot;\n};\n\n/**\n * Function: getShapeRotation\n * \n * Returns the actual rotation of the shape.\n */\nmxShape.prototype.getShapeRotation = function()\n{\n\tvar rot = this.getRotation();\n\t\n\tif (this.direction != null)\n\t{\n\t\tif (this.direction == mxConstants.DIRECTION_NORTH)\n\t\t{\n\t\t\trot += 270;\n\t\t}\n\t\telse if (this.direction == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\trot += 180;\n\t\t}\n\t\telse if (this.direction == mxConstants.DIRECTION_SOUTH)\n\t\t{\n\t\t\trot += 90;\n\t\t}\n\t}\n\t\n\treturn rot;\n};\n\n/**\n * Function: createTransparentSvgRectangle\n * \n * Adds a transparent rectangle that catches all events.\n */\nmxShape.prototype.createTransparentSvgRectangle = function(x, y, w, h)\n{\n\tvar rect = document.createElementNS(mxConstants.NS_SVG, 'rect');\n\trect.setAttribute('x', x);\n\trect.setAttribute('y', y);\n\trect.setAttribute('width', w);\n\trect.setAttribute('height', h);\n\trect.setAttribute('fill', 'none');\n\trect.setAttribute('stroke', 'none');\n\trect.setAttribute('pointer-events', 'all');\n\t\n\treturn rect;\n};\n\n/**\n * Function: setTransparentBackgroundImage\n * \n * Sets a transparent background CSS style to catch all events.\n * \n * Paints the line shape.\n */\nmxShape.prototype.setTransparentBackgroundImage = function(node)\n{\n\tnode.style.backgroundImage = 'url(\\'' + mxClient.imageBasePath + '/transparent.gif\\')';\n};\n\n/**\n * Function: releaseSvgGradients\n * \n * Paints the line shape.\n */\nmxShape.prototype.releaseSvgGradients = function(grads)\n{\n\tif (grads != null)\n\t{\n\t\tfor (var key in grads)\n\t\t{\n\t\t\tvar gradient = grads[key];\n\t\t\t\n\t\t\tif (gradient != null)\n\t\t\t{\n\t\t\t\tgradient.mxRefCount = (gradient.mxRefCount || 0) - 1;\n\t\t\t\t\n\t\t\t\tif (gradient.mxRefCount == 0 && gradient.parentNode != null)\n\t\t\t\t{\n\t\t\t\t\tgradient.parentNode.removeChild(gradient);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: destroy\n *\n * Destroys the shape by removing it from the DOM and releasing the DOM\n * node associated with the shape using <mxEvent.release>.\n */\nmxShape.prototype.destroy = function()\n{\n\tif (this.node != null)\n\t{\n\t\tmxEvent.release(this.node);\n\t\t\n\t\tif (this.node.parentNode != null)\n\t\t{\n\t\t\tthis.node.parentNode.removeChild(this.node);\n\t\t}\n\t\t\n\t\tthis.node = null;\n\t}\n\t\n\t// Decrements refCount and removes unused\n\tthis.releaseSvgGradients(this.oldGradients);\n\tthis.oldGradients = null;\n};\n\n__mxOutput.mxShape = typeof mxShape !== 'undefined' ? mxShape : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxStencil\n *\n * Implements a generic shape which is based on a XML node as a description.\n * \n * shape:\n * \n * The outer element is *shape*, that has attributes:\n * \n * - \"name\", string, required. The stencil name that uniquely identifies the shape.\n * - \"w\" and \"h\" are optional decimal view bounds. This defines your co-ordinate\n * system for the graphics operations in the shape. The default is 100,100.\n * - \"aspect\", optional string. Either \"variable\", the default, or \"fixed\". Fixed\n * means always render the shape with the aspect ratio defined by the ratio w/h.\n * Variable causes the ratio to match that of the geometry of the current vertex.\n * - \"strokewidth\", optional string. Either an integer or the string \"inherit\".\n * \"inherit\" indicates that the strokeWidth of the cell is only changed on scaling,\n * not on resizing. Default is \"1\".\n * If numeric values are used, the strokeWidth of the cell is changed on both\n * scaling and resizing and the value defines the multiple that is applied to\n * the width.\n * \n * connections:\n * \n * If you want to define specific fixed connection points on the shape use the\n * *connections* element. Each *constraint* element within connections defines\n * a fixed connection point on the shape. Constraints have attributes:\n * \n * - \"perimeter\", required. 1 or 0. 0 sets the connection point where specified\n * by x,y. 1 Causes the position of the connection point to be extrapolated from\n * the center of the shape, through x,y to the point of intersection with the\n * perimeter of the shape.\n * - \"x\" and \"y\" are the position of the fixed point relative to the bounds of\n * the shape. They can be automatically adjusted if perimeter=1. So, (0,0) is top\n * left, (0.5,0.5) the center, (1,0.5) the center of the right hand edge of the\n * bounds, etc. Values may be less than 0 or greater than 1 to be positioned\n * outside of the shape.\n * - \"name\", optional string. A unique identifier for the port on the shape.\n * \n * background and foreground:\n * \n * The path of the graphics drawing is split into two elements, *foreground* and\n * *background*. The split is to define which part any shadow applied to the shape\n * is derived from (the background). This, generally, means the background is the\n * line tracing of the outside of the shape, but not always.\n * \n * Any stroke, fill or fillstroke of a background must be the first element of the\n * foreground element, they must not be used within *background*. If the background\n * is empty, this is not required.\n * \n * Because the background cannot have any fill or stroke, it can contain only one\n * *path*, *rect*, *roundrect* or *ellipse* element (or none). It can also not\n * include *image*, *text* or *include-shape*.\n * \n * Note that the state, styling and drawing in mxGraph stencils is very close in\n * design to that of HTML 5 canvas. Tutorials on this subject, if you're not\n * familiar with the topic, will give a good high-level introduction to the\n * concepts used.\n * \n * State:\n * \n * Rendering within the foreground and background elements has the concept of\n * state. There are two types of operations other than state save/load, styling\n * and drawing. The styling operations change the current state, so you can save\n * the current state with <save/> and pull the last saved state from the state\n * stack using <restore/>.\n * \n * Styling:\n * \n * The elements that change colors within the current state all take a hash\n * prefixed hex color code (\"#FFEA80\").\n * \n * - *strokecolor*, this sets the color that drawing paths will be rendered in\n * when a stroke or fillstroke command is issued.\n * - *fillcolor*, this sets the color that the inside of closed paths will be\n * rendered in when a fill or fillstroke command is issued.\n * - *fontcolor*, this sets the color that fonts are rendered in when text is drawn.\n * \n * *alpha* defines the degree of transparency used between 1.0 for fully opaque\n * and 0.0 for fully transparent.\n * \n * *fillalpha* defines the degree of fill transparency used between 1.0 for fully\n * opaque and 0.0 for fully transparent.\n * \n * *strokealpha* defines the degree of stroke transparency used between 1.0 for\n * fully opaque and 0.0 for fully transparent.\n * \n * *strokewidth* defines the integer thickness of drawing elements rendered by\n * stroking. Use fixed=\"1\" to apply the value as-is, without scaling.\n * \n * *dashed* is \"1\" for dashing enabled and \"0\" for disabled.\n * \n * When *dashed* is enabled the current dash pattern, defined by *dashpattern*,\n * is used on strokes. dashpattern is a sequence of space separated \"on, off\"\n * lengths that define what distance to paint the stroke for, then what distance\n * to paint nothing for, repeat... The default is \"3 3\". You could define a more\n * complex pattern with \"5 3 2 6\", for example. Generally, it makes sense to have\n * an even number of elements in the dashpattern, but that's not required.\n * \n * *linejoin*, *linecap* and *miterlimit* are best explained by the Mozilla page\n * on Canvas styling (about halfway down). The values are all the same except we\n * use \"flat\" for linecap, instead of Canvas' \"butt\".\n * \n * For font styling there are.\n * \n * - *fontsize*, an integer,\n * - *fontstyle*, an ORed bit pattern of bold (1), italic (2) and underline (4),\n * i.e bold underline is \"5\".\n * - *fontfamily*, is a string defining the typeface to be used.\n * \n * Drawing:\n * \n * Most drawing is contained within a *path* element. Again, the graphic\n * primitives are very similar to that of HTML 5 canvas.\n * \n * - *move* to attributes required decimals (x,y).\n * - *line* to attributes required decimals (x,y).\n * - *quad* to required decimals (x2,y2) via control point required decimals\n * (x1,y1).\n * - *curve* to required decimals (x3,y3), via control points required decimals\n * (x1,y1) and (x2,y2).\n * - *arc*, this doesn't follow the HTML Canvas signatures, instead it's a copy\n * of the SVG arc command. The SVG specification documentation gives the best\n * description of its behaviors. The attributes are named identically, they are\n * decimals and all required.\n * - *close* ends the current subpath and causes an automatic straight line to\n * be drawn from the current point to the initial point of the current subpath.\n * \n * Complex drawing:\n * \n * In addition to the graphics primitive operations there are non-primitive\n * operations. These provide an easy method to draw some basic shapes.\n * \n * - *rect*, attributes \"x\", \"y\", \"w\", \"h\", all required decimals\n * - *roundrect*, attributes \"x\", \"y\", \"w\", \"h\", all required decimals. Also\n * \"arcsize\" an optional decimal attribute defining how large, the corner curves\n * are.\n * - *ellipse*, attributes \"x\", \"y\", \"w\", \"h\", all required decimals.\n * \n * Note that these 3 shapes and all paths must be followed by either a fill,\n * stroke, or fillstroke.\n * \n * Text:\n * \n * *text* elements have the following attributes.\n * \n * - \"str\", the text string to display, required.\n * - \"x\" and \"y\", the decimal location (x,y) of the text element, required.\n * - \"align\", the horizontal alignment of the text element, either \"left\",\n * \"center\" or \"right\". Optional, default is \"left\".\n * - \"valign\", the vertical alignment of the text element, either \"top\", \"middle\"\n * or \"bottom\". Optional, default is \"top\".\n * - \"localized\", 0 or 1, if 1 then the \"str\" actually contains a key to use to\n * fetch the value out of mxResources. Optional, default is\n * <mxStencil.defaultLocalized>.\n * - \"vertical\", 0 or 1, if 1 the label is rendered vertically (rotated by 90\n * degrees). Optional, default is 0.\n * - \"rotation\", angle in degrees (0 to 360). The angle to rotate the text by.\n * Optional, default is 0.\n * - \"align-shape\", 0 or 1, if 0 ignore the rotation of the shape when setting\n * the text rotation. Optional, default is 1.\n * \n * If <allowEval> is true, then the text content of the this element can define\n * a function which is invoked with the shape as the only argument and returns\n * the value for the text element (ignored if the str attribute is not null).\n * \n * Images:\n * \n * *image* elements can either be external URLs, or data URIs, where supported\n * (not in IE 7-). Attributes are:\n * \n * - \"src\", required string. Either a data URI or URL.\n * - \"x\", \"y\", required decimals. The (x,y) position of the image.\n * - \"w\", \"h\", required decimals. The width and height of the image.\n * - \"flipH\" and \"flipV\", optional 0 or 1. Whether to flip the image along the\n * horizontal/vertical axis. Default is 0 for both.\n * \n * If <allowEval> is true, then the text content of the this element can define\n * a function which is invoked with the shape as the only argument and returns\n * the value for the image source (ignored if the src attribute is not null).\n * \n * Sub-shapes:\n * \n * *include-shape* allow stencils to be rendered within the current stencil by\n * referencing the sub-stencil by name. Attributes are:\n * \n * - \"name\", required string. The unique shape name of the stencil.\n * - \"x\", \"y\", \"w\", \"h\", required decimals. The (x,y) position of the sub-shape\n * and its width and height.\n * \n * Constructor: mxStencil\n * \n * Constructs a new generic shape by setting <desc> to the given XML node and\n * invoking <parseDescription> and <parseConstraints>.\n * \n * Parameters:\n * \n * desc - XML node that contains the stencil description.\n */\nfunction mxStencil(desc)\n{\n\tthis.desc = desc;\n\tthis.parseDescription();\n\tthis.parseConstraints();\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxStencil, mxShape);\n\n/**\n * Variable: defaultLocalized\n * \n * Static global variable that specifies the default value for the localized\n * attribute of the text element. Default is false.\n */\nmxStencil.defaultLocalized = false;\n\n/**\n * Function: allowEval\n * \n * Static global switch that specifies if the use of eval is allowed for\n * evaluating text content and images. Default is false. Set this to true\n * if stencils can not contain user input.\n */\nmxStencil.allowEval = false;\n\n/**\n * Variable: desc\n *\n * Holds the XML node with the stencil description.\n */\nmxStencil.prototype.desc = null;\n\n/**\n * Variable: constraints\n * \n * Holds an array of <mxConnectionConstraints> as defined in the shape.\n */\nmxStencil.prototype.constraints = null;\n\n/**\n * Variable: aspect\n *\n * Holds the aspect of the shape. Default is 'auto'.\n */\nmxStencil.prototype.aspect = null;\n\n/**\n * Variable: w0\n *\n * Holds the width of the shape. Default is 100.\n */\nmxStencil.prototype.w0 = null;\n\n/**\n * Variable: h0\n *\n * Holds the height of the shape. Default is 100.\n */\nmxStencil.prototype.h0 = null;\n\n/**\n * Variable: bgNodes\n *\n * Holds the XML node with the stencil description.\n */\nmxStencil.prototype.bgNode = null;\n\n/**\n * Variable: fgNodes\n *\n * Holds the XML node with the stencil description.\n */\nmxStencil.prototype.fgNode = null;\n\n/**\n * Variable: strokewidth\n *\n * Holds the strokewidth direction from the description.\n */\nmxStencil.prototype.strokewidth = null;\n\n/**\n * Function: parseDescription\n *\n * Reads <w0>, <h0>, <aspect>, <bgNodes> and <fgNodes> from <desc>.\n */\nmxStencil.prototype.parseDescription = function()\n{\n\t// LATER: Preprocess nodes for faster painting\n\tthis.fgNode = this.desc.getElementsByTagName('foreground')[0];\n\tthis.bgNode = this.desc.getElementsByTagName('background')[0];\n\tthis.w0 = Number(this.desc.getAttribute('w') || 100);\n\tthis.h0 = Number(this.desc.getAttribute('h') || 100);\n\t\n\t// Possible values for aspect are: variable and fixed where\n\t// variable means fill the available space and fixed means\n\t// use w0 and h0 to compute the aspect.\n\tvar aspect = this.desc.getAttribute('aspect');\n\tthis.aspect = (aspect != null) ? aspect : 'variable';\n\t\n\t// Possible values for strokewidth are all numbers and \"inherit\"\n\t// where the inherit means take the value from the style (ie. the\n\t// user-defined stroke-width). Note that the strokewidth is scaled\n\t// by the minimum scaling that is used to draw the shape (sx, sy).\n\tvar sw = this.desc.getAttribute('strokewidth');\n\tthis.strokewidth = (sw != null) ? sw : '1';\n};\n\n/**\n * Function: parseConstraints\n *\n * Reads the constraints from <desc> into <constraints> using\n * <parseConstraint>.\n */\nmxStencil.prototype.parseConstraints = function()\n{\n\tvar conns = this.desc.getElementsByTagName('connections')[0];\n\t\n\tif (conns != null)\n\t{\n\t\tvar tmp = mxUtils.getChildNodes(conns);\n\t\t\n\t\tif (tmp != null && tmp.length > 0)\n\t\t{\n\t\t\tthis.constraints = [];\n\t\t\t\n\t\t\tfor (var i = 0; i < tmp.length; i++)\n\t\t\t{\n\t\t\t\tthis.constraints.push(this.parseConstraint(tmp[i]));\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: parseConstraint\n *\n * Parses the given XML node and returns its <mxConnectionConstraint>.\n */\nmxStencil.prototype.parseConstraint = function(node)\n{\n\tvar x = Number(node.getAttribute('x'));\n\tvar y = Number(node.getAttribute('y'));\n\tvar perimeter = node.getAttribute('perimeter') == '1';\n\tvar name = node.getAttribute('name');\n\t\n\treturn new mxConnectionConstraint(new mxPoint(x, y), perimeter, name);\n};\n\n/**\n * Function: evaluateTextAttribute\n * \n * Gets the given attribute as a text. The return value from <evaluateAttribute>\n * is used as a key to <mxResources.get> if the localized attribute in the text\n * node is 1 or if <defaultLocalized> is true.\n */\nmxStencil.prototype.evaluateTextAttribute = function(node, attribute, shape)\n{\n\tvar result = this.evaluateAttribute(node, attribute, shape);\n\tvar loc = node.getAttribute('localized');\n\t\n\tif ((mxStencil.defaultLocalized && loc == null) || loc == '1')\n\t{\n\t\tresult = mxResources.get(result);\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: evaluateAttribute\n *\n * Gets the attribute for the given name from the given node. If the attribute\n * does not exist then the text content of the node is evaluated and if it is\n * a function it is invoked with <shape> as the only argument and the return\n * value is used as the attribute value to be returned.\n */\nmxStencil.prototype.evaluateAttribute = function(node, attribute, shape)\n{\n\tvar result = node.getAttribute(attribute);\n\t\n\tif (result == null)\n\t{\n\t\tvar text = mxUtils.getTextContent(node);\n\t\t\n\t\tif (text != null && mxStencil.allowEval)\n\t\t{\n\t\t\tvar funct = mxUtils.eval(text);\n\t\t\t\n\t\t\tif (typeof(funct) == 'function')\n\t\t\t{\n\t\t\t\tresult = funct(shape);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: drawShape\n *\n * Draws this stencil inside the given bounds.\n */\nmxStencil.prototype.drawShape = function(canvas, shape, x, y, w, h)\n{\n\tvar stack = canvas.states.slice();\n\t\n\t// TODO: Internal structure (array of special structs?), relative and absolute\n\t// coordinates (eg. note shape, process vs star, actor etc.), text rendering\n\t// and non-proportional scaling, how to implement pluggable edge shapes\n\t// (start, segment, end blocks), pluggable markers, how to implement\n\t// swimlanes (title area) with this API, add icon, horizontal/vertical\n\t// label, indicator for all shapes, rotation\n\tvar direction = mxUtils.getValue(shape.style, mxConstants.STYLE_DIRECTION, null);\n\tvar aspect = this.computeAspect(shape.style, x, y, w, h, direction);\n\tvar minScale = Math.min(aspect.width, aspect.height);\n\tvar sw = (this.strokewidth == 'inherit') ?\n\t\t\tNumber(mxUtils.getNumber(shape.style, mxConstants.STYLE_STROKEWIDTH, 1)) :\n\t\t\tNumber(this.strokewidth) * minScale;\n\tcanvas.setStrokeWidth(sw);\n\n\t// Draws a transparent rectangle for catching events\n\tif (shape.style != null && mxUtils.getValue(shape.style, mxConstants.STYLE_POINTER_EVENTS, '0') == '1')\n\t{\n\t\tcanvas.setStrokeColor(mxConstants.NONE);\n\t\tcanvas.rect(x, y, w, h);\n\t\tcanvas.stroke();\n\t\tcanvas.setStrokeColor(shape.stroke);\n\t}\n\n\tthis.drawChildren(canvas, shape, x, y, w, h, this.bgNode, aspect, false, true);\n\tthis.drawChildren(canvas, shape, x, y, w, h, this.fgNode, aspect, true,\n\t\t!shape.outline || shape.style == null || mxUtils.getValue(\n\t\tshape.style, mxConstants.STYLE_BACKGROUND_OUTLINE, 0) == 0);\n\t\n\t// Restores stack for unequal count of save/restore calls\n\tif (canvas.states.length != stack.length)\n\t{\n\t\tcanvas.states = stack;\n\t}\n};\n\n/**\n * Function: drawChildren\n *\n * Draws this stencil inside the given bounds.\n */\nmxStencil.prototype.drawChildren = function(canvas, shape, x, y, w, h, node, aspect, disableShadow, paint)\n{\n\tif (node != null && w > 0 && h > 0)\n\t{\n\t\tvar tmp = node.firstChild;\n\t\t\n\t\twhile (tmp != null)\n\t\t{\n\t\t\tif (tmp.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t\t{\n\t\t\t\tthis.drawNode(canvas, shape, tmp, aspect, disableShadow, paint);\n\t\t\t}\n\t\t\t\n\t\t\ttmp = tmp.nextSibling;\n\t\t}\n\t}\n};\n\n/**\n * Function: computeAspect\n *\n * Returns a rectangle that contains the offset in x and y and the horizontal\n * and vertical scale in width and height used to draw this shape inside the\n * given <mxRectangle>.\n * \n * Parameters:\n * \n * shape - <mxShape> to be drawn.\n * bounds - <mxRectangle> that should contain the stencil.\n * direction - Optional direction of the shape to be darwn.\n */\nmxStencil.prototype.computeAspect = function(shape, x, y, w, h, direction)\n{\n\tvar x0 = x;\n\tvar y0 = y;\n\tvar sx = w / this.w0;\n\tvar sy = h / this.h0;\n\t\n\tvar inverse = (direction == mxConstants.DIRECTION_NORTH || direction == mxConstants.DIRECTION_SOUTH);\n\n\tif (inverse)\n\t{\n\t\tsy = w / this.h0;\n\t\tsx = h / this.w0;\n\t\t\n\t\tvar delta = (w - h) / 2;\n\n\t\tx0 += delta;\n\t\ty0 -= delta;\n\t}\n\n\tif (this.aspect == 'fixed')\n\t{\n\t\tsy = Math.min(sx, sy);\n\t\tsx = sy;\n\t\t\n\t\t// Centers the shape inside the available space\n\t\tif (inverse)\n\t\t{\n\t\t\tx0 += (h - this.w0 * sx) / 2;\n\t\t\ty0 += (w - this.h0 * sy) / 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tx0 += (w - this.w0 * sx) / 2;\n\t\t\ty0 += (h - this.h0 * sy) / 2;\n\t\t}\n\t}\n\n\treturn new mxRectangle(x0, y0, sx, sy);\n};\n\n/**\n * Function: drawNode\n *\n * Draws this stencil inside the given bounds.\n */\nmxStencil.prototype.drawNode = function(canvas, shape, node, aspect, disableShadow, paint)\n{\n\tvar name = node.nodeName;\n\tvar x0 = aspect.x;\n\tvar y0 = aspect.y;\n\tvar sx = aspect.width;\n\tvar sy = aspect.height;\n\tvar minScale = Math.min(sx, sy);\n\t\n\tif (name == 'save')\n\t{\n\t\tcanvas.save();\n\t}\n\telse if (name == 'restore')\n\t{\n\t\tcanvas.restore();\n\t}\n\telse if (paint)\n\t{\n\t\tif (name == 'path')\n\t\t{\n\t\t\tcanvas.begin();\n\t\t\t\n\t\t\tvar parseRegularly = true;\n\t\t\t\n\t\t\tif (node.getAttribute('rounded') == '1')\n\t\t\t{\n\t\t\t\tparseRegularly = false;\n\t\t\t\t\n\t\t\t\tvar arcSize = Number(node.getAttribute('arcSize'));\n\t\t\t\tvar pointCount = 0;\n\t\t\t\tvar segs = [];\n\t\t\t\t\n\t\t\t\t// Renders the elements inside the given path\n\t\t\t\tvar childNode = node.firstChild;\n\t\t\t\t\n\t\t\t\twhile (childNode != null)\n\t\t\t\t{\n\t\t\t\t\tif (childNode.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar childName = childNode.nodeName;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (childName == 'move' || childName == 'line')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (childName == 'move' || segs.length == 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsegs.push([]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tsegs[segs.length - 1].push(new mxPoint(x0 + Number(childNode.getAttribute('x')) * sx,\n\t\t\t\t\t\t\t\ty0 + Number(childNode.getAttribute('y')) * sy));\n\t\t\t\t\t\t\tpointCount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//We only support move and line for rounded corners\n\t\t\t\t\t\t\tparseRegularly = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tchildNode = childNode.nextSibling;\n\t\t\t\t}\n\n\t\t\t\tif (!parseRegularly && pointCount > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < segs.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar close = false, ps = segs[i][0], pe = segs[i][segs[i].length - 1];\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (ps.x == pe.x && ps.y == pe.y) \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsegs[i].pop();\n\t\t\t\t\t\t\tclose = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.addPoints(canvas, segs[i], true, arcSize, close);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tparseRegularly = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (parseRegularly)\n\t\t\t{\n\t\t\t\t// Renders the elements inside the given path\n\t\t\t\tvar childNode = node.firstChild;\n\t\t\t\t\n\t\t\t\twhile (childNode != null)\n\t\t\t\t{\n\t\t\t\t\tif (childNode.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.drawNode(canvas, shape, childNode, aspect, disableShadow, paint);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tchildNode = childNode.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (name == 'close')\n\t\t{\n\t\t\tcanvas.close();\n\t\t}\n\t\telse if (name == 'move')\n\t\t{\n\t\t\tcanvas.moveTo(x0 + Number(node.getAttribute('x')) * sx, y0 + Number(node.getAttribute('y')) * sy);\n\t\t}\n\t\telse if (name == 'line')\n\t\t{\n\t\t\tcanvas.lineTo(x0 + Number(node.getAttribute('x')) * sx, y0 + Number(node.getAttribute('y')) * sy);\n\t\t}\n\t\telse if (name == 'quad')\n\t\t{\n\t\t\tcanvas.quadTo(x0 + Number(node.getAttribute('x1')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y1')) * sy,\n\t\t\t\t\tx0 + Number(node.getAttribute('x2')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y2')) * sy);\n\t\t}\n\t\telse if (name == 'curve')\n\t\t{\n\t\t\tcanvas.curveTo(x0 + Number(node.getAttribute('x1')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y1')) * sy,\n\t\t\t\t\tx0 + Number(node.getAttribute('x2')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y2')) * sy,\n\t\t\t\t\tx0 + Number(node.getAttribute('x3')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y3')) * sy);\n\t\t}\n\t\telse if (name == 'arc')\n\t\t{\n\t\t\tcanvas.arcTo(Number(node.getAttribute('rx')) * sx,\n\t\t\t\t\tNumber(node.getAttribute('ry')) * sy,\n\t\t\t\t\tNumber(node.getAttribute('x-axis-rotation')),\n\t\t\t\t\tNumber(node.getAttribute('large-arc-flag')),\n\t\t\t\t\tNumber(node.getAttribute('sweep-flag')),\n\t\t\t\t\tx0 + Number(node.getAttribute('x')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y')) * sy);\n\t\t}\n\t\telse if (name == 'rect')\n\t\t{\n\t\t\tcanvas.rect(x0 + Number(node.getAttribute('x')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y')) * sy,\n\t\t\t\t\tNumber(node.getAttribute('w')) * sx,\n\t\t\t\t\tNumber(node.getAttribute('h')) * sy);\n\t\t}\n\t\telse if (name == 'roundrect')\n\t\t{\n\t\t\tvar arcsize = Number(node.getAttribute('arcsize'));\n\t\n\t\t\tif (arcsize == 0)\n\t\t\t{\n\t\t\t\tarcsize = mxConstants.RECTANGLE_ROUNDING_FACTOR * 100;\n\t\t\t}\n\t\t\t\n\t\t\tvar w = Number(node.getAttribute('w')) * sx;\n\t\t\tvar h = Number(node.getAttribute('h')) * sy;\n\t\t\tvar factor = Number(arcsize) / 100;\n\t\t\tvar r = Math.min(w * factor, h * factor);\n\t\t\t\n\t\t\tcanvas.roundrect(x0 + Number(node.getAttribute('x')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y')) * sy,\n\t\t\t\t\tw, h, r, r);\n\t\t}\n\t\telse if (name == 'ellipse')\n\t\t{\n\t\t\tcanvas.ellipse(x0 + Number(node.getAttribute('x')) * sx,\n\t\t\t\ty0 + Number(node.getAttribute('y')) * sy,\n\t\t\t\tNumber(node.getAttribute('w')) * sx,\n\t\t\t\tNumber(node.getAttribute('h')) * sy);\n\t\t}\n\t\telse if (name == 'image')\n\t\t{\n\t\t\tif (!shape.outline)\n\t\t\t{\n\t\t\t\tvar src = this.evaluateAttribute(node, 'src', shape);\n\t\t\t\t\n\t\t\t\tcanvas.image(x0 + Number(node.getAttribute('x')) * sx,\n\t\t\t\t\ty0 + Number(node.getAttribute('y')) * sy,\n\t\t\t\t\tNumber(node.getAttribute('w')) * sx,\n\t\t\t\t\tNumber(node.getAttribute('h')) * sy,\n\t\t\t\t\tsrc, false, node.getAttribute('flipH') == '1',\n\t\t\t\t\tnode.getAttribute('flipV') == '1');\n\t\t\t}\n\t\t}\n\t\telse if (name == 'text')\n\t\t{\n\t\t\tif (!shape.outline)\n\t\t\t{\n\t\t\t\tvar str = this.evaluateTextAttribute(node, 'str', shape);\n\t\t\t\tvar rotation = node.getAttribute('vertical') == '1' ? -90 : 0;\n\t\t\t\t\n\t\t\t\tif (node.getAttribute('align-shape') == '0')\n\t\t\t\t{\n\t\t\t\t\tvar dr = shape.rotation;\n\t\t\n\t\t\t\t\t// Depends on flipping\n\t\t\t\t\tvar flipH = mxUtils.getValue(shape.style, mxConstants.STYLE_FLIPH, 0) == 1;\n\t\t\t\t\tvar flipV = mxUtils.getValue(shape.style, mxConstants.STYLE_FLIPV, 0) == 1;\n\t\t\t\t\t\n\t\t\t\t\tif (flipH && flipV)\n\t\t\t\t\t{\n\t\t\t\t\t\trotation -= dr;\n\t\t\t\t\t}\n\t\t\t\t\telse if (flipH || flipV)\n\t\t\t\t\t{\n\t\t\t\t\t\trotation += dr;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\trotation -= dr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\trotation -= node.getAttribute('rotation');\n\t\t\n\t\t\t\tcanvas.text(x0 + Number(node.getAttribute('x')) * sx,\n\t\t\t\t\t\ty0 + Number(node.getAttribute('y')) * sy,\n\t\t\t\t\t\t0, 0, str, node.getAttribute('align') || 'left',\n\t\t\t\t\t\tnode.getAttribute('valign') || 'top', false, '',\n\t\t\t\t\t\tnull, false, rotation);\n\t\t\t}\n\t\t}\n\t\telse if (name == 'include-shape')\n\t\t{\n\t\t\tvar stencil = mxStencilRegistry.getStencil(node.getAttribute('name'));\n\t\t\t\n\t\t\tif (stencil != null)\n\t\t\t{\n\t\t\t\tvar x = x0 + Number(node.getAttribute('x')) * sx;\n\t\t\t\tvar y = y0 + Number(node.getAttribute('y')) * sy;\n\t\t\t\tvar w = Number(node.getAttribute('w')) * sx;\n\t\t\t\tvar h = Number(node.getAttribute('h')) * sy;\n\t\t\t\t\n\t\t\t\tstencil.drawShape(canvas, shape, x, y, w, h);\n\t\t\t}\n\t\t}\n\t\telse if (name == 'fillstroke')\n\t\t{\n\t\t\tcanvas.fillAndStroke();\n\t\t}\n\t\telse if (name == 'fill')\n\t\t{\n\t\t\tcanvas.fill();\n\t\t}\n\t\telse if (name == 'stroke')\n\t\t{\n\t\t\tcanvas.stroke();\n\t\t}\n\t\telse if (name == 'strokewidth')\n\t\t{\n\t\t\tvar s = (node.getAttribute('fixed') == '1') ? 1 : minScale;\n\t\t\tcanvas.setStrokeWidth(Number(node.getAttribute('width')) * s);\n\t\t}\n\t\telse if (name == 'dashed')\n\t\t{\n\t\t\tcanvas.setDashed(node.getAttribute('dashed') == '1');\n\t\t}\n\t\telse if (name == 'dashpattern')\n\t\t{\n\t\t\tvar value = node.getAttribute('pattern');\n\t\t\t\n\t\t\tif (value != null)\n\t\t\t{\n\t\t\t\tvar tmp = value.split(' ');\n\t\t\t\tvar pat = [];\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < tmp.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (tmp[i].length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tpat.push(Number(tmp[i]) * minScale);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvalue = pat.join(' ');\n\t\t\t\tcanvas.setDashPattern(value);\n\t\t\t}\n\t\t}\n\t\telse if (name == 'strokecolor')\n\t\t{\n\t\t\tcanvas.setStrokeColor(node.getAttribute('color'));\n\t\t}\n\t\telse if (name == 'linecap')\n\t\t{\n\t\t\tcanvas.setLineCap(node.getAttribute('cap'));\n\t\t}\n\t\telse if (name == 'linejoin')\n\t\t{\n\t\t\tcanvas.setLineJoin(node.getAttribute('join'));\n\t\t}\n\t\telse if (name == 'miterlimit')\n\t\t{\n\t\t\tcanvas.setMiterLimit(Number(node.getAttribute('limit')));\n\t\t}\n\t\telse if (name == 'fillcolor')\n\t\t{\n\t\t\tcanvas.setFillColor(node.getAttribute('color'));\n\t\t}\n\t\telse if (name == 'alpha')\n\t\t{\n\t\t\tcanvas.setAlpha(node.getAttribute('alpha'));\n\t\t}\n\t\telse if (name == 'fillalpha')\n\t\t{\n\t\t\tcanvas.setAlpha(node.getAttribute('alpha'));\n\t\t}\n\t\telse if (name == 'strokealpha')\n\t\t{\n\t\t\tcanvas.setAlpha(node.getAttribute('alpha'));\n\t\t}\n\t\telse if (name == 'fontcolor')\n\t\t{\n\t\t\tcanvas.setFontColor(node.getAttribute('color'));\n\t\t}\n\t\telse if (name == 'fontstyle')\n\t\t{\n\t\t\tcanvas.setFontStyle(node.getAttribute('style'));\n\t\t}\n\t\telse if (name == 'fontfamily')\n\t\t{\n\t\t\tcanvas.setFontFamily(node.getAttribute('family'));\n\t\t}\n\t\telse if (name == 'fontsize')\n\t\t{\n\t\t\tcanvas.setFontSize(Number(node.getAttribute('size')) * minScale);\n\t\t}\n\t\t\n\t\tif (disableShadow && (name == 'fillstroke' || name == 'fill' || name == 'stroke'))\n\t\t{\n\t\t\tdisableShadow = false;\n\t\t\tcanvas.setShadow(false);\n\t\t}\n\t}\n};\n\n__mxOutput.mxStencil = typeof mxStencil !== 'undefined' ? mxStencil : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n * \n * Code to add stencils.\n * \n * (code)\n * var req = mxUtils.load('test/stencils.xml');\n * var root = req.getDocumentElement();\n * var shape = root.firstChild;\n * \n * while (shape != null)\n * {\n * \t if (shape.nodeType == mxConstants.NODETYPE_ELEMENT)\n *   {\n *     mxStencilRegistry.addStencil(shape.getAttribute('name'), new mxStencil(shape));\n *   }\n *   \n *   shape = shape.nextSibling;\n * }\n * (end)\n */\nvar mxStencilRegistry =\n{\n\t/**\n\t * Class: mxStencilRegistry\n\t * \n\t * A singleton class that provides a registry for stencils and the methods\n\t * for painting those stencils onto a canvas or into a DOM.\n\t */\n\tstencils: {},\n\t\n\t/**\n\t * Function: addStencil\n\t * \n\t * Adds the given <mxStencil>.\n\t */\n\taddStencil: function(name, stencil)\n\t{\n\t\tmxStencilRegistry.stencils[name] = stencil;\n\t},\n\t\n\t/**\n\t * Function: getStencil\n\t * \n\t * Returns the <mxStencil> for the given name.\n\t */\n\tgetStencil: function(name)\n\t{\n\t\treturn mxStencilRegistry.stencils[name];\n\t}\n\n};\n\n__mxOutput.mxStencilRegistry = typeof mxStencilRegistry !== 'undefined' ? mxStencilRegistry : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxMarker =\n{\n\t/**\n\t * Class: mxMarker\n\t * \n\t * A static class that implements all markers for VML and SVG using a\n\t * registry. NOTE: The signatures in this class will change.\n\t * \n\t * Variable: markers\n\t * \n\t * Maps from markers names to functions to paint the markers.\n\t */\n\tmarkers: [],\n\t\n\t/**\n\t * Function: addMarker\n\t * \n\t * Adds a factory method that updates a given endpoint and returns a\n\t * function to paint the marker onto the given canvas.\n\t */\n\taddMarker: function(type, funct)\n\t{\n\t\tmxMarker.markers[type] = funct;\n\t},\n\t\n\t/**\n\t * Function: createMarker\n\t * \n\t * Returns a function to paint the given marker.\n\t */\n\tcreateMarker: function(canvas, shape, type, pe, unitX, unitY, size, source, sw, filled)\n\t{\n\t\tvar funct = mxMarker.markers[type];\n\t\t\n\t\treturn (funct != null) ? funct(canvas, shape, type, pe, unitX, unitY, size, source, sw, filled) : null;\n\t}\n\n};\n\n/**\n * Adds the classic and block marker factory method.\n */\n(function()\n{\n\tfunction createArrow(widthFactor)\n\t{\n\t\twidthFactor = (widthFactor != null) ? widthFactor : 2;\n\t\t\n\t\treturn function(canvas, shape, type, pe, unitX, unitY, size, source, sw, filled)\n\t\t{\n\t\t\t// The angle of the forward facing arrow sides against the x axis is\n\t\t\t// 26.565 degrees, 1/sin(26.565) = 2.236 / 2 = 1.118 ( / 2 allows for\n\t\t\t// only half the strokewidth is processed ).\n\t\t\tvar endOffsetX = unitX * sw * 1.118;\n\t\t\tvar endOffsetY = unitY * sw * 1.118;\n\t\t\t\n\t\t\tunitX = unitX * (size + sw);\n\t\t\tunitY = unitY * (size + sw);\n\t\n\t\t\tvar pt = pe.clone();\n\t\t\tpt.x -= endOffsetX;\n\t\t\tpt.y -= endOffsetY;\n\t\t\t\n\t\t\tvar f = (type != mxConstants.ARROW_CLASSIC && type != mxConstants.ARROW_CLASSIC_THIN) ? 1 : 3 / 4;\n\t\t\tpe.x += -unitX * f - endOffsetX;\n\t\t\tpe.y += -unitY * f - endOffsetY;\n\t\t\t\n\t\t\treturn function()\n\t\t\t{\n\t\t\t\tcanvas.begin();\n\t\t\t\tcanvas.moveTo(pt.x, pt.y);\n\t\t\t\tcanvas.lineTo(pt.x - unitX - unitY / widthFactor, pt.y - unitY + unitX / widthFactor);\n\t\t\t\n\t\t\t\tif (type == mxConstants.ARROW_CLASSIC || type == mxConstants.ARROW_CLASSIC_THIN)\n\t\t\t\t{\n\t\t\t\t\tcanvas.lineTo(pt.x - unitX * 3 / 4, pt.y - unitY * 3 / 4);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tcanvas.lineTo(pt.x + unitY / widthFactor - unitX, pt.y - unitY - unitX / widthFactor);\n\t\t\t\tcanvas.close();\n\t\n\t\t\t\tif (filled)\n\t\t\t\t{\n\t\t\t\t\tcanvas.fillAndStroke();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcanvas.stroke();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n\t\n\tmxMarker.addMarker('classic', createArrow(2));\n\tmxMarker.addMarker('classicThin', createArrow(3));\n\tmxMarker.addMarker('block', createArrow(2));\n\tmxMarker.addMarker('blockThin', createArrow(3));\n\t\n\tfunction createOpenArrow(widthFactor)\n\t{\n\t\twidthFactor = (widthFactor != null) ? widthFactor : 2;\n\t\t\n\t\treturn function(canvas, shape, type, pe, unitX, unitY, size, source, sw, filled)\n\t\t{\n\t\t\t// The angle of the forward facing arrow sides against the x axis is\n\t\t\t// 26.565 degrees, 1/sin(26.565) = 2.236 / 2 = 1.118 ( / 2 allows for\n\t\t\t// only half the strokewidth is processed ).\n\t\t\tvar endOffsetX = unitX * sw * 1.118;\n\t\t\tvar endOffsetY = unitY * sw * 1.118;\n\t\t\t\n\t\t\tunitX = unitX * (size + sw);\n\t\t\tunitY = unitY * (size + sw);\n\t\t\t\n\t\t\tvar pt = pe.clone();\n\t\t\tpt.x -= endOffsetX;\n\t\t\tpt.y -= endOffsetY;\n\t\t\t\n\t\t\tpe.x += -endOffsetX * 2;\n\t\t\tpe.y += -endOffsetY * 2;\n\n\t\t\treturn function()\n\t\t\t{\n\t\t\t\tcanvas.begin();\n\t\t\t\tcanvas.moveTo(pt.x - unitX - unitY / widthFactor, pt.y - unitY + unitX / widthFactor);\n\t\t\t\tcanvas.lineTo(pt.x, pt.y);\n\t\t\t\tcanvas.lineTo(pt.x + unitY / widthFactor - unitX, pt.y - unitY - unitX / widthFactor);\n\t\t\t\tcanvas.stroke();\n\t\t\t};\n\t\t}\n\t};\n\t\n\tmxMarker.addMarker('open', createOpenArrow(2));\n\tmxMarker.addMarker('openThin', createOpenArrow(3));\n\t\n\tmxMarker.addMarker('oval', function(canvas, shape, type, pe, unitX, unitY, size, source, sw, filled)\n\t{\n\t\tvar a = size / 2;\n\t\t\n\t\tvar pt = pe.clone();\n\t\tpe.x -= unitX * a;\n\t\tpe.y -= unitY * a;\n\n\t\treturn function()\n\t\t{\n\t\t\tcanvas.ellipse(pt.x - a, pt.y - a, size, size);\n\t\t\t\t\t\t\n\t\t\tif (filled)\n\t\t\t{\n\t\t\t\tcanvas.fillAndStroke();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcanvas.stroke();\n\t\t\t}\n\t\t};\n\t});\n\n\tfunction diamond(canvas, shape, type, pe, unitX, unitY, size, source, sw, filled)\n\t{\n\t\t// The angle of the forward facing arrow sides against the x axis is\n\t\t// 45 degrees, 1/sin(45) = 1.4142 / 2 = 0.7071 ( / 2 allows for\n\t\t// only half the strokewidth is processed ). Or 0.9862 for thin diamond.\n\t\t// Note these values and the tk variable below are dependent, update\n\t\t// both together (saves trig hard coding it).\n\t\tvar swFactor = (type == mxConstants.ARROW_DIAMOND) ?  0.7071 : 0.9862;\n\t\tvar endOffsetX = unitX * sw * swFactor;\n\t\tvar endOffsetY = unitY * sw * swFactor;\n\t\t\n\t\tunitX = unitX * (size + sw);\n\t\tunitY = unitY * (size + sw);\n\t\t\n\t\tvar pt = pe.clone();\n\t\tpt.x -= endOffsetX;\n\t\tpt.y -= endOffsetY;\n\t\t\n\t\tpe.x += -unitX - endOffsetX;\n\t\tpe.y += -unitY - endOffsetY;\n\t\t\n\t\t// thickness factor for diamond\n\t\tvar tk = ((type == mxConstants.ARROW_DIAMOND) ?  2 : 3.4);\n\t\t\n\t\treturn function()\n\t\t{\n\t\t\tcanvas.begin();\n\t\t\tcanvas.moveTo(pt.x, pt.y);\n\t\t\tcanvas.lineTo(pt.x - unitX / 2 - unitY / tk, pt.y + unitX / tk - unitY / 2);\n\t\t\tcanvas.lineTo(pt.x - unitX, pt.y - unitY);\n\t\t\tcanvas.lineTo(pt.x - unitX / 2 + unitY / tk, pt.y - unitY / 2 - unitX / tk);\n\t\t\tcanvas.close();\n\t\t\t\n\t\t\tif (filled)\n\t\t\t{\n\t\t\t\tcanvas.fillAndStroke();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcanvas.stroke();\n\t\t\t}\n\t\t};\n\t};\n\n\tmxMarker.addMarker('diamond', diamond);\n\tmxMarker.addMarker('diamondThin', diamond);\n})();\n\n__mxOutput.mxMarker = typeof mxMarker !== 'undefined' ? mxMarker : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxActor\n *\n * Extends <mxShape> to implement an actor shape. If a custom shape with one\n * filled area is needed, then this shape's <redrawPath> should be overridden.\n * \n * Example:\n * \n * (code)\n * function SampleShape() { }\n * \n * SampleShape.prototype = new mxActor();\n * SampleShape.prototype.constructor = vsAseShape;\n * \n * mxCellRenderer.registerShape('sample', SampleShape);\n * SampleShape.prototype.redrawPath = function(path, x, y, w, h)\n * {\n *   path.moveTo(0, 0);\n *   path.lineTo(w, h);\n *   // ...\n *   path.close();\n * }\n * (end)\n * \n * This shape is registered under <mxConstants.SHAPE_ACTOR> in\n * <mxCellRenderer>.\n * \n * Constructor: mxActor\n *\n * Constructs a new actor shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxActor(bounds, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxActor, mxShape);\n\n/**\n * Function: paintVertexShape\n * \n * Redirects to redrawPath for subclasses to work.\n */\nmxActor.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tc.translate(x, y);\n\tc.begin();\n\tthis.redrawPath(c, x, y, w, h);\n\tc.fillAndStroke();\n};\n\n/**\n * Function: redrawPath\n *\n * Draws the path for this shape.\n */\nmxActor.prototype.redrawPath = function(c, x, y, w, h)\n{\n\tvar width = w/3;\n\tc.moveTo(0, h);\n\tc.curveTo(0, 3 * h / 5, 0, 2 * h / 5, w / 2, 2 * h / 5);\n\tc.curveTo(w / 2 - width, 2 * h / 5, w / 2 - width, 0, w / 2, 0);\n\tc.curveTo(w / 2 + width, 0, w / 2 + width, 2 * h / 5, w / 2, 2 * h / 5);\n\tc.curveTo(w, 2 * h / 5, w, 3 * h / 5, w, h);\n\tc.close();\n};\n\n__mxOutput.mxActor = typeof mxActor !== 'undefined' ? mxActor : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCloud\n *\n * Extends <mxActor> to implement a cloud shape.\n * \n * This shape is registered under <mxConstants.SHAPE_CLOUD> in\n * <mxCellRenderer>.\n * \n * Constructor: mxCloud\n *\n * Constructs a new cloud shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxCloud(bounds, fill, stroke, strokewidth)\n{\n\tmxActor.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxActor.\n */\nmxUtils.extend(mxCloud, mxActor);\n\n/**\n * Function: redrawPath\n *\n * Draws the path for this shape.\n */\nmxCloud.prototype.redrawPath = function(c, x, y, w, h)\n{\n\tc.moveTo(0.25 * w, 0.25 * h);\n\tc.curveTo(0.05 * w, 0.25 * h, 0, 0.5 * h, 0.16 * w, 0.55 * h);\n\tc.curveTo(0, 0.66 * h, 0.18 * w, 0.9 * h, 0.31 * w, 0.8 * h);\n\tc.curveTo(0.4 * w, h, 0.7 * w, h, 0.8 * w, 0.8 * h);\n\tc.curveTo(w, 0.8 * h, w, 0.6 * h, 0.875 * w, 0.5 * h);\n\tc.curveTo(w, 0.3 * h, 0.8 * w, 0.1 * h, 0.625 * w, 0.2 * h);\n\tc.curveTo(0.5 * w, 0.05 * h, 0.3 * w, 0.05 * h, 0.25 * w, 0.25 * h);\n\tc.close();\n};\n\n__mxOutput.mxCloud = typeof mxCloud !== 'undefined' ? mxCloud : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxRectangleShape\n *\n * Extends <mxShape> to implement a rectangle shape.\n * This shape is registered under <mxConstants.SHAPE_RECTANGLE>\n * in <mxCellRenderer>.\n * \n * Constructor: mxRectangleShape\n *\n * Constructs a new rectangle shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxRectangleShape(bounds, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxRectangleShape, mxShape);\n\n/**\n * Function: isHtmlAllowed\n *\n * Returns true for non-rounded, non-rotated shapes with no glass gradient.\n */\nmxRectangleShape.prototype.isHtmlAllowed = function()\n{\n\tvar events = true;\n\t\n\tif (this.style != null)\n\t{\n\t\tevents = mxUtils.getValue(this.style, mxConstants.STYLE_POINTER_EVENTS, '1') == '1';\t\t\n\t}\n\t\n\treturn !this.isRounded && !this.glass && this.rotation == 0 && (events ||\n\t\t(this.fill != null && this.fill != mxConstants.NONE));\n};\n\n/**\n * Function: paintBackground\n * \n * Generic background painting implementation.\n */\nmxRectangleShape.prototype.paintBackground = function(c, x, y, w, h)\n{\n\tvar events = true;\n\t\n\tif (this.style != null)\n\t{\n\t\tevents = mxUtils.getValue(this.style, mxConstants.STYLE_POINTER_EVENTS, '1') == '1';\n\t}\n\t\n\tif (events || (this.fill != null && this.fill != mxConstants.NONE) ||\n\t\t(this.stroke != null && this.stroke != mxConstants.NONE))\n\t{\n\t\tif (!events && (this.fill == null || this.fill == mxConstants.NONE))\n\t\t{\n\t\t\tc.pointerEvents = false;\n\t\t}\n\t\t\n\t\tif (this.isRounded)\n\t\t{\n\t\t\tvar r = 0;\n\t\t\t\n\t\t\tif (mxUtils.getValue(this.style, mxConstants.STYLE_ABSOLUTE_ARCSIZE, 0) == '1')\n\t\t\t{\n\t\t\t\tr = Math.min(w / 2, Math.min(h / 2, mxUtils.getValue(this.style,\n\t\t\t\t\tmxConstants.STYLE_ARCSIZE, mxConstants.LINE_ARCSIZE) / 2));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar f = mxUtils.getValue(this.style, mxConstants.STYLE_ARCSIZE,\n\t\t\t\t\tmxConstants.RECTANGLE_ROUNDING_FACTOR * 100) / 100;\n\t\t\t\tr = Math.min(w * f, h * f);\n\t\t\t}\n\t\t\t\n\t\t\tc.roundrect(x, y, w, h, r, r);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc.rect(x, y, w, h);\n\t\t}\n\t\t\t\n\t\tc.fillAndStroke();\n\t}\n};\n\n/**\n * Function: isRoundable\n * \n * Adds roundable support.\n */\nmxRectangleShape.prototype.isRoundable = function(c, x, y, w, h)\n{\n\treturn true;\n};\n\n/**\n * Function: paintForeground\n * \n * Generic background painting implementation.\n */\nmxRectangleShape.prototype.paintForeground = function(c, x, y, w, h)\n{\n\tif (this.glass && !this.outline && this.fill != null && this.fill != mxConstants.NONE)\n\t{\n\t\tthis.paintGlassEffect(c, x, y, w, h, this.getArcSize(w + this.strokewidth, h + this.strokewidth));\n\t}\n};\n\n__mxOutput.mxRectangleShape = typeof mxRectangleShape !== 'undefined' ? mxRectangleShape : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxEllipse\n *\n * Extends <mxShape> to implement an ellipse shape.\n * This shape is registered under <mxConstants.SHAPE_ELLIPSE>\n * in <mxCellRenderer>.\n * \n * Constructor: mxEllipse\n *\n * Constructs a new ellipse shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxEllipse(bounds, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxEllipse, mxShape);\n\n/**\n * Function: paintVertexShape\n * \n * Paints the ellipse shape.\n */\nmxEllipse.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tc.ellipse(x, y, w, h);\n\tc.fillAndStroke();\n};\n\n__mxOutput.mxEllipse = typeof mxEllipse !== 'undefined' ? mxEllipse : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDoubleEllipse\n *\n * Extends <mxShape> to implement a double ellipse shape. This shape is\n * registered under <mxConstants.SHAPE_DOUBLE_ELLIPSE> in <mxCellRenderer>.\n * Use the following override to only fill the inner ellipse in this shape:\n * \n * (code)\n * mxDoubleEllipse.prototype.paintVertexShape = function(c, x, y, w, h)\n * {\n *   c.ellipse(x, y, w, h);\n *   c.stroke();\n *   \n *   var inset = mxUtils.getValue(this.style, mxConstants.STYLE_MARGIN, Math.min(3 + this.strokewidth, Math.min(w / 5, h / 5)));\n *   x += inset;\n *   y += inset;\n *   w -= 2 * inset;\n *   h -= 2 * inset;\n *   \n *   if (w > 0 && h > 0)\n *   {\n *     c.ellipse(x, y, w, h);\n *   }\n *   \n *   c.fillAndStroke();\n * };\n * (end)\n * \n * Constructor: mxDoubleEllipse\n *\n * Constructs a new ellipse shape.\n *\n * Parameters:\n *\n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxDoubleEllipse(bounds, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxDoubleEllipse, mxShape);\n\n/**\n * Variable: vmlScale\n * \n * Scale for improving the precision of VML rendering. Default is 10.\n */\nmxDoubleEllipse.prototype.vmlScale = 10;\n\n/**\n * Function: paintBackground\n * \n * Paints the background.\n */\nmxDoubleEllipse.prototype.paintBackground = function(c, x, y, w, h)\n{\n\tc.ellipse(x, y, w, h);\n\tc.fillAndStroke();\n};\n\n/**\n * Function: paintForeground\n * \n * Paints the foreground.\n */\nmxDoubleEllipse.prototype.paintForeground = function(c, x, y, w, h)\n{\n\tif (!this.outline)\n\t{\n\t\tvar margin = mxUtils.getValue(this.style, mxConstants.STYLE_MARGIN, Math.min(3 + this.strokewidth, Math.min(w / 5, h / 5)));\n\t\tx += margin;\n\t\ty += margin;\n\t\tw -= 2 * margin;\n\t\th -= 2 * margin;\n\t\t\n\t\t// FIXME: Rounding issues in IE8 standards mode (not in 1.x)\n\t\tif (w > 0 && h > 0)\n\t\t{\n\t\t\tc.ellipse(x, y, w, h);\n\t\t}\n\t\t\n\t\tc.stroke();\n\t}\n};\n\n/**\n * Function: getLabelBounds\n * \n * Returns the bounds for the label.\n */\nmxDoubleEllipse.prototype.getLabelBounds = function(rect)\n{\n\tvar margin = (mxUtils.getValue(this.style, mxConstants.STYLE_MARGIN, Math.min(3 + this.strokewidth,\n\t\t\tMath.min(rect.width / 5 / this.scale, rect.height / 5 / this.scale)))) * this.scale;\n\n\treturn new mxRectangle(rect.x + margin, rect.y + margin, rect.width - 2 * margin, rect.height - 2 * margin);\n};\n\n__mxOutput.mxDoubleEllipse = typeof mxDoubleEllipse !== 'undefined' ? mxDoubleEllipse : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxRhombus\n *\n * Extends <mxShape> to implement a rhombus (aka diamond) shape.\n * This shape is registered under <mxConstants.SHAPE_RHOMBUS>\n * in <mxCellRenderer>.\n * \n * Constructor: mxRhombus\n *\n * Constructs a new rhombus shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxRhombus(bounds, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxRhombus, mxShape);\n\n/**\n * Function: isRoundable\n * \n * Adds roundable support.\n */\nmxRhombus.prototype.isRoundable = function()\n{\n\treturn true;\n};\n\n/**\n * Function: paintVertexShape\n * \n * Generic painting implementation.\n */\nmxRhombus.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tvar hw = w / 2;\n\tvar hh = h / 2;\n\t\n\tvar arcSize = mxUtils.getValue(this.style, mxConstants.STYLE_ARCSIZE, mxConstants.LINE_ARCSIZE) / 2;\n\tc.begin();\n\tthis.addPoints(c, [new mxPoint(x + hw, y), new mxPoint(x + w, y + hh), new mxPoint(x + hw, y + h),\n\t     new mxPoint(x, y + hh)], this.isRounded, arcSize, true);\n\tc.fillAndStroke();\n};\n\n__mxOutput.mxRhombus = typeof mxRhombus !== 'undefined' ? mxRhombus : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPolyline\n *\n * Extends <mxShape> to implement a polyline (a line with multiple points).\n * This shape is registered under <mxConstants.SHAPE_POLYLINE> in\n * <mxCellRenderer>.\n * \n * Constructor: mxPolyline\n *\n * Constructs a new polyline shape.\n * \n * Parameters:\n * \n * points - Array of <mxPoints> that define the points. This is stored in\n * <mxShape.points>.\n * stroke - String that defines the stroke color. Default is 'black'. This is\n * stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxPolyline(points, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.points = points;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxPolyline, mxShape);\n\n/**\n * Function: getRotation\n * \n * Returns 0.\n */\nmxPolyline.prototype.getRotation = function()\n{\n\treturn 0;\n};\n\n/**\n * Function: getShapeRotation\n * \n * Returns 0.\n */\nmxPolyline.prototype.getShapeRotation = function()\n{\n\treturn 0;\n};\n\n/**\n * Function: isPaintBoundsInverted\n * \n * Returns false.\n */\nmxPolyline.prototype.isPaintBoundsInverted = function()\n{\n\treturn false;\n};\n\n/**\n * Function: paintEdgeShape\n * \n * Paints the line shape.\n */\nmxPolyline.prototype.paintEdgeShape = function(c, pts)\n{\n\tvar prev = c.pointerEventsValue;\n\tc.pointerEventsValue = 'stroke';\n\t\n\tif (this.style == null || this.style[mxConstants.STYLE_CURVED] != 1)\n\t{\n\t\tthis.paintLine(c, pts, this.isRounded);\n\t}\n\telse\n\t{\n\t\tthis.paintCurvedLine(c, pts);\n\t}\n\t\n\tc.pointerEventsValue = prev;\n};\n\n/**\n * Function: paintLine\n * \n * Paints the line shape.\n */\nmxPolyline.prototype.paintLine = function(c, pts, rounded)\n{\n\tvar arcSize = mxUtils.getValue(this.style, mxConstants.STYLE_ARCSIZE, mxConstants.LINE_ARCSIZE) / 2;\n\tc.begin();\n\tthis.addPoints(c, pts, rounded, arcSize, false);\n\tc.stroke();\n};\n\n/**\n * Function: paintCurvedLine\n * \n * Paints a curved line.\n */\nmxPolyline.prototype.paintCurvedLine = function(c, pts)\n{\n\tc.begin();\n\t\n\tvar pt = pts[0];\n\tvar n = pts.length;\n\t\n\tc.moveTo(pt.x, pt.y);\n\t\n\tfor (var i = 1; i < n - 2; i++)\n\t{\n\t\tvar p0 = pts[i];\n\t\tvar p1 = pts[i + 1];\n\t\tvar ix = (p0.x + p1.x) / 2;\n\t\tvar iy = (p0.y + p1.y) / 2;\n\t\t\n\t\tc.quadTo(p0.x, p0.y, ix, iy);\n\t}\n\t\n\tvar p0 = pts[n - 2];\n\tvar p1 = pts[n - 1];\n\t\n\tc.quadTo(p0.x, p0.y, p1.x, p1.y);\n\tc.stroke();\n};\n\n__mxOutput.mxPolyline = typeof mxPolyline !== 'undefined' ? mxPolyline : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxArrow\n *\n * Extends <mxShape> to implement an arrow shape. (The shape\n * is used to represent edges, not vertices.)\n * This shape is registered under <mxConstants.SHAPE_ARROW>\n * in <mxCellRenderer>.\n * \n * Constructor: mxArrow\n *\n * Constructs a new arrow shape.\n * \n * Parameters:\n * \n * points - Array of <mxPoints> that define the points. This is stored in\n * <mxShape.points>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n * arrowWidth - Optional integer that defines the arrow width. Default is\n * <mxConstants.ARROW_WIDTH>. This is stored in <arrowWidth>.\n * spacing - Optional integer that defines the spacing between the arrow shape\n * and its endpoints. Default is <mxConstants.ARROW_SPACING>. This is stored in\n * <spacing>.\n * endSize - Optional integer that defines the size of the arrowhead. Default\n * is <mxConstants.ARROW_SIZE>. This is stored in <endSize>.\n */\nfunction mxArrow(points, fill, stroke, strokewidth, arrowWidth, spacing, endSize)\n{\n\tmxShape.call(this);\n\tthis.points = points;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n\tthis.arrowWidth = (arrowWidth != null) ? arrowWidth : mxConstants.ARROW_WIDTH;\n\tthis.spacing = (spacing != null) ? spacing : mxConstants.ARROW_SPACING;\n\tthis.endSize = (endSize != null) ? endSize : mxConstants.ARROW_SIZE;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxArrow, mxShape);\n\n/**\n * Function: augmentBoundingBox\n *\n * Augments the bounding box with the edge width and markers.\n */\nmxArrow.prototype.augmentBoundingBox = function(bbox)\n{\n\tmxShape.prototype.augmentBoundingBox.apply(this, arguments);\n\t\n\tvar w = Math.max(this.arrowWidth, this.endSize);\n\tbbox.grow((w / 2 + this.strokewidth) * this.scale);\n};\n\n/**\n * Function: paintEdgeShape\n * \n * Paints the line shape.\n */\nmxArrow.prototype.paintEdgeShape = function(c, pts)\n{\n\t// Geometry of arrow\n\tvar spacing =  mxConstants.ARROW_SPACING;\n\tvar width = mxConstants.ARROW_WIDTH;\n\tvar arrow = mxConstants.ARROW_SIZE;\n\n\t// Base vector (between end points)\n\tvar p0 = pts[0];\n\tvar pe = pts[pts.length - 1];\n\tvar dx = pe.x - p0.x;\n\tvar dy = pe.y - p0.y;\n\tvar dist = Math.sqrt(dx * dx + dy * dy);\n\tvar length = dist - 2 * spacing - arrow;\n\t\n\t// Computes the norm and the inverse norm\n\tvar nx = dx / dist;\n\tvar ny = dy / dist;\n\tvar basex = length * nx;\n\tvar basey = length * ny;\n\tvar floorx = width * ny/3;\n\tvar floory = -width * nx/3;\n\t\n\t// Computes points\n\tvar p0x = p0.x - floorx / 2 + spacing * nx;\n\tvar p0y = p0.y - floory / 2 + spacing * ny;\n\tvar p1x = p0x + floorx;\n\tvar p1y = p0y + floory;\n\tvar p2x = p1x + basex;\n\tvar p2y = p1y + basey;\n\tvar p3x = p2x + floorx;\n\tvar p3y = p2y + floory;\n\t// p4 not necessary\n\tvar p5x = p3x - 3 * floorx;\n\tvar p5y = p3y - 3 * floory;\n\t\n\tc.begin();\n\tc.moveTo(p0x, p0y);\n\tc.lineTo(p1x, p1y);\n\tc.lineTo(p2x, p2y);\n\tc.lineTo(p3x, p3y);\n\tc.lineTo(pe.x - spacing * nx, pe.y - spacing * ny);\n\tc.lineTo(p5x, p5y);\n\tc.lineTo(p5x + floorx, p5y + floory);\n\tc.close();\n\n\tc.fillAndStroke();\n};\n\n__mxOutput.mxArrow = typeof mxArrow !== 'undefined' ? mxArrow : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxArrowConnector\n *\n * Extends <mxShape> to implement an new rounded arrow shape with support for\n * waypoints and double arrows. (The shape is used to represent edges, not\n * vertices.) This shape is registered under <mxConstants.SHAPE_ARROW_CONNECTOR>\n * in <mxCellRenderer>.\n * \n * Constructor: mxArrowConnector\n *\n * Constructs a new arrow shape.\n * \n * Parameters:\n * \n * points - Array of <mxPoints> that define the points. This is stored in\n * <mxShape.points>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n * arrowWidth - Optional integer that defines the arrow width. Default is\n * <mxConstants.ARROW_WIDTH>. This is stored in <arrowWidth>.\n * spacing - Optional integer that defines the spacing between the arrow shape\n * and its endpoints. Default is <mxConstants.ARROW_SPACING>. This is stored in\n * <spacing>.\n * endSize - Optional integer that defines the size of the arrowhead. Default\n * is <mxConstants.ARROW_SIZE>. This is stored in <endSize>.\n */\nfunction mxArrowConnector(points, fill, stroke, strokewidth, arrowWidth, spacing, endSize)\n{\n\tmxShape.call(this);\n\tthis.points = points;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n\tthis.arrowWidth = (arrowWidth != null) ? arrowWidth : mxConstants.ARROW_WIDTH;\n\tthis.arrowSpacing = (spacing != null) ? spacing : mxConstants.ARROW_SPACING;\n\tthis.startSize = mxConstants.ARROW_SIZE / 5;\n\tthis.endSize = mxConstants.ARROW_SIZE / 5;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxArrowConnector, mxShape);\n\n/**\n * Variable: useSvgBoundingBox\n * \n * Allows to use the SVG bounding box in SVG. Default is false for performance\n * reasons.\n */\nmxArrowConnector.prototype.useSvgBoundingBox = true;\n\n/**\n * Function: isRoundable\n * \n * Hook for subclassers.\n */\nmxArrowConnector.prototype.isRoundable = function()\n{\n\treturn true;\n};\n\n/**\n * Variable: resetStyles\n * \n * Overrides mxShape to reset spacing.\n */\nmxArrowConnector.prototype.resetStyles = function()\n{\n\tmxShape.prototype.resetStyles.apply(this, arguments);\n\t\n\tthis.arrowSpacing = mxConstants.ARROW_SPACING;\n};\n\n/**\n * Overrides apply to get smooth transition from default start- and endsize.\n */\nmxArrowConnector.prototype.apply = function(state)\n{\n\tmxShape.prototype.apply.apply(this, arguments);\n\n\tif (this.style != null)\n\t{\n\t\tthis.startSize = mxUtils.getNumber(this.style, mxConstants.STYLE_STARTSIZE, mxConstants.ARROW_SIZE / 5) * 3;\n\t\tthis.endSize = mxUtils.getNumber(this.style, mxConstants.STYLE_ENDSIZE, mxConstants.ARROW_SIZE / 5) * 3;\n\t}\n};\n\n/**\n * Function: augmentBoundingBox\n *\n * Augments the bounding box with the edge width and markers.\n */\nmxArrowConnector.prototype.augmentBoundingBox = function(bbox)\n{\n\tmxShape.prototype.augmentBoundingBox.apply(this, arguments);\n\t\n\tvar w = this.getEdgeWidth();\n\t\n\tif (this.isMarkerStart())\n\t{\n\t\tw = Math.max(w, this.getStartArrowWidth());\n\t}\n\t\n\tif (this.isMarkerEnd())\n\t{\n\t\tw = Math.max(w, this.getEndArrowWidth());\n\t}\n\t\n\tbbox.grow((w / 2 + this.strokewidth) * this.scale);\n};\n\n/**\n * Function: paintEdgeShape\n * \n * Paints the line shape.\n */\nmxArrowConnector.prototype.paintEdgeShape = function(c, pts)\n{\n\t// Geometry of arrow\n\tvar strokeWidth = this.strokewidth;\n\t\n\tif (this.outline)\n\t{\n\t\tstrokeWidth = Math.max(1, mxUtils.getNumber(this.style, mxConstants.STYLE_STROKEWIDTH, this.strokewidth));\n\t}\n\t\n\tvar startWidth = this.getStartArrowWidth() + strokeWidth;\n\tvar endWidth = this.getEndArrowWidth() + strokeWidth;\n\tvar edgeWidth = this.outline ? this.getEdgeWidth() + strokeWidth : this.getEdgeWidth();\n\tvar openEnded = this.isOpenEnded();\n\tvar markerStart = this.isMarkerStart();\n\tvar markerEnd = this.isMarkerEnd();\n\tvar spacing = (openEnded) ? 0 : this.arrowSpacing + strokeWidth / 2;\n\tvar startSize = this.startSize + strokeWidth;\n\tvar endSize = this.endSize + strokeWidth;\n\tvar isRounded = this.isArrowRounded();\n\t\n\t// Base vector (between first points)\n\tvar pe = pts[pts.length - 1];\n\n\t// Finds first non-overlapping point\n\tvar i0 = 1;\n\t\n\twhile (i0 < pts.length - 1 && pts[i0].x == pts[0].x && pts[i0].y == pts[0].y)\n\t{\n\t\ti0++;\n\t}\n\t\n\tvar dx = pts[i0].x - pts[0].x;\n\tvar dy = pts[i0].y - pts[0].y;\n\tvar dist = Math.sqrt(dx * dx + dy * dy);\n\t\n\tif (dist == 0)\n\t{\n\t\treturn;\n\t}\n\t\n\t// Computes the norm and the inverse norm\n\tvar nx = dx / dist;\n\tvar nx2, nx1 = nx;\n\tvar ny = dy / dist;\n\tvar ny2, ny1 = ny;\n\tvar orthx = edgeWidth * ny;\n\tvar orthy = -edgeWidth * nx;\n\t\n\t// Stores the inbound function calls in reverse order in fns\n\tvar fns = [];\n\t\n\tif (isRounded)\n\t{\n\t\tc.setLineJoin('round');\n\t}\n\telse if (pts.length > 2)\n\t{\n\t\t// Only mitre if there are waypoints\n\t\tc.setMiterLimit(1.42);\n\t}\n\n\tc.begin();\n\n\tvar startNx = nx;\n\tvar startNy = ny;\n\n\tif (markerStart && !openEnded)\n\t{\n\t\tthis.paintMarker(c, pts[0].x, pts[0].y, nx, ny, startSize, startWidth, edgeWidth, spacing, true);\n\t}\n\telse\n\t{\n\t\tvar outStartX = pts[0].x + orthx / 2 + spacing * nx;\n\t\tvar outStartY = pts[0].y + orthy / 2 + spacing * ny;\n\t\tvar inEndX = pts[0].x - orthx / 2 + spacing * nx;\n\t\tvar inEndY = pts[0].y - orthy / 2 + spacing * ny;\n\t\t\n\t\tif (openEnded)\n\t\t{\n\t\t\tc.moveTo(outStartX, outStartY);\n\t\t\t\n\t\t\tfns.push(function()\n\t\t\t{\n\t\t\t\tc.lineTo(inEndX, inEndY);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc.moveTo(inEndX, inEndY);\n\t\t\tc.lineTo(outStartX, outStartY);\n\t\t}\n\t}\n\t\n\tvar dx1 = 0;\n\tvar dy1 = 0;\n\tvar dist1 = 0;\n\n\tfor (var i = 0; i < pts.length - 2; i++)\n\t{\n\t\t// Work out in which direction the line is bending\n\t\tvar pos = mxUtils.relativeCcw(pts[i].x, pts[i].y, pts[i+1].x, pts[i+1].y, pts[i+2].x, pts[i+2].y);\n\n\t\tdx1 = pts[i+2].x - pts[i+1].x;\n\t\tdy1 = pts[i+2].y - pts[i+1].y;\n\n\t\tdist1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n\t\t\n\t\tif (dist1 != 0)\n\t\t{\n\t\t\tnx1 = dx1 / dist1;\n\t\t\tny1 = dy1 / dist1;\n\t\t\t\n\t\t\tvar tmp1 = nx * nx1 + ny * ny1;\n\t\t\tvar tmp = Math.max(Math.sqrt((tmp1 + 1) / 2), 0.04);\n\t\t\t\n\t\t\t// Work out the normal orthogonal to the line through the control point and the edge sides intersection\n\t\t\tnx2 = (nx + nx1);\n\t\t\tny2 = (ny + ny1);\n\t\n\t\t\tvar dist2 = Math.sqrt(nx2 * nx2 + ny2 * ny2);\n\t\t\t\n\t\t\tif (dist2 != 0)\n\t\t\t{\n\t\t\t\tnx2 = nx2 / dist2;\n\t\t\t\tny2 = ny2 / dist2;\n\t\t\t\t\n\t\t\t\t// Higher strokewidths require a larger minimum bend, 0.35 covers all but the most extreme cases\n\t\t\t\tvar strokeWidthFactor = Math.max(tmp, Math.min(this.strokewidth / 200 + 0.04, 0.35));\n\t\t\t\tvar angleFactor = (pos != 0 && isRounded) ? Math.max(0.1, strokeWidthFactor) : Math.max(tmp, 0.06);\n\n\t\t\t\tvar outX = pts[i+1].x + ny2 * edgeWidth / 2 / angleFactor;\n\t\t\t\tvar outY = pts[i+1].y - nx2 * edgeWidth / 2 / angleFactor;\n\t\t\t\tvar inX = pts[i+1].x - ny2 * edgeWidth / 2 / angleFactor;\n\t\t\t\tvar inY = pts[i+1].y + nx2 * edgeWidth / 2 / angleFactor;\n\t\t\t\t\n\t\t\t\tif (pos == 0 || !isRounded)\n\t\t\t\t{\n\t\t\t\t\t// If the two segments are aligned, or if we're not drawing curved sections between segments\n\t\t\t\t\t// just draw straight to the intersection point\n\t\t\t\t\tc.lineTo(outX, outY);\n\t\t\t\t\t\n\t\t\t\t\t(function(x, y)\n\t\t\t\t\t{\n\t\t\t\t\t\tfns.push(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tc.lineTo(x, y);\n\t\t\t\t\t\t});\n\t\t\t\t\t})(inX, inY);\n\t\t\t\t}\n\t\t\t\telse if (pos == -1)\n\t\t\t\t{\n\t\t\t\t\tvar c1x = inX + ny * edgeWidth;\n\t\t\t\t\tvar c1y = inY - nx * edgeWidth;\n\t\t\t\t\tvar c2x = inX + ny1 * edgeWidth;\n\t\t\t\t\tvar c2y = inY - nx1 * edgeWidth;\n\t\t\t\t\tc.lineTo(c1x, c1y);\n\t\t\t\t\tc.quadTo(outX, outY, c2x, c2y);\n\t\t\t\t\t\n\t\t\t\t\t(function(x, y)\n\t\t\t\t\t{\n\t\t\t\t\t\tfns.push(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tc.lineTo(x, y);\n\t\t\t\t\t\t});\n\t\t\t\t\t})(inX, inY);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tc.lineTo(outX, outY);\n\t\t\t\t\t\n\t\t\t\t\t(function(x, y)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar c1x = outX - ny * edgeWidth;\n\t\t\t\t\t\tvar c1y = outY + nx * edgeWidth;\n\t\t\t\t\t\tvar c2x = outX - ny1 * edgeWidth;\n\t\t\t\t\t\tvar c2y = outY + nx1 * edgeWidth;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfns.push(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tc.quadTo(x, y, c1x, c1y);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfns.push(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tc.lineTo(c2x, c2y);\n\t\t\t\t\t\t});\n\t\t\t\t\t})(inX, inY);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnx = nx1;\n\t\t\t\tny = ny1;\n\t\t\t}\n\t\t}\n\t}\n\t\n\torthx = edgeWidth * ny1;\n\torthy = - edgeWidth * nx1;\n\n\tif (markerEnd && !openEnded)\n\t{\n\t\tthis.paintMarker(c, pe.x, pe.y, -nx, -ny, endSize, endWidth, edgeWidth, spacing, false);\n\t}\n\telse\n\t{\n\t\tc.lineTo(pe.x - spacing * nx1 + orthx / 2, pe.y - spacing * ny1 + orthy / 2);\n\t\t\n\t\tvar inStartX = pe.x - spacing * nx1 - orthx / 2;\n\t\tvar inStartY = pe.y - spacing * ny1 - orthy / 2;\n\n\t\tif (!openEnded)\n\t\t{\n\t\t\tc.lineTo(inStartX, inStartY);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc.moveTo(inStartX, inStartY);\n\t\t\t\n\t\t\tfns.splice(0, 0, function()\n\t\t\t{\n\t\t\t\tc.moveTo(inStartX, inStartY);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfor (var i = fns.length - 1; i >= 0; i--)\n\t{\n\t\tfns[i]();\n\t}\n\n\tif (openEnded)\n\t{\n\t\tc.end();\n\t\tc.stroke();\n\t}\n\telse\n\t{\n\t\tc.close();\n\t\tc.fillAndStroke();\n\t}\n\t\n\t// Workaround for shadow on top of base arrow\n\tc.setShadow(false);\n\t\n\t// Need to redraw the markers without the low miter limit\n\tc.setMiterLimit(4);\n\t\n\tif (isRounded)\n\t{\n\t\tc.setLineJoin('flat');\n\t}\n\n\tif (pts.length > 2)\n\t{\n\t\t// Only to repaint markers if no waypoints\n\t\t// Need to redraw the markers without the low miter limit\n\t\tc.setMiterLimit(4);\n\t\tif (markerStart && !openEnded)\n\t\t{\n\t\t\tc.begin();\n\t\t\tthis.paintMarker(c, pts[0].x, pts[0].y, startNx, startNy, startSize, startWidth, edgeWidth, spacing, true);\n\t\t\tc.stroke();\n\t\t\tc.end();\n\t\t}\n\t\t\n\t\tif (markerEnd && !openEnded)\n\t\t{\n\t\t\tc.begin();\n\t\t\tthis.paintMarker(c, pe.x, pe.y, -nx, -ny, endSize, endWidth, edgeWidth, spacing, true);\n\t\t\tc.stroke();\n\t\t\tc.end();\n\t\t}\n\t}\n};\n\n/**\n * Function: paintMarker\n * \n * Paints the marker.\n */\nmxArrowConnector.prototype.paintMarker = function(c, ptX, ptY, nx, ny, size, arrowWidth, edgeWidth, spacing, initialMove)\n{\n\tvar widthArrowRatio = edgeWidth / arrowWidth;\n\tvar orthx = edgeWidth * ny / 2;\n\tvar orthy = -edgeWidth * nx / 2;\n\n\tvar spaceX = (spacing + size) * nx;\n\tvar spaceY = (spacing + size) * ny;\n\n\tif (initialMove)\n\t{\n\t\tc.moveTo(ptX - orthx + spaceX, ptY - orthy + spaceY);\n\t}\n\telse\n\t{\n\t\tc.lineTo(ptX - orthx + spaceX, ptY - orthy + spaceY);\n\t}\n\n\tc.lineTo(ptX - orthx / widthArrowRatio + spaceX, ptY - orthy / widthArrowRatio + spaceY);\n\tc.lineTo(ptX + spacing * nx, ptY + spacing * ny);\n\tc.lineTo(ptX + orthx / widthArrowRatio + spaceX, ptY + orthy / widthArrowRatio + spaceY);\n\tc.lineTo(ptX + orthx + spaceX, ptY + orthy + spaceY);\n}\n\n/**\n * Function: isArrowRounded\n * \n * Returns wether the arrow is rounded\n */\nmxArrowConnector.prototype.isArrowRounded = function()\n{\n\treturn this.isRounded;\n};\n\n/**\n * Function: getStartArrowWidth\n * \n * Returns the width of the start arrow\n */\nmxArrowConnector.prototype.getStartArrowWidth = function()\n{\n\treturn mxConstants.ARROW_WIDTH;\n};\n\n/**\n * Function: getEndArrowWidth\n * \n * Returns the width of the end arrow\n */\nmxArrowConnector.prototype.getEndArrowWidth = function()\n{\n\treturn mxConstants.ARROW_WIDTH;\n};\n\n/**\n * Function: getEdgeWidth\n * \n * Returns the width of the body of the edge\n */\nmxArrowConnector.prototype.getEdgeWidth = function()\n{\n\treturn mxConstants.ARROW_WIDTH / 3;\n};\n\n/**\n * Function: isOpenEnded\n * \n * Returns whether the ends of the shape are drawn\n */\nmxArrowConnector.prototype.isOpenEnded = function()\n{\n\treturn false;\n};\n\n/**\n * Function: isMarkerStart\n * \n * Returns whether the start marker is drawn\n */\nmxArrowConnector.prototype.isMarkerStart = function()\n{\n\treturn (mxUtils.getValue(this.style, mxConstants.STYLE_STARTARROW, mxConstants.NONE) != mxConstants.NONE);\n};\n\n/**\n * Function: isMarkerEnd\n * \n * Returns whether the end marker is drawn\n */\nmxArrowConnector.prototype.isMarkerEnd = function()\n{\n\treturn (mxUtils.getValue(this.style, mxConstants.STYLE_ENDARROW, mxConstants.NONE) != mxConstants.NONE);\n};\n__mxOutput.mxArrowConnector = typeof mxArrowConnector !== 'undefined' ? mxArrowConnector : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxText\n *\n * Extends <mxShape> to implement a text shape. To change vertical text from\n * bottom to top to top to bottom, the following code can be used:\n * \n * (code)\n * mxText.prototype.verticalTextRotation = 90;\n * (end)\n * \n * Constructor: mxText\n *\n * Constructs a new text shape.\n * \n * Parameters:\n * \n * value - String that represents the text to be displayed. This is stored in\n * <value>.\n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * align - Specifies the horizontal alignment. Default is ''. This is stored in\n * <align>.\n * valign - Specifies the vertical alignment. Default is ''. This is stored in\n * <valign>.\n * color - String that specifies the text color. Default is 'black'. This is\n * stored in <color>.\n * family - String that specifies the font family. Default is\n * <mxConstants.DEFAULT_FONTFAMILY>. This is stored in <family>.\n * size - Integer that specifies the font size. Default is\n * <mxConstants.DEFAULT_FONTSIZE>. This is stored in <size>.\n * fontStyle - Specifies the font style. Default is 0. This is stored in\n * <fontStyle>.\n * spacing - Integer that specifies the global spacing. Default is 2. This is\n * stored in <spacing>.\n * spacingTop - Integer that specifies the top spacing. Default is 0. The\n * sum of the spacing and this is stored in <spacingTop>.\n * spacingRight - Integer that specifies the right spacing. Default is 0. The\n * sum of the spacing and this is stored in <spacingRight>.\n * spacingBottom - Integer that specifies the bottom spacing. Default is 0.The\n * sum of the spacing and this is stored in <spacingBottom>.\n * spacingLeft - Integer that specifies the left spacing. Default is 0. The\n * sum of the spacing and this is stored in <spacingLeft>.\n * horizontal - Boolean that specifies if the label is horizontal. Default is\n * true. This is stored in <horizontal>.\n * background - String that specifies the background color. Default is null.\n * This is stored in <background>.\n * border - String that specifies the label border color. Default is null.\n * This is stored in <border>.\n * wrap - Specifies if word-wrapping should be enabled. Default is false.\n * This is stored in <wrap>.\n * clipped - Specifies if the label should be clipped. Default is false.\n * This is stored in <clipped>.\n * overflow - Value of the overflow style. Default is 'visible'.\n */\nfunction mxText(value, bounds, align, valign, color,\n\tfamily,\tsize, fontStyle, spacing, spacingTop, spacingRight,\n\tspacingBottom, spacingLeft, horizontal, background, border,\n\twrap, clipped, overflow, labelPadding, textDirection)\n{\n\tmxShape.call(this);\n\tthis.value = value;\n\tthis.bounds = bounds;\n\tthis.color = (color != null) ? color : 'black';\n\tthis.align = (align != null) ? align : mxConstants.ALIGN_CENTER;\n\tthis.valign = (valign != null) ? valign : mxConstants.ALIGN_MIDDLE;\n\tthis.family = (family != null) ? family : mxConstants.DEFAULT_FONTFAMILY;\n\tthis.size = (size != null) ? size : mxConstants.DEFAULT_FONTSIZE;\n\tthis.fontStyle = (fontStyle != null) ? fontStyle : mxConstants.DEFAULT_FONTSTYLE;\n\tthis.spacing = parseInt(spacing || 2);\n\tthis.spacingTop = this.spacing + parseInt(spacingTop || 0);\n\tthis.spacingRight = this.spacing + parseInt(spacingRight || 0);\n\tthis.spacingBottom = this.spacing + parseInt(spacingBottom || 0);\n\tthis.spacingLeft = this.spacing + parseInt(spacingLeft || 0);\n\tthis.horizontal = (horizontal != null) ? horizontal : true;\n\tthis.background = background;\n\tthis.border = border;\n\tthis.wrap = (wrap != null) ? wrap : false;\n\tthis.clipped = (clipped != null) ? clipped : false;\n\tthis.overflow = (overflow != null) ? overflow : 'visible';\n\tthis.labelPadding = (labelPadding != null) ? labelPadding : 0;\n\tthis.textDirection = textDirection;\n\tthis.rotation = 0;\n\tthis.updateMargin();\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxText, mxShape);\n\n/**\n * Variable: baseSpacingTop\n * \n * Specifies the spacing to be added to the top spacing. Default is 0. Use the\n * value 5 here to get the same label positions as in mxGraph 1.x.\n */\nmxText.prototype.baseSpacingTop = 0;\n\n/**\n * Variable: baseSpacingBottom\n * \n * Specifies the spacing to be added to the bottom spacing. Default is 0. Use the\n * value 1 here to get the same label positions as in mxGraph 1.x.\n */\nmxText.prototype.baseSpacingBottom = 0;\n\n/**\n * Variable: baseSpacingLeft\n * \n * Specifies the spacing to be added to the left spacing. Default is 0.\n */\nmxText.prototype.baseSpacingLeft = 0;\n\n/**\n * Variable: baseSpacingRight\n * \n * Specifies the spacing to be added to the right spacing. Default is 0.\n */\nmxText.prototype.baseSpacingRight = 0;\n\n/**\n * Variable: replaceLinefeeds\n * \n * Specifies if linefeeds in HTML labels should be replaced with BR tags.\n * Default is true.\n */\nmxText.prototype.replaceLinefeeds = true;\n\n/**\n * Variable: verticalTextRotation\n * \n * Rotation for vertical text. Default is -90 (bottom to top).\n */\nmxText.prototype.verticalTextRotation = -90;\n\n/**\n * Variable: ignoreClippedStringSize\n * \n * Specifies if the string size should be measured in <updateBoundingBox> if\n * the label is clipped and the label position is center and middle. If this is\n * true, then the bounding box will be set to <bounds>. Default is true.\n * <ignoreStringSize> has precedence over this switch.\n */\nmxText.prototype.ignoreClippedStringSize = true;\n\n/**\n * Variable: ignoreStringSize\n * \n * Specifies if the actual string size should be measured. If disabled the\n * boundingBox will not ignore the actual size of the string, otherwise\n * <bounds> will be used instead. Default is false.\n */\nmxText.prototype.ignoreStringSize = false;\n\n/**\n * Variable: textWidthPadding\n * \n * Specifies the padding to be added to the text width for the bounding box.\n * This is needed to make sure no clipping is applied to borders. Default is 4\n * for IE 8 standards mode and 3 for all others.\n */\nmxText.prototype.textWidthPadding = (document.documentMode == 8 && !mxClient.IS_EM) ? 4 : 3;\n\n/**\n * Variable: lastValue\n * \n * Contains the last rendered text value. Used for caching.\n */\nmxText.prototype.lastValue = null;\n\n/**\n * Variable: cacheEnabled\n * \n * Specifies if caching for HTML labels should be enabled. Default is true.\n */\nmxText.prototype.cacheEnabled = true;\n\n/**\n * Function: isParseVml\n * \n * Text shapes do not contain VML markup and do not need to be parsed. This\n * method returns false to speed up rendering in IE8.\n */\nmxText.prototype.isParseVml = function()\n{\n\treturn false;\n};\n\n/**\n * Function: isHtmlAllowed\n * \n * Returns true if HTML is allowed for this shape. This implementation returns\n * true if the browser is not in IE8 standards mode.\n */\nmxText.prototype.isHtmlAllowed = function()\n{\n\treturn document.documentMode != 8 || mxClient.IS_EM;\n};\n\n/**\n * Function: getSvgScreenOffset\n * \n * Disables offset in IE9 for crisper image output.\n */\nmxText.prototype.getSvgScreenOffset = function()\n{\n\treturn 0;\n};\n\n/**\n * Function: checkBounds\n * \n * Returns true if the bounds are not null and all of its variables are numeric.\n */\nmxText.prototype.checkBounds = function()\n{\n\treturn (!isNaN(this.scale) && isFinite(this.scale) && this.scale > 0 &&\n\t\t\tthis.bounds != null && !isNaN(this.bounds.x) && !isNaN(this.bounds.y) &&\n\t\t\t!isNaN(this.bounds.width) && !isNaN(this.bounds.height));\n};\n\n/**\n * Function: paint\n * \n * Generic rendering code.\n */\nmxText.prototype.paint = function(c, update)\n{\n\t// Scale is passed-through to canvas\n\tvar s = this.scale;\n\tvar x = this.bounds.x / s;\n\tvar y = this.bounds.y / s;\n\tvar w = this.bounds.width / s;\n\tvar h = this.bounds.height / s;\n\t\n\tthis.updateTransform(c, x, y, w, h);\n\tthis.configureCanvas(c, x, y, w, h);\n\t\n\tif (update)\n\t{\n\t\tc.updateText(x, y, w, h, this.align, this.valign, this.wrap, this.overflow,\n\t\t\t\tthis.clipped, this.getTextRotation(), this.node);\n\t}\n\telse\n\t{\n\t\t// Checks if text contains HTML markup\n\t\tvar realHtml = mxUtils.isNode(this.value) || this.dialect == mxConstants.DIALECT_STRICTHTML;\n\t\t\n\t\t// Always renders labels as HTML in VML\n\t\tvar fmt = (realHtml || c instanceof mxVmlCanvas2D) ? 'html' : '';\n\t\tvar val = this.value;\n\t\t\n\t\tif (!realHtml && fmt == 'html')\n\t\t{\n\t\t\tval = mxUtils.htmlEntities(val, false);\n\t\t}\n\t\t\n\t\tif (fmt == 'html' && !mxUtils.isNode(this.value))\n\t\t{\n\t\t\tval = mxUtils.replaceTrailingNewlines(val, '<div><br></div>');\t\t\t\n\t\t}\n\t\t\n\t\t// Handles trailing newlines to make sure they are visible in rendering output\n\t\tval = (!mxUtils.isNode(this.value) && this.replaceLinefeeds && fmt == 'html') ?\n\t\t\tval.replace(/\\n/g, '<br/>') : val;\n\t\t\t\n\t\tvar dir = this.textDirection;\n\t\n\t\tif (dir == mxConstants.TEXT_DIRECTION_AUTO && !realHtml)\n\t\t{\n\t\t\tdir = this.getAutoDirection();\n\t\t}\n\t\t\n\t\tif (dir != mxConstants.TEXT_DIRECTION_LTR && dir != mxConstants.TEXT_DIRECTION_RTL)\n\t\t{\n\t\t\tdir = null;\n\t\t}\n\t\t\n\t\tc.text(x, y, w, h, val, this.align, this.valign, this.wrap, fmt,\n\t\t\tthis.overflow, this.clipped, this.getTextRotation(), dir);\n\t}\n};\n\n/**\n * Function: redraw\n * \n * Renders the text using the given DOM nodes.\n */\nmxText.prototype.redraw = function()\n{\n\tif (this.visible && this.checkBounds() && this.cacheEnabled && this.lastValue == this.value &&\n\t\t(mxUtils.isNode(this.value) || this.dialect == mxConstants.DIALECT_STRICTHTML))\n\t{\n\t\tif (this.node.nodeName == 'DIV' && (this.isHtmlAllowed() || !mxClient.IS_VML))\n\t\t{\n\t\t\tif (mxClient.IS_SVG)\n\t\t\t{\n\t\t\t\tthis.redrawHtmlShapeWithCss3();\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.updateSize(this.node, (this.state == null || this.state.view.textDiv == null));\n\t\n\t\t\t\tif (mxClient.IS_IE && (document.documentMode == null || document.documentMode <= 8))\n\t\t\t\t{\n\t\t\t\t\tthis.updateHtmlFilter();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.updateHtmlTransform();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.updateBoundingBox();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar canvas = this.createCanvas();\n\n\t\t\tif (canvas != null && canvas.updateText != null)\n\t\t\t{\n\t\t\t\t// Specifies if events should be handled\n\t\t\t\tcanvas.pointerEvents = this.pointerEvents;\n\t\n\t\t\t\tthis.paint(canvas, true);\n\t\t\t\tthis.destroyCanvas(canvas);\n\t\t\t\tthis.updateBoundingBox();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Fallback if canvas does not support updateText (VML)\n\t\t\t\tmxShape.prototype.redraw.apply(this, arguments);\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tmxShape.prototype.redraw.apply(this, arguments);\n\t\t\n\t\tif (mxUtils.isNode(this.value) || this.dialect == mxConstants.DIALECT_STRICTHTML)\n\t\t{\n\t\t\tthis.lastValue = this.value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.lastValue = null;\n\t\t}\n\t}\n};\n\n/**\n * Function: resetStyles\n * \n * Resets all styles.\n */\nmxText.prototype.resetStyles = function()\n{\n\tmxShape.prototype.resetStyles.apply(this, arguments);\n\t\n\tthis.color = 'black';\n\tthis.align = mxConstants.ALIGN_CENTER;\n\tthis.valign = mxConstants.ALIGN_MIDDLE;\n\tthis.family = mxConstants.DEFAULT_FONTFAMILY;\n\tthis.size = mxConstants.DEFAULT_FONTSIZE;\n\tthis.fontStyle = mxConstants.DEFAULT_FONTSTYLE;\n\tthis.spacing = 2;\n\tthis.spacingTop = 2;\n\tthis.spacingRight = 2;\n\tthis.spacingBottom = 2;\n\tthis.spacingLeft = 2;\n\tthis.horizontal = true;\n\tdelete this.background;\n\tdelete this.border;\n\tthis.textDirection = mxConstants.DEFAULT_TEXT_DIRECTION;\n\tdelete this.margin;\n};\n\n/**\n * Function: apply\n * \n * Extends mxShape to update the text styles.\n *\n * Parameters:\n *\n * state - <mxCellState> of the corresponding cell.\n */\nmxText.prototype.apply = function(state)\n{\n\tvar old = this.spacing;\n\tmxShape.prototype.apply.apply(this, arguments);\n\t\n\tif (this.style != null)\n\t{\n\t\tthis.fontStyle = mxUtils.getValue(this.style, mxConstants.STYLE_FONTSTYLE, this.fontStyle);\n\t\tthis.family = mxUtils.getValue(this.style, mxConstants.STYLE_FONTFAMILY, this.family);\n\t\tthis.size = mxUtils.getValue(this.style, mxConstants.STYLE_FONTSIZE, this.size);\n\t\tthis.color = mxUtils.getValue(this.style, mxConstants.STYLE_FONTCOLOR, this.color);\n\t\tthis.align = mxUtils.getValue(this.style, mxConstants.STYLE_ALIGN, this.align);\n\t\tthis.valign = mxUtils.getValue(this.style, mxConstants.STYLE_VERTICAL_ALIGN, this.valign);\n\t\tthis.spacing = parseInt(mxUtils.getValue(this.style, mxConstants.STYLE_SPACING, this.spacing));\n\t\tthis.spacingTop = parseInt(mxUtils.getValue(this.style, mxConstants.STYLE_SPACING_TOP, this.spacingTop - old)) + this.spacing;\n\t\tthis.spacingRight = parseInt(mxUtils.getValue(this.style, mxConstants.STYLE_SPACING_RIGHT, this.spacingRight - old)) + this.spacing;\n\t\tthis.spacingBottom = parseInt(mxUtils.getValue(this.style, mxConstants.STYLE_SPACING_BOTTOM, this.spacingBottom - old)) + this.spacing;\n\t\tthis.spacingLeft = parseInt(mxUtils.getValue(this.style, mxConstants.STYLE_SPACING_LEFT, this.spacingLeft - old)) + this.spacing;\n\t\tthis.horizontal = mxUtils.getValue(this.style, mxConstants.STYLE_HORIZONTAL, this.horizontal);\n\t\tthis.background = mxUtils.getValue(this.style, mxConstants.STYLE_LABEL_BACKGROUNDCOLOR, this.background);\n\t\tthis.border = mxUtils.getValue(this.style, mxConstants.STYLE_LABEL_BORDERCOLOR, this.border);\n\t\tthis.textDirection = mxUtils.getValue(this.style, mxConstants.STYLE_TEXT_DIRECTION, mxConstants.DEFAULT_TEXT_DIRECTION);\n\t\tthis.opacity = mxUtils.getValue(this.style, mxConstants.STYLE_TEXT_OPACITY, 100);\n\t\tthis.updateMargin();\n\t}\n\t\n\tthis.flipV = null;\n\tthis.flipH = null;\n};\n\n/**\n * Function: getAutoDirection\n * \n * Used to determine the automatic text direction. Returns\n * <mxConstants.TEXT_DIRECTION_LTR> or <mxConstants.TEXT_DIRECTION_RTL>\n * depending on the contents of <value>. This is not invoked for HTML, wrapped\n * content or if <value> is a DOM node.\n */\nmxText.prototype.getAutoDirection = function()\n{\n\t// Looks for strong (directional) characters\n\tvar tmp = /[A-Za-z\\u05d0-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec(this.value);\n\t\n\t// Returns the direction defined by the character\n\treturn (tmp != null && tmp.length > 0 && tmp[0] > 'z') ?\n\t\tmxConstants.TEXT_DIRECTION_RTL : mxConstants.TEXT_DIRECTION_LTR;\n};\n\n/**\n * Function: getContentNode\n * \n * Returns the node that contains the rendered input.\n */\nmxText.prototype.getContentNode = function()\n{\n\tvar result = this.node;\n\t\n\tif (result != null)\n\t{\n\t\t// Rendered with no foreignObject\n\t\tif (result.ownerSVGElement == null)\n\t\t{\n\t\t\tresult = this.node.firstChild.firstChild;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Innermost DIV that contains the actual content\n\t\t\tresult = result.firstChild.firstChild.firstChild.firstChild.firstChild;\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: updateBoundingBox\n *\n * Updates the <boundingBox> for this shape using the given node and position.\n */\nmxText.prototype.updateBoundingBox = function()\n{\n\tvar node = this.node;\n\tthis.boundingBox = this.bounds.clone();\n\tvar rot = this.getTextRotation();\n\t\n\tvar h = (this.style != null) ? mxUtils.getValue(this.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER) : null;\n\tvar v = (this.style != null) ? mxUtils.getValue(this.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE) : null;\n\n\tif (!this.ignoreStringSize && node != null && this.overflow != 'fill' && (!this.clipped ||\n\t\t!this.ignoreClippedStringSize || h != mxConstants.ALIGN_CENTER || v != mxConstants.ALIGN_MIDDLE))\n\t{\n\t\tvar ow = null;\n\t\tvar oh = null;\n\t\t\n\t\tif (node.ownerSVGElement != null)\n\t\t{\n\t\t\tif (node.firstChild != null && node.firstChild.firstChild != null &&\n\t\t\t\tnode.firstChild.firstChild.nodeName == 'foreignObject')\n\t\t\t{\n\t\t\t\t// Uses second inner DIV for font metrics\n\t\t\t\tnode = node.firstChild.firstChild.firstChild.firstChild;\n\t\t\t\toh = node.offsetHeight * this.scale;\n\t\t\t\t\n\t\t\t\tif (this.overflow == 'width')\n\t\t\t\t{\n\t\t\t\t\tow = this.boundingBox.width;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tow = node.offsetWidth * this.scale;\t\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tvar b = node.getBBox();\n\t\t\t\t\t\n\t\t\t\t\t// Workaround for bounding box of empty string\n\t\t\t\t\tif (typeof(this.value) == 'string' && mxUtils.trim(this.value) == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.boundingBox = null;\n\t\t\t\t\t}\n\t\t\t\t\telse if (b.width == 0 && b.height == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.boundingBox = null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.boundingBox = new mxRectangle(b.x, b.y, b.width, b.height);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\t// Ignores NS_ERROR_FAILURE in FF if container display is none.\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar td = (this.state != null) ? this.state.view.textDiv : null;\n\n\t\t\t// Use cached offset size\n\t\t\tif (this.offsetWidth != null && this.offsetHeight != null)\n\t\t\t{\n\t\t\t\tow = this.offsetWidth * this.scale;\n\t\t\t\toh = this.offsetHeight * this.scale;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Cannot get node size while container hidden so a\n\t\t\t\t// shared temporary DIV is used for text measuring\n\t\t\t\tif (td != null)\n\t\t\t\t{\n\t\t\t\t\tthis.updateFont(td);\n\t\t\t\t\tthis.updateSize(td, false);\n\t\t\t\t\tthis.updateInnerHtml(td);\n\n\t\t\t\t\tnode = td;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar sizeDiv = node;\n\n\t\t\t\tif (document.documentMode == 8 && !mxClient.IS_EM)\n\t\t\t\t{\n\t\t\t\t\tvar w = Math.round(this.bounds.width / this.scale);\n\t\n\t\t\t\t\tif (this.wrap && w > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.style.wordWrap = mxConstants.WORD_WRAP;\n\t\t\t\t\t\tnode.style.whiteSpace = 'normal';\n\n\t\t\t\t\t\tif (node.style.wordWrap != 'break-word')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Innermost DIV is used for measuring text\n\t\t\t\t\t\t\tvar divs = sizeDiv.getElementsByTagName('div');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (divs.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsizeDiv = divs[divs.length - 1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tow = sizeDiv.offsetWidth + 2;\n\t\t\t\t\t\t\tdivs = this.node.getElementsByTagName('div');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (this.clipped)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tow = Math.min(w, ow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Second last DIV width must be updated in DOM tree\n\t\t\t\t\t\t\tif (divs.length > 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdivs[divs.length - 2].style.width = ow + 'px';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.style.whiteSpace = 'nowrap';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (sizeDiv.firstChild != null && sizeDiv.firstChild.nodeName == 'DIV')\n\t\t\t\t{\n\t\t\t\t\tsizeDiv = sizeDiv.firstChild;\n\t\t\t\t}\n\n\t\t\t\tthis.offsetWidth = sizeDiv.offsetWidth + this.textWidthPadding;\n\t\t\t\tthis.offsetHeight = sizeDiv.offsetHeight;\n\t\t\t\t\n\t\t\t\tow = this.offsetWidth * this.scale;\n\t\t\t\toh = this.offsetHeight * this.scale;\n\t\t\t}\n\t\t}\n\n\t\tif (ow != null && oh != null)\n\t\t{\t\n\t\t\tthis.boundingBox = new mxRectangle(this.bounds.x,\n\t\t\t\tthis.bounds.y, ow, oh);\n\t\t}\n\t}\n\n\tif (this.boundingBox != null)\n\t{\n\t\tif (rot != 0)\n\t\t{\n\t\t\t// Accounts for pre-rotated x and y\n\t\t\tvar bbox = mxUtils.getBoundingBox(new mxRectangle(\n\t\t\t\tthis.margin.x * this.boundingBox.width,\n\t\t\t\tthis.margin.y * this.boundingBox.height,\n\t\t\t\tthis.boundingBox.width, this.boundingBox.height),\n\t\t\t\trot, new mxPoint(0, 0));\n\t\t\t\n\t\t\tthis.unrotatedBoundingBox = mxRectangle.fromRectangle(this.boundingBox);\n\t\t\tthis.unrotatedBoundingBox.x += this.margin.x * this.unrotatedBoundingBox.width;\n\t\t\tthis.unrotatedBoundingBox.y += this.margin.y * this.unrotatedBoundingBox.height;\n\t\t\t\n\t\t\tthis.boundingBox.x += bbox.x;\n\t\t\tthis.boundingBox.y += bbox.y;\n\t\t\tthis.boundingBox.width = bbox.width;\n\t\t\tthis.boundingBox.height = bbox.height;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.boundingBox.x += this.margin.x * this.boundingBox.width;\n\t\t\tthis.boundingBox.y += this.margin.y * this.boundingBox.height;\n\t\t\tthis.unrotatedBoundingBox = null;\n\t\t}\n\t}\n};\n\n/**\n * Function: getShapeRotation\n * \n * Returns 0 to avoid using rotation in the canvas via updateTransform.\n */\nmxText.prototype.getShapeRotation = function()\n{\n\treturn 0;\n};\n\n/**\n * Function: getTextRotation\n * \n * Returns the rotation for the text label of the corresponding shape.\n */\nmxText.prototype.getTextRotation = function()\n{\n\treturn (this.state != null && this.state.shape != null) ? this.state.shape.getTextRotation() : 0;\n};\n\n/**\n * Function: isPaintBoundsInverted\n * \n * Inverts the bounds if <mxShape.isBoundsInverted> returns true or if the\n * horizontal style is false.\n */\nmxText.prototype.isPaintBoundsInverted = function()\n{\n\treturn !this.horizontal && this.state != null && this.state.view.graph.model.isVertex(this.state.cell);\n};\n\n/**\n * Function: configureCanvas\n * \n * Sets the state of the canvas for drawing the shape.\n */\nmxText.prototype.configureCanvas = function(c, x, y, w, h)\n{\n\tmxShape.prototype.configureCanvas.apply(this, arguments);\n\t\n\tc.setFontColor(this.color);\n\tc.setFontBackgroundColor(this.background);\n\tc.setFontBorderColor(this.border);\n\tc.setFontFamily(this.family);\n\tc.setFontSize(this.size);\n\tc.setFontStyle(this.fontStyle);\n};\n\n/**\n * Function: updateVmlContainer\n * \n * Sets the width and height of the container to 1px.\n */\nmxText.prototype.updateVmlContainer = function()\n{\n\tthis.node.style.left = Math.round(this.bounds.x) + 'px';\n\tthis.node.style.top = Math.round(this.bounds.y) + 'px';\n\tthis.node.style.width = '1px';\n\tthis.node.style.height = '1px';\n\tthis.node.style.overflow = 'visible';\n};\n\n/**\n * Function: getHtmlValue\n * \n * Private helper function to create SVG elements\n */\nmxText.prototype.getHtmlValue = function()\n{\n\tvar val = this.value;\n\t\n\tif (this.dialect != mxConstants.DIALECT_STRICTHTML)\n\t{\n\t\tval = mxUtils.htmlEntities(val, false);\n\t}\n\t\n\t// Handles trailing newlines to make sure they are visible in rendering output\n\tval = mxUtils.replaceTrailingNewlines(val, '<div><br></div>');\n\tval = (this.replaceLinefeeds) ? val.replace(/\\n/g, '<br/>') : val;\n\t\n\treturn val;\n};\n\n/**\n * Function: getTextCss\n * \n * Private helper function to create SVG elements\n */\nmxText.prototype.getTextCss = function()\n{\n\tvar lh = (mxConstants.ABSOLUTE_LINE_HEIGHT) ? (this.size * mxConstants.LINE_HEIGHT) + 'px' :\n\t\tmxConstants.LINE_HEIGHT;\n\n\tvar css = 'display: inline-block; font-size: ' + this.size + 'px; ' +\n\t\t'font-family: ' + this.family + '; color: ' + this.color + '; line-height: ' + lh +\n\t\t'; pointer-events: ' + ((this.pointerEvents) ? 'all' : 'none') + '; ';\n\n\tif ((this.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t{\n\t\tcss += 'font-weight: bold; ';\n\t}\n\n\tif ((this.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t{\n\t\tcss += 'font-style: italic; ';\n\t}\n\t\n\tvar deco = [];\n\t\n\tif ((this.fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t{\n\t\tdeco.push('underline');\n\t}\n\t\n\tif ((this.fontStyle & mxConstants.FONT_STRIKETHROUGH) == mxConstants.FONT_STRIKETHROUGH)\n\t{\n\t\tdeco.push('line-through');\n\t}\n\t\n\tif (deco.length > 0)\n\t{\n\t\tcss += 'text-decoration: ' + deco.join(' ') + '; ';\n\t}\n\n\treturn css;\n};\n\n/**\n * Function: redrawHtmlShape\n *\n * Updates the HTML node(s) to reflect the latest bounds and scale.\n */\nmxText.prototype.redrawHtmlShape = function()\n{\n\tif (mxClient.IS_SVG)\n\t{\n\t\tthis.redrawHtmlShapeWithCss3();\t\n\t}\n\telse\n\t{\n\t\tvar style = this.node.style;\n\t\n\t\t// Resets CSS styles\n\t\tstyle.whiteSpace = 'normal';\n\t\tstyle.overflow = '';\n\t\tstyle.width = '';\n\t\tstyle.height = '';\n\t\t\n\t\tthis.updateValue();\n\t\tthis.updateFont(this.node);\n\t\tthis.updateSize(this.node, (this.state == null || this.state.view.textDiv == null));\n\t\t\n\t\tthis.offsetWidth = null;\n\t\tthis.offsetHeight = null;\n\t\n\t\tif (mxClient.IS_IE && (document.documentMode == null || document.documentMode <= 8))\n\t\t{\n\t\t\tthis.updateHtmlFilter();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.updateHtmlTransform();\n\t\t}\n\t}\n};\n\n/**\n * Function: redrawHtmlShapeWithCss3\n *\n * Updates the HTML node(s) to reflect the latest bounds and scale.\n */\nmxText.prototype.redrawHtmlShapeWithCss3 = function()\n{\n\tvar w = Math.max(0, Math.round(this.bounds.width / this.scale));\n\tvar h = Math.max(0, Math.round(this.bounds.height / this.scale));\n\tvar flex = 'position: absolute; left: ' + Math.round(this.bounds.x) + 'px; ' +\n\t\t'top: ' + Math.round(this.bounds.y) + 'px; pointer-events: none; ';\n\tvar block = this.getTextCss();\n\t\n\tmxSvgCanvas2D.createCss(w + 2, h, this.align, this.valign, this.wrap, this.overflow, this.clipped,\n\t\t(this.background != null) ? mxUtils.htmlEntities(this.background) : null,\n\t\t(this.border != null) ? mxUtils.htmlEntities(this.border) : null,\n\t\tflex, block, this.scale, mxUtils.bind(this, function(dx, dy, flex, item, block, ofl)\n\t{\n\t\tvar r = this.getTextRotation();\n\t\tvar tr = ((this.scale != 1) ? 'scale(' + this.scale + ') ' : '') +\n\t\t\t((r != 0) ? 'rotate(' + r + 'deg) ' : '') +\n\t\t\t((this.margin.x != 0 || this.margin.y != 0) ?\n\t\t\t\t'translate(' + (this.margin.x * 100) + '%,' +\n\t\t\t\t\t(this.margin.y * 100) + '%)' : '');\n\t\t\n\t\tif (tr != '')\n\t\t{\n\t\t\ttr = 'transform-origin: 0 0; transform: ' + tr + '; ';\n\t\t}\n\n\t\tif (ofl == '')\n\t\t{\n\t\t\tflex += item;\n\t\t\titem = 'display:inline-block; min-width: 100%; ' + tr;\n\t\t}\n\t\telse\n\t\t{\n\t\t\titem += tr;\n\t\t\t\n\t\t\tif (mxClient.IS_SF)\n\t\t\t{\n\t\t\t\titem += '-webkit-clip-path: content-box;';\n\t\t\t}\n\t\t}\n\n\t\tif (this.opacity < 100)\n\t\t{\n\t\t\tblock += 'opacity: ' + (this.opacity / 100) + '; ';\n\t\t}\n\t\t\n\t\tthis.node.setAttribute('style', flex);\n\t\t\n\t\tvar html = (mxUtils.isNode(this.value)) ? this.value.outerHTML : this.getHtmlValue();\n\t\t\n\t\tif (this.node.firstChild == null)\n\t\t{\n\t\t\tthis.node.innerHTML = '<div><div>' + html +'</div></div>';\n\t\t}\n\n\t\tthis.node.firstChild.firstChild.setAttribute('style', block);\n\t\tthis.node.firstChild.setAttribute('style', item);\n\t}));\n};\n\n/**\n * Function: updateHtmlTransform\n *\n * Returns the spacing as an <mxPoint>.\n */\nmxText.prototype.updateHtmlTransform = function()\n{\n\tvar theta = this.getTextRotation();\n\tvar style = this.node.style;\n\tvar dx = this.margin.x;\n\tvar dy = this.margin.y;\n\t\n\tif (theta != 0)\n\t{\n\t\tmxUtils.setPrefixedStyle(style, 'transformOrigin', (-dx * 100) + '%' + ' ' + (-dy * 100) + '%');\n\t\tmxUtils.setPrefixedStyle(style, 'transform', 'translate(' + (dx * 100) + '%' + ',' + (dy * 100) + '%) ' +\n\t\t\t'scale(' + this.scale + ') rotate(' + theta + 'deg)');\n\t}\n\telse\n\t{\n\t\tmxUtils.setPrefixedStyle(style, 'transformOrigin', '0% 0%');\n\t\tmxUtils.setPrefixedStyle(style, 'transform', 'scale(' + this.scale + ') ' +\n\t\t\t'translate(' + (dx * 100) + '%' + ',' + (dy * 100) + '%)');\n\t}\n\n\tstyle.left = Math.round(this.bounds.x - Math.ceil(dx * ((this.overflow != 'fill' &&\n\t\tthis.overflow != 'width') ? 3 : 1))) + 'px';\n\tstyle.top = Math.round(this.bounds.y - dy * ((this.overflow != 'fill') ? 3 : 1)) + 'px';\n\t\n\tif (this.opacity < 100)\n\t{\n\t\tstyle.opacity = this.opacity / 100;\n\t}\n\telse\n\t{\n\t\tstyle.opacity = '';\n\t}\n};\n\n/**\n * Function: updateInnerHtml\n * \n * Sets the inner HTML of the given element to the <value>.\n */\nmxText.prototype.updateInnerHtml = function(elt)\n{\n\tif (mxUtils.isNode(this.value))\n\t{\n\t\telt.innerHTML = this.value.outerHTML;\n\t}\n\telse\n\t{\n\t\tvar val = this.value;\n\t\t\n\t\tif (this.dialect != mxConstants.DIALECT_STRICTHTML)\n\t\t{\n\t\t\t// LATER: Can be cached in updateValue\n\t\t\tval = mxUtils.htmlEntities(val, false);\n\t\t}\n\t\t\n\t\t// Handles trailing newlines to make sure they are visible in rendering output\n\t\tval = mxUtils.replaceTrailingNewlines(val, '<div>&nbsp;</div>');\n\t\tval = (this.replaceLinefeeds) ? val.replace(/\\n/g, '<br/>') : val;\n\t\tval = '<div style=\"display:inline-block;_display:inline;\">' + val + '</div>';\n\t\t\n\t\telt.innerHTML = val;\n\t}\n};\n\n/**\n * Function: updateHtmlFilter\n *\n * Rotated text rendering quality is bad for IE9 quirks/IE8 standards\n */\nmxText.prototype.updateHtmlFilter = function()\n{\n\tvar style = this.node.style;\n\tvar dx = this.margin.x;\n\tvar dy = this.margin.y;\n\tvar s = this.scale;\n\t\n\t// Resets filter before getting offsetWidth\n\tmxUtils.setOpacity(this.node, this.opacity);\n\t\n\t// Adds 1 to match table height in 1.x\n\tvar ow = 0;\n\tvar oh = 0;\n\tvar td = (this.state != null) ? this.state.view.textDiv : null;\n\tvar sizeDiv = this.node;\n\t\n\t// Fallback for hidden text rendering in IE quirks mode\n\tif (td != null)\n\t{\n\t\ttd.style.overflow = '';\n\t\ttd.style.height = '';\n\t\ttd.style.width = '';\n\t\t\n\t\tthis.updateFont(td);\n\t\tthis.updateSize(td, false);\n\t\tthis.updateInnerHtml(td);\n\t\t\n\t\tvar w = Math.round(this.bounds.width / this.scale);\n\n\t\tif (this.wrap && w > 0)\n\t\t{\n\t\t\ttd.style.whiteSpace = 'normal';\n\t\t\ttd.style.wordWrap = mxConstants.WORD_WRAP;\n\t\t\tow = w;\n\t\t\t\n\t\t\tif (this.clipped)\n\t\t\t{\n\t\t\t\tow = Math.min(ow, this.bounds.width);\n\t\t\t}\n\n\t\t\ttd.style.width = ow + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttd.style.whiteSpace = 'nowrap';\n\t\t}\n\t\t\n\t\tsizeDiv = td;\n\t\t\n\t\tif (sizeDiv.firstChild != null && sizeDiv.firstChild.nodeName == 'DIV')\n\t\t{\n\t\t\tsizeDiv = sizeDiv.firstChild;\n\t\t\t\n\t\t\tif (this.wrap && td.style.wordWrap == 'break-word')\n\t\t\t{\n\t\t\t\tsizeDiv.style.width = '100%';\n\t\t\t}\n\t\t}\n\n\t\t// Required to update the height of the text box after wrapping width is known \n\t\tif (!this.clipped && this.wrap && w > 0)\n\t\t{\n\t\t\tow = sizeDiv.offsetWidth + this.textWidthPadding;\n\t\t\ttd.style.width = ow + 'px';\n\t\t}\n\t\t\n\t\toh = sizeDiv.offsetHeight + 2;\n\t\t\n\t\tif (mxClient.IS_QUIRKS && this.border != null && this.border != mxConstants.NONE)\n\t\t{\n\t\t\toh += 3;\n\t\t}\n\t}\n\telse if (sizeDiv.firstChild != null && sizeDiv.firstChild.nodeName == 'DIV')\n\t{\n\t\tsizeDiv = sizeDiv.firstChild;\n\t\toh = sizeDiv.offsetHeight;\n\t}\n\n\tow = sizeDiv.offsetWidth + this.textWidthPadding;\n\t\n\tif (this.clipped)\n\t{\n\t\toh = Math.min(oh, this.bounds.height);\n\t}\n\n\tvar w = this.bounds.width / s;\n\tvar h = this.bounds.height / s;\n\n\t// Handles special case for live preview with no wrapper DIV and no textDiv\n\tif (this.overflow == 'fill')\n\t{\n\t\toh = h;\n\t\tow = w;\n\t}\n\telse if (this.overflow == 'width')\n\t{\n\t\toh = sizeDiv.scrollHeight;\n\t\tow = w;\n\t}\n\t\n\t// Stores for later use\n\tthis.offsetWidth = ow;\n\tthis.offsetHeight = oh;\n\t\n\t// Simulates max-height CSS in quirks mode\n\tif (mxClient.IS_QUIRKS && (this.clipped || (this.overflow == 'width' && h > 0)))\n\t{\n\t\th = Math.min(h, oh);\n\t\tstyle.height = Math.round(h) + 'px';\n\t}\n\telse\n\t{\n\t\th = oh;\n\t}\n\n\tif (this.overflow != 'fill' && this.overflow != 'width')\n\t{\n\t\tif (this.clipped)\n\t\t{\n\t\t\tow = Math.min(w, ow);\n\t\t}\n\t\t\n\t\tw = ow;\n\n\t\t// Simulates max-width CSS in quirks mode\n\t\tif ((mxClient.IS_QUIRKS && this.clipped) || this.wrap)\n\t\t{\n\t\t\tstyle.width = Math.round(w) + 'px';\n\t\t}\n\t}\n\n\th *= s;\n\tw *= s;\n\t\n\t// Rotation case is handled via VML canvas\n\tvar rad = this.getTextRotation() * (Math.PI / 180);\n\t\n\t// Precalculate cos and sin for the rotation\n\tvar real_cos = parseFloat(parseFloat(Math.cos(rad)).toFixed(8));\n\tvar real_sin = parseFloat(parseFloat(Math.sin(-rad)).toFixed(8));\n\n\trad %= 2 * Math.PI;\n\t\n\tif (rad < 0)\n\t{\n\t\trad += 2 * Math.PI;\n\t}\n\t\n\trad %= Math.PI;\n\t\n\tif (rad > Math.PI / 2)\n\t{\n\t\trad = Math.PI - rad;\n\t}\n\t\n\tvar cos = Math.cos(rad);\n\tvar sin = Math.sin(-rad);\n\n\tvar tx = w * -(dx + 0.5);\n\tvar ty = h * -(dy + 0.5);\n\n\tvar top_fix = (h - h * cos + w * sin) / 2 + real_sin * tx - real_cos * ty;\n\tvar left_fix = (w - w * cos + h * sin) / 2 - real_cos * tx - real_sin * ty;\n\t\n\tif (rad != 0)\n\t{\n\t\tvar f = 'progid:DXImageTransform.Microsoft.Matrix(M11=' + real_cos + ', M12='+\n\t\t\treal_sin + ', M21=' + (-real_sin) + ', M22=' + real_cos + ', sizingMethod=\\'auto expand\\')';\n\t\t\n\t\tif (style.filter != null && style.filter.length > 0)\n\t\t{\n\t\t\tstyle.filter += ' ' + f;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstyle.filter = f;\n\t\t}\n\t}\n\t\n\t// Workaround for rendering offsets\n\tvar dy = 0;\n\t\n\tif (this.overflow != 'fill' && mxClient.IS_QUIRKS)\n\t{\n\t\tif (this.valign == mxConstants.ALIGN_TOP)\n\t\t{\n\t\t\tdy -= 1;\n\t\t}\n\t\telse if (this.valign == mxConstants.ALIGN_BOTTOM)\n\t\t{\n\t\t\tdy += 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdy += 1;\n\t\t}\n\t}\n\n\tstyle.zoom = s;\n\tstyle.left = Math.round(this.bounds.x + left_fix - w / 2) + 'px';\n\tstyle.top = Math.round(this.bounds.y + top_fix - h / 2 + dy) + 'px';\n};\n\n/**\n * Function: updateValue\n *\n * Updates the HTML node(s) to reflect the latest bounds and scale.\n */\nmxText.prototype.updateValue = function()\n{\n\tif (mxUtils.isNode(this.value))\n\t{\n\t\tthis.node.innerHTML = '';\n\t\tthis.node.appendChild(this.value);\n\t}\n\telse\n\t{\n\t\tvar val = this.value;\n\t\t\n\t\tif (this.dialect != mxConstants.DIALECT_STRICTHTML)\n\t\t{\n\t\t\tval = mxUtils.htmlEntities(val, false);\n\t\t}\n\t\t\n\t\t// Handles trailing newlines to make sure they are visible in rendering output\n\t\tval = mxUtils.replaceTrailingNewlines(val, '<div><br></div>');\n\t\tval = (this.replaceLinefeeds) ? val.replace(/\\n/g, '<br/>') : val;\n\t\tvar bg = (this.background != null && this.background != mxConstants.NONE) ? this.background : null;\n\t\tvar bd = (this.border != null && this.border != mxConstants.NONE) ? this.border : null;\n\n\t\tif (this.overflow == 'fill' || this.overflow == 'width')\n\t\t{\n\t\t\tif (bg != null)\n\t\t\t{\n\t\t\t\tthis.node.style.backgroundColor = bg;\n\t\t\t}\n\t\t\t\n\t\t\tif (bd != null)\n\t\t\t{\n\t\t\t\tthis.node.style.border = '1px solid ' + bd;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar css = '';\n\t\t\t\n\t\t\tif (bg != null)\n\t\t\t{\n\t\t\t\tcss += 'background-color:' + mxUtils.htmlEntities(bg) + ';';\n\t\t\t}\n\t\t\t\n\t\t\tif (bd != null)\n\t\t\t{\n\t\t\t\tcss += 'border:1px solid ' + mxUtils.htmlEntities(bd) + ';';\n\t\t\t}\n\t\t\t\n\t\t\t// Wrapper DIV for background, zoom needed for inline in quirks\n\t\t\t// and to measure wrapped font sizes in all browsers\n\t\t\t// FIXME: Background size in quirks mode for wrapped text\n\t\t\tvar lh = (mxConstants.ABSOLUTE_LINE_HEIGHT) ? (this.size * mxConstants.LINE_HEIGHT) + 'px' :\n\t\t\t\tmxConstants.LINE_HEIGHT;\n\t\t\tval = '<div style=\"zoom:1;' + css + 'display:inline-block;_display:inline;text-decoration:inherit;' +\n\t\t\t\t'padding-bottom:1px;padding-right:1px;line-height:' + lh + '\">' + val + '</div>';\n\t\t}\n\n\t\tthis.node.innerHTML = val;\n\t\t\n\t\t// Sets text direction\n\t\tvar divs = this.node.getElementsByTagName('div');\n\t\t\n\t\tif (divs.length > 0)\n\t\t{\n\t\t\tvar dir = this.textDirection;\n\n\t\t\tif (dir == mxConstants.TEXT_DIRECTION_AUTO && this.dialect != mxConstants.DIALECT_STRICTHTML)\n\t\t\t{\n\t\t\t\tdir = this.getAutoDirection();\n\t\t\t}\n\t\t\t\n\t\t\tif (dir == mxConstants.TEXT_DIRECTION_LTR || dir == mxConstants.TEXT_DIRECTION_RTL)\n\t\t\t{\n\t\t\t\tdivs[divs.length - 1].setAttribute('dir', dir);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdivs[divs.length - 1].removeAttribute('dir');\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: updateFont\n *\n * Updates the HTML node(s) to reflect the latest bounds and scale.\n */\nmxText.prototype.updateFont = function(node)\n{\n\tvar style = node.style;\n\t\n\tstyle.lineHeight = (mxConstants.ABSOLUTE_LINE_HEIGHT) ? (this.size * mxConstants.LINE_HEIGHT) + 'px' : mxConstants.LINE_HEIGHT;\n\tstyle.fontSize = this.size + 'px';\n\tstyle.fontFamily = this.family;\n\tstyle.verticalAlign = 'top';\n\tstyle.color = this.color;\n\t\n\tif ((this.fontStyle & mxConstants.FONT_BOLD) == mxConstants.FONT_BOLD)\n\t{\n\t\tstyle.fontWeight = 'bold';\n\t}\n\telse\n\t{\n\t\tstyle.fontWeight = '';\n\t}\n\n\tif ((this.fontStyle & mxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC)\n\t{\n\t\tstyle.fontStyle = 'italic';\n\t}\n\telse\n\t{\n\t\tstyle.fontStyle = '';\n\t}\n\t\n\tvar txtDecor = [];\n\t\n\tif ((this.fontStyle & mxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t{\n\t\ttxtDecor.push('underline');\n\t}\n\t\n\tif ((this.fontStyle & mxConstants.FONT_STRIKETHROUGH) == mxConstants.FONT_STRIKETHROUGH)\n\t{\n\t\ttxtDecor.push('line-through');\n\t}\n\t\n\tstyle.textDecoration = txtDecor.join(' ');\n\t\n\tif (this.align == mxConstants.ALIGN_CENTER)\n\t{\n\t\tstyle.textAlign = 'center';\n\t}\n\telse if (this.align == mxConstants.ALIGN_RIGHT)\n\t{\n\t\tstyle.textAlign = 'right';\n\t}\n\telse\n\t{\n\t\tstyle.textAlign = 'left';\n\t}\n};\n\n/**\n * Function: updateSize\n *\n * Updates the HTML node(s) to reflect the latest bounds and scale.\n */\nmxText.prototype.updateSize = function(node, enableWrap)\n{\n\tvar w = Math.max(0, Math.round(this.bounds.width / this.scale));\n\tvar h = Math.max(0, Math.round(this.bounds.height / this.scale));\n\tvar style = node.style;\n\t\n\t// NOTE: Do not use maxWidth here because wrapping will\n\t// go wrong if the cell is outside of the viewable area\n\tif (this.clipped)\n\t{\n\t\tstyle.overflow = 'hidden';\n\t\t\n\t\tif (!mxClient.IS_QUIRKS)\n\t\t{\n\t\t\tstyle.maxHeight = h + 'px';\n\t\t\tstyle.maxWidth = w + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstyle.width = w + 'px';\n\t\t}\n\t}\n\telse if (this.overflow == 'fill')\n\t{\n\t\tstyle.width = (w + 1) + 'px';\n\t\tstyle.height = (h + 1) + 'px';\n\t\tstyle.overflow = 'hidden';\n\t}\n\telse if (this.overflow == 'width')\n\t{\n\t\tstyle.width = (w + 1) + 'px';\n\t\tstyle.maxHeight = (h + 1) + 'px';\n\t\tstyle.overflow = 'hidden';\n\t}\n\t\n\tif (this.wrap && w > 0)\n\t{\n\t\tstyle.wordWrap = mxConstants.WORD_WRAP;\n\t\tstyle.whiteSpace = 'normal';\n\t\tstyle.width = w + 'px';\n\n\t\tif (enableWrap && this.overflow != 'fill' && this.overflow != 'width')\n\t\t{\n\t\t\tvar sizeDiv = node;\n\t\t\t\n\t\t\tif (sizeDiv.firstChild != null && sizeDiv.firstChild.nodeName == 'DIV')\n\t\t\t{\n\t\t\t\tsizeDiv = sizeDiv.firstChild;\n\t\t\t\t\n\t\t\t\tif (node.style.wordWrap == 'break-word')\n\t\t\t\t{\n\t\t\t\t\tsizeDiv.style.width = '100%';\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar tmp = sizeDiv.offsetWidth;\n\t\t\t\n\t\t\t// Workaround for text measuring in hidden containers\n\t\t\tif (tmp == 0)\n\t\t\t{\n\t\t\t\tvar prev = node.parentNode;\n\t\t\t\tnode.style.visibility = 'hidden';\n\t\t\t\tdocument.body.appendChild(node);\n\t\t\t\ttmp = sizeDiv.offsetWidth;\n\t\t\t\tnode.style.visibility = '';\n\t\t\t\tprev.appendChild(node);\n\t\t\t}\n\n\t\t\ttmp += 3;\n\t\t\t\n\t\t\tif (this.clipped)\n\t\t\t{\n\t\t\t\ttmp = Math.min(tmp, w);\n\t\t\t}\n\t\t\t\n\t\t\tstyle.width = tmp + 'px';\n\t\t}\n\t}\n\telse\n\t{\n\t\tstyle.whiteSpace = 'nowrap';\n\t}\n};\n\n/**\n * Function: getMargin\n *\n * Returns the spacing as an <mxPoint>.\n */\nmxText.prototype.updateMargin = function()\n{\n\tthis.margin = mxUtils.getAlignmentAsPoint(this.align, this.valign);\n};\n\n/**\n * Function: getSpacing\n *\n * Returns the spacing as an <mxPoint>.\n */\nmxText.prototype.getSpacing = function()\n{\n\tvar dx = 0;\n\tvar dy = 0;\n\n\tif (this.align == mxConstants.ALIGN_CENTER)\n\t{\n\t\tdx = (this.spacingLeft - this.spacingRight) / 2;\n\t}\n\telse if (this.align == mxConstants.ALIGN_RIGHT)\n\t{\n\t\tdx = -this.spacingRight - this.baseSpacingRight;\n\t}\n\telse\n\t{\n\t\tdx = this.spacingLeft + this.baseSpacingLeft;\n\t}\n\n\tif (this.valign == mxConstants.ALIGN_MIDDLE)\n\t{\n\t\tdy = (this.spacingTop - this.spacingBottom) / 2;\n\t}\n\telse if (this.valign == mxConstants.ALIGN_BOTTOM)\n\t{\n\t\tdy = -this.spacingBottom - this.baseSpacingBottom;;\n\t}\n\telse\n\t{\n\t\tdy = this.spacingTop + this.baseSpacingTop;\n\t}\n\t\n\treturn new mxPoint(dx, dy);\n};\n\n__mxOutput.mxText = typeof mxText !== 'undefined' ? mxText : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxTriangle\n * \n * Implementation of the triangle shape.\n * \n * Constructor: mxTriangle\n *\n * Constructs a new triangle shape.\n */\nfunction mxTriangle()\n{\n\tmxActor.call(this);\n};\n\n/**\n * Extends mxActor.\n */\nmxUtils.extend(mxTriangle, mxActor);\n\n/**\n * Function: isRoundable\n * \n * Adds roundable support.\n */\nmxTriangle.prototype.isRoundable = function()\n{\n\treturn true;\n};\n\n/**\n * Function: redrawPath\n *\n * Draws the path for this shape.\n */\nmxTriangle.prototype.redrawPath = function(c, x, y, w, h)\n{\n\tvar arcSize = mxUtils.getValue(this.style, mxConstants.STYLE_ARCSIZE, mxConstants.LINE_ARCSIZE) / 2;\n\tthis.addPoints(c, [new mxPoint(0, 0), new mxPoint(w, 0.5 * h), new mxPoint(0, h)], this.isRounded, arcSize, true);\n};\n\n__mxOutput.mxTriangle = typeof mxTriangle !== 'undefined' ? mxTriangle : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxHexagon\n * \n * Implementation of the hexagon shape.\n * \n * Constructor: mxHexagon\n *\n * Constructs a new hexagon shape.\n */\nfunction mxHexagon()\n{\n\tmxActor.call(this);\n};\n\n/**\n * Extends mxActor.\n */\nmxUtils.extend(mxHexagon, mxActor);\n\n/**\n * Function: redrawPath\n *\n * Draws the path for this shape.\n */\nmxHexagon.prototype.redrawPath = function(c, x, y, w, h)\n{\n\tvar arcSize = mxUtils.getValue(this.style, mxConstants.STYLE_ARCSIZE, mxConstants.LINE_ARCSIZE) / 2;\n\tthis.addPoints(c, [new mxPoint(0.25 * w, 0), new mxPoint(0.75 * w, 0), new mxPoint(w, 0.5 * h), new mxPoint(0.75 * w, h),\n\t                   new mxPoint(0.25 * w, h), new mxPoint(0, 0.5 * h)], this.isRounded, arcSize, true);\n};\n\n__mxOutput.mxHexagon = typeof mxHexagon !== 'undefined' ? mxHexagon : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxLine\n *\n * Extends <mxShape> to implement a horizontal line shape.\n * This shape is registered under <mxConstants.SHAPE_LINE> in\n * <mxCellRenderer>.\n * \n * Constructor: mxLine\n *\n * Constructs a new line shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * stroke - String that defines the stroke color. Default is 'black'. This is\n * stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxLine(bounds, stroke, strokewidth, vertical)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n\tthis.vertical = (vertical != null) ? vertical : this.vertical;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxLine, mxShape);\n\n/**\n * Function: vertical\n * \n * Whether to paint a vertical line.\n */\nmxLine.prototype.vertical = false;\n\n/**\n * Function: paintVertexShape\n * \n * Redirects to redrawPath for subclasses to work.\n */\nmxLine.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tc.begin();\n\n\tif (this.vertical)\n\t{\n\t\tvar mid = x + w / 2;\n\t\tc.moveTo(mid, y);\n\t\tc.lineTo(mid, y + h);\n\t}\n\telse\n\t{\n\t\tvar mid = y + h / 2;\n\t\tc.moveTo(x, mid);\n\t\tc.lineTo(x + w, mid);\n\t}\n\n\tc.stroke();\n};\n\n__mxOutput.mxLine = typeof mxLine !== 'undefined' ? mxLine : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxImageShape\n *\n * Extends <mxShape> to implement an image shape. This shape is registered\n * under <mxConstants.SHAPE_IMAGE> in <mxCellRenderer>.\n * \n * Constructor: mxImageShape\n * \n * Constructs a new image shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * image - String that specifies the URL of the image. This is stored in\n * <image>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 0. This is stored in <strokewidth>.\n */\nfunction mxImageShape(bounds, image, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.image = image;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n\tthis.shadow = false;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxImageShape, mxRectangleShape);\n\n/**\n * Variable: preserveImageAspect\n *\n * Switch to preserve image aspect. Default is true.\n */\nmxImageShape.prototype.preserveImageAspect = true;\n\n/**\n * Function: getSvgScreenOffset\n * \n * Disables offset in IE9 for crisper image output.\n */\nmxImageShape.prototype.getSvgScreenOffset = function()\n{\n\treturn 0;\n};\n\n/**\n * Function: apply\n * \n * Overrides <mxShape.apply> to replace the fill and stroke colors with the\n * respective values from <mxConstants.STYLE_IMAGE_BACKGROUND> and\n * <mxConstants.STYLE_IMAGE_BORDER>.\n * \n * Applies the style of the given <mxCellState> to the shape. This\n * implementation assigns the following styles to local fields:\n * \n * - <mxConstants.STYLE_IMAGE_BACKGROUND> => fill\n * - <mxConstants.STYLE_IMAGE_BORDER> => stroke\n *\n * Parameters:\n *\n * state - <mxCellState> of the corresponding cell.\n */\nmxImageShape.prototype.apply = function(state)\n{\n\tmxShape.prototype.apply.apply(this, arguments);\n\t\n\tthis.fill = null;\n\tthis.stroke = null;\n\tthis.gradient = null;\n\t\n\tif (this.style != null)\n\t{\n\t\tthis.preserveImageAspect = mxUtils.getNumber(this.style, mxConstants.STYLE_IMAGE_ASPECT, 1) == 1;\n\t\t\n\t\t// Legacy support for imageFlipH/V\n\t\tthis.flipH = this.flipH || mxUtils.getValue(this.style, 'imageFlipH', 0) == 1;\n\t\tthis.flipV = this.flipV || mxUtils.getValue(this.style, 'imageFlipV', 0) == 1;\n\t}\n};\n\n/**\n * Function: isHtmlAllowed\n * \n * Returns true if HTML is allowed for this shape. This implementation always\n * returns false.\n */\nmxImageShape.prototype.isHtmlAllowed = function()\n{\n\treturn !this.preserveImageAspect;\n};\n\n/**\n * Function: createHtml\n *\n * Creates and returns the HTML DOM node(s) to represent\n * this shape. This implementation falls back to <createVml>\n * so that the HTML creation is optional.\n */\nmxImageShape.prototype.createHtml = function()\n{\n\tvar node = document.createElement('div');\n\tnode.style.position = 'absolute';\n\n\treturn node;\n};\n\n/**\n * Function: isRoundable\n * \n * Disables inherited roundable support.\n */\nmxImageShape.prototype.isRoundable = function(c, x, y, w, h)\n{\n\treturn false;\n};\n\n/**\n * Function: paintVertexShape\n * \n * Generic background painting implementation.\n */\nmxImageShape.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tif (this.image != null)\n\t{\n\t\tvar fill = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_BACKGROUND, null);\n\t\tvar stroke = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_BORDER, null);\n\t\t\n\t\tif (fill != null)\n\t\t{\n\t\t\t// Stroke rendering required for shadow\n\t\t\tc.setFillColor(fill);\n\t\t\tc.setStrokeColor(stroke);\n\t\t\tc.rect(x, y, w, h);\n\t\t\tc.fillAndStroke();\n\t\t}\n\n\t\t// FlipH/V are implicit via mxShape.updateTransform\n\t\tc.image(x, y, w, h, this.image, this.preserveImageAspect, false, false);\n\t\t\n\t\tvar stroke = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_BORDER, null);\n\t\t\n\t\tif (stroke != null)\n\t\t{\n\t\t\tc.setShadow(false);\n\t\t\tc.setStrokeColor(stroke);\n\t\t\tc.rect(x, y, w, h);\n\t\t\tc.stroke();\n\t\t}\n\t}\n\telse\n\t{\n\t\tmxRectangleShape.prototype.paintBackground.apply(this, arguments);\n\t}\n};\n\n/**\n * Function: redraw\n * \n * Overrides <mxShape.redraw> to preserve the aspect ratio of images.\n */\nmxImageShape.prototype.redrawHtmlShape = function()\n{\n\tthis.node.style.left = Math.round(this.bounds.x) + 'px';\n\tthis.node.style.top = Math.round(this.bounds.y) + 'px';\n\tthis.node.style.width = Math.max(0, Math.round(this.bounds.width)) + 'px';\n\tthis.node.style.height = Math.max(0, Math.round(this.bounds.height)) + 'px';\n\tthis.node.innerHTML = '';\n\n\tif (this.image != null)\n\t{\n\t\tvar fill = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_BACKGROUND, '');\n\t\tvar stroke = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_BORDER, '');\n\t\tthis.node.style.backgroundColor = fill;\n\t\tthis.node.style.borderColor = stroke;\n\t\t\n\t\t// VML image supports PNG in IE6\n\t\tvar useVml = mxClient.IS_IE6 || ((document.documentMode == null || document.documentMode <= 8) && this.rotation != 0);\n\t\tvar img = document.createElement((useVml) ? mxClient.VML_PREFIX + ':image' : 'img');\n\t\timg.setAttribute('border', '0');\n\t\timg.style.position = 'absolute';\n\t\timg.src = this.image;\n\n\t\tvar filter = (this.opacity < 100) ? 'alpha(opacity=' + this.opacity + ')' : '';\n\t\tthis.node.style.filter = filter;\n\t\t\n\t\tif (this.flipH && this.flipV)\n\t\t{\n\t\t\tfilter += 'progid:DXImageTransform.Microsoft.BasicImage(rotation=2)';\n\t\t}\n\t\telse if (this.flipH)\n\t\t{\n\t\t\tfilter += 'progid:DXImageTransform.Microsoft.BasicImage(mirror=1)';\n\t\t}\n\t\telse if (this.flipV)\n\t\t{\n\t\t\tfilter += 'progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)';\n\t\t}\n\n\t\tif (img.style.filter != filter)\n\t\t{\n\t\t\timg.style.filter = filter;\n\t\t}\n\n\t\tif (img.nodeName == 'image')\n\t\t{\n\t\t\timg.style.rotation = this.rotation;\n\t\t}\n\t\telse if (this.rotation != 0)\n\t\t{\n\t\t\t// LATER: Add flipV/H support\n\t\t\tmxUtils.setPrefixedStyle(img.style, 'transform', 'rotate(' + this.rotation + 'deg)');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmxUtils.setPrefixedStyle(img.style, 'transform', '');\n\t\t}\n\n\t\t// Known problem: IE clips top line of image for certain angles\n\t\timg.style.width = this.node.style.width;\n\t\timg.style.height = this.node.style.height;\n\t\t\n\t\tthis.node.style.backgroundImage = '';\n\t\tthis.node.appendChild(img);\n\t}\n\telse\n\t{\n\t\tthis.setTransparentBackgroundImage(this.node);\n\t}\n};\n\n__mxOutput.mxImageShape = typeof mxImageShape !== 'undefined' ? mxImageShape : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxLabel\n *\n * Extends <mxShape> to implement an image shape with a label.\n * This shape is registered under <mxConstants.SHAPE_LABEL> in\n * <mxCellRenderer>.\n * \n * Constructor: mxLabel\n *\n * Constructs a new label shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxLabel(bounds, fill, stroke, strokewidth)\n{\n\tmxRectangleShape.call(this, bounds, fill, stroke, strokewidth);\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxLabel, mxRectangleShape);\n\n/**\n * Variable: imageSize\n *\n * Default width and height for the image. Default is\n * <mxConstants.DEFAULT_IMAGESIZE>.\n */\nmxLabel.prototype.imageSize = mxConstants.DEFAULT_IMAGESIZE;\n\n/**\n * Variable: spacing\n *\n * Default value for image spacing. Default is 2.\n */\nmxLabel.prototype.spacing = 2;\n\n/**\n * Variable: indicatorSize\n *\n * Default width and height for the indicicator. Default is 10.\n */\nmxLabel.prototype.indicatorSize = 10;\n\n/**\n * Variable: indicatorSpacing\n *\n * Default spacing between image and indicator. Default is 2.\n */\nmxLabel.prototype.indicatorSpacing = 2;\n\n/**\n * Function: init\n *\n * Initializes the shape and the <indicator>.\n */\nmxLabel.prototype.init = function(container)\n{\n\tmxShape.prototype.init.apply(this, arguments);\n\n\tif (this.indicatorShape != null)\n\t{\n\t\tthis.indicator = new this.indicatorShape();\n\t\tthis.indicator.dialect = this.dialect;\n\t\tthis.indicator.init(this.node);\n\t}\n};\n\n/**\n * Function: redraw\n *\n * Reconfigures this shape. This will update the colors of the indicator\n * and reconfigure it if required.\n */\nmxLabel.prototype.redraw = function()\n{\n\tif (this.indicator != null)\n\t{\n\t\tthis.indicator.fill = this.indicatorColor;\n\t\tthis.indicator.stroke = this.indicatorStrokeColor;\n\t\tthis.indicator.gradient = this.indicatorGradientColor;\n\t\tthis.indicator.direction = this.indicatorDirection;\n\t\tthis.indicator.redraw();\n\t}\n\t\n\tmxShape.prototype.redraw.apply(this, arguments);\n};\n\n/**\n * Function: isHtmlAllowed\n *\n * Returns true for non-rounded, non-rotated shapes with no glass gradient and\n * no indicator shape.\n */\nmxLabel.prototype.isHtmlAllowed = function()\n{\n\treturn mxRectangleShape.prototype.isHtmlAllowed.apply(this, arguments) &&\n\t\tthis.indicatorColor == null && this.indicatorShape == null;\n};\n\n/**\n * Function: paintForeground\n * \n * Generic background painting implementation.\n */\nmxLabel.prototype.paintForeground = function(c, x, y, w, h)\n{\n\tthis.paintImage(c, x, y, w, h);\n\tthis.paintIndicator(c, x, y, w, h);\n\t\n\tmxRectangleShape.prototype.paintForeground.apply(this, arguments);\n};\n\n/**\n * Function: paintImage\n * \n * Generic background painting implementation.\n */\nmxLabel.prototype.paintImage = function(c, x, y, w, h)\n{\n\tif (this.image != null)\n\t{\n\t\tvar bounds = this.getImageBounds(x, y, w, h);\n\t\tc.image(bounds.x, bounds.y, bounds.width, bounds.height, this.image, false, false, false);\n\t}\n};\n\n/**\n * Function: getImageBounds\n * \n * Generic background painting implementation.\n */\nmxLabel.prototype.getImageBounds = function(x, y, w, h)\n{\n\tvar align = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_ALIGN, mxConstants.ALIGN_LEFT);\n\tvar valign = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_VERTICAL_ALIGN, mxConstants.ALIGN_MIDDLE);\n\tvar width = mxUtils.getNumber(this.style, mxConstants.STYLE_IMAGE_WIDTH, mxConstants.DEFAULT_IMAGESIZE);\n\tvar height = mxUtils.getNumber(this.style, mxConstants.STYLE_IMAGE_HEIGHT, mxConstants.DEFAULT_IMAGESIZE);\n\tvar spacing = mxUtils.getNumber(this.style, mxConstants.STYLE_SPACING, this.spacing) + 5;\n\n\tif (align == mxConstants.ALIGN_CENTER)\n\t{\n\t\tx += (w - width) / 2;\n\t}\n\telse if (align == mxConstants.ALIGN_RIGHT)\n\t{\n\t\tx += w - width - spacing;\n\t}\n\telse // default is left\n\t{\n\t\tx += spacing;\n\t}\n\n\tif (valign == mxConstants.ALIGN_TOP)\n\t{\n\t\ty += spacing;\n\t}\n\telse if (valign == mxConstants.ALIGN_BOTTOM)\n\t{\n\t\ty += h - height - spacing;\n\t}\n\telse // default is middle\n\t{\n\t\ty += (h - height) / 2;\n\t}\n\t\n\treturn new mxRectangle(x, y, width, height);\n};\n\n/**\n * Function: paintIndicator\n * \n * Generic background painting implementation.\n */\nmxLabel.prototype.paintIndicator = function(c, x, y, w, h)\n{\n\tif (this.indicator != null)\n\t{\n\t\tthis.indicator.bounds = this.getIndicatorBounds(x, y, w, h);\n\t\tthis.indicator.paint(c);\n\t}\n\telse if (this.indicatorImage != null)\n\t{\n\t\tvar bounds = this.getIndicatorBounds(x, y, w, h);\n\t\tc.image(bounds.x, bounds.y, bounds.width, bounds.height, this.indicatorImage, false, false, false);\n\t}\n};\n\n/**\n * Function: getIndicatorBounds\n * \n * Generic background painting implementation.\n */\nmxLabel.prototype.getIndicatorBounds = function(x, y, w, h)\n{\n\tvar align = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_ALIGN, mxConstants.ALIGN_LEFT);\n\tvar valign = mxUtils.getValue(this.style, mxConstants.STYLE_IMAGE_VERTICAL_ALIGN, mxConstants.ALIGN_MIDDLE);\n\tvar width = mxUtils.getNumber(this.style, mxConstants.STYLE_INDICATOR_WIDTH, this.indicatorSize);\n\tvar height = mxUtils.getNumber(this.style, mxConstants.STYLE_INDICATOR_HEIGHT, this.indicatorSize);\n\tvar spacing = this.spacing + 5;\t\t\n\t\n\tif (align == mxConstants.ALIGN_RIGHT)\n\t{\n\t\tx += w - width - spacing;\n\t}\n\telse if (align == mxConstants.ALIGN_CENTER)\n\t{\n\t\tx += (w - width) / 2;\n\t}\n\telse // default is left\n\t{\n\t\tx += spacing;\n\t}\n\t\n\tif (valign == mxConstants.ALIGN_BOTTOM)\n\t{\n\t\ty += h - height - spacing;\n\t}\n\telse if (valign == mxConstants.ALIGN_TOP)\n\t{\n\t\ty += spacing;\n\t}\n\telse // default is middle\n\t{\n\t\ty += (h - height) / 2;\n\t}\n\t\n\treturn new mxRectangle(x, y, width, height);\n};\n/**\n * Function: redrawHtmlShape\n * \n * Generic background painting implementation.\n */\nmxLabel.prototype.redrawHtmlShape = function()\n{\n\tmxRectangleShape.prototype.redrawHtmlShape.apply(this, arguments);\n\t\n\t// Removes all children\n\twhile(this.node.hasChildNodes())\n\t{\n\t\tthis.node.removeChild(this.node.lastChild);\n\t}\n\t\n\tif (this.image != null)\n\t{\n\t\tvar node = document.createElement('img');\n\t\tnode.style.position = 'relative';\n\t\tnode.setAttribute('border', '0');\n\t\t\n\t\tvar bounds = this.getImageBounds(this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height);\n\t\tbounds.x -= this.bounds.x;\n\t\tbounds.y -= this.bounds.y;\n\n\t\tnode.style.left = Math.round(bounds.x) + 'px';\n\t\tnode.style.top = Math.round(bounds.y) + 'px';\n\t\tnode.style.width = Math.round(bounds.width) + 'px';\n\t\tnode.style.height = Math.round(bounds.height) + 'px';\n\t\t\n\t\tnode.src = this.image;\n\t\t\n\t\tthis.node.appendChild(node);\n\t}\n};\n\n__mxOutput.mxLabel = typeof mxLabel !== 'undefined' ? mxLabel : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCylinder\n *\n * Extends <mxShape> to implement an cylinder shape. If a\n * custom shape with one filled area and an overlay path is\n * needed, then this shape's <redrawPath> should be overridden.\n * This shape is registered under <mxConstants.SHAPE_CYLINDER>\n * in <mxCellRenderer>.\n * \n * Constructor: mxCylinder\n *\n * Constructs a new cylinder shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxCylinder(bounds, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxCylinder, mxShape);\n\n/**\n * Variable: maxHeight\n *\n * Defines the maximum height of the top and bottom part\n * of the cylinder shape.\n */\nmxCylinder.prototype.maxHeight = 40;\n\n/**\n * Variable: svgStrokeTolerance\n *\n * Sets stroke tolerance to 0 for SVG.\n */\nmxCylinder.prototype.svgStrokeTolerance = 0;\n\n/**\n * Function: paintVertexShape\n * \n * Redirects to redrawPath for subclasses to work.\n */\nmxCylinder.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tc.translate(x, y);\n\tc.begin();\n\tthis.redrawPath(c, x, y, w, h, false);\n\tc.fillAndStroke();\n\t\n\tif (!this.outline || this.style == null || mxUtils.getValue(\n\t\tthis.style, mxConstants.STYLE_BACKGROUND_OUTLINE, 0) == 0)\n\t{\n\t\tc.setShadow(false);\n\t\tc.begin();\n\t\tthis.redrawPath(c, x, y, w, h, true);\n\t\tc.stroke();\n\t}\n};\n\n/**\n * Function: getCylinderSize\n *\n * Returns the cylinder size.\n */\nmxCylinder.prototype.getCylinderSize = function(x, y, w, h)\n{\n\treturn Math.min(this.maxHeight, Math.round(h / 5));\n};\n\n/**\n * Function: redrawPath\n *\n * Draws the path for this shape.\n */\nmxCylinder.prototype.redrawPath = function(c, x, y, w, h, isForeground)\n{\n\tvar dy = this.getCylinderSize(x, y, w, h);\n\t\n\tif ((isForeground && this.fill != null) || (!isForeground && this.fill == null))\n\t{\n\t\tc.moveTo(0, dy);\n\t\tc.curveTo(0, 2 * dy, w, 2 * dy, w, dy);\n\t\t\n\t\t// Needs separate shapes for correct hit-detection\n\t\tif (!isForeground)\n\t\t{\n\t\t\tc.stroke();\n\t\t\tc.begin();\n\t\t}\n\t}\n\t\n\tif (!isForeground)\n\t{\n\t\tc.moveTo(0, dy);\n\t\tc.curveTo(0, -dy / 3, w, -dy / 3, w, dy);\n\t\tc.lineTo(w, h - dy);\n\t\tc.curveTo(w, h + dy / 3, 0, h + dy / 3, 0, h - dy);\n\t\tc.close();\n\t}\n};\n\n__mxOutput.mxCylinder = typeof mxCylinder !== 'undefined' ? mxCylinder : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxConnector\n * \n * Extends <mxShape> to implement a connector shape. The connector\n * shape allows for arrow heads on either side.\n * \n * This shape is registered under <mxConstants.SHAPE_CONNECTOR> in\n * <mxCellRenderer>.\n * \n * Constructor: mxConnector\n * \n * Constructs a new connector shape.\n * \n * Parameters:\n * \n * points - Array of <mxPoints> that define the points. This is stored in\n * <mxShape.points>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * Default is 'black'.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxConnector(points, stroke, strokewidth)\n{\n\tmxPolyline.call(this, points, stroke, strokewidth);\n};\n\n/**\n * Extends mxPolyline.\n */\nmxUtils.extend(mxConnector, mxPolyline);\n\n/**\n * Function: updateBoundingBox\n *\n * Updates the <boundingBox> for this shape using <createBoundingBox> and\n * <augmentBoundingBox> and stores the result in <boundingBox>.\n */\nmxConnector.prototype.updateBoundingBox = function()\n{\n\tthis.useSvgBoundingBox = this.style != null && this.style[mxConstants.STYLE_CURVED] == 1;\n\tmxShape.prototype.updateBoundingBox.apply(this, arguments);\n};\n\n/**\n * Function: paintEdgeShape\n * \n * Paints the line shape.\n */\nmxConnector.prototype.paintEdgeShape = function(c, pts)\n{\n\t// The indirection via functions for markers is needed in\n\t// order to apply the offsets before painting the line and\n\t// paint the markers after painting the line.\n\tvar sourceMarker = this.createMarker(c, pts, true);\n\tvar targetMarker = this.createMarker(c, pts, false);\n\n\tmxPolyline.prototype.paintEdgeShape.apply(this, arguments);\n\t\n\t// Disables shadows, dashed styles and fixes fill color for markers\n\tc.setFillColor(this.stroke);\n\tc.setShadow(false);\n\tc.setDashed(false);\n\t\n\tif (sourceMarker != null)\n\t{\n\t\tsourceMarker();\n\t}\n\t\n\tif (targetMarker != null)\n\t{\n\t\ttargetMarker();\n\t}\n};\n\n/**\n * Function: createMarker\n * \n * Prepares the marker by adding offsets in pts and returning a function to\n * paint the marker.\n */\nmxConnector.prototype.createMarker = function(c, pts, source)\n{\n\tvar result = null;\n\tvar n = pts.length;\n\tvar type = mxUtils.getValue(this.style, (source) ? mxConstants.STYLE_STARTARROW : mxConstants.STYLE_ENDARROW);\n\tvar p0 = (source) ? pts[1] : pts[n - 2];\n\tvar pe = (source) ? pts[0] : pts[n - 1];\n\t\n\tif (type != null && p0 != null && pe != null)\n\t{\n\t\tvar count = 1;\n\t\t\n\t\t// Uses next non-overlapping point\n\t\twhile (count < n - 1 && Math.round(p0.x - pe.x) == 0 && Math.round(p0.y - pe.y) == 0)\n\t\t{\n\t\t\tp0 = (source) ? pts[1 + count] : pts[n - 2 - count];\n\t\t\tcount++;\n\t\t}\n\t\n\t\t// Computes the norm and the inverse norm\n\t\tvar dx = pe.x - p0.x;\n\t\tvar dy = pe.y - p0.y;\n\t\n\t\tvar dist = Math.max(1, Math.sqrt(dx * dx + dy * dy));\n\t\t\n\t\tvar unitX = dx / dist;\n\t\tvar unitY = dy / dist;\n\t\n\t\tvar size = mxUtils.getNumber(this.style, (source) ? mxConstants.STYLE_STARTSIZE : mxConstants.STYLE_ENDSIZE, mxConstants.DEFAULT_MARKERSIZE);\n\t\t\n\t\t// Allow for stroke width in the end point used and the \n\t\t// orthogonal vectors describing the direction of the marker\n\t\tvar filled = this.style[(source) ? mxConstants.STYLE_STARTFILL : mxConstants.STYLE_ENDFILL] != 0;\n\t\t\n\t\tresult = mxMarker.createMarker(c, this, type, pe, unitX, unitY, size, source, this.strokewidth, filled);\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: augmentBoundingBox\n *\n * Augments the bounding box with the strokewidth and shadow offsets.\n */\nmxConnector.prototype.augmentBoundingBox = function(bbox)\n{\n\tmxShape.prototype.augmentBoundingBox.apply(this, arguments);\n\t\n\t// Adds marker sizes\n\tvar size = 0;\n\t\n\tif (mxUtils.getValue(this.style, mxConstants.STYLE_STARTARROW, mxConstants.NONE) != mxConstants.NONE)\n\t{\n\t\tsize = mxUtils.getNumber(this.style, mxConstants.STYLE_STARTSIZE, mxConstants.DEFAULT_MARKERSIZE) + 1;\n\t}\n\t\n\tif (mxUtils.getValue(this.style, mxConstants.STYLE_ENDARROW, mxConstants.NONE) != mxConstants.NONE)\n\t{\n\t\tsize = Math.max(size, mxUtils.getNumber(this.style, mxConstants.STYLE_ENDSIZE, mxConstants.DEFAULT_MARKERSIZE)) + 1;\n\t}\n\t\n\tbbox.grow(size * this.scale);\n};\n\n__mxOutput.mxConnector = typeof mxConnector !== 'undefined' ? mxConnector : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxSwimlane\n *\n * Extends <mxShape> to implement a swimlane shape. This shape is registered\n * under <mxConstants.SHAPE_SWIMLANE> in <mxCellRenderer>. Use the\n * <mxConstants.STYLE_STYLE_STARTSIZE> to define the size of the title\n * region, <mxConstants.STYLE_SWIMLANE_FILLCOLOR> for the content area fill,\n * <mxConstants.STYLE_SEPARATORCOLOR> to draw an additional vertical separator\n * and <mxConstants.STYLE_SWIMLANE_LINE> to hide the line between the title\n * region and the content area. The <mxConstants.STYLE_HORIZONTAL> affects\n * the orientation of this shape, not only its label.\n * \n * Constructor: mxSwimlane\n *\n * Constructs a new swimlane shape.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that defines the bounds. This is stored in\n * <mxShape.bounds>.\n * fill - String that defines the fill color. This is stored in <fill>.\n * stroke - String that defines the stroke color. This is stored in <stroke>.\n * strokewidth - Optional integer that defines the stroke width. Default is\n * 1. This is stored in <strokewidth>.\n */\nfunction mxSwimlane(bounds, fill, stroke, strokewidth)\n{\n\tmxShape.call(this);\n\tthis.bounds = bounds;\n\tthis.fill = fill;\n\tthis.stroke = stroke;\n\tthis.strokewidth = (strokewidth != null) ? strokewidth : 1;\n};\n\n/**\n * Extends mxShape.\n */\nmxUtils.extend(mxSwimlane, mxShape);\n\n/**\n * Variable: imageSize\n *\n * Default imagewidth and imageheight if an image but no imagewidth\n * and imageheight are defined in the style. Value is 16.\n */\nmxSwimlane.prototype.imageSize = 16;\n\n/**\n * Function: isRoundable\n * \n * Adds roundable support.\n */\nmxSwimlane.prototype.isRoundable = function(c, x, y, w, h)\n{\n\treturn true;\n};\n\n/**\n * Function: getTitleSize\n * \n * Returns the title size.\n */\nmxSwimlane.prototype.getTitleSize = function()\n{\n\treturn Math.max(0, mxUtils.getValue(this.style, mxConstants.STYLE_STARTSIZE, mxConstants.DEFAULT_STARTSIZE));\n};\n\n/**\n * Function: getLabelBounds\n * \n * Returns the bounding box for the label.\n */\nmxSwimlane.prototype.getLabelBounds = function(rect)\n{\n\tvar start = this.getTitleSize();\n\tvar bounds = new mxRectangle(rect.x, rect.y, rect.width, rect.height);\n\tvar horizontal = this.isHorizontal();\n\t\n\tvar flipH = mxUtils.getValue(this.style, mxConstants.STYLE_FLIPH, 0) == 1;\n\tvar flipV = mxUtils.getValue(this.style, mxConstants.STYLE_FLIPV, 0) == 1;\t\n\t\n\t// East is default\n\tvar shapeVertical = (this.direction == mxConstants.DIRECTION_NORTH ||\n\t\t\tthis.direction == mxConstants.DIRECTION_SOUTH);\n\tvar realHorizontal = horizontal == !shapeVertical;\n\t\n\tvar realFlipH = !realHorizontal && flipH != (this.direction == mxConstants.DIRECTION_SOUTH ||\n\t\t\tthis.direction == mxConstants.DIRECTION_WEST);\n\tvar realFlipV = realHorizontal && flipV != (this.direction == mxConstants.DIRECTION_SOUTH ||\n\t\t\tthis.direction == mxConstants.DIRECTION_WEST);\n\n\t// Shape is horizontal\n\tif (!shapeVertical)\n\t{\n\t\tvar tmp = Math.min(bounds.height, start * this.scale);\n\n\t\tif (realFlipH || realFlipV)\n\t\t{\n\t\t\tbounds.y += bounds.height - tmp;\n\t\t}\n\n\t\tbounds.height = tmp;\n\t}\n\telse\n\t{\n\t\tvar tmp = Math.min(bounds.width, start * this.scale);\n\t\t\n\t\tif (realFlipH || realFlipV)\n\t\t{\n\t\t\tbounds.x += bounds.width - tmp;\t\n\t\t}\n\n\t\tbounds.width = tmp;\n\t}\n\t\n\treturn bounds;\n};\n\n/**\n * Function: getGradientBounds\n * \n * Returns the bounding box for the gradient box for this shape.\n */\nmxSwimlane.prototype.getGradientBounds = function(c, x, y, w, h)\n{\n\tvar start = this.getTitleSize();\n\t\n\tif (this.isHorizontal())\n\t{\n\t\tstart = Math.min(start, h);\n\t\treturn new mxRectangle(x, y, w, start);\n\t}\n\telse\n\t{\n\t\tstart = Math.min(start, w);\n\t\treturn new mxRectangle(x, y, start, h);\n\t}\n};\n\n/**\n * Function: getSwimlaneArcSize\n * \n * Returns the arcsize for the swimlane.\n */\nmxSwimlane.prototype.getSwimlaneArcSize = function(w, h, start)\n{\n\tif (mxUtils.getValue(this.style, mxConstants.STYLE_ABSOLUTE_ARCSIZE, 0) == '1')\n\t{\n\t\treturn Math.min(w / 2, Math.min(h / 2, mxUtils.getValue(this.style,\n\t\t\tmxConstants.STYLE_ARCSIZE, mxConstants.LINE_ARCSIZE) / 2));\n\t}\n\telse\n\t{\n\t\tvar f = mxUtils.getValue(this.style, mxConstants.STYLE_ARCSIZE, mxConstants.RECTANGLE_ROUNDING_FACTOR * 100) / 100;\n\n\t\treturn start * f * 3; \n\t}\n};\n\n/**\n * Function: isHorizontal\n *\n * Paints the swimlane vertex shape.\n */\nmxSwimlane.prototype.isHorizontal = function()\n{\n\treturn mxUtils.getValue(this.style, mxConstants.STYLE_HORIZONTAL, 1) == 1;\n};\n\n/**\n * Function: paintVertexShape\n *\n * Paints the swimlane vertex shape.\n */\nmxSwimlane.prototype.paintVertexShape = function(c, x, y, w, h)\n{\n\tvar start = this.getTitleSize();\n\tvar fill = mxUtils.getValue(this.style, mxConstants.STYLE_SWIMLANE_FILLCOLOR, mxConstants.NONE);\n\tvar swimlaneLine = mxUtils.getValue(this.style, mxConstants.STYLE_SWIMLANE_LINE, 1) == 1;\n\tvar r = 0;\n\t\n\tif (this.isHorizontal())\n\t{\n\t\tstart = Math.min(start, h);\n\t}\n\telse\n\t{\n\t\tstart = Math.min(start, w);\n\t}\n\t\n\tc.translate(x, y);\n\t\n\tif (!this.isRounded)\n\t{\n\t\tthis.paintSwimlane(c, x, y, w, h, start, fill, swimlaneLine);\n\t}\n\telse\n\t{\n\t\tr = this.getSwimlaneArcSize(w, h, start);\n\t\tr = Math.min(((this.isHorizontal()) ? h : w) - start, Math.min(start, r));\n\t\tthis.paintRoundedSwimlane(c, x, y, w, h, start, r, fill, swimlaneLine);\n\t}\n\t\n\tvar sep = mxUtils.getValue(this.style, mxConstants.STYLE_SEPARATORCOLOR, mxConstants.NONE);\n\tthis.paintSeparator(c, x, y, w, h, start, sep);\n\n\tif (this.image != null)\n\t{\n\t\tvar bounds = this.getImageBounds(x, y, w, h);\n\t\tc.image(bounds.x - x, bounds.y - y, bounds.width, bounds.height,\n\t\t\t\tthis.image, false, false, false);\n\t}\n\t\n\tif (this.glass)\n\t{\n\t\tc.setShadow(false);\n\t\tthis.paintGlassEffect(c, 0, 0, w, start, r);\n\t}\n};\n\n/**\n * Function: paintSwimlane\n *\n * Paints the swimlane vertex shape.\n */\nmxSwimlane.prototype.paintSwimlane = function(c, x, y, w, h, start, fill, swimlaneLine)\n{\n\tc.begin();\n\t\n\tvar events = true;\n\t\n\tif (this.style != null)\n\t{\n\t\tevents = mxUtils.getValue(this.style, mxConstants.STYLE_POINTER_EVENTS, '1') == '1';\n\t}\n\t\n\tif (!events && (this.fill == null || this.fill == mxConstants.NONE))\n\t{\n\t\tc.pointerEvents = false;\n\t}\n\t\n\tif (this.isHorizontal())\n\t{\n\t\tc.moveTo(0, start);\n\t\tc.lineTo(0, 0);\n\t\tc.lineTo(w, 0);\n\t\tc.lineTo(w, start);\n\t\tc.fillAndStroke();\n\n\t\tif (start < h)\n\t\t{\n\t\t\tif (fill == mxConstants.NONE || !events)\n\t\t\t{\n\t\t\t\tc.pointerEvents = false;\n\t\t\t}\n\t\t\t\n\t\t\tif (fill != mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.setFillColor(fill);\n\t\t\t}\n\t\t\t\n\t\t\tc.begin();\n\t\t\tc.moveTo(0, start);\n\t\t\tc.lineTo(0, h);\n\t\t\tc.lineTo(w, h);\n\t\t\tc.lineTo(w, start);\n\t\t\t\n\t\t\tif (fill == mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.stroke();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tc.fillAndStroke();\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tc.moveTo(start, 0);\n\t\tc.lineTo(0, 0);\n\t\tc.lineTo(0, h);\n\t\tc.lineTo(start, h);\n\t\tc.fillAndStroke();\n\t\t\n\t\tif (start < w)\n\t\t{\n\t\t\tif (fill == mxConstants.NONE || !events)\n\t\t\t{\n\t\t\t\tc.pointerEvents = false;\n\t\t\t}\n\t\t\t\n\t\t\tif (fill != mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.setFillColor(fill);\n\t\t\t}\n\t\t\t\n\t\t\tc.begin();\n\t\t\tc.moveTo(start, 0);\n\t\t\tc.lineTo(w, 0);\n\t\t\tc.lineTo(w, h);\n\t\t\tc.lineTo(start, h);\n\t\t\t\n\t\t\tif (fill == mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.stroke();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tc.fillAndStroke();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif (swimlaneLine)\n\t{\n\t\tthis.paintDivider(c, x, y, w, h, start, fill == mxConstants.NONE);\n\t}\n};\n\n/**\n * Function: paintRoundedSwimlane\n *\n * Paints the swimlane vertex shape.\n */\nmxSwimlane.prototype.paintRoundedSwimlane = function(c, x, y, w, h, start, r, fill, swimlaneLine)\n{\n\tc.begin();\n\t\n\tvar events = true;\n\t\n\tif (this.style != null)\n\t{\n\t\tevents = mxUtils.getValue(this.style, mxConstants.STYLE_POINTER_EVENTS, '1') == '1';\n\t}\n\t\n\tif (!events && (this.fill == null || this.fill == mxConstants.NONE))\n\t{\n\t\tc.pointerEvents = false;\n\t}\n\t\n\tif (this.isHorizontal())\n\t{\n\t\tc.moveTo(w, start);\n\t\tc.lineTo(w, r);\n\t\tc.quadTo(w, 0, w - Math.min(w / 2, r), 0);\n\t\tc.lineTo(Math.min(w / 2, r), 0);\n\t\tc.quadTo(0, 0, 0, r);\n\t\tc.lineTo(0, start);\n\t\tc.fillAndStroke();\n\t\t\n\t\tif (start < h)\n\t\t{\n\t\t\tif (fill == mxConstants.NONE || !events)\n\t\t\t{\n\t\t\t\tc.pointerEvents = false;\n\t\t\t}\n\t\t\t\n\t\t\tif (fill != mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.setFillColor(fill);\n\t\t\t}\n\t\t\t\n\t\t\tc.begin();\n\t\t\tc.moveTo(0, start);\n\t\t\tc.lineTo(0, h - r);\n\t\t\tc.quadTo(0, h, Math.min(w / 2, r), h);\n\t\t\tc.lineTo(w - Math.min(w / 2, r), h);\n\t\t\tc.quadTo(w, h, w, h - r);\n\t\t\tc.lineTo(w, start);\n\t\t\t\n\t\t\tif (fill == mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.stroke();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tc.fillAndStroke();\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tc.moveTo(start, 0);\n\t\tc.lineTo(r, 0);\n\t\tc.quadTo(0, 0, 0, Math.min(h / 2, r));\n\t\tc.lineTo(0, h - Math.min(h / 2, r));\n\t\tc.quadTo(0, h, r, h);\n\t\tc.lineTo(start, h);\n\t\tc.fillAndStroke();\n\n\t\tif (start < w)\n\t\t{\n\t\t\tif (fill == mxConstants.NONE || !events)\n\t\t\t{\n\t\t\t\tc.pointerEvents = false;\n\t\t\t}\n\t\t\t\n\t\t\tif (fill != mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.setFillColor(fill);\n\t\t\t}\n\t\t\t\n\t\t\tc.begin();\n\t\t\tc.moveTo(start, h);\n\t\t\tc.lineTo(w - r, h);\n\t\t\tc.quadTo(w, h, w, h - Math.min(h / 2, r));\n\t\t\tc.lineTo(w, Math.min(h / 2, r));\n\t\t\tc.quadTo(w, 0, w - r, 0);\n\t\t\tc.lineTo(start, 0);\n\t\t\t\n\t\t\tif (fill == mxConstants.NONE)\n\t\t\t{\n\t\t\t\tc.stroke();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tc.fillAndStroke();\n\t\t\t}\n\t\t}\n\t}\n\n\tif (swimlaneLine)\n\t{\n\t\tthis.paintDivider(c, x, y, w, h, start, fill == mxConstants.NONE);\n\t}\n};\n\n/**\n * Function: paintDivider\n *\n * Paints the divider between swimlane title and content area.\n */\nmxSwimlane.prototype.paintDivider = function(c, x, y, w, h, start, shadow)\n{\n\tif (!shadow)\n\t{\n\t\tc.setShadow(false);\n\t}\n\n\tc.begin();\n\t\n\tif (this.isHorizontal())\n\t{\n\t\tc.moveTo(0, start);\n\t\tc.lineTo(w, start);\n\t}\n\telse\n\t{\n\t\tc.moveTo(start, 0);\n\t\tc.lineTo(start, h);\n\t}\n\n\tc.stroke();\n};\n\n/**\n * Function: paintSeparator\n *\n * Paints the vertical or horizontal separator line between swimlanes.\n */\nmxSwimlane.prototype.paintSeparator = function(c, x, y, w, h, start, color)\n{\n\tif (color != mxConstants.NONE)\n\t{\n\t\tc.setStrokeColor(color);\n\t\tc.setDashed(true);\n\t\tc.begin();\n\t\t\n\t\tif (this.isHorizontal())\n\t\t{\n\t\t\tc.moveTo(w, start);\n\t\t\tc.lineTo(w, h);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc.moveTo(start, 0);\n\t\t\tc.lineTo(w, 0);\n\t\t}\n\t\t\n\t\tc.stroke();\n\t\tc.setDashed(false);\n\t}\n};\n\n/**\n * Function: getImageBounds\n *\n * Paints the swimlane vertex shape.\n */\nmxSwimlane.prototype.getImageBounds = function(x, y, w, h)\n{\n\tif (this.isHorizontal())\n\t{\n\t\treturn new mxRectangle(x + w - this.imageSize, y, this.imageSize, this.imageSize);\n\t}\n\telse\n\t{\n\t\treturn new mxRectangle(x, y, this.imageSize, this.imageSize);\n\t}\n};\n\n__mxOutput.mxSwimlane = typeof mxSwimlane !== 'undefined' ? mxSwimlane : undefined;\n\n/**\n * Copyright (c) 2006-2018, JGraph Ltd\n * Copyright (c) 2006-2018, Gaudenz Alder\n */\n/**\n * Class: mxGraphLayout\n * \n * Base class for all layout algorithms in mxGraph. Main public functions are\n * <moveCell> for handling a moved cell within a layouted parent, and <execute> for\n * running the layout on a given parent cell.\n *\n * Known Subclasses:\n *\n * <mxCircleLayout>, <mxCompactTreeLayout>, <mxCompositeLayout>,\n * <mxFastOrganicLayout>, <mxParallelEdgeLayout>, <mxPartitionLayout>,\n * <mxStackLayout>\n * \n * Constructor: mxGraphLayout\n *\n * Constructs a new layout using the given layouts.\n *\n * Arguments:\n * \n * graph - Enclosing \n */\nfunction mxGraphLayout(graph)\n{\n\tthis.graph = graph;\n};\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxGraphLayout.prototype.graph = null;\n\n/**\n * Variable: useBoundingBox\n *\n * Boolean indicating if the bounding box of the label should be used if\n * its available. Default is true.\n */\nmxGraphLayout.prototype.useBoundingBox = true;\n\n/**\n * Variable: parent\n *\n * The parent cell of the layout, if any\n */\nmxGraphLayout.prototype.parent = null;\n\n/**\n * Function: moveCell\n * \n * Notified when a cell is being moved in a parent that has automatic\n * layout to update the cell state (eg. index) so that the outcome of the\n * layout will position the vertex as close to the point (x, y) as\n * possible.\n * \n * Empty implementation.\n * \n * Parameters:\n * \n * cell - <mxCell> which has been moved.\n * x - X-coordinate of the new cell location.\n * y - Y-coordinate of the new cell location.\n */\nmxGraphLayout.prototype.moveCell = function(cell, x, y) { };\n\n/**\n * Function: resizeCell\n * \n * Notified when a cell is being resized in a parent that has automatic\n * layout to update the other cells in the layout.\n * \n * Empty implementation.\n * \n * Parameters:\n * \n * cell - <mxCell> which has been moved.\n * bounds - <mxRectangle> that represents the new cell bounds.\n */\nmxGraphLayout.prototype.resizeCell = function(cell, bounds) { };\n\n/**\n * Function: execute\n * \n * Executes the layout algorithm for the children of the given parent.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be layed out.\n */\nmxGraphLayout.prototype.execute = function(parent) { };\n\n/**\n * Function: getGraph\n * \n * Returns the graph that this layout operates on.\n */\nmxGraphLayout.prototype.getGraph = function()\n{\n\treturn this.graph;\n};\n\n/**\n * Function: getConstraint\n * \n * Returns the constraint for the given key and cell. The optional edge and\n * source arguments are used to return inbound and outgoing routing-\n * constraints for the given edge and vertex. This implementation always\n * returns the value for the given key in the style of the given cell.\n * \n * Parameters:\n * \n * key - Key of the constraint to be returned.\n * cell - <mxCell> whose constraint should be returned.\n * edge - Optional <mxCell> that represents the connection whose constraint\n * should be returned. Default is null.\n * source - Optional boolean that specifies if the connection is incoming\n * or outgoing. Default is null.\n */\nmxGraphLayout.prototype.getConstraint = function(key, cell, edge, source)\n{\n\treturn this.graph.getCurrentCellStyle(cell)[key]\n};\n\n/**\n * Function: traverse\n * \n * Traverses the (directed) graph invoking the given function for each\n * visited vertex and edge. The function is invoked with the current vertex\n * and the incoming edge as a parameter. This implementation makes sure\n * each vertex is only visited once. The function may return false if the\n * traversal should stop at the given vertex.\n * \n * Example:\n * \n * (code)\n * mxLog.show();\n * var cell = graph.getSelectionCell();\n * graph.traverse(cell, false, function(vertex, edge)\n * {\n *   mxLog.debug(graph.getLabel(vertex));\n * });\n * (end)\n * \n * Parameters:\n * \n * vertex - <mxCell> that represents the vertex where the traversal starts.\n * directed - Optional boolean indicating if edges should only be traversed\n * from source to target. Default is true.\n * func - Visitor function that takes the current vertex and the incoming\n * edge as arguments. The traversal stops if the function returns false.\n * edge - Optional <mxCell> that represents the incoming edge. This is\n * null for the first step of the traversal.\n * visited - Optional <mxDictionary> of cell paths for the visited cells.\n */\nmxGraphLayout.traverse = function(vertex, directed, func, edge, visited)\n{\n\tif (func != null && vertex != null)\n\t{\n\t\tdirected = (directed != null) ? directed : true;\n\t\tvisited = visited || new mxDictionary();\n\t\t\n\t\tif (!visited.get(vertex))\n\t\t{\n\t\t\tvisited.put(vertex, true);\n\t\t\tvar result = func(vertex, edge);\n\t\t\t\n\t\t\tif (result == null || result)\n\t\t\t{\n\t\t\t\tvar edgeCount = this.graph.model.getEdgeCount(vertex);\n\t\t\t\t\n\t\t\t\tif (edgeCount > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < edgeCount; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar e = this.graph.model.getEdgeAt(vertex, i);\n\t\t\t\t\t\tvar isSource = this.graph.model.getTerminal(e, true) == vertex;\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tif (!directed || isSource)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar next = this.graph.view.getVisibleTerminal(e, !isSource);\n\t\t\t\t\t\t\tthis.traverse(next, directed, func, e, visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: isAncestor\n * \n * Returns true if the given parent is an ancestor of the given child.\n *\n * Parameters:\n * \n * parent - <mxCell> that specifies the parent.\n * child - <mxCell> that specifies the child.\n * traverseAncestors - boolean whether to \n */\nmxGraphLayout.prototype.isAncestor = function(parent, child, traverseAncestors)\n{\n\tif (!traverseAncestors)\n\t{\n\t\treturn (this.graph.model.getParent(child) == parent);\n\t}\t\n\t\n\tif (child == parent)\n\t{\n\t\treturn false;\n\t}\n\n\twhile (child != null && child != parent)\n\t{\n\t\tchild = this.graph.model.getParent(child);\n\t}\n\t\n\treturn child == parent;\n};\n\n/**\n * Function: isVertexMovable\n * \n * Returns a boolean indicating if the given <mxCell> is movable or\n * bendable by the algorithm. This implementation returns true if the given\n * cell is movable in the graph.\n * \n * Parameters:\n * \n * cell - <mxCell> whose movable state should be returned.\n */\nmxGraphLayout.prototype.isVertexMovable = function(cell)\n{\n\treturn this.graph.isCellMovable(cell);\n};\n\n/**\n * Function: isVertexIgnored\n * \n * Returns a boolean indicating if the given <mxCell> should be ignored by\n * the algorithm. This implementation returns false for all vertices.\n * \n * Parameters:\n * \n * vertex - <mxCell> whose ignored state should be returned.\n */\nmxGraphLayout.prototype.isVertexIgnored = function(vertex)\n{\n\treturn !this.graph.getModel().isVertex(vertex) ||\n\t\t!this.graph.isCellVisible(vertex);\n};\n\n/**\n * Function: isEdgeIgnored\n * \n * Returns a boolean indicating if the given <mxCell> should be ignored by\n * the algorithm. This implementation returns false for all vertices.\n * \n * Parameters:\n * \n * cell - <mxCell> whose ignored state should be returned.\n */\nmxGraphLayout.prototype.isEdgeIgnored = function(edge)\n{\n\tvar model = this.graph.getModel();\n\t\n\treturn !model.isEdge(edge) ||\n\t\t!this.graph.isCellVisible(edge) ||\n\t\tmodel.getTerminal(edge, true) == null ||\n\t\tmodel.getTerminal(edge, false) == null;\n};\n\n/**\n * Function: setEdgeStyleEnabled\n * \n * Disables or enables the edge style of the given edge.\n */\nmxGraphLayout.prototype.setEdgeStyleEnabled = function(edge, value)\n{\n\tthis.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,\n\t\t\t(value) ? '0' : '1', [edge]);\n};\n\n/**\n * Function: setOrthogonalEdge\n * \n * Disables or enables orthogonal end segments of the given edge.\n */\nmxGraphLayout.prototype.setOrthogonalEdge = function(edge, value)\n{\n\tthis.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,\n\t\t\t(value) ? '1' : '0', [edge]);\n};\n\n/**\n * Function: getParentOffset\n * \n * Determines the offset of the given parent to the parent\n * of the layout\n */\nmxGraphLayout.prototype.getParentOffset = function(parent)\n{\n\tvar result = new mxPoint();\n\n\tif (parent != null && parent != this.parent)\n\t{\n\t\tvar model = this.graph.getModel();\n\n\t\tif (model.isAncestor(this.parent, parent))\n\t\t{\n\t\t\tvar parentGeo = model.getGeometry(parent);\n\n\t\t\twhile (parent != this.parent)\n\t\t\t{\n\t\t\t\tresult.x = result.x + parentGeo.x;\n\t\t\t\tresult.y = result.y + parentGeo.y;\n\n\t\t\t\tparent = model.getParent(parent);;\n\t\t\t\tparentGeo = model.getGeometry(parent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: setEdgePoints\n * \n * Replaces the array of mxPoints in the geometry of the given edge\n * with the given array of mxPoints.\n */\nmxGraphLayout.prototype.setEdgePoints = function(edge, points)\n{\n\tif (edge != null)\n\t{\n\t\tvar model = this.graph.model;\n\t\tvar geometry = model.getGeometry(edge);\n\n\t\tif (geometry == null)\n\t\t{\n\t\t\tgeometry = new mxGeometry();\n\t\t\tgeometry.setRelative(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgeometry = geometry.clone();\n\t\t}\n\n\t\tif (this.parent != null && points != null)\n\t\t{\n\t\t\tvar parent = model.getParent(edge);\n\n\t\t\tvar parentOffset = this.getParentOffset(parent);\n\n\t\t\tfor (var i = 0; i < points.length; i++)\n\t\t\t{\n\t\t\t\tpoints[i].x = points[i].x - parentOffset.x;\n\t\t\t\tpoints[i].y = points[i].y - parentOffset.y;\n\t\t\t}\n\t\t}\n\n\t\tgeometry.points = points;\n\t\tmodel.setGeometry(edge, geometry);\n\t}\n};\n\n/**\n * Function: setVertexLocation\n * \n * Sets the new position of the given cell taking into account the size of\n * the bounding box if <useBoundingBox> is true. The change is only carried\n * out if the new location is not equal to the existing location, otherwise\n * the geometry is not replaced with an updated instance. The new or old\n * bounds are returned (including overlapping labels).\n * \n * Parameters:\n * \n * cell - <mxCell> whose geometry is to be set.\n * x - Integer that defines the x-coordinate of the new location.\n * y - Integer that defines the y-coordinate of the new location.\n */\nmxGraphLayout.prototype.setVertexLocation = function(cell, x, y)\n{\n\tvar model = this.graph.getModel();\n\tvar geometry = model.getGeometry(cell);\n\tvar result = null;\n\t\n\tif (geometry != null)\n\t{\n\t\tresult = new mxRectangle(x, y, geometry.width, geometry.height);\n\t\t\n\t\t// Checks for oversize labels and shifts the result\n\t\t// TODO: Use mxUtils.getStringSize for label bounds\n\t\tif (this.useBoundingBox)\n\t\t{\n\t\t\tvar state = this.graph.getView().getState(cell);\n\t\t\t\n\t\t\tif (state != null && state.text != null && state.text.boundingBox != null)\n\t\t\t{\n\t\t\t\tvar scale = this.graph.getView().scale;\n\t\t\t\tvar box = state.text.boundingBox;\n\t\t\t\t\n\t\t\t\tif (state.text.boundingBox.x < state.x)\n\t\t\t\t{\n\t\t\t\t\tx += (state.x - box.x) / scale;\n\t\t\t\t\tresult.width = box.width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (state.text.boundingBox.y < state.y)\n\t\t\t\t{\n\t\t\t\t\ty += (state.y - box.y) / scale;\n\t\t\t\t\tresult.height = box.height;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.parent != null)\n\t\t{\n\t\t\tvar parent = model.getParent(cell);\n\n\t\t\tif (parent != null && parent != this.parent)\n\t\t\t{\n\t\t\t\tvar parentOffset = this.getParentOffset(parent);\n\n\t\t\t\tx = x - parentOffset.x;\n\t\t\t\ty = y - parentOffset.y;\n\t\t\t}\n\t\t}\n\n\t\tif (geometry.x != x || geometry.y != y)\n\t\t{\n\t\t\tgeometry = geometry.clone();\n\t\t\tgeometry.x = x;\n\t\t\tgeometry.y = y;\n\t\t\t\n\t\t\tmodel.setGeometry(cell, geometry);\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getVertexBounds\n * \n * Returns an <mxRectangle> that defines the bounds of the given cell or\n * the bounding box if <useBoundingBox> is true.\n */\nmxGraphLayout.prototype.getVertexBounds = function(cell)\n{\n\tvar geo = this.graph.getModel().getGeometry(cell);\n\n\t// Checks for oversize label bounding box and corrects\n\t// the return value accordingly\n\t// TODO: Use mxUtils.getStringSize for label bounds\n\tif (this.useBoundingBox)\n\t{\n\t\tvar state = this.graph.getView().getState(cell);\n\n\t\tif (state != null && state.text != null && state.text.boundingBox != null)\n\t\t{\n\t\t\tvar scale = this.graph.getView().scale;\n\t\t\tvar tmp = state.text.boundingBox;\n\n\t\t\tvar dx0 = Math.max(state.x - tmp.x, 0) / scale;\n\t\t\tvar dy0 = Math.max(state.y - tmp.y, 0) / scale;\n\t\t\tvar dx1 = Math.max((tmp.x + tmp.width) - (state.x + state.width), 0) / scale;\n  \t\t\tvar dy1 = Math.max((tmp.y + tmp.height) - (state.y + state.height), 0) / scale;\n\n\t\t\tgeo = new mxRectangle(geo.x - dx0, geo.y - dy0, geo.width + dx0 + dx1, geo.height + dy0 + dy1);\n\t\t}\n\t}\n\n\tif (this.parent != null)\n\t{\n\t\tvar parent = this.graph.getModel().getParent(cell);\n\t\tgeo = geo.clone();\n\n\t\tif (parent != null && parent != this.parent)\n\t\t{\n\t\t\tvar parentOffset = this.getParentOffset(parent);\n\t\t\tgeo.x = geo.x + parentOffset.x;\n\t\t\tgeo.y = geo.y + parentOffset.y;\n\t\t}\n\t}\n\n\treturn new mxRectangle(geo.x, geo.y, geo.width, geo.height);\n};\n\n/**\n * Function: arrangeGroups\n * \n * Shortcut to <mxGraph.updateGroupBounds> with moveGroup set to true.\n */\nmxGraphLayout.prototype.arrangeGroups = function(cells, border, topBorder, rightBorder, bottomBorder, leftBorder)\n{\n\treturn this.graph.updateGroupBounds(cells, border, true, topBorder, rightBorder, bottomBorder, leftBorder);\n};\n\n/**\n * Class: WeightedCellSorter\n * \n * A utility class used to track cells whilst sorting occurs on the weighted\n * sum of their connected edges. Does not violate (x.compareTo(y)==0) ==\n * (x.equals(y))\n *\n * Constructor: WeightedCellSorter\n * \n * Constructs a new weighted cell sorted for the given cell and weight.\n */\nfunction WeightedCellSorter(cell, weightedValue)\n{\n\tthis.cell = cell;\n\tthis.weightedValue = weightedValue;\n};\n\n/**\n * Variable: weightedValue\n * \n * The weighted value of the cell stored.\n */\nWeightedCellSorter.prototype.weightedValue = 0;\n\n/**\n * Variable: nudge\n * \n * Whether or not to flip equal weight values.\n */\nWeightedCellSorter.prototype.nudge = false;\n\n/**\n * Variable: visited\n * \n * Whether or not this cell has been visited in the current assignment.\n */\nWeightedCellSorter.prototype.visited = false;\n\n/**\n * Variable: rankIndex\n * \n * The index this cell is in the model rank.\n */\nWeightedCellSorter.prototype.rankIndex = null;\n\n/**\n * Variable: cell\n * \n * The cell whose median value is being calculated.\n */\nWeightedCellSorter.prototype.cell = null;\n\n/**\n * Function: compare\n * \n * Compares two WeightedCellSorters.\n */\nWeightedCellSorter.prototype.compare = function(a, b)\n{\n\tif (a != null && b != null)\n\t{\n\t\tif (b.weightedValue > a.weightedValue)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\telse if (b.weightedValue < a.weightedValue)\n\t\t{\n\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (b.nudge)\n\t\t\t{\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\treturn 0;\n\t}\n};\n\n__mxOutput.mxGraphLayout = typeof mxGraphLayout !== 'undefined' ? mxGraphLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxStackLayout\n * \n * Extends <mxGraphLayout> to create a horizontal or vertical stack of the\n * child vertices. The children do not need to be connected for this layout\n * to work.\n * \n * Example:\n * \n * (code)\n * var layout = new mxStackLayout(graph, true);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxStackLayout\n * \n * Constructs a new stack layout layout for the specified graph,\n * spacing, orientation and offset.\n */\nfunction mxStackLayout(graph, horizontal, spacing, x0, y0, border)\n{\n\tmxGraphLayout.call(this, graph);\n\tthis.horizontal = (horizontal != null) ? horizontal : true;\n\tthis.spacing = (spacing != null) ? spacing : 0;\n\tthis.x0 = (x0 != null) ? x0 : 0;\n\tthis.y0 = (y0 != null) ? y0 : 0;\n\tthis.border = (border != null) ? border : 0;\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxStackLayout.prototype = new mxGraphLayout();\nmxStackLayout.prototype.constructor = mxStackLayout;\n\n/**\n * Variable: horizontal\n *\n * Specifies the orientation of the layout. Default is true.\n */\nmxStackLayout.prototype.horizontal = null;\n\n/**\n * Variable: spacing\n *\n * Specifies the spacing between the cells. Default is 0.\n */\nmxStackLayout.prototype.spacing = null;\n\n/**\n * Variable: x0\n *\n * Specifies the horizontal origin of the layout. Default is 0.\n */\nmxStackLayout.prototype.x0 = null;\n\n/**\n * Variable: y0\n *\n * Specifies the vertical origin of the layout. Default is 0.\n */\nmxStackLayout.prototype.y0 = null;\n\n/**\n * Variable: border\n *\n * Border to be added if fill is true. Default is 0.\n */\nmxStackLayout.prototype.border = 0;\n\n/**\n * Variable: marginTop\n * \n * Top margin for the child area. Default is 0.\n */\nmxStackLayout.prototype.marginTop = 0;\n\n/**\n * Variable: marginLeft\n * \n * Top margin for the child area. Default is 0.\n */\nmxStackLayout.prototype.marginLeft = 0;\n\n/**\n * Variable: marginRight\n * \n * Top margin for the child area. Default is 0.\n */\nmxStackLayout.prototype.marginRight = 0;\n\n/**\n * Variable: marginBottom\n * \n * Top margin for the child area. Default is 0.\n */\nmxStackLayout.prototype.marginBottom = 0;\n\n/**\n * Variable: keepFirstLocation\n * \n * Boolean indicating if the location of the first cell should be\n * kept, that is, it will not be moved to x0 or y0. Default is false.\n */\nmxStackLayout.prototype.keepFirstLocation = false;\n\n/**\n * Variable: fill\n * \n * Boolean indicating if dimension should be changed to fill out the parent\n * cell. Default is false.\n */\nmxStackLayout.prototype.fill = false;\n\t\n/**\n * Variable: resizeParent\n * \n * If the parent should be resized to match the width/height of the\n * stack. Default is false.\n */\nmxStackLayout.prototype.resizeParent = false;\n\n/**\n * Variable: resizeParentMax\n * \n * Use maximum of existing value and new value for resize of parent.\n * Default is false.\n */\nmxStackLayout.prototype.resizeParentMax = false;\n\n/**\n * Variable: resizeLast\n * \n * If the last element should be resized to fill out the parent. Default is\n * false. If <resizeParent> is true then this is ignored.\n */\nmxStackLayout.prototype.resizeLast = false;\n\n/**\n * Variable: wrap\n * \n * Value at which a new column or row should be created. Default is null.\n */\nmxStackLayout.prototype.wrap = null;\n\n/**\n * Variable: borderCollapse\n * \n * If the strokeWidth should be ignored. Default is true.\n */\nmxStackLayout.prototype.borderCollapse = true;\n\n/**\n * Variable: allowGaps\n * \n * If gaps should be allowed in the stack. Default is false.\n */\nmxStackLayout.prototype.allowGaps = false;\n\n/**\n * Variable: gridSize\n * \n * Grid size for alignment of position and size. Default is 0.\n */\nmxStackLayout.prototype.gridSize = 0;\n\n/**\n * Function: isHorizontal\n * \n * Returns <horizontal>.\n */\nmxStackLayout.prototype.isHorizontal = function()\n{\n\treturn this.horizontal;\n};\n\n/**\n * Function: moveCell\n * \n * Implements <mxGraphLayout.moveCell>.\n */\nmxStackLayout.prototype.moveCell = function(cell, x, y)\n{\n\tvar model = this.graph.getModel();\n\tvar parent = model.getParent(cell);\n\tvar horizontal = this.isHorizontal();\n\t\n\tif (cell != null && parent != null)\n\t{\n\t\tvar i = 0;\n\t\tvar last = 0;\n\t\tvar childCount = model.getChildCount(parent);\n\t\tvar value = (horizontal) ? x : y;\n\t\tvar pstate = this.graph.getView().getState(parent);\n\n\t\tif (pstate != null)\n\t\t{\n\t\t\tvalue -= (horizontal) ? pstate.x : pstate.y;\n\t\t}\n\t\t\n\t\tvalue /= this.graph.view.scale;\n\t\t\n\t\tfor (i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar child = model.getChildAt(parent, i);\n\t\t\t\n\t\t\tif (child != cell)\n\t\t\t{\n\t\t\t\tvar bounds = model.getGeometry(child);\n\t\t\t\t\n\t\t\t\tif (bounds != null)\n\t\t\t\t{\n\t\t\t\t\tvar tmp = (horizontal) ?\n\t\t\t\t\t\tbounds.x + bounds.width / 2 :\n\t\t\t\t\t\tbounds.y + bounds.height / 2;\n\t\t\t\t\t\n\t\t\t\t\tif (last <= value && tmp > value)\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlast = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Changes child order in parent\n\t\tvar idx = parent.getIndex(cell);\n\t\tidx = Math.max(0, i - ((i > idx) ? 1 : 0));\n\n\t\tmodel.add(parent, cell, idx);\n\t}\n};\n\n/**\n * Function: getParentSize\n * \n * Returns the size for the parent container or the size of the graph\n * container if the parent is a layer or the root of the model.\n */\nmxStackLayout.prototype.getParentSize = function(parent)\n{\n\tvar model = this.graph.getModel();\t\t\t\n\tvar pgeo = model.getGeometry(parent);\n\t\n\t// Handles special case where the parent is either a layer with no\n\t// geometry or the current root of the view in which case the size\n\t// of the graph's container will be used.\n\tif (this.graph.container != null && ((pgeo == null &&\n\t\tmodel.isLayer(parent)) || parent == this.graph.getView().currentRoot))\n\t{\n\t\tvar width = this.graph.container.offsetWidth - 1;\n\t\tvar height = this.graph.container.offsetHeight - 1;\n\t\tpgeo = new mxRectangle(0, 0, width, height);\n\t}\n\t\n\treturn pgeo;\n};\n\n/**\n * Function: getLayoutCells\n * \n * Returns the cells to be layouted.\n */\nmxStackLayout.prototype.getLayoutCells = function(parent)\n{\n\tvar model = this.graph.getModel();\n\tvar childCount = model.getChildCount(parent);\n\tvar cells = [];\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = model.getChildAt(parent, i);\n\t\t\n\t\tif (!this.isVertexIgnored(child) && this.isVertexMovable(child))\n\t\t{\n\t\t\tcells.push(child);\n\t\t}\n\t}\n\t\n\tif (this.allowGaps)\n\t{\n\t\tcells.sort(mxUtils.bind(this, function(c1, c2)\n\t\t{\n\t\t\tvar geo1 = this.graph.getCellGeometry(c1);\n\t\t\tvar geo2 = this.graph.getCellGeometry(c2);\n\t\t\t\n\t\t\treturn (this.horizontal) ?\n\t\t\t\t((geo1.x == geo2.x) ? 0 : ((geo1.x > geo2.x > 0) ? 1 : -1)) :\n\t\t\t\t((geo1.y == geo2.y) ? 0 : ((geo1.y > geo2.y > 0) ? 1 : -1));\n\t\t}));\n\t}\n\t\n\treturn cells;\n};\n\n/**\n * Function: snap\n * \n * Snaps the given value to the grid size.\n */\nmxStackLayout.prototype.snap = function(value)\n{\n\tif (this.gridSize != null && this.gridSize > 0)\n\t{\n\t\tvalue = Math.max(value, this.gridSize);\n\t\t\n\t\tif (value / this.gridSize > 1)\n\t\t{\n\t\t\tvar mod = value % this.gridSize;\n\t\t\tvalue += mod > this.gridSize / 2 ? (this.gridSize - mod) : -mod;\n\t\t}\n\t}\n\t\n\treturn value;\n};\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>.\n * \n * Only children where <isVertexIgnored> returns false are taken into\n * account.\n */\nmxStackLayout.prototype.execute = function(parent)\n{\n\tif (parent != null)\n\t{\n\t\tvar pgeo = this.getParentSize(parent);\n\t\tvar horizontal = this.isHorizontal();\n\t\tvar model = this.graph.getModel();\t\n\t\tvar fillValue = null;\n\t\t\n\t\tif (pgeo != null)\n\t\t{\n\t\t\tfillValue = (horizontal) ? pgeo.height - this.marginTop - this.marginBottom :\n\t\t\t\tpgeo.width - this.marginLeft - this.marginRight;\n\t\t}\n\t\t\n\t\tfillValue -= 2 * this.border;\n\t\tvar x0 = this.x0 + this.border + this.marginLeft;\n\t\tvar y0 = this.y0 + this.border + this.marginTop;\n\t\t\n\t\t// Handles swimlane start size\n\t\tif (this.graph.isSwimlane(parent))\n\t\t{\n\t\t\t// Uses computed style to get latest \n\t\t\tvar style = this.graph.getCellStyle(parent);\n\t\t\tvar start = mxUtils.getNumber(style, mxConstants.STYLE_STARTSIZE, mxConstants.DEFAULT_STARTSIZE);\n\t\t\tvar horz = mxUtils.getValue(style, mxConstants.STYLE_HORIZONTAL, true) == 1;\n\n\t\t\tif (pgeo != null)\n\t\t\t{\n\t\t\t\tif (horz)\n\t\t\t\t{\n\t\t\t\t\tstart = Math.min(start, pgeo.height);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstart = Math.min(start, pgeo.width);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (horizontal == horz)\n\t\t\t{\n\t\t\t\tfillValue -= start;\n\t\t\t}\n\n\t\t\tif (horz)\n\t\t\t{\n\t\t\t\ty0 += start;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tx0 += start;\n\t\t\t}\n\t\t}\n\n\t\tmodel.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tvar tmp = 0;\n\t\t\tvar last = null;\n\t\t\tvar lastValue = 0;\n\t\t\tvar lastChild = null;\n\t\t\tvar cells = this.getLayoutCells(parent);\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tvar child = cells[i];\n\t\t\t\tvar geo = model.getGeometry(child);\n\t\t\t\t\n\t\t\t\tif (geo != null)\n\t\t\t\t{\n\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\n\t\t\t\t\tif (this.wrap != null && last != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif ((horizontal && last.x + last.width +\n\t\t\t\t\t\t\tgeo.width + 2 * this.spacing > this.wrap) ||\n\t\t\t\t\t\t\t(!horizontal && last.y + last.height +\n\t\t\t\t\t\t\tgeo.height + 2 * this.spacing > this.wrap))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlast = null;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (horizontal)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ty0 += tmp + this.spacing;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tx0 += tmp + this.spacing;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttmp = 0;\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttmp = Math.max(tmp, (horizontal) ? geo.height : geo.width);\n\t\t\t\t\tvar sw = 0;\n\t\t\t\t\t\n\t\t\t\t\tif (!this.borderCollapse)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar childStyle = this.graph.getCellStyle(child);\n\t\t\t\t\t\tsw = mxUtils.getNumber(childStyle, mxConstants.STYLE_STROKEWIDTH, 1);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (last != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar temp = lastValue + this.spacing + Math.floor(sw / 2);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (horizontal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.x = this.snap(((this.allowGaps) ? Math.max(temp, geo.x) :\n\t\t\t\t\t\t\t\ttemp) - this.marginLeft) + this.marginLeft;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.y = this.snap(((this.allowGaps) ? Math.max(temp, geo.y) :\n\t\t\t\t\t\t\t\ttemp) - this.marginTop) + this.marginTop;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (!this.keepFirstLocation)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (horizontal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.x = (this.allowGaps && geo.x > x0) ? Math.max(this.snap(geo.x -\n\t\t\t\t\t\t\t\tthis.marginLeft) + this.marginLeft, x0) : x0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.y = (this.allowGaps && geo.y > y0) ? Math.max(this.snap(geo.y -\n\t\t\t\t\t\t\t\tthis.marginTop) + this.marginTop, y0) : y0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (horizontal)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.y = y0;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.x = x0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.fill && fillValue != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (horizontal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.height = fillValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.width = fillValue;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (horizontal)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.width = this.snap(geo.width);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.height = this.snap(geo.height);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.setChildGeometry(child, geo);\n\t\t\t\t\tlastChild = child;\n\t\t\t\t\tlast = geo;\n\t\t\t\t\t\n\t\t\t\t\tif (horizontal)\n\t\t\t\t\t{\n\t\t\t\t\t\tlastValue = last.x + last.width + Math.floor(sw / 2);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlastValue = last.y + last.height + Math.floor(sw / 2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.resizeParent && pgeo != null && last != null && !this.graph.isCellCollapsed(parent))\n\t\t\t{\n\t\t\t\tthis.updateParentGeometry(parent, pgeo, last);\n\t\t\t}\n\t\t\telse if (this.resizeLast && pgeo != null && last != null && lastChild != null)\n\t\t\t{\n\t\t\t\tif (horizontal)\n\t\t\t\t{\n\t\t\t\t\tlast.width = pgeo.width - last.x - this.spacing - this.marginRight - this.marginLeft;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlast.height = pgeo.height - last.y - this.spacing - this.marginBottom;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.setChildGeometry(lastChild, last);\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tmodel.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: setChildGeometry\n * \n * Sets the specific geometry to the given child cell.\n * \n * Parameters:\n * \n * child - The given child of <mxCell>.\n * geo - The specific geometry of <mxGeometry>.\n */\nmxStackLayout.prototype.setChildGeometry = function(child, geo)\n{\n\tvar geo2 = this.graph.getCellGeometry(child);\n\t\n\tif (geo2 == null || geo.x != geo2.x || geo.y != geo2.y ||\n\t\tgeo.width != geo2.width || geo.height != geo2.height)\n\t{\n\t\tthis.graph.getModel().setGeometry(child, geo);\n\t}\n};\n\n/**\n * Function: updateParentGeometry\n * \n * Updates the geometry of the given parent cell.\n * \n * Parameters:\n * \n * parent - The given parent of <mxCell>.\n * pgeo - The new <mxGeometry> for parent.\n * last - The last <mxGeometry>.\n */\nmxStackLayout.prototype.updateParentGeometry = function(parent, pgeo, last)\n{\n\tvar horizontal = this.isHorizontal();\n\tvar model = this.graph.getModel();\t\n\n\tvar pgeo2 = pgeo.clone();\n\t\n\tif (horizontal)\n\t{\n\t\tvar tmp = last.x + last.width + this.marginRight + this.border;\n\t\t\n\t\tif (this.resizeParentMax)\n\t\t{\n\t\t\tpgeo2.width = Math.max(pgeo2.width, tmp);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpgeo2.width = tmp;\n\t\t}\n\t}\n\telse\n\t{\n\t\tvar tmp = last.y + last.height + this.marginBottom + this.border;\n\t\t\n\t\tif (this.resizeParentMax)\n\t\t{\n\t\t\tpgeo2.height = Math.max(pgeo2.height, tmp);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpgeo2.height = tmp;\n\t\t}\n\t}\n\t\n\tif (pgeo.x != pgeo2.x || pgeo.y != pgeo2.y ||\n\t\tpgeo.width != pgeo2.width || pgeo.height != pgeo2.height)\n\t{\n\t\tmodel.setGeometry(parent, pgeo2);\n\t}\n};\n\n__mxOutput.mxStackLayout = typeof mxStackLayout !== 'undefined' ? mxStackLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPartitionLayout\n * \n * Extends <mxGraphLayout> for partitioning the parent cell vertically or\n * horizontally by filling the complete area with the child cells. A horizontal\n * layout partitions the height of the given parent whereas a a non-horizontal\n * layout partitions the width. If the parent is a layer (that is, a child of\n * the root node), then the current graph size is partitioned. The children do\n * not need to be connected for this layout to work.\n * \n * Example:\n * \n * (code)\n * var layout = new mxPartitionLayout(graph, true, 10, 20);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxPartitionLayout\n * \n * Constructs a new stack layout layout for the specified graph,\n * spacing, orientation and offset.\n */\nfunction mxPartitionLayout(graph, horizontal, spacing, border)\n{\n\tmxGraphLayout.call(this, graph);\n\tthis.horizontal = (horizontal != null) ? horizontal : true;\n\tthis.spacing = spacing || 0;\n\tthis.border = border || 0;\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxPartitionLayout.prototype = new mxGraphLayout();\nmxPartitionLayout.prototype.constructor = mxPartitionLayout;\n\n/**\n * Variable: horizontal\n * \n * Boolean indicating the direction in which the space is partitioned.\n * Default is true.\n */\nmxPartitionLayout.prototype.horizontal = null;\n\n/**\n * Variable: spacing\n * \n * Integer that specifies the absolute spacing in pixels between the\n * children. Default is 0.\n */\nmxPartitionLayout.prototype.spacing = null;\n\n/**\n * Variable: border\n * \n * Integer that specifies the absolute inset in pixels for the parent that\n * contains the children. Default is 0.\n */\nmxPartitionLayout.prototype.border = null;\n\n/**\n * Variable: resizeVertices\n * \n * Boolean that specifies if vertices should be resized. Default is true.\n */\nmxPartitionLayout.prototype.resizeVertices = true;\n\n/**\n * Function: isHorizontal\n * \n * Returns <horizontal>.\n */\nmxPartitionLayout.prototype.isHorizontal = function()\n{\n\treturn this.horizontal;\n};\n\n/**\n * Function: moveCell\n * \n * Implements <mxGraphLayout.moveCell>.\n */\nmxPartitionLayout.prototype.moveCell = function(cell, x, y)\n{\n\tvar model = this.graph.getModel();\n\tvar parent = model.getParent(cell);\n\t\n\tif (cell != null &&\n\t\tparent != null)\n\t{\n\t\tvar i = 0;\n\t\tvar last = 0;\n\t\tvar childCount = model.getChildCount(parent);\n\t\t\n\t\t// Finds index of the closest swimlane\n\t\t// TODO: Take into account the orientation\n\t\tfor (i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar child = model.getChildAt(parent, i);\n\t\t\tvar bounds = this.getVertexBounds(child);\n\t\t\t\n\t\t\tif (bounds != null)\n\t\t\t{\n\t\t\t\tvar tmp = bounds.x + bounds.width / 2;\n\t\t\t\t\n\t\t\t\tif (last < x && tmp > x)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlast = tmp;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Changes child order in parent\n\t\tvar idx = parent.getIndex(cell);\n\t\tidx = Math.max(0, i - ((i > idx) ? 1 : 0));\n\t\t\n\t\tmodel.add(parent, cell, idx);\n\t}\n};\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>. All children where <isVertexIgnored>\n * returns false and <isVertexMovable> returns true are modified.\n */\nmxPartitionLayout.prototype.execute = function(parent)\n{\n\tvar horizontal = this.isHorizontal();\n\tvar model = this.graph.getModel();\n\tvar pgeo = model.getGeometry(parent);\n\t\n\t// Handles special case where the parent is either a layer with no\n\t// geometry or the current root of the view in which case the size\n\t// of the graph's container will be used.\n\tif (this.graph.container != null &&\n\t\t((pgeo == null &&\n\t\tmodel.isLayer(parent)) ||\n\t\tparent == this.graph.getView().currentRoot))\n\t{\n\t\tvar width = this.graph.container.offsetWidth - 1;\n\t\tvar height = this.graph.container.offsetHeight - 1;\n\t\tpgeo = new mxRectangle(0, 0, width, height);\n\t}\n\n\tif (pgeo != null)\n\t{\n\t\tvar children = [];\n\t\tvar childCount = model.getChildCount(parent);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar child = model.getChildAt(parent, i);\n\t\t\t\n\t\t\tif (!this.isVertexIgnored(child) &&\n\t\t\t\tthis.isVertexMovable(child))\n\t\t\t{\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar n = children.length;\n\n\t\tif (n > 0)\n\t\t{\n\t\t\tvar x0 = this.border;\n\t\t\tvar y0 = this.border;\n\t\t\tvar other = (horizontal) ? pgeo.height : pgeo.width;\n\t\t\tother -= 2 * this.border;\n\n\t\t\tvar size = (this.graph.isSwimlane(parent)) ?\n\t\t\t\tthis.graph.getStartSize(parent) :\n\t\t\t\tnew mxRectangle();\n\n\t\t\tother -= (horizontal) ? size.height : size.width;\n\t\t\tx0 = x0 + size.width;\n\t\t\ty0 = y0 + size.height;\n\n\t\t\tvar tmp = this.border + (n - 1) * this.spacing;\n\t\t\tvar value = (horizontal) ?\n\t\t\t\t((pgeo.width - x0 - tmp) / n) :\n\t\t\t\t((pgeo.height - y0 - tmp) / n);\n\t\t\t\n\t\t\t// Avoids negative values, that is values where the sum of the\n\t\t\t// spacing plus the border is larger then the available space\n\t\t\tif (value > 0)\n\t\t\t{\n\t\t\t\tmodel.beginUpdate();\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < n; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar child = children[i];\n\t\t\t\t\t\tvar geo = model.getGeometry(child);\n\t\t\t\t\t\n\t\t\t\t\t\tif (geo != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\tgeo.x = x0;\n\t\t\t\t\t\t\tgeo.y = y0;\n\n\t\t\t\t\t\t\tif (horizontal)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.resizeVertices)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tgeo.width = value;\n\t\t\t\t\t\t\t\t\tgeo.height = other;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tx0 += value + this.spacing;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.resizeVertices)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tgeo.height = value;\n\t\t\t\t\t\t\t\t\tgeo.width = other;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ty0 += value + this.spacing;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmodel.setGeometry(child, geo);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfinally\n\t\t\t\t{\n\t\t\t\t\tmodel.endUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n__mxOutput.mxPartitionLayout = typeof mxPartitionLayout !== 'undefined' ? mxPartitionLayout : undefined;\n\n/**\n * Copyright (c) 2006-2018, JGraph Ltd\n * Copyright (c) 2006-2018, Gaudenz Alder\n */\n/**\n * Class: mxCompactTreeLayout\n * \n * Extends <mxGraphLayout> to implement a compact tree (Moen) algorithm. This\n * layout is suitable for graphs that have no cycles (trees). Vertices that are\n * not connected to the tree will be ignored by this layout.\n * \n * Example:\n * \n * (code)\n * var layout = new mxCompactTreeLayout(graph);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxCompactTreeLayout\n * \n * Constructs a new compact tree layout for the specified graph\n * and orientation.\n */\nfunction mxCompactTreeLayout(graph, horizontal, invert)\n{\n\tmxGraphLayout.call(this, graph);\n\tthis.horizontal = (horizontal != null) ? horizontal : true;\n\tthis.invert = (invert != null) ? invert : false;\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxCompactTreeLayout.prototype = new mxGraphLayout();\nmxCompactTreeLayout.prototype.constructor = mxCompactTreeLayout;\n\n/**\n * Variable: horizontal\n *\n * Specifies the orientation of the layout. Default is true.\n */\nmxCompactTreeLayout.prototype.horizontal = null;\t \n\n/**\n * Variable: invert\n *\n * Specifies if edge directions should be inverted. Default is false.\n */\nmxCompactTreeLayout.prototype.invert = null;\t \n\n/**\n * Variable: resizeParent\n * \n * If the parents should be resized to match the width/height of the\n * children. Default is true.\n */\nmxCompactTreeLayout.prototype.resizeParent = true;\n\n/**\n * Variable: maintainParentLocation\n * \n * Specifies if the parent location should be maintained, so that the\n * top, left corner stays the same before and after execution of\n * the layout. Default is false for backwards compatibility.\n */\nmxCompactTreeLayout.prototype.maintainParentLocation = false;\n\n/**\n * Variable: groupPadding\n * \n * Padding added to resized parents. Default is 10.\n */\nmxCompactTreeLayout.prototype.groupPadding = 10;\n\n/**\n * Variable: groupPaddingTop\n * \n * Top padding added to resized parents. Default is 0.\n */\nmxCompactTreeLayout.prototype.groupPaddingTop = 0;\n\n/**\n * Variable: groupPaddingRight\n * \n * Right padding added to resized parents. Default is 0.\n */\nmxCompactTreeLayout.prototype.groupPaddingRight = 0;\n\n/**\n * Variable: groupPaddingBottom\n * \n * Bottom padding added to resized parents. Default is 0.\n */\nmxCompactTreeLayout.prototype.groupPaddingBottom = 0;\n\n/**\n * Variable: groupPaddingLeft\n * \n * Left padding added to resized parents. Default is 0.\n */\nmxCompactTreeLayout.prototype.groupPaddingLeft = 0;\n\n/**\n * Variable: parentsChanged\n *\n * A set of the parents that need updating based on children\n * process as part of the layout.\n */\nmxCompactTreeLayout.prototype.parentsChanged = null;\n\n/**\n * Variable: moveTree\n * \n * Specifies if the tree should be moved to the top, left corner\n * if it is inside a top-level layer. Default is false.\n */\nmxCompactTreeLayout.prototype.moveTree = false;\n\n/**\n * Variable: visited\n * \n * Specifies if the tree should be moved to the top, left corner\n * if it is inside a top-level layer. Default is false.\n */\nmxCompactTreeLayout.prototype.visited = null;\n\n/**\n * Variable: levelDistance\n *\n * Holds the levelDistance. Default is 10.\n */\nmxCompactTreeLayout.prototype.levelDistance = 10;\n\n/**\n * Variable: nodeDistance\n *\n * Holds the nodeDistance. Default is 20.\n */\nmxCompactTreeLayout.prototype.nodeDistance = 20;\n\n/**\n * Variable: resetEdges\n * \n * Specifies if all edge points of traversed edges should be removed.\n * Default is true.\n */\nmxCompactTreeLayout.prototype.resetEdges = true;\n\n/**\n * Variable: prefHozEdgeSep\n * \n * The preferred horizontal distance between edges exiting a vertex.\n */\nmxCompactTreeLayout.prototype.prefHozEdgeSep = 5;\n\n/**\n * Variable: prefVertEdgeOff\n * \n * The preferred vertical offset between edges exiting a vertex.\n */\nmxCompactTreeLayout.prototype.prefVertEdgeOff = 4;\n\n/**\n * Variable: minEdgeJetty\n * \n * The minimum distance for an edge jetty from a vertex.\n */\nmxCompactTreeLayout.prototype.minEdgeJetty = 8;\n\n/**\n * Variable: channelBuffer\n * \n * The size of the vertical buffer in the center of inter-rank channels\n * where edge control points should not be placed.\n */\nmxCompactTreeLayout.prototype.channelBuffer = 4;\n\n/**\n * Variable: edgeRouting\n * \n * Whether or not to apply the internal tree edge routing.\n */\nmxCompactTreeLayout.prototype.edgeRouting = true;\n\n/**\n * Variable: sortEdges\n * \n * Specifies if edges should be sorted according to the order of their\n * opposite terminal cell in the model.\n */\nmxCompactTreeLayout.prototype.sortEdges = false;\n\n/**\n * Variable: alignRanks\n * \n * Whether or not the tops of cells in each rank should be aligned\n * across the rank\n */\nmxCompactTreeLayout.prototype.alignRanks = false;\n\n/**\n * Variable: maxRankHeight\n * \n * An array of the maximum height of cells (relative to the layout direction)\n * per rank\n */\nmxCompactTreeLayout.prototype.maxRankHeight = null;\n\n/**\n * Variable: root\n * \n * The cell to use as the root of the tree\n */\nmxCompactTreeLayout.prototype.root = null;\n\n/**\n * Variable: node\n * \n * The internal node representation of the root cell. Do not set directly\n * , this value is only exposed to assist with post-processing functionality\n */\nmxCompactTreeLayout.prototype.node = null;\n\n/**\n * Function: isVertexIgnored\n * \n * Returns a boolean indicating if the given <mxCell> should be ignored as a\n * vertex. This returns true if the cell has no connections.\n * \n * Parameters:\n * \n * vertex - <mxCell> whose ignored state should be returned.\n */\nmxCompactTreeLayout.prototype.isVertexIgnored = function(vertex)\n{\n\treturn mxGraphLayout.prototype.isVertexIgnored.apply(this, arguments) ||\n\t\tthis.graph.getConnections(vertex).length == 0;\n};\n\n/**\n * Function: isHorizontal\n * \n * Returns <horizontal>.\n */\nmxCompactTreeLayout.prototype.isHorizontal = function()\n{\n\treturn this.horizontal;\n};\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>.\n * \n * If the parent has any connected edges, then it is used as the root of\n * the tree. Else, <mxGraph.findTreeRoots> will be used to find a suitable\n * root node within the set of children of the given parent.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be laid out.\n * root - Optional <mxCell> that will be used as the root of the tree.\n * Overrides <root> if specified.\n */\nmxCompactTreeLayout.prototype.execute = function(parent, root)\n{\n\tthis.parent = parent;\n\tvar model = this.graph.getModel();\n\n\tif (root == null)\n\t{\n\t\t// Takes the parent as the root if it has outgoing edges\n\t\tif (this.graph.getEdges(parent, model.getParent(parent),\n\t\t\tthis.invert, !this.invert, false).length > 0)\n\t\t{\n\t\t\tthis.root = parent;\n\t\t}\n\t\t\n\t\t// Tries to find a suitable root in the parent's\n\t\t// children\n\t\telse\n\t\t{\n\t\t\tvar roots = this.graph.findTreeRoots(parent, true, this.invert);\n\t\t\t\n\t\t\tif (roots.length > 0)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < roots.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (!this.isVertexIgnored(roots[i]) &&\n\t\t\t\t\t\tthis.graph.getEdges(roots[i], null,\n\t\t\t\t\t\t\tthis.invert, !this.invert, false).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.root = roots[i];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tthis.root = root;\n\t}\n\t\n\tif (this.root != null)\n\t{\n\t\tif (this.resizeParent)\n\t\t{\n\t\t\tthis.parentsChanged = new Object();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.parentsChanged = null;\n\t\t}\n\n\t\t//  Maintaining parent location\n\t\tthis.parentX = null;\n\t\tthis.parentY = null;\n\t\t\n\t\tif (parent != this.root && model.isVertex(parent) != null && this.maintainParentLocation)\n\t\t{\n\t\t\tvar geo = this.graph.getCellGeometry(parent);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tthis.parentX = geo.x;\n\t\t\t\tthis.parentY = geo.y;\n\t\t\t}\n\t\t}\n\t\t\n\t\tmodel.beginUpdate();\n\t\t\n\t\ttry\n\t\t{\n\t\t\tthis.visited = new Object();\n\t\t\tthis.node = this.dfs(this.root, parent);\n\t\t\t\n\t\t\tif (this.alignRanks)\n\t\t\t{\n\t\t\t\tthis.maxRankHeight = [];\n\t\t\t\tthis.findRankHeights(this.node, 0);\n\t\t\t\tthis.setCellHeights(this.node, 0);\n\t\t\t}\n\t\t\t\n\t\t\tif (this.node != null)\n\t\t\t{\n\t\t\t\tthis.layout(this.node);\n\t\t\t\tvar x0 = this.graph.gridSize;\n\t\t\t\tvar y0 = x0;\n\t\t\t\t\n\t\t\t\tif (!this.moveTree)\n\t\t\t\t{\n\t\t\t\t\tvar g = this.getVertexBounds(this.root);\n\t\t\t\t\t\n\t\t\t\t\tif (g != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tx0 = g.x;\n\t\t\t\t\t\ty0 = g.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar bounds = null;\n\t\t\t\t\n\t\t\t\tif (this.isHorizontal())\n\t\t\t\t{\n\t\t\t\t\tbounds = this.horizontalLayout(this.node, x0, y0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbounds = this.verticalLayout(this.node, null, x0, y0);\n\t\t\t\t}\n\n\t\t\t\tif (bounds != null)\n\t\t\t\t{\n\t\t\t\t\tvar dx = 0;\n\t\t\t\t\tvar dy = 0;\n\n\t\t\t\t\tif (bounds.x < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tdx = Math.abs(x0 - bounds.x);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (bounds.y < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tdy = Math.abs(y0 - bounds.y);\t\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dx != 0 || dy != 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.moveNode(this.node, dx, dy);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.resizeParent)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.adjustParents();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.edgeRouting)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Iterate through all edges setting their positions\n\t\t\t\t\t\tthis.localEdgeProcessing(this.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Maintaining parent location\n\t\t\t\tif (this.parentX != null && this.parentY != null)\n\t\t\t\t{\n\t\t\t\t\tvar geo = this.graph.getCellGeometry(parent);\n\t\t\t\t\t\n\t\t\t\t\tif (geo != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\tgeo.x = this.parentX;\n\t\t\t\t\t\tgeo.y = this.parentY;\n\t\t\t\t\t\tmodel.setGeometry(parent, geo);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tmodel.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: moveNode\n * \n * Moves the specified node and all of its children by the given amount.\n */\nmxCompactTreeLayout.prototype.moveNode = function(node, dx, dy)\n{\n\tnode.x += dx;\n\tnode.y += dy;\n\tthis.apply(node);\n\t\n\tvar child = node.child;\n\t\n\twhile (child != null)\n\t{\n\t\tthis.moveNode(child, dx, dy);\n\t\tchild = child.next;\n\t}\n};\n\n\n/**\n * Function: sortOutgoingEdges\n * \n * Called if <sortEdges> is true to sort the array of outgoing edges in place.\n */\nmxCompactTreeLayout.prototype.sortOutgoingEdges = function(source, edges)\n{\n\tvar lookup = new mxDictionary();\n\t\n\tedges.sort(function(e1, e2)\n\t{\n\t\tvar end1 = e1.getTerminal(e1.getTerminal(false) == source);\n\t\tvar p1 = lookup.get(end1);\n\t\t\n\t\tif (p1 == null)\n\t\t{\n\t\t\tp1 = mxCellPath.create(end1).split(mxCellPath.PATH_SEPARATOR);\n\t\t\tlookup.put(end1, p1);\n\t\t}\n\n\t\tvar end2 = e2.getTerminal(e2.getTerminal(false) == source);\n\t\tvar p2 = lookup.get(end2);\n\t\t\n\t\tif (p2 == null)\n\t\t{\n\t\t\tp2 = mxCellPath.create(end2).split(mxCellPath.PATH_SEPARATOR);\n\t\t\tlookup.put(end2, p2);\n\t\t}\n\n\t\treturn mxCellPath.compare(p1, p2);\n\t});\n};\n\n/**\n * Function: findRankHeights\n * \n * Stores the maximum height (relative to the layout\n * direction) of cells in each rank\n */\nmxCompactTreeLayout.prototype.findRankHeights = function(node, rank)\n{\n\tif (this.maxRankHeight[rank] == null || this.maxRankHeight[rank] < node.height)\n\t{\n\t\tthis.maxRankHeight[rank] = node.height;\n\t}\n\n\tvar child = node.child;\n\t\n\twhile (child != null)\n\t{\n\t\tthis.findRankHeights(child, rank + 1);\n\t\tchild = child.next;\n\t}\n};\n\n/**\n * Function: setCellHeights\n * \n * Set the cells heights (relative to the layout\n * direction) when the tops of each rank are to be aligned\n */\nmxCompactTreeLayout.prototype.setCellHeights = function(node, rank)\n{\n\tif (this.maxRankHeight[rank] != null && this.maxRankHeight[rank] > node.height)\n\t{\n\t\tnode.height = this.maxRankHeight[rank];\n\t}\n\n\tvar child = node.child;\n\t\n\twhile (child != null)\n\t{\n\t\tthis.setCellHeights(child, rank + 1);\n\t\tchild = child.next;\n\t}\n};\n\n/**\n * Function: dfs\n * \n * Does a depth first search starting at the specified cell.\n * Makes sure the specified parent is never left by the\n * algorithm.\n */\nmxCompactTreeLayout.prototype.dfs = function(cell, parent)\n{\n\tvar id = mxCellPath.create(cell);\n\tvar node = null;\n\t\n\tif (cell != null && this.visited[id] == null && !this.isVertexIgnored(cell))\n\t{\n\t\tthis.visited[id] = cell;\n\t\tnode = this.createNode(cell);\n\n\t\tvar model = this.graph.getModel();\n\t\tvar prev = null;\n\t\tvar out = this.graph.getEdges(cell, parent, this.invert, !this.invert, false, true);\n\t\tvar view = this.graph.getView();\n\t\t\n\t\tif (this.sortEdges)\n\t\t{\n\t\t\tthis.sortOutgoingEdges(cell, out);\n\t\t}\n\n\t\tfor (var i = 0; i < out.length; i++)\n\t\t{\n\t\t\tvar edge = out[i];\n\t\t\t\n\t\t\tif (!this.isEdgeIgnored(edge))\n\t\t\t{\n\t\t\t\t// Resets the points on the traversed edge\n\t\t\t\tif (this.resetEdges)\n\t\t\t\t{\n\t\t\t\t\tthis.setEdgePoints(edge, null);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.edgeRouting)\n\t\t\t\t{\n\t\t\t\t\tthis.setEdgeStyleEnabled(edge, false);\n\t\t\t\t\tthis.setEdgePoints(edge, null);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Checks if terminal in same swimlane\n\t\t\t\tvar state = view.getState(edge);\n\t\t\t\tvar target = (state != null) ? state.getVisibleTerminal(this.invert) : view.getVisibleTerminal(edge, this.invert);\n\t\t\t\tvar tmp = this.dfs(target, parent);\n\t\t\t\t\n\t\t\t\tif (tmp != null && model.getGeometry(target) != null)\n\t\t\t\t{\n\t\t\t\t\tif (prev == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.child = tmp;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tprev.next = tmp;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tprev = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn node;\n};\n\n/**\n * Function: layout\n * \n * Starts the actual compact tree layout algorithm\n * at the given node.\n */\nmxCompactTreeLayout.prototype.layout = function(node)\n{\n\tif (node != null)\n\t{\n\t\tvar child = node.child;\n\t\t\n\t\twhile (child != null)\n\t\t{\n\t\t\tthis.layout(child);\n\t\t\tchild = child.next;\n\t\t}\n\t\t\n\t\tif (node.child != null)\n\t\t{\n\t\t\tthis.attachParent(node, this.join(node));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.layoutLeaf(node);\n\t\t}\n\t}\n};\n\n/**\n * Function: horizontalLayout\n */\nmxCompactTreeLayout.prototype.horizontalLayout = function(node, x0, y0, bounds)\n{\n\tnode.x += x0 + node.offsetX;\n\tnode.y += y0 + node.offsetY;\n\tbounds = this.apply(node, bounds);\n\tvar child = node.child;\n\t\n\tif (child != null)\n\t{\n\t\tbounds = this.horizontalLayout(child, node.x, node.y, bounds);\n\t\tvar siblingOffset = node.y + child.offsetY;\n\t\tvar s = child.next;\n\t\t\n\t\twhile (s != null)\n\t\t{\n\t\t\tbounds = this.horizontalLayout(s, node.x + child.offsetX, siblingOffset, bounds);\n\t\t\tsiblingOffset += s.offsetY;\n\t\t\ts = s.next;\n\t\t}\n\t}\n\t\n\treturn bounds;\n};\n\t\n/**\n * Function: verticalLayout\n */\nmxCompactTreeLayout.prototype.verticalLayout = function(node, parent, x0, y0, bounds)\n{\n\tnode.x += x0 + node.offsetY;\n\tnode.y += y0 + node.offsetX;\n\tbounds = this.apply(node, bounds);\n\tvar child = node.child;\n\t\n\tif (child != null)\n\t{\n\t\tbounds = this.verticalLayout(child, node, node.x, node.y, bounds);\n\t\tvar siblingOffset = node.x + child.offsetY;\n\t\tvar s = child.next;\n\t\t\n\t\twhile (s != null)\n\t\t{\n\t\t\tbounds = this.verticalLayout(s, node, siblingOffset, node.y + child.offsetX, bounds);\n\t\t\tsiblingOffset += s.offsetY;\n\t\t\ts = s.next;\n\t\t}\n\t}\n\t\n\treturn bounds;\n};\n\n/**\n * Function: attachParent\n */\nmxCompactTreeLayout.prototype.attachParent = function(node, height)\n{\n\tvar x = this.nodeDistance + this.levelDistance;\n\tvar y2 = (height - node.width) / 2 - this.nodeDistance;\n\tvar y1 = y2 + node.width + 2 * this.nodeDistance - height;\n\t\n\tnode.child.offsetX = x + node.height;\n\tnode.child.offsetY = y1;\n\t\n\tnode.contour.upperHead = this.createLine(node.height, 0,\n\t\tthis.createLine(x, y1, node.contour.upperHead));\n\tnode.contour.lowerHead = this.createLine(node.height, 0,\n\t\tthis.createLine(x, y2, node.contour.lowerHead));\n};\n\n/**\n * Function: layoutLeaf\n */\nmxCompactTreeLayout.prototype.layoutLeaf = function(node)\n{\n\tvar dist = 2 * this.nodeDistance;\n\t\n\tnode.contour.upperTail = this.createLine(\n\t\tnode.height + dist, 0);\n\tnode.contour.upperHead = node.contour.upperTail;\n\tnode.contour.lowerTail = this.createLine(\n\t\t0, -node.width - dist);\n\tnode.contour.lowerHead = this.createLine(\n\t\tnode.height + dist, 0, node.contour.lowerTail);\n};\n\n/**\n * Function: join\n */\nmxCompactTreeLayout.prototype.join = function(node)\n{\n\tvar dist = 2 * this.nodeDistance;\n\t\n\tvar child = node.child;\n\tnode.contour = child.contour;\n\tvar h = child.width + dist;\n\tvar sum = h;\n\tchild = child.next;\n\t\n\twhile (child != null)\n\t{\n\t\tvar d = this.merge(node.contour, child.contour);\n\t\tchild.offsetY = d + h;\n\t\tchild.offsetX = 0;\n\t\th = child.width + dist;\n\t\tsum += d + h;\n\t\tchild = child.next;\n\t}\n\t\n\treturn sum;\n};\n\n/**\n * Function: merge\n */\nmxCompactTreeLayout.prototype.merge = function(p1, p2)\n{\n\tvar x = 0;\n\tvar y = 0;\n\tvar total = 0;\n\t\n\tvar upper = p1.lowerHead;\n\tvar lower = p2.upperHead;\n\t\n\twhile (lower != null && upper != null)\n\t{\n\t\tvar d = this.offset(x, y, lower.dx, lower.dy,\n\t\t\tupper.dx, upper.dy);\n\t\ty += d;\n\t\ttotal += d;\n\t\t\n\t\tif (x + lower.dx <= upper.dx)\n\t\t{\n\t\t\tx += lower.dx;\n\t\t\ty += lower.dy;\n\t\t\tlower = lower.next;\n\t\t}\n\t\telse\n\t\t{\t\t\t\t\n\t\t\tx -= upper.dx;\n\t\t\ty -= upper.dy;\n\t\t\tupper = upper.next;\n\t\t}\n\t}\n\t\n\tif (lower != null)\n\t{\n\t\tvar b = this.bridge(p1.upperTail, 0, 0, lower, x, y);\n\t\tp1.upperTail = (b.next != null) ? p2.upperTail : b;\n\t\tp1.lowerTail = p2.lowerTail;\n\t}\n\telse\n\t{\n\t\tvar b = this.bridge(p2.lowerTail, x, y, upper, 0, 0);\n\t\t\n\t\tif (b.next == null)\n\t\t{\n\t\t\tp1.lowerTail = b;\n\t\t}\n\t}\n\t\n\tp1.lowerHead = p2.lowerHead;\n\t\n\treturn total;\n};\n\n/**\n * Function: offset\n */\nmxCompactTreeLayout.prototype.offset = function(p1, p2, a1, a2, b1, b2)\n{\n\tvar d = 0;\n\t\n\tif (b1 <= p1 || p1 + a1 <= 0)\n\t{\n\t\treturn 0;\n\t}\n\n\tvar t = b1 * a2 - a1 * b2;\n\t\n\tif (t > 0)\n\t{\n\t\tif (p1 < 0)\n\t\t{\n\t\t\tvar s = p1 * a2;\n\t\t\td = s / a1 - p2;\n\t\t}\n\t\telse if (p1 > 0)\n\t\t{\n\t\t\tvar s = p1 * b2;\n\t\t\td = s / b1 - p2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\td = -p2;\n\t\t}\n\t}\n\telse if (b1 < p1 + a1)\n\t{\n\t\tvar s = (b1 - p1) * a2;\n\t\td = b2 - (p2 + s / a1);\n\t}\n\telse if (b1 > p1 + a1)\n\t{\n\t\tvar s = (a1 + p1) * b2;\n\t\td = s / b1 - (p2 + a2);\n\t}\n\telse\n\t{\n\t\td = b2 - (p2 + a2);\n\t}\n\n\tif (d > 0)\n\t{\n\t\treturn d;\n\t}\n\telse\n\t{\n\t\treturn 0;\n\t}\n};\n\n/**\n * Function: bridge\n */\nmxCompactTreeLayout.prototype.bridge = function(line1, x1, y1, line2, x2, y2)\n{\n\tvar dx = x2 + line2.dx - x1;\n\tvar dy = 0;\n\tvar s = 0;\n\t\n\tif (line2.dx == 0)\n\t{\n\t\tdy = line2.dy;\n\t}\n\telse\n\t{\n\t\ts = dx * line2.dy;\n\t\tdy = s / line2.dx;\n\t}\n\t\n\tvar r = this.createLine(dx, dy, line2.next);\n\tline1.next = this.createLine(0, y2 + line2.dy - dy - y1, r);\n\t\n\treturn r;\n};\n\n/**\n * Function: createNode\n */\nmxCompactTreeLayout.prototype.createNode = function(cell)\n{\n\tvar node = new Object();\n\tnode.cell = cell;\n\tnode.x = 0;\n\tnode.y = 0;\n\tnode.width = 0;\n\tnode.height = 0;\n\t\n\tvar geo = this.getVertexBounds(cell);\n\t\n\tif (geo != null)\n\t{\n\t\tif (this.isHorizontal())\n\t\t{\n\t\t\tnode.width = geo.height;\n\t\t\tnode.height = geo.width;\t\t\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.width = geo.width;\n\t\t\tnode.height = geo.height;\n\t\t}\n\t}\n\t\n\tnode.offsetX = 0;\n\tnode.offsetY = 0;\n\tnode.contour = new Object();\n\t\n\treturn node;\n};\n\n/**\n * Function: apply\n */\nmxCompactTreeLayout.prototype.apply = function(node, bounds)\n{\n\tvar model = this.graph.getModel();\n\tvar cell = node.cell;\n\tvar g = model.getGeometry(cell);\n\n\tif (cell != null && g != null)\n\t{\n\t\tif (this.isVertexMovable(cell))\n\t\t{\n\t\t\tg = this.setVertexLocation(cell, node.x, node.y);\n\t\t\t\n\t\t\tif (this.resizeParent)\n\t\t\t{\n\t\t\t\tvar parent = model.getParent(cell);\n\t\t\t\tvar id = mxCellPath.create(parent);\n\t\t\t\t\n\t\t\t\t// Implements set semantic\n\t\t\t\tif (this.parentsChanged[id] == null)\n\t\t\t\t{\n\t\t\t\t\tthis.parentsChanged[id] = parent;\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (bounds == null)\n\t\t{\n\t\t\tbounds = new mxRectangle(g.x, g.y, g.width, g.height);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbounds = new mxRectangle(Math.min(bounds.x, g.x),\n\t\t\t\tMath.min(bounds.y, g.y),\n\t\t\t\tMath.max(bounds.x + bounds.width, g.x + g.width),\n\t\t\t\tMath.max(bounds.y + bounds.height, g.y + g.height));\n\t\t}\n\t}\n\t\n\treturn bounds;\n};\n\n/**\n * Function: createLine\n */\nmxCompactTreeLayout.prototype.createLine = function(dx, dy, next)\n{\n\tvar line = new Object();\n\tline.dx = dx;\n\tline.dy = dy;\n\tline.next = next;\n\t\n\treturn line;\n};\n\n/**\n * Function: adjustParents\n * \n * Adjust parent cells whose child geometries have changed. The default \n * implementation adjusts the group to just fit around the children with \n * a padding.\n */\nmxCompactTreeLayout.prototype.adjustParents = function()\n{\n\tvar tmp = [];\n\t\n\tfor (var id in this.parentsChanged)\n\t{\n\t\ttmp.push(this.parentsChanged[id]);\n\t}\n\t\n\tthis.arrangeGroups(mxUtils.sortCells(tmp, true), this.groupPadding, this.groupPaddingTop,\n\t\tthis.groupPaddingRight, this.groupPaddingBottom, this.groupPaddingLeft);\n};\n\n/**\n * Function: localEdgeProcessing\n *\n * Moves the specified node and all of its children by the given amount.\n */\nmxCompactTreeLayout.prototype.localEdgeProcessing = function(node)\n{\n\tthis.processNodeOutgoing(node);\n\tvar child = node.child;\n\n\twhile (child != null)\n\t{\n\t\tthis.localEdgeProcessing(child);\n\t\tchild = child.next;\n\t}\n};\n\n/**\n * Function: processNodeOutgoing\n *\n * Separates the x position of edges as they connect to vertices\n */\nmxCompactTreeLayout.prototype.processNodeOutgoing = function(node)\n{\n\tvar child = node.child;\n\tvar parentCell = node.cell;\n\n\tvar childCount = 0;\n\tvar sortedCells = [];\n\n\twhile (child != null)\n\t{\n\t\tchildCount++;\n\n\t\tvar sortingCriterion = child.x;\n\n\t\tif (this.horizontal)\n\t\t{\n\t\t\tsortingCriterion = child.y;\n\t\t}\n\n\t\tsortedCells.push(new WeightedCellSorter(child, sortingCriterion));\n\t\tchild = child.next;\n\t}\n\n\tsortedCells.sort(WeightedCellSorter.prototype.compare);\n\n\tvar availableWidth = node.width;\n\n\tvar requiredWidth = (childCount + 1) * this.prefHozEdgeSep;\n\n\t// Add a buffer on the edges of the vertex if the edge count allows\n\tif (availableWidth > requiredWidth + (2 * this.prefHozEdgeSep))\n\t{\n\t\tavailableWidth -= 2 * this.prefHozEdgeSep;\n\t}\n\n\tvar edgeSpacing = availableWidth / childCount;\n\n\tvar currentXOffset = edgeSpacing / 2.0;\n\n\tif (availableWidth > requiredWidth + (2 * this.prefHozEdgeSep))\n\t{\n\t\tcurrentXOffset += this.prefHozEdgeSep;\n\t}\n\n\tvar currentYOffset = this.minEdgeJetty - this.prefVertEdgeOff;\n\tvar maxYOffset = 0;\n\n\tvar parentBounds = this.getVertexBounds(parentCell);\n\tchild = node.child;\n\n\tfor (var j = 0; j < sortedCells.length; j++)\n\t{\n\t\tvar childCell = sortedCells[j].cell.cell;\n\t\tvar childBounds = this.getVertexBounds(childCell);\n\n\t\tvar edges = this.graph.getEdgesBetween(parentCell,\n\t\t\t\tchildCell, false);\n\t\t\n\t\tvar newPoints = [];\n\t\tvar x = 0;\n\t\tvar y = 0;\n\n\t\tfor (var i = 0; i < edges.length; i++)\n\t\t{\n\t\t\tif (this.horizontal)\n\t\t\t{\n\t\t\t\t// Use opposite co-ords, calculation was done for \n\t\t\t\t// \n\t\t\t\tx = parentBounds.x + parentBounds.width;\n\t\t\t\ty = parentBounds.y + currentXOffset;\n\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\tx = parentBounds.x + parentBounds.width\n\t\t\t\t\t\t+ currentYOffset;\n\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\ty = childBounds.y + childBounds.height / 2.0;\n\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\tthis.setEdgePoints(edges[i], newPoints);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tx = parentBounds.x + currentXOffset;\n\t\t\t\ty = parentBounds.y + parentBounds.height;\n\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\ty = parentBounds.y + parentBounds.height\n\t\t\t\t\t\t+ currentYOffset;\n\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\tx = childBounds.x + childBounds.width / 2.0;\n\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\tthis.setEdgePoints(edges[i], newPoints);\n\t\t\t}\n\t\t}\n\n\t\tif (j < childCount / 2)\n\t\t{\n\t\t\tcurrentYOffset += this.prefVertEdgeOff;\n\t\t}\n\t\telse if (j > childCount / 2)\n\t\t{\n\t\t\tcurrentYOffset -= this.prefVertEdgeOff;\n\t\t}\n\t\t// Ignore the case if equals, this means the second of 2\n\t\t// jettys with the same y (even number of edges)\n\n\t\t//\t\t\t\t\t\t\t\tpos[k * 2] = currentX;\n\t\tcurrentXOffset += edgeSpacing;\n\t\t//\t\t\t\t\t\t\t\tpos[k * 2 + 1] = currentYOffset;\n\n\t\tmaxYOffset = Math.max(maxYOffset, currentYOffset);\n\t}\n};\n__mxOutput.mxCompactTreeLayout = typeof mxCompactTreeLayout !== 'undefined' ? mxCompactTreeLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxRadialTreeLayout\n * \n * Extends <mxGraphLayout> to implement a radial tree algorithm. This\n * layout is suitable for graphs that have no cycles (trees). Vertices that are\n * not connected to the tree will be ignored by this layout.\n * \n * Example:\n * \n * (code)\n * var layout = new mxRadialTreeLayout(graph);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxRadialTreeLayout\n * \n * Constructs a new radial tree layout for the specified graph\n */\nfunction mxRadialTreeLayout(graph)\n{\n\tmxCompactTreeLayout.call(this, graph , false);\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxUtils.extend(mxRadialTreeLayout, mxCompactTreeLayout);\n\n/**\n * Variable: angleOffset\n *\n * The initial offset to compute the angle position.\n */\nmxRadialTreeLayout.prototype.angleOffset = 0.5;\n\n/**\n * Variable: rootx\n *\n * The X co-ordinate of the root cell\n */\nmxRadialTreeLayout.prototype.rootx = 0;\n\n/**\n * Variable: rooty\n *\n * The Y co-ordinate of the root cell\n */\nmxRadialTreeLayout.prototype.rooty = 0;\n\n/**\n * Variable: levelDistance\n *\n * Holds the levelDistance. Default is 120.\n */\nmxRadialTreeLayout.prototype.levelDistance = 120;\n\n/**\n * Variable: nodeDistance\n *\n * Holds the nodeDistance. Default is 10.\n */\nmxRadialTreeLayout.prototype.nodeDistance = 10;\n\n/**\n * Variable: autoRadius\n * \n * Specifies if the radios should be computed automatically\n */\nmxRadialTreeLayout.prototype.autoRadius = false;\n\n/**\n * Variable: sortEdges\n * \n * Specifies if edges should be sorted according to the order of their\n * opposite terminal cell in the model.\n */\nmxRadialTreeLayout.prototype.sortEdges = false;\n\n/**\n * Variable: rowMinX\n * \n * Array of leftmost x coordinate of each row\n */\nmxRadialTreeLayout.prototype.rowMinX = [];\n\n/**\n * Variable: rowMaxX\n * \n * Array of rightmost x coordinate of each row\n */\nmxRadialTreeLayout.prototype.rowMaxX = [];\n\n/**\n * Variable: rowMinCenX\n * \n * Array of x coordinate of leftmost vertex of each row\n */\nmxRadialTreeLayout.prototype.rowMinCenX = [];\n\n/**\n * Variable: rowMaxCenX\n * \n * Array of x coordinate of rightmost vertex of each row\n */\nmxRadialTreeLayout.prototype.rowMaxCenX = [];\n\n/**\n * Variable: rowRadi\n * \n * Array of y deltas of each row behind root vertex, also the radius in the tree\n */\nmxRadialTreeLayout.prototype.rowRadi = [];\n\n/**\n * Variable: row\n * \n * Array of vertices on each row\n */\nmxRadialTreeLayout.prototype.row = [];\n\n/**\n * Function: isVertexIgnored\n * \n * Returns a boolean indicating if the given <mxCell> should be ignored as a\n * vertex. This returns true if the cell has no connections.\n * \n * Parameters:\n * \n * vertex - <mxCell> whose ignored state should be returned.\n */\nmxRadialTreeLayout.prototype.isVertexIgnored = function(vertex)\n{\n\treturn mxGraphLayout.prototype.isVertexIgnored.apply(this, arguments) ||\n\t\tthis.graph.getConnections(vertex).length == 0;\n};\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>.\n * \n * If the parent has any connected edges, then it is used as the root of\n * the tree. Else, <mxGraph.findTreeRoots> will be used to find a suitable\n * root node within the set of children of the given parent.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be laid out.\n * root - Optional <mxCell> that will be used as the root of the tree.\n */\nmxRadialTreeLayout.prototype.execute = function(parent, root)\n{\n\tthis.parent = parent;\n\t\n\tthis.useBoundingBox = false;\n\tthis.edgeRouting = false;\n\t//this.horizontal = false;\n\n\tmxCompactTreeLayout.prototype.execute.apply(this, arguments);\n\t\n\tvar bounds = null;\n\tvar rootBounds = this.getVertexBounds(this.root);\n\tthis.centerX = rootBounds.x + rootBounds.width / 2;\n\tthis.centerY = rootBounds.y + rootBounds.height / 2;\n\n\t// Calculate the bounds of the involved vertices directly from the values set in the compact tree\n\tfor (var vertex in this.visited)\n\t{\n\t\tvar vertexBounds = this.getVertexBounds(this.visited[vertex]);\n\t\tbounds = (bounds != null) ? bounds : vertexBounds.clone();\n\t\tbounds.add(vertexBounds);\n\t}\n\t\n\tthis.calcRowDims([this.node], 0);\n\t\n\tvar maxLeftGrad = 0;\n\tvar maxRightGrad = 0;\n\n\t// Find the steepest left and right gradients\n\tfor (var i = 0; i < this.row.length; i++)\n\t{\n\t\tvar leftGrad = (this.centerX - this.rowMinX[i] - this.nodeDistance) / this.rowRadi[i];\n\t\tvar rightGrad = (this.rowMaxX[i] - this.centerX - this.nodeDistance) / this.rowRadi[i];\n\t\t\n\t\tmaxLeftGrad = Math.max (maxLeftGrad, leftGrad);\n\t\tmaxRightGrad = Math.max (maxRightGrad, rightGrad);\n\t}\n\t\n\t// Extend out row so they meet the maximum gradient and convert to polar co-ords\n\tfor (var i = 0; i < this.row.length; i++)\n\t{\n\t\tvar xLeftLimit = this.centerX - this.nodeDistance - maxLeftGrad * this.rowRadi[i];\n\t\tvar xRightLimit = this.centerX + this.nodeDistance + maxRightGrad * this.rowRadi[i];\n\t\tvar fullWidth = xRightLimit - xLeftLimit;\n\t\t\n\t\tfor (var j = 0; j < this.row[i].length; j ++)\n\t\t{\n\t\t\tvar row = this.row[i];\n\t\t\tvar node = row[j];\n\t\t\tvar vertexBounds = this.getVertexBounds(node.cell);\n\t\t\tvar xProportion = (vertexBounds.x + vertexBounds.width / 2 - xLeftLimit) / (fullWidth);\n\t\t\tvar theta =  2 * Math.PI * xProportion;\n\t\t\tnode.theta = theta;\n\t\t}\n\t}\n\n\t// Post-process from outside inwards to try to align parents with children\n\tfor (var i = this.row.length - 2; i >= 0; i--)\n\t{\n\t\tvar row = this.row[i];\n\t\t\n\t\tfor (var j = 0; j < row.length; j++)\n\t\t{\n\t\t\tvar node = row[j];\n\t\t\tvar child = node.child;\n\t\t\tvar counter = 0;\n\t\t\tvar totalTheta = 0;\n\t\t\t\n\t\t\twhile (child != null)\n\t\t\t{\n\t\t\t\ttotalTheta += child.theta;\n\t\t\t\tcounter++;\n\t\t\t\tchild = child.next;\n\t\t\t}\n\t\t\t\n\t\t\tif (counter > 0)\n\t\t\t{\n\t\t\t\tvar averTheta = totalTheta / counter;\n\t\t\t\t\n\t\t\t\tif (averTheta > node.theta && j < row.length - 1)\n\t\t\t\t{\n\t\t\t\t\tvar nextTheta = row[j+1].theta;\n\t\t\t\t\tnode.theta = Math.min (averTheta, nextTheta - Math.PI/10);\n\t\t\t\t}\n\t\t\t\telse if (averTheta < node.theta && j > 0 )\n\t\t\t\t{\n\t\t\t\t\tvar lastTheta = row[j-1].theta;\n\t\t\t\t\tnode.theta = Math.max (averTheta, lastTheta + Math.PI/10);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Set locations\n\tfor (var i = 0; i < this.row.length; i++)\n\t{\n\t\tfor (var j = 0; j < this.row[i].length; j ++)\n\t\t{\n\t\t\tvar row = this.row[i];\n\t\t\tvar node = row[j];\n\t\t\tvar vertexBounds = this.getVertexBounds(node.cell);\n\t\t\tthis.setVertexLocation(node.cell,\n\t\t\t\t\t\t\t\t\tthis.centerX - vertexBounds.width / 2 + this.rowRadi[i] * Math.cos(node.theta),\n\t\t\t\t\t\t\t\t\tthis.centerY - vertexBounds.height / 2 + this.rowRadi[i] * Math.sin(node.theta));\n\t\t}\n\t}\n};\n\n/**\n * Function: calcRowDims\n * \n * Recursive function to calculate the dimensions of each row\n * \n * Parameters:\n * \n * row - Array of internal nodes, the children of which are to be processed.\n * rowNum - Integer indicating which row is being processed.\n */\nmxRadialTreeLayout.prototype.calcRowDims = function(row, rowNum)\n{\n\tif (row == null || row.length == 0)\n\t{\n\t\treturn;\n\t}\n\n\t// Place root's children proportionally around the first level\n\tthis.rowMinX[rowNum] = this.centerX;\n\tthis.rowMaxX[rowNum] = this.centerX;\n\tthis.rowMinCenX[rowNum] = this.centerX;\n\tthis.rowMaxCenX[rowNum] = this.centerX;\n\tthis.row[rowNum] = [];\n\n\tvar rowHasChildren = false;\n\n\tfor (var i = 0; i < row.length; i++)\n\t{\n\t\tvar child = row[i] != null ? row[i].child : null;\n\n\t\twhile (child != null)\n\t\t{\n\t\t\tvar cell = child.cell;\n\t\t\tvar vertexBounds = this.getVertexBounds(cell);\n\t\t\t\n\t\t\tthis.rowMinX[rowNum] = Math.min(vertexBounds.x, this.rowMinX[rowNum]);\n\t\t\tthis.rowMaxX[rowNum] = Math.max(vertexBounds.x + vertexBounds.width, this.rowMaxX[rowNum]);\n\t\t\tthis.rowMinCenX[rowNum] = Math.min(vertexBounds.x + vertexBounds.width / 2, this.rowMinCenX[rowNum]);\n\t\t\tthis.rowMaxCenX[rowNum] = Math.max(vertexBounds.x + vertexBounds.width / 2, this.rowMaxCenX[rowNum]);\n\t\t\tthis.rowRadi[rowNum] = vertexBounds.y - this.getVertexBounds(this.root).y;\n\t\n\t\t\tif (child.child != null)\n\t\t\t{\n\t\t\t\trowHasChildren = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.row[rowNum].push(child);\n\t\t\tchild = child.next;\n\t\t}\n\t}\n\t\n\tif (rowHasChildren)\n\t{\n\t\tthis.calcRowDims(this.row[rowNum], rowNum + 1);\n\t}\n};\n\n__mxOutput.mxRadialTreeLayout = typeof mxRadialTreeLayout !== 'undefined' ? mxRadialTreeLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxFastOrganicLayout\n * \n * Extends <mxGraphLayout> to implement a fast organic layout algorithm.\n * The vertices need to be connected for this layout to work, vertices\n * with no connections are ignored.\n * \n * Example:\n * \n * (code)\n * var layout = new mxFastOrganicLayout(graph);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxCompactTreeLayout\n * \n * Constructs a new fast organic layout for the specified graph.\n */\nfunction mxFastOrganicLayout(graph)\n{\n\tmxGraphLayout.call(this, graph);\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxFastOrganicLayout.prototype = new mxGraphLayout();\nmxFastOrganicLayout.prototype.constructor = mxFastOrganicLayout;\n\n/**\n * Variable: useInputOrigin\n * \n * Specifies if the top left corner of the input cells should be the origin\n * of the layout result. Default is true.\n */\nmxFastOrganicLayout.prototype.useInputOrigin = true;\n\n/**\n * Variable: resetEdges\n * \n * Specifies if all edge points of traversed edges should be removed.\n * Default is true.\n */\nmxFastOrganicLayout.prototype.resetEdges = true;\n\n/**\n * Variable: disableEdgeStyle\n * \n * Specifies if the STYLE_NOEDGESTYLE flag should be set on edges that are\n * modified by the result. Default is true.\n */\nmxFastOrganicLayout.prototype.disableEdgeStyle = true;\n\n/**\n * Variable: forceConstant\n * \n * The force constant by which the attractive forces are divided and the\n * replusive forces are multiple by the square of. The value equates to the\n * average radius there is of free space around each node. Default is 50.\n */\nmxFastOrganicLayout.prototype.forceConstant = 50;\n\n/**\n * Variable: forceConstantSquared\n * \n * Cache of <forceConstant>^2 for performance.\n */\nmxFastOrganicLayout.prototype.forceConstantSquared = 0;\n\n/**\n * Variable: minDistanceLimit\n * \n * Minimal distance limit. Default is 2. Prevents of\n * dividing by zero.\n */\nmxFastOrganicLayout.prototype.minDistanceLimit = 2;\n\n/**\n * Variable: maxDistanceLimit\n * \n * Maximal distance limit. Default is 500. Prevents of\n * dividing by zero.\n */\nmxFastOrganicLayout.prototype.maxDistanceLimit = 500;\n\n/**\n * Variable: minDistanceLimitSquared\n * \n * Cached version of <minDistanceLimit> squared.\n */\nmxFastOrganicLayout.prototype.minDistanceLimitSquared = 4;\n\n/**\n * Variable: initialTemp\n * \n * Start value of temperature. Default is 200.\n */\nmxFastOrganicLayout.prototype.initialTemp = 200;\n\n/**\n * Variable: temperature\n * \n * Temperature to limit displacement at later stages of layout.\n */\nmxFastOrganicLayout.prototype.temperature = 0;\n\n/**\n * Variable: maxIterations\n * \n * Total number of iterations to run the layout though.\n */\nmxFastOrganicLayout.prototype.maxIterations = 0;\n\n/**\n * Variable: iteration\n * \n * Current iteration count.\n */\nmxFastOrganicLayout.prototype.iteration = 0;\n\n/**\n * Variable: vertexArray\n * \n * An array of all vertices to be laid out.\n */\nmxFastOrganicLayout.prototype.vertexArray;\n\n/**\n * Variable: dispX\n * \n * An array of locally stored X co-ordinate displacements for the vertices.\n */\nmxFastOrganicLayout.prototype.dispX;\n\n/**\n * Variable: dispY\n * \n * An array of locally stored Y co-ordinate displacements for the vertices.\n */\nmxFastOrganicLayout.prototype.dispY;\n\n/**\n * Variable: cellLocation\n * \n * An array of locally stored co-ordinate positions for the vertices.\n */\nmxFastOrganicLayout.prototype.cellLocation;\n\n/**\n * Variable: radius\n * \n * The approximate radius of each cell, nodes only.\n */\nmxFastOrganicLayout.prototype.radius;\n\n/**\n * Variable: radiusSquared\n * \n * The approximate radius squared of each cell, nodes only.\n */\nmxFastOrganicLayout.prototype.radiusSquared;\n\n/**\n * Variable: isMoveable\n * \n * Array of booleans representing the movable states of the vertices.\n */\nmxFastOrganicLayout.prototype.isMoveable;\n\n/**\n * Variable: neighbours\n * \n * Local copy of cell neighbours.\n */\nmxFastOrganicLayout.prototype.neighbours;\n\n/**\n * Variable: indices\n * \n * Hashtable from cells to local indices.\n */\nmxFastOrganicLayout.prototype.indices;\n\n/**\n * Variable: allowedToRun\n * \n * Boolean flag that specifies if the layout is allowed to run. If this is\n * set to false, then the layout exits in the following iteration.\n */\nmxFastOrganicLayout.prototype.allowedToRun = true;\n\n/**\n * Function: isVertexIgnored\n * \n * Returns a boolean indicating if the given <mxCell> should be ignored as a\n * vertex. This returns true if the cell has no connections.\n * \n * Parameters:\n * \n * vertex - <mxCell> whose ignored state should be returned.\n */\nmxFastOrganicLayout.prototype.isVertexIgnored = function(vertex)\n{\n\treturn mxGraphLayout.prototype.isVertexIgnored.apply(this, arguments) ||\n\t\tthis.graph.getConnections(vertex).length == 0;\n};\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>. This operates on all children of the\n * given parent where <isVertexIgnored> returns false.\n */\nmxFastOrganicLayout.prototype.execute = function(parent)\n{\n\tvar model = this.graph.getModel();\n\tthis.vertexArray = [];\n\tvar cells = this.graph.getChildVertices(parent);\n\t\n\tfor (var i = 0; i < cells.length; i++)\n\t{\n\t\tif (!this.isVertexIgnored(cells[i]))\n\t\t{\n\t\t\tthis.vertexArray.push(cells[i]);\n\t\t}\n\t}\n\t\n\tvar initialBounds = (this.useInputOrigin) ?\n\t\t\tthis.graph.getBoundingBoxFromGeometry(this.vertexArray) :\n\t\t\t\tnull;\n\tvar n = this.vertexArray.length;\n\n\tthis.indices = [];\n\tthis.dispX = [];\n\tthis.dispY = [];\n\tthis.cellLocation = [];\n\tthis.isMoveable = [];\n\tthis.neighbours = [];\n\tthis.radius = [];\n\tthis.radiusSquared = [];\n\n\tif (this.forceConstant < 0.001)\n\t{\n\t\tthis.forceConstant = 0.001;\n\t}\n\n\tthis.forceConstantSquared = this.forceConstant * this.forceConstant;\n\n\t// Create a map of vertices first. This is required for the array of\n\t// arrays called neighbours which holds, for each vertex, a list of\n\t// ints which represents the neighbours cells to that vertex as\n\t// the indices into vertexArray\n\tfor (var i = 0; i < this.vertexArray.length; i++)\n\t{\n\t\tvar vertex = this.vertexArray[i];\n\t\tthis.cellLocation[i] = [];\n\t\t\n\t\t// Set up the mapping from array indices to cells\n\t\tvar id = mxObjectIdentity.get(vertex);\n\t\tthis.indices[id] = i;\n\t\tvar bounds = this.getVertexBounds(vertex);\n\n\t\t// Set the X,Y value of the internal version of the cell to\n\t\t// the center point of the vertex for better positioning\n\t\tvar width = bounds.width;\n\t\tvar height = bounds.height;\n\t\t\n\t\t// Randomize (0, 0) locations\n\t\tvar x = bounds.x;\n\t\tvar y = bounds.y;\n\t\t\n\t\tthis.cellLocation[i][0] = x + width / 2.0;\n\t\tthis.cellLocation[i][1] = y + height / 2.0;\n\t\tthis.radius[i] = Math.min(width, height);\n\t\tthis.radiusSquared[i] = this.radius[i] * this.radius[i];\n\t}\n\n\t// Moves cell location back to top-left from center locations used in\n\t// algorithm, resetting the edge points is part of the transaction\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tfor (var i = 0; i < n; i++)\n\t\t{\n\t\t\tthis.dispX[i] = 0;\n\t\t\tthis.dispY[i] = 0;\n\t\t\tthis.isMoveable[i] = this.isVertexMovable(this.vertexArray[i]);\n\n\t\t\t// Get lists of neighbours to all vertices, translate the cells\n\t\t\t// obtained in indices into vertexArray and store as an array\n\t\t\t// against the orginial cell index\n\t\t\tvar edges = this.graph.getConnections(this.vertexArray[i], parent);\n\t\t\tvar cells = this.graph.getOpposites(edges, this.vertexArray[i]);\n\t\t\tthis.neighbours[i] = [];\n\n\t\t\tfor (var j = 0; j < cells.length; j++)\n\t\t\t{\n\t\t\t\t// Resets the points on the traversed edge\n\t\t\t\tif (this.resetEdges)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.resetEdge(edges[j]);\n\t\t\t\t}\n\n\t\t\t    if (this.disableEdgeStyle)\n\t\t\t    {\n\t\t\t    \tthis.setEdgeStyleEnabled(edges[j], false);\n\t\t\t    }\n\n\t\t\t\t// Looks the cell up in the indices dictionary\n\t\t\t\tvar id = mxObjectIdentity.get(cells[j]);\n\t\t\t\tvar index = this.indices[id];\n\n\t\t\t\t// Check the connected cell in part of the vertex list to be\n\t\t\t\t// acted on by this layout\n\t\t\t\tif (index != null)\n\t\t\t\t{\n\t\t\t\t\tthis.neighbours[i][j] = index;\n\t\t\t\t}\n\n\t\t\t\t// Else if index of the other cell doesn't correspond to\n\t\t\t\t// any cell listed to be acted upon in this layout. Set\n\t\t\t\t// the index to the value of this vertex (a dummy self-loop)\n\t\t\t\t// so the attraction force of the edge is not calculated\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.neighbours[i][j] = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.temperature = this.initialTemp;\n\n\t\t// If max number of iterations has not been set, guess it\n\t\tif (this.maxIterations == 0)\n\t\t{\n\t\t\tthis.maxIterations = 20 * Math.sqrt(n);\n\t\t}\n\t\t\n\t\t// Main iteration loop\n\t\tfor (this.iteration = 0; this.iteration < this.maxIterations; this.iteration++)\n\t\t{\n\t\t\tif (!this.allowedToRun)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Calculate repulsive forces on all vertices\n\t\t\tthis.calcRepulsion();\n\n\t\t\t// Calculate attractive forces through edges\n\t\t\tthis.calcAttraction();\n\n\t\t\tthis.calcPositions();\n\t\t\tthis.reduceTemperature();\n\t\t}\n\n\t\tvar minx = null;\n\t\tvar miny = null;\n\t\t\n\t\tfor (var i = 0; i < this.vertexArray.length; i++)\n\t\t{\n\t\t\tvar vertex = this.vertexArray[i];\n\t\t\t\n\t\t\tif (this.isVertexMovable(vertex))\n\t\t\t{\n\t\t\t\tvar bounds = this.getVertexBounds(vertex);\n\t\t\t\t\n\t\t\t\tif (bounds != null)\n\t\t\t\t{\n\t\t\t\t\tthis.cellLocation[i][0] -= bounds.width / 2.0;\n\t\t\t\t\tthis.cellLocation[i][1] -= bounds.height / 2.0;\n\t\t\t\t\t\n\t\t\t\t\tvar x = this.graph.snap(Math.round(this.cellLocation[i][0]));\n\t\t\t\t\tvar y = this.graph.snap(Math.round(this.cellLocation[i][1]));\n\t\t\t\t\t\n\t\t\t\t\tthis.setVertexLocation(vertex, x, y);\n\t\t\t\t\t\n\t\t\t\t\tif (minx == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tminx = x;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tminx = Math.min(minx, x);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (miny == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tminy = y;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tminy = Math.min(miny, y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Modifies the cloned geometries in-place. Not needed\n\t\t// to clone the geometries again as we're in the same\n\t\t// undoable change.\n\t\tvar dx = -(minx || 0) + 1;\n\t\tvar dy = -(miny || 0) + 1;\n\t\t\n\t\tif (initialBounds != null)\n\t\t{\n\t\t\tdx += initialBounds.x;\n\t\t\tdy += initialBounds.y;\n\t\t}\n\t\t\n\t\tthis.graph.moveCells(this.vertexArray, dx, dy);\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n};\n\n/**\n * Function: calcPositions\n * \n * Takes the displacements calculated for each cell and applies them to the\n * local cache of cell positions. Limits the displacement to the current\n * temperature.\n */\nmxFastOrganicLayout.prototype.calcPositions = function()\n{\n\tfor (var index = 0; index < this.vertexArray.length; index++)\n\t{\n\t\tif (this.isMoveable[index])\n\t\t{\n\t\t\t// Get the distance of displacement for this node for this\n\t\t\t// iteration\n\t\t\tvar deltaLength = Math.sqrt(this.dispX[index] * this.dispX[index] +\n\t\t\t\tthis.dispY[index] * this.dispY[index]);\n\n\t\t\tif (deltaLength < 0.001)\n\t\t\t{\n\t\t\t\tdeltaLength = 0.001;\n\t\t\t}\n\n\t\t\t// Scale down by the current temperature if less than the\n\t\t\t// displacement distance\n\t\t\tvar newXDisp = this.dispX[index] / deltaLength\n\t\t\t\t* Math.min(deltaLength, this.temperature);\n\n\t\t\tvar newYDisp = this.dispY[index] / deltaLength\n\t\t\t\t* Math.min(deltaLength, this.temperature);\n\n\t\t\t// reset displacements\n\t\t\tthis.dispX[index] = 0;\n\t\t\tthis.dispY[index] = 0;\n\n\t\t\t// Update the cached cell locations\n\t\t\tthis.cellLocation[index][0] += newXDisp;\n\t\t\tthis.cellLocation[index][1] += newYDisp;\n\t\t}\n\t}\n};\n\n/**\n * Function: calcAttraction\n * \n * Calculates the attractive forces between all laid out nodes linked by\n * edges\n */\nmxFastOrganicLayout.prototype.calcAttraction = function()\n{\n\t// Check the neighbours of each vertex and calculate the attractive\n\t// force of the edge connecting them\n\tfor (var i = 0; i < this.vertexArray.length; i++)\n\t{\n\t\tfor (var k = 0; k < this.neighbours[i].length; k++)\n\t\t{\n\t\t\t// Get the index of the othe cell in the vertex array\n\t\t\tvar j = this.neighbours[i][k];\n\t\t\t\n\t\t\t// Do not proceed self-loops\n\t\t\tif (i != j &&\n\t\t\t\tthis.isMoveable[i] &&\n\t\t\t\tthis.isMoveable[j])\n\t\t\t{\n\t\t\t\tvar xDelta = this.cellLocation[i][0] - this.cellLocation[j][0];\n\t\t\t\tvar yDelta = this.cellLocation[i][1] - this.cellLocation[j][1];\n\n\t\t\t\t// The distance between the nodes\n\t\t\t\tvar deltaLengthSquared = xDelta * xDelta + yDelta\n\t\t\t\t\t\t* yDelta - this.radiusSquared[i] - this.radiusSquared[j];\n\n\t\t\t\tif (deltaLengthSquared < this.minDistanceLimitSquared)\n\t\t\t\t{\n\t\t\t\t\tdeltaLengthSquared = this.minDistanceLimitSquared;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar deltaLength = Math.sqrt(deltaLengthSquared);\n\t\t\t\tvar force = (deltaLengthSquared) / this.forceConstant;\n\n\t\t\t\tvar displacementX = (xDelta / deltaLength) * force;\n\t\t\t\tvar displacementY = (yDelta / deltaLength) * force;\n\t\t\t\t\n\t\t\t\tthis.dispX[i] -= displacementX;\n\t\t\t\tthis.dispY[i] -= displacementY;\n\t\t\t\t\n\t\t\t\tthis.dispX[j] += displacementX;\n\t\t\t\tthis.dispY[j] += displacementY;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: calcRepulsion\n * \n * Calculates the repulsive forces between all laid out nodes\n */\nmxFastOrganicLayout.prototype.calcRepulsion = function()\n{\n\tvar vertexCount = this.vertexArray.length;\n\n\tfor (var i = 0; i < vertexCount; i++)\n\t{\n\t\tfor (var j = i; j < vertexCount; j++)\n\t\t{\n\t\t\t// Exits if the layout is no longer allowed to run\n\t\t\tif (!this.allowedToRun)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (j != i &&\n\t\t\t\tthis.isMoveable[i] &&\n\t\t\t\tthis.isMoveable[j])\n\t\t\t{\n\t\t\t\tvar xDelta = this.cellLocation[i][0] - this.cellLocation[j][0];\n\t\t\t\tvar yDelta = this.cellLocation[i][1] - this.cellLocation[j][1];\n\n\t\t\t\tif (xDelta == 0)\n\t\t\t\t{\n\t\t\t\t\txDelta = 0.01 + Math.random();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (yDelta == 0)\n\t\t\t\t{\n\t\t\t\t\tyDelta = 0.01 + Math.random();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Distance between nodes\n\t\t\t\tvar deltaLength = Math.sqrt((xDelta * xDelta)\n\t\t\t\t\t\t+ (yDelta * yDelta));\n\t\t\t\tvar deltaLengthWithRadius = deltaLength - this.radius[i]\n\t\t\t\t\t\t- this.radius[j];\n\n\t\t\t\tif (deltaLengthWithRadius > this.maxDistanceLimit)\n\t\t\t\t{\n\t\t\t\t\t// Ignore vertices too far apart\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (deltaLengthWithRadius < this.minDistanceLimit)\n\t\t\t\t{\n\t\t\t\t\tdeltaLengthWithRadius = this.minDistanceLimit;\n\t\t\t\t}\n\n\t\t\t\tvar force = this.forceConstantSquared / deltaLengthWithRadius;\n\n\t\t\t\tvar displacementX = (xDelta / deltaLength) * force;\n\t\t\t\tvar displacementY = (yDelta / deltaLength) * force;\n\t\t\t\t\n\t\t\t\tthis.dispX[i] += displacementX;\n\t\t\t\tthis.dispY[i] += displacementY;\n\n\t\t\t\tthis.dispX[j] -= displacementX;\n\t\t\t\tthis.dispY[j] -= displacementY;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: reduceTemperature\n * \n * Reduces the temperature of the layout from an initial setting in a linear\n * fashion to zero.\n */\nmxFastOrganicLayout.prototype.reduceTemperature = function()\n{\n\tthis.temperature = this.initialTemp * (1.0 - this.iteration / this.maxIterations);\n};\n\n__mxOutput.mxFastOrganicLayout = typeof mxFastOrganicLayout !== 'undefined' ? mxFastOrganicLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCircleLayout\n * \n * Extends <mxGraphLayout> to implement a circluar layout for a given radius.\n * The vertices do not need to be connected for this layout to work and all\n * connections between vertices are not taken into account.\n * \n * Example:\n * \n * (code)\n * var layout = new mxCircleLayout(graph);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxCircleLayout\n *\n * Constructs a new circular layout for the specified radius.\n *\n * Arguments:\n * \n * graph - <mxGraph> that contains the cells.\n * radius - Optional radius as an int. Default is 100.\n */\nfunction mxCircleLayout(graph, radius)\n{\n\tmxGraphLayout.call(this, graph);\n\tthis.radius = (radius != null) ? radius : 100;\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxCircleLayout.prototype = new mxGraphLayout();\nmxCircleLayout.prototype.constructor = mxCircleLayout;\n\n/**\n * Variable: radius\n * \n * Integer specifying the size of the radius. Default is 100.\n */\nmxCircleLayout.prototype.radius = null;\n\n/**\n * Variable: moveCircle\n * \n * Boolean specifying if the circle should be moved to the top,\n * left corner specified by <x0> and <y0>. Default is false.\n */\nmxCircleLayout.prototype.moveCircle = false;\n\n/**\n * Variable: x0\n * \n * Integer specifying the left coordinate of the circle.\n * Default is 0.\n */\nmxCircleLayout.prototype.x0 = 0;\n\n/**\n * Variable: y0\n * \n * Integer specifying the top coordinate of the circle.\n * Default is 0.\n */\nmxCircleLayout.prototype.y0 = 0;\n\n/**\n * Variable: resetEdges\n * \n * Specifies if all edge points of traversed edges should be removed.\n * Default is true.\n */\nmxCircleLayout.prototype.resetEdges = true;\n\n/**\n * Variable: disableEdgeStyle\n * \n * Specifies if the STYLE_NOEDGESTYLE flag should be set on edges that are\n * modified by the result. Default is true.\n */\nmxCircleLayout.prototype.disableEdgeStyle = true;\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>.\n */\nmxCircleLayout.prototype.execute = function(parent)\n{\n\tvar model = this.graph.getModel();\n\n\t// Moves the vertices to build a circle. Makes sure the\n\t// radius is large enough for the vertices to not\n\t// overlap\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\t// Gets all vertices inside the parent and finds\n\t\t// the maximum dimension of the largest vertex\n\t\tvar max = 0;\n\t\tvar top = null;\n\t\tvar left = null;\n\t\tvar vertices = [];\n\t\tvar childCount = model.getChildCount(parent);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar cell = model.getChildAt(parent, i);\n\t\t\t\n\t\t\tif (!this.isVertexIgnored(cell))\n\t\t\t{\n\t\t\t\tvertices.push(cell);\n\t\t\t\tvar bounds = this.getVertexBounds(cell);\n\t\t\t\t\n\t\t\t\tif (top == null)\n\t\t\t\t{\n\t\t\t\t\ttop = bounds.y;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttop = Math.min(top, bounds.y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (left == null)\n\t\t\t\t{\n\t\t\t\t\tleft = bounds.x;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tleft = Math.min(left, bounds.x);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmax = Math.max(max, Math.max(bounds.width, bounds.height));\n\t\t\t}\n\t\t\telse if (!this.isEdgeIgnored(cell))\n\t\t\t{\n\t\t\t\t// Resets the points on the traversed edge\n\t\t\t\tif (this.resetEdges)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.resetEdge(cell);\n\t\t\t\t}\n\n\t\t\t    if (this.disableEdgeStyle)\n\t\t\t    {\n\t\t\t    \t\tthis.setEdgeStyleEnabled(cell, false);\n\t\t\t    }\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar r = this.getRadius(vertices.length, max);\n\n\t\t// Moves the circle to the specified origin\n\t\tif (this.moveCircle)\n\t\t{\n\t\t\tleft = this.x0;\n\t\t\ttop = this.y0;\n\t\t}\n\t\t\n\t\tthis.circle(vertices, r, left, top);\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n};\n\n/**\n * Function: getRadius\n * \n * Returns the radius to be used for the given vertex count. Max is the maximum\n * width or height of all vertices in the layout.\n */\nmxCircleLayout.prototype.getRadius = function(count, max)\n{\n\treturn Math.max(count * max / Math.PI, this.radius);\n};\n\n/**\n * Function: circle\n * \n * Executes the circular layout for the specified array\n * of vertices and the given radius. This is called from\n * <execute>.\n */\nmxCircleLayout.prototype.circle = function(vertices, r, left, top)\n{\n\tvar vertexCount = vertices.length;\n\tvar phi = 2 * Math.PI / vertexCount;\n\t\n\tfor (var i = 0; i < vertexCount; i++)\n\t{\n\t\tif (this.isVertexMovable(vertices[i]))\n\t\t{\n\t\t\tthis.setVertexLocation(vertices[i],\n\t\t\t\tMath.round(left + r + r * Math.sin(i * phi)),\n\t\t\t\tMath.round(top + r + r * Math.cos(i * phi)));\n\t\t}\n\t}\n};\n\n__mxOutput.mxCircleLayout = typeof mxCircleLayout !== 'undefined' ? mxCircleLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxParallelEdgeLayout\n * \n * Extends <mxGraphLayout> for arranging parallel edges. This layout works\n * on edges for all pairs of vertices where there is more than one edge\n * connecting the latter.\n * \n * Example:\n * \n * (code)\n * var layout = new mxParallelEdgeLayout(graph);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * To run the layout for the parallel edges of a changed edge only, the\n * following code can be used.\n * \n * (code)\n * var layout = new mxParallelEdgeLayout(graph);\n * \n * graph.addListener(mxEvent.CELL_CONNECTED, function(sender, evt)\n * {\n *   var model = graph.getModel();\n *   var edge = evt.getProperty('edge');\n *   var src = model.getTerminal(edge, true);\n *   var trg = model.getTerminal(edge, false);\n *   \n *   layout.isEdgeIgnored = function(edge2)\n *   {\n *     var src2 = model.getTerminal(edge2, true);\n *     var trg2 = model.getTerminal(edge2, false);\n *     \n *     return !(model.isEdge(edge2) && ((src == src2 && trg == trg2) || (src == trg2 && trg == src2)));\n *   };\n *   \n *   layout.execute(graph.getDefaultParent());\n * });\n * (end)\n * \n * Constructor: mxParallelEdgeLayout\n * \n * Constructs a new parallel edge layout for the specified graph.\n */\nfunction mxParallelEdgeLayout(graph)\n{\n\tmxGraphLayout.call(this, graph);\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxParallelEdgeLayout.prototype = new mxGraphLayout();\nmxParallelEdgeLayout.prototype.constructor = mxParallelEdgeLayout;\n\n/**\n * Variable: spacing\n * \n * Defines the spacing between the parallels. Default is 20.\n */\nmxParallelEdgeLayout.prototype.spacing = 20;\n\n/**\n * Variable: checkOverlap\n * \n * Specifies if only overlapping edges should be considered\n * parallel. Default is false.\n */\nmxParallelEdgeLayout.prototype.checkOverlap = false;\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>.\n */\nmxParallelEdgeLayout.prototype.execute = function(parent, cells)\n{\n\tvar lookup = this.findParallels(parent, cells);\n\t\n\tthis.graph.model.beginUpdate();\t\n\ttry\n\t{\n\t\tfor (var i in lookup)\n\t\t{\n\t\t\tvar parallels = lookup[i];\n\n\t\t\tif (parallels.length > 1)\n\t\t\t{\n\t\t\t\tthis.layout(parallels);\n\t\t\t}\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tthis.graph.model.endUpdate();\n\t}\n};\n\n/**\n * Function: findParallels\n * \n * Finds the parallel edges in the given parent.\n */\nmxParallelEdgeLayout.prototype.findParallels = function(parent, cells)\n{\n\tvar lookup = [];\n\t\n\tvar addCell = mxUtils.bind(this, function(cell)\n\t{\n\t\tif (!this.isEdgeIgnored(cell))\n\t\t{\n\t\t\tvar id = this.getEdgeId(cell);\n\t\t\t\n\t\t\tif (id != null)\n\t\t\t{\n\t\t\t\tif (lookup[id] == null)\n\t\t\t\t{\n\t\t\t\t\tlookup[id] = [];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlookup[id].push(cell);\n\t\t\t}\n\t\t}\n\t});\n\t\n\tif (cells != null)\n\t{\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\taddCell(cells[i]);\n\t\t}\n\t}\n\telse\n\t{\n\t\tvar model = this.graph.getModel();\n\t\tvar childCount = model.getChildCount(parent);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\taddCell(model.getChildAt(parent, i));\n\t\t}\n\t}\n\t\n\treturn lookup;\n};\n\n/**\n * Function: getEdgeId\n * \n * Returns a unique ID for the given edge. The id is independent of the\n * edge direction and is built using the visible terminal of the given\n * edge.\n */\nmxParallelEdgeLayout.prototype.getEdgeId = function(edge)\n{\n\tvar view = this.graph.getView();\n\t\n\t// Cannot used cached visible terminal because this could be triggered in BEFORE_UNDO\n\tvar src = view.getVisibleTerminal(edge, true);\n\tvar trg = view.getVisibleTerminal(edge, false);\n\tvar pts = '';\n\n\tif (src != null && trg != null)\n\t{\n\t\tsrc = mxObjectIdentity.get(src);\n\t\ttrg = mxObjectIdentity.get(trg);\n\t\t\n\t\tif (this.checkOverlap)\n\t\t{\n\t\t\tvar state = this.graph.view.getState(edge);\n\t\t\t\n\t\t\tif (state != null && state.absolutePoints != null)\n\t\t\t{\n\t\t\t\tvar tmp = [];\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < state.absolutePoints.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar pt = state.absolutePoints[i];\n\t\t\t\t\t\n\t\t\t\t\tif (pt != null)\n\t\t\t\t\t{\n\t\t\t\t\t\ttmp.push(pt.x, pt.y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpts = tmp.join(',');\n\t\t\t}\n\t\t};\n\t\t\n\t\treturn ((src > trg) ? trg + '-' + src : src + '-' + trg) + pts;\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: layout\n * \n * Lays out the parallel edges in the given array.\n */\nmxParallelEdgeLayout.prototype.layout = function(parallels)\n{\n\tvar edge = parallels[0];\n\tvar view = this.graph.getView();\n\tvar model = this.graph.getModel();\n\tvar src = model.getGeometry(view.getVisibleTerminal(edge, true));\n\tvar trg = model.getGeometry(view.getVisibleTerminal(edge, false));\n\t\n\t// Routes multiple loops\n\tif (src == trg)\n\t{\n\t\tvar x0 = src.x + src.width + this.spacing;\n\t\tvar y0 = src.y + src.height / 2;\n\n\t\tfor (var i = 0; i < parallels.length; i++)\n\t\t{\n\t\t\tthis.route(parallels[i], x0, y0);\n\t\t\tx0 += this.spacing;\n\t\t}\n\t}\n\telse if (src != null && trg != null)\n\t{\n\t\t// Routes parallel edges\n\t\tvar scx = src.x + src.width / 2;\n\t\tvar scy = src.y + src.height / 2;\n\t\t\n\t\tvar tcx = trg.x + trg.width / 2;\n\t\tvar tcy = trg.y + trg.height / 2;\n\t\t\n\t\tvar dx = tcx - scx;\n\t\tvar dy = tcy - scy;\n\n\t\tvar len = Math.sqrt(dx * dx + dy * dy);\n\t\t\n\t\tif (len > 0)\n\t\t{\n\t\t\tvar x0 = scx + dx / 2;\n\t\t\tvar y0 = scy + dy / 2;\n\t\t\t\n\t\t\tvar nx = dy * this.spacing / len;\n\t\t\tvar ny = dx * this.spacing / len;\n\t\t\t\n\t\t\tx0 += nx * (parallels.length - 1) / 2;\n\t\t\ty0 -= ny * (parallels.length - 1) / 2;\n\t\n\t\t\tfor (var i = 0; i < parallels.length; i++)\n\t\t\t{\n\t\t\t\tthis.route(parallels[i], x0, y0);\n\t\t\t\tx0 -= nx;\n\t\t\t\ty0 += ny;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: route\n * \n * Routes the given edge via the given point.\n */\nmxParallelEdgeLayout.prototype.route = function(edge, x, y)\n{\n\tif (this.graph.isCellMovable(edge))\n\t{\n\t\tthis.setEdgePoints(edge, [new mxPoint(x, y)]);\n\t}\n};\n\n__mxOutput.mxParallelEdgeLayout = typeof mxParallelEdgeLayout !== 'undefined' ? mxParallelEdgeLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCompositeLayout\n * \n * Allows to compose multiple layouts into a single layout. The master layout\n * is the layout that handles move operations if another layout than the first\n * element in <layouts> should be used. The <master> layout is not executed as\n * the code assumes that it is part of <layouts>.\n * \n * Example:\n * (code)\n * var first = new mxFastOrganicLayout(graph);\n * var second = new mxParallelEdgeLayout(graph);\n * var layout = new mxCompositeLayout(graph, [first, second], first);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxCompositeLayout\n *\n * Constructs a new layout using the given layouts. The graph instance is\n * required for creating the transaction that contains all layouts.\n *\n * Arguments:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * layouts - Array of <mxGraphLayouts>.\n * master - Optional layout that handles moves. If no layout is given then\n * the first layout of the above array is used to handle moves.\n */\nfunction mxCompositeLayout(graph, layouts, master)\n{\n\tmxGraphLayout.call(this, graph);\n\tthis.layouts = layouts;\n\tthis.master = master;\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxCompositeLayout.prototype = new mxGraphLayout();\nmxCompositeLayout.prototype.constructor = mxCompositeLayout;\n\t\n/**\n * Variable: layouts\n * \n * Holds the array of <mxGraphLayouts> that this layout contains.\n */\nmxCompositeLayout.prototype.layouts = null;\n\n/**\n * Variable: master\n * \n * Reference to the <mxGraphLayouts> that handles moves. If this is null\n * then the first layout in <layouts> is used.\n */\nmxCompositeLayout.prototype.master = null;\n\n/**\n * Function: moveCell\n * \n * Implements <mxGraphLayout.moveCell> by calling move on <master> or the first\n * layout in <layouts>.\n */\nmxCompositeLayout.prototype.moveCell = function(cell, x, y)\n{\n\tif (this.master != null)\n\t{\n\t\tthis.master.moveCell.apply(this.master, arguments);\n\t}\n\telse\n\t{\n\t\tthis.layouts[0].moveCell.apply(this.layouts[0], arguments);\n\t}\n};\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute> by executing all <layouts> in a\n * single transaction.\n */\nmxCompositeLayout.prototype.execute = function(parent)\n{\n\tvar model = this.graph.getModel();\n\t\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tfor (var i = 0; i < this.layouts.length; i++)\n\t\t{\n\t\t\tthis.layouts[i].execute.apply(this.layouts[i], arguments);\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n};\n\n__mxOutput.mxCompositeLayout = typeof mxCompositeLayout !== 'undefined' ? mxCompositeLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxEdgeLabelLayout\n * \n * Extends <mxGraphLayout> to implement an edge label layout. This layout\n * makes use of cell states, which means the graph must be validated in\n * a graph view (so that the label bounds are available) before this layout\n * can be executed.\n * \n * Example:\n * \n * (code)\n * var layout = new mxEdgeLabelLayout(graph);\n * layout.execute(graph.getDefaultParent());\n * (end)\n * \n * Constructor: mxEdgeLabelLayout\n *\n * Constructs a new edge label layout.\n *\n * Arguments:\n * \n * graph - <mxGraph> that contains the cells.\n */\nfunction mxEdgeLabelLayout(graph, radius)\n{\n\tmxGraphLayout.call(this, graph);\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxEdgeLabelLayout.prototype = new mxGraphLayout();\nmxEdgeLabelLayout.prototype.constructor = mxEdgeLabelLayout;\n\n/**\n * Function: execute\n * \n * Implements <mxGraphLayout.execute>.\n */\nmxEdgeLabelLayout.prototype.execute = function(parent)\n{\n\tvar view = this.graph.view;\n\tvar model = this.graph.getModel();\n\t\n\t// Gets all vertices and edges inside the parent\n\tvar edges = [];\n\tvar vertices = [];\n\tvar childCount = model.getChildCount(parent);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar cell = model.getChildAt(parent, i);\n\t\tvar state = view.getState(cell);\n\t\t\n\t\tif (state != null)\n\t\t{\n\t\t\tif (!this.isVertexIgnored(cell))\n\t\t\t{\n\t\t\t\tvertices.push(state);\n\t\t\t}\n\t\t\telse if (!this.isEdgeIgnored(cell))\n\t\t\t{\n\t\t\t\tedges.push(state);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tthis.placeLabels(vertices, edges);\n};\n\n/**\n * Function: placeLabels\n * \n * Places the labels of the given edges.\n */\nmxEdgeLabelLayout.prototype.placeLabels = function(v, e)\n{\n\tvar model = this.graph.getModel();\n\t\n\t// Moves the vertices to build a circle. Makes sure the\n\t// radius is large enough for the vertices to not\n\t// overlap\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tfor (var i = 0; i < e.length; i++)\n\t\t{\n\t\t\tvar edge = e[i];\n\t\t\t\n\t\t\tif (edge != null && edge.text != null &&\n\t\t\t\tedge.text.boundingBox != null)\n\t\t\t{\n\t\t\t\tfor (var j = 0; j < v.length; j++)\n\t\t\t\t{\n\t\t\t\t\tvar vertex = v[j];\n\t\t\t\t\t\n\t\t\t\t\tif (vertex != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.avoid(edge, vertex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n};\n\n/**\n * Function: avoid\n * \n * Places the labels of the given edges.\n */\nmxEdgeLabelLayout.prototype.avoid = function(edge, vertex)\n{\n\tvar model = this.graph.getModel();\n\tvar labRect = edge.text.boundingBox;\n\t\n\tif (mxUtils.intersects(labRect, vertex))\n\t{\n\t\tvar dy1 = -labRect.y - labRect.height + vertex.y;\n\t\tvar dy2 = -labRect.y + vertex.y + vertex.height;\n\t\t\n\t\tvar dy = (Math.abs(dy1) < Math.abs(dy2)) ? dy1 : dy2;\n\t\t\n\t\tvar dx1 = -labRect.x - labRect.width + vertex.x;\n\t\tvar dx2 = -labRect.x + vertex.x + vertex.width;\n\t\n\t\tvar dx = (Math.abs(dx1) < Math.abs(dx2)) ? dx1 : dx2;\n\t\t\n\t\tif (Math.abs(dx) < Math.abs(dy))\n\t\t{\n\t\t\tdy = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdx = 0;\n\t\t}\n\t\n\t\tvar g = model.getGeometry(edge.cell);\n\t\t\n\t\tif (g != null)\n\t\t{\n\t\t\tg = g.clone();\n\t\t\t\n\t\t\tif (g.offset != null)\n\t\t\t{\n\t\t\t\tg.offset.x += dx;\n\t\t\t\tg.offset.y += dy;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tg.offset = new mxPoint(dx, dy);\n\t\t\t}\n\t\t\t\n\t\t\tmodel.setGeometry(edge.cell, g);\n\t\t}\n\t}\n};\n\n__mxOutput.mxEdgeLabelLayout = typeof mxEdgeLabelLayout !== 'undefined' ? mxEdgeLabelLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraphAbstractHierarchyCell\n * \n * An abstraction of an internal hierarchy node or edge\n * \n * Constructor: mxGraphAbstractHierarchyCell\n *\n * Constructs a new hierarchical layout algorithm.\n */\nfunction mxGraphAbstractHierarchyCell()\n{\n\tthis.x = [];\n\tthis.y = [];\n\tthis.temp = [];\n};\n\n/**\n * Variable: maxRank\n * \n * The maximum rank this cell occupies. Default is -1.\n */\nmxGraphAbstractHierarchyCell.prototype.maxRank = -1;\n\n/**\n * Variable: minRank\n * \n * The minimum rank this cell occupies. Default is -1.\n */\nmxGraphAbstractHierarchyCell.prototype.minRank = -1;\n\n/**\n * Variable: x\n * \n * The x position of this cell for each layer it occupies\n */\nmxGraphAbstractHierarchyCell.prototype.x = null;\n\n/**\n * Variable: y\n * \n * The y position of this cell for each layer it occupies\n */\nmxGraphAbstractHierarchyCell.prototype.y = null;\n\n/**\n * Variable: width\n * \n * The width of this cell. Default is 0.\n */\nmxGraphAbstractHierarchyCell.prototype.width = 0;\n\n/**\n * Variable: height\n * \n * The height of this cell. Default is 0.\n */\nmxGraphAbstractHierarchyCell.prototype.height = 0;\n\n/**\n * Variable: nextLayerConnectedCells\n * \n * A cached version of the cells this cell connects to on the next layer up\n */\nmxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells = null;\n\n/**\n * Variable: previousLayerConnectedCells\n * \n * A cached version of the cells this cell connects to on the next layer down\n */\nmxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells = null;\n\n/**\n * Variable: temp\n * \n * Temporary variable for general use. Generally, try to avoid\n * carrying information between stages. Currently, the longest\n * path layering sets temp to the rank position in fixRanks()\n * and the crossing reduction uses this. This meant temp couldn't\n * be used for hashing the nodes in the model dfs and so hashCode\n * was created\n */\nmxGraphAbstractHierarchyCell.prototype.temp = null;\n\n/**\n * Function: getNextLayerConnectedCells\n * \n * Returns the cells this cell connects to on the next layer up\n */\nmxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells = function(layer)\n{\n\treturn null;\n};\n\n/**\n * Function: getPreviousLayerConnectedCells\n * \n * Returns the cells this cell connects to on the next layer down\n */\nmxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells = function(layer)\n{\n\treturn null;\n};\n\n/**\n * Function: isEdge\n * \n * Returns whether or not this cell is an edge\n */\nmxGraphAbstractHierarchyCell.prototype.isEdge = function()\n{\n\treturn false;\n};\n\n/**\n * Function: isVertex\n * \n * Returns whether or not this cell is a node\n */\nmxGraphAbstractHierarchyCell.prototype.isVertex = function()\n{\n\treturn false;\n};\n\n/**\n * Function: getGeneralPurposeVariable\n * \n * Gets the value of temp for the specified layer\n */\nmxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable = function(layer)\n{\n\treturn null;\n};\n\n/**\n * Function: setGeneralPurposeVariable\n * \n * Set the value of temp for the specified layer\n */\nmxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable = function(layer, value)\n{\n\treturn null;\n};\n\n/**\n * Function: setX\n * \n * Set the value of x for the specified layer\n */\nmxGraphAbstractHierarchyCell.prototype.setX = function(layer, value)\n{\n\tif (this.isVertex())\n\t{\n\t\tthis.x[0] = value;\n\t}\n\telse if (this.isEdge())\n\t{\n\t\tthis.x[layer - this.minRank - 1] = value;\n\t}\n};\n\n/**\n * Function: getX\n * \n * Gets the value of x on the specified layer\n */\nmxGraphAbstractHierarchyCell.prototype.getX = function(layer)\n{\n\tif (this.isVertex())\n\t{\n\t\treturn this.x[0];\n\t}\n\telse if (this.isEdge())\n\t{\n\t\treturn this.x[layer - this.minRank - 1];\n\t}\n\n\treturn 0.0;\n};\n\n/**\n * Function: setY\n * \n * Set the value of y for the specified layer\n */\nmxGraphAbstractHierarchyCell.prototype.setY = function(layer, value)\n{\n\tif (this.isVertex())\n\t{\n\t\tthis.y[0] = value;\n\t}\n\telse if (this.isEdge())\n\t{\n\t\tthis.y[layer -this. minRank - 1] = value;\n\t}\n};\n\n__mxOutput.mxGraphAbstractHierarchyCell = typeof mxGraphAbstractHierarchyCell !== 'undefined' ? mxGraphAbstractHierarchyCell : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraphHierarchyNode\n * \n * An abstraction of a hierarchical edge for the hierarchy layout\n * \n * Constructor: mxGraphHierarchyNode\n *\n * Constructs an internal node to represent the specified real graph cell\n *\n * Arguments:\n * \n * cell - the real graph cell this node represents\n */\nfunction mxGraphHierarchyNode(cell)\n{\n\tmxGraphAbstractHierarchyCell.apply(this, arguments);\n\tthis.cell = cell;\n\tthis.id = mxObjectIdentity.get(cell);\n\tthis.connectsAsTarget = [];\n\tthis.connectsAsSource = [];\n};\n\n/**\n * Extends mxGraphAbstractHierarchyCell.\n */\nmxGraphHierarchyNode.prototype = new mxGraphAbstractHierarchyCell();\nmxGraphHierarchyNode.prototype.constructor = mxGraphHierarchyNode;\n\n/**\n * Variable: cell\n * \n * The graph cell this object represents.\n */\nmxGraphHierarchyNode.prototype.cell = null;\n\n/**\n * Variable: id\n * \n * The object identity of the wrapped cell\n */\nmxGraphHierarchyNode.prototype.id = null;\n\n/**\n * Variable: connectsAsTarget\n * \n * Collection of hierarchy edges that have this node as a target\n */\nmxGraphHierarchyNode.prototype.connectsAsTarget = null;\n\n/**\n * Variable: connectsAsSource\n * \n * Collection of hierarchy edges that have this node as a source\n */\nmxGraphHierarchyNode.prototype.connectsAsSource = null;\n\n/**\n * Variable: hashCode\n * \n * Assigns a unique hashcode for each node. Used by the model dfs instead\n * of copying HashSets\n */\nmxGraphHierarchyNode.prototype.hashCode = false;\n\n/**\n * Function: getRankValue\n * \n * Returns the integer value of the layer that this node resides in\n */\nmxGraphHierarchyNode.prototype.getRankValue = function(layer)\n{\n\treturn this.maxRank;\n};\n\n/**\n * Function: getNextLayerConnectedCells\n * \n * Returns the cells this cell connects to on the next layer up\n */\nmxGraphHierarchyNode.prototype.getNextLayerConnectedCells = function(layer)\n{\n\tif (this.nextLayerConnectedCells == null)\n\t{\n\t\tthis.nextLayerConnectedCells = [];\n\t\tthis.nextLayerConnectedCells[0] = [];\n\t\t\n\t\tfor (var i = 0; i < this.connectsAsTarget.length; i++)\n\t\t{\n\t\t\tvar edge = this.connectsAsTarget[i];\n\n\t\t\tif (edge.maxRank == -1 || edge.maxRank == layer + 1)\n\t\t\t{\n\t\t\t\t// Either edge is not in any rank or\n\t\t\t\t// no dummy nodes in edge, add node of other side of edge\n\t\t\t\tthis.nextLayerConnectedCells[0].push(edge.source);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Edge spans at least two layers, add edge\n\t\t\t\tthis.nextLayerConnectedCells[0].push(edge);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this.nextLayerConnectedCells[0];\n};\n\n/**\n * Function: getPreviousLayerConnectedCells\n * \n * Returns the cells this cell connects to on the next layer down\n */\nmxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells = function(layer)\n{\n\tif (this.previousLayerConnectedCells == null)\n\t{\n\t\tthis.previousLayerConnectedCells = [];\n\t\tthis.previousLayerConnectedCells[0] = [];\n\t\t\n\t\tfor (var i = 0; i < this.connectsAsSource.length; i++)\n\t\t{\n\t\t\tvar edge = this.connectsAsSource[i];\n\n\t\t\tif (edge.minRank == -1 || edge.minRank == layer - 1)\n\t\t\t{\n\t\t\t\t// No dummy nodes in edge, add node of other side of edge\n\t\t\t\tthis.previousLayerConnectedCells[0].push(edge.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Edge spans at least two layers, add edge\n\t\t\t\tthis.previousLayerConnectedCells[0].push(edge);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this.previousLayerConnectedCells[0];\n};\n\n/**\n * Function: isVertex\n * \n * Returns true.\n */\nmxGraphHierarchyNode.prototype.isVertex = function()\n{\n\treturn true;\n};\n\n/**\n * Function: getGeneralPurposeVariable\n * \n * Gets the value of temp for the specified layer\n */\nmxGraphHierarchyNode.prototype.getGeneralPurposeVariable = function(layer)\n{\n\treturn this.temp[0];\n};\n\n/**\n * Function: setGeneralPurposeVariable\n * \n * Set the value of temp for the specified layer\n */\nmxGraphHierarchyNode.prototype.setGeneralPurposeVariable = function(layer, value)\n{\n\tthis.temp[0] = value;\n};\n\n/**\n * Function: isAncestor\n */\nmxGraphHierarchyNode.prototype.isAncestor = function(otherNode)\n{\n\t// Firstly, the hash code of this node needs to be shorter than the\n\t// other node\n\tif (otherNode != null && this.hashCode != null && otherNode.hashCode != null\n\t\t\t&& this.hashCode.length < otherNode.hashCode.length)\n\t{\n\t\tif (this.hashCode == otherNode.hashCode)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tif (this.hashCode == null || this.hashCode == null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// Secondly, this hash code must match the start of the other\n\t\t// node's hash code. Arrays.equals cannot be used here since\n\t\t// the arrays are different length, and we do not want to\n\t\t// perform another array copy.\n\t\tfor (var i = 0; i < this.hashCode.length; i++)\n\t\t{\n\t\t\tif (this.hashCode[i] != otherNode.hashCode[i])\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n/**\n * Function: getCoreCell\n * \n * Gets the core vertex associated with this wrapper\n */\nmxGraphHierarchyNode.prototype.getCoreCell = function()\n{\n\treturn this.cell;\n};\n\n__mxOutput.mxGraphHierarchyNode = typeof mxGraphHierarchyNode !== 'undefined' ? mxGraphHierarchyNode : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraphHierarchyEdge\n * \n * An abstraction of a hierarchical edge for the hierarchy layout\n * \n * Constructor: mxGraphHierarchyEdge\n *\n * Constructs a hierarchy edge\n *\n * Arguments:\n * \n * edges - a list of real graph edges this abstraction represents\n */\nfunction mxGraphHierarchyEdge(edges)\n{\n\tmxGraphAbstractHierarchyCell.apply(this, arguments);\n\tthis.edges = edges;\n\tthis.ids = [];\n\t\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tthis.ids.push(mxObjectIdentity.get(edges[i]));\n\t}\n};\n\n/**\n * Extends mxGraphAbstractHierarchyCell.\n */\nmxGraphHierarchyEdge.prototype = new mxGraphAbstractHierarchyCell();\nmxGraphHierarchyEdge.prototype.constructor = mxGraphHierarchyEdge;\n\n/**\n * Variable: edges\n * \n * The graph edge(s) this object represents. Parallel edges are all grouped\n * together within one hierarchy edge.\n */\nmxGraphHierarchyEdge.prototype.edges = null;\n\n/**\n * Variable: ids\n * \n * The object identities of the wrapped cells\n */\nmxGraphHierarchyEdge.prototype.ids = null;\n\n/**\n * Variable: source\n * \n * The node this edge is sourced at\n */\nmxGraphHierarchyEdge.prototype.source = null;\n\n/**\n * Variable: target\n * \n * The node this edge targets\n */\nmxGraphHierarchyEdge.prototype.target = null;\n\n/**\n * Variable: isReversed\n * \n * Whether or not the direction of this edge has been reversed\n * internally to create a DAG for the hierarchical layout\n */\nmxGraphHierarchyEdge.prototype.isReversed = false;\n\n/**\n * Function: invert\n * \n * Inverts the direction of this internal edge(s)\n */\nmxGraphHierarchyEdge.prototype.invert = function(layer)\n{\n\tvar temp = this.source;\n\tthis.source = this.target;\n\tthis.target = temp;\n\tthis.isReversed = !this.isReversed;\n};\n\n/**\n * Function: getNextLayerConnectedCells\n * \n * Returns the cells this cell connects to on the next layer up\n */\nmxGraphHierarchyEdge.prototype.getNextLayerConnectedCells = function(layer)\n{\n\tif (this.nextLayerConnectedCells == null)\n\t{\n\t\tthis.nextLayerConnectedCells = [];\n\t\t\n\t\tfor (var i = 0; i < this.temp.length; i++)\n\t\t{\n\t\t\tthis.nextLayerConnectedCells[i] = [];\n\t\t\t\n\t\t\tif (i == this.temp.length - 1)\n\t\t\t{\n\t\t\t\tthis.nextLayerConnectedCells[i].push(this.source);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.nextLayerConnectedCells[i].push(this);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn this.nextLayerConnectedCells[layer - this.minRank - 1];\n};\n\n/**\n * Function: getPreviousLayerConnectedCells\n * \n * Returns the cells this cell connects to on the next layer down\n */\nmxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells = function(layer)\n{\n\tif (this.previousLayerConnectedCells == null)\n\t{\n\t\tthis.previousLayerConnectedCells = [];\n\n\t\tfor (var i = 0; i < this.temp.length; i++)\n\t\t{\n\t\t\tthis.previousLayerConnectedCells[i] = [];\n\t\t\t\n\t\t\tif (i == 0)\n\t\t\t{\n\t\t\t\tthis.previousLayerConnectedCells[i].push(this.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.previousLayerConnectedCells[i].push(this);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this.previousLayerConnectedCells[layer - this.minRank - 1];\n};\n\n/**\n * Function: isEdge\n * \n * Returns true.\n */\nmxGraphHierarchyEdge.prototype.isEdge = function()\n{\n\treturn true;\n};\n\n/**\n * Function: getGeneralPurposeVariable\n * \n * Gets the value of temp for the specified layer\n */\nmxGraphHierarchyEdge.prototype.getGeneralPurposeVariable = function(layer)\n{\n\treturn this.temp[layer - this.minRank - 1];\n};\n\n/**\n * Function: setGeneralPurposeVariable\n * \n * Set the value of temp for the specified layer\n */\nmxGraphHierarchyEdge.prototype.setGeneralPurposeVariable = function(layer, value)\n{\n\tthis.temp[layer - this.minRank - 1] = value;\n};\n\n/**\n * Function: getCoreCell\n * \n * Gets the first core edge associated with this wrapper\n */\nmxGraphHierarchyEdge.prototype.getCoreCell = function()\n{\n\tif (this.edges != null && this.edges.length > 0)\n\t{\n\t\treturn this.edges[0];\n\t}\n\t\n\treturn null;\n};\n\n__mxOutput.mxGraphHierarchyEdge = typeof mxGraphHierarchyEdge !== 'undefined' ? mxGraphHierarchyEdge : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraphHierarchyModel\n *\n * Internal model of a hierarchical graph. This model stores nodes and edges\n * equivalent to the real graph nodes and edges, but also stores the rank of the\n * cells, the order within the ranks and the new candidate locations of cells.\n * The internal model also reverses edge direction were appropriate , ignores\n * self-loop and groups parallels together under one edge object.\n *\n * Constructor: mxGraphHierarchyModel\n *\n * Creates an internal ordered graph model using the vertices passed in. If\n * there are any, leftward edge need to be inverted in the internal model\n *\n * Arguments:\n *\n * graph - the facade describing the graph to be operated on\n * vertices - the vertices for this hierarchy\n * ordered - whether or not the vertices are already ordered\n * deterministic - whether or not this layout should be deterministic on each\n * tightenToSource - whether or not to tighten vertices towards the sources\n * scanRanksFromSinks - Whether rank assignment is from the sinks or sources.\n * usage\n */\nfunction mxGraphHierarchyModel(layout, vertices, roots, parent, tightenToSource)\n{\n\tvar graph = layout.getGraph();\n\tthis.tightenToSource = tightenToSource;\n\tthis.roots = roots;\n\tthis.parent = parent;\n\n\t// map of cells to internal cell needed for second run through\n\t// to setup the sink of edges correctly\n\tthis.vertexMapper = new mxDictionary();\n\tthis.edgeMapper = new mxDictionary();\n\tthis.maxRank = 0;\n\tvar internalVertices = [];\n\n\tif (vertices == null)\n\t{\n\t\tvertices = this.graph.getChildVertices(parent);\n\t}\n\n\tthis.maxRank = this.SOURCESCANSTARTRANK;\n\t// map of cells to internal cell needed for second run through\n\t// to setup the sink of edges correctly. Guess size by number\n\t// of edges is roughly same as number of vertices.\n\tthis.createInternalCells(layout, vertices, internalVertices);\n\n\t// Go through edges set their sink values. Also check the\n\t// ordering if and invert edges if necessary\n\tfor (var i = 0; i < vertices.length; i++)\n\t{\n\t\tvar edges = internalVertices[i].connectsAsSource;\n\n\t\tfor (var j = 0; j < edges.length; j++)\n\t\t{\n\t\t\tvar internalEdge = edges[j];\n\t\t\tvar realEdges = internalEdge.edges;\n\n\t\t\t// Only need to process the first real edge, since\n\t\t\t// all the edges connect to the same other vertex\n\t\t\tif (realEdges != null && realEdges.length > 0)\n\t\t\t{\n\t\t\t\tvar realEdge = realEdges[0];\n\t\t\t\tvar targetCell = layout.getVisibleTerminal(\n\t\t\t\t\t\trealEdge, false);\n\t\t\t\tvar internalTargetCell = this.vertexMapper.get(targetCell);\n\n\t\t\t\tif (internalVertices[i] == internalTargetCell)\n\t\t\t\t{\n\t\t\t\t\t// If there are parallel edges going between two vertices and not all are in the same direction\n\t\t\t\t\t// you can have navigated across one direction when doing the cycle reversal that isn't the same\n\t\t\t\t\t// direction as the first real edge in the array above. When that happens the if above catches\n\t\t\t\t\t// that and we correct the target cell before continuing.\n\t\t\t\t\t// This branch only detects this single case\n\t\t\t\t\ttargetCell = layout.getVisibleTerminal(\n\t\t\t\t\t\t\trealEdge, true);\n\t\t\t\t\tinternalTargetCell = this.vertexMapper.get(targetCell);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (internalTargetCell != null\n\t\t\t\t\t\t&& internalVertices[i] != internalTargetCell)\n\t\t\t\t{\n\t\t\t\t\tinternalEdge.target = internalTargetCell;\n\n\t\t\t\t\tif (internalTargetCell.connectsAsTarget.length == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tinternalTargetCell.connectsAsTarget = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (mxUtils.indexOf(internalTargetCell.connectsAsTarget, internalEdge) < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tinternalTargetCell.connectsAsTarget.push(internalEdge);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Use the temp variable in the internal nodes to mark this\n\t\t// internal vertex as having been visited.\n\t\tinternalVertices[i].temp[0] = 1;\n\t}\n};\n\n/**\n * Variable: maxRank\n *\n * Stores the largest rank number allocated\n */\nmxGraphHierarchyModel.prototype.maxRank = null;\n\n/**\n * Variable: vertexMapper\n *\n * Map from graph vertices to internal model nodes.\n */\nmxGraphHierarchyModel.prototype.vertexMapper = null;\n\n/**\n * Variable: edgeMapper\n *\n * Map from graph edges to internal model edges\n */\nmxGraphHierarchyModel.prototype.edgeMapper = null;\n\n/**\n * Variable: ranks\n *\n * Mapping from rank number to actual rank\n */\nmxGraphHierarchyModel.prototype.ranks = null;\n\n/**\n * Variable: roots\n *\n * Store of roots of this hierarchy model, these are real graph cells, not\n * internal cells\n */\nmxGraphHierarchyModel.prototype.roots = null;\n\n/**\n * Variable: parent\n *\n * The parent cell whose children are being laid out\n */\nmxGraphHierarchyModel.prototype.parent = null;\n\n/**\n * Variable: dfsCount\n *\n * Count of the number of times the ancestor dfs has been used.\n */\nmxGraphHierarchyModel.prototype.dfsCount = 0;\n\n/**\n * Variable: SOURCESCANSTARTRANK\n *\n * High value to start source layering scan rank value from.\n */\nmxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK = 100000000;\n\n/**\n * Variable: tightenToSource\n *\n * Whether or not to tighten the assigned ranks of vertices up towards\n * the source cells.\n */\nmxGraphHierarchyModel.prototype.tightenToSource = false;\n\n/**\n * Function: createInternalCells\n *\n * Creates all edges in the internal model\n *\n * Parameters:\n *\n * layout - Reference to the <mxHierarchicalLayout> algorithm.\n * vertices - Array of <mxCells> that represent the vertices whom are to\n * have an internal representation created.\n * internalVertices - The array of <mxGraphHierarchyNodes> to have their\n * information filled in using the real vertices.\n */\nmxGraphHierarchyModel.prototype.createInternalCells = function(layout, vertices, internalVertices)\n{\n\tvar graph = layout.getGraph();\n\n\t// Create internal edges\n\tfor (var i = 0; i < vertices.length; i++)\n\t{\n\t\tinternalVertices[i] = new mxGraphHierarchyNode(vertices[i]);\n\t\tthis.vertexMapper.put(vertices[i], internalVertices[i]);\n\n\t\t// If the layout is deterministic, order the cells\n\t\t//List outgoingCells = graph.getNeighbours(vertices[i], deterministic);\n\t\tvar conns = layout.getEdges(vertices[i]);\n\t\tinternalVertices[i].connectsAsSource = [];\n\n\t\t// Create internal edges, but don't do any rank assignment yet\n\t\t// First use the information from the greedy cycle remover to\n\t\t// invert the leftward edges internally\n\t\tfor (var j = 0; j < conns.length; j++)\n\t\t{\n\t\t\tvar cell = layout.getVisibleTerminal(conns[j], false);\n\n\t\t\t// Looking for outgoing edges only\n\t\t\tif (cell != vertices[i] && layout.graph.model.isVertex(cell) &&\n\t\t\t\t\t!layout.isVertexIgnored(cell))\n\t\t\t{\n\t\t\t\t// We process all edge between this source and its targets\n\t\t\t\t// If there are edges going both ways, we need to collect\n\t\t\t\t// them all into one internal edges to avoid looping problems\n\t\t\t\t// later. We assume this direction (source -> target) is the \n\t\t\t\t// natural direction if at least half the edges are going in\n\t\t\t\t// that direction.\n\n\t\t\t\t// The check below for edges[0] being in the vertex mapper is\n\t\t\t\t// in case we've processed this the other way around\n\t\t\t\t// (target -> source) and the number of edges in each direction\n\t\t\t\t// are the same. All the graph edges will have been assigned to\n\t\t\t\t// an internal edge going the other way, so we don't want to \n\t\t\t\t// process them again\n\t\t\t\tvar undirectedEdges = layout.getEdgesBetween(vertices[i],\n\t\t\t\t\t\tcell, false);\n\t\t\t\tvar directedEdges = layout.getEdgesBetween(vertices[i],\n\t\t\t\t\t\tcell, true);\n\t\t\t\t\n\t\t\t\tif (undirectedEdges != null &&\n\t\t\t\t\t\tundirectedEdges.length > 0 &&\n\t\t\t\t\t\tthis.edgeMapper.get(undirectedEdges[0]) == null &&\n\t\t\t\t\t\tdirectedEdges.length * 2 >= undirectedEdges.length)\n\t\t\t\t{\n\t\t\t\t\tvar internalEdge = new mxGraphHierarchyEdge(undirectedEdges);\n\n\t\t\t\t\tfor (var k = 0; k < undirectedEdges.length; k++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar edge = undirectedEdges[k];\n\t\t\t\t\t\tthis.edgeMapper.put(edge, internalEdge);\n\n\t\t\t\t\t\t// Resets all point on the edge and disables the edge style\n\t\t\t\t\t\t// without deleting it from the cell style\n\t\t\t\t\t\tgraph.resetEdge(edge);\n\n\t\t\t\t\t    if (layout.disableEdgeStyle)\n\t\t\t\t\t    {\n\t\t\t\t\t    \tlayout.setEdgeStyleEnabled(edge, false);\n\t\t\t\t\t    \tlayout.setOrthogonalEdge(edge,true);\n\t\t\t\t\t    }\n\t\t\t\t\t}\n\n\t\t\t\t\tinternalEdge.source = internalVertices[i];\n\n\t\t\t\t\tif (mxUtils.indexOf(internalVertices[i].connectsAsSource, internalEdge) < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tinternalVertices[i].connectsAsSource.push(internalEdge);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Ensure temp variable is cleared from any previous use\n\t\tinternalVertices[i].temp[0] = 0;\n\t}\n};\n\n/**\n * Function: initialRank\n *\n * Basic determination of minimum layer ranking by working from from sources\n * or sinks and working through each node in the relevant edge direction.\n * Starting at the sinks is basically a longest path layering algorithm.\n*/\nmxGraphHierarchyModel.prototype.initialRank = function()\n{\n\tvar startNodes = [];\n\n\tif (this.roots != null)\n\t{\n\t\tfor (var i = 0; i < this.roots.length; i++)\n\t\t{\n\t\t\tvar internalNode = this.vertexMapper.get(this.roots[i]);\n\n\t\t\tif (internalNode != null)\n\t\t\t{\n\t\t\t\tstartNodes.push(internalNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar internalNodes = this.vertexMapper.getValues();\n\t\n\tfor (var i=0; i < internalNodes.length; i++)\n\t{\n\t\t// Mark the node as not having had a layer assigned\n\t\tinternalNodes[i].temp[0] = -1;\n\t}\n\n\tvar startNodesCopy = startNodes.slice();\n\n\twhile (startNodes.length > 0)\n\t{\n\t\tvar internalNode = startNodes[0];\n\t\tvar layerDeterminingEdges;\n\t\tvar edgesToBeMarked;\n\n\t\tlayerDeterminingEdges = internalNode.connectsAsTarget;\n\t\tedgesToBeMarked = internalNode.connectsAsSource;\n\n\t\t// flag to keep track of whether or not all layer determining\n\t\t// edges have been scanned\n\t\tvar allEdgesScanned = true;\n\n\t\t// Work out the layer of this node from the layer determining\n\t\t// edges. The minimum layer number of any node connected by one of\n\t\t// the layer determining edges variable\n\t\tvar minimumLayer = this.SOURCESCANSTARTRANK;\n\n\t\tfor (var i = 0; i < layerDeterminingEdges.length; i++)\n\t\t{\n\t\t\tvar internalEdge = layerDeterminingEdges[i];\n\n\t\t\tif (internalEdge.temp[0] == 5270620)\n\t\t\t{\n\t\t\t\t// This edge has been scanned, get the layer of the\n\t\t\t\t// node on the other end\n\t\t\t\tvar otherNode = internalEdge.source;\n\t\t\t\tminimumLayer = Math.min(minimumLayer, otherNode.temp[0] - 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tallEdgesScanned = false;\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// If all edge have been scanned, assign the layer, mark all\n\t\t// edges in the other direction and remove from the nodes list\n\t\tif (allEdgesScanned)\n\t\t{\n\t\t\tinternalNode.temp[0] = minimumLayer;\n\t\t\tthis.maxRank = Math.min(this.maxRank, minimumLayer);\n\n\t\t\tif (edgesToBeMarked != null)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < edgesToBeMarked.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar internalEdge = edgesToBeMarked[i];\n\n\t\t\t\t\t// Assign unique stamp ( y/m/d/h )\n\t\t\t\t\tinternalEdge.temp[0] = 5270620;\n\n\t\t\t\t\t// Add node on other end of edge to LinkedList of\n\t\t\t\t\t// nodes to be analysed\n\t\t\t\t\tvar otherNode = internalEdge.target;\n\n\t\t\t\t\t// Only add node if it hasn't been assigned a layer\n\t\t\t\t\tif (otherNode.temp[0] == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tstartNodes.push(otherNode);\n\n\t\t\t\t\t\t// Mark this other node as neither being\n\t\t\t\t\t\t// unassigned nor assigned so it isn't\n\t\t\t\t\t\t// added to this list again, but it's\n\t\t\t\t\t\t// layer isn't used in any calculation.\n\t\t\t\t\t\totherNode.temp[0] = -2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstartNodes.shift();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Not all the edges have been scanned, get to the back of\n\t\t\t// the class and put the dunces cap on\n\t\t\tvar removedCell = startNodes.shift();\n\t\t\tstartNodes.push(internalNode);\n\n\t\t\tif (removedCell == internalNode && startNodes.length == 1)\n\t\t\t{\n\t\t\t\t// This is an error condition, we can't get out of\n\t\t\t\t// this loop. It could happen for more than one node\n\t\t\t\t// but that's a lot harder to detect. Log the error\n\t\t\t\t// TODO make log comment\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize the ranks down from their large starting value to place\n\t// at least 1 sink on layer 0\n\tfor (var i=0; i < internalNodes.length; i++)\n\t{\n\t\t// Mark the node as not having had a layer assigned\n\t\tinternalNodes[i].temp[0] -= this.maxRank;\n\t}\n\t\n\t// Tighten the rank 0 nodes as far as possible\n\tfor ( var i = 0; i < startNodesCopy.length; i++)\n\t{\n\t\tvar internalNode = startNodesCopy[i];\n\t\tvar currentMaxLayer = 0;\n\t\tvar layerDeterminingEdges = internalNode.connectsAsSource;\n\n\t\tfor ( var j = 0; j < layerDeterminingEdges.length; j++)\n\t\t{\n\t\t\tvar internalEdge = layerDeterminingEdges[j];\n\t\t\tvar otherNode = internalEdge.target;\n\t\t\tinternalNode.temp[0] = Math.max(currentMaxLayer,\n\t\t\t\t\totherNode.temp[0] + 1);\n\t\t\tcurrentMaxLayer = internalNode.temp[0];\n\t\t}\n\t}\n\t\n\t// Reset the maxRank to that which would be expected for a from-sink\n\t// scan\n\tthis.maxRank = this.SOURCESCANSTARTRANK - this.maxRank;\n};\n\n/**\n * Function: fixRanks\n *\n * Fixes the layer assignments to the values stored in the nodes. Also needs\n * to create dummy nodes for edges that cross layers.\n */\nmxGraphHierarchyModel.prototype.fixRanks = function()\n{\n\tvar rankList = [];\n\tthis.ranks = [];\n\n\tfor (var i = 0; i < this.maxRank + 1; i++)\n\t{\n\t\trankList[i] = [];\n\t\tthis.ranks[i] = rankList[i];\n\t}\n\n\t// Perform a DFS to obtain an initial ordering for each rank.\n\t// Without doing this you would end up having to process\n\t// crossings for a standard tree.\n\tvar rootsArray = null;\n\n\tif (this.roots != null)\n\t{\n\t\tvar oldRootsArray = this.roots;\n\t\trootsArray = [];\n\n\t\tfor (var i = 0; i < oldRootsArray.length; i++)\n\t\t{\n\t\t\tvar cell = oldRootsArray[i];\n\t\t\tvar internalNode = this.vertexMapper.get(cell);\n\t\t\trootsArray[i] = internalNode;\n\t\t}\n\t}\n\n\tthis.visit(function(parent, node, edge, layer, seen)\n\t{\n\t\tif (seen == 0 && node.maxRank < 0 && node.minRank < 0)\n\t\t{\n\t\t\trankList[node.temp[0]].push(node);\n\t\t\tnode.maxRank = node.temp[0];\n\t\t\tnode.minRank = node.temp[0];\n\n\t\t\t// Set temp[0] to the nodes position in the rank\n\t\t\tnode.temp[0] = rankList[node.maxRank].length - 1;\n\t\t}\n\n\t\tif (parent != null && edge != null)\n\t\t{\n\t\t\tvar parentToCellRankDifference = parent.maxRank - node.maxRank;\n\n\t\t\tif (parentToCellRankDifference > 1)\n\t\t\t{\n\t\t\t\t// There are ranks in between the parent and current cell\n\t\t\t\tedge.maxRank = parent.maxRank;\n\t\t\t\tedge.minRank = node.maxRank;\n\t\t\t\tedge.temp = [];\n\t\t\t\tedge.x = [];\n\t\t\t\tedge.y = [];\n\n\t\t\t\tfor (var i = edge.minRank + 1; i < edge.maxRank; i++)\n\t\t\t\t{\n\t\t\t\t\t// The connecting edge must be added to the\n\t\t\t\t\t// appropriate ranks\n\t\t\t\t\trankList[i].push(edge);\n\t\t\t\t\tedge.setGeneralPurposeVariable(i, rankList[i]\n\t\t\t\t\t\t\t.length - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, rootsArray, false, null);\n};\n\n/**\n * Function: visit\n *\n * A depth first search through the internal heirarchy model.\n *\n * Parameters:\n *\n * visitor - The visitor function pattern to be called for each node.\n * trackAncestors - Whether or not the search is to keep track all nodes\n * directly above this one in the search path.\n */\nmxGraphHierarchyModel.prototype.visit = function(visitor, dfsRoots, trackAncestors, seenNodes)\n{\n\t// Run dfs through on all roots\n\tif (dfsRoots != null)\n\t{\n\t\tfor (var i = 0; i < dfsRoots.length; i++)\n\t\t{\n\t\t\tvar internalNode = dfsRoots[i];\n\n\t\t\tif (internalNode != null)\n\t\t\t{\n\t\t\t\tif (seenNodes == null)\n\t\t\t\t{\n\t\t\t\t\tseenNodes = new Object();\n\t\t\t\t}\n\n\t\t\t\tif (trackAncestors)\n\t\t\t\t{\n\t\t\t\t\t// Set up hash code for root\n\t\t\t\t\tinternalNode.hashCode = [];\n\t\t\t\t\tinternalNode.hashCode[0] = this.dfsCount;\n\t\t\t\t\tinternalNode.hashCode[1] = i;\n\t\t\t\t\tthis.extendedDfs(null, internalNode, null, visitor, seenNodes,\n\t\t\t\t\t\t\tinternalNode.hashCode, i, 0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.dfs(null, internalNode, null, visitor, seenNodes, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.dfsCount++;\n\t}\n};\n\n/**\n * Function: dfs\n *\n * Performs a depth first search on the internal hierarchy model\n *\n * Parameters:\n *\n * parent - the parent internal node of the current internal node\n * root - the current internal node\n * connectingEdge - the internal edge connecting the internal node and the parent\n * internal node, if any\n * visitor - the visitor pattern to be called for each node\n * seen - a set of all nodes seen by this dfs a set of all of the\n * ancestor node of the current node\n * layer - the layer on the dfs tree ( not the same as the model ranks )\n */\nmxGraphHierarchyModel.prototype.dfs = function(parent, root, connectingEdge, visitor, seen, layer)\n{\n\tif (root != null)\n\t{\n\t\tvar rootId = root.id;\n\n\t\tif (seen[rootId] == null)\n\t\t{\n\t\t\tseen[rootId] = root;\n\t\t\tvisitor(parent, root, connectingEdge, layer, 0);\n\n\t\t\t// Copy the connects as source list so that visitors\n\t\t\t// can change the original for edge direction inversions\n\t\t\tvar outgoingEdges = root.connectsAsSource.slice();\n\t\t\t\n\t\t\tfor (var i = 0; i< outgoingEdges.length; i++)\n\t\t\t{\n\t\t\t\tvar internalEdge = outgoingEdges[i];\n\t\t\t\tvar targetNode = internalEdge.target;\n\n\t\t\t\t// Root check is O(|roots|)\n\t\t\t\tthis.dfs(root, targetNode, internalEdge, visitor, seen,\n\t\t\t\t\t\tlayer + 1);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Use the int field to indicate this node has been seen\n\t\t\tvisitor(parent, root, connectingEdge, layer, 1);\n\t\t}\n\t}\n};\n\n/**\n * Function: extendedDfs\n *\n * Performs a depth first search on the internal hierarchy model. This dfs\n * extends the default version by keeping track of cells ancestors, but it\n * should be only used when necessary because of it can be computationally\n * intensive for deep searches.\n *\n * Parameters:\n *\n * parent - the parent internal node of the current internal node\n * root - the current internal node\n * connectingEdge - the internal edge connecting the internal node and the parent\n * internal node, if any\n * visitor - the visitor pattern to be called for each node\n * seen - a set of all nodes seen by this dfs\n * ancestors - the parent hash code\n * childHash - the new hash code for this node\n * layer - the layer on the dfs tree ( not the same as the model ranks )\n */\nmxGraphHierarchyModel.prototype.extendedDfs = function(parent, root, connectingEdge, visitor, seen, ancestors, childHash, layer)\n{\n\t// Explanation of custom hash set. Previously, the ancestors variable\n\t// was passed through the dfs as a HashSet. The ancestors were copied\n\t// into a new HashSet and when the new child was processed it was also\n\t// added to the set. If the current node was in its ancestor list it\n\t// meant there is a cycle in the graph and this information is passed\n\t// to the visitor.visit() in the seen parameter. The HashSet clone was\n\t// very expensive on CPU so a custom hash was developed using primitive\n\t// types. temp[] couldn't be used so hashCode[] was added to each node.\n\t// Each new child adds another int to the array, copying the prefix\n\t// from its parent. Child of the same parent add different ints (the\n\t// limit is therefore 2^32 children per parent...). If a node has a\n\t// child with the hashCode already set then the child code is compared\n\t// to the same portion of the current nodes array. If they match there\n\t// is a loop.\n\t// Note that the basic mechanism would only allow for 1 use of this\n\t// functionality, so the root nodes have two ints. The second int is\n\t// incremented through each node root and the first is incremented\n\t// through each run of the dfs algorithm (therefore the dfs is not\n\t// thread safe). The hash code of each node is set if not already set,\n\t// or if the first int does not match that of the current run.\n\tif (root != null)\n\t{\n\t\tif (parent != null)\n\t\t{\n\t\t\t// Form this nodes hash code if necessary, that is, if the\n\t\t\t// hashCode variable has not been initialized or if the\n\t\t\t// start of the parent hash code does not equal the start of\n\t\t\t// this nodes hash code, indicating the code was set on a\n\t\t\t// previous run of this dfs.\n\t\t\tif (root.hashCode == null ||\n\t\t\t\troot.hashCode[0] != parent.hashCode[0])\n\t\t\t{\n\t\t\t\tvar hashCodeLength = parent.hashCode.length + 1;\n\t\t\t\troot.hashCode = parent.hashCode.slice();\n\t\t\t\troot.hashCode[hashCodeLength - 1] = childHash;\n\t\t\t}\n\t\t}\n\n\t\tvar rootId = root.id;\n\n\t\tif (seen[rootId] == null)\n\t\t{\n\t\t\tseen[rootId] = root;\n\t\t\tvisitor(parent, root, connectingEdge, layer, 0);\n\n\t\t\t// Copy the connects as source list so that visitors\n\t\t\t// can change the original for edge direction inversions\n\t\t\tvar outgoingEdges = root.connectsAsSource.slice();\n\n\t\t\tfor (var i = 0; i < outgoingEdges.length; i++)\n\t\t\t{\n\t\t\t\tvar internalEdge = outgoingEdges[i];\n\t\t\t\tvar targetNode = internalEdge.target;\n\n\t\t\t\t// Root check is O(|roots|)\n\t\t\t\tthis.extendedDfs(root, targetNode, internalEdge, visitor, seen,\n\t\t\t\t\t\troot.hashCode, i, layer + 1);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Use the int field to indicate this node has been seen\n\t\t\tvisitor(parent, root, connectingEdge, layer, 1);\n\t\t}\n\t}\n};\n\n__mxOutput.mxGraphHierarchyModel = typeof mxGraphHierarchyModel !== 'undefined' ? mxGraphHierarchyModel : undefined;\n\n/**\n * Copyright (c) 2006-2018, JGraph Ltd\n * Copyright (c) 2006-2018, Gaudenz Alder\n */\n/**\n * Class: mxSwimlaneModel\n *\n * Internal model of a hierarchical graph. This model stores nodes and edges\n * equivalent to the real graph nodes and edges, but also stores the rank of the\n * cells, the order within the ranks and the new candidate locations of cells.\n * The internal model also reverses edge direction were appropriate , ignores\n * self-loop and groups parallels together under one edge object.\n *\n * Constructor: mxSwimlaneModel\n *\n * Creates an internal ordered graph model using the vertices passed in. If\n * there are any, leftward edge need to be inverted in the internal model\n *\n * Arguments:\n *\n * graph - the facade describing the graph to be operated on\n * vertices - the vertices for this hierarchy\n * ordered - whether or not the vertices are already ordered\n * deterministic - whether or not this layout should be deterministic on each\n * tightenToSource - whether or not to tighten vertices towards the sources\n * scanRanksFromSinks - Whether rank assignment is from the sinks or sources.\n * usage\n */\nfunction mxSwimlaneModel(layout, vertices, roots, parent, tightenToSource)\n{\n\tvar graph = layout.getGraph();\n\tthis.tightenToSource = tightenToSource;\n\tthis.roots = roots;\n\tthis.parent = parent;\n\n\t// map of cells to internal cell needed for second run through\n\t// to setup the sink of edges correctly\n\tthis.vertexMapper = new mxDictionary();\n\tthis.edgeMapper = new mxDictionary();\n\tthis.maxRank = 0;\n\tvar internalVertices = [];\n\n\tif (vertices == null)\n\t{\n\t\tvertices = this.graph.getChildVertices(parent);\n\t}\n\n\tthis.maxRank = this.SOURCESCANSTARTRANK;\n\t// map of cells to internal cell needed for second run through\n\t// to setup the sink of edges correctly. Guess size by number\n\t// of edges is roughly same as number of vertices.\n\tthis.createInternalCells(layout, vertices, internalVertices);\n\n\t// Go through edges set their sink values. Also check the\n\t// ordering if and invert edges if necessary\n\tfor (var i = 0; i < vertices.length; i++)\n\t{\n\t\tvar edges = internalVertices[i].connectsAsSource;\n\n\t\tfor (var j = 0; j < edges.length; j++)\n\t\t{\n\t\t\tvar internalEdge = edges[j];\n\t\t\tvar realEdges = internalEdge.edges;\n\n\t\t\t// Only need to process the first real edge, since\n\t\t\t// all the edges connect to the same other vertex\n\t\t\tif (realEdges != null && realEdges.length > 0)\n\t\t\t{\n\t\t\t\tvar realEdge = realEdges[0];\n\t\t\t\tvar targetCell = layout.getVisibleTerminal(\n\t\t\t\t\t\trealEdge, false);\n\t\t\t\tvar internalTargetCell = this.vertexMapper.get(targetCell);\n\n\t\t\t\tif (internalVertices[i] == internalTargetCell)\n\t\t\t\t{\n\t\t\t\t\t// If there are parallel edges going between two vertices and not all are in the same direction\n\t\t\t\t\t// you can have navigated across one direction when doing the cycle reversal that isn't the same\n\t\t\t\t\t// direction as the first real edge in the array above. When that happens the if above catches\n\t\t\t\t\t// that and we correct the target cell before continuing.\n\t\t\t\t\t// This branch only detects this single case\n\t\t\t\t\ttargetCell = layout.getVisibleTerminal(\n\t\t\t\t\t\t\trealEdge, true);\n\t\t\t\t\tinternalTargetCell = this.vertexMapper.get(targetCell);\n\t\t\t\t}\n\n\t\t\t\tif (internalTargetCell != null\n\t\t\t\t\t\t&& internalVertices[i] != internalTargetCell)\n\t\t\t\t{\n\t\t\t\t\tinternalEdge.target = internalTargetCell;\n\n\t\t\t\t\tif (internalTargetCell.connectsAsTarget.length == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tinternalTargetCell.connectsAsTarget = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (mxUtils.indexOf(internalTargetCell.connectsAsTarget, internalEdge) < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tinternalTargetCell.connectsAsTarget.push(internalEdge);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Use the temp variable in the internal nodes to mark this\n\t\t// internal vertex as having been visited.\n\t\tinternalVertices[i].temp[0] = 1;\n\t}\n};\n\n/**\n * Variable: maxRank\n *\n * Stores the largest rank number allocated\n */\nmxSwimlaneModel.prototype.maxRank = null;\n\n/**\n * Variable: vertexMapper\n *\n * Map from graph vertices to internal model nodes.\n */\nmxSwimlaneModel.prototype.vertexMapper = null;\n\n/**\n * Variable: edgeMapper\n *\n * Map from graph edges to internal model edges\n */\nmxSwimlaneModel.prototype.edgeMapper = null;\n\n/**\n * Variable: ranks\n *\n * Mapping from rank number to actual rank\n */\nmxSwimlaneModel.prototype.ranks = null;\n\n/**\n * Variable: roots\n *\n * Store of roots of this hierarchy model, these are real graph cells, not\n * internal cells\n */\nmxSwimlaneModel.prototype.roots = null;\n\n/**\n * Variable: parent\n *\n * The parent cell whose children are being laid out\n */\nmxSwimlaneModel.prototype.parent = null;\n\n/**\n * Variable: dfsCount\n *\n * Count of the number of times the ancestor dfs has been used.\n */\nmxSwimlaneModel.prototype.dfsCount = 0;\n\n/**\n * Variable: SOURCESCANSTARTRANK\n *\n * High value to start source layering scan rank value from.\n */\nmxSwimlaneModel.prototype.SOURCESCANSTARTRANK = 100000000;\n\n/**\n * Variable: tightenToSource\n *\n * Whether or not to tighten the assigned ranks of vertices up towards\n * the source cells.\n */\nmxSwimlaneModel.prototype.tightenToSource = false;\n\n/**\n * Variable: ranksPerGroup\n *\n * An array of the number of ranks within each swimlane\n */\nmxSwimlaneModel.prototype.ranksPerGroup = null;\n\n/**\n * Function: createInternalCells\n *\n * Creates all edges in the internal model\n *\n * Parameters:\n *\n * layout - Reference to the <mxHierarchicalLayout> algorithm.\n * vertices - Array of <mxCells> that represent the vertices whom are to\n * have an internal representation created.\n * internalVertices - The array of <mxGraphHierarchyNodes> to have their\n * information filled in using the real vertices.\n */\nmxSwimlaneModel.prototype.createInternalCells = function(layout, vertices, internalVertices)\n{\n\tvar graph = layout.getGraph();\n\tvar swimlanes = layout.swimlanes;\n\n\t// Create internal edges\n\tfor (var i = 0; i < vertices.length; i++)\n\t{\n\t\tinternalVertices[i] = new mxGraphHierarchyNode(vertices[i]);\n\t\tthis.vertexMapper.put(vertices[i], internalVertices[i]);\n\t\tinternalVertices[i].swimlaneIndex = -1;\n\n\t\tfor (var ii = 0; ii < swimlanes.length; ii++)\n\t\t{\n\t\t\tif (graph.model.getParent(vertices[i]) == swimlanes[ii])\n\t\t\t{\n\t\t\t\tinternalVertices[i].swimlaneIndex = ii;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// If the layout is deterministic, order the cells\n\t\t//List outgoingCells = graph.getNeighbours(vertices[i], deterministic);\n\t\tvar conns = layout.getEdges(vertices[i]);\n\t\tinternalVertices[i].connectsAsSource = [];\n\n\t\t// Create internal edges, but don't do any rank assignment yet\n\t\t// First use the information from the greedy cycle remover to\n\t\t// invert the leftward edges internally\n\t\tfor (var j = 0; j < conns.length; j++)\n\t\t{\n\t\t\tvar cell = layout.getVisibleTerminal(conns[j], false);\n\n\t\t\t// Looking for outgoing edges only\n\t\t\tif (cell != vertices[i] && layout.graph.model.isVertex(cell) &&\n\t\t\t\t\t!layout.isVertexIgnored(cell))\n\t\t\t{\n\t\t\t\t// We process all edge between this source and its targets\n\t\t\t\t// If there are edges going both ways, we need to collect\n\t\t\t\t// them all into one internal edges to avoid looping problems\n\t\t\t\t// later. We assume this direction (source -> target) is the \n\t\t\t\t// natural direction if at least half the edges are going in\n\t\t\t\t// that direction.\n\n\t\t\t\t// The check below for edges[0] being in the vertex mapper is\n\t\t\t\t// in case we've processed this the other way around\n\t\t\t\t// (target -> source) and the number of edges in each direction\n\t\t\t\t// are the same. All the graph edges will have been assigned to\n\t\t\t\t// an internal edge going the other way, so we don't want to \n\t\t\t\t// process them again\n\t\t\t\tvar undirectedEdges = layout.getEdgesBetween(vertices[i],\n\t\t\t\t\t\tcell, false);\n\t\t\t\tvar directedEdges = layout.getEdgesBetween(vertices[i],\n\t\t\t\t\t\tcell, true);\n\t\t\t\t\n\t\t\t\tif (undirectedEdges != null &&\n\t\t\t\t\t\tundirectedEdges.length > 0 &&\n\t\t\t\t\t\tthis.edgeMapper.get(undirectedEdges[0]) == null &&\n\t\t\t\t\t\tdirectedEdges.length * 2 >= undirectedEdges.length)\n\t\t\t\t{\n\t\t\t\t\tvar internalEdge = new mxGraphHierarchyEdge(undirectedEdges);\n\n\t\t\t\t\tfor (var k = 0; k < undirectedEdges.length; k++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar edge = undirectedEdges[k];\n\t\t\t\t\t\tthis.edgeMapper.put(edge, internalEdge);\n\n\t\t\t\t\t\t// Resets all point on the edge and disables the edge style\n\t\t\t\t\t\t// without deleting it from the cell style\n\t\t\t\t\t\tgraph.resetEdge(edge);\n\n\t\t\t\t\t    if (layout.disableEdgeStyle)\n\t\t\t\t\t    {\n\t\t\t\t\t    \tlayout.setEdgeStyleEnabled(edge, false);\n\t\t\t\t\t    \tlayout.setOrthogonalEdge(edge,true);\n\t\t\t\t\t    }\n\t\t\t\t\t}\n\n\t\t\t\t\tinternalEdge.source = internalVertices[i];\n\n\t\t\t\t\tif (mxUtils.indexOf(internalVertices[i].connectsAsSource, internalEdge) < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tinternalVertices[i].connectsAsSource.push(internalEdge);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Ensure temp variable is cleared from any previous use\n\t\tinternalVertices[i].temp[0] = 0;\n\t}\n};\n\n/**\n * Function: initialRank\n *\n * Basic determination of minimum layer ranking by working from from sources\n * or sinks and working through each node in the relevant edge direction.\n * Starting at the sinks is basically a longest path layering algorithm.\n*/\nmxSwimlaneModel.prototype.initialRank = function()\n{\n\tthis.ranksPerGroup = [];\n\t\n\tvar startNodes = [];\n\tvar seen = new Object();\n\n\tif (this.roots != null)\n\t{\n\t\tfor (var i = 0; i < this.roots.length; i++)\n\t\t{\n\t\t\tvar internalNode = this.vertexMapper.get(this.roots[i]);\n\t\t\tthis.maxChainDfs(null, internalNode, null, seen, 0);\n\n\t\t\tif (internalNode != null)\n\t\t\t{\n\t\t\t\tstartNodes.push(internalNode);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Calculate the lower and upper rank bounds of each swimlane\n\tvar lowerRank = [];\n\tvar upperRank = [];\n\t\n\tfor (var i = this.ranksPerGroup.length - 1; i >= 0; i--)\n\t{\n\t\tif (i == this.ranksPerGroup.length - 1)\n\t\t{\n\t\t\tlowerRank[i] = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlowerRank[i] = upperRank[i+1] + 1;\n\t\t}\n\t\t\n\t\tupperRank[i] = lowerRank[i] + this.ranksPerGroup[i];\n\t}\n\t\n\tthis.maxRank = upperRank[0];\n\n\tvar internalNodes = this.vertexMapper.getValues();\n\t\n\tfor (var i=0; i < internalNodes.length; i++)\n\t{\n\t\t// Mark the node as not having had a layer assigned\n\t\tinternalNodes[i].temp[0] = -1;\n\t}\n\n\tvar startNodesCopy = startNodes.slice();\n\t\n\twhile (startNodes.length > 0)\n\t{\n\t\tvar internalNode = startNodes[0];\n\t\tvar layerDeterminingEdges;\n\t\tvar edgesToBeMarked;\n\n\t\tlayerDeterminingEdges = internalNode.connectsAsTarget;\n\t\tedgesToBeMarked = internalNode.connectsAsSource;\n\n\t\t// flag to keep track of whether or not all layer determining\n\t\t// edges have been scanned\n\t\tvar allEdgesScanned = true;\n\n\t\t// Work out the layer of this node from the layer determining\n\t\t// edges. The minimum layer number of any node connected by one of\n\t\t// the layer determining edges variable\n\t\tvar minimumLayer = upperRank[0];\n\n\t\tfor (var i = 0; i < layerDeterminingEdges.length; i++)\n\t\t{\n\t\t\tvar internalEdge = layerDeterminingEdges[i];\n\n\t\t\tif (internalEdge.temp[0] == 5270620)\n\t\t\t{\n\t\t\t\t// This edge has been scanned, get the layer of the\n\t\t\t\t// node on the other end\n\t\t\t\tvar otherNode = internalEdge.source;\n\t\t\t\tminimumLayer = Math.min(minimumLayer, otherNode.temp[0] - 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tallEdgesScanned = false;\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// If all edge have been scanned, assign the layer, mark all\n\t\t// edges in the other direction and remove from the nodes list\n\t\tif (allEdgesScanned)\n\t\t{\n\t\t\tif (minimumLayer > upperRank[internalNode.swimlaneIndex])\n\t\t\t{\n\t\t\t\tminimumLayer = upperRank[internalNode.swimlaneIndex];\n\t\t\t}\n\n\t\t\tinternalNode.temp[0] = minimumLayer;\n\n\t\t\tif (edgesToBeMarked != null)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < edgesToBeMarked.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar internalEdge = edgesToBeMarked[i];\n\n\t\t\t\t\t// Assign unique stamp ( y/m/d/h )\n\t\t\t\t\tinternalEdge.temp[0] = 5270620;\n\n\t\t\t\t\t// Add node on other end of edge to LinkedList of\n\t\t\t\t\t// nodes to be analysed\n\t\t\t\t\tvar otherNode = internalEdge.target;\n\n\t\t\t\t\t// Only add node if it hasn't been assigned a layer\n\t\t\t\t\tif (otherNode.temp[0] == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tstartNodes.push(otherNode);\n\n\t\t\t\t\t\t// Mark this other node as neither being\n\t\t\t\t\t\t// unassigned nor assigned so it isn't\n\t\t\t\t\t\t// added to this list again, but it's\n\t\t\t\t\t\t// layer isn't used in any calculation.\n\t\t\t\t\t\totherNode.temp[0] = -2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstartNodes.shift();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Not all the edges have been scanned, get to the back of\n\t\t\t// the class and put the dunces cap on\n\t\t\tvar removedCell = startNodes.shift();\n\t\t\tstartNodes.push(internalNode);\n\n\t\t\tif (removedCell == internalNode && startNodes.length == 1)\n\t\t\t{\n\t\t\t\t// This is an error condition, we can't get out of\n\t\t\t\t// this loop. It could happen for more than one node\n\t\t\t\t// but that's a lot harder to detect. Log the error\n\t\t\t\t// TODO make log comment\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize the ranks down from their large starting value to place\n\t// at least 1 sink on layer 0\n//\tfor (var key in this.vertexMapper)\n//\t{\n//\t\tvar internalNode = this.vertexMapper[key];\n//\t\t// Mark the node as not having had a layer assigned\n//\t\tinternalNode.temp[0] -= this.maxRank;\n//\t}\n\t\n\t// Tighten the rank 0 nodes as far as possible\n//\tfor ( var i = 0; i < startNodesCopy.length; i++)\n//\t{\n//\t\tvar internalNode = startNodesCopy[i];\n//\t\tvar currentMaxLayer = 0;\n//\t\tvar layerDeterminingEdges = internalNode.connectsAsSource;\n//\n//\t\tfor ( var j = 0; j < layerDeterminingEdges.length; j++)\n//\t\t{\n//\t\t\tvar internalEdge = layerDeterminingEdges[j];\n//\t\t\tvar otherNode = internalEdge.target;\n//\t\t\tinternalNode.temp[0] = Math.max(currentMaxLayer,\n//\t\t\t\t\totherNode.temp[0] + 1);\n//\t\t\tcurrentMaxLayer = internalNode.temp[0];\n//\t\t}\n//\t}\n};\n\n/**\n * Function: maxChainDfs\n *\n * Performs a depth first search on the internal hierarchy model. This dfs\n * extends the default version by keeping track of chains within groups.\n * Any cycles should be removed prior to running, but previously seen cells\n * are ignored.\n *\n * Parameters:\n *\n * parent - the parent internal node of the current internal node\n * root - the current internal node\n * connectingEdge - the internal edge connecting the internal node and the parent\n * internal node, if any\n * seen - a set of all nodes seen by this dfs\n * chainCount - the number of edges in the chain of vertices going through\n * the current swimlane\n */\nmxSwimlaneModel.prototype.maxChainDfs = function(parent, root, connectingEdge, seen, chainCount)\n{\n\tif (root != null)\n\t{\n\t\tvar rootId = mxCellPath.create(root.cell);\n\n\t\tif (seen[rootId] == null)\n\t\t{\n\t\t\tseen[rootId] = root;\n\t\t\tvar slIndex = root.swimlaneIndex;\n\t\t\t\n\t\t\tif (this.ranksPerGroup[slIndex] == null || this.ranksPerGroup[slIndex] < chainCount)\n\t\t\t{\n\t\t\t\tthis.ranksPerGroup[slIndex] = chainCount;\n\t\t\t}\n\n\t\t\t// Copy the connects as source list so that visitors\n\t\t\t// can change the original for edge direction inversions\n\t\t\tvar outgoingEdges = root.connectsAsSource.slice();\n\n\t\t\tfor (var i = 0; i < outgoingEdges.length; i++)\n\t\t\t{\n\t\t\t\tvar internalEdge = outgoingEdges[i];\n\t\t\t\tvar targetNode = internalEdge.target;\n\n\t\t\t\t// Only navigate in source->target direction within the same\n\t\t\t\t// swimlane, or from a lower index swimlane to a higher one\n\t\t\t\tif (root.swimlaneIndex < targetNode.swimlaneIndex)\n\t\t\t\t{\n\t\t\t\t\tthis.maxChainDfs(root, targetNode, internalEdge, mxUtils.clone(seen, null , true), 0);\n\t\t\t\t}\n\t\t\t\telse if (root.swimlaneIndex == targetNode.swimlaneIndex)\n\t\t\t\t{\n\t\t\t\t\tthis.maxChainDfs(root, targetNode, internalEdge, mxUtils.clone(seen, null , true), chainCount + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: fixRanks\n *\n * Fixes the layer assignments to the values stored in the nodes. Also needs\n * to create dummy nodes for edges that cross layers.\n */\nmxSwimlaneModel.prototype.fixRanks = function()\n{\n\tvar rankList = [];\n\tthis.ranks = [];\n\n\tfor (var i = 0; i < this.maxRank + 1; i++)\n\t{\n\t\trankList[i] = [];\n\t\tthis.ranks[i] = rankList[i];\n\t}\n\n\t// Perform a DFS to obtain an initial ordering for each rank.\n\t// Without doing this you would end up having to process\n\t// crossings for a standard tree.\n\tvar rootsArray = null;\n\n\tif (this.roots != null)\n\t{\n\t\tvar oldRootsArray = this.roots;\n\t\trootsArray = [];\n\n\t\tfor (var i = 0; i < oldRootsArray.length; i++)\n\t\t{\n\t\t\tvar cell = oldRootsArray[i];\n\t\t\tvar internalNode = this.vertexMapper.get(cell);\n\t\t\trootsArray[i] = internalNode;\n\t\t}\n\t}\n\n\tthis.visit(function(parent, node, edge, layer, seen)\n\t{\n\t\tif (seen == 0 && node.maxRank < 0 && node.minRank < 0)\n\t\t{\n\t\t\trankList[node.temp[0]].push(node);\n\t\t\tnode.maxRank = node.temp[0];\n\t\t\tnode.minRank = node.temp[0];\n\n\t\t\t// Set temp[0] to the nodes position in the rank\n\t\t\tnode.temp[0] = rankList[node.maxRank].length - 1;\n\t\t}\n\n\t\tif (parent != null && edge != null)\n\t\t{\n\t\t\tvar parentToCellRankDifference = parent.maxRank - node.maxRank;\n\n\t\t\tif (parentToCellRankDifference > 1)\n\t\t\t{\n\t\t\t\t// There are ranks in between the parent and current cell\n\t\t\t\tedge.maxRank = parent.maxRank;\n\t\t\t\tedge.minRank = node.maxRank;\n\t\t\t\tedge.temp = [];\n\t\t\t\tedge.x = [];\n\t\t\t\tedge.y = [];\n\n\t\t\t\tfor (var i = edge.minRank + 1; i < edge.maxRank; i++)\n\t\t\t\t{\n\t\t\t\t\t// The connecting edge must be added to the\n\t\t\t\t\t// appropriate ranks\n\t\t\t\t\trankList[i].push(edge);\n\t\t\t\t\tedge.setGeneralPurposeVariable(i, rankList[i]\n\t\t\t\t\t\t\t.length - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, rootsArray, false, null);\n};\n\n/**\n * Function: visit\n *\n * A depth first search through the internal heirarchy model.\n *\n * Parameters:\n *\n * visitor - The visitor function pattern to be called for each node.\n * trackAncestors - Whether or not the search is to keep track all nodes\n * directly above this one in the search path.\n */\nmxSwimlaneModel.prototype.visit = function(visitor, dfsRoots, trackAncestors, seenNodes)\n{\n\t// Run dfs through on all roots\n\tif (dfsRoots != null)\n\t{\n\t\tfor (var i = 0; i < dfsRoots.length; i++)\n\t\t{\n\t\t\tvar internalNode = dfsRoots[i];\n\n\t\t\tif (internalNode != null)\n\t\t\t{\n\t\t\t\tif (seenNodes == null)\n\t\t\t\t{\n\t\t\t\t\tseenNodes = new Object();\n\t\t\t\t}\n\n\t\t\t\tif (trackAncestors)\n\t\t\t\t{\n\t\t\t\t\t// Set up hash code for root\n\t\t\t\t\tinternalNode.hashCode = [];\n\t\t\t\t\tinternalNode.hashCode[0] = this.dfsCount;\n\t\t\t\t\tinternalNode.hashCode[1] = i;\n\t\t\t\t\tthis.extendedDfs(null, internalNode, null, visitor, seenNodes,\n\t\t\t\t\t\t\tinternalNode.hashCode, i, 0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.dfs(null, internalNode, null, visitor, seenNodes, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.dfsCount++;\n\t}\n};\n\n/**\n * Function: dfs\n *\n * Performs a depth first search on the internal hierarchy model\n *\n * Parameters:\n *\n * parent - the parent internal node of the current internal node\n * root - the current internal node\n * connectingEdge - the internal edge connecting the internal node and the parent\n * internal node, if any\n * visitor - the visitor pattern to be called for each node\n * seen - a set of all nodes seen by this dfs a set of all of the\n * ancestor node of the current node\n * layer - the layer on the dfs tree ( not the same as the model ranks )\n */\nmxSwimlaneModel.prototype.dfs = function(parent, root, connectingEdge, visitor, seen, layer)\n{\n\tif (root != null)\n\t{\n\t\tvar rootId = root.id;\n\n\t\tif (seen[rootId] == null)\n\t\t{\n\t\t\tseen[rootId] = root;\n\t\t\tvisitor(parent, root, connectingEdge, layer, 0);\n\n\t\t\t// Copy the connects as source list so that visitors\n\t\t\t// can change the original for edge direction inversions\n\t\t\tvar outgoingEdges = root.connectsAsSource.slice();\n\t\t\t\n\t\t\tfor (var i = 0; i< outgoingEdges.length; i++)\n\t\t\t{\n\t\t\t\tvar internalEdge = outgoingEdges[i];\n\t\t\t\tvar targetNode = internalEdge.target;\n\n\t\t\t\t// Root check is O(|roots|)\n\t\t\t\tthis.dfs(root, targetNode, internalEdge, visitor, seen,\n\t\t\t\t\t\tlayer + 1);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Use the int field to indicate this node has been seen\n\t\t\tvisitor(parent, root, connectingEdge, layer, 1);\n\t\t}\n\t}\n};\n\n/**\n * Function: extendedDfs\n *\n * Performs a depth first search on the internal hierarchy model. This dfs\n * extends the default version by keeping track of cells ancestors, but it\n * should be only used when necessary because of it can be computationally\n * intensive for deep searches.\n *\n * Parameters:\n *\n * parent - the parent internal node of the current internal node\n * root - the current internal node\n * connectingEdge - the internal edge connecting the internal node and the parent\n * internal node, if any\n * visitor - the visitor pattern to be called for each node\n * seen - a set of all nodes seen by this dfs\n * ancestors - the parent hash code\n * childHash - the new hash code for this node\n * layer - the layer on the dfs tree ( not the same as the model ranks )\n */\nmxSwimlaneModel.prototype.extendedDfs = function(parent, root, connectingEdge, visitor, seen, ancestors, childHash, layer)\n{\n\t// Explanation of custom hash set. Previously, the ancestors variable\n\t// was passed through the dfs as a HashSet. The ancestors were copied\n\t// into a new HashSet and when the new child was processed it was also\n\t// added to the set. If the current node was in its ancestor list it\n\t// meant there is a cycle in the graph and this information is passed\n\t// to the visitor.visit() in the seen parameter. The HashSet clone was\n\t// very expensive on CPU so a custom hash was developed using primitive\n\t// types. temp[] couldn't be used so hashCode[] was added to each node.\n\t// Each new child adds another int to the array, copying the prefix\n\t// from its parent. Child of the same parent add different ints (the\n\t// limit is therefore 2^32 children per parent...). If a node has a\n\t// child with the hashCode already set then the child code is compared\n\t// to the same portion of the current nodes array. If they match there\n\t// is a loop.\n\t// Note that the basic mechanism would only allow for 1 use of this\n\t// functionality, so the root nodes have two ints. The second int is\n\t// incremented through each node root and the first is incremented\n\t// through each run of the dfs algorithm (therefore the dfs is not\n\t// thread safe). The hash code of each node is set if not already set,\n\t// or if the first int does not match that of the current run.\n\tif (root != null)\n\t{\n\t\tif (parent != null)\n\t\t{\n\t\t\t// Form this nodes hash code if necessary, that is, if the\n\t\t\t// hashCode variable has not been initialized or if the\n\t\t\t// start of the parent hash code does not equal the start of\n\t\t\t// this nodes hash code, indicating the code was set on a\n\t\t\t// previous run of this dfs.\n\t\t\tif (root.hashCode == null ||\n\t\t\t\troot.hashCode[0] != parent.hashCode[0])\n\t\t\t{\n\t\t\t\tvar hashCodeLength = parent.hashCode.length + 1;\n\t\t\t\troot.hashCode = parent.hashCode.slice();\n\t\t\t\troot.hashCode[hashCodeLength - 1] = childHash;\n\t\t\t}\n\t\t}\n\n\t\tvar rootId = root.id;\n\n\t\tif (seen[rootId] == null)\n\t\t{\n\t\t\tseen[rootId] = root;\n\t\t\tvisitor(parent, root, connectingEdge, layer, 0);\n\n\t\t\t// Copy the connects as source list so that visitors\n\t\t\t// can change the original for edge direction inversions\n\t\t\tvar outgoingEdges = root.connectsAsSource.slice();\n\t\t\tvar incomingEdges = root.connectsAsTarget.slice();\n\n\t\t\tfor (var i = 0; i < outgoingEdges.length; i++)\n\t\t\t{\n\t\t\t\tvar internalEdge = outgoingEdges[i];\n\t\t\t\tvar targetNode = internalEdge.target;\n\t\t\t\t\n\t\t\t\t// Only navigate in source->target direction within the same\n\t\t\t\t// swimlane, or from a lower index swimlane to a higher one\n\t\t\t\tif (root.swimlaneIndex <= targetNode.swimlaneIndex)\n\t\t\t\t{\n\t\t\t\t\tthis.extendedDfs(root, targetNode, internalEdge, visitor, seen,\n\t\t\t\t\t\t\troot.hashCode, i, layer + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor (var i = 0; i < incomingEdges.length; i++)\n\t\t\t{\n\t\t\t\tvar internalEdge = incomingEdges[i];\n\t\t\t\tvar targetNode = internalEdge.source;\n\n\t\t\t\t// Only navigate in target->source direction from a lower index \n\t\t\t\t// swimlane to a higher one\n\t\t\t\tif (root.swimlaneIndex < targetNode.swimlaneIndex)\n\t\t\t\t{\n\t\t\t\t\tthis.extendedDfs(root, targetNode, internalEdge, visitor, seen,\n\t\t\t\t\t\t\troot.hashCode, i, layer + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Use the int field to indicate this node has been seen\n\t\t\tvisitor(parent, root, connectingEdge, layer, 1);\n\t\t}\n\t}\n};\n\n__mxOutput.mxSwimlaneModel = typeof mxSwimlaneModel !== 'undefined' ? mxSwimlaneModel : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxHierarchicalLayoutStage\n * \n * The specific layout interface for hierarchical layouts. It adds a\n * <code>run</code> method with a parameter for the hierarchical layout model\n * that is shared between the layout stages.\n * \n * Constructor: mxHierarchicalLayoutStage\n *\n * Constructs a new hierarchical layout stage.\n */\nfunction mxHierarchicalLayoutStage() { };\n\n/**\n * Function: execute\n * \n * Takes the graph detail and configuration information within the facade\n * and creates the resulting laid out graph within that facade for further\n * use.\n */\nmxHierarchicalLayoutStage.prototype.execute = function(parent) { };\n\n__mxOutput.mxHierarchicalLayoutStage = typeof mxHierarchicalLayoutStage !== 'undefined' ? mxHierarchicalLayoutStage : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxMedianHybridCrossingReduction\n * \n * Sets the horizontal locations of node and edge dummy nodes on each layer.\n * Uses median down and up weighings as well heuristic to straighten edges as\n * far as possible.\n * \n * Constructor: mxMedianHybridCrossingReduction\n *\n * Creates a coordinate assignment.\n * \n * Arguments:\n * \n * intraCellSpacing - the minimum buffer between cells on the same rank\n * interRankCellSpacing - the minimum distance between cells on adjacent ranks\n * orientation - the position of the root node(s) relative to the graph\n * initialX - the leftmost coordinate node placement starts at\n */\nfunction mxMedianHybridCrossingReduction(layout)\n{\n\tthis.layout = layout;\n};\n\n/**\n * Extends mxMedianHybridCrossingReduction.\n */\nmxMedianHybridCrossingReduction.prototype = new mxHierarchicalLayoutStage();\nmxMedianHybridCrossingReduction.prototype.constructor = mxMedianHybridCrossingReduction;\n\n/**\n * Variable: layout\n * \n * Reference to the enclosing <mxHierarchicalLayout>.\n */\nmxMedianHybridCrossingReduction.prototype.layout = null;\n\n/**\n * Variable: maxIterations\n * \n * The maximum number of iterations to perform whilst reducing edge\n * crossings. Default is 24.\n */\nmxMedianHybridCrossingReduction.prototype.maxIterations = 24;\n\n/**\n * Variable: nestedBestRanks\n * \n * Stores each rank as a collection of cells in the best order found for\n * each layer so far\n */\nmxMedianHybridCrossingReduction.prototype.nestedBestRanks = null;\n\n/**\n * Variable: currentBestCrossings\n * \n * The total number of crossings found in the best configuration so far\n */\nmxMedianHybridCrossingReduction.prototype.currentBestCrossings = 0;\n\n/**\n * Variable: iterationsWithoutImprovement\n * \n * The total number of crossings found in the best configuration so far\n */\nmxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement = 0;\n\n/**\n * Variable: maxNoImprovementIterations\n * \n * The total number of crossings found in the best configuration so far\n */\nmxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations = 2;\n\n/**\n * Function: execute\n * \n * Performs a vertex ordering within ranks as described by Gansner et al\n * 1993\n */\nmxMedianHybridCrossingReduction.prototype.execute = function(parent)\n{\n\tvar model = this.layout.getModel();\n\n\t// Stores initial ordering as being the best one found so far\n\tthis.nestedBestRanks = [];\n\t\n\tfor (var i = 0; i < model.ranks.length; i++)\n\t{\n\t\tthis.nestedBestRanks[i] = model.ranks[i].slice();\n\t}\n\n\tvar iterationsWithoutImprovement = 0;\n\tvar currentBestCrossings = this.calculateCrossings(model);\n\n\tfor (var i = 0; i < this.maxIterations &&\n\t\titerationsWithoutImprovement < this.maxNoImprovementIterations; i++)\n\t{\n\t\tthis.weightedMedian(i, model);\n\t\tthis.transpose(i, model);\n\t\tvar candidateCrossings = this.calculateCrossings(model);\n\n\t\tif (candidateCrossings < currentBestCrossings)\n\t\t{\n\t\t\tcurrentBestCrossings = candidateCrossings;\n\t\t\titerationsWithoutImprovement = 0;\n\n\t\t\t// Store the current rankings as the best ones\n\t\t\tfor (var j = 0; j < this.nestedBestRanks.length; j++)\n\t\t\t{\n\t\t\t\tvar rank = model.ranks[j];\n\n\t\t\t\tfor (var k = 0; k < rank.length; k++)\n\t\t\t\t{\n\t\t\t\t\tvar cell = rank[k];\n\t\t\t\t\tthis.nestedBestRanks[j][cell.getGeneralPurposeVariable(j)] = cell;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Increase count of iterations where we haven't improved the\n\t\t\t// layout\n\t\t\titerationsWithoutImprovement++;\n\n\t\t\t// Restore the best values to the cells\n\t\t\tfor (var j = 0; j < this.nestedBestRanks.length; j++)\n\t\t\t{\n\t\t\t\tvar rank = model.ranks[j];\n\t\t\t\t\n\t\t\t\tfor (var k = 0; k < rank.length; k++)\n\t\t\t\t{\n\t\t\t\t\tvar cell = rank[k];\n\t\t\t\t\tcell.setGeneralPurposeVariable(j, k);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (currentBestCrossings == 0)\n\t\t{\n\t\t\t// Do nothing further\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Store the best rankings but in the model\n\tvar ranks = [];\n\tvar rankList = [];\n\n\tfor (var i = 0; i < model.maxRank + 1; i++)\n\t{\n\t\trankList[i] = [];\n\t\tranks[i] = rankList[i];\n\t}\n\n\tfor (var i = 0; i < this.nestedBestRanks.length; i++)\n\t{\n\t\tfor (var j = 0; j < this.nestedBestRanks[i].length; j++)\n\t\t{\n\t\t\trankList[i].push(this.nestedBestRanks[i][j]);\n\t\t}\n\t}\n\n\tmodel.ranks = ranks;\n};\n\n\n/**\n * Function: calculateCrossings\n * \n * Calculates the total number of edge crossing in the current graph.\n * Returns the current number of edge crossings in the hierarchy graph\n * model in the current candidate layout\n * \n * Parameters:\n * \n * model - the internal model describing the hierarchy\n */\nmxMedianHybridCrossingReduction.prototype.calculateCrossings = function(model)\n{\n\tvar numRanks = model.ranks.length;\n\tvar totalCrossings = 0;\n\n\tfor (var i = 1; i < numRanks; i++)\n\t{\n\t\ttotalCrossings += this.calculateRankCrossing(i, model);\n\t}\n\t\n\treturn totalCrossings;\n};\n\n/**\n * Function: calculateRankCrossing\n * \n * Calculates the number of edges crossings between the specified rank and\n * the rank below it. Returns the number of edges crossings with the rank\n * beneath\n * \n * Parameters:\n * \n * i -  the topmost rank of the pair ( higher rank value )\n * model - the internal model describing the hierarchy\n */\nmxMedianHybridCrossingReduction.prototype.calculateRankCrossing = function(i, model)\n{\n\tvar totalCrossings = 0;\n\tvar rank = model.ranks[i];\n\tvar previousRank = model.ranks[i - 1];\n\n\tvar tmpIndices = [];\n\n\t// Iterate over the top rank and fill in the connection information\n\tfor (var j = 0; j < rank.length; j++)\n\t{\n\t\tvar node = rank[j];\n\t\tvar rankPosition = node.getGeneralPurposeVariable(i);\n\t\tvar connectedCells = node.getPreviousLayerConnectedCells(i);\n\t\tvar nodeIndices = [];\n\n\t\tfor (var k = 0; k < connectedCells.length; k++)\n\t\t{\n\t\t\tvar connectedNode = connectedCells[k];\n\t\t\tvar otherCellRankPosition = connectedNode.getGeneralPurposeVariable(i - 1);\n\t\t\tnodeIndices.push(otherCellRankPosition);\n\t\t}\n\t\t\n\t\tnodeIndices.sort(function(x, y) { return x - y; });\n\t\ttmpIndices[rankPosition] = nodeIndices;\n\t}\n\t\n\tvar indices = [];\n\n\tfor (var j = 0; j < tmpIndices.length; j++)\n\t{\n\t\tindices = indices.concat(tmpIndices[j]);\n\t}\n\n\tvar firstIndex = 1;\n\t\n\twhile (firstIndex < previousRank.length)\n\t{\n\t\tfirstIndex <<= 1;\n\t}\n\n\tvar treeSize = 2 * firstIndex - 1;\n\tfirstIndex -= 1;\n\n\tvar tree = [];\n\t\n\tfor (var j = 0; j < treeSize; ++j)\n\t{\n\t\ttree[j] = 0;\n\t}\n\n\tfor (var j = 0; j < indices.length; j++)\n\t{\n\t\tvar index = indices[j];\n\t    var treeIndex = index + firstIndex;\n\t    ++tree[treeIndex];\n\t    \n\t    while (treeIndex > 0)\n\t    {\n\t    \tif (treeIndex % 2)\n\t    \t{\n\t    \t\ttotalCrossings += tree[treeIndex + 1];\n\t    \t}\n\t      \n\t    \ttreeIndex = (treeIndex - 1) >> 1;\n\t    \t++tree[treeIndex];\n\t    }\n\t}\n\n\treturn totalCrossings;\n};\n\n/**\n * Function: transpose\n * \n * Takes each possible adjacent cell pair on each rank and checks if\n * swapping them around reduces the number of crossing\n * \n * Parameters:\n * \n * mainLoopIteration - the iteration number of the main loop\n * model - the internal model describing the hierarchy\n */\nmxMedianHybridCrossingReduction.prototype.transpose = function(mainLoopIteration, model)\n{\n\tvar improved = true;\n\n\t// Track the number of iterations in case of looping\n\tvar count = 0;\n\tvar maxCount = 10;\n\twhile (improved && count++ < maxCount)\n\t{\n\t\t// On certain iterations allow allow swapping of cell pairs with\n\t\t// equal edge crossings switched or not switched. This help to\n\t\t// nudge a stuck layout into a lower crossing total.\n\t\tvar nudge = mainLoopIteration % 2 == 1 && count % 2 == 1;\n\t\timproved = false;\n\t\t\n\t\tfor (var i = 0; i < model.ranks.length; i++)\n\t\t{\n\t\t\tvar rank = model.ranks[i];\n\t\t\tvar orderedCells = [];\n\t\t\t\n\t\t\tfor (var j = 0; j < rank.length; j++)\n\t\t\t{\n\t\t\t\tvar cell = rank[j];\n\t\t\t\tvar tempRank = cell.getGeneralPurposeVariable(i);\n\t\t\t\t\n\t\t\t\t// FIXME: Workaround to avoid negative tempRanks\n\t\t\t\tif (tempRank < 0)\n\t\t\t\t{\n\t\t\t\t\ttempRank = j;\n\t\t\t\t}\n\t\t\t\torderedCells[tempRank] = cell;\n\t\t\t}\n\t\t\t\n\t\t\tvar leftCellAboveConnections = null;\n\t\t\tvar leftCellBelowConnections = null;\n\t\t\tvar rightCellAboveConnections = null;\n\t\t\tvar rightCellBelowConnections = null;\n\t\t\t\n\t\t\tvar leftAbovePositions = null;\n\t\t\tvar leftBelowPositions = null;\n\t\t\tvar rightAbovePositions = null;\n\t\t\tvar rightBelowPositions = null;\n\t\t\t\n\t\t\tvar leftCell = null;\n\t\t\tvar rightCell = null;\n\n\t\t\tfor (var j = 0; j < (rank.length - 1); j++)\n\t\t\t{\n\t\t\t\t// For each intra-rank adjacent pair of cells\n\t\t\t\t// see if swapping them around would reduce the\n\t\t\t\t// number of edges crossing they cause in total\n\t\t\t\t// On every cell pair except the first on each rank, we\n\t\t\t\t// can save processing using the previous values for the\n\t\t\t\t// right cell on the new left cell\n\t\t\t\tif (j == 0)\n\t\t\t\t{\n\t\t\t\t\tleftCell = orderedCells[j];\n\t\t\t\t\tleftCellAboveConnections = leftCell\n\t\t\t\t\t\t\t.getNextLayerConnectedCells(i);\n\t\t\t\t\tleftCellBelowConnections = leftCell\n\t\t\t\t\t\t\t.getPreviousLayerConnectedCells(i);\n\t\t\t\t\tleftAbovePositions = [];\n\t\t\t\t\tleftBelowPositions = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (var k = 0; k < leftCellAboveConnections.length; k++)\n\t\t\t\t\t{\n\t\t\t\t\t\tleftAbovePositions[k] = leftCellAboveConnections[k].getGeneralPurposeVariable(i + 1);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfor (var k = 0; k < leftCellBelowConnections.length; k++)\n\t\t\t\t\t{\n\t\t\t\t\t\tleftBelowPositions[k] = leftCellBelowConnections[k].getGeneralPurposeVariable(i - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tleftCellAboveConnections = rightCellAboveConnections;\n\t\t\t\t\tleftCellBelowConnections = rightCellBelowConnections;\n\t\t\t\t\tleftAbovePositions = rightAbovePositions;\n\t\t\t\t\tleftBelowPositions = rightBelowPositions;\n\t\t\t\t\tleftCell = rightCell;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trightCell = orderedCells[j + 1];\n\t\t\t\trightCellAboveConnections = rightCell\n\t\t\t\t\t\t.getNextLayerConnectedCells(i);\n\t\t\t\trightCellBelowConnections = rightCell\n\t\t\t\t\t\t.getPreviousLayerConnectedCells(i);\n\n\t\t\t\trightAbovePositions = [];\n\t\t\t\trightBelowPositions = [];\n\n\t\t\t\tfor (var k = 0; k < rightCellAboveConnections.length; k++)\n\t\t\t\t{\n\t\t\t\t\trightAbovePositions[k] = rightCellAboveConnections[k].getGeneralPurposeVariable(i + 1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (var k = 0; k < rightCellBelowConnections.length; k++)\n\t\t\t\t{\n\t\t\t\t\trightBelowPositions[k] = rightCellBelowConnections[k].getGeneralPurposeVariable(i - 1);\n\t\t\t\t}\n\n\t\t\t\tvar totalCurrentCrossings = 0;\n\t\t\t\tvar totalSwitchedCrossings = 0;\n\t\t\t\t\n\t\t\t\tfor (var k = 0; k < leftAbovePositions.length; k++)\n\t\t\t\t{\n\t\t\t\t\tfor (var ik = 0; ik < rightAbovePositions.length; ik++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (leftAbovePositions[k] > rightAbovePositions[ik])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttotalCurrentCrossings++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (leftAbovePositions[k] < rightAbovePositions[ik])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttotalSwitchedCrossings++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (var k = 0; k < leftBelowPositions.length; k++)\n\t\t\t\t{\n\t\t\t\t\tfor (var ik = 0; ik < rightBelowPositions.length; ik++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (leftBelowPositions[k] > rightBelowPositions[ik])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttotalCurrentCrossings++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (leftBelowPositions[k] < rightBelowPositions[ik])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttotalSwitchedCrossings++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ((totalSwitchedCrossings < totalCurrentCrossings) ||\n\t\t\t\t\t(totalSwitchedCrossings == totalCurrentCrossings &&\n\t\t\t\t\tnudge))\n\t\t\t\t{\n\t\t\t\t\tvar temp = leftCell.getGeneralPurposeVariable(i);\n\t\t\t\t\tleftCell.setGeneralPurposeVariable(i, rightCell\n\t\t\t\t\t\t\t.getGeneralPurposeVariable(i));\n\t\t\t\t\trightCell.setGeneralPurposeVariable(i, temp);\n\n\t\t\t\t\t// With this pair exchanged we have to switch all of\n\t\t\t\t\t// values for the left cell to the right cell so the\n\t\t\t\t\t// next iteration for this rank uses it as the left\n\t\t\t\t\t// cell again\n\t\t\t\t\trightCellAboveConnections = leftCellAboveConnections;\n\t\t\t\t\trightCellBelowConnections = leftCellBelowConnections;\n\t\t\t\t\trightAbovePositions = leftAbovePositions;\n\t\t\t\t\trightBelowPositions = leftBelowPositions;\n\t\t\t\t\trightCell = leftCell;\n\t\t\t\t\t\n\t\t\t\t\tif (!nudge)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Don't count nudges as improvement or we'll end\n\t\t\t\t\t\t// up stuck in two combinations and not finishing\n\t\t\t\t\t\t// as early as we should\n\t\t\t\t\t\timproved = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: weightedMedian\n * \n * Sweeps up or down the layout attempting to minimise the median placement\n * of connected cells on adjacent ranks\n * \n * Parameters:\n * \n * iteration - the iteration number of the main loop\n * model - the internal model describing the hierarchy\n */\nmxMedianHybridCrossingReduction.prototype.weightedMedian = function(iteration, model)\n{\n\t// Reverse sweep direction each time through this method\n\tvar downwardSweep = (iteration % 2 == 0);\n\tif (downwardSweep)\n\t{\n\t\tfor (var j = model.maxRank - 1; j >= 0; j--)\n\t\t{\n\t\t\tthis.medianRank(j, downwardSweep);\n\t\t}\n\t}\n\telse\n\t{\n\t\tfor (var j = 1; j < model.maxRank; j++)\n\t\t{\n\t\t\tthis.medianRank(j, downwardSweep);\n\t\t}\n\t}\n};\n\n/**\n * Function: medianRank\n * \n * Attempts to minimise the median placement of connected cells on this rank\n * and one of the adjacent ranks\n * \n * Parameters:\n * \n * rankValue - the layer number of this rank\n * downwardSweep - whether or not this is a downward sweep through the graph\n */\nmxMedianHybridCrossingReduction.prototype.medianRank = function(rankValue, downwardSweep)\n{\n\tvar numCellsForRank = this.nestedBestRanks[rankValue].length;\n\tvar medianValues = [];\n\tvar reservedPositions = [];\n\n\tfor (var i = 0; i < numCellsForRank; i++)\n\t{\n\t\tvar cell = this.nestedBestRanks[rankValue][i];\n\t\tvar sorterEntry = new MedianCellSorter();\n\t\tsorterEntry.cell = cell;\n\n\t\t// Flip whether or not equal medians are flipped on up and down\n\t\t// sweeps\n\t\t// TODO re-implement some kind of nudge\n\t\t// medianValues[i].nudge = !downwardSweep;\n\t\tvar nextLevelConnectedCells;\n\t\t\n\t\tif (downwardSweep)\n\t\t{\n\t\t\tnextLevelConnectedCells = cell\n\t\t\t\t\t.getNextLayerConnectedCells(rankValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnextLevelConnectedCells = cell\n\t\t\t\t\t.getPreviousLayerConnectedCells(rankValue);\n\t\t}\n\t\t\n\t\tvar nextRankValue;\n\t\t\n\t\tif (downwardSweep)\n\t\t{\n\t\t\tnextRankValue = rankValue + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnextRankValue = rankValue - 1;\n\t\t}\n\n\t\tif (nextLevelConnectedCells != null\n\t\t\t\t&& nextLevelConnectedCells.length != 0)\n\t\t{\n\t\t\tsorterEntry.medianValue = this.medianValue(\n\t\t\t\t\tnextLevelConnectedCells, nextRankValue);\n\t\t\tmedianValues.push(sorterEntry);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Nodes with no adjacent vertices are flagged in the reserved array\n\t\t\t// to indicate they should be left in their current position.\n\t\t\treservedPositions[cell.getGeneralPurposeVariable(rankValue)] = true;\n\t\t}\n\t}\n\t\n\tmedianValues.sort(MedianCellSorter.prototype.compare);\n\t\n\t// Set the new position of each node within the rank using\n\t// its temp variable\n\tfor (var i = 0; i < numCellsForRank; i++)\n\t{\n\t\tif (reservedPositions[i] == null)\n\t\t{\n\t\t\tvar cell = medianValues.shift().cell;\n\t\t\tcell.setGeneralPurposeVariable(rankValue, i);\n\t\t}\n\t}\n};\n\n/**\n * Function: medianValue\n * \n * Calculates the median rank order positioning for the specified cell using\n * the connected cells on the specified rank. Returns the median rank\n * ordering value of the connected cells\n * \n * Parameters:\n * \n * connectedCells - the cells on the specified rank connected to the\n * specified cell\n * rankValue - the rank that the connected cell lie upon\n */\nmxMedianHybridCrossingReduction.prototype.medianValue = function(connectedCells, rankValue)\n{\n\tvar medianValues = [];\n\tvar arrayCount = 0;\n\t\n\tfor (var i = 0; i < connectedCells.length; i++)\n\t{\n\t\tvar cell = connectedCells[i];\n\t\tmedianValues[arrayCount++] = cell.getGeneralPurposeVariable(rankValue);\n\t}\n\n\t// Sort() sorts lexicographically by default (i.e. 11 before 9) so force\n\t// numerical order sort\n\tmedianValues.sort(function(a,b){return a - b;});\n\t\n\tif (arrayCount % 2 == 1)\n\t{\n\t\t// For odd numbers of adjacent vertices return the median\n\t\treturn medianValues[Math.floor(arrayCount / 2)];\n\t}\n\telse if (arrayCount == 2)\n\t{\n\t\treturn ((medianValues[0] + medianValues[1]) / 2.0);\n\t}\n\telse\n\t{\n\t\tvar medianPoint = arrayCount / 2;\n\t\tvar leftMedian = medianValues[medianPoint - 1] - medianValues[0];\n\t\tvar rightMedian = medianValues[arrayCount - 1]\n\t\t\t\t- medianValues[medianPoint];\n\n\t\treturn (medianValues[medianPoint - 1] * rightMedian + medianValues[medianPoint]\n\t\t\t\t* leftMedian)\n\t\t\t\t/ (leftMedian + rightMedian);\n\t}\n};\n\n/**\n * Class: MedianCellSorter\n * \n * A utility class used to track cells whilst sorting occurs on the median\n * values. Does not violate (x.compareTo(y)==0) == (x.equals(y))\n *\n * Constructor: MedianCellSorter\n * \n * Constructs a new median cell sorter.\n */\nfunction MedianCellSorter()\n{\n\t// empty\n};\n\n/**\n * Variable: medianValue\n * \n * The weighted value of the cell stored.\n */\nMedianCellSorter.prototype.medianValue = 0;\n\n/**\n * Variable: cell\n * \n * The cell whose median value is being calculated\n */\nMedianCellSorter.prototype.cell = false;\n\n/**\n * Function: compare\n * \n * Compares two MedianCellSorters.\n */\nMedianCellSorter.prototype.compare = function(a, b)\n{\n\tif (a != null && b != null)\n\t{\n\t\tif (b.medianValue > a.medianValue)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\telse if (b.medianValue < a.medianValue)\n\t\t{\n\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t}\n\telse\n\t{\n\t\treturn 0;\n\t}\n};\n\n__mxOutput.mxMedianHybridCrossingReduction = typeof mxMedianHybridCrossingReduction !== 'undefined' ? mxMedianHybridCrossingReduction : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxMinimumCycleRemover\n * \n * An implementation of the first stage of the Sugiyama layout. Straightforward\n * longest path calculation of layer assignment\n * \n * Constructor: mxMinimumCycleRemover\n *\n * Creates a cycle remover for the given internal model.\n */\nfunction mxMinimumCycleRemover(layout)\n{\n\tthis.layout = layout;\n};\n\n/**\n * Extends mxHierarchicalLayoutStage.\n */\nmxMinimumCycleRemover.prototype = new mxHierarchicalLayoutStage();\nmxMinimumCycleRemover.prototype.constructor = mxMinimumCycleRemover;\n\n/**\n * Variable: layout\n * \n * Reference to the enclosing <mxHierarchicalLayout>.\n */\nmxMinimumCycleRemover.prototype.layout = null;\n\n/**\n * Function: execute\n * \n * Takes the graph detail and configuration information within the facade\n * and creates the resulting laid out graph within that facade for further\n * use.\n */\nmxMinimumCycleRemover.prototype.execute = function(parent)\n{\n\tvar model = this.layout.getModel();\n\tvar seenNodes = new Object();\n\tvar unseenNodesArray = model.vertexMapper.getValues();\n\tvar unseenNodes = new Object();\n\t\n\tfor (var i = 0; i < unseenNodesArray.length; i++)\n\t{\n\t\tunseenNodes[unseenNodesArray[i].id] = unseenNodesArray[i];\n\t}\n\t\n\t// Perform a dfs through the internal model. If a cycle is found,\n\t// reverse it.\n\tvar rootsArray = null;\n\t\n\tif (model.roots != null)\n\t{\n\t\tvar modelRoots = model.roots;\n\t\trootsArray = [];\n\t\t\n\t\tfor (var i = 0; i < modelRoots.length; i++)\n\t\t{\n\t\t\trootsArray[i] = model.vertexMapper.get(modelRoots[i]);\n\t\t}\n\t}\n\n\tmodel.visit(function(parent, node, connectingEdge, layer, seen)\n\t{\n\t\t// Check if the cell is in it's own ancestor list, if so\n\t\t// invert the connecting edge and reverse the target/source\n\t\t// relationship to that edge in the parent and the cell\n\t\tif (node.isAncestor(parent))\n\t\t{\n\t\t\tconnectingEdge.invert();\n\t\t\tmxUtils.remove(connectingEdge, parent.connectsAsSource);\n\t\t\tparent.connectsAsTarget.push(connectingEdge);\n\t\t\tmxUtils.remove(connectingEdge, node.connectsAsTarget);\n\t\t\tnode.connectsAsSource.push(connectingEdge);\n\t\t}\n\t\t\n\t\tseenNodes[node.id] = node;\n\t\tdelete unseenNodes[node.id];\n\t}, rootsArray, true, null);\n\n\t// If there are any nodes that should be nodes that the dfs can miss\n\t// these need to be processed with the dfs and the roots assigned\n\t// correctly to form a correct internal model\n\tvar seenNodesCopy = mxUtils.clone(seenNodes, null, true);\n\n\t// Pick a random cell and dfs from it\n\tmodel.visit(function(parent, node, connectingEdge, layer, seen)\n\t{\n\t\t// Check if the cell is in it's own ancestor list, if so\n\t\t// invert the connecting edge and reverse the target/source\n\t\t// relationship to that edge in the parent and the cell\n\t\tif (node.isAncestor(parent))\n\t\t{\n\t\t\tconnectingEdge.invert();\n\t\t\tmxUtils.remove(connectingEdge, parent.connectsAsSource);\n\t\t\tnode.connectsAsSource.push(connectingEdge);\n\t\t\tparent.connectsAsTarget.push(connectingEdge);\n\t\t\tmxUtils.remove(connectingEdge, node.connectsAsTarget);\n\t\t}\n\t\t\n\t\tseenNodes[node.id] = node;\n\t\tdelete unseenNodes[node.id];\n\t}, unseenNodes, true, seenNodesCopy);\n};\n\n__mxOutput.mxMinimumCycleRemover = typeof mxMinimumCycleRemover !== 'undefined' ? mxMinimumCycleRemover : undefined;\n\n/**\n * Copyright (c) 2006-2018, JGraph Ltd\n * Copyright (c) 2006-2018, Gaudenz Alder\n */\n/**\n * Class: mxCoordinateAssignment\n * \n * Sets the horizontal locations of node and edge dummy nodes on each layer.\n * Uses median down and up weighings as well as heuristics to straighten edges as\n * far as possible.\n * \n * Constructor: mxCoordinateAssignment\n *\n * Creates a coordinate assignment.\n * \n * Arguments:\n * \n * intraCellSpacing - the minimum buffer between cells on the same rank\n * interRankCellSpacing - the minimum distance between cells on adjacent ranks\n * orientation - the position of the root node(s) relative to the graph\n * initialX - the leftmost coordinate node placement starts at\n */\nfunction mxCoordinateAssignment(layout, intraCellSpacing, interRankCellSpacing,\n\torientation, initialX, parallelEdgeSpacing)\n{\n\tthis.layout = layout;\n\tthis.intraCellSpacing = intraCellSpacing;\n\tthis.interRankCellSpacing = interRankCellSpacing;\n\tthis.orientation = orientation;\n\tthis.initialX = initialX;\n\tthis.parallelEdgeSpacing = parallelEdgeSpacing;\n};\n\n/**\n * Extends mxHierarchicalLayoutStage.\n */\nmxCoordinateAssignment.prototype = new mxHierarchicalLayoutStage();\nmxCoordinateAssignment.prototype.constructor = mxCoordinateAssignment;\n\n/**\n * Variable: layout\n * \n * Reference to the enclosing <mxHierarchicalLayout>.\n */\nmxCoordinateAssignment.prototype.layout = null;\n\n/**\n * Variable: intraCellSpacing\n * \n * The minimum buffer between cells on the same rank. Default is 30.\n */\nmxCoordinateAssignment.prototype.intraCellSpacing = 30;\n\n/**\n * Variable: interRankCellSpacing\n * \n * The minimum distance between cells on adjacent ranks. Default is 100.\n */\nmxCoordinateAssignment.prototype.interRankCellSpacing = 100;\n\n/**\n * Variable: parallelEdgeSpacing\n * \n * The distance between each parallel edge on each ranks for long edges.\n * Default is 10.\n */\nmxCoordinateAssignment.prototype.parallelEdgeSpacing = 10;\n\n/**\n * Variable: maxIterations\n * \n * The number of heuristic iterations to run. Default is 8.\n */\nmxCoordinateAssignment.prototype.maxIterations = 8;\n\n/**\n * Variable: prefHozEdgeSep\n * \n * The preferred horizontal distance between edges exiting a vertex Default is 5.\n */\nmxCoordinateAssignment.prototype.prefHozEdgeSep = 5;\n\n/**\n * Variable: prefVertEdgeOff\n * \n * The preferred vertical offset between edges exiting a vertex Default is 2.\n */\nmxCoordinateAssignment.prototype.prefVertEdgeOff = 2;\n\n/**\n * Variable: minEdgeJetty\n * \n * The minimum distance for an edge jetty from a vertex Default is 12.\n */\nmxCoordinateAssignment.prototype.minEdgeJetty = 12;\n\n/**\n * Variable: channelBuffer\n * \n * The size of the vertical buffer in the center of inter-rank channels\n * where edge control points should not be placed Default is 4.\n */\nmxCoordinateAssignment.prototype.channelBuffer = 4;\n\n/**\n * Variable: jettyPositions\n * \n * Map of internal edges and (x,y) pair of positions of the start and end jetty\n * for that edge where it connects to the source and target vertices.\n * Note this should technically be a WeakHashMap, but since JS does not\n * have an equivalent, housekeeping must be performed before using.\n * i.e. check all edges are still in the model and clear the values.\n * Note that the y co-ord is the offset of the jetty, not the\n * absolute point\n */\nmxCoordinateAssignment.prototype.jettyPositions = null;\n\n/**\n * Variable: orientation\n * \n * The position of the root ( start ) node(s) relative to the rest of the\n * laid out graph. Default is <mxConstants.DIRECTION_NORTH>.\n */\nmxCoordinateAssignment.prototype.orientation = mxConstants.DIRECTION_NORTH;\n\n/**\n * Variable: initialX\n * \n * The minimum x position node placement starts at\n */\nmxCoordinateAssignment.prototype.initialX = null;\n\n/**\n * Variable: limitX\n * \n * The maximum x value this positioning lays up to\n */\nmxCoordinateAssignment.prototype.limitX = null;\n\n/**\n * Variable: currentXDelta\n * \n * The sum of x-displacements for the current iteration\n */\nmxCoordinateAssignment.prototype.currentXDelta = null;\n\n/**\n * Variable: widestRank\n * \n * The rank that has the widest x position\n */\nmxCoordinateAssignment.prototype.widestRank = null;\n\n/**\n * Variable: rankTopY\n * \n * Internal cache of top-most values of Y for each rank\n */\nmxCoordinateAssignment.prototype.rankTopY = null;\n\n/**\n * Variable: rankBottomY\n * \n * Internal cache of bottom-most value of Y for each rank\n */\nmxCoordinateAssignment.prototype.rankBottomY = null;\n\n/**\n * Variable: widestRankValue\n * \n * The X-coordinate of the edge of the widest rank\n */\nmxCoordinateAssignment.prototype.widestRankValue = null;\n\n/**\n * Variable: rankWidths\n * \n * The width of all the ranks\n */\nmxCoordinateAssignment.prototype.rankWidths = null;\n\n/**\n * Variable: rankY\n * \n * The Y-coordinate of all the ranks\n */\nmxCoordinateAssignment.prototype.rankY = null;\n\n/**\n * Variable: fineTuning\n * \n * Whether or not to perform local optimisations and iterate multiple times\n * through the algorithm. Default is true.\n */\nmxCoordinateAssignment.prototype.fineTuning = true;\n\n/**\n * Variable: nextLayerConnectedCache\n * \n * A store of connections to the layer above for speed\n */\nmxCoordinateAssignment.prototype.nextLayerConnectedCache = null;\n\n/**\n * Variable: previousLayerConnectedCache\n * \n * A store of connections to the layer below for speed\n */\nmxCoordinateAssignment.prototype.previousLayerConnectedCache = null;\n\n/**\n * Variable: groupPadding\n * \n * Padding added to resized parents Default is 10.\n */\nmxCoordinateAssignment.prototype.groupPadding = 10;\n\n/**\n * Utility method to display current positions\n */\nmxCoordinateAssignment.prototype.printStatus = function()\n{\n\tvar model = this.layout.getModel();\n\tmxLog.show();\n\n\tmxLog.writeln('======Coord assignment debug=======');\n\n\tfor (var j = 0; j < model.ranks.length; j++)\n\t{\n\t\tmxLog.write('Rank ', j, ' : ' );\n\t\tvar rank = model.ranks[j];\n\t\t\n\t\tfor (var k = 0; k < rank.length; k++)\n\t\t{\n\t\t\tvar cell = rank[k];\n\t\t\t\n\t\t\tmxLog.write(cell.getGeneralPurposeVariable(j), '  ');\n\t\t}\n\t\tmxLog.writeln();\n\t}\n\t\n\tmxLog.writeln('====================================');\n};\n\n/**\n * Function: execute\n * \n * A basic horizontal coordinate assignment algorithm\n */\nmxCoordinateAssignment.prototype.execute = function(parent)\n{\n\tthis.jettyPositions = Object();\n\tvar model = this.layout.getModel();\n\tthis.currentXDelta = 0.0;\n\n\tthis.initialCoords(this.layout.getGraph(), model);\n\t\n//\tthis.printStatus();\n\t\n\tif (this.fineTuning)\n\t{\n\t\tthis.minNode(model);\n\t}\n\t\n\tvar bestXDelta = 100000000.0;\n\t\n\tif (this.fineTuning)\n\t{\n\t\tfor (var i = 0; i < this.maxIterations; i++)\n\t\t{\n//\t\t\tthis.printStatus();\n\t\t\n\t\t\t// Median Heuristic\n\t\t\tif (i != 0)\n\t\t\t{\n\t\t\t\tthis.medianPos(i, model);\n\t\t\t\tthis.minNode(model);\n\t\t\t}\n\t\t\t\n\t\t\t// if the total offset is less for the current positioning,\n\t\t\t// there are less heavily angled edges and so the current\n\t\t\t// positioning is used\n\t\t\tif (this.currentXDelta < bestXDelta)\n\t\t\t{\n\t\t\t\tfor (var j = 0; j < model.ranks.length; j++)\n\t\t\t\t{\n\t\t\t\t\tvar rank = model.ranks[j];\n\t\t\t\t\t\n\t\t\t\t\tfor (var k = 0; k < rank.length; k++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar cell = rank[k];\n\t\t\t\t\t\tcell.setX(j, cell.getGeneralPurposeVariable(j));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tbestXDelta = this.currentXDelta;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Restore the best positions\n\t\t\t\tfor (var j = 0; j < model.ranks.length; j++)\n\t\t\t\t{\n\t\t\t\t\tvar rank = model.ranks[j];\n\t\t\t\t\t\n\t\t\t\t\tfor (var k = 0; k < rank.length; k++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar cell = rank[k];\n\t\t\t\t\t\tcell.setGeneralPurposeVariable(j, cell.getX(j));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.minPath(this.layout.getGraph(), model);\n\t\t\t\n\t\t\tthis.currentXDelta = 0;\n\t\t}\n\t}\n\t\n\tthis.setCellLocations(this.layout.getGraph(), model);\n};\n\n/**\n * Function: minNode\n * \n * Performs one median positioning sweep in both directions\n */\nmxCoordinateAssignment.prototype.minNode = function(model)\n{\n\t// Queue all nodes\n\tvar nodeList = [];\n\t\n\t// Need to be able to map from cell to cellWrapper\n\tvar map = new mxDictionary();\n\tvar rank = [];\n\t\n\tfor (var i = 0; i <= model.maxRank; i++)\n\t{\n\t\trank[i] = model.ranks[i];\n\t\t\n\t\tfor (var j = 0; j < rank[i].length; j++)\n\t\t{\n\t\t\t// Use the weight to store the rank and visited to store whether\n\t\t\t// or not the cell is in the list\n\t\t\tvar node = rank[i][j];\n\t\t\tvar nodeWrapper = new WeightedCellSorter(node, i);\n\t\t\tnodeWrapper.rankIndex = j;\n\t\t\tnodeWrapper.visited = true;\n\t\t\tnodeList.push(nodeWrapper);\n\t\t\t\n\t\t\tmap.put(node, nodeWrapper);\n\t\t}\n\t}\n\t\n\t// Set a limit of the maximum number of times we will access the queue\n\t// in case a loop appears\n\tvar maxTries = nodeList.length * 10;\n\tvar count = 0;\n\t\n\t// Don't move cell within this value of their median\n\tvar tolerance = 1;\n\t\n\twhile (nodeList.length > 0 && count <= maxTries)\n\t{\n\t\tvar cellWrapper = nodeList.shift();\n\t\tvar cell = cellWrapper.cell;\n\t\t\n\t\tvar rankValue = cellWrapper.weightedValue;\n\t\tvar rankIndex = parseInt(cellWrapper.rankIndex);\n\t\t\n\t\tvar nextLayerConnectedCells = cell.getNextLayerConnectedCells(rankValue);\n\t\tvar previousLayerConnectedCells = cell.getPreviousLayerConnectedCells(rankValue);\n\t\t\n\t\tvar numNextLayerConnected = nextLayerConnectedCells.length;\n\t\tvar numPreviousLayerConnected = previousLayerConnectedCells.length;\n\n\t\tvar medianNextLevel = this.medianXValue(nextLayerConnectedCells,\n\t\t\t\trankValue + 1);\n\t\tvar medianPreviousLevel = this.medianXValue(previousLayerConnectedCells,\n\t\t\t\trankValue - 1);\n\n\t\tvar numConnectedNeighbours = numNextLayerConnected\n\t\t\t\t+ numPreviousLayerConnected;\n\t\tvar currentPosition = cell.getGeneralPurposeVariable(rankValue);\n\t\tvar cellMedian = currentPosition;\n\t\t\n\t\tif (numConnectedNeighbours > 0)\n\t\t{\n\t\t\tcellMedian = (medianNextLevel * numNextLayerConnected + medianPreviousLevel\n\t\t\t\t\t* numPreviousLayerConnected)\n\t\t\t\t\t/ numConnectedNeighbours;\n\t\t}\n\n\t\t// Flag storing whether or not position has changed\n\t\tvar positionChanged = false;\n\t\t\n\t\tif (cellMedian < currentPosition - tolerance)\n\t\t{\n\t\t\tif (rankIndex == 0)\n\t\t\t{\n\t\t\t\tcell.setGeneralPurposeVariable(rankValue, cellMedian);\n\t\t\t\tpositionChanged = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar leftCell = rank[rankValue][rankIndex - 1];\n\t\t\t\tvar leftLimit = leftCell\n\t\t\t\t\t\t.getGeneralPurposeVariable(rankValue);\n\t\t\t\tleftLimit = leftLimit + leftCell.width / 2\n\t\t\t\t\t\t+ this.intraCellSpacing + cell.width / 2;\n\n\t\t\t\tif (leftLimit < cellMedian)\n\t\t\t\t{\n\t\t\t\t\tcell.setGeneralPurposeVariable(rankValue, cellMedian);\n\t\t\t\t\tpositionChanged = true;\n\t\t\t\t}\n\t\t\t\telse if (leftLimit < cell\n\t\t\t\t\t\t.getGeneralPurposeVariable(rankValue)\n\t\t\t\t\t\t- tolerance)\n\t\t\t\t{\n\t\t\t\t\tcell.setGeneralPurposeVariable(rankValue, leftLimit);\n\t\t\t\t\tpositionChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (cellMedian > currentPosition + tolerance)\n\t\t{\n\t\t\tvar rankSize = rank[rankValue].length;\n\t\t\t\n\t\t\tif (rankIndex == rankSize - 1)\n\t\t\t{\n\t\t\t\tcell.setGeneralPurposeVariable(rankValue, cellMedian);\n\t\t\t\tpositionChanged = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar rightCell = rank[rankValue][rankIndex + 1];\n\t\t\t\tvar rightLimit = rightCell\n\t\t\t\t\t\t.getGeneralPurposeVariable(rankValue);\n\t\t\t\trightLimit = rightLimit - rightCell.width / 2\n\t\t\t\t\t\t- this.intraCellSpacing - cell.width / 2;\n\t\t\t\t\n\t\t\t\tif (rightLimit > cellMedian)\n\t\t\t\t{\n\t\t\t\t\tcell.setGeneralPurposeVariable(rankValue, cellMedian);\n\t\t\t\t\tpositionChanged = true;\n\t\t\t\t}\n\t\t\t\telse if (rightLimit > cell\n\t\t\t\t\t\t.getGeneralPurposeVariable(rankValue)\n\t\t\t\t\t\t+ tolerance)\n\t\t\t\t{\n\t\t\t\t\tcell.setGeneralPurposeVariable(rankValue, rightLimit);\n\t\t\t\t\tpositionChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (positionChanged)\n\t\t{\n\t\t\t// Add connected nodes to map and list\n\t\t\tfor (var i = 0; i < nextLayerConnectedCells.length; i++)\n\t\t\t{\n\t\t\t\tvar connectedCell = nextLayerConnectedCells[i];\n\t\t\t\tvar connectedCellWrapper = map.get(connectedCell);\n\t\t\t\t\n\t\t\t\tif (connectedCellWrapper != null)\n\t\t\t\t{\n\t\t\t\t\tif (connectedCellWrapper.visited == false)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnectedCellWrapper.visited = true;\n\t\t\t\t\t\tnodeList.push(connectedCellWrapper);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add connected nodes to map and list\n\t\t\tfor (var i = 0; i < previousLayerConnectedCells.length; i++)\n\t\t\t{\n\t\t\t\tvar connectedCell = previousLayerConnectedCells[i];\n\t\t\t\tvar connectedCellWrapper = map.get(connectedCell);\n\n\t\t\t\tif (connectedCellWrapper != null)\n\t\t\t\t{\n\t\t\t\t\tif (connectedCellWrapper.visited == false)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnectedCellWrapper.visited = true;\n\t\t\t\t\t\tnodeList.push(connectedCellWrapper);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellWrapper.visited = false;\n\t\tcount++;\n\t}\n};\n\n/**\n * Function: medianPos\n * \n * Performs one median positioning sweep in one direction\n * \n * Parameters:\n * \n * i - the iteration of the whole process\n * model - an internal model of the hierarchical layout\n */\nmxCoordinateAssignment.prototype.medianPos = function(i, model)\n{\n\t// Reverse sweep direction each time through this method\n\tvar downwardSweep = (i % 2 == 0);\n\t\n\tif (downwardSweep)\n\t{\n\t\tfor (var j = model.maxRank; j > 0; j--)\n\t\t{\n\t\t\tthis.rankMedianPosition(j - 1, model, j);\n\t\t}\n\t}\n\telse\n\t{\n\t\tfor (var j = 0; j < model.maxRank - 1; j++)\n\t\t{\n\t\t\tthis.rankMedianPosition(j + 1, model, j);\n\t\t}\n\t}\n};\n\n/**\n * Function: rankMedianPosition\n * \n * Performs median minimisation over one rank.\n * \n * Parameters:\n * \n * rankValue - the layer number of this rank\n * model - an internal model of the hierarchical layout\n * nextRankValue - the layer number whose connected cels are to be laid out\n * relative to\n */\nmxCoordinateAssignment.prototype.rankMedianPosition = function(rankValue, model, nextRankValue)\n{\n\tvar rank = model.ranks[rankValue];\n\n\t// Form an array of the order in which the cell are to be processed\n\t// , the order is given by the weighted sum of the in or out edges,\n\t// depending on whether we're traveling up or down the hierarchy.\n\tvar weightedValues = [];\n\tvar cellMap = new Object();\n\n\tfor (var i = 0; i < rank.length; i++)\n\t{\n\t\tvar currentCell = rank[i];\n\t\tweightedValues[i] = new WeightedCellSorter();\n\t\tweightedValues[i].cell = currentCell;\n\t\tweightedValues[i].rankIndex = i;\n\t\tcellMap[currentCell.id] = weightedValues[i];\n\t\tvar nextLayerConnectedCells = null;\n\t\t\n\t\tif (nextRankValue < rankValue)\n\t\t{\n\t\t\tnextLayerConnectedCells = currentCell\n\t\t\t\t\t.getPreviousLayerConnectedCells(rankValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnextLayerConnectedCells = currentCell\n\t\t\t\t\t.getNextLayerConnectedCells(rankValue);\n\t\t}\n\n\t\t// Calculate the weighing based on this node type and those this\n\t\t// node is connected to on the next layer\n\t\tweightedValues[i].weightedValue = this.calculatedWeightedValue(\n\t\t\t\tcurrentCell, nextLayerConnectedCells);\n\t}\n\n\tweightedValues.sort(WeightedCellSorter.prototype.compare);\n\n\t// Set the new position of each node within the rank using\n\t// its temp variable\n\t\n\tfor (var i = 0; i < weightedValues.length; i++)\n\t{\n\t\tvar numConnectionsNextLevel = 0;\n\t\tvar cell = weightedValues[i].cell;\n\t\tvar nextLayerConnectedCells = null;\n\t\tvar medianNextLevel = 0;\n\n\t\tif (nextRankValue < rankValue)\n\t\t{\n\t\t\tnextLayerConnectedCells = cell.getPreviousLayerConnectedCells(\n\t\t\t\t\trankValue).slice();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnextLayerConnectedCells = cell.getNextLayerConnectedCells(\n\t\t\t\t\trankValue).slice();\n\t\t}\n\n\t\tif (nextLayerConnectedCells != null)\n\t\t{\n\t\t\tnumConnectionsNextLevel = nextLayerConnectedCells.length;\n\t\t\t\n\t\t\tif (numConnectionsNextLevel > 0)\n\t\t\t{\n\t\t\t\tmedianNextLevel = this.medianXValue(nextLayerConnectedCells,\n\t\t\t\t\t\tnextRankValue);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// For case of no connections on the next level set the\n\t\t\t\t// median to be the current position and try to be\n\t\t\t\t// positioned there\n\t\t\t\tmedianNextLevel = cell.getGeneralPurposeVariable(rankValue);\n\t\t\t}\n\t\t}\n\n\t\tvar leftBuffer = 0.0;\n\t\tvar leftLimit = -100000000.0;\n\t\t\n\t\tfor (var j = weightedValues[i].rankIndex - 1; j >= 0;)\n\t\t{\n\t\t\tvar weightedValue = cellMap[rank[j].id];\n\t\t\t\n\t\t\tif (weightedValue != null)\n\t\t\t{\n\t\t\t\tvar leftCell = weightedValue.cell;\n\t\t\t\t\n\t\t\t\tif (weightedValue.visited)\n\t\t\t\t{\n\t\t\t\t\t// The left limit is the right hand limit of that\n\t\t\t\t\t// cell plus any allowance for unallocated cells\n\t\t\t\t\t// in-between\n\t\t\t\t\tleftLimit = leftCell\n\t\t\t\t\t\t\t.getGeneralPurposeVariable(rankValue)\n\t\t\t\t\t\t\t+ leftCell.width\n\t\t\t\t\t\t\t/ 2.0\n\t\t\t\t\t\t\t+ this.intraCellSpacing\n\t\t\t\t\t\t\t+ leftBuffer + cell.width / 2.0;\n\t\t\t\t\tj = -1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tleftBuffer += leftCell.width + this.intraCellSpacing;\n\t\t\t\t\tj--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar rightBuffer = 0.0;\n\t\tvar rightLimit = 100000000.0;\n\t\t\n\t\tfor (var j = weightedValues[i].rankIndex + 1; j < weightedValues.length;)\n\t\t{\n\t\t\tvar weightedValue = cellMap[rank[j].id];\n\t\t\t\n\t\t\tif (weightedValue != null)\n\t\t\t{\n\t\t\t\tvar rightCell = weightedValue.cell;\n\t\t\t\t\n\t\t\t\tif (weightedValue.visited)\n\t\t\t\t{\n\t\t\t\t\t// The left limit is the right hand limit of that\n\t\t\t\t\t// cell plus any allowance for unallocated cells\n\t\t\t\t\t// in-between\n\t\t\t\t\trightLimit = rightCell\n\t\t\t\t\t\t\t.getGeneralPurposeVariable(rankValue)\n\t\t\t\t\t\t\t- rightCell.width\n\t\t\t\t\t\t\t/ 2.0\n\t\t\t\t\t\t\t- this.intraCellSpacing\n\t\t\t\t\t\t\t- rightBuffer - cell.width / 2.0;\n\t\t\t\t\tj = weightedValues.length;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\trightBuffer += rightCell.width + this.intraCellSpacing;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (medianNextLevel >= leftLimit && medianNextLevel <= rightLimit)\n\t\t{\n\t\t\tcell.setGeneralPurposeVariable(rankValue, medianNextLevel);\n\t\t}\n\t\telse if (medianNextLevel < leftLimit)\n\t\t{\n\t\t\t// Couldn't place at median value, place as close to that\n\t\t\t// value as possible\n\t\t\tcell.setGeneralPurposeVariable(rankValue, leftLimit);\n\t\t\tthis.currentXDelta += leftLimit - medianNextLevel;\n\t\t}\n\t\telse if (medianNextLevel > rightLimit)\n\t\t{\n\t\t\t// Couldn't place at median value, place as close to that\n\t\t\t// value as possible\n\t\t\tcell.setGeneralPurposeVariable(rankValue, rightLimit);\n\t\t\tthis.currentXDelta += medianNextLevel - rightLimit;\n\t\t}\n\n\t\tweightedValues[i].visited = true;\n\t}\n};\n\n/**\n * Function: calculatedWeightedValue\n * \n * Calculates the priority the specified cell has based on the type of its\n * cell and the cells it is connected to on the next layer\n * \n * Parameters:\n * \n * currentCell - the cell whose weight is to be calculated\n * collection - the cells the specified cell is connected to\n */\nmxCoordinateAssignment.prototype.calculatedWeightedValue = function(currentCell, collection)\n{\n\tvar totalWeight = 0;\n\t\n\tfor (var i = 0; i < collection.length; i++)\n\t{\n\t\tvar cell = collection[i];\n\n\t\tif (currentCell.isVertex() && cell.isVertex())\n\t\t{\n\t\t\ttotalWeight++;\n\t\t}\n\t\telse if (currentCell.isEdge() && cell.isEdge())\n\t\t{\n\t\t\ttotalWeight += 8;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttotalWeight += 2;\n\t\t}\n\t}\n\n\treturn totalWeight;\n};\n\n/**\n * Function: medianXValue\n * \n * Calculates the median position of the connected cell on the specified\n * rank\n * \n * Parameters:\n * \n * connectedCells - the cells the candidate connects to on this level\n * rankValue - the layer number of this rank\n */\nmxCoordinateAssignment.prototype.medianXValue = function(connectedCells, rankValue)\n{\n\tif (connectedCells.length == 0)\n\t{\n\t\treturn 0;\n\t}\n\n\tvar medianValues = [];\n\n\tfor (var i = 0; i < connectedCells.length; i++)\n\t{\n\t\tmedianValues[i] = connectedCells[i].getGeneralPurposeVariable(rankValue);\n\t}\n\n\tmedianValues.sort(function(a,b){return a - b;});\n\t\n\tif (connectedCells.length % 2 == 1)\n\t{\n\t\t// For odd numbers of adjacent vertices return the median\n\t\treturn medianValues[Math.floor(connectedCells.length / 2)];\n\t}\n\telse\n\t{\n\t\tvar medianPoint = connectedCells.length / 2;\n\t\tvar leftMedian = medianValues[medianPoint - 1];\n\t\tvar rightMedian = medianValues[medianPoint];\n\n\t\treturn ((leftMedian + rightMedian) / 2);\n\t}\n};\n\n/**\n * Function: initialCoords\n * \n * Sets up the layout in an initial positioning. The ranks are all centered\n * as much as possible along the middle vertex in each rank. The other cells\n * are then placed as close as possible on either side.\n * \n * Parameters:\n * \n * facade - the facade describing the input graph\n * model - an internal model of the hierarchical layout\n */\nmxCoordinateAssignment.prototype.initialCoords = function(facade, model)\n{\n\tthis.calculateWidestRank(facade, model);\n\n\t// Sweep up and down from the widest rank\n\tfor (var i = this.widestRank; i >= 0; i--)\n\t{\n\t\tif (i < model.maxRank)\n\t\t{\n\t\t\tthis.rankCoordinates(i, facade, model);\n\t\t}\n\t}\n\n\tfor (var i = this.widestRank+1; i <= model.maxRank; i++)\n\t{\n\t\tif (i > 0)\n\t\t{\n\t\t\tthis.rankCoordinates(i, facade, model);\n\t\t}\n\t}\n};\n\n/**\n * Function: rankCoordinates\n * \n * Sets up the layout in an initial positioning. All the first cells in each\n * rank are moved to the left and the rest of the rank inserted as close\n * together as their size and buffering permits. This method works on just\n * the specified rank.\n * \n * Parameters:\n * \n * rankValue - the current rank being processed\n * graph - the facade describing the input graph\n * model - an internal model of the hierarchical layout\n */\nmxCoordinateAssignment.prototype.rankCoordinates = function(rankValue, graph, model)\n{\n\tvar rank = model.ranks[rankValue];\n\tvar maxY = 0.0;\n\tvar localX = this.initialX + (this.widestRankValue - this.rankWidths[rankValue])\n\t\t\t/ 2;\n\n\t// Store whether or not any of the cells' bounds were unavailable so\n\t// to only issue the warning once for all cells\n\tvar boundsWarning = false;\n\t\n\tfor (var i = 0; i < rank.length; i++)\n\t{\n\t\tvar node = rank[i];\n\t\t\n\t\tif (node.isVertex())\n\t\t{\n\t\t\tvar bounds = this.layout.getVertexBounds(node.cell);\n\n\t\t\tif (bounds != null)\n\t\t\t{\n\t\t\t\tif (this.orientation == mxConstants.DIRECTION_NORTH ||\n\t\t\t\t\tthis.orientation == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t{\n\t\t\t\t\tnode.width = bounds.width;\n\t\t\t\t\tnode.height = bounds.height;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnode.width = bounds.height;\n\t\t\t\t\tnode.height = bounds.width;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tboundsWarning = true;\n\t\t\t}\n\n\t\t\tmaxY = Math.max(maxY, node.height);\n\t\t}\n\t\telse if (node.isEdge())\n\t\t{\n\t\t\t// The width is the number of additional parallel edges\n\t\t\t// time the parallel edge spacing\n\t\t\tvar numEdges = 1;\n\n\t\t\tif (node.edges != null)\n\t\t\t{\n\t\t\t\tnumEdges = node.edges.length;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmxLog.warn('edge.edges is null');\n\t\t\t}\n\n\t\t\tnode.width = (numEdges - 1) * this.parallelEdgeSpacing;\n\t\t}\n\n\t\t// Set the initial x-value as being the best result so far\n\t\tlocalX += node.width / 2.0;\n\t\tnode.setX(rankValue, localX);\n\t\tnode.setGeneralPurposeVariable(rankValue, localX);\n\t\tlocalX += node.width / 2.0;\n\t\tlocalX += this.intraCellSpacing;\n\t}\n\n\tif (boundsWarning == true)\n\t{\n\t\tmxLog.warn('At least one cell has no bounds');\n\t}\n};\n\n/**\n * Function: calculateWidestRank\n * \n * Calculates the width rank in the hierarchy. Also set the y value of each\n * rank whilst performing the calculation\n * \n * Parameters:\n * \n * graph - the facade describing the input graph\n * model - an internal model of the hierarchical layout\n */\nmxCoordinateAssignment.prototype.calculateWidestRank = function(graph, model)\n{\n\t// Starting y co-ordinate\n\tvar y = -this.interRankCellSpacing;\n\t\n\t// Track the widest cell on the last rank since the y\n\t// difference depends on it\n\tvar lastRankMaxCellHeight = 0.0;\n\tthis.rankWidths = [];\n\tthis.rankY = [];\n\n\tfor (var rankValue = model.maxRank; rankValue >= 0; rankValue--)\n\t{\n\t\t// Keep track of the widest cell on this rank\n\t\tvar maxCellHeight = 0.0;\n\t\tvar rank = model.ranks[rankValue];\n\t\tvar localX = this.initialX;\n\n\t\t// Store whether or not any of the cells' bounds were unavailable so\n\t\t// to only issue the warning once for all cells\n\t\tvar boundsWarning = false;\n\t\t\n\t\tfor (var i = 0; i < rank.length; i++)\n\t\t{\n\t\t\tvar node = rank[i];\n\n\t\t\tif (node.isVertex())\n\t\t\t{\n\t\t\t\tvar bounds = this.layout.getVertexBounds(node.cell);\n\n\t\t\t\tif (bounds != null)\n\t\t\t\t{\n\t\t\t\t\tif (this.orientation == mxConstants.DIRECTION_NORTH ||\n\t\t\t\t\t\tthis.orientation == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.width = bounds.width;\n\t\t\t\t\t\tnode.height = bounds.height;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.width = bounds.height;\n\t\t\t\t\t\tnode.height = bounds.width;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tboundsWarning = true;\n\t\t\t\t}\n\n\t\t\t\tmaxCellHeight = Math.max(maxCellHeight, node.height);\n\t\t\t}\n\t\t\telse if (node.isEdge())\n\t\t\t{\n\t\t\t\t// The width is the number of additional parallel edges\n\t\t\t\t// time the parallel edge spacing\n\t\t\t\tvar numEdges = 1;\n\n\t\t\t\tif (node.edges != null)\n\t\t\t\t{\n\t\t\t\t\tnumEdges = node.edges.length;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmxLog.warn('edge.edges is null');\n\t\t\t\t}\n\n\t\t\t\tnode.width = (numEdges - 1) * this.parallelEdgeSpacing;\n\t\t\t}\n\n\t\t\t// Set the initial x-value as being the best result so far\n\t\t\tlocalX += node.width / 2.0;\n\t\t\tnode.setX(rankValue, localX);\n\t\t\tnode.setGeneralPurposeVariable(rankValue, localX);\n\t\t\tlocalX += node.width / 2.0;\n\t\t\tlocalX += this.intraCellSpacing;\n\n\t\t\tif (localX > this.widestRankValue)\n\t\t\t{\n\t\t\t\tthis.widestRankValue = localX;\n\t\t\t\tthis.widestRank = rankValue;\n\t\t\t}\n\n\t\t\tthis.rankWidths[rankValue] = localX;\n\t\t}\n\n\t\tif (boundsWarning == true)\n\t\t{\n\t\t\tmxLog.warn('At least one cell has no bounds');\n\t\t}\n\n\t\tthis.rankY[rankValue] = y;\n\t\tvar distanceToNextRank = maxCellHeight / 2.0\n\t\t\t\t+ lastRankMaxCellHeight / 2.0 + this.interRankCellSpacing;\n\t\tlastRankMaxCellHeight = maxCellHeight;\n\n\t\tif (this.orientation == mxConstants.DIRECTION_NORTH ||\n\t\t\tthis.orientation == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\ty += distanceToNextRank;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ty -= distanceToNextRank;\n\t\t}\n\n\t\tfor (var i = 0; i < rank.length; i++)\n\t\t{\n\t\t\tvar cell = rank[i];\n\t\t\tcell.setY(rankValue, y);\n\t\t}\n\t}\n};\n\n/**\n * Function: minPath\n * \n * Straightens out chains of virtual nodes where possibleacade to those stored after this layout\n * processing step has completed.\n * \n * Parameters:\n *\n * graph - the facade describing the input graph\n * model - an internal model of the hierarchical layout\n */\nmxCoordinateAssignment.prototype.minPath = function(graph, model)\n{\n\t// Work down and up each edge with at least 2 control points\n\t// trying to straighten each one out. If the same number of\n\t// straight segments are formed in both directions, the \n\t// preferred direction used is the one where the final\n\t// control points have the least offset from the connectable \n\t// region of the terminating vertices\n\tvar edges = model.edgeMapper.getValues();\n\t\n\tfor (var j = 0; j < edges.length; j++)\n\t{\n\t\tvar cell = edges[j];\n\t\t\n\t\tif (cell.maxRank - cell.minRank - 1 < 1)\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\n\t\t// At least two virtual nodes in the edge\n\t\t// Check first whether the edge is already straight\n\t\tvar referenceX = cell\n\t\t\t\t.getGeneralPurposeVariable(cell.minRank + 1);\n\t\tvar edgeStraight = true;\n\t\tvar refSegCount = 0;\n\t\t\n\t\tfor (var i = cell.minRank + 2; i < cell.maxRank; i++)\n\t\t{\n\t\t\tvar x = cell.getGeneralPurposeVariable(i);\n\n\t\t\tif (referenceX != x)\n\t\t\t{\n\t\t\t\tedgeStraight = false;\n\t\t\t\treferenceX = x;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trefSegCount++;\n\t\t\t}\n\t\t}\n\n\t\tif (!edgeStraight)\n\t\t{\n\t\t\tvar upSegCount = 0;\n\t\t\tvar downSegCount = 0;\n\t\t\tvar upXPositions = [];\n\t\t\tvar downXPositions = [];\n\n\t\t\tvar currentX = cell.getGeneralPurposeVariable(cell.minRank + 1);\n\n\t\t\tfor (var i = cell.minRank + 1; i < cell.maxRank - 1; i++)\n\t\t\t{\n\t\t\t\t// Attempt to straight out the control point on the\n\t\t\t\t// next segment up with the current control point.\n\t\t\t\tvar nextX = cell.getX(i + 1);\n\n\t\t\t\tif (currentX == nextX)\n\t\t\t\t{\n\t\t\t\t\tupXPositions[i - cell.minRank - 1] = currentX;\n\t\t\t\t\tupSegCount++;\n\t\t\t\t}\n\t\t\t\telse if (this.repositionValid(model, cell, i + 1, currentX))\n\t\t\t\t{\n\t\t\t\t\tupXPositions[i - cell.minRank - 1] = currentX;\n\t\t\t\t\tupSegCount++;\n\t\t\t\t\t// Leave currentX at same value\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tupXPositions[i - cell.minRank - 1] = nextX;\n\t\t\t\t\tcurrentX = nextX;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\tcurrentX = cell.getX(i);\n\n\t\t\tfor (var i = cell.maxRank - 1; i > cell.minRank + 1; i--)\n\t\t\t{\n\t\t\t\t// Attempt to straight out the control point on the\n\t\t\t\t// next segment down with the current control point.\n\t\t\t\tvar nextX = cell.getX(i - 1);\n\n\t\t\t\tif (currentX == nextX)\n\t\t\t\t{\n\t\t\t\t\tdownXPositions[i - cell.minRank - 2] = currentX;\n\t\t\t\t\tdownSegCount++;\n\t\t\t\t}\n\t\t\t\telse if (this.repositionValid(model, cell, i - 1, currentX))\n\t\t\t\t{\n\t\t\t\t\tdownXPositions[i - cell.minRank - 2] = currentX;\n\t\t\t\t\tdownSegCount++;\n\t\t\t\t\t// Leave currentX at same value\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdownXPositions[i - cell.minRank - 2] = cell.getX(i-1);\n\t\t\t\t\tcurrentX = nextX;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (downSegCount > refSegCount || upSegCount > refSegCount)\n\t\t\t{\n\t\t\t\tif (downSegCount >= upSegCount)\n\t\t\t\t{\n\t\t\t\t\t// Apply down calculation values\n\t\t\t\t\tfor (var i = cell.maxRank - 2; i > cell.minRank; i--)\n\t\t\t\t\t{\n\t\t\t\t\t\tcell.setX(i, downXPositions[i - cell.minRank - 1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (upSegCount > downSegCount)\n\t\t\t\t{\n\t\t\t\t\t// Apply up calculation values\n\t\t\t\t\tfor (var i = cell.minRank + 2; i < cell.maxRank; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tcell.setX(i, upXPositions[i - cell.minRank - 2]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Neither direction provided a favourable result\n\t\t\t\t\t// But both calculations are better than the\n\t\t\t\t\t// existing solution, so apply the one with minimal\n\t\t\t\t\t// offset to attached vertices at either end.\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: repositionValid\n * \n * Determines whether or not a node may be moved to the specified x \n * position on the specified rank\n * \n * Parameters:\n *\n * model - the layout model\n * cell - the cell being analysed\n * rank - the layer of the cell\n * position - the x position being sought\n */\nmxCoordinateAssignment.prototype.repositionValid = function(model, cell, rank, position)\n{\n\tvar rankArray = model.ranks[rank];\n\tvar rankIndex = -1;\n\n\tfor (var i = 0; i < rankArray.length; i++)\n\t{\n\t\tif (cell == rankArray[i])\n\t\t{\n\t\t\trankIndex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (rankIndex < 0)\n\t{\n\t\treturn false;\n\t}\n\n\tvar currentX = cell.getGeneralPurposeVariable(rank);\n\n\tif (position < currentX)\n\t{\n\t\t// Trying to move node to the left.\n\t\tif (rankIndex == 0)\n\t\t{\n\t\t\t// Left-most node, can move anywhere\n\t\t\treturn true;\n\t\t}\n\n\t\tvar leftCell = rankArray[rankIndex - 1];\n\t\tvar leftLimit = leftCell.getGeneralPurposeVariable(rank);\n\t\tleftLimit = leftLimit + leftCell.width / 2\n\t\t\t\t+ this.intraCellSpacing + cell.width / 2;\n\n\t\tif (leftLimit <= position)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (position > currentX)\n\t{\n\t\t// Trying to move node to the right.\n\t\tif (rankIndex == rankArray.length - 1)\n\t\t{\n\t\t\t// Right-most node, can move anywhere\n\t\t\treturn true;\n\t\t}\n\n\t\tvar rightCell = rankArray[rankIndex + 1];\n\t\tvar rightLimit = rightCell.getGeneralPurposeVariable(rank);\n\t\trightLimit = rightLimit - rightCell.width / 2\n\t\t\t\t- this.intraCellSpacing - cell.width / 2;\n\n\t\tif (rightLimit >= position)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\n/**\n * Function: setCellLocations\n * \n * Sets the cell locations in the facade to those stored after this layout\n * processing step has completed.\n * \n * Parameters:\n *\n * graph - the input graph\n * model - the layout model\n */\nmxCoordinateAssignment.prototype.setCellLocations = function(graph, model)\n{\n\tthis.rankTopY = [];\n\tthis.rankBottomY = [];\n\n\tfor (var i = 0; i < model.ranks.length; i++)\n\t{\n\t\tthis.rankTopY[i] = Number.MAX_VALUE;\n\t\tthis.rankBottomY[i] = -Number.MAX_VALUE;\n\t}\n\t\n\tvar vertices = model.vertexMapper.getValues();\n\n\t// Process vertices all first, since they define the lower and \n\t// limits of each rank. Between these limits lie the channels\n\t// where the edges can be routed across the graph\n\n\tfor (var i = 0; i < vertices.length; i++)\n\t{\n\t\tthis.setVertexLocation(vertices[i]);\n\t}\n\t\n\t// Post process edge styles. Needs the vertex locations set for initial\n\t// values of the top and bottoms of each rank\n\tif (this.layout.edgeStyle == mxHierarchicalEdgeStyle.ORTHOGONAL\n\t\t\t|| this.layout.edgeStyle == mxHierarchicalEdgeStyle.POLYLINE\n\t\t\t|| this.layout.edgeStyle == mxHierarchicalEdgeStyle.CURVE)\n\t{\n\t\tthis.localEdgeProcessing(model);\n\t}\n\n\tvar edges = model.edgeMapper.getValues();\n\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tthis.setEdgePosition(edges[i]);\n\t}\n};\n\n/**\n * Function: localEdgeProcessing\n * \n * Separates the x position of edges as they connect to vertices\n * \n * Parameters:\n *\n * model - the layout model\n */\nmxCoordinateAssignment.prototype.localEdgeProcessing = function(model)\n{\n\t// Iterate through each vertex, look at the edges connected in\n\t// both directions.\n\tfor (var rankIndex = 0; rankIndex < model.ranks.length; rankIndex++)\n\t{\n\t\tvar rank = model.ranks[rankIndex];\n\n\t\tfor (var cellIndex = 0; cellIndex < rank.length; cellIndex++)\n\t\t{\n\t\t\tvar cell = rank[cellIndex];\n\n\t\t\tif (cell.isVertex())\n\t\t\t{\n\t\t\t\tvar currentCells = cell.getPreviousLayerConnectedCells(rankIndex);\n\n\t\t\t\tvar currentRank = rankIndex - 1;\n\n\t\t\t\t// Two loops, last connected cells, and next\n\t\t\t\tfor (var k = 0; k < 2; k++)\n\t\t\t\t{\n\t\t\t\t\tif (currentRank > -1\n\t\t\t\t\t\t\t&& currentRank < model.ranks.length\n\t\t\t\t\t\t\t&& currentCells != null\n\t\t\t\t\t\t\t&& currentCells.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar sortedCells = [];\n\n\t\t\t\t\t\tfor (var j = 0; j < currentCells.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar sorter = new WeightedCellSorter(\n\t\t\t\t\t\t\t\t\tcurrentCells[j], currentCells[j].getX(currentRank));\n\t\t\t\t\t\t\tsortedCells.push(sorter);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsortedCells.sort(WeightedCellSorter.prototype.compare);\n\n\t\t\t\t\t\tvar leftLimit = cell.x[0] - cell.width / 2;\n\t\t\t\t\t\tvar rightLimit = leftLimit + cell.width;\n\n\t\t\t\t\t\t// Connected edge count starts at 1 to allow for buffer\n\t\t\t\t\t\t// with edge of vertex\n\t\t\t\t\t\tvar connectedEdgeCount = 0;\n\t\t\t\t\t\tvar connectedEdgeGroupCount = 0;\n\t\t\t\t\t\tvar connectedEdges = [];\n\t\t\t\t\t\t// Calculate width requirements for all connected edges\n\t\t\t\t\t\tfor (var j = 0; j < sortedCells.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar innerCell = sortedCells[j].cell;\n\t\t\t\t\t\t\tvar connections;\n\n\t\t\t\t\t\t\tif (innerCell.isVertex())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// Get the connecting edge\n\t\t\t\t\t\t\t\tif (k == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconnections = cell.connectsAsSource;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconnections = cell.connectsAsTarget;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfor (var connIndex = 0; connIndex < connections.length; connIndex++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (connections[connIndex].source == innerCell\n\t\t\t\t\t\t\t\t\t\t\t|| connections[connIndex].target == innerCell)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconnectedEdgeCount += connections[connIndex].edges\n\t\t\t\t\t\t\t\t\t\t\t\t.length;\n\t\t\t\t\t\t\t\t\t\tconnectedEdgeGroupCount++;\n\n\t\t\t\t\t\t\t\t\t\tconnectedEdges.push(connections[connIndex]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconnectedEdgeCount += innerCell.edges.length;\n\t\t\t\t\t\t\t\tconnectedEdgeGroupCount++;\n\t\t\t\t\t\t\t\tconnectedEdges.push(innerCell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar requiredWidth = (connectedEdgeCount + 1)\n\t\t\t\t\t\t\t\t* this.prefHozEdgeSep;\n\n\t\t\t\t\t\t// Add a buffer on the edges of the vertex if the edge count allows\n\t\t\t\t\t\tif (cell.width > requiredWidth\n\t\t\t\t\t\t\t\t+ (2 * this.prefHozEdgeSep))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tleftLimit += this.prefHozEdgeSep;\n\t\t\t\t\t\t\trightLimit -= this.prefHozEdgeSep;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar availableWidth = rightLimit - leftLimit;\n\t\t\t\t\t\tvar edgeSpacing = availableWidth / connectedEdgeCount;\n\n\t\t\t\t\t\tvar currentX = leftLimit + edgeSpacing / 2.0;\n\t\t\t\t\t\tvar currentYOffset = this.minEdgeJetty - this.prefVertEdgeOff;\n\t\t\t\t\t\tvar maxYOffset = 0;\n\n\t\t\t\t\t\tfor (var j = 0; j < connectedEdges.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar numActualEdges = connectedEdges[j].edges\n\t\t\t\t\t\t\t\t\t.length;\n\t\t\t\t\t\t\tvar pos = this.jettyPositions[connectedEdges[j].ids[0]];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (pos == null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpos = [];\n\t\t\t\t\t\t\t\tthis.jettyPositions[connectedEdges[j].ids[0]] = pos;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (j < connectedEdgeCount / 2)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcurrentYOffset += this.prefVertEdgeOff;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (j > connectedEdgeCount / 2)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcurrentYOffset -= this.prefVertEdgeOff;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Ignore the case if equals, this means the second of 2\n\t\t\t\t\t\t\t// jettys with the same y (even number of edges)\n\n\t\t\t\t\t\t\tfor (var m = 0; m < numActualEdges; m++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpos[m * 4 + k * 2] = currentX;\n\t\t\t\t\t\t\t\tcurrentX += edgeSpacing;\n\t\t\t\t\t\t\t\tpos[m * 4 + k * 2 + 1] = currentYOffset;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tmaxYOffset = Math.max(maxYOffset,\n\t\t\t\t\t\t\t\t\tcurrentYOffset);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentCells = cell.getNextLayerConnectedCells(rankIndex);\n\n\t\t\t\t\tcurrentRank = rankIndex + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: setEdgePosition\n * \n * Fixes the control points\n */\nmxCoordinateAssignment.prototype.setEdgePosition = function(cell)\n{\n\t// For parallel edges we need to seperate out the points a\n\t// little\n\tvar offsetX = 0;\n\t// Only set the edge control points once\n\n\tif (cell.temp[0] != 101207)\n\t{\n\t\tvar maxRank = cell.maxRank;\n\t\tvar minRank = cell.minRank;\n\t\t\n\t\tif (maxRank == minRank)\n\t\t{\n\t\t\tmaxRank = cell.source.maxRank;\n\t\t\tminRank = cell.target.minRank;\n\t\t}\n\t\t\n\t\tvar parallelEdgeCount = 0;\n\t\tvar jettys = this.jettyPositions[cell.ids[0]];\n\n\t\tvar source = cell.isReversed ? cell.target.cell : cell.source.cell;\n\t\tvar graph = this.layout.graph;\n\t\tvar layoutReversed = this.orientation == mxConstants.DIRECTION_EAST\n\t\t\t\t|| this.orientation == mxConstants.DIRECTION_SOUTH;\n\n\t\tfor (var i = 0; i < cell.edges.length; i++)\n\t\t{\n\t\t\tvar realEdge = cell.edges[i];\n\t\t\tvar realSource = this.layout.getVisibleTerminal(realEdge, true);\n\n\t\t\t//List oldPoints = graph.getPoints(realEdge);\n\t\t\tvar newPoints = [];\n\n\t\t\t// Single length reversed edges end up with the jettys in the wrong\n\t\t\t// places. Since single length edges only have jettys, not segment\n\t\t\t// control points, we just say the edge isn't reversed in this section\n\t\t\tvar reversed = cell.isReversed;\n\t\t\t\n\t\t\tif (realSource != source)\n\t\t\t{\n\t\t\t\t// The real edges include all core model edges and these can go\n\t\t\t\t// in both directions. If the source of the hierarchical model edge\n\t\t\t\t// isn't the source of the specific real edge in this iteration\n\t\t\t\t// treat if as reversed\n\t\t\t\treversed = !reversed;\n\t\t\t}\n\n\t\t\t// First jetty of edge\n\t\t\tif (jettys != null)\n\t\t\t{\n\t\t\t\tvar arrayOffset = reversed ? 2 : 0;\n\t\t\t\tvar y = reversed ?\n\t\t\t\t\t\t(layoutReversed ? this.rankBottomY[minRank] : this.rankTopY[minRank]) :\n\t\t\t\t\t\t\t(layoutReversed ? this.rankTopY[maxRank] : this.rankBottomY[maxRank]);\n\t\t\t\tvar jetty = jettys[parallelEdgeCount * 4 + 1 + arrayOffset];\n\t\t\t\t\n\t\t\t\tif (reversed != layoutReversed)\n\t\t\t\t{\n\t\t\t\t\tjetty = -jetty;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ty += jetty;\n\t\t\t\tvar x = jettys[parallelEdgeCount * 4 + arrayOffset];\n\t\t\t\t\n\t\t\t\tvar modelSource = graph.model.getTerminal(realEdge, true);\n\n\t\t\t\tif (this.layout.isPort(modelSource) && graph.model.getParent(modelSource) == realSource)\n\t\t\t\t{\n\t\t\t\t\tvar state = graph.view.getState(modelSource);\n\t\t\t\t\t\n\t\t\t\t\tif (state != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tx = state.x;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tx = realSource.geometry.x + cell.source.width * modelSource.geometry.x;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.orientation == mxConstants.DIRECTION_NORTH\n\t\t\t\t\t\t|| this.orientation == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t{\n\t\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\t\t\n\t\t\t\t\tif (this.layout.edgeStyle == mxHierarchicalEdgeStyle.CURVE)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewPoints.push(new mxPoint(x, y + jetty));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnewPoints.push(new mxPoint(y, x));\n\t\t\t\t\t\n\t\t\t\t\tif (this.layout.edgeStyle == mxHierarchicalEdgeStyle.CURVE)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewPoints.push(new mxPoint(y + jetty, x));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Declare variables to define loop through edge points and \n\t\t\t// change direction if edge is reversed\n\n\t\t\tvar loopStart = cell.x.length - 1;\n\t\t\tvar loopLimit = -1;\n\t\t\tvar loopDelta = -1;\n\t\t\tvar currentRank = cell.maxRank - 1;\n\n\t\t\tif (reversed)\n\t\t\t{\n\t\t\t\tloopStart = 0;\n\t\t\t\tloopLimit = cell.x.length;\n\t\t\t\tloopDelta = 1;\n\t\t\t\tcurrentRank = cell.minRank + 1;\n\t\t\t}\n\t\t\t// Reversed edges need the points inserted in\n\t\t\t// reverse order\n\t\t\tfor (var j = loopStart; (cell.maxRank != cell.minRank) && j != loopLimit; j += loopDelta)\n\t\t\t{\n\t\t\t\t// The horizontal position in a vertical layout\n\t\t\t\tvar positionX = cell.x[j] + offsetX;\n\n\t\t\t\t// Work out the vertical positions in a vertical layout\n\t\t\t\t// in the edge buffer channels above and below this rank\n\t\t\t\tvar topChannelY = (this.rankTopY[currentRank] + this.rankBottomY[currentRank + 1]) / 2.0;\n\t\t\t\tvar bottomChannelY = (this.rankTopY[currentRank - 1] + this.rankBottomY[currentRank]) / 2.0;\n\n\t\t\t\tif (reversed)\n\t\t\t\t{\n\t\t\t\t\tvar tmp = topChannelY;\n\t\t\t\t\ttopChannelY = bottomChannelY;\n\t\t\t\t\tbottomChannelY = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (this.orientation == mxConstants.DIRECTION_NORTH ||\n\t\t\t\t\tthis.orientation == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t{\n\t\t\t\t\tnewPoints.push(new mxPoint(positionX, topChannelY));\n\t\t\t\t\tnewPoints.push(new mxPoint(positionX, bottomChannelY));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnewPoints.push(new mxPoint(topChannelY, positionX));\n\t\t\t\t\tnewPoints.push(new mxPoint(bottomChannelY, positionX));\n\t\t\t\t}\n\n\t\t\t\tthis.limitX = Math.max(this.limitX, positionX);\n\t\t\t\tcurrentRank += loopDelta;\n\t\t\t}\n\n\t\t\t// Second jetty of edge\n\t\t\tif (jettys != null)\n\t\t\t{\n\t\t\t\tvar arrayOffset = reversed ? 2 : 0;\n\t\t\t\tvar rankY = reversed ?\n\t\t\t\t\t\t(layoutReversed ? this.rankTopY[maxRank] : this.rankBottomY[maxRank]) :\n\t\t\t\t\t\t\t(layoutReversed ? this.rankBottomY[minRank] : this.rankTopY[minRank]);\n\t\t\t\tvar jetty = jettys[parallelEdgeCount * 4 + 3 - arrayOffset];\n\t\t\t\t\n\t\t\t\tif (reversed != layoutReversed)\n\t\t\t\t{\n\t\t\t\t\tjetty = -jetty;\n\t\t\t\t}\n\t\t\t\tvar y = rankY - jetty;\n\t\t\t\tvar x = jettys[parallelEdgeCount * 4 + 2 - arrayOffset];\n\t\t\t\t\n\t\t\t\tvar modelTarget = graph.model.getTerminal(realEdge, false);\n\t\t\t\tvar realTarget = this.layout.getVisibleTerminal(realEdge, false);\n\n\t\t\t\tif (this.layout.isPort(modelTarget) && graph.model.getParent(modelTarget) == realTarget)\n\t\t\t\t{\n\t\t\t\t\tvar state = graph.view.getState(modelTarget);\n\t\t\t\t\t\n\t\t\t\t\tif (state != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tx = state.x;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tx = realTarget.geometry.x + cell.target.width * modelTarget.geometry.x;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.orientation == mxConstants.DIRECTION_NORTH ||\n\t\t\t\t\t\tthis.orientation == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t{\n\t\t\t\t\tif (this.layout.edgeStyle == mxHierarchicalEdgeStyle.CURVE)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewPoints.push(new mxPoint(x, y - jetty));\n\t\t\t\t\t}\n\n\t\t\t\t\tnewPoints.push(new mxPoint(x, y));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.layout.edgeStyle == mxHierarchicalEdgeStyle.CURVE)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewPoints.push(new mxPoint(y - jetty, x));\n\t\t\t\t\t}\n\n\t\t\t\t\tnewPoints.push(new mxPoint(y, x));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cell.isReversed)\n\t\t\t{\n\t\t\t\tthis.processReversedEdge(cell, realEdge);\n\t\t\t}\n\n\t\t\tthis.layout.setEdgePoints(realEdge, newPoints);\n\n\t\t\t// Increase offset so next edge is drawn next to\n\t\t\t// this one\n\t\t\tif (offsetX == 0.0)\n\t\t\t{\n\t\t\t\toffsetX = this.parallelEdgeSpacing;\n\t\t\t}\n\t\t\telse if (offsetX > 0)\n\t\t\t{\n\t\t\t\toffsetX = -offsetX;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\toffsetX = -offsetX + this.parallelEdgeSpacing;\n\t\t\t}\n\t\t\t\n\t\t\tparallelEdgeCount++;\n\t\t}\n\n\t\tcell.temp[0] = 101207;\n\t}\n};\n\n\n/**\n * Function: setVertexLocation\n * \n * Fixes the position of the specified vertex.\n * \n * Parameters:\n * \n * cell - the vertex to position\n */\nmxCoordinateAssignment.prototype.setVertexLocation = function(cell)\n{\n\tvar realCell = cell.cell;\n\tvar positionX = cell.x[0] - cell.width / 2;\n\tvar positionY = cell.y[0] - cell.height / 2;\n\n\tthis.rankTopY[cell.minRank] = Math.min(this.rankTopY[cell.minRank], positionY);\n\tthis.rankBottomY[cell.minRank] = Math.max(this.rankBottomY[cell.minRank],\n\t\t\tpositionY + cell.height);\n\n\tif (this.orientation == mxConstants.DIRECTION_NORTH ||\n\t\tthis.orientation == mxConstants.DIRECTION_SOUTH)\n\t{\n\t\tthis.layout.setVertexLocation(realCell, positionX, positionY);\n\t}\n\telse\n\t{\n\t\tthis.layout.setVertexLocation(realCell, positionY, positionX);\n\t}\n\n\tthis.limitX = Math.max(this.limitX, positionX + cell.width);\n};\n\n/**\n * Function: processReversedEdge\n * \n * Hook to add additional processing\n * \n * Parameters:\n * \n * edge - the hierarchical model edge\n * realEdge - the real edge in the graph\n */\nmxCoordinateAssignment.prototype.processReversedEdge = function(graph, model)\n{\n\t// hook for subclassers\n};\n\n__mxOutput.mxCoordinateAssignment = typeof mxCoordinateAssignment !== 'undefined' ? mxCoordinateAssignment : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxSwimlaneOrdering\n * \n * An implementation of the first stage of the Sugiyama layout. Straightforward\n * longest path calculation of layer assignment\n * \n * Constructor: mxSwimlaneOrdering\n *\n * Creates a cycle remover for the given internal model.\n */\nfunction mxSwimlaneOrdering(layout)\n{\n\tthis.layout = layout;\n};\n\n/**\n * Extends mxHierarchicalLayoutStage.\n */\nmxSwimlaneOrdering.prototype = new mxHierarchicalLayoutStage();\nmxSwimlaneOrdering.prototype.constructor = mxSwimlaneOrdering;\n\n/**\n * Variable: layout\n * \n * Reference to the enclosing <mxHierarchicalLayout>.\n */\nmxSwimlaneOrdering.prototype.layout = null;\n\n/**\n * Function: execute\n * \n * Takes the graph detail and configuration information within the facade\n * and creates the resulting laid out graph within that facade for further\n * use.\n */\nmxSwimlaneOrdering.prototype.execute = function(parent)\n{\n\tvar model = this.layout.getModel();\n\tvar seenNodes = new Object();\n\tvar unseenNodes = mxUtils.clone(model.vertexMapper, null, true);\n\t\n\t// Perform a dfs through the internal model. If a cycle is found,\n\t// reverse it.\n\tvar rootsArray = null;\n\t\n\tif (model.roots != null)\n\t{\n\t\tvar modelRoots = model.roots;\n\t\trootsArray = [];\n\t\t\n\t\tfor (var i = 0; i < modelRoots.length; i++)\n\t\t{\n\t\t\trootsArray[i] = model.vertexMapper.get(modelRoots[i]);\n\t\t}\n\t}\n\n\tmodel.visit(function(parent, node, connectingEdge, layer, seen)\n\t{\n\t\t// Check if the cell is in it's own ancestor list, if so\n\t\t// invert the connecting edge and reverse the target/source\n\t\t// relationship to that edge in the parent and the cell\n\t\t// Ancestor hashes only line up within a swimlane\n\t\tvar isAncestor = parent != null && parent.swimlaneIndex == node.swimlaneIndex && node.isAncestor(parent);\n\n\t\t// If the source->target swimlane indices go from higher to\n\t\t// lower, the edge is reverse\n\t\tvar reversedOverSwimlane = parent != null && connectingEdge != null &&\n\t\t\t\t\t\tparent.swimlaneIndex < node.swimlaneIndex && connectingEdge.source == node;\n\n\t\tif (isAncestor)\n\t\t{\n\t\t\tconnectingEdge.invert();\n\t\t\tmxUtils.remove(connectingEdge, parent.connectsAsSource);\n\t\t\tnode.connectsAsSource.push(connectingEdge);\n\t\t\tparent.connectsAsTarget.push(connectingEdge);\n\t\t\tmxUtils.remove(connectingEdge, node.connectsAsTarget);\n\t\t}\n\t\telse if (reversedOverSwimlane)\n\t\t{\n\t\t\tconnectingEdge.invert();\n\t\t\tmxUtils.remove(connectingEdge, parent.connectsAsTarget);\n\t\t\tnode.connectsAsTarget.push(connectingEdge);\n\t\t\tparent.connectsAsSource.push(connectingEdge);\n\t\t\tmxUtils.remove(connectingEdge, node.connectsAsSource);\n\t\t}\n\t\t\n\t\tvar cellId = mxCellPath.create(node.cell);\n\t\tseenNodes[cellId] = node;\n\t\tdelete unseenNodes[cellId];\n\t}, rootsArray, true, null);\n};\n\n__mxOutput.mxSwimlaneOrdering = typeof mxSwimlaneOrdering !== 'undefined' ? mxSwimlaneOrdering : undefined;\n\n/**\n * Copyright (c) 2006-2018, JGraph Ltd\n * Copyright (c) 2006-2018, Gaudenz Alder\n */\n/**\n * Class: mxHierarchicalLayout\n * \n * A hierarchical layout algorithm.\n * \n * Constructor: mxHierarchicalLayout\n *\n * Constructs a new hierarchical layout algorithm.\n *\n * Arguments:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * orientation - Optional constant that defines the orientation of this\n * layout.\n * deterministic - Optional boolean that specifies if this layout should be\n * deterministic. Default is true.\n */\nfunction mxHierarchicalLayout(graph, orientation, deterministic)\n{\n\tmxGraphLayout.call(this, graph);\n\tthis.orientation = (orientation != null) ? orientation : mxConstants.DIRECTION_NORTH;\n\tthis.deterministic = (deterministic != null) ? deterministic : true;\n};\n\nvar mxHierarchicalEdgeStyle =\n{\n\tORTHOGONAL: 1,\n\tPOLYLINE: 2,\n\tSTRAIGHT: 3,\n\tCURVE: 4\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxHierarchicalLayout.prototype = new mxGraphLayout();\nmxHierarchicalLayout.prototype.constructor = mxHierarchicalLayout;\n\n/**\n * Variable: roots\n * \n * Holds the array of <mxCell> that this layout contains.\n */\nmxHierarchicalLayout.prototype.roots = null;\n\n/**\n * Variable: resizeParent\n * \n * Specifies if the parent should be resized after the layout so that it\n * contains all the child cells. Default is false. See also <parentBorder>.\n */\nmxHierarchicalLayout.prototype.resizeParent = false;\n\n/**\n * Variable: maintainParentLocation\n * \n * Specifies if the parent location should be maintained, so that the\n * top, left corner stays the same before and after execution of\n * the layout. Default is false for backwards compatibility.\n */\nmxHierarchicalLayout.prototype.maintainParentLocation = false;\n\n/**\n * Variable: moveParent\n * \n * Specifies if the parent should be moved if <resizeParent> is enabled.\n * Default is false.\n */\nmxHierarchicalLayout.prototype.moveParent = false;\n\n/**\n * Variable: parentBorder\n * \n * The border to be added around the children if the parent is to be\n * resized using <resizeParent>. Default is 0.\n */\nmxHierarchicalLayout.prototype.parentBorder = 0;\n\n/**\n * Variable: intraCellSpacing\n * \n * The spacing buffer added between cells on the same layer. Default is 30.\n */\nmxHierarchicalLayout.prototype.intraCellSpacing = 30;\n\n/**\n * Variable: interRankCellSpacing\n * \n * The spacing buffer added between cell on adjacent layers. Default is 100.\n */\nmxHierarchicalLayout.prototype.interRankCellSpacing = 100;\n\n/**\n * Variable: interHierarchySpacing\n * \n * The spacing buffer between unconnected hierarchies. Default is 60.\n */\nmxHierarchicalLayout.prototype.interHierarchySpacing = 60;\n\n/**\n * Variable: parallelEdgeSpacing\n * \n * The distance between each parallel edge on each ranks for long edges.\n * Default is 10.\n */\nmxHierarchicalLayout.prototype.parallelEdgeSpacing = 10;\n\n/**\n * Variable: orientation\n * \n * The position of the root node(s) relative to the laid out graph in.\n * Default is <mxConstants.DIRECTION_NORTH>.\n */\nmxHierarchicalLayout.prototype.orientation = mxConstants.DIRECTION_NORTH;\n\n/**\n * Variable: fineTuning\n * \n * Whether or not to perform local optimisations and iterate multiple times\n * through the algorithm. Default is true.\n */\nmxHierarchicalLayout.prototype.fineTuning = true;\n\n/**\n * \n * Variable: tightenToSource\n * \n * Whether or not to tighten the assigned ranks of vertices up towards\n * the source cells. Default is true.\n */\nmxHierarchicalLayout.prototype.tightenToSource = true;\n\n/**\n * Variable: disableEdgeStyle\n * \n * Specifies if the STYLE_NOEDGESTYLE flag should be set on edges that are\n * modified by the result. Default is true.\n */\nmxHierarchicalLayout.prototype.disableEdgeStyle = true;\n\n/**\n * Variable: traverseAncestors\n * \n * Whether or not to drill into child cells and layout in reverse\n * group order. This also cause the layout to navigate edges whose \n * terminal vertices have different parents but are in the same \n * ancestry chain. Default is true.\n */\nmxHierarchicalLayout.prototype.traverseAncestors = true;\n\n/**\n * Variable: model\n * \n * The internal <mxGraphHierarchyModel> formed of the layout.\n */\nmxHierarchicalLayout.prototype.model = null;\n\n/**\n * Variable: edgesSet\n * \n * A cache of edges whose source terminal is the key\n */\nmxHierarchicalLayout.prototype.edgesCache = null;\n\n/**\n * Variable: edgesSet\n * \n * A cache of edges whose source terminal is the key\n */\nmxHierarchicalLayout.prototype.edgeSourceTermCache = null;\n\n/**\n * Variable: edgesSet\n * \n * A cache of edges whose source terminal is the key\n */\nmxHierarchicalLayout.prototype.edgesTargetTermCache = null;\n\n/**\n * Variable: edgeStyle\n * \n * The style to apply between cell layers to edge segments.\n * Default is <mxHierarchicalEdgeStyle.POLYLINE>.\n */\nmxHierarchicalLayout.prototype.edgeStyle = mxHierarchicalEdgeStyle.POLYLINE;\n\n/**\n * Function: getModel\n * \n * Returns the internal <mxGraphHierarchyModel> for this layout algorithm.\n */\nmxHierarchicalLayout.prototype.getModel = function()\n{\n\treturn this.model;\n};\n\n/**\n * Function: execute\n * \n * Executes the layout for the children of the specified parent.\n * \n * Parameters:\n * \n * parent - Parent <mxCell> that contains the children to be laid out.\n * roots - Optional starting roots of the layout.\n */\nmxHierarchicalLayout.prototype.execute = function(parent, roots)\n{\n\tthis.parent = parent;\n\tvar model = this.graph.model;\n\tthis.edgesCache = new mxDictionary();\n\tthis.edgeSourceTermCache = new mxDictionary();\n\tthis.edgesTargetTermCache = new mxDictionary();\n\n\tif (roots != null && !(roots instanceof Array))\n\t{\n\t\troots = [roots];\n\t}\n\t\n\t// If the roots are set and the parent is set, only\n\t// use the roots that are some dependent of the that\n\t// parent.\n\t// If just the root are set, use them as-is\n\t// If just the parent is set use it's immediate\n\t// children as the initial set\n\n\tif (roots == null && parent == null)\n\t{\n\t\t// TODO indicate the problem\n\t\treturn;\n\t}\n\t\n\t//  Maintaining parent location\n\tthis.parentX = null;\n\tthis.parentY = null;\n\t\n\tif (parent != this.root && model.isVertex(parent) != null && this.maintainParentLocation)\n\t{\n\t\tvar geo = this.graph.getCellGeometry(parent);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tthis.parentX = geo.x;\n\t\t\tthis.parentY = geo.y;\n\t\t}\n\t}\n\t\n\tif (roots != null)\n\t{\n\t\tvar rootsCopy = [];\n\n\t\tfor (var i = 0; i < roots.length; i++)\n\t\t{\n\t\t\tvar ancestor = parent != null ? model.isAncestor(parent, roots[i]) : true;\n\t\t\t\n\t\t\tif (ancestor && model.isVertex(roots[i]))\n\t\t\t{\n\t\t\t\trootsCopy.push(roots[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis.roots = rootsCopy;\n\t}\n\t\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tthis.run(parent);\n\t\t\n\t\tif (this.resizeParent && !this.graph.isCellCollapsed(parent))\n\t\t{\n\t\t\tthis.graph.updateGroupBounds([parent], this.parentBorder, this.moveParent);\n\t\t}\n\t\t\n\t\t// Maintaining parent location\n\t\tif (this.parentX != null && this.parentY != null)\n\t\t{\n\t\t\tvar geo = this.graph.getCellGeometry(parent);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tgeo = geo.clone();\n\t\t\t\tgeo.x = this.parentX;\n\t\t\t\tgeo.y = this.parentY;\n\t\t\t\tmodel.setGeometry(parent, geo);\n\t\t\t}\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n};\n\n/**\n * Function: findRoots\n * \n * Returns all visible children in the given parent which do not have\n * incoming edges. If the result is empty then the children with the\n * maximum difference between incoming and outgoing edges are returned.\n * This takes into account edges that are being promoted to the given\n * root due to invisible children or collapsed cells.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be checked.\n * vertices - array of vertices to limit search to\n */\nmxHierarchicalLayout.prototype.findRoots = function(parent, vertices)\n{\n\tvar roots = [];\n\t\n\tif (parent != null && vertices != null)\n\t{\n\t\tvar model = this.graph.model;\n\t\tvar best = null;\n\t\tvar maxDiff = -100000;\n\t\t\n\t\tfor (var i in vertices)\n\t\t{\n\t\t\tvar cell = vertices[i];\n\n\t\t\tif (model.isVertex(cell) && this.graph.isCellVisible(cell))\n\t\t\t{\n\t\t\t\tvar conns = this.getEdges(cell);\n\t\t\t\tvar fanOut = 0;\n\t\t\t\tvar fanIn = 0;\n\n\t\t\t\tfor (var k = 0; k < conns.length; k++)\n\t\t\t\t{\n\t\t\t\t\tvar src = this.getVisibleTerminal(conns[k], true);\n\n\t\t\t\t\tif (src == cell)\n\t\t\t\t\t{\n\t\t\t\t\t\tfanOut++;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfanIn++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (fanIn == 0 && fanOut > 0)\n\t\t\t\t{\n\t\t\t\t\troots.push(cell);\n\t\t\t\t}\n\n\t\t\t\tvar diff = fanOut - fanIn;\n\n\t\t\t\tif (diff > maxDiff)\n\t\t\t\t{\n\t\t\t\t\tmaxDiff = diff;\n\t\t\t\t\tbest = cell;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (roots.length == 0 && best != null)\n\t\t{\n\t\t\troots.push(best);\n\t\t}\n\t}\n\t\n\treturn roots;\n};\n\n/**\n * Function: getEdges\n * \n * Returns the connected edges for the given cell.\n * \n * Parameters:\n * \n * cell - <mxCell> whose edges should be returned.\n */\nmxHierarchicalLayout.prototype.getEdges = function(cell)\n{\n\tvar cachedEdges = this.edgesCache.get(cell);\n\t\n\tif (cachedEdges != null)\n\t{\n\t\treturn cachedEdges;\n\t}\n\n\tvar model = this.graph.model;\n\tvar edges = [];\n\tvar isCollapsed = this.graph.isCellCollapsed(cell);\n\tvar childCount = model.getChildCount(cell);\n\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = model.getChildAt(cell, i);\n\n\t\tif (this.isPort(child))\n\t\t{\n\t\t\tedges = edges.concat(model.getEdges(child, true, true));\n\t\t}\n\t\telse if (isCollapsed || !this.graph.isCellVisible(child))\n\t\t{\n\t\t\tedges = edges.concat(model.getEdges(child, true, true));\n\t\t}\n\t}\n\n\tedges = edges.concat(model.getEdges(cell, true, true));\n\tvar result = [];\n\t\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tvar source = this.getVisibleTerminal(edges[i], true);\n\t\tvar target = this.getVisibleTerminal(edges[i], false);\n\t\t\n\t\tif ((source == target) ||\n\t\t\t\t((source != target) &&\n\t\t\t\t\t\t((target == cell && (this.parent == null || this.isAncestor(this.parent, source, this.traverseAncestors))) ||\n\t\t\t\t\t\t \t(source == cell && (this.parent == null || this.isAncestor(this.parent, target, this.traverseAncestors))))))\n\t\t{\n\t\t\tresult.push(edges[i]);\n\t\t}\n\t}\n\n\tthis.edgesCache.put(cell, result);\n\n\treturn result;\n};\n\n/**\n * Function: getVisibleTerminal\n * \n * Helper function to return visible terminal for edge allowing for ports\n * \n * Parameters:\n * \n * edge - <mxCell> whose edges should be returned.\n * source - Boolean that specifies whether the source or target terminal is to be returned\n */\nmxHierarchicalLayout.prototype.getVisibleTerminal = function(edge, source)\n{\n\tvar terminalCache = this.edgesTargetTermCache;\n\t\n\tif (source)\n\t{\n\t\tterminalCache = this.edgeSourceTermCache;\n\t}\n\n\tvar term = terminalCache.get(edge);\n\n\tif (term != null)\n\t{\n\t\treturn term;\n\t}\n\n\tvar state = this.graph.view.getState(edge);\n\t\n\tvar terminal = (state != null) ? state.getVisibleTerminal(source) : this.graph.view.getVisibleTerminal(edge, source);\n\t\n\tif (terminal == null)\n\t{\n\t\tterminal = (state != null) ? state.getVisibleTerminal(source) : this.graph.view.getVisibleTerminal(edge, source);\n\t}\n\n\tif (terminal != null)\n\t{\n\t\tif (this.isPort(terminal))\n\t\t{\n\t\t\tterminal = this.graph.model.getParent(terminal);\n\t\t}\n\t\t\n\t\tterminalCache.put(edge, terminal);\n\t}\n\n\treturn terminal;\n};\n\n/**\n * Function: run\n * \n * The API method used to exercise the layout upon the graph description\n * and produce a separate description of the vertex position and edge\n * routing changes made. It runs each stage of the layout that has been\n * created.\n */\nmxHierarchicalLayout.prototype.run = function(parent)\n{\n\t// Separate out unconnected hierarchies\n\tvar hierarchyVertices = [];\n\tvar allVertexSet = [];\n\n\tif (this.roots == null && parent != null)\n\t{\n\t\tvar filledVertexSet = Object();\n\t\tthis.filterDescendants(parent, filledVertexSet);\n\n\t\tthis.roots = [];\n\t\tvar filledVertexSetEmpty = true;\n\n\t\t// Poor man's isSetEmpty\n\t\tfor (var key in filledVertexSet)\n\t\t{\n\t\t\tif (filledVertexSet[key] != null)\n\t\t\t{\n\t\t\t\tfilledVertexSetEmpty = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\twhile (!filledVertexSetEmpty)\n\t\t{\n\t\t\tvar candidateRoots = this.findRoots(parent, filledVertexSet);\n\t\t\t\n\t\t\t// If the candidate root is an unconnected group cell, remove it from\n\t\t\t// the layout. We may need a custom set that holds such groups and forces\n\t\t\t// them to be processed for resizing and/or moving.\n\t\t\t\n\n\t\t\tfor (var i = 0; i < candidateRoots.length; i++)\n\t\t\t{\n\t\t\t\tvar vertexSet = Object();\n\t\t\t\thierarchyVertices.push(vertexSet);\n\n\t\t\t\tthis.traverse(candidateRoots[i], true, null, allVertexSet, vertexSet,\n\t\t\t\t\t\thierarchyVertices, filledVertexSet);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < candidateRoots.length; i++)\n\t\t\t{\n\t\t\t\tthis.roots.push(candidateRoots[i]);\n\t\t\t}\n\t\t\t\n\t\t\tfilledVertexSetEmpty = true;\n\t\t\t\n\t\t\t// Poor man's isSetEmpty\n\t\t\tfor (var key in filledVertexSet)\n\t\t\t{\n\t\t\t\tif (filledVertexSet[key] != null)\n\t\t\t\t{\n\t\t\t\t\tfilledVertexSetEmpty = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\t// Find vertex set as directed traversal from roots\n\n\t\tfor (var i = 0; i < this.roots.length; i++)\n\t\t{\n\t\t\tvar vertexSet = Object();\n\t\t\thierarchyVertices.push(vertexSet);\n\n\t\t\tthis.traverse(this.roots[i], true, null, allVertexSet, vertexSet,\n\t\t\t\t\thierarchyVertices, null);\n\t\t}\n\t}\n\n\t// Iterate through the result removing parents who have children in this layout\n\t\n\t// Perform a layout for each seperate hierarchy\n\t// Track initial coordinate x-positioning\n\tvar initialX = 0;\n\n\tfor (var i = 0; i < hierarchyVertices.length; i++)\n\t{\n\t\tvar vertexSet = hierarchyVertices[i];\n\t\tvar tmp = [];\n\t\t\n\t\tfor (var key in vertexSet)\n\t\t{\n\t\t\ttmp.push(vertexSet[key]);\n\t\t}\n\t\t\n\t\tthis.model = new mxGraphHierarchyModel(this, tmp, this.roots,\n\t\t\tparent, this.tightenToSource);\n\n\t\tthis.cycleStage(parent);\n\t\tthis.layeringStage();\n\t\t\n\t\tthis.crossingStage(parent);\n\t\tinitialX = this.placementStage(initialX, parent);\n\t}\n};\n\n/**\n * Function: filterDescendants\n * \n * Creates an array of descendant cells\n */\nmxHierarchicalLayout.prototype.filterDescendants = function(cell, result)\n{\n\tvar model = this.graph.model;\n\n\tif (model.isVertex(cell) && cell != this.parent && this.graph.isCellVisible(cell))\n\t{\n\t\tresult[mxObjectIdentity.get(cell)] = cell;\n\t}\n\n\tif (this.traverseAncestors || cell == this.parent\n\t\t\t&& this.graph.isCellVisible(cell))\n\t{\n\t\tvar childCount = model.getChildCount(cell);\n\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar child = model.getChildAt(cell, i);\n\t\t\t\n\t\t\t// Ignore ports in the layout vertex list, they are dealt with\n\t\t\t// in the traversal mechanisms\n\t\t\tif (!this.isPort(child))\n\t\t\t{\n\t\t\t\tthis.filterDescendants(child, result);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: isPort\n * \n * Returns true if the given cell is a \"port\", that is, when connecting to\n * it, its parent is the connecting vertex in terms of graph traversal\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the port.\n */\nmxHierarchicalLayout.prototype.isPort = function(cell)\n{\n\tif (cell != null && cell.geometry != null)\n\t{\n\t\treturn cell.geometry.relative;\n\t}\n\telse\n\t{\n\t\treturn false;\n\t}\n};\n\n/**\n * Function: getEdgesBetween\n * \n * Returns the edges between the given source and target. This takes into\n * account collapsed and invisible cells and ports.\n * \n * Parameters:\n * \n * source -\n * target -\n * directed -\n */\nmxHierarchicalLayout.prototype.getEdgesBetween = function(source, target, directed)\n{\n\tdirected = (directed != null) ? directed : false;\n\tvar edges = this.getEdges(source);\n\tvar result = [];\n\n\t// Checks if the edge is connected to the correct\n\t// cell and returns the first match\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tvar src = this.getVisibleTerminal(edges[i], true);\n\t\tvar trg = this.getVisibleTerminal(edges[i], false);\n\n\t\tif ((src == source && trg == target) || (!directed && src == target && trg == source))\n\t\t{\n\t\t\tresult.push(edges[i]);\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Traverses the (directed) graph invoking the given function for each\n * visited vertex and edge. The function is invoked with the current vertex\n * and the incoming edge as a parameter. This implementation makes sure\n * each vertex is only visited once. The function may return false if the\n * traversal should stop at the given vertex.\n * \n * Parameters:\n * \n * vertex - <mxCell> that represents the vertex where the traversal starts.\n * directed - boolean indicating if edges should only be traversed\n * from source to target. Default is true.\n * edge - Optional <mxCell> that represents the incoming edge. This is\n * null for the first step of the traversal.\n * allVertices - Array of cell paths for the visited cells.\n */\nmxHierarchicalLayout.prototype.traverse = function(vertex, directed, edge, allVertices, currentComp,\n\t\t\t\t\t\t\t\t\t\t\thierarchyVertices, filledVertexSet)\n{\n\tif (vertex != null && allVertices != null)\n\t{\n\t\t// Has this vertex been seen before in any traversal\n\t\t// And if the filled vertex set is populated, only \n\t\t// process vertices in that it contains\n\t\tvar vertexID = mxObjectIdentity.get(vertex);\n\t\t\n\t\tif ((allVertices[vertexID] == null)\n\t\t\t\t&& (filledVertexSet == null ? true : filledVertexSet[vertexID] != null))\n\t\t{\n\t\t\tif (currentComp[vertexID] == null)\n\t\t\t{\n\t\t\t\tcurrentComp[vertexID] = vertex;\n\t\t\t}\n\t\t\tif (allVertices[vertexID] == null)\n\t\t\t{\n\t\t\t\tallVertices[vertexID] = vertex;\n\t\t\t}\n\n\t\t\tif (filledVertexSet !== null)\n\t\t\t{\n\t\t\t\tdelete filledVertexSet[vertexID];\n\t\t\t}\n\n\t\t\tvar edges = this.getEdges(vertex);\n\t\t\tvar edgeIsSource = [];\n\n\t\t\tfor (var i = 0; i < edges.length; i++)\n\t\t\t{\n\t\t\t\tedgeIsSource[i] = (this.getVisibleTerminal(edges[i], true) == vertex);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < edges.length; i++)\n\t\t\t{\n\t\t\t\tif (!directed || edgeIsSource[i])\n\t\t\t\t{\n\t\t\t\t\tvar next = this.getVisibleTerminal(edges[i], !edgeIsSource[i]);\n\t\t\t\t\t\n\t\t\t\t\t// Check whether there are more edges incoming from the target vertex than outgoing\n\t\t\t\t\t// The hierarchical model treats bi-directional parallel edges as being sourced\n\t\t\t\t\t// from the more \"sourced\" terminal. If the directions are equal in number, the direction\n\t\t\t\t\t// is that of the natural direction from the roots of the layout.\n\t\t\t\t\t// The checks below are slightly more verbose than need be for performance reasons\n\t\t\t\t\tvar netCount = 1;\n\n\t\t\t\t\tfor (var j = 0; j < edges.length; j++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (j == i)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar isSource2 = edgeIsSource[j];\n\t\t\t\t\t\t\tvar otherTerm = this.getVisibleTerminal(edges[j], !isSource2);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (otherTerm == next)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (isSource2)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnetCount++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnetCount--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (netCount >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrentComp = this.traverse(next, directed, edges[i], allVertices,\n\t\t\t\t\t\t\tcurrentComp, hierarchyVertices,\n\t\t\t\t\t\t\tfilledVertexSet);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (currentComp[vertexID] == null)\n\t\t\t{\n\t\t\t\t// We've seen this vertex before, but not in the current component\n\t\t\t\t// This component and the one it's in need to be merged\n\n\t\t\t\tfor (var i = 0; i < hierarchyVertices.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar comp = hierarchyVertices[i];\n\n\t\t\t\t\tif (comp[vertexID] != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (var key in comp)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrentComp[key] = comp[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Remove the current component from the hierarchy set\n\t\t\t\t\t\thierarchyVertices.splice(i, 1);\n\t\t\t\t\t\treturn currentComp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn currentComp;\n};\n\n/**\n * Function: cycleStage\n * \n * Executes the cycle stage using mxMinimumCycleRemover.\n */\nmxHierarchicalLayout.prototype.cycleStage = function(parent)\n{\n\tvar cycleStage = new mxMinimumCycleRemover(this);\n\tcycleStage.execute(parent);\n};\n\n/**\n * Function: layeringStage\n * \n * Implements first stage of a Sugiyama layout.\n */\nmxHierarchicalLayout.prototype.layeringStage = function()\n{\n\tthis.model.initialRank();\n\tthis.model.fixRanks();\n};\n\n/**\n * Function: crossingStage\n * \n * Executes the crossing stage using mxMedianHybridCrossingReduction.\n */\nmxHierarchicalLayout.prototype.crossingStage = function(parent)\n{\n\tvar crossingStage = new mxMedianHybridCrossingReduction(this);\n\tcrossingStage.execute(parent);\n};\n\n/**\n * Function: placementStage\n * \n * Executes the placement stage using mxCoordinateAssignment.\n */\nmxHierarchicalLayout.prototype.placementStage = function(initialX, parent)\n{\n\tvar placementStage = new mxCoordinateAssignment(this, this.intraCellSpacing,\n\t\t\tthis.interRankCellSpacing, this.orientation, initialX,\n\t\t\tthis.parallelEdgeSpacing);\n\tplacementStage.fineTuning = this.fineTuning;\n\tplacementStage.execute(parent);\n\t\n\treturn placementStage.limitX + this.interHierarchySpacing;\n};\n\n__mxOutput.mxHierarchicalLayout = typeof mxHierarchicalLayout !== 'undefined' ? mxHierarchicalLayout : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxSwimlaneLayout\n * \n * A hierarchical layout algorithm.\n * \n * Constructor: mxSwimlaneLayout\n *\n * Constructs a new hierarchical layout algorithm.\n *\n * Arguments:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * orientation - Optional constant that defines the orientation of this\n * layout.\n * deterministic - Optional boolean that specifies if this layout should be\n * deterministic. Default is true.\n */\nfunction mxSwimlaneLayout(graph, orientation, deterministic)\n{\n\tmxGraphLayout.call(this, graph);\n\tthis.orientation = (orientation != null) ? orientation : mxConstants.DIRECTION_NORTH;\n\tthis.deterministic = (deterministic != null) ? deterministic : true;\n};\n\n/**\n * Extends mxGraphLayout.\n */\nmxSwimlaneLayout.prototype = new mxGraphLayout();\nmxSwimlaneLayout.prototype.constructor = mxSwimlaneLayout;\n\n/**\n * Variable: roots\n * \n * Holds the array of <mxCell> that this layout contains.\n */\nmxSwimlaneLayout.prototype.roots = null;\n\n/**\n * Variable: swimlanes\n * \n * Holds the array of <mxCell> of the ordered swimlanes to lay out\n */\nmxSwimlaneLayout.prototype.swimlanes = null;\n\n/**\n * Variable: dummyVertexWidth\n * \n * The cell width of any dummy vertices inserted\n */\nmxSwimlaneLayout.prototype.dummyVertexWidth = 50;\n\n/**\n * Variable: resizeParent\n * \n * Specifies if the parent should be resized after the layout so that it\n * contains all the child cells. Default is false. See also <parentBorder>.\n */\nmxSwimlaneLayout.prototype.resizeParent = false;\n\n/**\n * Variable: maintainParentLocation\n * \n * Specifies if the parent location should be maintained, so that the\n * top, left corner stays the same before and after execution of\n * the layout. Default is false for backwards compatibility.\n */\nmxSwimlaneLayout.prototype.maintainParentLocation = false;\n\n/**\n * Variable: moveParent\n * \n * Specifies if the parent should be moved if <resizeParent> is enabled.\n * Default is false.\n */\nmxSwimlaneLayout.prototype.moveParent = false;\n\n/**\n * Variable: parentBorder\n * \n * The border to be added around the children if the parent is to be\n * resized using <resizeParent>. Default is 30.\n */\nmxSwimlaneLayout.prototype.parentBorder = 30;\n\n/**\n * Variable: intraCellSpacing\n * \n * The spacing buffer added between cells on the same layer. Default is 30.\n */\nmxSwimlaneLayout.prototype.intraCellSpacing = 30;\n\n/**\n * Variable: interRankCellSpacing\n * \n * The spacing buffer added between cell on adjacent layers. Default is 100.\n */\nmxSwimlaneLayout.prototype.interRankCellSpacing = 100;\n\n/**\n * Variable: interHierarchySpacing\n * \n * The spacing buffer between unconnected hierarchies. Default is 60.\n */\nmxSwimlaneLayout.prototype.interHierarchySpacing = 60;\n\n/**\n * Variable: parallelEdgeSpacing\n * \n * The distance between each parallel edge on each ranks for long edges.\n * Default is 10.\n */\nmxSwimlaneLayout.prototype.parallelEdgeSpacing = 10;\n\n/**\n * Variable: orientation\n * \n * The position of the root node(s) relative to the laid out graph in.\n * Default is <mxConstants.DIRECTION_NORTH>.\n */\nmxSwimlaneLayout.prototype.orientation = mxConstants.DIRECTION_NORTH;\n\n/**\n * Variable: fineTuning\n * \n * Whether or not to perform local optimisations and iterate multiple times\n * through the algorithm. Default is true.\n */\nmxSwimlaneLayout.prototype.fineTuning = true;\n\n/**\n * Variable: tightenToSource\n * \n * Whether or not to tighten the assigned ranks of vertices up towards\n * the source cells. Default is true.\n */\nmxSwimlaneLayout.prototype.tightenToSource = true;\n\n/**\n * Variable: disableEdgeStyle\n * \n * Specifies if the STYLE_NOEDGESTYLE flag should be set on edges that are\n * modified by the result. Default is true.\n */\nmxSwimlaneLayout.prototype.disableEdgeStyle = true;\n\n/**\n * Variable: traverseAncestors\n * \n * Whether or not to drill into child cells and layout in reverse\n * group order. This also cause the layout to navigate edges whose \n * terminal vertices have different parents but are in the same\n * ancestry chain. Default is true.\n */\nmxSwimlaneLayout.prototype.traverseAncestors = true;\n\n/**\n * Variable: model\n * \n * The internal <mxSwimlaneModel> formed of the layout.\n */\nmxSwimlaneLayout.prototype.model = null;\n\n/**\n * Variable: edgesSet\n * \n * A cache of edges whose source terminal is the key\n */\nmxSwimlaneLayout.prototype.edgesCache = null;\n\n/**\n * Variable: edgesSet\n * \n * A cache of edges whose source terminal is the key\n */\nmxHierarchicalLayout.prototype.edgeSourceTermCache = null;\n\n/**\n * Variable: edgesSet\n * \n * A cache of edges whose source terminal is the key\n */\nmxHierarchicalLayout.prototype.edgesTargetTermCache = null;\n\n/**\n * Variable: edgeStyle\n * \n * The style to apply between cell layers to edge segments.\n * Default is <mxHierarchicalEdgeStyle.POLYLINE>.\n */\nmxHierarchicalLayout.prototype.edgeStyle = mxHierarchicalEdgeStyle.POLYLINE;\n\n/**\n * Function: getModel\n * \n * Returns the internal <mxSwimlaneModel> for this layout algorithm.\n */\nmxSwimlaneLayout.prototype.getModel = function()\n{\n\treturn this.model;\n};\n\n/**\n * Function: execute\n * \n * Executes the layout for the children of the specified parent.\n * \n * Parameters:\n * \n * parent - Parent <mxCell> that contains the children to be laid out.\n * swimlanes - Ordered array of swimlanes to be laid out\n */\nmxSwimlaneLayout.prototype.execute = function(parent, swimlanes)\n{\n\tthis.parent = parent;\n\tvar model = this.graph.model;\n\tthis.edgesCache = new mxDictionary();\n\tthis.edgeSourceTermCache = new mxDictionary();\n\tthis.edgesTargetTermCache = new mxDictionary();\n\n\t// If the roots are set and the parent is set, only\n\t// use the roots that are some dependent of the that\n\t// parent.\n\t// If just the root are set, use them as-is\n\t// If just the parent is set use it's immediate\n\t// children as the initial set\n\n\tif (swimlanes == null || swimlanes.length < 1)\n\t{\n\t\t// TODO indicate the problem\n\t\treturn;\n\t}\n\n\tif (parent == null)\n\t{\n\t\tparent = model.getParent(swimlanes[0]);\n\t}\n\n\t//  Maintaining parent location\n\tthis.parentX = null;\n\tthis.parentY = null;\n\t\n\tif (parent != this.root && model.isVertex(parent) != null && this.maintainParentLocation)\n\t{\n\t\tvar geo = this.graph.getCellGeometry(parent);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tthis.parentX = geo.x;\n\t\t\tthis.parentY = geo.y;\n\t\t}\n\t}\n\n\tthis.swimlanes = swimlanes;\n\tvar dummyVertices = [];\n\t// Check the swimlanes all have vertices\n\t// in them\n\tfor (var i = 0; i < swimlanes.length; i++)\n\t{\n\t\tvar children = this.graph.getChildCells(swimlanes[i]);\n\t\t\n\t\tif (children == null || children.length == 0)\n\t\t{\n\t\t\tvar vertex = this.graph.insertVertex(swimlanes[i], null, null, 0, 0, this.dummyVertexWidth, 0);\n\t\t\tdummyVertices.push(vertex);\n\t\t}\n\t}\n\t\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tthis.run(parent);\n\t\t\n\t\tif (this.resizeParent && !this.graph.isCellCollapsed(parent))\n\t\t{\n\t\t\tthis.graph.updateGroupBounds([parent], this.parentBorder, this.moveParent);\n\t\t}\n\t\t\n\t\t// Maintaining parent location\n\t\tif (this.parentX != null && this.parentY != null)\n\t\t{\n\t\t\tvar geo = this.graph.getCellGeometry(parent);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tgeo = geo.clone();\n\t\t\t\tgeo.x = this.parentX;\n\t\t\t\tgeo.y = this.parentY;\n\t\t\t\tmodel.setGeometry(parent, geo);\n\t\t\t}\n\t\t}\n\n\t\tthis.graph.removeCells(dummyVertices);\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n};\n\n/**\n * Function: updateGroupBounds\n * \n * Updates the bounds of the given array of groups so that it includes\n * all child vertices.\n * \n */\nmxSwimlaneLayout.prototype.updateGroupBounds = function()\n{\n\t// Get all vertices and edge in the layout\n\tvar cells = [];\n\tvar model = this.model;\n\t\n\tfor (var key in model.edgeMapper)\n\t{\n\t\tvar edge = model.edgeMapper[key];\n\t\t\n\t\tfor (var i = 0; i < edge.edges.length; i++)\n\t\t{\n\t\t\tcells.push(edge.edges[i]);\n\t\t}\n\t}\n\t\n\tvar layoutBounds = this.graph.getBoundingBoxFromGeometry(cells, true);\n\tvar childBounds = [];\n\n\tfor (var i = 0; i < this.swimlanes.length; i++)\n\t{\n\t\tvar lane = this.swimlanes[i];\n\t\tvar geo = this.graph.getCellGeometry(lane);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tvar children = this.graph.getChildCells(lane);\n\t\t\t\n\t\t\tvar size = (this.graph.isSwimlane(lane)) ?\n\t\t\t\t\tthis.graph.getStartSize(lane) : new mxRectangle();\n\n\t\t\tvar bounds = this.graph.getBoundingBoxFromGeometry(children);\n\t\t\tchildBounds[i] = bounds;\n\t\t\tvar childrenY = bounds.y + geo.y - size.height - this.parentBorder;\n\t\t\tvar maxChildrenY = bounds.y + geo.y + bounds.height;\n\n\t\t\tif (layoutBounds == null)\n\t\t\t{\n\t\t\t\tlayoutBounds = new mxRectangle(0, childrenY, 0, maxChildrenY - childrenY);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlayoutBounds.y = Math.min(layoutBounds.y, childrenY);\n\t\t\t\tvar maxY = Math.max(layoutBounds.y + layoutBounds.height, maxChildrenY);\n\t\t\t\tlayoutBounds.height = maxY - layoutBounds.y;\n\t\t\t}\n\t\t}\n\t}\n\n\t\n\tfor (var i = 0; i < this.swimlanes.length; i++)\n\t{\n\t\tvar lane = this.swimlanes[i];\n\t\tvar geo = this.graph.getCellGeometry(lane);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tvar children = this.graph.getChildCells(lane);\n\t\t\t\n\t\t\tvar size = (this.graph.isSwimlane(lane)) ?\n\t\t\t\t\tthis.graph.getStartSize(lane) : new mxRectangle();\n\n\t\t\tvar newGeo = geo.clone();\n\t\t\t\n\t\t\tvar leftGroupBorder = (i == 0) ? this.parentBorder : this.interRankCellSpacing/2;\n\t\t\tvar w = size.width + leftGroupBorder;\n\t\t\tvar x = childBounds[i].x - w;\n\t\t\tvar y = layoutBounds.y - this.parentBorder;\n\n\t\t\tnewGeo.x += x;\n\t\t\tnewGeo.y = y;\n\t\t\t\n\t\t\tnewGeo.width = childBounds[i].width + w + this.interRankCellSpacing/2;\n\t\t\tnewGeo.height = layoutBounds.height + size.height + 2 * this.parentBorder;\n\t\t\t\n\t\t\tthis.graph.model.setGeometry(lane, newGeo);\n\t\t\tthis.graph.moveCells(children, -x, geo.y - y);\n\t\t}\n\t}\n};\n\n/**\n * Function: findRoots\n * \n * Returns all visible children in the given parent which do not have\n * incoming edges. If the result is empty then the children with the\n * maximum difference between incoming and outgoing edges are returned.\n * This takes into account edges that are being promoted to the given\n * root due to invisible children or collapsed cells.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be checked.\n * vertices - array of vertices to limit search to\n */\nmxSwimlaneLayout.prototype.findRoots = function(parent, vertices)\n{\n\tvar roots = [];\n\t\n\tif (parent != null && vertices != null)\n\t{\n\t\tvar model = this.graph.model;\n\t\tvar best = null;\n\t\tvar maxDiff = -100000;\n\t\t\n\t\tfor (var i in vertices)\n\t\t{\n\t\t\tvar cell = vertices[i];\n\n\t\t\tif (cell != null && model.isVertex(cell) && this.graph.isCellVisible(cell) && model.isAncestor(parent, cell))\n\t\t\t{\n\t\t\t\tvar conns = this.getEdges(cell);\n\t\t\t\tvar fanOut = 0;\n\t\t\t\tvar fanIn = 0;\n\n\t\t\t\tfor (var k = 0; k < conns.length; k++)\n\t\t\t\t{\n\t\t\t\t\tvar src = this.getVisibleTerminal(conns[k], true);\n\n\t\t\t\t\tif (src == cell)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Only count connection within this swimlane\n\t\t\t\t\t\tvar other = this.getVisibleTerminal(conns[k], false);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (model.isAncestor(parent, other))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfanOut++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (model.isAncestor(parent, src))\n\t\t\t\t\t{\n\t\t\t\t\t\tfanIn++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (fanIn == 0 && fanOut > 0)\n\t\t\t\t{\n\t\t\t\t\troots.push(cell);\n\t\t\t\t}\n\n\t\t\t\tvar diff = fanOut - fanIn;\n\n\t\t\t\tif (diff > maxDiff)\n\t\t\t\t{\n\t\t\t\t\tmaxDiff = diff;\n\t\t\t\t\tbest = cell;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (roots.length == 0 && best != null)\n\t\t{\n\t\t\troots.push(best);\n\t\t}\n\t}\n\t\n\treturn roots;\n};\n\n/**\n * Function: getEdges\n * \n * Returns the connected edges for the given cell.\n * \n * Parameters:\n * \n * cell - <mxCell> whose edges should be returned.\n */\nmxSwimlaneLayout.prototype.getEdges = function(cell)\n{\n\tvar cachedEdges = this.edgesCache.get(cell);\n\t\n\tif (cachedEdges != null)\n\t{\n\t\treturn cachedEdges;\n\t}\n\n\tvar model = this.graph.model;\n\tvar edges = [];\n\tvar isCollapsed = this.graph.isCellCollapsed(cell);\n\tvar childCount = model.getChildCount(cell);\n\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = model.getChildAt(cell, i);\n\n\t\tif (this.isPort(child))\n\t\t{\n\t\t\tedges = edges.concat(model.getEdges(child, true, true));\n\t\t}\n\t\telse if (isCollapsed || !this.graph.isCellVisible(child))\n\t\t{\n\t\t\tedges = edges.concat(model.getEdges(child, true, true));\n\t\t}\n\t}\n\n\tedges = edges.concat(model.getEdges(cell, true, true));\n\tvar result = [];\n\t\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tvar source = this.getVisibleTerminal(edges[i], true);\n\t\tvar target = this.getVisibleTerminal(edges[i], false);\n\t\t\n\t\tif ((source == target) || ((source != target) && ((target == cell && (this.parent == null || this.graph.isValidAncestor(source, this.parent, this.traverseAncestors))) ||\n\t\t\t(source == cell && (this.parent == null ||\n\t\t\t\t\tthis.graph.isValidAncestor(target, this.parent, this.traverseAncestors))))))\n\t\t{\n\t\t\tresult.push(edges[i]);\n\t\t}\n\t}\n\n\tthis.edgesCache.put(cell, result);\n\n\treturn result;\n};\n\n/**\n * Function: getVisibleTerminal\n * \n * Helper function to return visible terminal for edge allowing for ports\n * \n * Parameters:\n * \n * edge - <mxCell> whose edges should be returned.\n * source - Boolean that specifies whether the source or target terminal is to be returned\n */\nmxSwimlaneLayout.prototype.getVisibleTerminal = function(edge, source)\n{\n\tvar terminalCache = this.edgesTargetTermCache;\n\t\n\tif (source)\n\t{\n\t\tterminalCache = this.edgeSourceTermCache;\n\t}\n\n\tvar term = terminalCache.get(edge);\n\n\tif (term != null)\n\t{\n\t\treturn term;\n\t}\n\n\tvar state = this.graph.view.getState(edge);\n\t\n\tvar terminal = (state != null) ? state.getVisibleTerminal(source) : this.graph.view.getVisibleTerminal(edge, source);\n\t\n\tif (terminal == null)\n\t{\n\t\tterminal = (state != null) ? state.getVisibleTerminal(source) : this.graph.view.getVisibleTerminal(edge, source);\n\t}\n\n\tif (terminal != null)\n\t{\n\t\tif (this.isPort(terminal))\n\t\t{\n\t\t\tterminal = this.graph.model.getParent(terminal);\n\t\t}\n\t\t\n\t\tterminalCache.put(edge, terminal);\n\t}\n\n\treturn terminal;\n};\n\n/**\n * Function: run\n * \n * The API method used to exercise the layout upon the graph description\n * and produce a separate description of the vertex position and edge\n * routing changes made. It runs each stage of the layout that has been\n * created.\n */\nmxSwimlaneLayout.prototype.run = function(parent)\n{\n\t// Separate out unconnected hierarchies\n\tvar hierarchyVertices = [];\n\tvar allVertexSet = Object();\n\n\tif (this.swimlanes != null && this.swimlanes.length > 0 && parent != null)\n\t{\n\t\tvar filledVertexSet = Object();\n\t\t\n\t\tfor (var i = 0; i < this.swimlanes.length; i++)\n\t\t{\n\t\t\tthis.filterDescendants(this.swimlanes[i], filledVertexSet);\n\t\t}\n\n\t\tthis.roots = [];\n\t\tvar filledVertexSetEmpty = true;\n\n\t\t// Poor man's isSetEmpty\n\t\tfor (var key in filledVertexSet)\n\t\t{\n\t\t\tif (filledVertexSet[key] != null)\n\t\t\t{\n\t\t\t\tfilledVertexSetEmpty = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Only test for candidates in each swimlane in order\n\t\tvar laneCounter = 0;\n\n\t\twhile (!filledVertexSetEmpty && laneCounter < this.swimlanes.length)\n\t\t{\n\t\t\tvar candidateRoots = this.findRoots(this.swimlanes[laneCounter], filledVertexSet);\n\t\t\t\n\t\t\tif (candidateRoots.length == 0)\n\t\t\t{\n\t\t\t\tlaneCounter++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\t// If the candidate root is an unconnected group cell, remove it from\n\t\t\t// the layout. We may need a custom set that holds such groups and forces\n\t\t\t// them to be processed for resizing and/or moving.\n\t\t\tfor (var i = 0; i < candidateRoots.length; i++)\n\t\t\t{\n\t\t\t\tvar vertexSet = Object();\n\t\t\t\thierarchyVertices.push(vertexSet);\n\n\t\t\t\tthis.traverse(candidateRoots[i], true, null, allVertexSet, vertexSet,\n\t\t\t\t\t\thierarchyVertices, filledVertexSet, laneCounter);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < candidateRoots.length; i++)\n\t\t\t{\n\t\t\t\tthis.roots.push(candidateRoots[i]);\n\t\t\t}\n\t\t\t\n\t\t\tfilledVertexSetEmpty = true;\n\t\t\t\n\t\t\t// Poor man's isSetEmpty\n\t\t\tfor (var key in filledVertexSet)\n\t\t\t{\n\t\t\t\tif (filledVertexSet[key] != null)\n\t\t\t\t{\n\t\t\t\t\tfilledVertexSetEmpty = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\t// Find vertex set as directed traversal from roots\n\n\t\tfor (var i = 0; i < this.roots.length; i++)\n\t\t{\n\t\t\tvar vertexSet = Object();\n\t\t\thierarchyVertices.push(vertexSet);\n\n\t\t\tthis.traverse(this.roots[i], true, null, allVertexSet, vertexSet,\n\t\t\t\t\thierarchyVertices, null);\n\t\t}\n\t}\n\n\tvar tmp = [];\n\t\n\tfor (var key in allVertexSet)\n\t{\n\t\ttmp.push(allVertexSet[key]);\n\t}\n\t\n\tthis.model = new mxSwimlaneModel(this, tmp, this.roots,\n\t\tparent, this.tightenToSource);\n\n\tthis.cycleStage(parent);\n\tthis.layeringStage();\n\t\n\tthis.crossingStage(parent);\n\tthis.placementStage(0, parent);\n};\n\n/**\n * Function: filterDescendants\n * \n * Creates an array of descendant cells\n */\nmxSwimlaneLayout.prototype.filterDescendants = function(cell, result)\n{\n\tvar model = this.graph.model;\n\n\tif (model.isVertex(cell) && cell != this.parent && model.getParent(cell) != this.parent && this.graph.isCellVisible(cell))\n\t{\n\t\tresult[mxObjectIdentity.get(cell)] = cell;\n\t}\n\n\tif (this.traverseAncestors || cell == this.parent\n\t\t\t&& this.graph.isCellVisible(cell))\n\t{\n\t\tvar childCount = model.getChildCount(cell);\n\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar child = model.getChildAt(cell, i);\n\t\t\t\n\t\t\t// Ignore ports in the layout vertex list, they are dealt with\n\t\t\t// in the traversal mechanisms\n\t\t\tif (!this.isPort(child))\n\t\t\t{\n\t\t\t\tthis.filterDescendants(child, result);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: isPort\n * \n * Returns true if the given cell is a \"port\", that is, when connecting to\n * it, its parent is the connecting vertex in terms of graph traversal\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the port.\n */\nmxSwimlaneLayout.prototype.isPort = function(cell)\n{\n\tif (cell.geometry.relative)\n\t{\n\t\treturn true;\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: getEdgesBetween\n * \n * Returns the edges between the given source and target. This takes into\n * account collapsed and invisible cells and ports.\n * \n * Parameters:\n * \n * source -\n * target -\n * directed -\n */\nmxSwimlaneLayout.prototype.getEdgesBetween = function(source, target, directed)\n{\n\tdirected = (directed != null) ? directed : false;\n\tvar edges = this.getEdges(source);\n\tvar result = [];\n\n\t// Checks if the edge is connected to the correct\n\t// cell and returns the first match\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tvar src = this.getVisibleTerminal(edges[i], true);\n\t\tvar trg = this.getVisibleTerminal(edges[i], false);\n\n\t\tif ((src == source && trg == target) || (!directed && src == target && trg == source))\n\t\t{\n\t\t\tresult.push(edges[i]);\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Traverses the (directed) graph invoking the given function for each\n * visited vertex and edge. The function is invoked with the current vertex\n * and the incoming edge as a parameter. This implementation makes sure\n * each vertex is only visited once. The function may return false if the\n * traversal should stop at the given vertex.\n * \n * Parameters:\n * \n * vertex - <mxCell> that represents the vertex where the traversal starts.\n * directed - boolean indicating if edges should only be traversed\n * from source to target. Default is true.\n * edge - Optional <mxCell> that represents the incoming edge. This is\n * null for the first step of the traversal.\n * allVertices - Array of cell paths for the visited cells.\n * swimlaneIndex - the laid out order index of the swimlane vertex is contained in\n */\nmxSwimlaneLayout.prototype.traverse = function(vertex, directed, edge, allVertices, currentComp,\n\t\t\t\t\t\t\t\t\t\t\thierarchyVertices, filledVertexSet, swimlaneIndex)\n{\n\tif (vertex != null && allVertices != null)\n\t{\n\t\t// Has this vertex been seen before in any traversal\n\t\t// And if the filled vertex set is populated, only \n\t\t// process vertices in that it contains\n\t\tvar vertexID = mxObjectIdentity.get(vertex);\n\t\t\n\t\tif ((allVertices[vertexID] == null)\n\t\t\t\t&& (filledVertexSet == null ? true : filledVertexSet[vertexID] != null))\n\t\t{\n\t\t\tif (currentComp[vertexID] == null)\n\t\t\t{\n\t\t\t\tcurrentComp[vertexID] = vertex;\n\t\t\t}\n\t\t\tif (allVertices[vertexID] == null)\n\t\t\t{\n\t\t\t\tallVertices[vertexID] = vertex;\n\t\t\t}\n\n\t\t\tif (filledVertexSet !== null)\n\t\t\t{\n\t\t\t\tdelete filledVertexSet[vertexID];\n\t\t\t}\n\n\t\t\tvar edges = this.getEdges(vertex);\n\t\t\tvar model = this.graph.model;\n\n\t\t\tfor (var i = 0; i < edges.length; i++)\n\t\t\t{\n\t\t\t\tvar otherVertex = this.getVisibleTerminal(edges[i], true);\n\t\t\t\tvar isSource = otherVertex == vertex;\n\t\t\t\t\n\t\t\t\tif (isSource)\n\t\t\t\t{\n\t\t\t\t\totherVertex = this.getVisibleTerminal(edges[i], false);\n\t\t\t\t}\n\n\t\t\t\tvar otherIndex = 0;\n\t\t\t\t// Get the swimlane index of the other terminal\n\t\t\t\tfor (otherIndex = 0; otherIndex < this.swimlanes.length; otherIndex++)\n\t\t\t\t{\n\t\t\t\t\tif (model.isAncestor(this.swimlanes[otherIndex], otherVertex))\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (otherIndex >= this.swimlanes.length)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Traverse if the other vertex is within the same swimlane as\n\t\t\t\t// as the current vertex, or if the swimlane index of the other\n\t\t\t\t// vertex is greater than that of this vertex\n\t\t\t\tif ((otherIndex > swimlaneIndex) ||\n\t\t\t\t\t\t((!directed || isSource) && otherIndex == swimlaneIndex))\n\t\t\t\t{\n\t\t\t\t\tcurrentComp = this.traverse(otherVertex, directed, edges[i], allVertices,\n\t\t\t\t\t\t\tcurrentComp, hierarchyVertices,\n\t\t\t\t\t\t\tfilledVertexSet, otherIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (currentComp[vertexID] == null)\n\t\t\t{\n\t\t\t\t// We've seen this vertex before, but not in the current component\n\t\t\t\t// This component and the one it's in need to be merged\n\t\t\t\tfor (var i = 0; i < hierarchyVertices.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar comp = hierarchyVertices[i];\n\n\t\t\t\t\tif (comp[vertexID] != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (var key in comp)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrentComp[key] = comp[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Remove the current component from the hierarchy set\n\t\t\t\t\t\thierarchyVertices.splice(i, 1);\n\t\t\t\t\t\treturn currentComp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn currentComp;\n};\n\n/**\n * Function: cycleStage\n * \n * Executes the cycle stage using mxMinimumCycleRemover.\n */\nmxSwimlaneLayout.prototype.cycleStage = function(parent)\n{\n\tvar cycleStage = new mxSwimlaneOrdering(this);\n\tcycleStage.execute(parent);\n};\n\n/**\n * Function: layeringStage\n * \n * Implements first stage of a Sugiyama layout.\n */\nmxSwimlaneLayout.prototype.layeringStage = function()\n{\n\tthis.model.initialRank();\n\tthis.model.fixRanks();\n};\n\n/**\n * Function: crossingStage\n * \n * Executes the crossing stage using mxMedianHybridCrossingReduction.\n */\nmxSwimlaneLayout.prototype.crossingStage = function(parent)\n{\n\tvar crossingStage = new mxMedianHybridCrossingReduction(this);\n\tcrossingStage.execute(parent);\n};\n\n/**\n * Function: placementStage\n * \n * Executes the placement stage using mxCoordinateAssignment.\n */\nmxSwimlaneLayout.prototype.placementStage = function(initialX, parent)\n{\n\tvar placementStage = new mxCoordinateAssignment(this, this.intraCellSpacing,\n\t\t\tthis.interRankCellSpacing, this.orientation, initialX,\n\t\t\tthis.parallelEdgeSpacing);\n\tplacementStage.fineTuning = this.fineTuning;\n\tplacementStage.execute(parent);\n\t\n\treturn placementStage.limitX + this.interHierarchySpacing;\n};\n\n__mxOutput.mxSwimlaneLayout = typeof mxSwimlaneLayout !== 'undefined' ? mxSwimlaneLayout : undefined;\n\n/**\n * Copyright (c) 2006-2018, JGraph Ltd\n * Copyright (c) 2006-2018, Gaudenz Alder\n */\n/**\n * Class: mxGraphModel\n * \n * Extends <mxEventSource> to implement a graph model. The graph model acts as\n * a wrapper around the cells which are in charge of storing the actual graph\n * datastructure. The model acts as a transactional wrapper with event\n * notification for all changes, whereas the cells contain the atomic\n * operations for updating the actual datastructure.\n * \n * Layers:\n * \n * The cell hierarchy in the model must have a top-level root cell which\n * contains the layers (typically one default layer), which in turn contain the\n * top-level cells of the layers. This means each cell is contained in a layer.\n * If no layers are required, then all new cells should be added to the default\n * layer.\n * \n * Layers are useful for hiding and showing groups of cells, or for placing\n * groups of cells on top of other cells in the display. To identify a layer,\n * the <isLayer> function is used. It returns true if the parent of the given\n * cell is the root of the model.\n * \n * Events:\n * \n * See events section for more details. There is a new set of events for\n * tracking transactional changes as they happen. The events are called\n * startEdit for the initial beginUpdate, executed for each executed change\n * and endEdit for the terminal endUpdate. The executed event contains a\n * property called change which represents the change after execution.\n * \n * Encoding the model:\n * \n * To encode a graph model, use the following code:\n * \n * (code)\n * var enc = new mxCodec();\n * var node = enc.encode(graph.getModel());\n * (end)\n * \n * This will create an XML node that contains all the model information.\n * \n * Encoding and decoding changes:\n * \n * For the encoding of changes, a graph model listener is required that encodes\n * each change from the given array of changes.\n * \n * (code)\n * model.addListener(mxEvent.CHANGE, function(sender, evt)\n * {\n *   var changes = evt.getProperty('edit').changes;\n *   var nodes = [];\n *   var codec = new mxCodec();\n * \n *   for (var i = 0; i < changes.length; i++)\n *   {\n *     nodes.push(codec.encode(changes[i]));\n *   }\n *   // do something with the nodes\n * });\n * (end)\n * \n * For the decoding and execution of changes, the codec needs a lookup function\n * that allows it to resolve cell IDs as follows:\n * \n * (code)\n * var codec = new mxCodec();\n * codec.lookup = function(id)\n * {\n *   return model.getCell(id);\n * }\n * (end)\n * \n * For each encoded change (represented by a node), the following code can be\n * used to carry out the decoding and create a change object.\n * \n * (code)\n * var changes = [];\n * var change = codec.decode(node);\n * change.model = model;\n * change.execute();\n * changes.push(change);\n * (end)\n * \n * The changes can then be dispatched using the model as follows.\n * \n * (code)\n * var edit = new mxUndoableEdit(model, false);\n * edit.changes = changes;\n * \n * edit.notify = function()\n * {\n *   edit.source.fireEvent(new mxEventObject(mxEvent.CHANGE,\n *   \t'edit', edit, 'changes', edit.changes));\n *   edit.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,\n *   \t'edit', edit, 'changes', edit.changes));\n * }\n * \n * model.fireEvent(new mxEventObject(mxEvent.UNDO, 'edit', edit));\n * model.fireEvent(new mxEventObject(mxEvent.CHANGE,\n * \t\t'edit', edit, 'changes', changes));\n * (end)\n *\n * Event: mxEvent.CHANGE\n *\n * Fires when an undoable edit is dispatched. The <code>edit</code> property\n * contains the <mxUndoableEdit>. The <code>changes</code> property contains\n * the array of atomic changes inside the undoable edit. The changes property\n * is <strong>deprecated</strong>, please use edit.changes instead.\n *\n * Example:\n * \n * For finding newly inserted cells, the following code can be used:\n * \n * (code)\n * graph.model.addListener(mxEvent.CHANGE, function(sender, evt)\n * {\n *   var changes = evt.getProperty('edit').changes;\n * \n *   for (var i = 0; i < changes.length; i++)\n *   {\n *     var change = changes[i];\n *     \n *     if (change instanceof mxChildChange &&\n *       change.change.previous == null)\n *     {\n *       graph.startEditingAtCell(change.child);\n *       break;\n *     }\n *   }\n * });\n * (end)\n * \n * \n * Event: mxEvent.NOTIFY\n *\n * Same as <mxEvent.CHANGE>, this event can be used for classes that need to\n * implement a sync mechanism between this model and, say, a remote model. In\n * such a setup, only local changes should trigger a notify event and all\n * changes should trigger a change event.\n * \n * Event: mxEvent.EXECUTE\n * \n * Fires between begin- and endUpdate and after an atomic change was executed\n * in the model. The <code>change</code> property contains the atomic change\n * that was executed.\n * \n * Event: mxEvent.EXECUTED\n * \n * Fires between START_EDIT and END_EDIT after an atomic change was executed.\n * The <code>change</code> property contains the change that was executed.\n *\n * Event: mxEvent.BEGIN_UPDATE\n *\n * Fires after the <updateLevel> was incremented in <beginUpdate>. This event\n * contains no properties.\n * \n * Event: mxEvent.START_EDIT\n *\n * Fires after the <updateLevel> was changed from 0 to 1. This event\n * contains no properties.\n * \n * Event: mxEvent.END_UPDATE\n * \n * Fires after the <updateLevel> was decreased in <endUpdate> but before any\n * notification or change dispatching. The <code>edit</code> property contains\n * the <currentEdit>.\n * \n * Event: mxEvent.END_EDIT\n *\n * Fires after the <updateLevel> was changed from 1 to 0. This event\n * contains no properties.\n * \n * Event: mxEvent.BEFORE_UNDO\n * \n * Fires before the change is dispatched after the update level has reached 0\n * in <endUpdate>. The <code>edit</code> property contains the <curreneEdit>.\n * \n * Event: mxEvent.UNDO\n * \n * Fires after the change was dispatched in <endUpdate>. The <code>edit</code>\n * property contains the <currentEdit>.\n * \n * Constructor: mxGraphModel\n * \n * Constructs a new graph model. If no root is specified then a new root\n * <mxCell> with a default layer is created.\n * \n * Parameters:\n * \n * root - <mxCell> that represents the root cell.\n */\nfunction mxGraphModel(root)\n{\n\tthis.currentEdit = this.createUndoableEdit();\n\t\n\tif (root != null)\n\t{\n\t\tthis.setRoot(root);\n\t}\n\telse\n\t{\n\t\tthis.clear();\n\t}\n};\n\n/**\n * Extends mxEventSource.\n */\nmxGraphModel.prototype = new mxEventSource();\nmxGraphModel.prototype.constructor = mxGraphModel;\n\n/**\n * Variable: root\n * \n * Holds the root cell, which in turn contains the cells that represent the\n * layers of the diagram as child cells. That is, the actual elements of the\n * diagram are supposed to live in the third generation of cells and below.\n */\nmxGraphModel.prototype.root = null;\n\n/**\n * Variable: cells\n * \n * Maps from Ids to cells.\n */\nmxGraphModel.prototype.cells = null;\n\n/**\n * Variable: maintainEdgeParent\n * \n * Specifies if edges should automatically be moved into the nearest common\n * ancestor of their terminals. Default is true.\n */\nmxGraphModel.prototype.maintainEdgeParent = true;\n\n/**\n * Variable: ignoreRelativeEdgeParent\n * \n * Specifies if relative edge parents should be ignored for finding the nearest\n * common ancestors of an edge's terminals. Default is true.\n */\nmxGraphModel.prototype.ignoreRelativeEdgeParent = true;\n\n/**\n * Variable: createIds\n * \n * Specifies if the model should automatically create Ids for new cells.\n * Default is true.\n */\nmxGraphModel.prototype.createIds = true;\n\n/**\n * Variable: prefix\n * \n * Defines the prefix of new Ids. Default is an empty string.\n */\nmxGraphModel.prototype.prefix = '';\n\n/**\n * Variable: postfix\n * \n * Defines the postfix of new Ids. Default is an empty string.\n */\nmxGraphModel.prototype.postfix = '';\n\n/**\n * Variable: nextId\n * \n * Specifies the next Id to be created. Initial value is 0.\n */\nmxGraphModel.prototype.nextId = 0;\n\n/**\n * Variable: currentEdit\n * \n * Holds the changes for the current transaction. If the transaction is\n * closed then a new object is created for this variable using\n * <createUndoableEdit>.\n */\nmxGraphModel.prototype.currentEdit = null;\n\n/**\n * Variable: updateLevel\n * \n * Counter for the depth of nested transactions. Each call to <beginUpdate>\n * will increment this number and each call to <endUpdate> will decrement\n * it. When the counter reaches 0, the transaction is closed and the\n * respective events are fired. Initial value is 0.\n */\nmxGraphModel.prototype.updateLevel = 0;\n\n/**\n * Variable: endingUpdate\n * \n * True if the program flow is currently inside endUpdate.\n */\nmxGraphModel.prototype.endingUpdate = false;\n\n/**\n * Function: clear\n *\n * Sets a new root using <createRoot>.\n */\nmxGraphModel.prototype.clear = function()\n{\n\tthis.setRoot(this.createRoot());\n};\n\n/**\n * Function: isCreateIds\n *\n * Returns <createIds>.\n */\nmxGraphModel.prototype.isCreateIds = function()\n{\n\treturn this.createIds;\n};\n\n/**\n * Function: setCreateIds\n *\n * Sets <createIds>.\n */\nmxGraphModel.prototype.setCreateIds = function(value)\n{\n\tthis.createIds = value;\n};\n\n/**\n * Function: createRoot\n *\n * Creates a new root cell with a default layer (child 0).\n */\nmxGraphModel.prototype.createRoot = function()\n{\n\tvar cell = new mxCell();\n\tcell.insert(new mxCell());\n\t\n\treturn cell;\n};\n\n/**\n * Function: getCell\n *\n * Returns the <mxCell> for the specified Id or null if no cell can be\n * found for the given Id.\n *\n * Parameters:\n * \n * id - A string representing the Id of the cell.\n */\nmxGraphModel.prototype.getCell = function(id)\n{\n\treturn (this.cells != null) ? this.cells[id] : null;\n};\n\n/**\n * Function: filterCells\n * \n * Returns the cells from the given array where the given filter function\n * returns true.\n */\nmxGraphModel.prototype.filterCells = function(cells, filter)\n{\n\tvar result = null;\n\t\n\tif (cells != null)\n\t{\n\t\tresult = [];\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (filter(cells[i]))\n\t\t\t{\n\t\t\t\tresult.push(cells[i]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getDescendants\n * \n * Returns all descendants of the given cell and the cell itself in an array.\n * \n * Parameters:\n * \n * parent - <mxCell> whose descendants should be returned.\n */\nmxGraphModel.prototype.getDescendants = function(parent)\n{\n\treturn this.filterDescendants(null, parent);\n};\n\n/**\n * Function: filterDescendants\n * \n * Visits all cells recursively and applies the specified filter function\n * to each cell. If the function returns true then the cell is added\n * to the resulting array. The parent and result paramters are optional.\n * If parent is not specified then the recursion starts at <root>.\n * \n * Example:\n * The following example extracts all vertices from a given model:\n * (code)\n * var filter = function(cell)\n * {\n * \treturn model.isVertex(cell);\n * }\n * var vertices = model.filterDescendants(filter);\n * (end)\n * \n * Parameters:\n * \n * filter - JavaScript function that takes an <mxCell> as an argument\n * and returns a boolean.\n * parent - Optional <mxCell> that is used as the root of the recursion.\n */\nmxGraphModel.prototype.filterDescendants = function(filter, parent)\n{\n\t// Creates a new array for storing the result\n\tvar result = [];\n\n\t// Recursion starts at the root of the model\n\tparent = parent || this.getRoot();\n\t\n\t// Checks if the filter returns true for the cell\n\t// and adds it to the result array\n\tif (filter == null || filter(parent))\n\t{\n\t\tresult.push(parent);\n\t}\n\t\n\t// Visits the children of the cell\n\tvar childCount = this.getChildCount(parent);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = this.getChildAt(parent, i);\n\t\tresult = result.concat(this.filterDescendants(filter, child));\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: getRoot\n * \n * Returns the root of the model or the topmost parent of the given cell.\n *\n * Parameters:\n * \n * cell - Optional <mxCell> that specifies the child.\n */\nmxGraphModel.prototype.getRoot = function(cell)\n{\n\tvar root = cell || this.root;\n\t\n\tif (cell != null)\n\t{\n\t\twhile (cell != null)\n\t\t{\n\t\t\troot = cell;\n\t\t\tcell = this.getParent(cell);\n\t\t}\n\t}\n\t\n\treturn root;\n};\n\n/**\n * Function: setRoot\n * \n * Sets the <root> of the model using <mxRootChange> and adds the change to\n * the current transaction. This resets all datastructures in the model and\n * is the preferred way of clearing an existing model. Returns the new\n * root.\n * \n * Example:\n * \n * (code)\n * var root = new mxCell();\n * root.insert(new mxCell());\n * model.setRoot(root);\n * (end)\n *\n * Parameters:\n * \n * root - <mxCell> that specifies the new root.\n */\nmxGraphModel.prototype.setRoot = function(root)\n{\n\tthis.execute(new mxRootChange(this, root));\n\t\n\treturn root;\n};\n\n/**\n * Function: rootChanged\n * \n * Inner callback to change the root of the model and update the internal\n * datastructures, such as <cells> and <nextId>. Returns the previous root.\n *\n * Parameters:\n * \n * root - <mxCell> that specifies the new root.\n */\nmxGraphModel.prototype.rootChanged = function(root)\n{\n\tvar oldRoot = this.root;\n\tthis.root = root;\n\t\n\t// Resets counters and datastructures\n\tthis.nextId = 0;\n\tthis.cells = null;\n\tthis.cellAdded(root);\n\t\n\treturn oldRoot;\n};\n\n/**\n * Function: isRoot\n * \n * Returns true if the given cell is the root of the model and a non-null\n * value.\n *\n * Parameters:\n * \n * cell - <mxCell> that represents the possible root.\n */\nmxGraphModel.prototype.isRoot = function(cell)\n{\n\treturn cell != null && this.root == cell;\n};\n\n/**\n * Function: isLayer\n * \n * Returns true if <isRoot> returns true for the parent of the given cell.\n *\n * Parameters:\n * \n * cell - <mxCell> that represents the possible layer.\n */\nmxGraphModel.prototype.isLayer = function(cell)\n{\n\treturn this.isRoot(this.getParent(cell));\n};\n\n/**\n * Function: isAncestor\n * \n * Returns true if the given parent is an ancestor of the given child. Note \n * returns true if child == parent.\n *\n * Parameters:\n * \n * parent - <mxCell> that specifies the parent.\n * child - <mxCell> that specifies the child.\n */\nmxGraphModel.prototype.isAncestor = function(parent, child)\n{\n\twhile (child != null && child != parent)\n\t{\n\t\tchild = this.getParent(child);\n\t}\n\t\n\treturn child == parent;\n};\n\n/**\n * Function: contains\n * \n * Returns true if the model contains the given <mxCell>.\n *\n * Parameters:\n * \n * cell - <mxCell> that specifies the cell.\n */\nmxGraphModel.prototype.contains = function(cell)\n{\n\treturn this.isAncestor(this.root, cell);\n};\n\n/**\n * Function: getParent\n * \n * Returns the parent of the given cell.\n *\n * Parameters:\n * \n * cell - <mxCell> whose parent should be returned.\n */\nmxGraphModel.prototype.getParent = function(cell)\n{\n\treturn (cell != null) ? cell.getParent() : null;\n};\n\n/**\n * Function: add\n * \n * Adds the specified child to the parent at the given index using\n * <mxChildChange> and adds the change to the current transaction. If no\n * index is specified then the child is appended to the parent's array of\n * children. Returns the inserted child.\n * \n * Parameters:\n * \n * parent - <mxCell> that specifies the parent to contain the child.\n * child - <mxCell> that specifies the child to be inserted.\n * index - Optional integer that specifies the index of the child.\n */\nmxGraphModel.prototype.add = function(parent, child, index)\n{\n\tif (child != parent && parent != null && child != null)\n\t{\t\n\t\t// Appends the child if no index was specified\n\t\tif (index == null)\n\t\t{\n\t\t\tindex = this.getChildCount(parent);\n\t\t}\n\t\t\n\t\tvar parentChanged = parent != this.getParent(child);\n\t\tthis.execute(new mxChildChange(this, parent, child, index));\n\n\t\t// Maintains the edges parents by moving the edges\n\t\t// into the nearest common ancestor of its terminals\n\t\tif (this.maintainEdgeParent && parentChanged)\n\t\t{\n\t\t\tthis.updateEdgeParents(child);\n\t\t}\n\t}\n\t\n\treturn child;\n};\n\n/**\n * Function: cellAdded\n * \n * Inner callback to update <cells> when a cell has been added. This\n * implementation resolves collisions by creating new Ids. To change the\n * ID of a cell after it was inserted into the model, use the following\n * code:\n * \n * (code\n * delete model.cells[cell.getId()];\n * cell.setId(newId);\n * model.cells[cell.getId()] = cell;\n * (end)\n *\n * If the change of the ID should be part of the command history, then the\n * cell should be removed from the model and a clone with the new ID should\n * be reinserted into the model instead.\n *\n * Parameters:\n * \n * cell - <mxCell> that specifies the cell that has been added.\n */\nmxGraphModel.prototype.cellAdded = function(cell)\n{\n\tif (cell != null)\n\t{\n\t\t// Creates an Id for the cell if not Id exists\n\t\tif (cell.getId() == null && this.createIds)\n\t\t{\n\t\t\tcell.setId(this.createId(cell));\n\t\t}\n\t\t\n\t\tif (cell.getId() != null)\n\t\t{\n\t\t\tvar collision = this.getCell(cell.getId());\n\t\t\t\n\t\t\tif (collision != cell)\n\t\t\t{\t\n\t\t\t\t// Creates new Id for the cell\n\t\t\t\t// as long as there is a collision\n\t\t\t\twhile (collision != null)\n\t\t\t\t{\n\t\t\t\t\tcell.setId(this.createId(cell));\n\t\t\t\t\tcollision = this.getCell(cell.getId());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Lazily creates the cells dictionary\n\t\t\t\tif (this.cells == null)\n\t\t\t\t{\n\t\t\t\t\tthis.cells = new Object();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.cells[cell.getId()] = cell;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Makes sure IDs of deleted cells are not reused\n\t\tif (mxUtils.isNumeric(cell.getId()))\n\t\t{\n\t\t\tthis.nextId = Math.max(this.nextId, cell.getId());\n\t\t}\n\t\t\n\t\t// Recursively processes child cells\n\t\tvar childCount = this.getChildCount(cell);\n\t\t\n\t\tfor (var i=0; i<childCount; i++)\n\t\t{\n\t\t\tthis.cellAdded(this.getChildAt(cell, i));\n\t\t}\n\t}\n};\n\n/**\n * Function: createId\n * \n * Hook method to create an Id for the specified cell. This implementation\n * concatenates <prefix>, id and <postfix> to create the Id and increments\n * <nextId>. The cell is ignored by this implementation, but can be used in\n * overridden methods to prefix the Ids with eg. the cell type.\n *\n * Parameters:\n *\n * cell - <mxCell> to create the Id for.\n */\nmxGraphModel.prototype.createId = function(cell)\n{\n\tvar id = this.nextId;\n\tthis.nextId++;\n\t\n\treturn this.prefix + id + this.postfix;\n};\n\n/**\n * Function: updateEdgeParents\n * \n * Updates the parent for all edges that are connected to cell or one of\n * its descendants using <updateEdgeParent>.\n */\nmxGraphModel.prototype.updateEdgeParents = function(cell, root)\n{\n\t// Gets the topmost node of the hierarchy\n\troot = root || this.getRoot(cell);\n\t\n\t// Updates edges on children first\n\tvar childCount = this.getChildCount(cell);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = this.getChildAt(cell, i);\n\t\tthis.updateEdgeParents(child, root);\n\t}\n\t\n\t// Updates the parents of all connected edges\n\tvar edgeCount = this.getEdgeCount(cell);\n\tvar edges = [];\n\n\tfor (var i = 0; i < edgeCount; i++)\n\t{\n\t\tedges.push(this.getEdgeAt(cell, i));\n\t}\n\t\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tvar edge = edges[i];\n\t\t\n\t\t// Updates edge parent if edge and child have\n\t\t// a common root node (does not need to be the\n\t\t// model root node)\n\t\tif (this.isAncestor(root, edge))\n\t\t{\n\t\t\tthis.updateEdgeParent(edge, root);\n\t\t}\n\t}\n};\n\n/**\n * Function: updateEdgeParent\n *\n * Inner callback to update the parent of the specified <mxCell> to the\n * nearest-common-ancestor of its two terminals.\n *\n * Parameters:\n * \n * edge - <mxCell> that specifies the edge.\n * root - <mxCell> that represents the current root of the model.\n */\nmxGraphModel.prototype.updateEdgeParent = function(edge, root)\n{\n\tvar source = this.getTerminal(edge, true);\n\tvar target = this.getTerminal(edge, false);\n\tvar cell = null;\n\t\n\t// Uses the first non-relative descendants of the source terminal\n\twhile (source != null && !this.isEdge(source) &&\n\t\tsource.geometry != null && source.geometry.relative)\n\t{\n\t\tsource = this.getParent(source);\n\t}\n\t\n\t// Uses the first non-relative descendants of the target terminal\n\twhile (target != null && this.ignoreRelativeEdgeParent &&\n\t\t!this.isEdge(target) && target.geometry != null && \n\t\ttarget.geometry.relative)\n\t{\n\t\ttarget = this.getParent(target);\n\t}\n\t\n\tif (this.isAncestor(root, source) && this.isAncestor(root, target))\n\t{\n\t\tif (source == target)\n\t\t{\n\t\t\tcell = this.getParent(source);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcell = this.getNearestCommonAncestor(source, target);\n\t\t}\n\n\t\tif (cell != null && (this.getParent(cell) != this.root ||\n\t\t\tthis.isAncestor(cell, edge)) && this.getParent(edge) != cell)\n\t\t{\n\t\t\tvar geo = this.getGeometry(edge);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tvar origin1 = this.getOrigin(this.getParent(edge));\n\t\t\t\tvar origin2 = this.getOrigin(cell);\n\t\t\t\t\n\t\t\t\tvar dx = origin2.x - origin1.x;\n\t\t\t\tvar dy = origin2.y - origin1.y;\n\t\t\t\t\n\t\t\t\tgeo = geo.clone();\n\t\t\t\tgeo.translate(-dx, -dy);\n\t\t\t\tthis.setGeometry(edge, geo);\n\t\t\t}\n\n\t\t\tthis.add(cell, edge, this.getChildCount(cell));\n\t\t}\n\t}\n};\n\n/**\n * Function: getOrigin\n * \n * Returns the absolute, accumulated origin for the children inside the\n * given parent as an <mxPoint>.\n */\nmxGraphModel.prototype.getOrigin = function(cell)\n{\n\tvar result = null;\n\t\n\tif (cell != null)\n\t{\n\t\tresult = this.getOrigin(this.getParent(cell));\n\t\t\n\t\tif (!this.isEdge(cell))\n\t\t{\n\t\t\tvar geo = this.getGeometry(cell);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tresult.x += geo.x;\n\t\t\t\tresult.y += geo.y;\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tresult = new mxPoint();\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getNearestCommonAncestor\n * \n * Returns the nearest common ancestor for the specified cells.\n *\n * Parameters:\n * \n * cell1 - <mxCell> that specifies the first cell in the tree.\n * cell2 - <mxCell> that specifies the second cell in the tree.\n */\nmxGraphModel.prototype.getNearestCommonAncestor = function(cell1, cell2)\n{\n\tif (cell1 != null && cell2 != null)\n\t{\t\t\n\t\t// Creates the cell path for the second cell\n\t\tvar path = mxCellPath.create(cell2);\n\n\t\tif (path != null && path.length > 0)\n\t\t{\n\t\t\t// Bubbles through the ancestors of the first\n\t\t\t// cell to find the nearest common ancestor.\n\t\t\tvar cell = cell1;\n\t\t\tvar current = mxCellPath.create(cell);\n\t\t\t\n\t\t\t// Inverts arguments\n\t\t\tif (path.length < current.length)\n\t\t\t{\n\t\t\t\tcell = cell2;\n\t\t\t\tvar tmp = current;\n\t\t\t\tcurrent = path;\n\t\t\t\tpath = tmp;\n\t\t\t}\n\t\t\t\n\t\t\twhile (cell != null)\n\t\t\t{\n\t\t\t\tvar parent = this.getParent(cell);\n\t\t\t\t\n\t\t\t\t// Checks if the cell path is equal to the beginning of the given cell path\n\t\t\t\tif (path.indexOf(current + mxCellPath.PATH_SEPARATOR) == 0 && parent != null)\n\t\t\t\t{\n\t\t\t\t\treturn cell;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcurrent = mxCellPath.getParentPath(current);\n\t\t\t\tcell = parent;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: remove\n * \n * Removes the specified cell from the model using <mxChildChange> and adds\n * the change to the current transaction. This operation will remove the\n * cell and all of its children from the model. Returns the removed cell.\n *\n * Parameters:\n * \n * cell - <mxCell> that should be removed.\n */\nmxGraphModel.prototype.remove = function(cell)\n{\n\tif (cell == this.root)\n\t{\n\t\tthis.setRoot(null);\n\t}\n\telse if (this.getParent(cell) != null)\n\t{\n\t\tthis.execute(new mxChildChange(this, null, cell));\n\t}\n\t\n\treturn cell;\n};\n\n/**\n * Function: cellRemoved\n * \n * Inner callback to update <cells> when a cell has been removed.\n *\n * Parameters:\n * \n * cell - <mxCell> that specifies the cell that has been removed.\n */\nmxGraphModel.prototype.cellRemoved = function(cell)\n{\n\tif (cell != null && this.cells != null)\n\t{\n\t\t// Recursively processes child cells\n\t\tvar childCount = this.getChildCount(cell);\n\t\t\n\t\tfor (var i = childCount - 1; i >= 0; i--)\n\t\t{\n\t\t\tthis.cellRemoved(this.getChildAt(cell, i));\n\t\t}\n\t\t\n\t\t// Removes the dictionary entry for the cell\n\t\tif (this.cells != null && cell.getId() != null)\n\t\t{\n\t\t\tdelete this.cells[cell.getId()];\n\t\t}\n\t}\n};\n\n/**\n * Function: parentForCellChanged\n * \n * Inner callback to update the parent of a cell using <mxCell.insert>\n * on the parent and return the previous parent.\n *\n * Parameters:\n * \n * cell - <mxCell> to update the parent for.\n * parent - <mxCell> that specifies the new parent of the cell.\n * index - Optional integer that defines the index of the child\n * in the parent's child array.\n */\nmxGraphModel.prototype.parentForCellChanged = function(cell, parent, index)\n{\n\tvar previous = this.getParent(cell);\n\t\n\tif (parent != null)\n\t{\n\t\tif (parent != previous || previous.getIndex(cell) != index)\n\t\t{\n\t\t\tparent.insert(cell, index);\n\t\t}\n\t}\n\telse if (previous != null)\n\t{\n\t\tvar oldIndex = previous.getIndex(cell);\n\t\tprevious.remove(oldIndex);\n\t}\n\t\n\t// Adds or removes the cell from the model\n\tvar par = this.contains(parent);\n\tvar pre = this.contains(previous);\n\t\n\tif (par && !pre)\n\t{\n\t\tthis.cellAdded(cell);\n\t}\n\telse if (pre && !par)\n\t{\n\t\tthis.cellRemoved(cell);\n\t}\n\t\n\treturn previous;\n};\n\n/**\n * Function: getChildCount\n *\n * Returns the number of children in the given cell.\n *\n * Parameters:\n * \n * cell - <mxCell> whose number of children should be returned.\n */\nmxGraphModel.prototype.getChildCount = function(cell)\n{\n\treturn (cell != null) ? cell.getChildCount() : 0;\n};\n\n/**\n * Function: getChildAt\n *\n * Returns the child of the given <mxCell> at the given index.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the parent.\n * index - Integer that specifies the index of the child to be returned.\n */\nmxGraphModel.prototype.getChildAt = function(cell, index)\n{\n\treturn (cell != null) ? cell.getChildAt(index) : null;\n};\n\n/**\n * Function: getChildren\n * \n * Returns all children of the given <mxCell> as an array of <mxCells>. The\n * return value should be only be read.\n *\n * Parameters:\n * \n * cell - <mxCell> the represents the parent.\n */\nmxGraphModel.prototype.getChildren = function(cell)\n{\n\treturn (cell != null) ? cell.children : null;\n};\n\t\n/**\n * Function: getChildVertices\n * \n * Returns the child vertices of the given parent.\n *\n * Parameters:\n * \n * cell - <mxCell> whose child vertices should be returned.\n */\nmxGraphModel.prototype.getChildVertices = function(parent)\n{\n\treturn this.getChildCells(parent, true, false);\n};\n\t\t\n/**\n * Function: getChildEdges\n * \n * Returns the child edges of the given parent.\n *\n * Parameters:\n * \n * cell - <mxCell> whose child edges should be returned.\n */\nmxGraphModel.prototype.getChildEdges = function(parent)\n{\n\treturn this.getChildCells(parent, false, true);\n};\n\n/**\n * Function: getChildCells\n * \n * Returns the children of the given cell that are vertices and/or edges\n * depending on the arguments.\n *\n * Parameters:\n * \n * cell - <mxCell> the represents the parent.\n * vertices - Boolean indicating if child vertices should be returned.\n * Default is false.\n * edges - Boolean indicating if child edges should be returned.\n * Default is false.\n */\nmxGraphModel.prototype.getChildCells = function(parent, vertices, edges)\n{\n\tvertices = (vertices != null) ? vertices : false;\n\tedges = (edges != null) ? edges : false;\n\t\n\tvar childCount = this.getChildCount(parent);\n\tvar result = [];\n\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = this.getChildAt(parent, i);\n\n\t\tif ((!edges && !vertices) || (edges && this.isEdge(child)) ||\n\t\t\t(vertices && this.isVertex(child)))\n\t\t{\n\t\t\tresult.push(child);\n\t\t}\n\t}\n\n\treturn result;\n};\n\t\t\n/**\n * Function: getTerminal\n * \n * Returns the source or target <mxCell> of the given edge depending on the\n * value of the boolean parameter.\n *\n * Parameters:\n * \n * edge - <mxCell> that specifies the edge.\n * isSource - Boolean indicating which end of the edge should be returned.\n */\nmxGraphModel.prototype.getTerminal = function(edge, isSource)\n{\n\treturn (edge != null) ? edge.getTerminal(isSource) : null;\n};\n\n/**\n * Function: setTerminal\n * \n * Sets the source or target terminal of the given <mxCell> using\n * <mxTerminalChange> and adds the change to the current transaction.\n * This implementation updates the parent of the edge using <updateEdgeParent>\n * if required.\n *\n * Parameters:\n * \n * edge - <mxCell> that specifies the edge.\n * terminal - <mxCell> that specifies the new terminal.\n * isSource - Boolean indicating if the terminal is the new source or\n * target terminal of the edge.\n */\nmxGraphModel.prototype.setTerminal = function(edge, terminal, isSource)\n{\n\tvar terminalChanged = terminal != this.getTerminal(edge, isSource);\n\tthis.execute(new mxTerminalChange(this, edge, terminal, isSource));\n\t\n\tif (this.maintainEdgeParent && terminalChanged)\n\t{\n\t\tthis.updateEdgeParent(edge, this.getRoot());\n\t}\n\t\n\treturn terminal;\n};\n\t\n/**\n * Function: setTerminals\n * \n * Sets the source and target <mxCell> of the given <mxCell> in a single\n * transaction using <setTerminal> for each end of the edge.\n *\n * Parameters:\n * \n * edge - <mxCell> that specifies the edge.\n * source - <mxCell> that specifies the new source terminal.\n * target - <mxCell> that specifies the new target terminal.\n */\nmxGraphModel.prototype.setTerminals = function(edge, source, target)\n{\n\tthis.beginUpdate();\n\ttry\n\t{\n\t\tthis.setTerminal(edge, source, true);\n\t\tthis.setTerminal(edge, target, false);\n\t}\n\tfinally\n\t{\n\t\tthis.endUpdate();\n\t}\n};\n\n/**\n * Function: terminalForCellChanged\n * \n * Inner helper function to update the terminal of the edge using\n * <mxCell.insertEdge> and return the previous terminal.\n * \n * Parameters:\n * \n * edge - <mxCell> that specifies the edge to be updated.\n * terminal - <mxCell> that specifies the new terminal.\n * isSource - Boolean indicating if the terminal is the new source or\n * target terminal of the edge.\n */\nmxGraphModel.prototype.terminalForCellChanged = function(edge, terminal, isSource)\n{\n\tvar previous = this.getTerminal(edge, isSource);\n\t\n\tif (terminal != null)\n\t{\n\t\tterminal.insertEdge(edge, isSource);\n\t}\n\telse if (previous != null)\n\t{\n\t\tprevious.removeEdge(edge, isSource);\n\t}\n\t\n\treturn previous;\n};\n\n/**\n * Function: getEdgeCount\n * \n * Returns the number of distinct edges connected to the given cell.\n *\n * Parameters:\n * \n * cell - <mxCell> that represents the vertex.\n */\nmxGraphModel.prototype.getEdgeCount = function(cell)\n{\n\treturn (cell != null) ? cell.getEdgeCount() : 0;\n};\n\n/**\n * Function: getEdgeAt\n * \n * Returns the edge of cell at the given index.\n *\n * Parameters:\n * \n * cell - <mxCell> that specifies the vertex.\n * index - Integer that specifies the index of the edge\n * to return.\n */\nmxGraphModel.prototype.getEdgeAt = function(cell, index)\n{\n\treturn (cell != null) ? cell.getEdgeAt(index) : null;\n};\n\t\n/**\n * Function: getDirectedEdgeCount\n * \n * Returns the number of incoming or outgoing edges, ignoring the given\n * edge.\n * \n * Parameters:\n * \n * cell - <mxCell> whose edge count should be returned.\n * outgoing - Boolean that specifies if the number of outgoing or\n * incoming edges should be returned.\n * ignoredEdge - <mxCell> that represents an edge to be ignored.\n */\nmxGraphModel.prototype.getDirectedEdgeCount = function(cell, outgoing, ignoredEdge)\n{\n\tvar count = 0;\n\tvar edgeCount = this.getEdgeCount(cell);\n\n\tfor (var i = 0; i < edgeCount; i++)\n\t{\n\t\tvar edge = this.getEdgeAt(cell, i);\n\n\t\tif (edge != ignoredEdge && this.getTerminal(edge, outgoing) == cell)\n\t\t{\n\t\t\tcount++;\n\t\t}\n\t}\n\n\treturn count;\n};\n\n/**\n * Function: getConnections\n * \n * Returns all edges of the given cell without loops.\n * \n * Parameters:\n * \n * cell - <mxCell> whose edges should be returned.\n * \n */\nmxGraphModel.prototype.getConnections = function(cell)\n{\n\treturn this.getEdges(cell, true, true, false);\n};\n\n/**\n * Function: getIncomingEdges\n * \n * Returns the incoming edges of the given cell without loops.\n * \n * Parameters:\n * \n * cell - <mxCell> whose incoming edges should be returned.\n * \n */\nmxGraphModel.prototype.getIncomingEdges = function(cell)\n{\n\treturn this.getEdges(cell, true, false, false);\n};\n\n/**\n * Function: getOutgoingEdges\n * \n * Returns the outgoing edges of the given cell without loops.\n * \n * Parameters:\n * \n * cell - <mxCell> whose outgoing edges should be returned.\n * \n */\nmxGraphModel.prototype.getOutgoingEdges = function(cell)\n{\n\treturn this.getEdges(cell, false, true, false);\n};\n\n/**\n * Function: getEdges\n * \n * Returns all distinct edges connected to this cell as a new array of\n * <mxCells>. If at least one of incoming or outgoing is true, then loops\n * are ignored, otherwise if both are false, then all edges connected to\n * the given cell are returned including loops.\n * \n * Parameters:\n * \n * cell - <mxCell> that specifies the cell.\n * incoming - Optional boolean that specifies if incoming edges should be\n * returned. Default is true.\n * outgoing - Optional boolean that specifies if outgoing edges should be\n * returned. Default is true.\n * includeLoops - Optional boolean that specifies if loops should be returned.\n * Default is true. \n */\nmxGraphModel.prototype.getEdges = function(cell, incoming, outgoing, includeLoops)\n{\n\tincoming = (incoming != null) ? incoming : true;\n\toutgoing = (outgoing != null) ? outgoing : true;\n\tincludeLoops = (includeLoops != null) ? includeLoops : true;\n\t\n\tvar edgeCount = this.getEdgeCount(cell);\n\tvar result = [];\n\n\tfor (var i = 0; i < edgeCount; i++)\n\t{\n\t\tvar edge = this.getEdgeAt(cell, i);\n\t\tvar source = this.getTerminal(edge, true);\n\t\tvar target = this.getTerminal(edge, false);\n\n\t\tif ((includeLoops && source == target) || ((source != target) && ((incoming && target == cell) ||\n\t\t\t(outgoing && source == cell))))\n\t\t{\n\t\t\tresult.push(edge);\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: getEdgesBetween\n * \n * Returns all edges between the given source and target pair. If directed\n * is true, then only edges from the source to the target are returned,\n * otherwise, all edges between the two cells are returned.\n * \n * Parameters:\n * \n * source - <mxCell> that defines the source terminal of the edge to be\n * returned.\n * target - <mxCell> that defines the target terminal of the edge to be\n * returned.\n * directed - Optional boolean that specifies if the direction of the\n * edge should be taken into account. Default is false.\n */\nmxGraphModel.prototype.getEdgesBetween = function(source, target, directed)\n{\n\tdirected = (directed != null) ? directed : false;\n\t\n\tvar tmp1 = this.getEdgeCount(source);\n\tvar tmp2 = this.getEdgeCount(target);\n\t\n\t// Assumes the source has less connected edges\n\tvar terminal = source;\n\tvar edgeCount = tmp1;\n\t\n\t// Uses the smaller array of connected edges\n\t// for searching the edge\n\tif (tmp2 < tmp1)\n\t{\n\t\tedgeCount = tmp2;\n\t\tterminal = target;\n\t}\n\t\n\tvar result = [];\n\t\n\t// Checks if the edge is connected to the correct\n\t// cell and returns the first match\n\tfor (var i = 0; i < edgeCount; i++)\n\t{\n\t\tvar edge = this.getEdgeAt(terminal, i);\n\t\tvar src = this.getTerminal(edge, true);\n\t\tvar trg = this.getTerminal(edge, false);\n\t\tvar directedMatch = (src == source) && (trg == target);\n\t\tvar oppositeMatch = (trg == source) && (src == target);\n\n\t\tif (directedMatch || (!directed && oppositeMatch))\n\t\t{\n\t\t\tresult.push(edge);\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getOpposites\n * \n * Returns all opposite vertices wrt terminal for the given edges, only\n * returning sources and/or targets as specified. The result is returned\n * as an array of <mxCells>.\n * \n * Parameters:\n * \n * edges - Array of <mxCells> that contain the edges to be examined.\n * terminal - <mxCell> that specifies the known end of the edges.\n * sources - Boolean that specifies if source terminals should be contained\n * in the result. Default is true.\n * targets - Boolean that specifies if target terminals should be contained\n * in the result. Default is true.\n */\nmxGraphModel.prototype.getOpposites = function(edges, terminal, sources, targets)\n{\n\tsources = (sources != null) ? sources : true;\n\ttargets = (targets != null) ? targets : true;\n\t\n\tvar terminals = [];\n\t\n\tif (edges != null)\n\t{\n\t\tfor (var i = 0; i < edges.length; i++)\n\t\t{\n\t\t\tvar source = this.getTerminal(edges[i], true);\n\t\t\tvar target = this.getTerminal(edges[i], false);\n\t\t\t\n\t\t\t// Checks if the terminal is the source of\n\t\t\t// the edge and if the target should be\n\t\t\t// stored in the result\n\t\t\tif (source == terminal && target != null && target != terminal && targets)\n\t\t\t{\n\t\t\t\tterminals.push(target);\n\t\t\t}\n\t\t\t\n\t\t\t// Checks if the terminal is the taget of\n\t\t\t// the edge and if the source should be\n\t\t\t// stored in the result\n\t\t\telse if (target == terminal && source != null && source != terminal && sources)\n\t\t\t{\n\t\t\t\tterminals.push(source);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn terminals;\n};\n\n/**\n * Function: getTopmostCells\n * \n * Returns the topmost cells of the hierarchy in an array that contains no\n * descendants for each <mxCell> that it contains. Duplicates should be\n * removed in the cells array to improve performance.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose topmost ancestors should be returned.\n */\nmxGraphModel.prototype.getTopmostCells = function(cells)\n{\n\tvar dict = new mxDictionary();\n\tvar tmp = [];\n\t\n\tfor (var i = 0; i < cells.length; i++)\n\t{\n\t\tdict.put(cells[i], true);\n\t}\n\t\n\tfor (var i = 0; i < cells.length; i++)\n\t{\n\t\tvar cell = cells[i];\n\t\tvar topmost = true;\n\t\tvar parent = this.getParent(cell);\n\t\t\n\t\twhile (parent != null)\n\t\t{\n\t\t\tif (dict.get(parent))\n\t\t\t{\n\t\t\t\ttopmost = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tparent = this.getParent(parent);\n\t\t}\n\t\t\n\t\tif (topmost)\n\t\t{\n\t\t\ttmp.push(cell);\n\t\t}\n\t}\n\t\n\treturn tmp;\n};\n\n/**\n * Function: isVertex\n * \n * Returns true if the given cell is a vertex.\n *\n * Parameters:\n * \n * cell - <mxCell> that represents the possible vertex.\n */\nmxGraphModel.prototype.isVertex = function(cell)\n{\n\treturn (cell != null) ? cell.isVertex() : false;\n};\n\n/**\n * Function: isEdge\n * \n * Returns true if the given cell is an edge.\n *\n * Parameters:\n * \n * cell - <mxCell> that represents the possible edge.\n */\nmxGraphModel.prototype.isEdge = function(cell)\n{\n\treturn (cell != null) ? cell.isEdge() : false;\n};\n\n/**\n * Function: isConnectable\n * \n * Returns true if the given <mxCell> is connectable. If <edgesConnectable>\n * is false, then this function returns false for all edges else it returns\n * the return value of <mxCell.isConnectable>.\n *\n * Parameters:\n * \n * cell - <mxCell> whose connectable state should be returned.\n */\nmxGraphModel.prototype.isConnectable = function(cell)\n{\n\treturn (cell != null) ? cell.isConnectable() : false;\n};\n\n/**\n * Function: getValue\n * \n * Returns the user object of the given <mxCell> using <mxCell.getValue>.\n *\n * Parameters:\n * \n * cell - <mxCell> whose user object should be returned.\n */\nmxGraphModel.prototype.getValue = function(cell)\n{\n\treturn (cell != null) ? cell.getValue() : null;\n};\n\n/**\n * Function: setValue\n * \n * Sets the user object of then given <mxCell> using <mxValueChange>\n * and adds the change to the current transaction.\n *\n * Parameters:\n * \n * cell - <mxCell> whose user object should be changed.\n * value - Object that defines the new user object.\n */\nmxGraphModel.prototype.setValue = function(cell, value)\n{\n\tthis.execute(new mxValueChange(this, cell, value));\n\t\n\treturn value;\n};\n\n/**\n * Function: valueForCellChanged\n * \n * Inner callback to update the user object of the given <mxCell>\n * using <mxCell.valueChanged> and return the previous value,\n * that is, the return value of <mxCell.valueChanged>.\n * \n * To change a specific attribute in an XML node, the following code can be\n * used.\n * \n * (code)\n * graph.getModel().valueForCellChanged = function(cell, value)\n * {\n *   var previous = cell.value.getAttribute('label');\n *   cell.value.setAttribute('label', value);\n *   \n *   return previous;\n * };\n * (end) \n */\nmxGraphModel.prototype.valueForCellChanged = function(cell, value)\n{\n\treturn cell.valueChanged(value);\n};\n\n/**\n * Function: getGeometry\n * \n * Returns the <mxGeometry> of the given <mxCell>.\n *\n * Parameters:\n * \n * cell - <mxCell> whose geometry should be returned.\n */\nmxGraphModel.prototype.getGeometry = function(cell)\n{\n\treturn (cell != null) ? cell.getGeometry() : null;\n};\n\n/**\n * Function: setGeometry\n * \n * Sets the <mxGeometry> of the given <mxCell>. The actual update\n * of the cell is carried out in <geometryForCellChanged>. The\n * <mxGeometryChange> action is used to encapsulate the change.\n * \n * Parameters:\n * \n * cell - <mxCell> whose geometry should be changed.\n * geometry - <mxGeometry> that defines the new geometry.\n */\nmxGraphModel.prototype.setGeometry = function(cell, geometry)\n{\n\tif (geometry != this.getGeometry(cell))\n\t{\n\t\tthis.execute(new mxGeometryChange(this, cell, geometry));\n\t}\n\t\n\treturn geometry;\n};\n\n/**\n * Function: geometryForCellChanged\n * \n * Inner callback to update the <mxGeometry> of the given <mxCell> using\n * <mxCell.setGeometry> and return the previous <mxGeometry>.\n */\nmxGraphModel.prototype.geometryForCellChanged = function(cell, geometry)\n{\n\tvar previous = this.getGeometry(cell);\n\tcell.setGeometry(geometry);\n\t\n\treturn previous;\n};\n\n/**\n * Function: getStyle\n * \n * Returns the style of the given <mxCell>.\n *\n * Parameters:\n * \n * cell - <mxCell> whose style should be returned.\n */\nmxGraphModel.prototype.getStyle = function(cell)\n{\n\treturn (cell != null) ? cell.getStyle() : null;\n};\n\n/**\n * Function: setStyle\n * \n * Sets the style of the given <mxCell> using <mxStyleChange> and\n * adds the change to the current transaction.\n *\n * Parameters:\n * \n * cell - <mxCell> whose style should be changed.\n * style - String of the form [stylename;|key=value;] to specify\n * the new cell style.\n */\nmxGraphModel.prototype.setStyle = function(cell, style)\n{\n\tif (style != this.getStyle(cell))\n\t{\n\t\tthis.execute(new mxStyleChange(this, cell, style));\n\t}\n\t\n\treturn style;\n};\n\n/**\n * Function: styleForCellChanged\n * \n * Inner callback to update the style of the given <mxCell>\n * using <mxCell.setStyle> and return the previous style.\n *\n * Parameters:\n * \n * cell - <mxCell> that specifies the cell to be updated.\n * style - String of the form [stylename;|key=value;] to specify\n * the new cell style.\n */\nmxGraphModel.prototype.styleForCellChanged = function(cell, style)\n{\n\tvar previous = this.getStyle(cell);\n\tcell.setStyle(style);\n\t\n\treturn previous;\n};\n\n/**\n * Function: isCollapsed\n * \n * Returns true if the given <mxCell> is collapsed.\n *\n * Parameters:\n * \n * cell - <mxCell> whose collapsed state should be returned.\n */\nmxGraphModel.prototype.isCollapsed = function(cell)\n{\n\treturn (cell != null) ? cell.isCollapsed() : false;\n};\n\n/**\n * Function: setCollapsed\n * \n * Sets the collapsed state of the given <mxCell> using <mxCollapseChange>\n * and adds the change to the current transaction.\n *\n * Parameters:\n * \n * cell - <mxCell> whose collapsed state should be changed.\n * collapsed - Boolean that specifies the new collpased state.\n */\nmxGraphModel.prototype.setCollapsed = function(cell, collapsed)\n{\n\tif (collapsed != this.isCollapsed(cell))\n\t{\n\t\tthis.execute(new mxCollapseChange(this, cell, collapsed));\n\t}\n\t\n\treturn collapsed;\n};\n\t\n/**\n * Function: collapsedStateForCellChanged\n *\n * Inner callback to update the collapsed state of the\n * given <mxCell> using <mxCell.setCollapsed> and return\n * the previous collapsed state.\n *\n * Parameters:\n * \n * cell - <mxCell> that specifies the cell to be updated.\n * collapsed - Boolean that specifies the new collpased state.\n */\nmxGraphModel.prototype.collapsedStateForCellChanged = function(cell, collapsed)\n{\n\tvar previous = this.isCollapsed(cell);\n\tcell.setCollapsed(collapsed);\n\t\n\treturn previous;\n};\n\n/**\n * Function: isVisible\n * \n * Returns true if the given <mxCell> is visible.\n * \n * Parameters:\n * \n * cell - <mxCell> whose visible state should be returned.\n */\nmxGraphModel.prototype.isVisible = function(cell)\n{\n\treturn (cell != null) ? cell.isVisible() : false;\n};\n\n/**\n * Function: setVisible\n * \n * Sets the visible state of the given <mxCell> using <mxVisibleChange> and\n * adds the change to the current transaction.\n *\n * Parameters:\n * \n * cell - <mxCell> whose visible state should be changed.\n * visible - Boolean that specifies the new visible state.\n */\nmxGraphModel.prototype.setVisible = function(cell, visible)\n{\n\tif (visible != this.isVisible(cell))\n\t{\n\t\tthis.execute(new mxVisibleChange(this, cell, visible));\n\t}\n\t\n\treturn visible;\n};\n\t\n/**\n * Function: visibleStateForCellChanged\n *\n * Inner callback to update the visible state of the\n * given <mxCell> using <mxCell.setCollapsed> and return\n * the previous visible state.\n *\n * Parameters:\n * \n * cell - <mxCell> that specifies the cell to be updated.\n * visible - Boolean that specifies the new visible state.\n */\nmxGraphModel.prototype.visibleStateForCellChanged = function(cell, visible)\n{\n\tvar previous = this.isVisible(cell);\n\tcell.setVisible(visible);\n\t\n\treturn previous;\n};\n\n/**\n * Function: execute\n * \n * Executes the given edit and fires events if required. The edit object\n * requires an execute function which is invoked. The edit is added to the\n * <currentEdit> between <beginUpdate> and <endUpdate> calls, so that\n * events will be fired if this execute is an individual transaction, that\n * is, if no previous <beginUpdate> calls have been made without calling\n * <endUpdate>. This implementation fires an <execute> event before\n * executing the given change.\n * \n * Parameters:\n * \n * change - Object that described the change.\n */\nmxGraphModel.prototype.execute = function(change)\n{\n\tchange.execute();\n\tthis.beginUpdate();\n\tthis.currentEdit.add(change);\n\tthis.fireEvent(new mxEventObject(mxEvent.EXECUTE, 'change', change));\n\t// New global executed event\n\tthis.fireEvent(new mxEventObject(mxEvent.EXECUTED, 'change', change));\n\tthis.endUpdate();\n};\n\n/**\n * Function: beginUpdate\n * \n * Increments the <updateLevel> by one. The event notification\n * is queued until <updateLevel> reaches 0 by use of\n * <endUpdate>.\n *\n * All changes on <mxGraphModel> are transactional,\n * that is, they are executed in a single undoable change\n * on the model (without transaction isolation).\n * Therefore, if you want to combine any\n * number of changes into a single undoable change,\n * you should group any two or more API calls that\n * modify the graph model between <beginUpdate>\n * and <endUpdate> calls as shown here:\n * \n * (code)\n * var model = graph.getModel();\n * var parent = graph.getDefaultParent();\n * var index = model.getChildCount(parent);\n * model.beginUpdate();\n * try\n * {\n *   model.add(parent, v1, index);\n *   model.add(parent, v2, index+1);\n * }\n * finally\n * {\n *   model.endUpdate();\n * }\n * (end)\n * \n * Of course there is a shortcut for appending a\n * sequence of cells into the default parent:\n * \n * (code)\n * graph.addCells([v1, v2]).\n * (end)\n */\nmxGraphModel.prototype.beginUpdate = function()\n{\n\tthis.updateLevel++;\n\tthis.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE));\n\t\n\tif (this.updateLevel == 1)\n\t{\n\t\tthis.fireEvent(new mxEventObject(mxEvent.START_EDIT));\n\t}\n};\n\n/**\n * Function: endUpdate\n * \n * Decrements the <updateLevel> by one and fires an <undo>\n * event if the <updateLevel> reaches 0. This function\n * indirectly fires a <change> event by invoking the notify\n * function on the <currentEdit> und then creates a new\n * <currentEdit> using <createUndoableEdit>.\n *\n * The <undo> event is fired only once per edit, whereas\n * the <change> event is fired whenever the notify\n * function is invoked, that is, on undo and redo of\n * the edit.\n */\nmxGraphModel.prototype.endUpdate = function()\n{\n\tthis.updateLevel--;\n\t\n\tif (this.updateLevel == 0)\n\t{\n\t\tthis.fireEvent(new mxEventObject(mxEvent.END_EDIT));\n\t}\n\t\n\tif (!this.endingUpdate)\n\t{\n\t\tthis.endingUpdate = this.updateLevel == 0;\n\t\tthis.fireEvent(new mxEventObject(mxEvent.END_UPDATE, 'edit', this.currentEdit));\n\n\t\ttry\n\t\t{\t\t\n\t\t\tif (this.endingUpdate && !this.currentEdit.isEmpty())\n\t\t\t{\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO, 'edit', this.currentEdit));\n\t\t\t\tvar tmp = this.currentEdit;\n\t\t\t\tthis.currentEdit = this.createUndoableEdit();\n\t\t\t\ttmp.notify();\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.UNDO, 'edit', tmp));\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.endingUpdate = false;\n\t\t}\n\t}\n};\n\n/**\n * Function: createUndoableEdit\n * \n * Creates a new <mxUndoableEdit> that implements the\n * notify function to fire a <change> and <notify> event\n * through the <mxUndoableEdit>'s source.\n * \n * Parameters:\n * \n * significant - Optional boolean that specifies if the edit to be created is\n * significant. Default is true.\n */\nmxGraphModel.prototype.createUndoableEdit = function(significant)\n{\n\tvar edit = new mxUndoableEdit(this, (significant != null) ? significant : true);\n\t\n\tedit.notify = function()\n\t{\n\t\t// LATER: Remove changes property (deprecated)\n\t\tedit.source.fireEvent(new mxEventObject(mxEvent.CHANGE,\n\t\t\t'edit', edit, 'changes', edit.changes));\n\t\tedit.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,\n\t\t\t'edit', edit, 'changes', edit.changes));\n\t};\n\t\n\treturn edit;\n};\n\n/**\n * Function: mergeChildren\n * \n * Merges the children of the given cell into the given target cell inside\n * this model. All cells are cloned unless there is a corresponding cell in\n * the model with the same id, in which case the source cell is ignored and\n * all edges are connected to the corresponding cell in this model. Edges\n * are considered to have no identity and are always cloned unless the\n * cloneAllEdges flag is set to false, in which case edges with the same\n * id in the target model are reconnected to reflect the terminals of the\n * source edges.\n */\nmxGraphModel.prototype.mergeChildren = function(from, to, cloneAllEdges)\n{\n\tcloneAllEdges = (cloneAllEdges != null) ? cloneAllEdges : true;\n\t\n\tthis.beginUpdate();\n\ttry\n\t{\n\t\tvar mapping = new Object();\n\t\tthis.mergeChildrenImpl(from, to, cloneAllEdges, mapping);\n\t\t\n\t\t// Post-processes all edges in the mapping and\n\t\t// reconnects the terminals to the corresponding\n\t\t// cells in the target model\n\t\tfor (var key in mapping)\n\t\t{\n\t\t\tvar cell = mapping[key];\n\t\t\tvar terminal = this.getTerminal(cell, true);\n\n\t\t\tif (terminal != null)\n\t\t\t{\n\t\t\t\tterminal = mapping[mxCellPath.create(terminal)];\n\t\t\t\tthis.setTerminal(cell, terminal, true);\n\t\t\t}\n\t\t\t\n\t\t\tterminal = this.getTerminal(cell, false);\n\t\t\t\n\t\t\tif (terminal != null)\n\t\t\t{\n\t\t\t\tterminal = mapping[mxCellPath.create(terminal)];\n\t\t\t\tthis.setTerminal(cell, terminal, false);\n\t\t\t}\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tthis.endUpdate();\n\t}\n};\n\n/**\n * Function: mergeChildren\n * \n * Clones the children of the source cell into the given target cell in\n * this model and adds an entry to the mapping that maps from the source\n * cell to the target cell with the same id or the clone of the source cell\n * that was inserted into this model.\n */\nmxGraphModel.prototype.mergeChildrenImpl = function(from, to, cloneAllEdges, mapping)\n{\n\tthis.beginUpdate();\n\ttry\n\t{\n\t\tvar childCount = from.getChildCount();\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar cell = from.getChildAt(i);\n\t\t\t\n\t\t\tif (typeof(cell.getId) == 'function')\n\t\t\t{\n\t\t\t\tvar id = cell.getId();\n\t\t\t\tvar target = (id != null && (!this.isEdge(cell) || !cloneAllEdges)) ?\n\t\t\t\t\t\tthis.getCell(id) : null;\n\t\t\t\t\n\t\t\t\t// Clones and adds the child if no cell exists for the id\n\t\t\t\tif (target == null)\n\t\t\t\t{\n\t\t\t\t\tvar clone = cell.clone();\n\t\t\t\t\tclone.setId(id);\n\t\t\t\t\t\n\t\t\t\t\t// Sets the terminals from the original cell to the clone\n\t\t\t\t\t// because the lookup uses strings not cells in JS\n\t\t\t\t\tclone.setTerminal(cell.getTerminal(true), true);\n\t\t\t\t\tclone.setTerminal(cell.getTerminal(false), false);\n\t\t\t\t\t\n\t\t\t\t\t// Do *NOT* use model.add as this will move the edge away\n\t\t\t\t\t// from the parent in updateEdgeParent if maintainEdgeParent\n\t\t\t\t\t// is enabled in the target model\n\t\t\t\t\ttarget = to.insert(clone);\n\t\t\t\t\tthis.cellAdded(target);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Stores the mapping for later reconnecting edges\n\t\t\t\tmapping[mxCellPath.create(cell)] = target;\n\t\t\t\t\n\t\t\t\t// Recurses\n\t\t\t\tthis.mergeChildrenImpl(cell, target, cloneAllEdges, mapping);\n\t\t\t}\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tthis.endUpdate();\n\t}\n};\n\n/**\n * Function: getParents\n * \n * Returns an array that represents the set (no duplicates) of all parents\n * for the given array of cells.\n * \n * Parameters:\n * \n * cells - Array of cells whose parents should be returned.\n */\nmxGraphModel.prototype.getParents = function(cells)\n{\n\tvar parents = [];\n\t\n\tif (cells != null)\n\t{\n\t\tvar dict = new mxDictionary();\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tvar parent = this.getParent(cells[i]);\n\t\t\t\n\t\t\tif (parent != null && !dict.get(parent))\n\t\t\t{\n\t\t\t\tdict.put(parent, true);\n\t\t\t\tparents.push(parent);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn parents;\n};\n\n//\n// Cell Cloning\n//\n\n/**\n * Function: cloneCell\n * \n * Returns a deep clone of the given <mxCell> (including\n * the children) which is created using <cloneCells>.\n *\n * Parameters:\n * \n * cell - <mxCell> to be cloned.\n * includeChildren - Optional boolean indicating if the cells should be cloned\n * with all descendants. Default is true.\n */\nmxGraphModel.prototype.cloneCell = function(cell, includeChildren)\n{\n\tif (cell != null)\n\t{\n\t\treturn this.cloneCells([cell], includeChildren)[0];\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: cloneCells\n * \n * Returns an array of clones for the given array of <mxCells>.\n * Depending on the value of includeChildren, a deep clone is created for\n * each cell. Connections are restored based if the corresponding\n * cell is contained in the passed in array.\n *\n * Parameters:\n * \n * cells - Array of <mxCell> to be cloned.\n * includeChildren - Optional boolean indicating if the cells should be cloned\n * with all descendants. Default is true.\n * mapping - Optional mapping for existing clones.\n */\nmxGraphModel.prototype.cloneCells = function(cells, includeChildren, mapping)\n{\n\tincludeChildren = (includeChildren != null) ? includeChildren : true;\n\tmapping = (mapping != null) ? mapping : new Object();\n\tvar clones = [];\n\t\n\tfor (var i = 0; i < cells.length; i++)\n\t{\n\t\tif (cells[i] != null)\n\t\t{\n\t\t\tclones.push(this.cloneCellImpl(cells[i], mapping, includeChildren));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclones.push(null);\n\t\t}\n\t}\n\t\n\tfor (var i = 0; i < clones.length; i++)\n\t{\n\t\tif (clones[i] != null)\n\t\t{\n\t\t\tthis.restoreClone(clones[i], cells[i], mapping);\n\t\t}\n\t}\n\t\n\treturn clones;\n};\n\t\t\t\n/**\n * Function: cloneCellImpl\n * \n * Inner helper method for cloning cells recursively.\n */\nmxGraphModel.prototype.cloneCellImpl = function(cell, mapping, includeChildren)\n{\n\tvar ident = mxObjectIdentity.get(cell);\n\tvar clone = mapping[ident];\n\t\n\tif (clone == null)\n\t{\n\t\tclone = this.cellCloned(cell);\n\t\tmapping[ident] = clone;\n\n\t\tif (includeChildren)\n\t\t{\n\t\t\tvar childCount = this.getChildCount(cell);\n\t\t\t\n\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t{\n\t\t\t\tvar cloneChild = this.cloneCellImpl(\n\t\t\t\t\tthis.getChildAt(cell, i), mapping, true);\n\t\t\t\tclone.insert(cloneChild);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn clone;\n};\n\n/**\n * Function: cellCloned\n * \n * Hook for cloning the cell. This returns cell.clone() or\n * any possible exceptions.\n */\nmxGraphModel.prototype.cellCloned = function(cell)\n{\n\treturn cell.clone();\n};\n\n/**\n * Function: restoreClone\n * \n * Inner helper method for restoring the connections in\n * a network of cloned cells.\n */\nmxGraphModel.prototype.restoreClone = function(clone, cell, mapping)\n{\n\tvar source = this.getTerminal(cell, true);\n\t\n\tif (source != null)\n\t{\n\t\tvar tmp = mapping[mxObjectIdentity.get(source)];\n\t\t\n\t\tif (tmp != null)\n\t\t{\n\t\t\ttmp.insertEdge(clone, true);\n\t\t}\n\t}\n\t\n\tvar target = this.getTerminal(cell, false);\n\t\n\tif (target != null)\n\t{\n\t\tvar tmp = mapping[mxObjectIdentity.get(target)];\n\t\t\n\t\tif (tmp != null)\n\t\t{\t\n\t\t\ttmp.insertEdge(clone, false);\n\t\t}\n\t}\n\t\n\tvar childCount = this.getChildCount(clone);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tthis.restoreClone(this.getChildAt(clone, i),\n\t\t\tthis.getChildAt(cell, i), mapping);\n\t}\n};\n\n//\n// Atomic changes\n//\n\n/**\n * Class: mxRootChange\n * \n * Action to change the root in a model.\n *\n * Constructor: mxRootChange\n * \n * Constructs a change of the root in the\n * specified model.\n */\nfunction mxRootChange(model, root)\n{\n\tthis.model = model;\n\tthis.root = root;\n\tthis.previous = root;\n};\n\n/**\n * Function: execute\n * \n * Carries out a change of the root using\n * <mxGraphModel.rootChanged>.\n */\nmxRootChange.prototype.execute = function()\n{\n\tthis.root = this.previous;\n\tthis.previous = this.model.rootChanged(this.previous);\n};\n\n/**\n * Class: mxChildChange\n * \n * Action to add or remove a child in a model.\n *\n * Constructor: mxChildChange\n * \n * Constructs a change of a child in the\n * specified model.\n */\nfunction mxChildChange(model, parent, child, index)\n{\n\tthis.model = model;\n\tthis.parent = parent;\n\tthis.previous = parent;\n\tthis.child = child;\n\tthis.index = index;\n\tthis.previousIndex = index;\n};\n\n/**\n * Function: execute\n * \n * Changes the parent of <child> using\n * <mxGraphModel.parentForCellChanged> and\n * removes or restores the cell's\n * connections.\n */\nmxChildChange.prototype.execute = function()\n{\n\tif (this.child != null)\n\t{\n\t\tvar tmp = this.model.getParent(this.child);\n\t\tvar tmp2 = (tmp != null) ? tmp.getIndex(this.child) : 0;\n\t\t\n\t\tif (this.previous == null)\n\t\t{\n\t\t\tthis.connect(this.child, false);\n\t\t}\n\t\t\n\t\ttmp = this.model.parentForCellChanged(\n\t\t\tthis.child, this.previous, this.previousIndex);\n\t\t\t\n\t\tif (this.previous != null)\n\t\t{\n\t\t\tthis.connect(this.child, true);\n\t\t}\n\t\t\n\t\tthis.parent = this.previous;\n\t\tthis.previous = tmp;\n\t\tthis.index = this.previousIndex;\n\t\tthis.previousIndex = tmp2;\n\t}\n};\n\n/**\n * Function: disconnect\n * \n * Disconnects the given cell recursively from its\n * terminals and stores the previous terminal in the\n * cell's terminals.\n */\nmxChildChange.prototype.connect = function(cell, isConnect)\n{\n\tisConnect = (isConnect != null) ? isConnect : true;\n\t\n\tvar source = cell.getTerminal(true);\n\tvar target = cell.getTerminal(false);\n\t\n\tif (source != null)\n\t{\n\t\tif (isConnect)\n\t\t{\n\t\t\tthis.model.terminalForCellChanged(cell, source, true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.model.terminalForCellChanged(cell, null, true);\n\t\t}\n\t}\n\t\n\tif (target != null)\n\t{\n\t\tif (isConnect)\n\t\t{\n\t\t\tthis.model.terminalForCellChanged(cell, target, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.model.terminalForCellChanged(cell, null, false);\n\t\t}\n\t}\n\t\n\tcell.setTerminal(source, true);\n\tcell.setTerminal(target, false);\n\t\n\tvar childCount = this.model.getChildCount(cell);\n\t\n\tfor (var i=0; i<childCount; i++)\n\t{\n\t\tthis.connect(this.model.getChildAt(cell, i), isConnect);\n\t}\n};\n\n/**\n * Class: mxTerminalChange\n * \n * Action to change a terminal in a model.\n *\n * Constructor: mxTerminalChange\n * \n * Constructs a change of a terminal in the \n * specified model.\n */\nfunction mxTerminalChange(model, cell, terminal, source)\n{\n\tthis.model = model;\n\tthis.cell = cell;\n\tthis.terminal = terminal;\n\tthis.previous = terminal;\n\tthis.source = source;\n};\n\n/**\n * Function: execute\n * \n * Changes the terminal of <cell> to <previous> using\n * <mxGraphModel.terminalForCellChanged>.\n */\nmxTerminalChange.prototype.execute = function()\n{\n\tif (this.cell != null)\n\t{\n\t\tthis.terminal = this.previous;\n\t\tthis.previous = this.model.terminalForCellChanged(\n\t\t\tthis.cell, this.previous, this.source);\n\t}\n};\n\n/**\n * Class: mxValueChange\n * \n * Action to change a user object in a model.\n *\n * Constructor: mxValueChange\n * \n * Constructs a change of a user object in the \n * specified model.\n */\nfunction mxValueChange(model, cell, value)\n{\n\tthis.model = model;\n\tthis.cell = cell;\n\tthis.value = value;\n\tthis.previous = value;\n};\n\n/**\n * Function: execute\n * \n * Changes the value of <cell> to <previous> using\n * <mxGraphModel.valueForCellChanged>.\n */\nmxValueChange.prototype.execute = function()\n{\n\tif (this.cell != null)\n\t{\n\t\tthis.value = this.previous;\n\t\tthis.previous = this.model.valueForCellChanged(\n\t\t\tthis.cell, this.previous);\n\t}\n};\n\n/**\n * Class: mxStyleChange\n * \n * Action to change a cell's style in a model.\n *\n * Constructor: mxStyleChange\n * \n * Constructs a change of a style in the\n * specified model.\n */\nfunction mxStyleChange(model, cell, style)\n{\n\tthis.model = model;\n\tthis.cell = cell;\n\tthis.style = style;\n\tthis.previous = style;\n};\n\n/**\n * Function: execute\n * \n * Changes the style of <cell> to <previous> using\n * <mxGraphModel.styleForCellChanged>.\n */\nmxStyleChange.prototype.execute = function()\n{\n\tif (this.cell != null)\n\t{\n\t\tthis.style = this.previous;\n\t\tthis.previous = this.model.styleForCellChanged(\n\t\t\tthis.cell, this.previous);\n\t}\n};\n\n/**\n * Class: mxGeometryChange\n * \n * Action to change a cell's geometry in a model.\n *\n * Constructor: mxGeometryChange\n * \n * Constructs a change of a geometry in the\n * specified model.\n */\nfunction mxGeometryChange(model, cell, geometry)\n{\n\tthis.model = model;\n\tthis.cell = cell;\n\tthis.geometry = geometry;\n\tthis.previous = geometry;\n};\n\n/**\n * Function: execute\n * \n * Changes the geometry of <cell> ro <previous> using\n * <mxGraphModel.geometryForCellChanged>.\n */\nmxGeometryChange.prototype.execute = function()\n{\n\tif (this.cell != null)\n\t{\n\t\tthis.geometry = this.previous;\n\t\tthis.previous = this.model.geometryForCellChanged(\n\t\t\tthis.cell, this.previous);\n\t}\n};\n\n/**\n * Class: mxCollapseChange\n * \n * Action to change a cell's collapsed state in a model.\n *\n * Constructor: mxCollapseChange\n * \n * Constructs a change of a collapsed state in the\n * specified model.\n */\nfunction mxCollapseChange(model, cell, collapsed)\n{\n\tthis.model = model;\n\tthis.cell = cell;\n\tthis.collapsed = collapsed;\n\tthis.previous = collapsed;\n};\n\n/**\n * Function: execute\n * \n * Changes the collapsed state of <cell> to <previous> using\n * <mxGraphModel.collapsedStateForCellChanged>.\n */\nmxCollapseChange.prototype.execute = function()\n{\n\tif (this.cell != null)\n\t{\n\t\tthis.collapsed = this.previous;\n\t\tthis.previous = this.model.collapsedStateForCellChanged(\n\t\t\tthis.cell, this.previous);\n\t}\n};\n\n/**\n * Class: mxVisibleChange\n * \n * Action to change a cell's visible state in a model.\n *\n * Constructor: mxVisibleChange\n * \n * Constructs a change of a visible state in the\n * specified model.\n */\nfunction mxVisibleChange(model, cell, visible)\n{\n\tthis.model = model;\n\tthis.cell = cell;\n\tthis.visible = visible;\n\tthis.previous = visible;\n};\n\n/**\n * Function: execute\n * \n * Changes the visible state of <cell> to <previous> using\n * <mxGraphModel.visibleStateForCellChanged>.\n */\nmxVisibleChange.prototype.execute = function()\n{\n\tif (this.cell != null)\n\t{\n\t\tthis.visible = this.previous;\n\t\tthis.previous = this.model.visibleStateForCellChanged(\n\t\t\tthis.cell, this.previous);\n\t}\n};\n\n/**\n * Class: mxCellAttributeChange\n * \n * Action to change the attribute of a cell's user object.\n * There is no method on the graph model that uses this\n * action. To use the action, you can use the code shown\n * in the example below.\n * \n * Example:\n * \n * To change the attributeName in the cell's user object\n * to attributeValue, use the following code:\n * \n * (code)\n * model.beginUpdate();\n * try\n * {\n *   var edit = new mxCellAttributeChange(\n *     cell, attributeName, attributeValue);\n *   model.execute(edit);\n * }\n * finally\n * {\n *   model.endUpdate();\n * } \n * (end)\n *\n * Constructor: mxCellAttributeChange\n * \n * Constructs a change of a attribute of the DOM node\n * stored as the value of the given <mxCell>.\n */\nfunction mxCellAttributeChange(cell, attribute, value)\n{\n\tthis.cell = cell;\n\tthis.attribute = attribute;\n\tthis.value = value;\n\tthis.previous = value;\n};\n\n/**\n * Function: execute\n * \n * Changes the attribute of the cell's user object by\n * using <mxCell.setAttribute>.\n */\nmxCellAttributeChange.prototype.execute = function()\n{\n\tif (this.cell != null)\n\t{\n\t\tvar tmp = this.cell.getAttribute(this.attribute);\n\t\t\n\t\tif (this.previous == null)\n\t\t{\n\t\t\tthis.cell.value.removeAttribute(this.attribute);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.cell.setAttribute(this.attribute, this.previous);\n\t\t}\n\t\t\n\t\tthis.previous = tmp;\n\t}\n};\n\n__mxOutput.mxGraphModel = typeof mxGraphModel !== 'undefined' ? mxGraphModel : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCell\n *\n * Cells are the elements of the graph model. They represent the state\n * of the groups, vertices and edges in a graph.\n * \n * Custom attributes:\n * \n * For custom attributes we recommend using an XML node as the value of a cell.\n * The following code can be used to create a cell with an XML node as the\n * value:\n * \n * (code)\n * var doc = mxUtils.createXmlDocument();\n * var node = doc.createElement('MyNode')\n * node.setAttribute('label', 'MyLabel');\n * node.setAttribute('attribute1', 'value1');\n * graph.insertVertex(graph.getDefaultParent(), null, node, 40, 40, 80, 30);\n * (end)\n * \n * For the label to work, <mxGraph.convertValueToString> and\n * <mxGraph.cellLabelChanged> should be overridden as follows:\n * \n * (code)\n * graph.convertValueToString = function(cell)\n * {\n *   if (mxUtils.isNode(cell.value))\n *   {\n *     return cell.getAttribute('label', '')\n *   }\n * };\n * \n * var cellLabelChanged = graph.cellLabelChanged;\n * graph.cellLabelChanged = function(cell, newValue, autoSize)\n * {\n *   if (mxUtils.isNode(cell.value))\n *   {\n *     // Clones the value for correct undo/redo\n *     var elt = cell.value.cloneNode(true);\n *     elt.setAttribute('label', newValue);\n *     newValue = elt;\n *   }\n *   \n *   cellLabelChanged.apply(this, arguments);\n * };\n * (end)\n * \n * Callback: onInit\n *\n * Called from within the constructor.\n * \n * Constructor: mxCell\n *\n * Constructs a new cell to be used in a graph model.\n * This method invokes <onInit> upon completion.\n * \n * Parameters:\n * \n * value - Optional object that represents the cell value.\n * geometry - Optional <mxGeometry> that specifies the geometry.\n * style - Optional formatted string that defines the style.\n */\nfunction mxCell(value, geometry, style)\n{\n\tthis.value = value;\n\tthis.setGeometry(geometry);\n\tthis.setStyle(style);\n\t\n\tif (this.onInit != null)\n\t{\n\t\tthis.onInit();\n\t}\n};\n\n/**\n * Variable: id\n *\n * Holds the Id. Default is null.\n */\nmxCell.prototype.id = null;\n\n/**\n * Variable: value\n *\n * Holds the user object. Default is null.\n */\nmxCell.prototype.value = null;\n\n/**\n * Variable: geometry\n *\n * Holds the <mxGeometry>. Default is null.\n */\nmxCell.prototype.geometry = null;\n\n/**\n * Variable: style\n *\n * Holds the style as a string of the form [(stylename|key=value);]. Default is\n * null.\n */\nmxCell.prototype.style = null;\n\n/**\n * Variable: vertex\n *\n * Specifies whether the cell is a vertex. Default is false.\n */\nmxCell.prototype.vertex = false;\n\n/**\n * Variable: edge\n *\n * Specifies whether the cell is an edge. Default is false.\n */\nmxCell.prototype.edge = false;\n\n/**\n * Variable: connectable\n *\n * Specifies whether the cell is connectable. Default is true.\n */\nmxCell.prototype.connectable = true;\n\n/**\n * Variable: visible\n *\n * Specifies whether the cell is visible. Default is true.\n */\nmxCell.prototype.visible = true;\n\n/**\n * Variable: collapsed\n *\n * Specifies whether the cell is collapsed. Default is false.\n */\nmxCell.prototype.collapsed = false;\n\n/**\n * Variable: parent\n *\n * Reference to the parent cell.\n */\nmxCell.prototype.parent = null;\n\n/**\n * Variable: source\n *\n * Reference to the source terminal.\n */\nmxCell.prototype.source = null;\n\n/**\n * Variable: target\n *\n * Reference to the target terminal.\n */\nmxCell.prototype.target = null;\n\n/**\n * Variable: children\n *\n * Holds the child cells.\n */\nmxCell.prototype.children = null;\n\n/**\n * Variable: edges\n *\n * Holds the edges.\n */\nmxCell.prototype.edges = null;\n\n/**\n * Variable: mxTransient\n *\n * List of members that should not be cloned inside <clone>. This field is\n * passed to <mxUtils.clone> and is not made persistent in <mxCellCodec>.\n * This is not a convention for all classes, it is only used in this class\n * to mark transient fields since transient modifiers are not supported by\n * the language.\n */\nmxCell.prototype.mxTransient = ['id', 'value', 'parent', 'source',\n                                'target', 'children', 'edges'];\n\n/**\n * Function: getId\n *\n * Returns the Id of the cell as a string.\n */\nmxCell.prototype.getId = function()\n{\n\treturn this.id;\n};\n\t\t\n/**\n * Function: setId\n *\n * Sets the Id of the cell to the given string.\n */\nmxCell.prototype.setId = function(id)\n{\n\tthis.id = id;\n};\n\n/**\n * Function: getValue\n *\n * Returns the user object of the cell. The user\n * object is stored in <value>.\n */\nmxCell.prototype.getValue = function()\n{\n\treturn this.value;\n};\n\t\t\n/**\n * Function: setValue\n *\n * Sets the user object of the cell. The user object\n * is stored in <value>.\n */\nmxCell.prototype.setValue = function(value)\n{\n\tthis.value = value;\n};\n\n/**\n * Function: valueChanged\n *\n * Changes the user object after an in-place edit\n * and returns the previous value. This implementation\n * replaces the user object with the given value and\n * returns the old user object.\n */\nmxCell.prototype.valueChanged = function(newValue)\n{\n\tvar previous = this.getValue();\n\tthis.setValue(newValue);\n\t\n\treturn previous;\n};\n\n/**\n * Function: getGeometry\n *\n * Returns the <mxGeometry> that describes the <geometry>.\n */\nmxCell.prototype.getGeometry = function()\n{\n\treturn this.geometry;\n};\n\n/**\n * Function: setGeometry\n *\n * Sets the <mxGeometry> to be used as the <geometry>.\n */\nmxCell.prototype.setGeometry = function(geometry)\n{\n\tthis.geometry = geometry;\n};\n\n/**\n * Function: getStyle\n *\n * Returns a string that describes the <style>.\n */\nmxCell.prototype.getStyle = function()\n{\n\treturn this.style;\n};\n\n/**\n * Function: setStyle\n *\n * Sets the string to be used as the <style>.\n */\nmxCell.prototype.setStyle = function(style)\n{\n\tthis.style = style;\n};\n\n/**\n * Function: isVertex\n *\n * Returns true if the cell is a vertex.\n */\nmxCell.prototype.isVertex = function()\n{\n\treturn this.vertex != 0;\n};\n\n/**\n * Function: setVertex\n *\n * Specifies if the cell is a vertex. This should only be assigned at\n * construction of the cell and not be changed during its lifecycle.\n * \n * Parameters:\n * \n * vertex - Boolean that specifies if the cell is a vertex.\n */\nmxCell.prototype.setVertex = function(vertex)\n{\n\tthis.vertex = vertex;\n};\n\n/**\n * Function: isEdge\n *\n * Returns true if the cell is an edge.\n */\nmxCell.prototype.isEdge = function()\n{\n\treturn this.edge != 0;\n};\n\t\n/**\n * Function: setEdge\n * \n * Specifies if the cell is an edge. This should only be assigned at\n * construction of the cell and not be changed during its lifecycle.\n * \n * Parameters:\n * \n * edge - Boolean that specifies if the cell is an edge.\n */\nmxCell.prototype.setEdge = function(edge)\n{\n\tthis.edge = edge;\n};\n\n/**\n * Function: isConnectable\n *\n * Returns true if the cell is connectable.\n */\nmxCell.prototype.isConnectable = function()\n{\n\treturn this.connectable != 0;\n};\n\n/**\n * Function: setConnectable\n *\n * Sets the connectable state.\n * \n * Parameters:\n * \n * connectable - Boolean that specifies the new connectable state.\n */\nmxCell.prototype.setConnectable = function(connectable)\n{\n\tthis.connectable = connectable;\n};\n\n/**\n * Function: isVisible\n *\n * Returns true if the cell is visibile.\n */\nmxCell.prototype.isVisible = function()\n{\n\treturn this.visible != 0;\n};\n\n/**\n * Function: setVisible\n *\n * Specifies if the cell is visible.\n * \n * Parameters:\n * \n * visible - Boolean that specifies the new visible state.\n */\nmxCell.prototype.setVisible = function(visible)\n{\n\tthis.visible = visible;\n};\n\n/**\n * Function: isCollapsed\n *\n * Returns true if the cell is collapsed.\n */\nmxCell.prototype.isCollapsed = function()\n{\n\treturn this.collapsed != 0;\n};\n\n/**\n * Function: setCollapsed\n *\n * Sets the collapsed state.\n * \n * Parameters:\n * \n * collapsed - Boolean that specifies the new collapsed state.\n */\nmxCell.prototype.setCollapsed = function(collapsed)\n{\n\tthis.collapsed = collapsed;\n};\n\n/**\n * Function: getParent\n *\n * Returns the cell's parent.\n */\nmxCell.prototype.getParent = function()\n{\n\treturn this.parent;\n};\n\n/**\n * Function: setParent\n *\n * Sets the parent cell.\n * \n * Parameters:\n * \n * parent - <mxCell> that represents the new parent.\n */\nmxCell.prototype.setParent = function(parent)\n{\n\tthis.parent = parent;\n};\n\n/**\n * Function: getTerminal\n *\n * Returns the source or target terminal.\n * \n * Parameters:\n * \n * source - Boolean that specifies if the source terminal should be\n * returned.\n */\nmxCell.prototype.getTerminal = function(source)\n{\n\treturn (source) ? this.source : this.target;\n};\n\n/**\n * Function: setTerminal\n *\n * Sets the source or target terminal and returns the new terminal.\n * \n * Parameters:\n * \n * terminal - <mxCell> that represents the new source or target terminal.\n * isSource - Boolean that specifies if the source or target terminal\n * should be set.\n */\nmxCell.prototype.setTerminal = function(terminal, isSource)\n{\n\tif (isSource)\n\t{\n\t\tthis.source = terminal;\n\t}\n\telse\n\t{\n\t\tthis.target = terminal;\n\t}\n\t\n\treturn terminal;\n};\n\n/**\n * Function: getChildCount\n *\n * Returns the number of child cells.\n */\nmxCell.prototype.getChildCount = function()\n{\n\treturn (this.children == null) ? 0 : this.children.length;\n};\n\n/**\n * Function: getIndex\n *\n * Returns the index of the specified child in the child array.\n * \n * Parameters:\n * \n * child - Child whose index should be returned.\n */\nmxCell.prototype.getIndex = function(child)\n{\n\treturn mxUtils.indexOf(this.children, child);\n};\n\n/**\n * Function: getChildAt\n *\n * Returns the child at the specified index.\n * \n * Parameters:\n * \n * index - Integer that specifies the child to be returned.\n */\nmxCell.prototype.getChildAt = function(index)\n{\n\treturn (this.children == null) ? null : this.children[index];\n};\n\n/**\n * Function: insert\n *\n * Inserts the specified child into the child array at the specified index\n * and updates the parent reference of the child. If not childIndex is\n * specified then the child is appended to the child array. Returns the\n * inserted child.\n * \n * Parameters:\n * \n * child - <mxCell> to be inserted or appended to the child array.\n * index - Optional integer that specifies the index at which the child\n * should be inserted into the child array.\n */\nmxCell.prototype.insert = function(child, index)\n{\n\tif (child != null)\n\t{\n\t\tif (index == null)\n\t\t{\n\t\t\tindex = this.getChildCount();\n\t\t\t\n\t\t\tif (child.getParent() == this)\n\t\t\t{\n\t\t\t\tindex--;\n\t\t\t}\n\t\t}\n\n\t\tchild.removeFromParent();\n\t\tchild.setParent(this);\n\t\t\n\t\tif (this.children == null)\n\t\t{\n\t\t\tthis.children = [];\n\t\t\tthis.children.push(child);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.children.splice(index, 0, child);\n\t\t}\n\t}\n\t\n\treturn child;\n};\n\n/**\n * Function: remove\n *\n * Removes the child at the specified index from the child array and\n * returns the child that was removed. Will remove the parent reference of\n * the child.\n * \n * Parameters:\n * \n * index - Integer that specifies the index of the child to be\n * removed.\n */\nmxCell.prototype.remove = function(index)\n{\n\tvar child = null;\n\t\n\tif (this.children != null && index >= 0)\n\t{\n\t\tchild = this.getChildAt(index);\n\t\t\n\t\tif (child != null)\n\t\t{\n\t\t\tthis.children.splice(index, 1);\n\t\t\tchild.setParent(null);\n\t\t}\n\t}\n\t\n\treturn child;\n};\n\n/**\n * Function: removeFromParent\n *\n * Removes the cell from its parent.\n */\nmxCell.prototype.removeFromParent = function()\n{\n\tif (this.parent != null)\n\t{\n\t\tvar index = this.parent.getIndex(this);\n\t\tthis.parent.remove(index);\n\t}\n};\n\n/**\n * Function: getEdgeCount\n *\n * Returns the number of edges in the edge array.\n */\nmxCell.prototype.getEdgeCount = function()\n{\n\treturn (this.edges == null) ? 0 : this.edges.length;\n};\n\n/**\n * Function: getEdgeIndex\n *\n * Returns the index of the specified edge in <edges>.\n * \n * Parameters:\n * \n * edge - <mxCell> whose index in <edges> should be returned.\n */\nmxCell.prototype.getEdgeIndex = function(edge)\n{\n\treturn mxUtils.indexOf(this.edges, edge);\n};\n\n/**\n * Function: getEdgeAt\n *\n * Returns the edge at the specified index in <edges>.\n * \n * Parameters:\n * \n * index - Integer that specifies the index of the edge to be returned.\n */\nmxCell.prototype.getEdgeAt = function(index)\n{\n\treturn (this.edges == null) ? null : this.edges[index];\n};\n\n/**\n * Function: insertEdge\n *\n * Inserts the specified edge into the edge array and returns the edge.\n * Will update the respective terminal reference of the edge.\n * \n * Parameters:\n * \n * edge - <mxCell> to be inserted into the edge array.\n * isOutgoing - Boolean that specifies if the edge is outgoing.\n */\nmxCell.prototype.insertEdge = function(edge, isOutgoing)\n{\n\tif (edge != null)\n\t{\n\t\tedge.removeFromTerminal(isOutgoing);\n\t\tedge.setTerminal(this, isOutgoing);\n\t\t\n\t\tif (this.edges == null ||\n\t\t\tedge.getTerminal(!isOutgoing) != this ||\n\t\t\tmxUtils.indexOf(this.edges, edge) < 0)\n\t\t{\n\t\t\tif (this.edges == null)\n\t\t\t{\n\t\t\t\tthis.edges = [];\n\t\t\t}\n\t\t\t\n\t\t\tthis.edges.push(edge);\n\t\t}\n\t}\n\t\n\treturn edge;\n};\n\n/**\n * Function: removeEdge\n *\n * Removes the specified edge from the edge array and returns the edge.\n * Will remove the respective terminal reference from the edge.\n * \n * Parameters:\n * \n * edge - <mxCell> to be removed from the edge array.\n * isOutgoing - Boolean that specifies if the edge is outgoing.\n */\nmxCell.prototype.removeEdge = function(edge, isOutgoing)\n{\n\tif (edge != null)\n\t{\n\t\tif (edge.getTerminal(!isOutgoing) != this &&\n\t\t\tthis.edges != null)\n\t\t{\n\t\t\tvar index = this.getEdgeIndex(edge);\n\t\t\t\n\t\t\tif (index >= 0)\n\t\t\t{\n\t\t\t\tthis.edges.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tedge.setTerminal(null, isOutgoing);\n\t}\n\t\n\treturn edge;\n};\n\n/**\n * Function: removeFromTerminal\n *\n * Removes the edge from its source or target terminal.\n * \n * Parameters:\n * \n * isSource - Boolean that specifies if the edge should be removed from its\n * source or target terminal.\n */\nmxCell.prototype.removeFromTerminal = function(isSource)\n{\n\tvar terminal = this.getTerminal(isSource);\n\t\n\tif (terminal != null)\n\t{\n\t\tterminal.removeEdge(this, isSource);\n\t}\n};\n\n/**\n * Function: hasAttribute\n * \n * Returns true if the user object is an XML node that contains the given\n * attribute.\n * \n * Parameters:\n * \n * name - Name of the attribute.\n */\nmxCell.prototype.hasAttribute = function(name)\n{\n\tvar userObject = this.getValue();\n\t\n\treturn (userObject != null &&\n\t\tuserObject.nodeType == mxConstants.NODETYPE_ELEMENT && userObject.hasAttribute) ?\n\t\tuserObject.hasAttribute(name) : userObject.getAttribute(name) != null;\n};\n\n/**\n * Function: getAttribute\n *\n * Returns the specified attribute from the user object if it is an XML\n * node.\n * \n * Parameters:\n * \n * name - Name of the attribute whose value should be returned.\n * defaultValue - Optional default value to use if the attribute has no\n * value.\n */\nmxCell.prototype.getAttribute = function(name, defaultValue)\n{\n\tvar userObject = this.getValue();\n\t\n\tvar val = (userObject != null &&\n\t\tuserObject.nodeType == mxConstants.NODETYPE_ELEMENT) ?\n\t\tuserObject.getAttribute(name) : null;\n\t\t\n\treturn (val != null) ? val : defaultValue;\n};\n\n/**\n * Function: setAttribute\n *\n * Sets the specified attribute on the user object if it is an XML node.\n * \n * Parameters:\n * \n * name - Name of the attribute whose value should be set.\n * value - New value of the attribute.\n */\nmxCell.prototype.setAttribute = function(name, value)\n{\n\tvar userObject = this.getValue();\n\t\n\tif (userObject != null &&\n\t\tuserObject.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t{\n\t\tuserObject.setAttribute(name, value);\n\t}\n};\n\n/**\n * Function: clone\n *\n * Returns a clone of the cell. Uses <cloneValue> to clone\n * the user object. All fields in <mxTransient> are ignored\n * during the cloning.\n */\nmxCell.prototype.clone = function()\n{\n\tvar clone = mxUtils.clone(this, this.mxTransient);\n\tclone.setValue(this.cloneValue());\n\t\n\treturn clone;\n};\n\n/**\n * Function: cloneValue\n *\n * Returns a clone of the cell's user object.\n */\nmxCell.prototype.cloneValue = function()\n{\n\tvar value = this.getValue();\n\t\n\tif (value != null)\n\t{\n\t\tif (typeof(value.clone) == 'function')\n\t\t{\n\t\t\tvalue = value.clone();\n\t\t}\n\t\telse if (!isNaN(value.nodeType))\n\t\t{\n\t\t\tvalue = value.cloneNode(true);\n\t\t}\n\t}\n\t\n\treturn value;\n};\n\n__mxOutput.mxCell = typeof mxCell !== 'undefined' ? mxCell : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGeometry\n * \n * Extends <mxRectangle> to represent the geometry of a cell.\n * \n * For vertices, the geometry consists of the x- and y-location, and the width\n * and height. For edges, the geometry consists of the optional terminal- and\n * control points. The terminal points are only required if an edge is\n * unconnected, and are stored in the <sourcePoint> and <targetPoint>\n * variables, respectively.\n * \n * Example:\n * \n * If an edge is unconnected, that is, it has no source or target terminal,\n * then a geometry with terminal points for a new edge can be defined as\n * follows.\n * \n * (code)\n * geometry.setTerminalPoint(new mxPoint(x1, y1), true);\n * geometry.points = [new mxPoint(x2, y2)];\n * geometry.setTerminalPoint(new mxPoint(x3, y3), false);\n * (end)\n * \n * Control points are used regardless of the connected state of an edge and may\n * be ignored or interpreted differently depending on the edge's <mxEdgeStyle>.\n * \n * To disable automatic reset of control points after a cell has been moved or\n * resized, the the <mxGraph.resizeEdgesOnMove> and\n * <mxGraph.resetEdgesOnResize> may be used.\n *\n * Edge Labels:\n * \n * Using the x- and y-coordinates of a cell's geometry, it is possible to\n * position the label on edges on a specific location on the actual edge shape\n * as it appears on the screen. The x-coordinate of an edge's geometry is used\n * to describe the distance from the center of the edge from -1 to 1 with 0\n * being the center of the edge and the default value. The y-coordinate of an\n * edge's geometry is used to describe the absolute, orthogonal distance in\n * pixels from that point. In addition, the <mxGeometry.offset> is used as an\n * absolute offset vector from the resulting point.\n * \n * This coordinate system is applied if <relative> is true, otherwise the\n * offset defines the absolute vector from the edge's center point to the\n * label and the values for <x> and <y> are ignored.\n * \n * The width and height parameter for edge geometries can be used to set the\n * label width and height (eg. for word wrapping).\n * \n * Ports:\n * \n * The term \"port\" refers to a relatively positioned, connectable child cell,\n * which is used to specify the connection between the parent and another cell\n * in the graph. Ports are typically modeled as vertices with relative\n * geometries.\n * \n * Offsets:\n * \n * The <offset> field is interpreted in 3 different ways, depending on the cell\n * and the geometry. For edges, the offset defines the absolute offset for the\n * edge label. For relative geometries, the offset defines the absolute offset\n * for the origin (top, left corner) of the vertex, otherwise the offset\n * defines the absolute offset for the label inside the vertex or group.\n * \n * Constructor: mxGeometry\n *\n * Constructs a new object to describe the size and location of a vertex or\n * the control points of an edge.\n */\nfunction mxGeometry(x, y, width, height)\n{\n\tmxRectangle.call(this, x, y, width, height);\n};\n\n/**\n * Extends mxRectangle.\n */\nmxGeometry.prototype = new mxRectangle();\nmxGeometry.prototype.constructor = mxGeometry;\n\n/**\n * Variable: TRANSLATE_CONTROL_POINTS\n * \n * Global switch to translate the points in translate. Default is true.\n */\nmxGeometry.prototype.TRANSLATE_CONTROL_POINTS = true;\n\n/**\n * Variable: alternateBounds\n *\n * Stores alternate values for x, y, width and height in a rectangle. See\n * <swap> to exchange the values. Default is null.\n */\nmxGeometry.prototype.alternateBounds = null;\n\n/**\n * Variable: sourcePoint\n *\n * Defines the source <mxPoint> of the edge. This is used if the\n * corresponding edge does not have a source vertex. Otherwise it is\n * ignored. Default is  null.\n */\nmxGeometry.prototype.sourcePoint = null;\n\n/**\n * Variable: targetPoint\n *\n * Defines the target <mxPoint> of the edge. This is used if the\n * corresponding edge does not have a target vertex. Otherwise it is\n * ignored. Default is null.\n */\nmxGeometry.prototype.targetPoint = null;\n\n/**\n * Variable: points\n *\n * Array of <mxPoints> which specifies the control points along the edge.\n * These points are the intermediate points on the edge, for the endpoints\n * use <targetPoint> and <sourcePoint> or set the terminals of the edge to\n * a non-null value. Default is null.\n */\nmxGeometry.prototype.points = null;\n\n/**\n * Variable: offset\n *\n * For edges, this holds the offset (in pixels) from the position defined\n * by <x> and <y> on the edge. For relative geometries (for vertices), this\n * defines the absolute offset from the point defined by the relative\n * coordinates. For absolute geometries (for vertices), this defines the\n * offset for the label. Default is null.\n */\nmxGeometry.prototype.offset = null;\n\n/**\n * Variable: relative\n *\n * Specifies if the coordinates in the geometry are to be interpreted as\n * relative coordinates. For edges, this is used to define the location of\n * the edge label relative to the edge as rendered on the display. For\n * vertices, this specifies the relative location inside the bounds of the\n * parent cell.\n * \n * If this is false, then the coordinates are relative to the origin of the\n * parent cell or, for edges, the edge label position is relative to the\n * center of the edge as rendered on screen.\n * \n * Default is false.\n */\nmxGeometry.prototype.relative = false;\n\n/**\n * Function: swap\n * \n * Swaps the x, y, width and height with the values stored in\n * <alternateBounds> and puts the previous values into <alternateBounds> as\n * a rectangle. This operation is carried-out in-place, that is, using the\n * existing geometry instance. If this operation is called during a graph\n * model transactional change, then the geometry should be cloned before\n * calling this method and setting the geometry of the cell using\n * <mxGraphModel.setGeometry>.\n */\nmxGeometry.prototype.swap = function()\n{\n\tif (this.alternateBounds != null)\n\t{\n\t\tvar old = new mxRectangle(\n\t\t\tthis.x, this.y, this.width, this.height);\n\n\t\tthis.x = this.alternateBounds.x;\n\t\tthis.y = this.alternateBounds.y;\n\t\tthis.width = this.alternateBounds.width;\n\t\tthis.height = this.alternateBounds.height;\n\n\t\tthis.alternateBounds = old;\n\t}\n};\n\n/**\n * Function: getTerminalPoint\n * \n * Returns the <mxPoint> representing the source or target point of this\n * edge. This is only used if the edge has no source or target vertex.\n * \n * Parameters:\n * \n * isSource - Boolean that specifies if the source or target point\n * should be returned.\n */\nmxGeometry.prototype.getTerminalPoint = function(isSource)\n{\n\treturn (isSource) ? this.sourcePoint : this.targetPoint;\n};\n\n/**\n * Function: setTerminalPoint\n * \n * Sets the <sourcePoint> or <targetPoint> to the given <mxPoint> and\n * returns the new point.\n * \n * Parameters:\n * \n * point - Point to be used as the new source or target point.\n * isSource - Boolean that specifies if the source or target point\n * should be set.\n */\nmxGeometry.prototype.setTerminalPoint = function(point, isSource)\n{\n\tif (isSource)\n\t{\n\t\tthis.sourcePoint = point;\n\t}\n\telse\n\t{\n\t\tthis.targetPoint = point;\n\t}\n\t\n\treturn point;\n};\n\n/**\n * Function: rotate\n * \n * Rotates the geometry by the given angle around the given center. That is,\n * <x> and <y> of the geometry, the <sourcePoint>, <targetPoint> and all\n * <points> are translated by the given amount. <x> and <y> are only\n * translated if <relative> is false.\n * \n * Parameters:\n * \n * angle - Number that specifies the rotation angle in degrees.\n * cx - <mxPoint> that specifies the center of the rotation.\n */\nmxGeometry.prototype.rotate = function(angle, cx)\n{\n\tvar rad = mxUtils.toRadians(angle);\n\tvar cos = Math.cos(rad);\n\tvar sin = Math.sin(rad);\n\t\n\t// Rotates the geometry\n\tif (!this.relative)\n\t{\n\t\tvar ct = new mxPoint(this.getCenterX(), this.getCenterY());\n\t\tvar pt = mxUtils.getRotatedPoint(ct, cos, sin, cx);\n\t\t\n\t\tthis.x = Math.round(pt.x - this.width / 2);\n\t\tthis.y = Math.round(pt.y - this.height / 2);\n\t}\n\n\t// Rotates the source point\n\tif (this.sourcePoint != null)\n\t{\n\t\tvar pt = mxUtils.getRotatedPoint(this.sourcePoint, cos, sin, cx);\n\t\tthis.sourcePoint.x = Math.round(pt.x);\n\t\tthis.sourcePoint.y = Math.round(pt.y);\n\t}\n\t\n\t// Translates the target point\n\tif (this.targetPoint != null)\n\t{\n\t\tvar pt = mxUtils.getRotatedPoint(this.targetPoint, cos, sin, cx);\n\t\tthis.targetPoint.x = Math.round(pt.x);\n\t\tthis.targetPoint.y = Math.round(pt.y);\t\n\t}\n\t\n\t// Translate the control points\n\tif (this.points != null)\n\t{\n\t\tfor (var i = 0; i < this.points.length; i++)\n\t\t{\n\t\t\tif (this.points[i] != null)\n\t\t\t{\n\t\t\t\tvar pt = mxUtils.getRotatedPoint(this.points[i], cos, sin, cx);\n\t\t\t\tthis.points[i].x = Math.round(pt.x);\n\t\t\t\tthis.points[i].y = Math.round(pt.y);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: translate\n * \n * Translates the geometry by the specified amount. That is, <x> and <y> of the\n * geometry, the <sourcePoint>, <targetPoint> and all <points> are translated\n * by the given amount. <x> and <y> are only translated if <relative> is false.\n * If <TRANSLATE_CONTROL_POINTS> is false, then <points> are not modified by\n * this function.\n * \n * Parameters:\n * \n * dx - Number that specifies the x-coordinate of the translation.\n * dy - Number that specifies the y-coordinate of the translation.\n */\nmxGeometry.prototype.translate = function(dx, dy)\n{\n\tdx = parseFloat(dx);\n\tdy = parseFloat(dy);\n\t\n\t// Translates the geometry\n\tif (!this.relative)\n\t{\n\t\tthis.x = parseFloat(this.x) + dx;\n\t\tthis.y = parseFloat(this.y) + dy;\n\t}\n\n\t// Translates the source point\n\tif (this.sourcePoint != null)\n\t{\n\t\tthis.sourcePoint.x = parseFloat(this.sourcePoint.x) + dx;\n\t\tthis.sourcePoint.y = parseFloat(this.sourcePoint.y) + dy;\n\t}\n\t\n\t// Translates the target point\n\tif (this.targetPoint != null)\n\t{\n\t\tthis.targetPoint.x = parseFloat(this.targetPoint.x) + dx;\n\t\tthis.targetPoint.y = parseFloat(this.targetPoint.y) + dy;\t\t\n\t}\n\n\t// Translate the control points\n\tif (this.TRANSLATE_CONTROL_POINTS && this.points != null)\n\t{\n\t\tfor (var i = 0; i < this.points.length; i++)\n\t\t{\n\t\t\tif (this.points[i] != null)\n\t\t\t{\n\t\t\t\tthis.points[i].x = parseFloat(this.points[i].x) + dx;\n\t\t\t\tthis.points[i].y = parseFloat(this.points[i].y) + dy;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: scale\n * \n * Scales the geometry by the given amount. That is, <x> and <y> of the\n * geometry, the <sourcePoint>, <targetPoint> and all <points> are scaled\n * by the given amount. <x>, <y>, <width> and <height> are only scaled if\n * <relative> is false. If <fixedAspect> is true, then the smaller value\n * is used to scale the width and the height.\n * \n * Parameters:\n * \n * sx - Number that specifies the horizontal scale factor.\n * sy - Number that specifies the vertical scale factor.\n * fixedAspect - Optional boolean to keep the aspect ratio fixed.\n */\nmxGeometry.prototype.scale = function(sx, sy, fixedAspect)\n{\n\tsx = parseFloat(sx);\n\tsy = parseFloat(sy);\n\n\t// Translates the source point\n\tif (this.sourcePoint != null)\n\t{\n\t\tthis.sourcePoint.x = parseFloat(this.sourcePoint.x) * sx;\n\t\tthis.sourcePoint.y = parseFloat(this.sourcePoint.y) * sy;\n\t}\n\t\n\t// Translates the target point\n\tif (this.targetPoint != null)\n\t{\n\t\tthis.targetPoint.x = parseFloat(this.targetPoint.x) * sx;\n\t\tthis.targetPoint.y = parseFloat(this.targetPoint.y) * sy;\t\t\n\t}\n\n\t// Translate the control points\n\tif (this.points != null)\n\t{\n\t\tfor (var i = 0; i < this.points.length; i++)\n\t\t{\n\t\t\tif (this.points[i] != null)\n\t\t\t{\n\t\t\t\tthis.points[i].x = parseFloat(this.points[i].x) * sx;\n\t\t\t\tthis.points[i].y = parseFloat(this.points[i].y) * sy;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Translates the geometry\n\tif (!this.relative)\n\t{\n\t\tthis.x = parseFloat(this.x) * sx;\n\t\tthis.y = parseFloat(this.y) * sy;\n\n\t\tif (fixedAspect)\n\t\t{\n\t\t\tsy = sx = Math.min(sx, sy);\n\t\t}\n\t\t\n\t\tthis.width = parseFloat(this.width) * sx;\n\t\tthis.height = parseFloat(this.height) * sy;\n\t}\n};\n\n/**\n * Function: equals\n * \n * Returns true if the given object equals this geometry.\n */\nmxGeometry.prototype.equals = function(obj)\n{\n\treturn mxRectangle.prototype.equals.apply(this, arguments) &&\n\t\tthis.relative == obj.relative &&\n\t\t((this.sourcePoint == null && obj.sourcePoint == null) || (this.sourcePoint != null && this.sourcePoint.equals(obj.sourcePoint))) &&\n\t\t((this.targetPoint == null && obj.targetPoint == null) || (this.targetPoint != null && this.targetPoint.equals(obj.targetPoint))) &&\n\t\t((this.points == null && obj.points == null) || (this.points != null && mxUtils.equalPoints(this.points, obj.points))) &&\n\t\t((this.alternateBounds == null && obj.alternateBounds == null) || (this.alternateBounds != null && this.alternateBounds.equals(obj.alternateBounds))) &&\n\t\t((this.offset == null && obj.offset == null) || (this.offset != null && this.offset.equals(obj.offset)));\n};\n\n__mxOutput.mxGeometry = typeof mxGeometry !== 'undefined' ? mxGeometry : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxCellPath =\n{\n\n\t/**\n\t * Class: mxCellPath\n\t * \n\t * Implements a mechanism for temporary cell Ids.\n\t * \n\t * Variable: PATH_SEPARATOR\n\t * \n\t * Defines the separator between the path components. Default is \".\".\n\t */\n\tPATH_SEPARATOR: '.',\n\t\n\t/**\n\t * Function: create\n\t * \n\t * Creates the cell path for the given cell. The cell path is a\n\t * concatenation of the indices of all ancestors on the (finite) path to\n\t * the root, eg. \"0.0.0.1\".\n\t * \n\t * Parameters:\n\t * \n\t * cell - Cell whose path should be returned.\n\t */\n\tcreate: function(cell)\n\t{\n\t\tvar result = '';\n\t\t\n\t\tif (cell != null)\n\t\t{\n\t\t\tvar parent = cell.getParent();\n\t\t\t\n\t\t\twhile (parent != null)\n\t\t\t{\n\t\t\t\tvar index = parent.getIndex(cell);\n\t\t\t\tresult = index + mxCellPath.PATH_SEPARATOR + result;\n\t\t\t\t\n\t\t\t\tcell = parent;\n\t\t\t\tparent = cell.getParent();\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Removes trailing separator\n\t\tvar n = result.length;\n\t\t\n\t\tif (n > 1)\n\t\t{\n\t\t\tresult = result.substring(0, n - 1);\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: getParentPath\n\t * \n\t * Returns the path for the parent of the cell represented by the given\n\t * path. Returns null if the given path has no parent.\n\t * \n\t * Parameters:\n\t * \n\t * path - Path whose parent path should be returned.\n\t */\n\tgetParentPath: function(path)\n\t{\n\t\tif (path != null)\n\t\t{\n\t\t\tvar index = path.lastIndexOf(mxCellPath.PATH_SEPARATOR);\n\n\t\t\tif (index >= 0)\n\t\t\t{\n\t\t\t\treturn path.substring(0, index);\n\t\t\t}\n\t\t\telse if (path.length > 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Function: resolve\n\t * \n\t * Returns the cell for the specified cell path using the given root as the\n\t * root of the path.\n\t * \n\t * Parameters:\n\t * \n\t * root - Root cell of the path to be resolved.\n\t * path - String that defines the path.\n\t */\n\tresolve: function(root, path)\n\t{\n\t\tvar parent = root;\n\t\t\n\t\tif (path != null)\n\t\t{\n\t\t\tvar tokens = path.split(mxCellPath.PATH_SEPARATOR);\n\t\t\t\n\t\t\tfor (var i=0; i<tokens.length; i++)\n\t\t\t{\n\t\t\t\tparent = parent.getChildAt(parseInt(tokens[i]));\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn parent;\n\t},\n\t\n\t/**\n\t * Function: compare\n\t * \n\t * Compares the given cell paths and returns -1 if p1 is smaller, 0 if\n\t * p1 is equal and 1 if p1 is greater than p2.\n\t */\n\tcompare: function(p1, p2)\n\t{\n\t\tvar min = Math.min(p1.length, p2.length);\n\t\tvar comp = 0;\n\t\t\n\t\tfor (var i = 0; i < min; i++)\n\t\t{\n\t\t\tif (p1[i] != p2[i])\n\t\t\t{\n\t\t\t\tif (p1[i].length == 0 ||\n\t\t\t\t\tp2[i].length == 0)\n\t\t\t\t{\n\t\t\t\t\tcomp = (p1[i] == p2[i]) ? 0 : ((p1[i] > p2[i]) ? 1 : -1);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar t1 = parseInt(p1[i]);\n\t\t\t\t\tvar t2 = parseInt(p2[i]);\n\t\t\t\t\t\n\t\t\t\t\tcomp = (t1 == t2) ? 0 : ((t1 > t2) ? 1 : -1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Compares path length if both paths are equal to this point\n\t\tif (comp == 0)\n\t\t{\n\t\t\tvar t1 = p1.length;\n\t\t\tvar t2 = p2.length;\n\t\t\t\n\t\t\tif (t1 != t2)\n\t\t\t{\n\t\t\t\tcomp = (t1 > t2) ? 1 : -1;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn comp;\n\t}\n\n};\n\n__mxOutput.mxCellPath = typeof mxCellPath !== 'undefined' ? mxCellPath : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxPerimeter =\n{\n\t/**\n\t * Class: mxPerimeter\n\t * \n\t * Provides various perimeter functions to be used in a style\n\t * as the value of <mxConstants.STYLE_PERIMETER>. Perimeters for\n\t * rectangle, circle, rhombus and triangle are available.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * <add as=\"perimeter\">mxPerimeter.RectanglePerimeter</add>\n\t * (end)\n\t * \n\t * Or programmatically:\n\t * \n\t * (code)\n\t * style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RectanglePerimeter;\n\t * (end)\n\t * \n\t * When adding new perimeter functions, it is recommended to use the \n\t * mxPerimeter-namespace as follows:\n\t * \n\t * (code)\n\t * mxPerimeter.CustomPerimeter = function (bounds, vertex, next, orthogonal)\n\t * {\n\t *   var x = 0; // Calculate x-coordinate\n\t *   var y = 0; // Calculate y-coordainte\n\t *   \n\t *   return new mxPoint(x, y);\n\t * }\n\t * (end)\n\t * \n\t * The new perimeter should then be registered in the <mxStyleRegistry> as follows:\n\t * (code)\n\t * mxStyleRegistry.putValue('customPerimeter', mxPerimeter.CustomPerimeter);\n\t * (end)\n\t * \n\t * The custom perimeter above can now be used in a specific vertex as follows:\n\t * \n\t * (code)\n\t * model.setStyle(vertex, 'perimeter=customPerimeter');\n\t * (end)\n\t * \n\t * Note that the key of the <mxStyleRegistry> entry for the function should\n\t * be used in string values, unless <mxGraphView.allowEval> is true, in\n\t * which case you can also use mxPerimeter.CustomPerimeter for the value in\n\t * the cell style above.\n\t * \n\t * Or it can be used for all vertices in the graph as follows:\n\t * \n\t * (code)\n\t * var style = graph.getStylesheet().getDefaultVertexStyle();\n\t * style[mxConstants.STYLE_PERIMETER] = mxPerimeter.CustomPerimeter;\n\t * (end)\n\t * \n\t * Note that the object can be used directly when programmatically setting\n\t * the value, but the key in the <mxStyleRegistry> should be used when\n\t * setting the value via a key, value pair in a cell style.\n\t * \n\t * The parameters are explained in <RectanglePerimeter>.\n\t * \n\t * Function: RectanglePerimeter\n\t * \n\t * Describes a rectangular perimeter for the given bounds.\n\t *\n\t * Parameters:\n\t * \n\t * bounds - <mxRectangle> that represents the absolute bounds of the\n\t * vertex.\n\t * vertex - <mxCellState> that represents the vertex.\n\t * next - <mxPoint> that represents the nearest neighbour point on the\n\t * given edge.\n\t * orthogonal - Boolean that specifies if the orthogonal projection onto\n\t * the perimeter should be returned. If this is false then the intersection\n\t * of the perimeter and the line between the next and the center point is\n\t * returned.\n\t */\n\tRectanglePerimeter: function (bounds, vertex, next, orthogonal)\n\t{\n\t\tvar cx = bounds.getCenterX();\n\t\tvar cy = bounds.getCenterY();\n\t\tvar dx = next.x - cx;\n\t\tvar dy = next.y - cy;\n\t\tvar alpha = Math.atan2(dy, dx);\n\t\tvar p = new mxPoint(0, 0);\n\t\tvar pi = Math.PI;\n\t\tvar pi2 = Math.PI/2;\n\t\tvar beta = pi2 - alpha;\n\t\tvar t = Math.atan2(bounds.height, bounds.width);\n\t\t\n\t\tif (alpha < -pi + t || alpha > pi - t)\n\t\t{\n\t\t\t// Left edge\n\t\t\tp.x = bounds.x;\n\t\t\tp.y = cy - bounds.width * Math.tan(alpha) / 2;\n\t\t}\n\t\telse if (alpha < -t)\n\t\t{\n\t\t\t// Top Edge\n\t\t\tp.y = bounds.y;\n\t\t\tp.x = cx - bounds.height * Math.tan(beta) / 2;\n\t\t}\n\t\telse if (alpha < t)\n\t\t{\n\t\t\t// Right Edge\n\t\t\tp.x = bounds.x + bounds.width;\n\t\t\tp.y = cy + bounds.width * Math.tan(alpha) / 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Bottom Edge\n\t\t\tp.y = bounds.y + bounds.height;\n\t\t\tp.x = cx + bounds.height * Math.tan(beta) / 2;\n\t\t}\n\t\t\n\t\tif (orthogonal)\n\t\t{\n\t\t\tif (next.x >= bounds.x &&\n\t\t\t\tnext.x <= bounds.x + bounds.width)\n\t\t\t{\n\t\t\t\tp.x = next.x;\n\t\t\t}\n\t\t\telse if (next.y >= bounds.y &&\n\t\t\t\t\t   next.y <= bounds.y + bounds.height)\n\t\t\t{\n\t\t\t\tp.y = next.y;\n\t\t\t}\n\t\t\tif (next.x < bounds.x)\n\t\t\t{\n\t\t\t\tp.x = bounds.x;\n\t\t\t}\n\t\t\telse if (next.x > bounds.x + bounds.width)\n\t\t\t{\n\t\t\t\tp.x = bounds.x + bounds.width;\n\t\t\t}\n\t\t\tif (next.y < bounds.y)\n\t\t\t{\n\t\t\t\tp.y = bounds.y;\n\t\t\t}\n\t\t\telse if (next.y > bounds.y + bounds.height)\n\t\t\t{\n\t\t\t\tp.y = bounds.y + bounds.height;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn p;\n\t},\n\n\t/**\n\t * Function: EllipsePerimeter\n\t * \n\t * Describes an elliptic perimeter. See <RectanglePerimeter>\n\t * for a description of the parameters.\n\t */\n\tEllipsePerimeter: function (bounds, vertex, next, orthogonal)\n\t{\n\t\tvar x = bounds.x;\n\t\tvar y = bounds.y;\n\t\tvar a = bounds.width / 2;\n\t\tvar b = bounds.height / 2;\n\t\tvar cx = x + a;\n\t\tvar cy = y + b;\n\t\tvar px = next.x;\n\t\tvar py = next.y;\n\t\t\n\t\t// Calculates straight line equation through\n\t\t// point and ellipse center y = d * x + h\n\t\tvar dx = parseInt(px - cx);\n\t\tvar dy = parseInt(py - cy);\n\t\t\n\t\tif (dx == 0 && dy != 0)\n\t\t{\n\t\t\treturn new mxPoint(cx, cy + b * dy / Math.abs(dy));\n\t\t}\n\t\telse if (dx == 0 && dy == 0)\n\t\t{\n\t\t\treturn new mxPoint(px, py);\n\t\t}\n\n\t\tif (orthogonal)\n\t\t{\n\t\t\tif (py >= y && py <= y + bounds.height)\n\t\t\t{\n\t\t\t\tvar ty = py - cy;\n\t\t\t\tvar tx = Math.sqrt(a*a*(1-(ty*ty)/(b*b))) || 0;\n\t\t\t\t\n\t\t\t\tif (px <= x)\n\t\t\t\t{\n\t\t\t\t\ttx = -tx;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn new mxPoint(cx+tx, py);\n\t\t\t}\n\t\t\t\n\t\t\tif (px >= x && px <= x + bounds.width)\n\t\t\t{\n\t\t\t\tvar tx = px - cx;\n\t\t\t\tvar ty = Math.sqrt(b*b*(1-(tx*tx)/(a*a))) || 0;\n\t\t\t\t\n\t\t\t\tif (py <= y)\n\t\t\t\t{\n\t\t\t\t\tty = -ty;\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn new mxPoint(px, cy+ty);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Calculates intersection\n\t\tvar d = dy / dx;\n\t\tvar h = cy - d * cx;\n\t\tvar e = a * a * d * d + b * b;\n\t\tvar f = -2 * cx * e;\n\t\tvar g = a * a * d * d * cx * cx +\n\t\t\t\tb * b * cx * cx -\n\t\t\t\ta * a * b * b;\n\t\tvar det = Math.sqrt(f * f - 4 * e * g);\n\t\t\n\t\t// Two solutions (perimeter points)\n\t\tvar xout1 = (-f + det) / (2 * e);\n\t\tvar xout2 = (-f - det) / (2 * e);\n\t\tvar yout1 = d * xout1 + h;\n\t\tvar yout2 = d * xout2 + h;\n\t\tvar dist1 = Math.sqrt(Math.pow((xout1 - px), 2)\n\t\t\t\t\t+ Math.pow((yout1 - py), 2));\n\t\tvar dist2 = Math.sqrt(Math.pow((xout2 - px), 2)\n\t\t\t\t\t+ Math.pow((yout2 - py), 2));\n\t\t\t\t\t\n\t\t// Correct solution\n\t\tvar xout = 0;\n\t\tvar yout = 0;\n\t\t\n\t\tif (dist1 < dist2)\n\t\t{\n\t\t\txout = xout1;\n\t\t\tyout = yout1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\txout = xout2;\n\t\t\tyout = yout2;\n\t\t}\n\t\t\n\t\treturn new mxPoint(xout, yout);\n\t},\n\n\t/**\n\t * Function: RhombusPerimeter\n\t * \n\t * Describes a rhombus (aka diamond) perimeter. See <RectanglePerimeter>\n\t * for a description of the parameters.\n\t */\n\tRhombusPerimeter: function (bounds, vertex, next, orthogonal)\n\t{\n\t\tvar x = bounds.x;\n\t\tvar y = bounds.y;\n\t\tvar w = bounds.width;\n\t\tvar h = bounds.height;\n\t\t\n\t\tvar cx = x + w / 2;\n\t\tvar cy = y + h / 2;\n\n\t\tvar px = next.x;\n\t\tvar py = next.y;\n\n\t\t// Special case for intersecting the diamond's corners\n\t\tif (cx == px)\n\t\t{\n\t\t\tif (cy > py)\n\t\t\t{\n\t\t\t\treturn new mxPoint(cx, y); // top\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn new mxPoint(cx, y + h); // bottom\n\t\t\t}\n\t\t}\n\t\telse if (cy == py)\n\t\t{\n\t\t\tif (cx > px)\n\t\t\t{\n\t\t\t\treturn new mxPoint(x, cy); // left\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn new mxPoint(x + w, cy); // right\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar tx = cx;\n\t\tvar ty = cy;\n\t\t\n\t\tif (orthogonal)\n\t\t{\n\t\t\tif (px >= x && px <= x + w)\n\t\t\t{\n\t\t\t\ttx = px;\n\t\t\t}\n\t\t\telse if (py >= y && py <= y + h)\n\t\t\t{\n\t\t\t\tty = py;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// In which quadrant will the intersection be?\n\t\t// set the slope and offset of the border line accordingly\n\t\tif (px < cx)\n\t\t{\n\t\t\tif (py < cy)\n\t\t\t{\n\t\t\t\treturn mxUtils.intersection(px, py, tx, ty, cx, y, x, cy);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn mxUtils.intersection(px, py, tx, ty, cx, y + h, x, cy);\n\t\t\t}\n\t\t}\n\t\telse if (py < cy)\n\t\t{\n\t\t\treturn mxUtils.intersection(px, py, tx, ty, cx, y, x + w, cy);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn mxUtils.intersection(px, py, tx, ty, cx, y + h, x + w, cy);\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: TrianglePerimeter\n\t * \n\t * Describes a triangle perimeter. See <RectanglePerimeter>\n\t * for a description of the parameters.\n\t */\n\tTrianglePerimeter: function (bounds, vertex, next, orthogonal)\n\t{\n\t\tvar direction = (vertex != null) ?\n\t\t\tvertex.style[mxConstants.STYLE_DIRECTION] : null;\n\t\tvar vertical = direction == mxConstants.DIRECTION_NORTH ||\n\t\t\tdirection == mxConstants.DIRECTION_SOUTH;\n\n\t\tvar x = bounds.x;\n\t\tvar y = bounds.y;\n\t\tvar w = bounds.width;\n\t\tvar h = bounds.height;\n\t\t\n\t\tvar cx = x + w / 2;\n\t\tvar cy = y + h / 2;\n\t\t\n\t\tvar start = new mxPoint(x, y);\n\t\tvar corner = new mxPoint(x + w, cy);\n\t\tvar end = new mxPoint(x, y + h);\n\t\t\n\t\tif (direction == mxConstants.DIRECTION_NORTH)\n\t\t{\n\t\t\tstart = end;\n\t\t\tcorner = new mxPoint(cx, y);\n\t\t\tend = new mxPoint(x + w, y + h);\n\t\t}\n\t\telse if (direction == mxConstants.DIRECTION_SOUTH)\n\t\t{\n\t\t\tcorner = new mxPoint(cx, y + h);\n\t\t\tend = new mxPoint(x + w, y);\n\t\t}\n\t\telse if (direction == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\tstart = new mxPoint(x + w, y);\n\t\t\tcorner = new mxPoint(x, cy);\n\t\t\tend = new mxPoint(x + w, y + h);\n\t\t}\n\n\t\tvar dx = next.x - cx;\n\t\tvar dy = next.y - cy;\n\n\t\tvar alpha = (vertical) ? Math.atan2(dx, dy) : Math.atan2(dy, dx);\n\t\tvar t = (vertical) ? Math.atan2(w, h) : Math.atan2(h, w);\n\t\t\n\t\tvar base = false;\n\t\t\n\t\tif (direction == mxConstants.DIRECTION_NORTH ||\n\t\t\tdirection == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\tbase = alpha > -t && alpha < t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbase = alpha < -Math.PI + t || alpha > Math.PI - t;\t\n\t\t}\n\n\t\tvar result = null;\t\t\t\n\n\t\tif (base)\n\t\t{\n\t\t\tif (orthogonal && ((vertical && next.x >= start.x && next.x <= end.x) ||\n\t\t\t\t(!vertical && next.y >= start.y && next.y <= end.y)))\n\t\t\t{\n\t\t\t\tif (vertical)\n\t\t\t\t{\n\t\t\t\t\tresult = new mxPoint(next.x, start.y);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = new mxPoint(start.x, next.y);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (direction == mxConstants.DIRECTION_NORTH)\n\t\t\t\t{\n\t\t\t\t\tresult = new mxPoint(x + w / 2 + h * Math.tan(alpha) / 2,\n\t\t\t\t\t\ty + h);\n\t\t\t\t}\n\t\t\t\telse if (direction == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t{\n\t\t\t\t\tresult = new mxPoint(x + w / 2 - h * Math.tan(alpha) / 2,\n\t\t\t\t\t\ty);\n\t\t\t\t}\n\t\t\t\telse if (direction == mxConstants.DIRECTION_WEST)\n\t\t\t\t{\n\t\t\t\t\tresult = new mxPoint(x + w, y + h / 2 +\n\t\t\t\t\t\tw * Math.tan(alpha) / 2);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = new mxPoint(x, y + h / 2 -\n\t\t\t\t\t\tw * Math.tan(alpha) / 2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (orthogonal)\n\t\t\t{\n\t\t\t\tvar pt = new mxPoint(cx, cy);\n\t\t\n\t\t\t\tif (next.y >= y && next.y <= y + h)\n\t\t\t\t{\n\t\t\t\t\tpt.x = (vertical) ? cx : (\n\t\t\t\t\t\t(direction == mxConstants.DIRECTION_WEST) ?\n\t\t\t\t\t\t\tx + w : x);\n\t\t\t\t\tpt.y = next.y;\n\t\t\t\t}\n\t\t\t\telse if (next.x >= x && next.x <= x + w)\n\t\t\t\t{\n\t\t\t\t\tpt.x = next.x;\n\t\t\t\t\tpt.y = (!vertical) ? cy : (\n\t\t\t\t\t\t(direction == mxConstants.DIRECTION_NORTH) ?\n\t\t\t\t\t\t\ty + h : y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Compute angle\n\t\t\t\tdx = next.x - pt.x;\n\t\t\t\tdy = next.y - pt.y;\n\t\t\t\t\n\t\t\t\tcx = pt.x;\n\t\t\t\tcy = pt.y;\n\t\t\t}\n\n\t\t\tif ((vertical && next.x <= x + w / 2) ||\n\t\t\t\t(!vertical && next.y <= y + h / 2))\n\t\t\t{\n\t\t\t\tresult = mxUtils.intersection(next.x, next.y, cx, cy,\n\t\t\t\t\tstart.x, start.y, corner.x, corner.y);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = mxUtils.intersection(next.x, next.y, cx, cy,\n\t\t\t\t\tcorner.x, corner.y, end.x, end.y);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (result == null)\n\t\t{\n\t\t\tresult = new mxPoint(cx, cy);\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: HexagonPerimeter\n\t * \n\t * Describes a hexagon perimeter. See <RectanglePerimeter>\n\t * for a description of the parameters.\n\t */\n\tHexagonPerimeter: function (bounds, vertex, next, orthogonal)\n\t{\n\t\tvar x = bounds.x;\n\t\tvar y = bounds.y;\n\t\tvar w = bounds.width;\n\t\tvar h = bounds.height;\n\n\t\tvar cx = bounds.getCenterX();\n\t\tvar cy = bounds.getCenterY();\n\t\tvar px = next.x;\n\t\tvar py = next.y;\n\t\tvar dx = px - cx;\n\t\tvar dy = py - cy;\n\t\tvar alpha = -Math.atan2(dy, dx);\n\t\tvar pi = Math.PI;\n\t\tvar pi2 = Math.PI / 2;\n\n\t\tvar result = new mxPoint(cx, cy);\n\n\t\tvar direction = (vertex != null) ? mxUtils.getValue(\n\t\t\t\tvertex.style, mxConstants.STYLE_DIRECTION,\n\t\t\t\tmxConstants.DIRECTION_EAST) : mxConstants.DIRECTION_EAST;\n\t\tvar vertical = direction == mxConstants.DIRECTION_NORTH\n\t\t\t\t|| direction == mxConstants.DIRECTION_SOUTH;\n\t\tvar a = new mxPoint();\n\t\tvar b = new mxPoint();\n\n\t\t//Only consider corrects quadrants for the orthogonal case.\n\t\tif ((px < x) && (py < y) || (px < x) && (py > y + h)\n\t\t\t\t|| (px > x + w) && (py < y) || (px > x + w) && (py > y + h))\n\t\t{\n\t\t\torthogonal = false;\n\t\t}\n\n\t\tif (orthogonal)\n\t\t{\n\t\t\tif (vertical)\n\t\t\t{\n\t\t\t\t//Special cases where intersects with hexagon corners\n\t\t\t\tif (px == cx)\n\t\t\t\t{\n\t\t\t\t\tif (py <= y)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(cx, y);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py >= y + h)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(cx, y + h);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (px < x)\n\t\t\t\t{\n\t\t\t\t\tif (py == y + h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x, y + h / 4);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py == y + 3 * h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x, y + 3 * h / 4);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (px > x + w)\n\t\t\t\t{\n\t\t\t\t\tif (py == y + h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w, y + h / 4);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py == y + 3 * h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w, y + 3 * h / 4);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (px == x)\n\t\t\t\t{\n\t\t\t\t\tif (py < cy)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x, y + h / 4);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py > cy)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x, y + 3 * h / 4);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (px == x + w)\n\t\t\t\t{\n\t\t\t\t\tif (py < cy)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w, y + h / 4);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py > cy)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w, y + 3 * h / 4);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (py == y)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(cx, y);\n\t\t\t\t}\n\t\t\t\telse if (py == y + h)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(cx, y + h);\n\t\t\t\t}\n\n\t\t\t\tif (px < cx)\n\t\t\t\t{\n\t\t\t\t\tif ((py > y + h / 4) && (py < y + 3 * h / 4))\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x, y);\n\t\t\t\t\t\tb = new mxPoint(x, y + h);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py < y + h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x - Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t\t\tb = new mxPoint(x + w, y - Math.floor(0.25 * h));\n\t\t\t\t\t}\n\t\t\t\t\telse if (py > y + 3 * h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x - Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t\t\tb = new mxPoint(x + w, y + Math.floor(1.25 * h));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (px > cx)\n\t\t\t\t{\n\t\t\t\t\tif ((py > y + h / 4) && (py < y + 3 * h / 4))\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x + w, y);\n\t\t\t\t\t\tb = new mxPoint(x + w, y + h);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py < y + h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x, y - Math.floor(0.25 * h));\n\t\t\t\t\t\tb = new mxPoint(x + Math.floor(1.5 * w), y\n\t\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t\t}\n\t\t\t\t\telse if (py > y + 3 * h / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x + Math.floor(1.5 * w), y\n\t\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t\t\tb = new mxPoint(x, y + Math.floor(1.25 * h));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//Special cases where intersects with hexagon corners\n\t\t\t\tif (py == cy)\n\t\t\t\t{\n\t\t\t\t\tif (px <= x)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x, y + h / 2);\n\t\t\t\t\t}\n\t\t\t\t\telse if (px >= x + w)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w, y + h / 2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (py < y)\n\t\t\t\t{\n\t\t\t\t\tif (px == x + w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w / 4, y);\n\t\t\t\t\t}\n\t\t\t\t\telse if (px == x + 3 * w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + 3 * w / 4, y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (py > y + h)\n\t\t\t\t{\n\t\t\t\t\tif (px == x + w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w / 4, y + h);\n\t\t\t\t\t}\n\t\t\t\t\telse if (px == x + 3 * w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + 3 * w / 4, y + h);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (py == y)\n\t\t\t\t{\n\t\t\t\t\tif (px < cx)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w / 4, y);\n\t\t\t\t\t}\n\t\t\t\t\telse if (px > cx)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + 3 * w / 4, y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (py == y + h)\n\t\t\t\t{\n\t\t\t\t\tif (px < cx)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + w / 4, y + h);\n\t\t\t\t\t}\n\t\t\t\t\telse if (py > cy)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn new mxPoint(x + 3 * w / 4, y + h);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (px == x)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x, cy);\n\t\t\t\t}\n\t\t\t\telse if (px == x + w)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + w, cy);\n\t\t\t\t}\n\n\t\t\t\tif (py < cy)\n\t\t\t\t{\n\t\t\t\t\tif ((px > x + w / 4) && (px < x + 3 * w / 4))\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x, y);\n\t\t\t\t\t\tb = new mxPoint(x + w, y);\n\t\t\t\t\t}\n\t\t\t\t\telse if (px < x + w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x - Math.floor(0.25 * w), y + h);\n\t\t\t\t\t\tb = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t\t- Math.floor(0.5 * h));\n\t\t\t\t\t}\n\t\t\t\t\telse if (px > x + 3 * w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t\t- Math.floor(0.5 * h));\n\t\t\t\t\t\tb = new mxPoint(x + Math.floor(1.25 * w), y + h);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (py > cy)\n\t\t\t\t{\n\t\t\t\t\tif ((px > x + w / 4) && (px < x + 3 * w / 4))\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x, y + h);\n\t\t\t\t\t\tb = new mxPoint(x + w, y + h);\n\t\t\t\t\t}\n\t\t\t\t\telse if (px < x + w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x - Math.floor(0.25 * w), y);\n\t\t\t\t\t\tb = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t\t+ Math.floor(1.5 * h));\n\t\t\t\t\t}\n\t\t\t\t\telse if (px > x + 3 * w / 4)\n\t\t\t\t\t{\n\t\t\t\t\t\ta = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t\t+ Math.floor(1.5 * h));\n\t\t\t\t\t\tb = new mxPoint(x + Math.floor(1.25 * w), y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar tx = cx;\n\t\t\tvar ty = cy;\n\n\t\t\tif (px >= x && px <= x + w)\n\t\t\t{\n\t\t\t\ttx = px;\n\t\t\t\t\n\t\t\t\tif (py < cy)\n\t\t\t\t{\n\t\t\t\t\tty = y + h;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tty = y;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (py >= y && py <= y + h)\n\t\t\t{\n\t\t\t\tty = py;\n\t\t\t\t\n\t\t\t\tif (px < cx)\n\t\t\t\t{\n\t\t\t\t\ttx = x + w;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttx = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult = mxUtils.intersection(tx, ty, next.x, next.y, a.x, a.y, b.x, b.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (vertical)\n\t\t\t{\n\t\t\t\tvar beta = Math.atan2(h / 4, w / 2);\n\n\t\t\t\t//Special cases where intersects with hexagon corners\n\t\t\t\tif (alpha == beta)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + w, y + Math.floor(0.25 * h));\n\t\t\t\t}\n\t\t\t\telse if (alpha == pi2)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + Math.floor(0.5 * w), y);\n\t\t\t\t}\n\t\t\t\telse if (alpha == (pi - beta))\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x, y + Math.floor(0.25 * h));\n\t\t\t\t}\n\t\t\t\telse if (alpha == -beta)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + w, y + Math.floor(0.75 * h));\n\t\t\t\t}\n\t\t\t\telse if (alpha == (-pi2))\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + Math.floor(0.5 * w), y + h);\n\t\t\t\t}\n\t\t\t\telse if (alpha == (-pi + beta))\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x, y + Math.floor(0.75 * h));\n\t\t\t\t}\n\n\t\t\t\tif ((alpha < beta) && (alpha > -beta))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x + w, y);\n\t\t\t\t\tb = new mxPoint(x + w, y + h);\n\t\t\t\t}\n\t\t\t\telse if ((alpha > beta) && (alpha < pi2))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x, y - Math.floor(0.25 * h));\n\t\t\t\t\tb = new mxPoint(x + Math.floor(1.5 * w), y\n\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t}\n\t\t\t\telse if ((alpha > pi2) && (alpha < (pi - beta)))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x - Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t\tb = new mxPoint(x + w, y - Math.floor(0.25 * h));\n\t\t\t\t}\n\t\t\t\telse if (((alpha > (pi - beta)) && (alpha <= pi))\n\t\t\t\t\t\t|| ((alpha < (-pi + beta)) && (alpha >= -pi)))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x, y);\n\t\t\t\t\tb = new mxPoint(x, y + h);\n\t\t\t\t}\n\t\t\t\telse if ((alpha < -beta) && (alpha > -pi2))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x + Math.floor(1.5 * w), y\n\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t\tb = new mxPoint(x, y + Math.floor(1.25 * h));\n\t\t\t\t}\n\t\t\t\telse if ((alpha < -pi2) && (alpha > (-pi + beta)))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x - Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t+ Math.floor(0.5 * h));\n\t\t\t\t\tb = new mxPoint(x + w, y + Math.floor(1.25 * h));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar beta = Math.atan2(h / 2, w / 4);\n\n\t\t\t\t//Special cases where intersects with hexagon corners\n\t\t\t\tif (alpha == beta)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + Math.floor(0.75 * w), y);\n\t\t\t\t}\n\t\t\t\telse if (alpha == (pi - beta))\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + Math.floor(0.25 * w), y);\n\t\t\t\t}\n\t\t\t\telse if ((alpha == pi) || (alpha == -pi))\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x, y + Math.floor(0.5 * h));\n\t\t\t\t}\n\t\t\t\telse if (alpha == 0)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + w, y + Math.floor(0.5 * h));\n\t\t\t\t}\n\t\t\t\telse if (alpha == -beta)\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + Math.floor(0.75 * w), y + h);\n\t\t\t\t}\n\t\t\t\telse if (alpha == (-pi + beta))\n\t\t\t\t{\n\t\t\t\t\treturn new mxPoint(x + Math.floor(0.25 * w), y + h);\n\t\t\t\t}\n\n\t\t\t\tif ((alpha > 0) && (alpha < beta))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t- Math.floor(0.5 * h));\n\t\t\t\t\tb = new mxPoint(x + Math.floor(1.25 * w), y + h);\n\t\t\t\t}\n\t\t\t\telse if ((alpha > beta) && (alpha < (pi - beta)))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x, y);\n\t\t\t\t\tb = new mxPoint(x + w, y);\n\t\t\t\t}\n\t\t\t\telse if ((alpha > (pi - beta)) && (alpha < pi))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x - Math.floor(0.25 * w), y + h);\n\t\t\t\t\tb = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t- Math.floor(0.5 * h));\n\t\t\t\t}\n\t\t\t\telse if ((alpha < 0) && (alpha > -beta))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t+ Math.floor(1.5 * h));\n\t\t\t\t\tb = new mxPoint(x + Math.floor(1.25 * w), y);\n\t\t\t\t}\n\t\t\t\telse if ((alpha < -beta) && (alpha > (-pi + beta)))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x, y + h);\n\t\t\t\t\tb = new mxPoint(x + w, y + h);\n\t\t\t\t}\n\t\t\t\telse if ((alpha < (-pi + beta)) && (alpha > -pi))\n\t\t\t\t{\n\t\t\t\t\ta = new mxPoint(x - Math.floor(0.25 * w), y);\n\t\t\t\t\tb = new mxPoint(x + Math.floor(0.5 * w), y\n\t\t\t\t\t\t\t+ Math.floor(1.5 * h));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult = mxUtils.intersection(cx, cy, next.x, next.y, a.x, a.y, b.x, b.y);\n\t\t}\n\t\t\n\t\tif (result == null)\n\t\t{\n\t\t\treturn new mxPoint(cx, cy);\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n};\n\n__mxOutput.mxPerimeter = typeof mxPerimeter !== 'undefined' ? mxPerimeter : undefined;\n\n/**\n * Copyright (c) 2006-2019, JGraph Ltd\n * Copyright (c) 2006-2017, draw.io AG\n */\n/**\n * Class: mxPrintPreview\n * \n * Implements printing of a diagram across multiple pages. The following opens\n * a print preview for an existing graph:\n * \n * (code)\n * var preview = new mxPrintPreview(graph);\n * preview.open();\n * (end)\n * \n * Use <mxUtils.getScaleForPageCount> as follows in order to print the graph\n * across a given number of pages:\n * \n * (code)\n * var pageCount = mxUtils.prompt('Enter page count', '1');\n * \n * if (pageCount != null)\n * {\n *   var scale = mxUtils.getScaleForPageCount(pageCount, graph);\n *   var preview = new mxPrintPreview(graph, scale);\n *   preview.open();\n * }\n * (end)\n * \n * Additional pages:\n * \n * To add additional pages before and after the output, <getCoverPages> and\n * <getAppendices> can be used, respectively.\n * \n * (code)\n * var preview = new mxPrintPreview(graph, 1);\n * \n * preview.getCoverPages = function(w, h)\n * {\n *   return [this.renderPage(w, h, 0, 0, mxUtils.bind(this, function(div)\n *   {\n *     div.innerHTML = '<div style=\"position:relative;margin:4px;\">Cover Page</p>'\n *   }))];\n * };\n * \n * preview.getAppendices = function(w, h)\n * {\n *   return [this.renderPage(w, h, 0, 0, mxUtils.bind(this, function(div)\n *   {\n *     div.innerHTML = '<div style=\"position:relative;margin:4px;\">Appendix</p>'\n *   }))];\n * };\n * \n * preview.open();\n * (end)\n * \n * CSS:\n * \n * The CSS from the original page is not carried over to the print preview.\n * To add CSS to the page, use the css argument in the <open> function or\n * override <writeHead> to add the respective link tags as follows:\n * \n * (code)\n * var writeHead = preview.writeHead;\n * preview.writeHead = function(doc, css)\n * {\n *   writeHead.apply(this, arguments);\n *   doc.writeln('<link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">');\n * };\n * (end)\n * \n * Padding:\n * \n * To add a padding to the page in the preview (but not the print output), use\n * the following code:\n * \n * (code)\n * preview.writeHead = function(doc)\n * {\n *   writeHead.apply(this, arguments);\n *   \n *   doc.writeln('<style type=\"text/css\">');\n *   doc.writeln('@media screen {');\n *   doc.writeln('  body > div { padding-top:30px;padding-left:40px;box-sizing:content-box; }');\n *   doc.writeln('}');\n *   doc.writeln('</style>');\n * };\n * (end)\n * \n * Headers:\n * \n * Apart from setting the title argument in the mxPrintPreview constructor you\n * can override <renderPage> as follows to add a header to any page:\n * \n * (code)\n * var oldRenderPage = mxPrintPreview.prototype.renderPage;\n * mxPrintPreview.prototype.renderPage = function(w, h, x, y, content, pageNumber)\n * {\n *   var div = oldRenderPage.apply(this, arguments);\n *   \n *   var header = document.createElement('div');\n *   header.style.position = 'absolute';\n *   header.style.top = '0px';\n *   header.style.width = '100%';\n *   header.style.textAlign = 'right';\n *   mxUtils.write(header, 'Your header here');\n *   div.firstChild.appendChild(header);\n *   \n *   return div;\n * };\n * (end)\n * \n * The pageNumber argument contains the number of the current page, starting at\n * 1. To display a header on the first page only, check pageNumber and add a\n * vertical offset in the constructor call for the height of the header.\n * \n * Page Format:\n * \n * For landscape printing, use <mxConstants.PAGE_FORMAT_A4_LANDSCAPE> as\n * the pageFormat in <mxUtils.getScaleForPageCount> and <mxPrintPreview>.\n * Keep in mind that one can not set the defaults for the print dialog\n * of the operating system from JavaScript so the user must manually choose\n * a page format that matches this setting.\n * \n * You can try passing the following CSS directive to <open> to set the\n * page format in the print dialog to landscape. However, this CSS\n * directive seems to be ignored in most major browsers, including IE.\n * \n * (code)\n * @page {\n *   size: landscape;\n * }\n * (end)\n * \n * Note that the print preview behaves differently in IE when used from the\n * filesystem or via HTTP so printing should always be tested via HTTP.\n * \n * If you are using a DOCTYPE in the source page you can override <getDoctype>\n * and provide the same DOCTYPE for the print preview if required. Here is\n * an example for IE8 standards mode.\n * \n * (code)\n * var preview = new mxPrintPreview(graph);\n * preview.getDoctype = function()\n * {\n *   return '<!--[if IE]><meta http-equiv=\"X-UA-Compatible\" content=\"IE=5,IE=8\" ><![endif]-->';\n * };\n * preview.open();\n * (end)\n * \n * Constructor: mxPrintPreview\n *\n * Constructs a new print preview for the given parameters.\n * \n * Parameters:\n * \n * graph - <mxGraph> to be previewed.\n * scale - Optional scale of the output. Default is 1 / <mxGraph.pageScale>.\n * pageFormat - <mxRectangle> that specifies the page format (in pixels).\n * border - Border in pixels along each side of every page. Note that the\n * actual print function in the browser will add another border for\n * printing.\n * This should match the page format of the printer. Default uses the\n * <mxGraph.pageFormat> of the given graph.\n * x0 - Optional left offset of the output. Default is 0.\n * y0 - Optional top offset of the output. Default is 0.\n * borderColor - Optional color of the page border. Default is no border.\n * Note that a border is sometimes useful to highlight the printed page\n * border in the print preview of the browser.\n * title - Optional string that is used for the window title. Default\n * is 'Printer-friendly version'.\n * pageSelector - Optional boolean that specifies if the page selector\n * should appear in the window with the print preview. Default is true.\n */\nfunction mxPrintPreview(graph, scale, pageFormat, border, x0, y0, borderColor, title, pageSelector)\n{\n\tthis.graph = graph;\n\tthis.scale = (scale != null) ? scale : 1 / graph.pageScale;\n\tthis.border = (border != null) ? border : 0;\n\tthis.pageFormat = mxRectangle.fromRectangle((pageFormat != null) ? pageFormat : graph.pageFormat);\n\tthis.title = (title != null) ? title : 'Printer-friendly version';\n\tthis.x0 = (x0 != null) ? x0 : 0;\n\tthis.y0 = (y0 != null) ? y0 : 0;\n\tthis.borderColor = borderColor;\n\tthis.pageSelector = (pageSelector != null) ? pageSelector : true;\n};\n\n/**\n * Variable: graph\n * \n * Reference to the <mxGraph> that should be previewed.\n */\nmxPrintPreview.prototype.graph = null;\n\n/**\n * Variable: pageFormat\n *\n * Holds the <mxRectangle> that defines the page format.\n */\nmxPrintPreview.prototype.pageFormat = null;\n\n/**\n * Variable: scale\n * \n * Holds the scale of the print preview.\n */\nmxPrintPreview.prototype.scale = null;\n\n/**\n * Variable: border\n * \n * The border inset around each side of every page in the preview. This is set\n * to 0 if autoOrigin is false.\n */\nmxPrintPreview.prototype.border = 0;\n\n/**\n * Variable: marginTop\n * \n * The margin at the top of the page (number). Default is 0.\n */\nmxPrintPreview.prototype.marginTop = 0;\n\n/**\n * Variable: marginBottom\n * \n * The margin at the bottom of the page (number). Default is 0.\n */\nmxPrintPreview.prototype.marginBottom = 0;\n\n/**\n * Variable: x0\n * \n * Holds the horizontal offset of the output.\n */\nmxPrintPreview.prototype.x0 = 0;\n\n/**\n * Variable: y0\n *\n * Holds the vertical offset of the output.\n */\nmxPrintPreview.prototype.y0 = 0;\n\n/**\n * Variable: autoOrigin\n * \n * Specifies if the origin should be automatically computed based on the top,\n * left corner of the actual diagram contents. The required offset will be added\n * to <x0> and <y0> in <open>. Default is true.\n */\nmxPrintPreview.prototype.autoOrigin = true;\n\n/**\n * Variable: printOverlays\n * \n * Specifies if overlays should be printed. Default is false.\n */\nmxPrintPreview.prototype.printOverlays = false;\n\n/**\n * Variable: printControls\n * \n * Specifies if controls (such as folding icons) should be printed. Default is\n * false.\n */\nmxPrintPreview.prototype.printControls = false;\n\n/**\n * Variable: printBackgroundImage\n * \n * Specifies if the background image should be printed. Default is false.\n */\nmxPrintPreview.prototype.printBackgroundImage = false;\n\n/**\n * Variable: backgroundColor\n * \n * Holds the color value for the page background color. Default is #ffffff.\n */\nmxPrintPreview.prototype.backgroundColor = '#ffffff';\n\n/**\n * Variable: borderColor\n * \n * Holds the color value for the page border.\n */\nmxPrintPreview.prototype.borderColor = null;\n\n/**\n * Variable: title\n * \n * Holds the title of the preview window.\n */\nmxPrintPreview.prototype.title = null;\n\n/**\n * Variable: pageSelector\n * \n * Boolean that specifies if the page selector should be\n * displayed. Default is true.\n */\nmxPrintPreview.prototype.pageSelector = null;\n\n/**\n * Variable: wnd\n * \n * Reference to the preview window.\n */\nmxPrintPreview.prototype.wnd = null;\n\n/**\n * Variable: targetWindow\n * \n * Assign any window here to redirect the rendering in <open>.\n */\nmxPrintPreview.prototype.targetWindow = null;\n\n/**\n * Variable: pageCount\n * \n * Holds the actual number of pages in the preview.\n */\nmxPrintPreview.prototype.pageCount = 0;\n\n/**\n * Variable: clipping\n * \n * Specifies is clipping should be used to avoid creating too many cell states\n * in large diagrams. The bounding box of the cells in the original diagram is\n * used if this is enabled. Default is true.\n */\nmxPrintPreview.prototype.clipping = true;\n\n/**\n * Function: getWindow\n * \n * Returns <wnd>.\n */\nmxPrintPreview.prototype.getWindow = function()\n{\n\treturn this.wnd;\n};\n\n/**\n * Function: getDocType\n * \n * Returns the string that should go before the HTML tag in the print preview\n * page. This implementation returns an X-UA meta tag for IE5 in quirks mode,\n * IE8 in IE8 standards mode and edge in IE9 standards mode.\n */\nmxPrintPreview.prototype.getDoctype = function()\n{\n\tvar dt = '';\n\t\n\tif (document.documentMode == 5)\n\t{\n\t\tdt = '<meta http-equiv=\"X-UA-Compatible\" content=\"IE=5\">';\n\t}\n\telse if (document.documentMode == 8)\n\t{\n\t\tdt = '<meta http-equiv=\"X-UA-Compatible\" content=\"IE=8\">';\n\t}\n\telse if (document.documentMode > 8)\n\t{\n\t\t// Comment needed to make standards doctype apply in IE\n\t\tdt = '<!--[if IE]><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><![endif]-->';\n\t}\n\t\n\treturn dt;\n};\n\n/**\n * Function: appendGraph\n * \n * Adds the given graph to the existing print preview.\n * \n * Parameters:\n * \n * css - Optional CSS string to be used in the head section.\n * targetWindow - Optional window that should be used for rendering. If\n * this is specified then no HEAD tag, CSS and BODY tag will be written.\n */\nmxPrintPreview.prototype.appendGraph = function(graph, scale, x0, y0, forcePageBreaks, keepOpen)\n{\n\tthis.graph = graph;\n\tthis.scale = (scale != null) ? scale : 1 / graph.pageScale;\n\tthis.x0 = x0;\n\tthis.y0 = y0;\n\tthis.open(null, null, forcePageBreaks, keepOpen);\n};\n\n/**\n * Function: open\n * \n * Shows the print preview window. The window is created here if it does\n * not exist.\n * \n * Parameters:\n * \n * css - Optional CSS string to be used in the head section.\n * targetWindow - Optional window that should be used for rendering. If\n * this is specified then no HEAD tag, CSS and BODY tag will be written.\n */\nmxPrintPreview.prototype.open = function(css, targetWindow, forcePageBreaks, keepOpen)\n{\n\t// Closing the window while the page is being rendered may cause an\n\t// exception in IE. This and any other exceptions are simply ignored.\n\tvar previousInitializeOverlay = this.graph.cellRenderer.initializeOverlay;\n\tvar div = null;\n\t\n\ttry\n\t{\n\t\t// Temporarily overrides the method to redirect rendering of overlays\n\t\t// to the draw pane so that they are visible in the printout\n\t\tif (this.printOverlays)\n\t\t{\n\t\t\tthis.graph.cellRenderer.initializeOverlay = function(state, overlay)\n\t\t\t{\n\t\t\t\toverlay.init(state.view.getDrawPane());\n\t\t\t};\n\t\t}\n\t\t\n\t\tif (this.printControls)\n\t\t{\n\t\t\tthis.graph.cellRenderer.initControl = function(state, control, handleEvents, clickHandler)\n\t\t\t{\n\t\t\t\tcontrol.dialect = state.view.graph.dialect;\n\t\t\t\tcontrol.init(state.view.getDrawPane());\n\t\t\t};\n\t\t}\n\t\t\n\t\tthis.wnd = (targetWindow != null) ? targetWindow : this.wnd;\n\t\tvar isNewWindow = false;\n\t\t\n\t\tif (this.wnd == null)\n\t\t{\n\t\t\tisNewWindow = true;\n\t\t\tthis.wnd = window.open();\n\t\t}\n\t\t\n\t\tvar doc = this.wnd.document;\n\t\t\n\t\tif (isNewWindow)\n\t\t{\n\t\t\tvar dt = this.getDoctype();\n\t\t\t\n\t\t\tif (dt != null && dt.length > 0)\n\t\t\t{\n\t\t\t\tdoc.writeln(dt);\n\t\t\t}\n\t\t\t\n\t\t\tif (mxClient.IS_VML)\n\t\t\t{\n\t\t\t\tdoc.writeln('<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\">');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (document.compatMode === 'CSS1Compat')\n\t\t\t\t{\n\t\t\t\t\tdoc.writeln('<!DOCTYPE html>');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdoc.writeln('<html>');\n\t\t\t}\n\t\t\t\n\t\t\tdoc.writeln('<head>');\n\t\t\tthis.writeHead(doc, css);\n\t\t\tdoc.writeln('</head>');\n\t\t\tdoc.writeln('<body class=\"mxPage\">');\n\t\t}\n\n\t\t// Computes the horizontal and vertical page count\n\t\tvar bounds = this.graph.getGraphBounds().clone();\n\t\tvar currentScale = this.graph.getView().getScale();\n\t\tvar sc = currentScale / this.scale;\n\t\tvar tr = this.graph.getView().getTranslate();\n\t\t\n\t\t// Uses the absolute origin with no offset for all printing\n\t\tif (!this.autoOrigin)\n\t\t{\n\t\t\tthis.x0 -= tr.x * this.scale;\n\t\t\tthis.y0 -= tr.y * this.scale;\n\t\t\tbounds.width += bounds.x;\n\t\t\tbounds.height += bounds.y;\n\t\t\tbounds.x = 0;\n\t\t\tbounds.y = 0;\n\t\t\tthis.border = 0;\n\t\t}\n\t\t\n\t\t// Store the available page area\n\t\tvar availableWidth = this.pageFormat.width - (this.border * 2);\n\t\tvar availableHeight = this.pageFormat.height - (this.border * 2);\n\t\n\t\t// Adds margins to page format\n\t\tthis.pageFormat.height += this.marginTop + this.marginBottom;\n\n\t\t// Compute the unscaled, untranslated bounds to find\n\t\t// the number of vertical and horizontal pages\n\t\tbounds.width /= sc;\n\t\tbounds.height /= sc;\n\n\t\tvar hpages = Math.max(1, Math.ceil((bounds.width + this.x0) / availableWidth));\n\t\tvar vpages = Math.max(1, Math.ceil((bounds.height + this.y0) / availableHeight));\n\t\tthis.pageCount = hpages * vpages;\n\t\t\n\t\tvar writePageSelector = mxUtils.bind(this, function()\n\t\t{\n\t\t\tif (this.pageSelector && (vpages > 1 || hpages > 1))\n\t\t\t{\n\t\t\t\tvar table = this.createPageSelector(vpages, hpages);\n\t\t\t\tdoc.body.appendChild(table);\n\t\t\t\t\n\t\t\t\t// Implements position: fixed in IE quirks mode\n\t\t\t\tif (mxClient.IS_IE && doc.documentMode == null || doc.documentMode == 5 || doc.documentMode == 8 || doc.documentMode == 7)\n\t\t\t\t{\n\t\t\t\t\ttable.style.position = 'absolute';\n\t\t\t\t\t\n\t\t\t\t\tvar update = function()\n\t\t\t\t\t{\n\t\t\t\t\t\ttable.style.top = ((doc.body.scrollTop || doc.documentElement.scrollTop) + 10) + 'px';\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tmxEvent.addListener(this.wnd, 'scroll', function(evt)\n\t\t\t\t\t{\n\t\t\t\t\t\tupdate();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tmxEvent.addListener(this.wnd, 'resize', function(evt)\n\t\t\t\t\t{\n\t\t\t\t\t\tupdate();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar addPage = mxUtils.bind(this, function(div, addBreak)\n\t\t{\n\t\t\t// Border of the DIV (aka page) inside the document\n\t\t\tif (this.borderColor != null)\n\t\t\t{\n\t\t\t\tdiv.style.borderColor = this.borderColor;\n\t\t\t\tdiv.style.borderStyle = 'solid';\n\t\t\t\tdiv.style.borderWidth = '1px';\n\t\t\t}\n\t\t\t\n\t\t\t// Needs to be assigned directly because IE doesn't support\n\t\t\t// child selectors, eg. body > div { background: white; }\n\t\t\tdiv.style.background = this.backgroundColor;\n\t\t\t\n\t\t\tif (forcePageBreaks || addBreak)\n\t\t\t{\n\t\t\t\tdiv.style.pageBreakAfter = 'always';\n\t\t\t}\n\n\t\t\t// NOTE: We are dealing with cross-window DOM here, which\n\t\t\t// is a problem in IE, so we copy the HTML markup instead.\n\t\t\t// The underlying problem is that the graph display markup\n\t\t\t// creation (in mxShape, mxGraphView) is hardwired to using\n\t\t\t// document.createElement and hence we must use this document\n\t\t\t// to create the complete page and then copy it over to the\n\t\t\t// new window.document. This can be fixed later by using the\n\t\t\t// ownerDocument of the container in mxShape and mxGraphView.\n\t\t\tif (isNewWindow && (mxClient.IS_IE || document.documentMode >= 11 || mxClient.IS_EDGE))\n\t\t\t{\n\t\t\t\t// For some obscure reason, removing the DIV from the\n\t\t\t\t// parent before fetching its outerHTML has missing\n\t\t\t\t// fillcolor properties and fill children, so the div\n\t\t\t\t// must be removed afterwards to keep the fillcolors.\n\t\t\t\tdoc.writeln(div.outerHTML);\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t}\n\t\t\telse if (mxClient.IS_IE || document.documentMode >= 11 || mxClient.IS_EDGE)\n\t\t\t{\n\t\t\t\tvar clone = doc.createElement('div');\n\t\t\t\tclone.innerHTML = div.outerHTML;\n\t\t\t\tclone = clone.getElementsByTagName('div')[0];\n\t\t\t\tdoc.body.appendChild(clone);\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t\tdoc.body.appendChild(div);\n\t\t\t}\n\n\t\t\tif (forcePageBreaks || addBreak)\n\t\t\t{\n\t\t\t\tthis.addPageBreak(doc);\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar cov = this.getCoverPages(this.pageFormat.width, this.pageFormat.height);\n\t\t\n\t\tif (cov != null)\n\t\t{\n\t\t\tfor (var i = 0; i < cov.length; i++)\n\t\t\t{\n\t\t\t\taddPage(cov[i], true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar apx = this.getAppendices(this.pageFormat.width, this.pageFormat.height);\n\t\t\n\t\t// Appends each page to the page output for printing, making\n\t\t// sure there will be a page break after each page (ie. div)\n\t\tfor (var i = 0; i < vpages; i++)\n\t\t{\n\t\t\tvar dy = i * availableHeight / this.scale - this.y0 / this.scale +\n\t\t\t\t\t(bounds.y - tr.y * currentScale) / currentScale;\n\t\t\t\n\t\t\tfor (var j = 0; j < hpages; j++)\n\t\t\t{\n\t\t\t\tif (this.wnd == null)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar dx = j * availableWidth / this.scale - this.x0 / this.scale +\n\t\t\t\t\t\t(bounds.x - tr.x * currentScale) / currentScale;\n\t\t\t\tvar pageNum = i * hpages + j + 1;\n\t\t\t\tvar clip = new mxRectangle(dx, dy, availableWidth, availableHeight);\n\t\t\t\tdiv = this.renderPage(this.pageFormat.width, this.pageFormat.height, 0, 0, mxUtils.bind(this, function(div)\n\t\t\t\t{\n\t\t\t\t\tthis.addGraphFragment(-dx, -dy, this.scale, pageNum, div, clip);\n\t\t\t\t\t\n\t\t\t\t\tif (this.printBackgroundImage)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.insertBackgroundImage(div, -dx, -dy);\n\t\t\t\t\t}\n\t\t\t\t}), pageNum);\n\n\t\t\t\t// Gives the page a unique ID for later accessing the page\n\t\t\t\tdiv.setAttribute('id', 'mxPage-'+pageNum);\n\n\t\t\t\taddPage(div, apx != null || i < vpages - 1 || j < hpages - 1);\n\t\t\t}\n\t\t}\n\n\t\tif (apx != null)\n\t\t{\n\t\t\tfor (var i = 0; i < apx.length; i++)\n\t\t\t{\n\t\t\t\taddPage(apx[i], i < apx.length - 1);\n\t\t\t}\n\t\t}\n\n\t\tif (isNewWindow && !keepOpen)\n\t\t{\n\t\t\tthis.closeDocument();\n\t\t\twritePageSelector();\n\t\t}\n\t\t\n\t\tthis.wnd.focus();\n\t}\n\tcatch (e)\n\t{\n\t\t// Removes the DIV from the document in case of an error\n\t\tif (div != null && div.parentNode != null)\n\t\t{\n\t\t\tdiv.parentNode.removeChild(div);\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tthis.graph.cellRenderer.initializeOverlay = previousInitializeOverlay;\n\t}\n\n\treturn this.wnd;\n};\n\n/**\n * Function: addPageBreak\n * \n * Adds a page break to the given document.\n */\nmxPrintPreview.prototype.addPageBreak = function(doc)\n{\n\tvar hr = doc.createElement('hr');\n\thr.className = 'mxPageBreak';\n\tdoc.body.appendChild(hr);\n};\n\n/**\n * Function: closeDocument\n * \n * Writes the closing tags for body and page after calling <writePostfix>.\n */\nmxPrintPreview.prototype.closeDocument = function()\n{\n\ttry\n\t{\n\t\tif (this.wnd != null && this.wnd.document != null)\n\t\t{\n\t\t\tvar doc = this.wnd.document;\n\t\t\t\n\t\t\tthis.writePostfix(doc);\n\t\t\tdoc.writeln('</body>');\n\t\t\tdoc.writeln('</html>');\n\t\t\tdoc.close();\n\t\t\t\n\t\t\t// Removes all event handlers in the print output\n\t\t\tmxEvent.release(doc.body);\n\t\t}\n\t}\n\tcatch (e)\n\t{\n\t\t// ignore any errors resulting from wnd no longer being available\n\t}\n};\n\n/**\n * Function: writeHead\n * \n * Writes the HEAD section into the given document, without the opening\n * and closing HEAD tags.\n */\nmxPrintPreview.prototype.writeHead = function(doc, css)\n{\n\tif (this.title != null)\n\t{\n\t\tdoc.writeln('<title>' + this.title + '</title>');\n\t}\n\t\n\t// Adds required namespaces\n\tif (mxClient.IS_VML)\n\t{\n\t\tdoc.writeln('<style type=\"text/css\">v\\\\:*{behavior:url(#default#VML)}o\\\\:*{behavior:url(#default#VML)}</style>');\n\t}\n\n\t// Adds all required stylesheets\n\tmxClient.link('stylesheet', mxClient.basePath + '/css/common.css', doc);\n\n\t// Removes horizontal rules and page selector from print output\n\tdoc.writeln('<style type=\"text/css\">');\n\tdoc.writeln('@media print {');\n\tdoc.writeln('  * { -webkit-print-color-adjust: exact; }');\n\tdoc.writeln('  table.mxPageSelector { display: none; }');\n\tdoc.writeln('  hr.mxPageBreak { display: none; }');\n\tdoc.writeln('}');\n\tdoc.writeln('@media screen {');\n\t\n\t// NOTE: position: fixed is not supported in IE, so the page selector\n\t// position (absolute) needs to be updated in IE (see below)\n\tdoc.writeln('  table.mxPageSelector { position: fixed; right: 10px; top: 10px;' +\n\t\t\t'font-family: Arial; font-size:10pt; border: solid 1px darkgray;' +\n\t\t\t'background: white; border-collapse:collapse; }');\n\tdoc.writeln('  table.mxPageSelector td { border: solid 1px gray; padding:4px; }');\n\tdoc.writeln('  body.mxPage { background: gray; }');\n\tdoc.writeln('}');\n\t\n\tif (css != null)\n\t{\n\t\tdoc.writeln(css);\n\t}\n\t\n\tdoc.writeln('</style>');\n};\n\n/**\n * Function: writePostfix\n * \n * Called before closing the body of the page. This implementation is empty.\n */\nmxPrintPreview.prototype.writePostfix = function(doc)\n{\n\t// empty\n};\n\n/**\n * Function: createPageSelector\n * \n * Creates the page selector table.\n */\nmxPrintPreview.prototype.createPageSelector = function(vpages, hpages)\n{\n\tvar doc = this.wnd.document;\n\tvar table = doc.createElement('table');\n\ttable.className = 'mxPageSelector';\n\ttable.setAttribute('border', '0');\n\n\tvar tbody = doc.createElement('tbody');\n\t\n\tfor (var i = 0; i < vpages; i++)\n\t{\n\t\tvar row = doc.createElement('tr');\n\t\t\n\t\tfor (var j = 0; j < hpages; j++)\n\t\t{\n\t\t\tvar pageNum = i * hpages + j + 1;\n\t\t\tvar cell = doc.createElement('td');\n\t\t\tvar a = doc.createElement('a');\n\t\t\ta.setAttribute('href', '#mxPage-' + pageNum);\n\n\t\t\t// Workaround for FF where the anchor is appended to the URL of the original document\n\t\t\tif (mxClient.IS_NS && !mxClient.IS_SF && !mxClient.IS_GC)\n\t\t\t{\n\t\t\t\tvar js = 'var page = document.getElementById(\\'mxPage-' + pageNum + '\\');page.scrollIntoView(true);event.preventDefault();';\n\t\t\t\ta.setAttribute('onclick', js);\n\t\t\t}\n\t\t\t\n\t\t\tmxUtils.write(a, pageNum, doc);\n\t\t\tcell.appendChild(a);\n\t\t\trow.appendChild(cell);\n\t\t}\n\t\t\n\t\ttbody.appendChild(row);\n\t}\n\t\n\ttable.appendChild(tbody);\n\t\n\treturn table;\n};\n\n/**\n * Function: renderPage\n * \n * Creates a DIV that prints a single page of the given\n * graph using the given scale and returns the DIV that\n * represents the page.\n * \n * Parameters:\n * \n * w - Width of the page in pixels.\n * h - Height of the page in pixels.\n * dx - Optional horizontal page offset in pixels (used internally).\n * dy - Optional vertical page offset in pixels (used internally).\n * content - Callback that adds the HTML content to the inner div of a page.\n * Takes the inner div as the argument.\n * pageNumber - Integer representing the page number.\n */\nmxPrintPreview.prototype.renderPage = function(w, h, dx, dy, content, pageNumber)\n{\n\tvar doc = this.wnd.document;\n\tvar div = document.createElement('div');\n\tvar arg = null;\n\n\ttry\n\t{\n\t\t// Workaround for ignored clipping in IE 9 standards\n\t\t// when printing with page breaks and HTML labels.\n\t\tif (dx != 0 || dy != 0)\n\t\t{\n\t\t\tdiv.style.position = 'relative';\n\t\t\tdiv.style.width = w + 'px';\n\t\t\tdiv.style.height = h + 'px';\n\t\t\tdiv.style.pageBreakInside = 'avoid';\n\t\t\t\n\t\t\tvar innerDiv = document.createElement('div');\n\t\t\tinnerDiv.style.position = 'relative';\n\t\t\tinnerDiv.style.top = this.border + 'px';\n\t\t\tinnerDiv.style.left = this.border + 'px';\n\t\t\tinnerDiv.style.width = (w - 2 * this.border) + 'px';\n\t\t\tinnerDiv.style.height = (h - 2 * this.border) + 'px';\n\t\t\tinnerDiv.style.overflow = 'hidden';\n\t\t\t\n\t\t\tvar viewport = document.createElement('div');\n\t\t\tviewport.style.position = 'relative';\n\t\t\tviewport.style.marginLeft = dx + 'px';\n\t\t\tviewport.style.marginTop = dy + 'px';\n\n\t\t\t// FIXME: IE8 standards output problems\n\t\t\tif (doc.documentMode == 8)\n\t\t\t{\n\t\t\t\tinnerDiv.style.position = 'absolute';\n\t\t\t\tviewport.style.position = 'absolute';\n\t\t\t}\n\t\t\n\t\t\tif (doc.documentMode == 10)\n\t\t\t{\n\t\t\t\tviewport.style.width = '100%';\n\t\t\t\tviewport.style.height = '100%';\n\t\t\t}\n\t\t\t\n\t\t\tinnerDiv.appendChild(viewport);\n\t\t\tdiv.appendChild(innerDiv);\n\t\t\tdocument.body.appendChild(div);\n\t\t\targ = viewport;\n\t\t}\n\t\t// FIXME: IE10/11 too many pages\n\t\telse\n\t\t{\n\t\t\tdiv.style.width = w + 'px';\n\t\t\tdiv.style.height = h + 'px';\n\t\t\tdiv.style.overflow = 'hidden';\n\t\t\tdiv.style.pageBreakInside = 'avoid';\n\t\t\t\n\t\t\t// IE8 uses above branch currently\n\t\t\tif (doc.documentMode == 8)\n\t\t\t{\n\t\t\t\tdiv.style.position = 'relative';\n\t\t\t}\n\t\t\t\n\t\t\tvar innerDiv = document.createElement('div');\n\t\t\tinnerDiv.style.width = (w - 2 * this.border) + 'px';\n\t\t\tinnerDiv.style.height = (h - 2 * this.border) + 'px';\n\t\t\tinnerDiv.style.overflow = 'hidden';\n\n\t\t\tif (mxClient.IS_IE && (doc.documentMode == null || doc.documentMode == 5 ||\n\t\t\t\tdoc.documentMode == 8 || doc.documentMode == 7))\n\t\t\t{\n\t\t\t\tinnerDiv.style.marginTop = this.border + 'px';\n\t\t\t\tinnerDiv.style.marginLeft = this.border + 'px';\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinnerDiv.style.top = this.border + 'px';\n\t\t\t\tinnerDiv.style.left = this.border + 'px';\n\t\t\t}\n\t\n\t\t\tif (this.graph.dialect == mxConstants.DIALECT_VML)\n\t\t\t{\n\t\t\t\tinnerDiv.style.position = 'absolute';\n\t\t\t}\n\n\t\t\tdiv.appendChild(innerDiv);\n\t\t\tdocument.body.appendChild(div);\n\t\t\targ = innerDiv;\n\t\t}\n\t}\n\tcatch (e)\n\t{\n\t\tdiv.parentNode.removeChild(div);\n\t\tdiv = null;\n\t\t\n\t\tthrow e;\n\t}\n\n\tcontent(arg);\n\t \n\treturn div;\n};\n\n/**\n * Function: getRoot\n * \n * Returns the root cell for painting the graph.\n */\nmxPrintPreview.prototype.getRoot = function()\n{\n\tvar root = this.graph.view.currentRoot;\n\t\n\tif (root == null)\n\t{\n\t\troot = this.graph.getModel().getRoot();\n\t}\n\t\n\treturn root;\n};\n\n/**\n * Function: useCssTransforms\n * \n * Returns true if CSS transforms should be used for scaling content.\n * This returns true if foreignObject is supported and we're not in Safari\n * as it has clipping bugs for transformed CSS content with foreignObjects.\n */\nmxPrintPreview.prototype.useCssTransforms = function()\n{\n\treturn !mxClient.NO_FO && !mxClient.IS_SF;\n};\n\n/**\n * Function: addGraphFragment\n * \n * Adds a graph fragment to the given div.\n * \n * Parameters:\n * \n * dx - Horizontal translation for the diagram.\n * dy - Vertical translation for the diagram.\n * scale - Scale for the diagram.\n * pageNumber - Number of the page to be rendered.\n * div - Div that contains the output.\n * clip - Contains the clipping rectangle as an <mxRectangle>.\n */\nmxPrintPreview.prototype.addGraphFragment = function(dx, dy, scale, pageNumber, div, clip)\n{\n\tvar view = this.graph.getView();\n\tvar previousContainer = this.graph.container;\n\tthis.graph.container = div;\n\t\n\tvar canvas = view.getCanvas();\n\tvar backgroundPane = view.getBackgroundPane();\n\tvar drawPane = view.getDrawPane();\n\tvar overlayPane = view.getOverlayPane();\n\tvar realScale = scale;\n\n\tif (this.graph.dialect == mxConstants.DIALECT_SVG)\n\t{\n\t\tview.createSvg();\n\t\t\n\t\t// Uses CSS transform for scaling\n\t\tif (this.useCssTransforms())\n\t\t{\n\t\t\tvar g = view.getDrawPane().parentNode;\n\t\t\tvar prev = g.getAttribute('transform');\n\t\t\tg.setAttribute('transformOrigin', '0 0');\n\t\t\tg.setAttribute('transform', 'scale(' + scale + ',' + scale + ')' +\n\t\t\t\t'translate(' + dx + ',' + dy + ')');\n\t\t\t\n\t\t\tscale = 1;\n\t\t\tdx = 0;\n\t\t\tdy = 0;\n\t\t}\n\t}\n\telse if (this.graph.dialect == mxConstants.DIALECT_VML)\n\t{\n\t\tview.createVml();\n\t}\n\telse\n\t{\n\t\tview.createHtml();\n\t}\n\t\n\t// Disables events on the view\n\tvar eventsEnabled = view.isEventsEnabled();\n\tview.setEventsEnabled(false);\n\t\n\t// Disables the graph to avoid cursors\n\tvar graphEnabled = this.graph.isEnabled();\n\tthis.graph.setEnabled(false);\n\n\t// Resets the translation\n\tvar translate = view.getTranslate();\n\tview.translate = new mxPoint(dx, dy);\n\t\n\t// Redraws only states that intersect the clip\n\tvar redraw = this.graph.cellRenderer.redraw;\n\tvar states = view.states;\n\tvar s = view.scale;\n\n\t// Gets the transformed clip for intersection check below\n\tif (this.clipping)\n\t{\n\t\tvar tempClip = new mxRectangle((clip.x + translate.x) * s, (clip.y + translate.y) * s,\n\t\t\t\tclip.width * s / realScale, clip.height * s / realScale);\n\n\t\t// Checks clipping rectangle for speedup\n\t\t// Must create terminal states for edge clipping even if terminal outside of clip\n\t\tthis.graph.cellRenderer.redraw = function(state, force, rendering)\n\t\t{\n\t\t\tif (state != null)\n\t\t\t{\n\t\t\t\t// Gets original state from graph to find bounding box\n\t\t\t\tvar orig = states.get(state.cell);\n\t\t\t\t\n\t\t\t\tif (orig != null)\n\t\t\t\t{\n\t\t\t\t\tvar bbox = view.getBoundingBox(orig, false);\n\t\t\t\t\t\n\t\t\t\t\t// Stops rendering if outside clip for speedup but ignores\n\t\t\t\t\t// edge labels where width and height is set to 0\n\t\t\t\t\tif (bbox != null && bbox.width > 0 && bbox.height > 0 &&\n\t\t\t\t\t\t!mxUtils.intersects(tempClip, bbox))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tredraw.apply(this, arguments);\n\t\t};\n\t}\n\t\n\tvar temp = null;\n\t\n\ttry\n\t{\n\t\t// Creates the temporary cell states in the view and\n\t\t// draws them onto the temporary DOM nodes in the view\n\t\tvar cells = [this.getRoot()];\n\t\ttemp = new mxTemporaryCellStates(view, scale, cells, null, mxUtils.bind(this, function(state)\n\t\t{\n\t\t\treturn this.getLinkForCellState(state);\n\t\t}));\n\t}\n\tfinally\n\t{\n\t\t// Removes overlay pane with selection handles\n\t\t// controls and icons from the print output\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\tview.overlayPane.innerHTML = '';\n\t\t\tview.canvas.style.overflow = 'hidden';\n\t\t\tview.canvas.style.position = 'relative';\n\t\t\tview.canvas.style.top = this.marginTop + 'px';\n\t\t\tview.canvas.style.width = clip.width + 'px';\n\t\t\tview.canvas.style.height = clip.height + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Removes everything but the SVG node\n\t\t\tvar tmp = div.firstChild;\n\n\t\t\twhile (tmp != null)\n\t\t\t{\n\t\t\t\tvar next = tmp.nextSibling;\n\t\t\t\tvar name = tmp.nodeName.toLowerCase();\n\n\t\t\t\t// Note: Width and height are required in FF 11\n\t\t\t\tif (name == 'svg')\n\t\t\t\t{\n\t\t\t\t\ttmp.style.overflow = 'hidden';\n\t\t\t\t\ttmp.style.position = 'relative';\n\t\t\t\t\ttmp.style.top = this.marginTop + 'px';\n\t\t\t\t\ttmp.setAttribute('width', clip.width);\n\t\t\t\t\ttmp.setAttribute('height', clip.height);\n\t\t\t\t\ttmp.style.width = '';\n\t\t\t\t\ttmp.style.height = '';\n\t\t\t\t}\n\t\t\t\t// Tries to fetch all text labels and only text labels\n\t\t\t\telse if (tmp.style.cursor != 'default' && name != 'div')\n\t\t\t\t{\n\t\t\t\t\ttmp.parentNode.removeChild(tmp);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttmp = next;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Puts background image behind SVG output\n\t\tif (this.printBackgroundImage)\n\t\t{\n\t\t\tvar svgs = div.getElementsByTagName('svg');\n\t\t\t\n\t\t\tif (svgs.length > 0)\n\t\t\t{\n\t\t\t\tsvgs[0].style.position = 'absolute';\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Completely removes the overlay pane to remove more handles\n\t\tview.overlayPane.parentNode.removeChild(view.overlayPane);\n\n\t\t// Restores the state of the view\n\t\tthis.graph.setEnabled(graphEnabled);\n\t\tthis.graph.container = previousContainer;\n\t\tthis.graph.cellRenderer.redraw = redraw;\n\t\tview.canvas = canvas;\n\t\tview.backgroundPane = backgroundPane;\n\t\tview.drawPane = drawPane;\n\t\tview.overlayPane = overlayPane;\n\t\tview.translate = translate;\n\t\ttemp.destroy();\n\t\tview.setEventsEnabled(eventsEnabled);\n\t}\n};\n\n/**\n * Function: getLinkForCellState\n * \n * Returns the link for the given cell state. This returns null.\n */\nmxPrintPreview.prototype.getLinkForCellState = function(state)\n{\n\treturn this.graph.getLinkForCell(state.cell);\n};\n\n/**\n * Function: insertBackgroundImage\n * \n * Inserts the background image into the given div.\n */\nmxPrintPreview.prototype.insertBackgroundImage = function(div, dx, dy)\n{\n\tvar bg = this.graph.backgroundImage;\n\t\n\tif (bg != null)\n\t{\n\t\tvar img = document.createElement('img');\n\t\timg.style.position = 'absolute';\n\t\timg.style.marginLeft = Math.round(dx * this.scale) + 'px';\n\t\timg.style.marginTop = Math.round(dy * this.scale) + 'px';\n\t\timg.setAttribute('width', Math.round(this.scale * bg.width));\n\t\timg.setAttribute('height', Math.round(this.scale * bg.height));\n\t\timg.src = bg.src;\n\t\t\n\t\tdiv.insertBefore(img, div.firstChild);\n\t}\n};\n\n/**\n * Function: getCoverPages\n * \n * Returns the pages to be added before the print output. This returns null.\n */\nmxPrintPreview.prototype.getCoverPages = function()\n{\n\treturn null;\n};\n\n/**\n * Function: getAppendices\n * \n * Returns the pages to be added after the print output. This returns null.\n */\nmxPrintPreview.prototype.getAppendices = function()\n{\n\treturn null;\n};\n\n/**\n * Function: print\n * \n * Opens the print preview and shows the print dialog.\n * \n * Parameters:\n * \n * css - Optional CSS string to be used in the head section.\n */\nmxPrintPreview.prototype.print = function(css)\n{\n\tvar wnd = this.open(css);\n\t\n\tif (wnd != null)\n\t{\n\t\twnd.print();\n\t}\n};\n\n/**\n * Function: close\n * \n * Closes the print preview window.\n */\nmxPrintPreview.prototype.close = function()\n{\n\tif (this.wnd != null)\n\t{\n\t\tthis.wnd.close();\n\t\tthis.wnd = null;\n\t}\n};\n\n__mxOutput.mxPrintPreview = typeof mxPrintPreview !== 'undefined' ? mxPrintPreview : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxStylesheet\n *\n * Defines the appearance of the cells in a graph. See <putCellStyle> for an\n * example of creating a new cell style. It is recommended to use objects, not\n * arrays for holding cell styles. Existing styles can be cloned using\n * <mxUtils.clone> and turned into a string for debugging using\n * <mxUtils.toString>.\n *\n * Default Styles:\n *\n * The stylesheet contains two built-in styles, which are used if no style is\n * defined for a cell:\n *\n *   defaultVertex - Default style for vertices\n *   defaultEdge - Default style for edges\n *\n * Example:\n *\n * (code)\n * var vertexStyle = stylesheet.getDefaultVertexStyle();\n * vertexStyle[mxConstants.STYLE_ROUNDED] = true;\n * var edgeStyle = stylesheet.getDefaultEdgeStyle();\n * edgeStyle[mxConstants.STYLE_EDGE] = mxEdgeStyle.EntityRelation;\n * (end)\n *\n * Modifies the built-in default styles.\n *\n * To avoid the default style for a cell, add a leading semicolon\n * to the style definition, eg.\n *\n * (code)\n * ;shadow=1\n * (end)\n *\n * Removing keys:\n *\n * For removing a key in a cell style of the form [stylename;|key=value;] the\n * special value none can be used, eg. highlight;fillColor=none\n *\n * See also the helper methods in mxUtils to modify strings of this format,\n * namely <mxUtils.setStyle>, <mxUtils.indexOfStylename>,\n * <mxUtils.addStylename>, <mxUtils.removeStylename>,\n * <mxUtils.removeAllStylenames> and <mxUtils.setStyleFlag>.\n *\n * Constructor: mxStylesheet\n *\n * Constructs a new stylesheet and assigns default styles.\n */\nfunction mxStylesheet()\n{\n\tthis.styles = new Object();\n\n\tthis.putDefaultVertexStyle(this.createDefaultVertexStyle());\n\tthis.putDefaultEdgeStyle(this.createDefaultEdgeStyle());\n};\n\n/**\n * Function: styles\n *\n * Maps from names to cell styles. Each cell style is a map of key,\n * value pairs.\n */\nmxStylesheet.prototype.styles;\n\n/**\n * Function: createDefaultVertexStyle\n *\n * Creates and returns the default vertex style.\n */\nmxStylesheet.prototype.createDefaultVertexStyle = function()\n{\n\tvar style = new Object();\n\n\tstyle[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_RECTANGLE;\n\tstyle[mxConstants.STYLE_PERIMETER] = mxPerimeter.RectanglePerimeter;\n\tstyle[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_MIDDLE;\n\tstyle[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;\n\tstyle[mxConstants.STYLE_FILLCOLOR] = '#C3D9FF';\n\tstyle[mxConstants.STYLE_STROKECOLOR] = '#6482B9';\n\tstyle[mxConstants.STYLE_FONTCOLOR] = '#774400';\n\n\treturn style;\n};\n\n/**\n * Function: createDefaultEdgeStyle\n *\n * Creates and returns the default edge style.\n */\nmxStylesheet.prototype.createDefaultEdgeStyle = function()\n{\n\tvar style = new Object();\n\n\tstyle[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_CONNECTOR;\n\tstyle[mxConstants.STYLE_ENDARROW] = mxConstants.ARROW_CLASSIC;\n\tstyle[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_MIDDLE;\n\tstyle[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;\n\tstyle[mxConstants.STYLE_STROKECOLOR] = '#6482B9';\n\tstyle[mxConstants.STYLE_FONTCOLOR] = '#446299';\n\n\treturn style;\n};\n\n/**\n * Function: putDefaultVertexStyle\n *\n * Sets the default style for vertices using defaultVertex as the\n * stylename.\n *\n * Parameters:\n * style - Key, value pairs that define the style.\n */\nmxStylesheet.prototype.putDefaultVertexStyle = function(style)\n{\n\tthis.putCellStyle('defaultVertex', style);\n};\n\n/**\n * Function: putDefaultEdgeStyle\n *\n * Sets the default style for edges using defaultEdge as the stylename.\n */\nmxStylesheet.prototype.putDefaultEdgeStyle = function(style)\n{\n\tthis.putCellStyle('defaultEdge', style);\n};\n\n/**\n * Function: getDefaultVertexStyle\n *\n * Returns the default style for vertices.\n */\nmxStylesheet.prototype.getDefaultVertexStyle = function()\n{\n\treturn this.styles['defaultVertex'];\n};\n\n/**\n * Function: getDefaultEdgeStyle\n *\n * Sets the default style for edges.\n */\nmxStylesheet.prototype.getDefaultEdgeStyle = function()\n{\n\treturn this.styles['defaultEdge'];\n};\n\n/**\n * Function: putCellStyle\n *\n * Stores the given map of key, value pairs under the given name in\n * <styles>.\n *\n * Example:\n *\n * The following example adds a new style called 'rounded' into an\n * existing stylesheet:\n *\n * (code)\n * var style = new Object();\n * style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_RECTANGLE;\n * style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RectanglePerimeter;\n * style[mxConstants.STYLE_ROUNDED] = true;\n * graph.getStylesheet().putCellStyle('rounded', style);\n * (end)\n *\n * In the above example, the new style is an object. The possible keys of\n * the object are all the constants in <mxConstants> that start with STYLE\n * and the values are either JavaScript objects, such as\n * <mxPerimeter.RightAngleRectanglePerimeter> (which is in fact a function)\n * or expressions, such as true. Note that not all keys will be\n * interpreted by all shapes (eg. the line shape ignores the fill color).\n * The final call to this method associates the style with a name in the\n * stylesheet. The style is used in a cell with the following code:\n *\n * (code)\n * model.setStyle(cell, 'rounded');\n * (end)\n *\n * Parameters:\n *\n * name - Name for the style to be stored.\n * style - Key, value pairs that define the style.\n */\nmxStylesheet.prototype.putCellStyle = function(name, style)\n{\n\tthis.styles[name] = style;\n};\n\n/**\n * Function: getCellStyle\n *\n * Returns the cell style for the specified stylename or the given\n * defaultStyle if no style can be found for the given stylename.\n *\n * Parameters:\n *\n * name - String of the form [(stylename|key=value);] that represents the\n * style.\n * defaultStyle - Default style to be returned if no style can be found.\n */\nmxStylesheet.prototype.getCellStyle = function(name, defaultStyle)\n{\n\tvar style = defaultStyle;\n\n\tif (name != null && name.length > 0)\n\t{\n\t\tvar pairs = name.split(';');\n\n\t\tif (style != null &&\n\t\t\tname.charAt(0) != ';')\n\t\t{\n\t\t\tstyle = mxUtils.clone(style);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstyle = new Object();\n\t\t}\n\n\t\t// Parses each key, value pair into the existing style\n\t \tfor (var i = 0; i < pairs.length; i++)\n\t \t{\n\t \t\tvar tmp = pairs[i];\n\t \t\tvar pos = tmp.indexOf('=');\n\n\t \t\tif (pos >= 0)\n\t \t\t{\n\t\t \t\tvar key = tmp.substring(0, pos);\n\t\t \t\tvar value = tmp.substring(pos + 1);\n\n\t\t \t\tif (value == mxConstants.NONE)\n\t\t \t\t{\n\t\t \t\t\tdelete style[key];\n\t\t \t\t}\n\t\t \t\telse if (mxUtils.isNumeric(value))\n\t\t \t\t{\n\t\t \t\t\tstyle[key] = parseFloat(value);\n\t\t \t\t}\n\t\t \t\telse\n\t\t \t\t{\n\t\t\t \t\tstyle[key] = value;\n\t\t \t\t}\n\t\t\t}\n\t \t\telse\n\t \t\t{\n\t \t\t\t// Merges the entries from a named style\n\t\t\t\tvar tmpStyle = this.styles[tmp];\n\n\t\t\t\tif (tmpStyle != null)\n\t\t\t\t{\n\t\t\t\t\tfor (var key in tmpStyle)\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle[key] = tmpStyle[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t \t\t}\n\t\t}\n\t}\n\n\treturn style;\n};\n\n__mxOutput.mxStylesheet = typeof mxStylesheet !== 'undefined' ? mxStylesheet : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCellState\n * \n * Represents the current state of a cell in a given <mxGraphView>.\n * \n * For edges, the edge label position is stored in <absoluteOffset>.\n * \n * The size for oversize labels can be retrieved using the boundingBox property\n * of the <text> field as shown below.\n * \n * (code)\n * var bbox = (state.text != null) ? state.text.boundingBox : null;\n * (end)\n * \n * Constructor: mxCellState\n * \n * Constructs a new object that represents the current state of the given\n * cell in the specified view.\n * \n * Parameters:\n * \n * view - <mxGraphView> that contains the state.\n * cell - <mxCell> that this state represents.\n * style - Array of key, value pairs that constitute the style.\n */\nfunction mxCellState(view, cell, style)\n{\n\tthis.view = view;\n\tthis.cell = cell;\n\tthis.style = (style != null) ? style : {};\n\t\n\tthis.origin = new mxPoint();\n\tthis.absoluteOffset = new mxPoint();\n};\n\n/**\n * Extends mxRectangle.\n */\nmxCellState.prototype = new mxRectangle();\nmxCellState.prototype.constructor = mxCellState;\n\n/**\n * Variable: view\n * \n * Reference to the enclosing <mxGraphView>.\n */\nmxCellState.prototype.view = null;\n\n/**\n * Variable: cell\n *\n * Reference to the <mxCell> that is represented by this state.\n */\nmxCellState.prototype.cell = null;\n\n/**\n * Variable: style\n * \n * Contains an array of key, value pairs that represent the style of the\n * cell.\n */\nmxCellState.prototype.style = null;\n\n/**\n * Variable: invalidStyle\n * \n * Specifies if the style is invalid. Default is false.\n */\nmxCellState.prototype.invalidStyle = false;\n\n/**\n * Variable: invalid\n * \n * Specifies if the state is invalid. Default is true.\n */\nmxCellState.prototype.invalid = true;\n\n/**\n * Variable: origin\n *\n * <mxPoint> that holds the origin for all child cells. Default is a new\n * empty <mxPoint>.\n */\nmxCellState.prototype.origin = null;\n\n/**\n * Variable: absolutePoints\n * \n * Holds an array of <mxPoints> that represent the absolute points of an\n * edge.\n */\nmxCellState.prototype.absolutePoints = null;\n\n/**\n * Variable: absoluteOffset\n *\n * <mxPoint> that holds the absolute offset. For edges, this is the\n * absolute coordinates of the label position. For vertices, this is the\n * offset of the label relative to the top, left corner of the vertex. \n */\nmxCellState.prototype.absoluteOffset = null;\n\n/**\n * Variable: visibleSourceState\n * \n * Caches the visible source terminal state.\n */\nmxCellState.prototype.visibleSourceState = null;\n\n/**\n * Variable: visibleTargetState\n * \n * Caches the visible target terminal state.\n */\nmxCellState.prototype.visibleTargetState = null;\n\n/**\n * Variable: terminalDistance\n * \n * Caches the distance between the end points for an edge.\n */\nmxCellState.prototype.terminalDistance = 0;\n\n/**\n * Variable: length\n *\n * Caches the length of an edge.\n */\nmxCellState.prototype.length = 0;\n\n/**\n * Variable: segments\n * \n * Array of numbers that represent the cached length of each segment of the\n * edge.\n */\nmxCellState.prototype.segments = null;\n\n/**\n * Variable: shape\n * \n * Holds the <mxShape> that represents the cell graphically.\n */\nmxCellState.prototype.shape = null;\n\n/**\n * Variable: text\n * \n * Holds the <mxText> that represents the label of the cell. Thi smay be\n * null if the cell has no label.\n */\nmxCellState.prototype.text = null;\n\n/**\n * Variable: unscaledWidth\n * \n * Holds the unscaled width of the state.\n */\nmxCellState.prototype.unscaledWidth = null;\n\n/**\n * Variable: unscaledHeight\n * \n * Holds the unscaled height of the state.\n */\nmxCellState.prototype.unscaledHeight = null;\n\n/**\n * Function: getPerimeterBounds\n * \n * Returns the <mxRectangle> that should be used as the perimeter of the\n * cell.\n * \n * Parameters:\n * \n * border - Optional border to be added around the perimeter bounds.\n * bounds - Optional <mxRectangle> to be used as the initial bounds.\n */\nmxCellState.prototype.getPerimeterBounds = function(border, bounds)\n{\n\tborder = border || 0;\n\tbounds = (bounds != null) ? bounds : new mxRectangle(this.x, this.y, this.width, this.height);\n\t\n\tif (this.shape != null && this.shape.stencil != null && this.shape.stencil.aspect == 'fixed')\n\t{\n\t\tvar aspect = this.shape.stencil.computeAspect(this.style, bounds.x, bounds.y, bounds.width, bounds.height);\n\t\t\n\t\tbounds.x = aspect.x;\n\t\tbounds.y = aspect.y;\n\t\tbounds.width = this.shape.stencil.w0 * aspect.width;\n\t\tbounds.height = this.shape.stencil.h0 * aspect.height;\n\t}\n\t\n\tif (border != 0)\n\t{\n\t\tbounds.grow(border);\n\t}\n\t\n\treturn bounds;\n};\n\n/**\n * Function: setAbsoluteTerminalPoint\n * \n * Sets the first or last point in <absolutePoints> depending on isSource.\n * \n * Parameters:\n * \n * point - <mxPoint> that represents the terminal point.\n * isSource - Boolean that specifies if the first or last point should\n * be assigned.\n */\nmxCellState.prototype.setAbsoluteTerminalPoint = function(point, isSource)\n{\n\tif (isSource)\n\t{\n\t\tif (this.absolutePoints == null)\n\t\t{\n\t\t\tthis.absolutePoints = [];\n\t\t}\n\t\t\n\t\tif (this.absolutePoints.length == 0)\n\t\t{\n\t\t\tthis.absolutePoints.push(point);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.absolutePoints[0] = point;\n\t\t}\n\t}\n\telse\n\t{\n\t\tif (this.absolutePoints == null)\n\t\t{\n\t\t\tthis.absolutePoints = [];\n\t\t\tthis.absolutePoints.push(null);\n\t\t\tthis.absolutePoints.push(point);\n\t\t}\n\t\telse if (this.absolutePoints.length == 1)\n\t\t{\n\t\t\tthis.absolutePoints.push(point);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.absolutePoints[this.absolutePoints.length - 1] = point;\n\t\t}\n\t}\n};\n\n/**\n * Function: setCursor\n * \n * Sets the given cursor on the shape and text shape.\n */\nmxCellState.prototype.setCursor = function(cursor)\n{\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.setCursor(cursor);\n\t}\n\t\n\tif (this.text != null)\n\t{\n\t\tthis.text.setCursor(cursor);\n\t}\n};\n\n/**\n * Function: getVisibleTerminal\n * \n * Returns the visible source or target terminal cell.\n * \n * Parameters:\n * \n * source - Boolean that specifies if the source or target cell should be\n * returned.\n */\nmxCellState.prototype.getVisibleTerminal = function(source)\n{\n\tvar tmp = this.getVisibleTerminalState(source);\n\t\n\treturn (tmp != null) ? tmp.cell : null;\n};\n\n/**\n * Function: getVisibleTerminalState\n * \n * Returns the visible source or target terminal state.\n * \n * Parameters:\n * \n * source - Boolean that specifies if the source or target state should be\n * returned.\n */\nmxCellState.prototype.getVisibleTerminalState = function(source)\n{\n\treturn (source) ? this.visibleSourceState : this.visibleTargetState;\n};\n\n/**\n * Function: setVisibleTerminalState\n * \n * Sets the visible source or target terminal state.\n * \n * Parameters:\n * \n * terminalState - <mxCellState> that represents the terminal.\n * source - Boolean that specifies if the source or target state should be set.\n */\nmxCellState.prototype.setVisibleTerminalState = function(terminalState, source)\n{\n\tif (source)\n\t{\n\t\tthis.visibleSourceState = terminalState;\n\t}\n\telse\n\t{\n\t\tthis.visibleTargetState = terminalState;\n\t}\n};\n\n/**\n * Function: getCellBounds\n * \n * Returns the unscaled, untranslated bounds.\n */\nmxCellState.prototype.getCellBounds = function()\n{\n\treturn this.cellBounds;\n};\n\n/**\n * Function: getPaintBounds\n * \n * Returns the unscaled, untranslated paint bounds. This is the same as\n * <getCellBounds> but with a 90 degree rotation if the shape's\n * isPaintBoundsInverted returns true.\n */\nmxCellState.prototype.getPaintBounds = function()\n{\n\treturn this.paintBounds;\n};\n\n/**\n * Function: updateCachedBounds\n * \n * Updates the cellBounds and paintBounds.\n */\nmxCellState.prototype.updateCachedBounds = function()\n{\n\tvar tr = this.view.translate;\n\tvar s = this.view.scale;\n\tthis.cellBounds = new mxRectangle(this.x / s - tr.x, this.y / s - tr.y, this.width / s, this.height / s);\n\tthis.paintBounds = mxRectangle.fromRectangle(this.cellBounds);\n\t\n\tif (this.shape != null && this.shape.isPaintBoundsInverted())\n\t{\n\t\tthis.paintBounds.rotate90();\n\t}\n};\n\n/**\n * Destructor: setState\n * \n * Copies all fields from the given state to this state.\n */\nmxCellState.prototype.setState = function(state)\n{\n\tthis.view = state.view;\n\tthis.cell = state.cell;\n\tthis.style = state.style;\n\tthis.absolutePoints = state.absolutePoints;\n\tthis.origin = state.origin;\n\tthis.absoluteOffset = state.absoluteOffset;\n\tthis.boundingBox = state.boundingBox;\n\tthis.terminalDistance = state.terminalDistance;\n\tthis.segments = state.segments;\n\tthis.length = state.length;\n\tthis.x = state.x;\n\tthis.y = state.y;\n\tthis.width = state.width;\n\tthis.height = state.height;\n\tthis.unscaledWidth = state.unscaledWidth;\n\tthis.unscaledHeight = state.unscaledHeight;\n};\n\n/**\n * Function: clone\n *\n * Returns a clone of this <mxPoint>.\n */\nmxCellState.prototype.clone = function()\n{\n \tvar clone = new mxCellState(this.view, this.cell, this.style);\n\n\t// Clones the absolute points\n\tif (this.absolutePoints != null)\n\t{\n\t\tclone.absolutePoints = [];\n\t\t\n\t\tfor (var i = 0; i < this.absolutePoints.length; i++)\n\t\t{\n\t\t\tclone.absolutePoints[i] = this.absolutePoints[i].clone();\n\t\t}\n\t}\n\n\tif (this.origin != null)\n\t{\n\t\tclone.origin = this.origin.clone();\n\t}\n\n\tif (this.absoluteOffset != null)\n\t{\n\t\tclone.absoluteOffset = this.absoluteOffset.clone();\n\t}\n\n\tif (this.boundingBox != null)\n\t{\n\t\tclone.boundingBox = this.boundingBox.clone();\n\t}\n\n\tclone.terminalDistance = this.terminalDistance;\n\tclone.segments = this.segments;\n\tclone.length = this.length;\n\tclone.x = this.x;\n\tclone.y = this.y;\n\tclone.width = this.width;\n\tclone.height = this.height;\n\tclone.unscaledWidth = this.unscaledWidth;\n\tclone.unscaledHeight = this.unscaledHeight;\n\t\n\treturn clone;\n};\n\n/**\n * Destructor: destroy\n * \n * Destroys the state and all associated resources.\n */\nmxCellState.prototype.destroy = function()\n{\n\tthis.view.graph.cellRenderer.destroy(this);\n};\n\n__mxOutput.mxCellState = typeof mxCellState !== 'undefined' ? mxCellState : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraphSelectionModel\n *\n * Implements the selection model for a graph. Here is a listener that handles\n * all removed selection cells.\n * \n * (code)\n * graph.getSelectionModel().addListener(mxEvent.CHANGE, function(sender, evt)\n * {\n *   var cells = evt.getProperty('added');\n *   \n *   for (var i = 0; i < cells.length; i++)\n *   {\n *     // Handle cells[i]...\n *   }\n * });\n * (end)\n * \n * Event: mxEvent.UNDO\n * \n * Fires after the selection was changed in <changeSelection>. The\n * <code>edit</code> property contains the <mxUndoableEdit> which contains the\n * <mxSelectionChange>.\n * \n * Event: mxEvent.CHANGE\n * \n * Fires after the selection changes by executing an <mxSelectionChange>. The\n * <code>added</code> and <code>removed</code> properties contain arrays of\n * cells that have been added to or removed from the selection, respectively.\n * The names are inverted due to historic reasons. This cannot be changed.\n * \n * Constructor: mxGraphSelectionModel\n *\n * Constructs a new graph selection model for the given <mxGraph>.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n */\nfunction mxGraphSelectionModel(graph)\n{\n\tthis.graph = graph;\n\tthis.cells = [];\n};\n\n/**\n * Extends mxEventSource.\n */\nmxGraphSelectionModel.prototype = new mxEventSource();\nmxGraphSelectionModel.prototype.constructor = mxGraphSelectionModel;\n\n/**\n * Variable: doneResource\n * \n * Specifies the resource key for the status message after a long operation.\n * If the resource for this key does not exist then the value is used as\n * the status message. Default is 'done'.\n */\nmxGraphSelectionModel.prototype.doneResource = (mxClient.language != 'none') ? 'done' : '';\n\n/**\n * Variable: updatingSelectionResource\n *\n * Specifies the resource key for the status message while the selection is\n * being updated. If the resource for this key does not exist then the\n * value is used as the status message. Default is 'updatingSelection'.\n */\nmxGraphSelectionModel.prototype.updatingSelectionResource = (mxClient.language != 'none') ? 'updatingSelection' : '';\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxGraphSelectionModel.prototype.graph = null;\n\n/**\n * Variable: singleSelection\n *\n * Specifies if only one selected item at a time is allowed.\n * Default is false.\n */\nmxGraphSelectionModel.prototype.singleSelection = false;\n\n/**\n * Function: isSingleSelection\n *\n * Returns <singleSelection> as a boolean.\n */\nmxGraphSelectionModel.prototype.isSingleSelection = function()\n{\n\treturn this.singleSelection;\n};\n\n/**\n * Function: setSingleSelection\n *\n * Sets the <singleSelection> flag.\n * \n * Parameters:\n * \n * singleSelection - Boolean that specifies the new value for\n * <singleSelection>.\n */\nmxGraphSelectionModel.prototype.setSingleSelection = function(singleSelection)\n{\n\tthis.singleSelection = singleSelection;\n};\n\n/**\n * Function: isSelected\n *\n * Returns true if the given <mxCell> is selected.\n */\nmxGraphSelectionModel.prototype.isSelected = function(cell)\n{\n\tif (cell != null)\n\t{\n\t\treturn mxUtils.indexOf(this.cells, cell) >= 0;\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: isEmpty\n *\n * Returns true if no cells are currently selected.\n */\nmxGraphSelectionModel.prototype.isEmpty = function()\n{\n\treturn this.cells.length == 0;\n};\n\n/**\n * Function: clear\n *\n * Clears the selection and fires a <change> event if the selection was not\n * empty.\n */\nmxGraphSelectionModel.prototype.clear = function()\n{\n\tthis.changeSelection(null, this.cells);\n};\n\n/**\n * Function: setCell\n *\n * Selects the specified <mxCell> using <setCells>.\n * \n * Parameters:\n * \n * cell - <mxCell> to be selected.\n */\nmxGraphSelectionModel.prototype.setCell = function(cell)\n{\n\tif (cell != null)\n\t{\n\t\tthis.setCells([cell]);\n\t}\n};\n\n/**\n * Function: setCells\n *\n * Selects the given array of <mxCells> and fires a <change> event.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be selected.\n */\nmxGraphSelectionModel.prototype.setCells = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\tif (this.singleSelection)\n\t\t{\n\t\t\tcells = [this.getFirstSelectableCell(cells)];\n\t\t}\n\t\n\t\tvar tmp = [];\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (this.graph.isCellSelectable(cells[i]))\n\t\t\t{\n\t\t\t\ttmp.push(cells[i]);\n\t\t\t}\t\n\t\t}\n\n\t\tthis.changeSelection(tmp, this.cells);\n\t}\n};\n\n/**\n * Function: getFirstSelectableCell\n *\n * Returns the first selectable cell in the given array of cells.\n */\nmxGraphSelectionModel.prototype.getFirstSelectableCell = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (this.graph.isCellSelectable(cells[i]))\n\t\t\t{\n\t\t\t\treturn cells[i];\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: addCell\n * \n * Adds the given <mxCell> to the selection and fires a <select> event.\n * \n * Parameters:\n * \n * cell - <mxCell> to add to the selection.\n */\nmxGraphSelectionModel.prototype.addCell = function(cell)\n{\n\tif (cell != null)\n\t{\n\t\tthis.addCells([cell]);\n\t}\n};\n\n/**\n * Function: addCells\n * \n * Adds the given array of <mxCells> to the selection and fires a <select>\n * event.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to add to the selection.\n */\nmxGraphSelectionModel.prototype.addCells = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\tvar remove = null;\n\t\t\n\t\tif (this.singleSelection)\n\t\t{\n\t\t\tremove = this.cells;\n\t\t\tcells = [this.getFirstSelectableCell(cells)];\n\t\t}\n\n\t\tvar tmp = [];\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (!this.isSelected(cells[i]) &&\n\t\t\t\tthis.graph.isCellSelectable(cells[i]))\n\t\t\t{\n\t\t\t\ttmp.push(cells[i]);\n\t\t\t}\t\n\t\t}\n\n\t\tthis.changeSelection(tmp, remove);\n\t}\n};\n\n/**\n * Function: removeCell\n *\n * Removes the specified <mxCell> from the selection and fires a <select>\n * event for the remaining cells.\n * \n * Parameters:\n * \n * cell - <mxCell> to remove from the selection.\n */\nmxGraphSelectionModel.prototype.removeCell = function(cell)\n{\n\tif (cell != null)\n\t{\n\t\tthis.removeCells([cell]);\n\t}\n};\n\n/**\n * Function: removeCells\n */\nmxGraphSelectionModel.prototype.removeCells = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\tvar tmp = [];\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (this.isSelected(cells[i]))\n\t\t\t{\n\t\t\t\ttmp.push(cells[i]);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.changeSelection(null, tmp);\t\n\t}\n};\n\n/**\n * Function: changeSelection\n *\n * Adds/removes the specified arrays of <mxCell> to/from the selection.\n * \n * Parameters:\n * \n * added - Array of <mxCell> to add to the selection.\n * remove - Array of <mxCell> to remove from the selection.\n */\nmxGraphSelectionModel.prototype.changeSelection = function(added, removed)\n{\n\tif ((added != null &&\n\t\tadded.length > 0 &&\n\t\tadded[0] != null) ||\n\t\t(removed != null &&\n\t\tremoved.length > 0 &&\n\t\tremoved[0] != null))\n\t{\n\t\tvar change = new mxSelectionChange(this, added, removed);\n\t\tchange.execute();\n\t\tvar edit = new mxUndoableEdit(this, false);\n\t\tedit.add(change);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.UNDO, 'edit', edit));\n\t}\n};\n\n/**\n * Function: cellAdded\n *\n * Inner callback to add the specified <mxCell> to the selection. No event\n * is fired in this implementation.\n * \n * Paramters:\n * \n * cell - <mxCell> to add to the selection.\n */\nmxGraphSelectionModel.prototype.cellAdded = function(cell)\n{\n\tif (cell != null &&\n\t\t!this.isSelected(cell))\n\t{\n\t\tthis.cells.push(cell);\n\t}\n};\n\n/**\n * Function: cellRemoved\n *\n * Inner callback to remove the specified <mxCell> from the selection. No\n * event is fired in this implementation.\n * \n * Parameters:\n * \n * cell - <mxCell> to remove from the selection.\n */\nmxGraphSelectionModel.prototype.cellRemoved = function(cell)\n{\n\tif (cell != null)\n\t{\n\t\tvar index = mxUtils.indexOf(this.cells, cell);\n\t\t\n\t\tif (index >= 0)\n\t\t{\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n};\n\n/**\n * Class: mxSelectionChange\n *\n * Action to change the current root in a view.\n *\n * Constructor: mxCurrentRootChange\n *\n * Constructs a change of the current root in the given view.\n */\nfunction mxSelectionChange(selectionModel, added, removed)\n{\n\tthis.selectionModel = selectionModel;\n\tthis.added = (added != null) ? added.slice() : null;\n\tthis.removed = (removed != null) ? removed.slice() : null;\n};\n\n/**\n * Function: execute\n *\n * Changes the current root of the view.\n */\nmxSelectionChange.prototype.execute = function()\n{\n\tvar t0 = mxLog.enter('mxSelectionChange.execute');\n\twindow.status = mxResources.get(\n\t\tthis.selectionModel.updatingSelectionResource) ||\n\t\tthis.selectionModel.updatingSelectionResource;\n\n\tif (this.removed != null)\n\t{\n\t\tfor (var i = 0; i < this.removed.length; i++)\n\t\t{\n\t\t\tthis.selectionModel.cellRemoved(this.removed[i]);\n\t\t}\n\t}\n\n\tif (this.added != null)\n\t{\n\t\tfor (var i = 0; i < this.added.length; i++)\n\t\t{\n\t\t\tthis.selectionModel.cellAdded(this.added[i]);\n\t\t}\n\t}\n\t\n\tvar tmp = this.added;\n\tthis.added = this.removed;\n\tthis.removed = tmp;\n\n\twindow.status = mxResources.get(this.selectionModel.doneResource) ||\n\t\tthis.selectionModel.doneResource;\n\tmxLog.leave('mxSelectionChange.execute', t0);\n\t\n\tthis.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,\n\t\t\t'added', this.added, 'removed', this.removed));\n};\n\n__mxOutput.mxGraphSelectionModel = typeof mxGraphSelectionModel !== 'undefined' ? mxGraphSelectionModel : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCellEditor\n *\n * In-place editor for the graph. To control this editor, use\n * <mxGraph.invokesStopCellEditing>, <mxGraph.enterStopsCellEditing> and\n * <mxGraph.escapeEnabled>. If <mxGraph.enterStopsCellEditing> is true then\n * ctrl-enter or shift-enter can be used to create a linefeed. The F2 and\n * escape keys can always be used to stop editing.\n * \n * To customize the location of the textbox in the graph, override\n * <getEditorBounds> as follows:\n * \n * (code)\n * graph.cellEditor.getEditorBounds = function(state)\n * {\n *   var result = mxCellEditor.prototype.getEditorBounds.apply(this, arguments);\n *   \n *   if (this.graph.getModel().isEdge(state.cell))\n *   {\n *     result.x = state.getCenterX() - result.width / 2;\n *     result.y = state.getCenterY() - result.height / 2;\n *   }\n *   \n *   return result;\n * };\n * (end)\n * \n * Note that this hook is only called if <autoSize> is false. If <autoSize> is true,\n * then <mxShape.getLabelBounds> is used to compute the current bounds of the textbox.\n * \n * The textarea uses the mxCellEditor CSS class. You can modify this class in\n * your custom CSS. Note: You should modify the CSS after loading the client\n * in the page.\n *\n * Example:\n * \n * To only allow numeric input in the in-place editor, use the following code.\n *\n * (code)\n * var text = graph.cellEditor.textarea;\n * \n * mxEvent.addListener(text, 'keydown', function (evt)\n * {\n *   if (!(evt.keyCode >= 48 && evt.keyCode <= 57) &&\n *       !(evt.keyCode >= 96 && evt.keyCode <= 105))\n *   {\n *     mxEvent.consume(evt);\n *   }\n * }); \n * (end)\n * \n * Placeholder:\n * \n * To implement a placeholder for cells without a label, use the\n * <emptyLabelText> variable.\n * \n * Resize in Chrome:\n * \n * Resize of the textarea is disabled by default. If you want to enable\n * this feature extend <init> and set this.textarea.style.resize = ''.\n * \n * To start editing on a key press event, the container of the graph\n * should have focus or a focusable parent should be used to add the\n * key press handler as follows.\n * \n * (code)\n * mxEvent.addListener(graph.container, 'keypress', mxUtils.bind(this, function(evt)\n * {\n *   if (!graph.isEditing() && !graph.isSelectionEmpty() && evt.which !== 0 &&\n *       !mxEvent.isAltDown(evt) && !mxEvent.isControlDown(evt) && !mxEvent.isMetaDown(evt))\n *   {\n *     graph.startEditing();\n *     \n *     if (mxClient.IS_FF)\n *     {\n *       graph.cellEditor.textarea.value = String.fromCharCode(evt.which);\n *     }\n *   }\n * }));\n * (end)\n * \n * To allow focus for a DIV, and hence to receive key press events, some browsers\n * require it to have a valid tabindex attribute. In this case the following\n * code may be used to keep the container focused.\n * \n * (code)\n * var graphFireMouseEvent = graph.fireMouseEvent;\n * graph.fireMouseEvent = function(evtName, me, sender)\n * {\n *   if (evtName == mxEvent.MOUSE_DOWN)\n *   {\n *     this.container.focus();\n *   }\n *   \n *   graphFireMouseEvent.apply(this, arguments);\n * };\n * (end)\n *\n * Constructor: mxCellEditor\n *\n * Constructs a new in-place editor for the specified graph.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n */\nfunction mxCellEditor(graph)\n{\n\tthis.graph = graph;\n\t\n\t// Stops editing after zoom changes\n\tthis.zoomHandler = mxUtils.bind(this, function()\n\t{\n\t\tif (this.graph.isEditing())\n\t\t{\n\t\t\tthis.resize();\n\t\t}\n\t});\n\t\n\tthis.graph.view.addListener(mxEvent.SCALE, this.zoomHandler);\n\tthis.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE, this.zoomHandler);\n\t\n\t// Adds handling of deleted cells while editing\n\tthis.changeHandler = mxUtils.bind(this, function(sender)\n\t{\n\t\tif (this.editingCell != null && this.graph.getView().getState(this.editingCell) == null)\n\t\t{\n\t\t\tthis.stopEditing(true);\n\t\t}\n\t});\n\n\tthis.graph.getModel().addListener(mxEvent.CHANGE, this.changeHandler);\n};\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxCellEditor.prototype.graph = null;\n\n/**\n * Variable: textarea\n *\n * Holds the DIV that is used for text editing. Note that this may be null before the first\n * edit. Instantiated in <init>.\n */\nmxCellEditor.prototype.textarea = null;\n\n/**\n * Variable: editingCell\n * \n * Reference to the <mxCell> that is currently being edited.\n */\nmxCellEditor.prototype.editingCell = null;\n\n/**\n * Variable: trigger\n * \n * Reference to the event that was used to start editing.\n */\nmxCellEditor.prototype.trigger = null;\n\n/**\n * Variable: modified\n * \n * Specifies if the label has been modified.\n */\nmxCellEditor.prototype.modified = false;\n\n/**\n * Variable: autoSize\n * \n * Specifies if the textarea should be resized while the text is being edited.\n * Default is true.\n */\nmxCellEditor.prototype.autoSize = true;\n\n/**\n * Variable: selectText\n * \n * Specifies if the text should be selected when editing starts. Default is\n * true.\n */\nmxCellEditor.prototype.selectText = true;\n\n/**\n * Variable: emptyLabelText\n * \n * Text to be displayed for empty labels. Default is '' or '<br>' in Firefox as\n * a workaround for the missing cursor bug for empty content editable. This can\n * be set to eg. \"[Type Here]\" to easier visualize editing of empty labels. The\n * value is only displayed before the first keystroke and is never used as the\n * actual editing value.\n */\nmxCellEditor.prototype.emptyLabelText = (mxClient.IS_FF) ? '<br>' : '';\n\n/**\n * Variable: escapeCancelsEditing\n * \n * If true, pressing the escape key will stop editing and not accept the new\n * value. Change this to false to accept the new value on escape, and cancel\n * editing on Shift+Escape instead. Default is true.\n */\nmxCellEditor.prototype.escapeCancelsEditing = true;\n\n/**\n * Variable: textNode\n * \n * Reference to the label DOM node that has been hidden.\n */\nmxCellEditor.prototype.textNode = '';\n\n/**\n * Variable: zIndex\n * \n * Specifies the zIndex for the textarea. Default is 5.\n */\nmxCellEditor.prototype.zIndex = 5;\n\n/**\n * Variable: minResize\n * \n * Defines the minimum width and height to be used in <resize>. Default is 0x20px.\n */\nmxCellEditor.prototype.minResize = new mxRectangle(0, 20);\n\n/**\n * Variable: wordWrapPadding\n * \n * Correction factor for word wrapping width. Default is 2 in quirks, 0 in IE\n * 11 and 1 in all other browsers and modes.\n */\nmxCellEditor.prototype.wordWrapPadding = (mxClient.IS_QUIRKS) ? 2 : (!mxClient.IS_IE11) ? 1 : 0;\n\n/**\n * Variable: blurEnabled\n *\n * If <focusLost> should be called if <textarea> loses the focus. Default is false.\n */\nmxCellEditor.prototype.blurEnabled = false;\n\n/**\n * Variable: initialValue\n * \n * Holds the initial editing value to check if the current value was modified.\n */\nmxCellEditor.prototype.initialValue = null;\n\n/**\n * Variable: align\n * \n * Holds the current temporary horizontal alignment for the cell style. If this\n * is modified then the current text alignment is changed and the cell style is\n * updated when the value is applied.\n */\nmxCellEditor.prototype.align = null;\n\n/**\n * Function: init\n *\n * Creates the <textarea> and installs the event listeners. The key handler\n * updates the <modified> state.\n */\nmxCellEditor.prototype.init = function ()\n{\n\tthis.textarea = document.createElement('div');\n\tthis.textarea.className = 'mxCellEditor mxPlainTextEditor';\n\tthis.textarea.contentEditable = true;\n\t\n\t// Workaround for selection outside of DIV if height is 0\n\tif (mxClient.IS_GC)\n\t{\n\t\tthis.textarea.style.minHeight = '1em';\n\t}\n\n\tthis.textarea.style.position = ((this.isLegacyEditor())) ? 'absolute' : 'relative';\n\tthis.installListeners(this.textarea);\n};\n\n/**\n * Function: applyValue\n * \n * Called in <stopEditing> if cancel is false to invoke <mxGraph.labelChanged>.\n */\nmxCellEditor.prototype.applyValue = function(state, value)\n{\n\tthis.graph.labelChanged(state.cell, value, this.trigger);\n};\n\n/**\n * Function: setAlign\n * \n * Sets the temporary horizontal alignment for the current editing session.\n */\nmxCellEditor.prototype.setAlign = function (align)\n{\n\tif (this.textarea != null)\n\t{\n\t\tthis.textarea.style.textAlign = align;\n\t}\n\t\n\tthis.align = align;\n\tthis.resize();\n};\n\n/**\n * Function: getInitialValue\n * \n * Gets the initial editing value for the given cell.\n */\nmxCellEditor.prototype.getInitialValue = function(state, trigger)\n{\n\tvar result = mxUtils.htmlEntities(this.graph.getEditingValue(state.cell, trigger), false);\n\t\n    // Workaround for trailing line breaks being ignored in the editor\n\tif (!mxClient.IS_QUIRKS && document.documentMode != 8 && document.documentMode != 9 &&\n\t\tdocument.documentMode != 10)\n\t{\n\t\tresult = mxUtils.replaceTrailingNewlines(result, '<div><br></div>');\n\t}\n    \n    return result.replace(/\\n/g, '<br>');\n};\n\n/**\n * Function: getCurrentValue\n * \n * Returns the current editing value.\n */\nmxCellEditor.prototype.getCurrentValue = function(state)\n{\n\treturn mxUtils.extractTextWithWhitespace(this.textarea.childNodes);\n};\n\n/**\n * Function: isCancelEditingKeyEvent\n * \n * Returns true if <escapeCancelsEditing> is true and shift, control and meta\n * are not pressed.\n */\nmxCellEditor.prototype.isCancelEditingKeyEvent = function(evt)\n{\n\treturn this.escapeCancelsEditing || mxEvent.isShiftDown(evt) || mxEvent.isControlDown(evt) || mxEvent.isMetaDown(evt);\n};\n\n/**\n * Function: installListeners\n * \n * Installs listeners for focus, change and standard key event handling.\n */\nmxCellEditor.prototype.installListeners = function(elt)\n{\n\t// Applies value if text is dragged\n\t// LATER: Gesture mouse events ignored for starting move\n\tmxEvent.addListener(elt, 'dragstart', mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.graph.stopEditing(false);\n\t\tmxEvent.consume(evt);\n\t}));\n\n\t// Applies value if focus is lost\n\tmxEvent.addListener(elt, 'blur', mxUtils.bind(this, function(evt)\n\t{\n\t\tif (this.blurEnabled)\n\t\t{\n\t\t\tthis.focusLost(evt);\n\t\t}\n\t}));\n\n\t// Updates modified state and handles placeholder text\n\tmxEvent.addListener(elt, 'keydown', mxUtils.bind(this, function(evt)\n\t{\n\t\tif (!mxEvent.isConsumed(evt))\n\t\t{\n\t\t\tif (this.isStopEditingEvent(evt))\n\t\t\t{\n\t\t\t\tthis.graph.stopEditing(false);\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}\n\t\t\telse if (evt.keyCode == 27 /* Escape */)\n\t\t\t{\n\t\t\t\tthis.graph.stopEditing(this.isCancelEditingKeyEvent(evt));\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}\n\t\t}\n\t}));\n\n\t// Keypress only fires if printable key was pressed and handles removing the empty placeholder\n\tvar keypressHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tif (this.editingCell != null)\n\t\t{\n\t\t\t// Clears the initial empty label on the first keystroke\n\t\t\t// and workaround for FF which fires keypress for delete and backspace\n\t\t\tif (this.clearOnChange && elt.innerHTML == this.getEmptyLabelText() &&\n\t\t\t\t(!mxClient.IS_FF || (evt.keyCode != 8 /* Backspace */ && evt.keyCode != 46 /* Delete */)))\n\t\t\t{\n\t\t\t\tthis.clearOnChange = false;\n\t\t\t\telt.innerHTML = '';\n\t\t\t}\n\t\t}\n\t});\n\n\tmxEvent.addListener(elt, 'keypress', keypressHandler);\n\tmxEvent.addListener(elt, 'paste', keypressHandler);\n\t\n\t// Handler for updating the empty label text value after a change\n\tvar keyupHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tif (this.editingCell != null)\n\t\t{\n\t\t\t// Uses an optional text value for sempty labels which is cleared\n\t\t\t// when the first keystroke appears. This makes it easier to see\n\t\t\t// that a label is being edited even if the label is empty.\n\t\t\t// In Safari and FF, an empty text is represented by <BR> which isn't enough to force a valid size\n\t\t\tif (this.textarea.innerHTML.length == 0 || this.textarea.innerHTML == '<br>')\n\t\t\t{\n\t\t\t\tthis.textarea.innerHTML = this.getEmptyLabelText();\n\t\t\t\tthis.clearOnChange = this.textarea.innerHTML.length > 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.clearOnChange = false;\n\t\t\t}\n\t\t}\n\t});\n\n\tmxEvent.addListener(elt, (!mxClient.IS_IE11 && !mxClient.IS_IE) ? 'input' : 'keyup', keyupHandler);\n\tmxEvent.addListener(elt, 'cut', keyupHandler);\n\tmxEvent.addListener(elt, 'paste', keyupHandler);\n\n\t// Adds automatic resizing of the textbox while typing using input, keyup and/or DOM change events\n\tvar evtName = (!mxClient.IS_IE11 && !mxClient.IS_IE) ? 'input' : 'keydown';\n\t\n\tvar resizeHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tif (this.editingCell != null && this.autoSize && !mxEvent.isConsumed(evt))\n\t\t{\n\t\t\t// Asynchronous is needed for keydown and shows better results for input events overall\n\t\t\t// (ie non-blocking and cases where the offsetWidth/-Height was wrong at this time)\n\t\t\tif (this.resizeThread != null)\n\t\t\t{\n\t\t\t\twindow.clearTimeout(this.resizeThread);\n\t\t\t}\n\t\t\t\n\t\t\tthis.resizeThread = window.setTimeout(mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tthis.resizeThread = null;\n\t\t\t\tthis.resize();\n\t\t\t}), 0);\n\t\t}\n\t});\n\t\n\tmxEvent.addListener(elt, evtName, resizeHandler);\n\tmxEvent.addListener(window, 'resize', resizeHandler);\n\n\tif (document.documentMode >= 9)\n\t{\n\t\tmxEvent.addListener(elt, 'DOMNodeRemoved', resizeHandler);\n\t\tmxEvent.addListener(elt, 'DOMNodeInserted', resizeHandler);\n\t}\n\telse\n\t{\n\t\tmxEvent.addListener(elt, 'cut', resizeHandler);\n\t\tmxEvent.addListener(elt, 'paste', resizeHandler);\n\t}\n};\n\n/**\n * Function: isStopEditingEvent\n * \n * Returns true if the given keydown event should stop cell editing. This\n * returns true if F2 is pressed of if <mxGraph.enterStopsCellEditing> is true\n * and enter is pressed without control or shift.\n */\nmxCellEditor.prototype.isStopEditingEvent = function(evt)\n{\n\treturn evt.keyCode == 113 /* F2 */ || (this.graph.isEnterStopsCellEditing() &&\n\t\tevt.keyCode == 13 /* Enter */ && !mxEvent.isControlDown(evt) &&\n\t\t!mxEvent.isShiftDown(evt));\n};\n\n/**\n * Function: isEventSource\n * \n * Returns true if this editor is the source for the given native event.\n */\nmxCellEditor.prototype.isEventSource = function(evt)\n{\n\treturn mxEvent.getSource(evt) == this.textarea;\n};\n\n/**\n * Function: resize\n * \n * Returns <modified>.\n */\nmxCellEditor.prototype.resize = function()\n{\n\tvar state = this.graph.getView().getState(this.editingCell);\n\t\n\tif (state == null)\n\t{\n\t\tthis.stopEditing(true);\n\t}\n\telse if (this.textarea != null)\n\t{\n\t\tvar isEdge = this.graph.getModel().isEdge(state.cell);\n \t\tvar scale = this.graph.getView().scale;\n \t\tvar m = null;\n\t\t\n\t\tif (!this.autoSize || (state.style[mxConstants.STYLE_OVERFLOW] == 'fill'))\n\t\t{\n\t\t\t// Specifies the bounds of the editor box\n\t\t\tthis.bounds = this.getEditorBounds(state);\n\t\t\tthis.textarea.style.width = Math.round(this.bounds.width / scale) + 'px';\n\t\t\tthis.textarea.style.height = Math.round(this.bounds.height / scale) + 'px';\n\t\t\t\n\t\t\t// FIXME: Offset when scaled\n\t\t\tif (document.documentMode == 8 || mxClient.IS_QUIRKS)\n\t\t\t{\n\t\t\t\tthis.textarea.style.left = Math.round(this.bounds.x) + 'px';\n\t\t\t\tthis.textarea.style.top = Math.round(this.bounds.y) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.textarea.style.left = Math.max(0, Math.round(this.bounds.x + 1)) + 'px';\n\t\t\t\tthis.textarea.style.top = Math.max(0, Math.round(this.bounds.y + 1)) + 'px';\n\t\t\t}\n\t\t\t\n\t\t\t// Installs native word wrapping and avoids word wrap for empty label placeholder\n\t\t\tif (this.graph.isWrapping(state.cell) && (this.bounds.width >= 2 || this.bounds.height >= 2) &&\n\t\t\t\tthis.textarea.innerHTML != this.getEmptyLabelText())\n\t\t\t{\n\t\t\t\tthis.textarea.style.wordWrap = mxConstants.WORD_WRAP;\n\t\t\t\tthis.textarea.style.whiteSpace = 'normal';\n\t\t\t\t\n\t\t\t\tif (state.style[mxConstants.STYLE_OVERFLOW] != 'fill')\n\t\t\t\t{\n\t\t\t\t\tthis.textarea.style.width = Math.round(this.bounds.width / scale) + this.wordWrapPadding + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.textarea.style.whiteSpace = 'nowrap';\n\t\t\t\t\n\t\t\t\tif (state.style[mxConstants.STYLE_OVERFLOW] != 'fill')\n\t\t\t\t{\n\t\t\t\t\tthis.textarea.style.width = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t \t{\n\t \t\tvar lw = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_WIDTH, null);\n\t\t\tm = (state.text != null && this.align == null) ? state.text.margin : null;\n\t\t\t\n\t\t\tif (m == null)\n\t\t\t{\n\t\t\t\tm = mxUtils.getAlignmentAsPoint(this.align || mxUtils.getValue(state.style, mxConstants.STYLE_ALIGN, mxConstants.ALIGN_CENTER),\n\t\t\t\t\t\tmxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_ALIGN, mxConstants.ALIGN_MIDDLE));\n\t\t\t}\n\t\t\t\n\t \t\tif (isEdge)\n\t\t\t{\n\t\t\t\tthis.bounds = new mxRectangle(state.absoluteOffset.x, state.absoluteOffset.y, 0, 0);\n\t\t\t\t\n\t\t\t\tif (lw != null)\n\t\t\t \t{\n\t\t\t\t\tvar tmp = (parseFloat(lw) + 2) * scale;\n\t\t\t\t\tthis.bounds.width = tmp;\n\t\t\t\t\tthis.bounds.x += m.x * tmp;\n\t\t\t \t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar bds = mxRectangle.fromRectangle(state);\n\t\t\t\tvar hpos = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER);\n\t\t\t\tvar vpos = mxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE);\n\n\t\t\t\tbds = (state.shape != null && hpos == mxConstants.ALIGN_CENTER && vpos == mxConstants.ALIGN_MIDDLE) ? state.shape.getLabelBounds(bds) : bds;\n\t\t\t \t\n\t\t\t \tif (lw != null)\n\t\t\t \t{\n\t\t\t \t\tbds.width = parseFloat(lw) * scale;\n\t\t\t \t}\n\t\t\t \t\n\t\t\t \tif (!state.view.graph.cellRenderer.legacySpacing || state.style[mxConstants.STYLE_OVERFLOW] != 'width')\n\t\t\t \t{\n\t\t\t\t\tvar spacing = parseInt(state.style[mxConstants.STYLE_SPACING] || 2) * scale;\n\t\t\t\t\tvar spacingTop = (parseInt(state.style[mxConstants.STYLE_SPACING_TOP] || 0) + mxText.prototype.baseSpacingTop) * scale + spacing;\n\t\t\t\t\tvar spacingRight = (parseInt(state.style[mxConstants.STYLE_SPACING_RIGHT] || 0) + mxText.prototype.baseSpacingRight) * scale + spacing;\n\t\t\t\t\tvar spacingBottom = (parseInt(state.style[mxConstants.STYLE_SPACING_BOTTOM] || 0) + mxText.prototype.baseSpacingBottom) * scale + spacing;\n\t\t\t\t\tvar spacingLeft = (parseInt(state.style[mxConstants.STYLE_SPACING_LEFT] || 0) + mxText.prototype.baseSpacingLeft) * scale + spacing;\n\t\t\t\t\t\n\t\t\t\t\tvar hpos = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER);\n\t\t\t\t\tvar vpos = mxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE);\n\n\t\t\t\t\tbds = new mxRectangle(bds.x + spacingLeft, bds.y + spacingTop,\n\t\t\t\t\t\tbds.width - ((hpos == mxConstants.ALIGN_CENTER && lw == null) ? (spacingLeft + spacingRight) : 0),\n\t\t\t\t\t\tbds.height - ((vpos == mxConstants.ALIGN_MIDDLE) ? (spacingTop + spacingBottom) : 0));\n\t\t\t \t}\n\n\t\t\t\tthis.bounds = new mxRectangle(bds.x + state.absoluteOffset.x, bds.y + state.absoluteOffset.y, bds.width, bds.height);\n\t\t\t}\n\n\t\t\t// Needed for word wrap inside text blocks with oversize lines to match the final result where\n\t \t\t// the width of the longest line is used as the reference for text alignment in the cell\n\t \t\t// TODO: Fix word wrapping preview for edge labels in helloworld.html\n\t\t\tif (this.graph.isWrapping(state.cell) && (this.bounds.width >= 2 || this.bounds.height >= 2) &&\n\t\t\t\tthis.textarea.innerHTML != this.getEmptyLabelText())\n\t\t\t{\n\t\t\t\tthis.textarea.style.wordWrap = mxConstants.WORD_WRAP;\n\t\t\t\tthis.textarea.style.whiteSpace = 'normal';\n\t\t\t\t\n\t\t \t\t// Forces automatic reflow if text is removed from an oversize label and normal word wrap\n\t\t\t\tvar tmp = Math.round(this.bounds.width / ((document.documentMode == 8) ? scale : scale)) + this.wordWrapPadding;\n\n\t\t\t\tif (this.textarea.style.position != 'relative')\n\t\t\t\t{\n\t\t\t\t\tthis.textarea.style.width = tmp + 'px';\n\t\t\t\t\t\n\t\t\t\t\tif (this.textarea.scrollWidth > tmp)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.textarea.style.width = this.textarea.scrollWidth + 'px';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.textarea.style.maxWidth = tmp + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// KNOWN: Trailing cursor in IE9 quirks mode is not visible\n\t\t\t\tthis.textarea.style.whiteSpace = 'nowrap';\n\t\t\t\tthis.textarea.style.width = '';\n\t\t\t}\n\t\t\t\n\t\t\t// LATER: Keep in visible area, add fine tuning for pixel precision\n\t\t\t// Workaround for wrong measuring in IE8 standards\n\t\t\tif (document.documentMode == 8)\n\t\t\t{\n\t\t\t\tthis.textarea.style.zoom = '1';\n\t\t\t\tthis.textarea.style.height = 'auto';\n\t\t\t}\n\t\t\t\n\t\t\tvar ow = this.textarea.scrollWidth;\n\t\t\tvar oh = this.textarea.scrollHeight;\n\t\t\t\n\t\t\t// TODO: Update CSS width and height if smaller than minResize or remove minResize\n\t\t\t//if (this.minResize != null)\n\t\t\t//{\n\t\t\t//\tow = Math.max(ow, this.minResize.width);\n\t\t\t//\toh = Math.max(oh, this.minResize.height);\n\t\t\t//}\n\t\t\t\n\t\t\t// LATER: Keep in visible area, add fine tuning for pixel precision\n\t\t\tif (document.documentMode == 8)\n\t\t\t{\n\t\t\t\t// LATER: Scaled wrapping and position is wrong in IE8\n\t\t\t\tthis.textarea.style.left = Math.max(0, Math.ceil((this.bounds.x - m.x * (this.bounds.width - (ow + 1) * scale) + ow * (scale - 1) * 0 + (m.x + 0.5) * 2) / scale)) + 'px';\n\t\t\t\tthis.textarea.style.top = Math.max(0, Math.ceil((this.bounds.y - m.y * (this.bounds.height - (oh + 0.5) * scale) + oh * (scale - 1) * 0 + Math.abs(m.y + 0.5) * 1) / scale)) + 'px';\n\t\t\t\t// Workaround for wrong event handling width and height\n\t\t\t\tthis.textarea.style.width = Math.round(ow * scale) + 'px';\n\t\t\t\tthis.textarea.style.height = Math.round(oh * scale) + 'px';\n\t\t\t}\n\t\t\telse if (mxClient.IS_QUIRKS)\n\t\t\t{\t\t\t\n\t\t\t\tthis.textarea.style.left = Math.max(0, Math.ceil(this.bounds.x - m.x * (this.bounds.width - (ow + 1) * scale) + ow * (scale - 1) * 0 + (m.x + 0.5) * 2)) + 'px';\n\t\t\t\tthis.textarea.style.top = Math.max(0, Math.ceil(this.bounds.y - m.y * (this.bounds.height - (oh + 0.5) * scale) + oh * (scale - 1) * 0 + Math.abs(m.y + 0.5) * 1)) + 'px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.textarea.style.left = Math.max(0, Math.round(this.bounds.x - m.x * (this.bounds.width - 2)) + 1) + 'px';\n\t\t\t\tthis.textarea.style.top = Math.max(0, Math.round(this.bounds.y - m.y * (this.bounds.height - 4) + ((m.y == -1) ? 3 : 0)) + 1) + 'px';\n\t\t\t}\n\t \t}\n\n\t\tif (mxClient.IS_VML)\n\t\t{\n\t\t\tthis.textarea.style.zoom = scale;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmxUtils.setPrefixedStyle(this.textarea.style, 'transformOrigin', '0px 0px');\n\t\t\tmxUtils.setPrefixedStyle(this.textarea.style, 'transform',\n\t\t\t\t'scale(' + scale + ',' + scale + ')' + ((m == null) ? '' :\n\t\t\t\t' translate(' + (m.x * 100) + '%,' + (m.y * 100) + '%)'));\n\t\t}\n\t}\n};\n\n/**\n * Function: focusLost\n *\n * Called if the textarea has lost focus.\n */\nmxCellEditor.prototype.focusLost = function()\n{\n\tthis.stopEditing(!this.graph.isInvokesStopCellEditing());\n};\n\n/**\n * Function: getBackgroundColor\n * \n * Returns the background color for the in-place editor. This implementation\n * always returns null.\n */\nmxCellEditor.prototype.getBackgroundColor = function(state)\n{\n\treturn null;\n};\n\n/**\n * Function: isLegacyEditor\n * \n * Returns true if max-width is not supported or if the SVG root element in\n * in the graph does not have CSS position absolute. In these cases the text\n * editor must use CSS position absolute to avoid an offset but it will have\n * a less accurate line wrapping width during the text editing preview. This\n * implementation returns true for IE8- and quirks mode or if the CSS position\n * of the SVG element is not absolute.\n */\nmxCellEditor.prototype.isLegacyEditor = function()\n{\n\tif (mxClient.IS_VML)\n\t{\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\tvar absoluteRoot = false;\n\t\t\n\t\tif (mxClient.IS_SVG)\n\t\t{\n\t\t\tvar root = this.graph.view.getDrawPane().ownerSVGElement;\n\t\t\t\n\t\t\tif (root != null)\n\t\t\t{\n\t\t\t\tvar css = mxUtils.getCurrentStyle(root);\n\t\t\t\t\n\t\t\t\tif (css != null)\n\t\t\t\t{\t\t\t\t\n\t\t\t\t\tabsoluteRoot = css.position == 'absolute';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn !absoluteRoot;\n\t}\n};\n\n/**\n * Function: startEditing\n *\n * Starts the editor for the given cell.\n * \n * Parameters:\n * \n * cell - <mxCell> to start editing.\n * trigger - Optional mouse event that triggered the editor.\n */\nmxCellEditor.prototype.startEditing = function(cell, trigger)\n{\n\tthis.stopEditing(true);\n\tthis.align = null;\n\t\n\t// Creates new textarea instance\n\tif (this.textarea == null)\n\t{\n\t\tthis.init();\n\t}\n\t\n\tif (this.graph.tooltipHandler != null)\n\t{\n\t\tthis.graph.tooltipHandler.hideTooltip();\n\t}\n\t\n\tvar state = this.graph.getView().getState(cell);\n\t\n\tif (state != null)\n\t{\n\t\t// Configures the style of the in-place editor\n\t\tvar scale = this.graph.getView().scale;\n\t\tvar size = mxUtils.getValue(state.style, mxConstants.STYLE_FONTSIZE, mxConstants.DEFAULT_FONTSIZE);\n\t\tvar family = mxUtils.getValue(state.style, mxConstants.STYLE_FONTFAMILY, mxConstants.DEFAULT_FONTFAMILY);\n\t\tvar color = mxUtils.getValue(state.style, mxConstants.STYLE_FONTCOLOR, 'black');\n\t\tvar align = mxUtils.getValue(state.style, mxConstants.STYLE_ALIGN, mxConstants.ALIGN_LEFT);\n\t\tvar bold = (mxUtils.getValue(state.style, mxConstants.STYLE_FONTSTYLE, 0) &\n\t\t\t\tmxConstants.FONT_BOLD) == mxConstants.FONT_BOLD;\n\t\tvar italic = (mxUtils.getValue(state.style, mxConstants.STYLE_FONTSTYLE, 0) &\n\t\t\t\tmxConstants.FONT_ITALIC) == mxConstants.FONT_ITALIC;\n\t\tvar txtDecor = [];\n\t\t\n\t\tif ((mxUtils.getValue(state.style, mxConstants.STYLE_FONTSTYLE, 0) &\n\t\t\t\tmxConstants.FONT_UNDERLINE) == mxConstants.FONT_UNDERLINE)\n\t\t{\n\t\t\ttxtDecor.push('underline');\n\t\t}\n\t\t\n\t\tif ((mxUtils.getValue(state.style, mxConstants.STYLE_FONTSTYLE, 0) &\n\t\t\t\tmxConstants.FONT_STRIKETHROUGH) == mxConstants.FONT_STRIKETHROUGH)\n\t\t{\n\t\t\ttxtDecor.push('line-through');\n\t\t}\n\t\t\n\t\tthis.textarea.style.lineHeight = (mxConstants.ABSOLUTE_LINE_HEIGHT) ? Math.round(size * mxConstants.LINE_HEIGHT) + 'px' : mxConstants.LINE_HEIGHT;\n\t\tthis.textarea.style.backgroundColor = this.getBackgroundColor(state);\n\t\tthis.textarea.style.textDecoration = txtDecor.join(' ');\n\t\tthis.textarea.style.fontWeight = (bold) ? 'bold' : 'normal';\n\t\tthis.textarea.style.fontStyle = (italic) ? 'italic' : '';\n\t\tthis.textarea.style.fontSize = Math.round(size) + 'px';\n\t\tthis.textarea.style.zIndex = this.zIndex;\n\t\tthis.textarea.style.fontFamily = family;\n\t\tthis.textarea.style.textAlign = align;\n\t\tthis.textarea.style.outline = 'none';\n\t\tthis.textarea.style.color = color;\n\t\t\n\t\tvar dir = this.textDirection = mxUtils.getValue(state.style, mxConstants.STYLE_TEXT_DIRECTION, mxConstants.DEFAULT_TEXT_DIRECTION);\n\t\t\n\t\tif (dir == mxConstants.TEXT_DIRECTION_AUTO)\n\t\t{\n\t\t\tif (state != null && state.text != null && state.text.dialect != mxConstants.DIALECT_STRICTHTML &&\n\t\t\t\t!mxUtils.isNode(state.text.value))\n\t\t\t{\n\t\t\t\tdir = state.text.getAutoDirection();\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (dir == mxConstants.TEXT_DIRECTION_LTR || dir == mxConstants.TEXT_DIRECTION_RTL)\n\t\t{\n\t\t\tthis.textarea.setAttribute('dir', dir);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.textarea.removeAttribute('dir');\n\t\t}\n\n\t\t// Sets the initial editing value\n\t\tthis.textarea.innerHTML = this.getInitialValue(state, trigger) || '';\n\t\tthis.initialValue = this.textarea.innerHTML;\n\n\t\t// Uses an optional text value for empty labels which is cleared\n\t\t// when the first keystroke appears. This makes it easier to see\n\t\t// that a label is being edited even if the label is empty.\n\t\tif (this.textarea.innerHTML.length == 0 || this.textarea.innerHTML == '<br>')\n\t\t{\n\t\t\tthis.textarea.innerHTML = this.getEmptyLabelText();\n\t\t\tthis.clearOnChange = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.clearOnChange = this.textarea.innerHTML == this.getEmptyLabelText();\n\t\t}\n\n\t\tthis.graph.container.appendChild(this.textarea);\n\t\t\n\t\t// Update this after firing all potential events that could update the cleanOnChange flag\n\t\tthis.editingCell = cell;\n\t\tthis.trigger = trigger;\n\t\tthis.textNode = null;\n\n\t\tif (state.text != null && this.isHideLabel(state))\n\t\t{\n\t\t\tthis.textNode = state.text.node;\n\t\t\tthis.textNode.style.visibility = 'hidden';\n\t\t}\n\n\t\t// Workaround for initial offsetHeight not ready for heading in markup\n\t\tif (this.autoSize && (this.graph.model.isEdge(state.cell) || state.style[mxConstants.STYLE_OVERFLOW] != 'fill'))\n\t\t{\n\t\t\twindow.setTimeout(mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tthis.resize();\n\t\t\t}), 0);\n\t\t}\n\t\t\n\t\tthis.resize();\n\t\t\n\t\t// Workaround for NS_ERROR_FAILURE in FF\n\t\ttry\n\t\t{\n\t\t\t// Prefers blinking cursor over no selected text if empty\n\t\t\tthis.textarea.focus();\n\t\t\t\n\t\t\tif (this.isSelectText() && this.textarea.innerHTML.length > 0 &&\n\t\t\t\t(this.textarea.innerHTML != this.getEmptyLabelText() || !this.clearOnChange))\n\t\t\t{\n\t\t\t\tdocument.execCommand('selectAll', false, null);\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\t// ignore\n\t\t}\n\t}\n};\n\n/**\n * Function: isSelectText\n * \n * Returns <selectText>.\n */\nmxCellEditor.prototype.isSelectText = function()\n{\n\treturn this.selectText;\n};\n\n/**\n * Function: clearSelection\n * \n * Clears the selection.\n */\nmxCellEditor.prototype.clearSelection = function()\n{\n\tvar selection = null;\n\t\n\tif (window.getSelection)\n\t{\n\t\tselection = window.getSelection();\n\t}\n\telse if (document.selection)\n\t{\n\t\tselection = document.selection;\n\t}\n\t\n\tif (selection != null)\n\t{\n\t\tif (selection.empty)\n\t\t{\n\t\t\tselection.empty();\n\t\t}\n\t\telse if (selection.removeAllRanges)\n\t\t{\n\t\t\tselection.removeAllRanges();\n\t\t}\n\t}\n};\n\n/**\n * Function: stopEditing\n *\n * Stops the editor and applies the value if cancel is false.\n */\nmxCellEditor.prototype.stopEditing = function(cancel)\n{\n\tcancel = cancel || false;\n\t\n\tif (this.editingCell != null)\n\t{\n\t\tif (this.textNode != null)\n\t\t{\n\t\t\tthis.textNode.style.visibility = 'visible';\n\t\t\tthis.textNode = null;\n\t\t}\n\n\t\tvar state = (!cancel) ? this.graph.view.getState(this.editingCell) : null;\n\n\t\tvar initial = this.initialValue;\n\t\tthis.initialValue = null;\n\t\tthis.editingCell = null;\n\t\tthis.trigger = null;\n\t\tthis.bounds = null;\n\t\tthis.textarea.blur();\n\t\tthis.clearSelection();\n\t\t\n\t\tif (this.textarea.parentNode != null)\n\t\t{\n\t\t\tthis.textarea.parentNode.removeChild(this.textarea);\n\t\t}\n\t\t\n\t\tif (this.clearOnChange && this.textarea.innerHTML == this.getEmptyLabelText())\n\t\t{\n\t\t\tthis.textarea.innerHTML = '';\n\t\t\tthis.clearOnChange = false;\n\t\t}\n\n\t\tif (state != null && (this.textarea.innerHTML != initial || this.align != null))\n\t\t{\n\t\t\tthis.prepareTextarea();\n\t\t\tvar value = this.getCurrentValue(state);\n\t\t\t\n\t\t\tthis.graph.getModel().beginUpdate();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif (value != null)\n\t\t\t\t{\n\t\t\t\t\tthis.applyValue(state, value);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.align != null)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.setCellStyles(mxConstants.STYLE_ALIGN, this.align, [state.cell]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.graph.getModel().endUpdate();\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Forces new instance on next edit for undo history reset\n\t\tmxEvent.release(this.textarea);\n\t\tthis.textarea = null;\n\t\tthis.align = null;\n\t}\n};\n\n/**\n * Function: prepareTextarea\n * \n * Prepares the textarea for getting its value in <stopEditing>.\n * This implementation removes the extra trailing linefeed in Firefox.\n */\nmxCellEditor.prototype.prepareTextarea = function()\n{\n\tif (this.textarea.lastChild != null &&\n\t\tthis.textarea.lastChild.nodeName == 'BR')\n\t{\n\t\tthis.textarea.removeChild(this.textarea.lastChild);\n\t}\n};\n\n/**\n * Function: isHideLabel\n * \n * Returns true if the label should be hidden while the cell is being\n * edited.\n */\nmxCellEditor.prototype.isHideLabel = function(state)\n{\n\treturn true;\n};\n\n/**\n * Function: getMinimumSize\n * \n * Returns the minimum width and height for editing the given state.\n */\nmxCellEditor.prototype.getMinimumSize = function(state)\n{\n\tvar scale = this.graph.getView().scale;\n\t\n\treturn new mxRectangle(0, 0, (state.text == null) ? 30 : state.text.size * scale + 20,\n\t\t\t(this.textarea.style.textAlign == 'left') ? 120 : 40);\n};\n\n/**\n * Function: getEditorBounds\n * \n * Returns the <mxRectangle> that defines the bounds of the editor.\n */\nmxCellEditor.prototype.getEditorBounds = function(state)\n{\n\tvar isEdge = this.graph.getModel().isEdge(state.cell);\n\tvar scale = this.graph.getView().scale;\n\tvar minSize = this.getMinimumSize(state);\n\tvar minWidth = minSize.width;\n \tvar minHeight = minSize.height;\n \tvar result = null;\n \t\n \tif (!isEdge && state.view.graph.cellRenderer.legacySpacing && state.style[mxConstants.STYLE_OVERFLOW] == 'fill')\n \t{\n \t\tresult = state.shape.getLabelBounds(mxRectangle.fromRectangle(state));\n \t}\n \telse\n \t{\n\t\tvar spacing = parseInt(state.style[mxConstants.STYLE_SPACING] || 0) * scale;\n\t\tvar spacingTop = (parseInt(state.style[mxConstants.STYLE_SPACING_TOP] || 0) + mxText.prototype.baseSpacingTop) * scale + spacing;\n\t\tvar spacingRight = (parseInt(state.style[mxConstants.STYLE_SPACING_RIGHT] || 0) + mxText.prototype.baseSpacingRight) * scale + spacing;\n\t\tvar spacingBottom = (parseInt(state.style[mxConstants.STYLE_SPACING_BOTTOM] || 0) + mxText.prototype.baseSpacingBottom) * scale + spacing;\n\t\tvar spacingLeft = (parseInt(state.style[mxConstants.STYLE_SPACING_LEFT] || 0) + mxText.prototype.baseSpacingLeft) * scale + spacing;\n\t\n\t \tresult = new mxRectangle(state.x, state.y,\n\t \t\t Math.max(minWidth, state.width - spacingLeft - spacingRight),\n\t \t\t Math.max(minHeight, state.height - spacingTop - spacingBottom));\n\t\tvar hpos = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER);\n\t\tvar vpos = mxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE);\n\t\t\n\t\tresult = (state.shape != null && hpos == mxConstants.ALIGN_CENTER && vpos == mxConstants.ALIGN_MIDDLE) ? state.shape.getLabelBounds(result) : result;\n\t\n\t\tif (isEdge)\n\t\t{\n\t\t\tresult.x = state.absoluteOffset.x;\n\t\t\tresult.y = state.absoluteOffset.y;\n\t\n\t\t\tif (state.text != null && state.text.boundingBox != null)\n\t\t\t{\n\t\t\t\t// Workaround for label containing just spaces in which case\n\t\t\t\t// the bounding box location contains negative numbers \n\t\t\t\tif (state.text.boundingBox.x > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.x = state.text.boundingBox.x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (state.text.boundingBox.y > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.y = state.text.boundingBox.y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (state.text != null && state.text.boundingBox != null)\n\t\t{\n\t\t\tresult.x = Math.min(result.x, state.text.boundingBox.x);\n\t\t\tresult.y = Math.min(result.y, state.text.boundingBox.y);\n\t\t}\n\t\n\t\tresult.x += spacingLeft;\n\t\tresult.y += spacingTop;\n\t\n\t\tif (state.text != null && state.text.boundingBox != null)\n\t\t{\n\t\t\tif (!isEdge)\n\t\t\t{\n\t\t\t\tresult.width = Math.max(result.width, state.text.boundingBox.width);\n\t\t\t\tresult.height = Math.max(result.height, state.text.boundingBox.height);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.width = Math.max(minWidth, state.text.boundingBox.width);\n\t\t\t\tresult.height = Math.max(minHeight, state.text.boundingBox.height);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Applies the horizontal and vertical label positions\n\t\tif (this.graph.getModel().isVertex(state.cell))\n\t\t{\n\t\t\tvar horizontal = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER);\n\t\n\t\t\tif (horizontal == mxConstants.ALIGN_LEFT)\n\t\t\t{\n\t\t\t\tresult.x -= state.width;\n\t\t\t}\n\t\t\telse if (horizontal == mxConstants.ALIGN_RIGHT)\n\t\t\t{\n\t\t\t\tresult.x += state.width;\n\t\t\t}\n\t\n\t\t\tvar vertical = mxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE);\n\t\n\t\t\tif (vertical == mxConstants.ALIGN_TOP)\n\t\t\t{\n\t\t\t\tresult.y -= state.height;\n\t\t\t}\n\t\t\telse if (vertical == mxConstants.ALIGN_BOTTOM)\n\t\t\t{\n\t\t\t\tresult.y += state.height;\n\t\t\t}\n\t\t}\n \t}\n \t\n \treturn new mxRectangle(Math.round(result.x), Math.round(result.y), Math.round(result.width), Math.round(result.height));\n};\n\n/**\n * Function: getEmptyLabelText\n *\n * Returns the initial label value to be used of the label of the given\n * cell is empty. This label is displayed and cleared on the first keystroke.\n * This implementation returns <emptyLabelText>.\n * \n * Parameters:\n * \n * cell - <mxCell> for which a text for an empty editing box should be\n * returned.\n */\nmxCellEditor.prototype.getEmptyLabelText = function (cell)\n{\n\treturn this.emptyLabelText;\n};\n\n/**\n * Function: getEditingCell\n *\n * Returns the cell that is currently being edited or null if no cell is\n * being edited.\n */\nmxCellEditor.prototype.getEditingCell = function ()\n{\n\treturn this.editingCell;\n};\n\n/**\n * Function: destroy\n *\n * Destroys the editor and removes all associated resources.\n */\nmxCellEditor.prototype.destroy = function ()\n{\n\tif (this.textarea != null)\n\t{\n\t\tmxEvent.release(this.textarea);\n\t\t\n\t\tif (this.textarea.parentNode != null)\n\t\t{\n\t\t\tthis.textarea.parentNode.removeChild(this.textarea);\n\t\t}\n\t\t\n\t\tthis.textarea = null;\n\n\t}\n\t\t\t\n\tif (this.changeHandler != null)\n\t{\n\t\tthis.graph.getModel().removeListener(this.changeHandler);\n\t\tthis.changeHandler = null;\n\t}\n\n\tif (this.zoomHandler)\n\t{\n\t\tthis.graph.view.removeListener(this.zoomHandler);\n\t\tthis.zoomHandler = null;\n\t}\n};\n\n__mxOutput.mxCellEditor = typeof mxCellEditor !== 'undefined' ? mxCellEditor : undefined;\n\n/**\n * Copyright (c) 2006-2017, JGraph Ltd\n * Copyright (c) 2006-2017, Gaudenz Alder\n */\n/**\n * Class: mxCellRenderer\n * \n * Renders cells into a document object model. The <defaultShapes> is a global\n * map of shapename, constructor pairs that is used in all instances. You can\n * get a list of all available shape names using the following code.\n * \n * In general the cell renderer is in charge of creating, redrawing and\n * destroying the shape and label associated with a cell state, as well as\n * some other graphical objects, namely controls and overlays. The shape\n * hieararchy in the display (ie. the hierarchy in which the DOM nodes\n * appear in the document) does not reflect the cell hierarchy. The shapes\n * are a (flat) sequence of shapes and labels inside the draw pane of the\n * graph view, with some exceptions, namely the HTML labels being placed\n * directly inside the graph container for certain browsers.\n * \n * (code)\n * mxLog.show();\n * for (var i in mxCellRenderer.defaultShapes)\n * {\n *   mxLog.debug(i);\n * }\n * (end)\n *\n * Constructor: mxCellRenderer\n * \n * Constructs a new cell renderer with the following built-in shapes:\n * arrow, rectangle, ellipse, rhombus, image, line, label, cylinder,\n * swimlane, connector, actor and cloud.\n */\nfunction mxCellRenderer() { };\n\n/**\n * Variable: defaultShapes\n * \n * Static array that contains the globally registered shapes which are\n * known to all instances of this class. For adding new shapes you should\n * use the static <mxCellRenderer.registerShape> function.\n */\nmxCellRenderer.defaultShapes = new Object();\n\n/**\n * Variable: defaultEdgeShape\n * \n * Defines the default shape for edges. Default is <mxConnector>.\n */\nmxCellRenderer.prototype.defaultEdgeShape = mxConnector;\n\n/**\n * Variable: defaultVertexShape\n * \n * Defines the default shape for vertices. Default is <mxRectangleShape>.\n */\nmxCellRenderer.prototype.defaultVertexShape = mxRectangleShape;\n\n/**\n * Variable: defaultTextShape\n * \n * Defines the default shape for labels. Default is <mxText>.\n */\nmxCellRenderer.prototype.defaultTextShape = mxText;\n\n/**\n * Variable: legacyControlPosition\n * \n * Specifies if the folding icon should ignore the horizontal\n * orientation of a swimlane. Default is true.\n */\nmxCellRenderer.prototype.legacyControlPosition = true;\n\n/**\n * Variable: legacySpacing\n * \n * Specifies if spacing and label position should be ignored if overflow is\n * fill or width. Default is true for backwards compatiblity.\n */\nmxCellRenderer.prototype.legacySpacing = true;\n\n/**\n * Variable: antiAlias\n * \n * Anti-aliasing option for new shapes. Default is true.\n */\nmxCellRenderer.prototype.antiAlias = true;\n\n/**\n * Variable: minSvgStrokeWidth\n * \n * Minimum stroke width for SVG output.\n */\nmxCellRenderer.prototype.minSvgStrokeWidth = 1;\n\n/**\n * Variable: forceControlClickHandler\n * \n * Specifies if the enabled state of the graph should be ignored in the control\n * click handler (to allow folding in disabled graphs). Default is false.\n */\nmxCellRenderer.prototype.forceControlClickHandler = false;\n\n/**\n * Function: registerShape\n * \n * Registers the given constructor under the specified key in this instance\n * of the renderer.\n * \n * Example:\n * \n * (code)\n * mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE, mxRectangleShape);\n * (end)\n * \n * Parameters:\n * \n * key - String representing the shape name.\n * shape - Constructor of the <mxShape> subclass.\n */\nmxCellRenderer.registerShape = function(key, shape)\n{\n\tmxCellRenderer.defaultShapes[key] = shape;\n};\n\n// Adds default shapes into the default shapes array\nmxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE, mxRectangleShape);\nmxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE, mxEllipse);\nmxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS, mxRhombus);\nmxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER, mxCylinder);\nmxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR, mxConnector);\nmxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR, mxActor);\nmxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE, mxTriangle);\nmxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON, mxHexagon);\nmxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD, mxCloud);\nmxCellRenderer.registerShape(mxConstants.SHAPE_LINE, mxLine);\nmxCellRenderer.registerShape(mxConstants.SHAPE_ARROW, mxArrow);\nmxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR, mxArrowConnector);\nmxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE, mxDoubleEllipse);\nmxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE, mxSwimlane);\nmxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE, mxImageShape);\nmxCellRenderer.registerShape(mxConstants.SHAPE_LABEL, mxLabel);\n\n/**\n * Function: initializeShape\n * \n * Initializes the shape in the given state by calling its init method with\n * the correct container after configuring it using <configureShape>.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the shape should be initialized.\n */\nmxCellRenderer.prototype.initializeShape = function(state)\n{\n\tstate.shape.dialect = state.view.graph.dialect;\n\tthis.configureShape(state);\n\tstate.shape.init(state.view.getDrawPane());\n};\n\n/**\n * Function: createShape\n * \n * Creates and returns the shape for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the shape should be created.\n */\nmxCellRenderer.prototype.createShape = function(state)\n{\n\tvar shape = null;\n\t\n\tif (state.style != null)\n\t{\n\t\t// Checks if there is a stencil for the name and creates\n\t\t// a shape instance for the stencil if one exists\n\t\tvar stencil = mxStencilRegistry.getStencil(state.style[mxConstants.STYLE_SHAPE]);\n\t\t\n\t\tif (stencil != null)\n\t\t{\n\t\t\tshape = new mxShape(stencil);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar ctor = this.getShapeConstructor(state);\n\t\t\tshape = new ctor();\n\t\t}\n\t}\n\t\n\treturn shape;\n};\n\n/**\n * Function: createIndicatorShape\n * \n * Creates the indicator shape for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the indicator shape should be created.\n */\nmxCellRenderer.prototype.createIndicatorShape = function(state)\n{\n\tstate.shape.indicatorShape = this.getShape(state.view.graph.getIndicatorShape(state));\n};\n\n/**\n * Function: getShape\n * \n * Returns the shape for the given name from <defaultShapes>.\n */\nmxCellRenderer.prototype.getShape = function(name)\n{\n\treturn (name != null) ? mxCellRenderer.defaultShapes[name] : null;\n};\n\n/**\n * Function: getShapeConstructor\n * \n * Returns the constructor to be used for creating the shape.\n */\nmxCellRenderer.prototype.getShapeConstructor = function(state)\n{\n\tvar ctor = this.getShape(state.style[mxConstants.STYLE_SHAPE]);\n\t\n\tif (ctor == null)\n\t{\n\t\tctor = (state.view.graph.getModel().isEdge(state.cell)) ?\n\t\t\tthis.defaultEdgeShape : this.defaultVertexShape;\n\t}\n\t\n\treturn ctor;\n};\n\n/**\n * Function: configureShape\n * \n * Configures the shape for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the shape should be configured.\n */\nmxCellRenderer.prototype.configureShape = function(state)\n{\n\tstate.shape.apply(state);\n\tstate.shape.image = state.view.graph.getImage(state);\n\tstate.shape.indicatorColor = state.view.graph.getIndicatorColor(state);\n\tstate.shape.indicatorStrokeColor = state.style[mxConstants.STYLE_INDICATOR_STROKECOLOR];\n\tstate.shape.indicatorGradientColor = state.view.graph.getIndicatorGradientColor(state);\n\tstate.shape.indicatorDirection = state.style[mxConstants.STYLE_INDICATOR_DIRECTION];\n\tstate.shape.indicatorImage = state.view.graph.getIndicatorImage(state);\n\n\tthis.postConfigureShape(state);\n};\n\n/**\n * Function: postConfigureShape\n * \n * Replaces any reserved words used for attributes, eg. inherit,\n * indicated or swimlane for colors in the shape for the given state.\n * This implementation resolves these keywords on the fill, stroke\n * and gradient color keys.\n */\nmxCellRenderer.prototype.postConfigureShape = function(state)\n{\n\tif (state.shape != null)\n\t{\n\t\tthis.resolveColor(state, 'indicatorGradientColor', mxConstants.STYLE_GRADIENTCOLOR);\n\t\tthis.resolveColor(state, 'indicatorColor', mxConstants.STYLE_FILLCOLOR);\n\t\tthis.resolveColor(state, 'gradient', mxConstants.STYLE_GRADIENTCOLOR);\n\t\tthis.resolveColor(state, 'stroke', mxConstants.STYLE_STROKECOLOR);\n\t\tthis.resolveColor(state, 'fill', mxConstants.STYLE_FILLCOLOR);\n\t}\n};\n\n/**\n * Function: checkPlaceholderStyles\n * \n * Checks if the style of the given <mxCellState> contains 'inherit',\n * 'indicated' or 'swimlane' for colors that support those keywords.\n */\nmxCellRenderer.prototype.checkPlaceholderStyles = function(state)\n{\n\t// LATER: Check if the color has actually changed\n\tif (state.style != null)\n\t{\n\t\tvar values = ['inherit', 'swimlane', 'indicated'];\n\t\tvar styles = [mxConstants.STYLE_FILLCOLOR, mxConstants.STYLE_STROKECOLOR,\n\t\t\tmxConstants.STYLE_GRADIENTCOLOR, mxConstants.STYLE_FONTCOLOR];\n\t\t\n\t\tfor (var i = 0; i < styles.length; i++)\n\t\t{\n\t\t\tif (mxUtils.indexOf(values, state.style[styles[i]]) >= 0)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: resolveColor\n * \n * Resolves special keywords 'inherit', 'indicated' and 'swimlane' and sets\n * the respective color on the shape.\n */\nmxCellRenderer.prototype.resolveColor = function(state, field, key)\n{\n\tvar shape = (key == mxConstants.STYLE_FONTCOLOR) ?\n\t\tstate.text : state.shape;\n\t\n\tif (shape != null)\n\t{\n\t\tvar graph = state.view.graph;\n\t\tvar value = shape[field];\n\t\tvar referenced = null;\n\t\t\n\t\tif (value == 'inherit')\n\t\t{\n\t\t\treferenced = graph.model.getParent(state.cell);\n\t\t}\n\t\telse if (value == 'swimlane')\n\t\t{\n\t\t\tshape[field] = (key == mxConstants.STYLE_STROKECOLOR ||\n\t\t\t\tkey == mxConstants.STYLE_FONTCOLOR) ?\n\t\t\t\t'#000000' : '#ffffff';\n\t\t\t\n\t\t\tif (graph.model.getTerminal(state.cell, false) != null)\n\t\t\t{\n\t\t\t\treferenced = graph.model.getTerminal(state.cell, false);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treferenced = state.cell;\n\t\t\t}\n\t\t\t\n\t\t\treferenced = graph.getSwimlane(referenced);\n\t\t\tkey = graph.swimlaneIndicatorColorAttribute;\n\t\t}\n\t\telse if (value == 'indicated' && state.shape != null)\n\t\t{\n\t\t\tshape[field] = state.shape.indicatorColor;\n\t\t}\n\t\telse if (key != mxConstants.STYLE_FILLCOLOR &&\n\t\t\tvalue == mxConstants.STYLE_FILLCOLOR &&\n\t\t\tstate.shape != null)\n\t\t{\n\t\t\tshape[field] = state.style[mxConstants.STYLE_FILLCOLOR];\n\t\t}\n\t\telse if (key != mxConstants.STYLE_STROKECOLOR &&\n\t\t\tvalue == mxConstants.STYLE_STROKECOLOR &&\n\t\t\tstate.shape != null)\n\t\t{\n\t\t\tshape[field] = state.style[mxConstants.STYLE_STROKECOLOR];\n\t\t}\n\t\n\t\tif (referenced != null)\n\t\t{\n\t\t\tvar rstate = graph.getView().getState(referenced);\n\t\t\tshape[field] = null;\n\t\t\t\n\t\t\tif (rstate != null)\n\t\t\t{\n\t\t\t\tvar rshape = (key == mxConstants.STYLE_FONTCOLOR) ? rstate.text : rstate.shape;\n\t\t\t\t\n\t\t\t\tif (rshape != null && field != 'indicatorColor')\n\t\t\t\t{\n\t\t\t\t\tshape[field] = rshape[field];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tshape[field] = rstate.style[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: getLabelValue\n * \n * Returns the value to be used for the label.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the label should be created.\n */\nmxCellRenderer.prototype.getLabelValue = function(state)\n{\n\treturn state.view.graph.getLabel(state.cell);\n};\n\n/**\n * Function: createLabel\n * \n * Creates the label for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the label should be created.\n */\nmxCellRenderer.prototype.createLabel = function(state, value)\n{\n\tvar graph = state.view.graph;\n\tvar isEdge = graph.getModel().isEdge(state.cell);\n\t\n\tif (state.style[mxConstants.STYLE_FONTSIZE] > 0 || state.style[mxConstants.STYLE_FONTSIZE] == null)\n\t{\n\t\t// Avoids using DOM node for empty labels\n\t\tvar isForceHtml = (graph.isHtmlLabel(state.cell) || (value != null && mxUtils.isNode(value)));\n\n\t\tstate.text = new this.defaultTextShape(value, new mxRectangle(),\n\t\t\t\t(state.style[mxConstants.STYLE_ALIGN] || mxConstants.ALIGN_CENTER),\n\t\t\t\tgraph.getVerticalAlign(state),\n\t\t\t\tstate.style[mxConstants.STYLE_FONTCOLOR],\n\t\t\t\tstate.style[mxConstants.STYLE_FONTFAMILY],\n\t\t\t\tstate.style[mxConstants.STYLE_FONTSIZE],\n\t\t\t\tstate.style[mxConstants.STYLE_FONTSTYLE],\n\t\t\t\tstate.style[mxConstants.STYLE_SPACING],\n\t\t\t\tstate.style[mxConstants.STYLE_SPACING_TOP],\n\t\t\t\tstate.style[mxConstants.STYLE_SPACING_RIGHT],\n\t\t\t\tstate.style[mxConstants.STYLE_SPACING_BOTTOM],\n\t\t\t\tstate.style[mxConstants.STYLE_SPACING_LEFT],\n\t\t\t\tstate.style[mxConstants.STYLE_HORIZONTAL],\n\t\t\t\tstate.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],\n\t\t\t\tstate.style[mxConstants.STYLE_LABEL_BORDERCOLOR],\n\t\t\t\tgraph.isWrapping(state.cell) && graph.isHtmlLabel(state.cell),\n\t\t\t\tgraph.isLabelClipped(state.cell),\n\t\t\t\tstate.style[mxConstants.STYLE_OVERFLOW],\n\t\t\t\tstate.style[mxConstants.STYLE_LABEL_PADDING],\n\t\t\t\tmxUtils.getValue(state.style, mxConstants.STYLE_TEXT_DIRECTION, mxConstants.DEFAULT_TEXT_DIRECTION));\n\t\tstate.text.opacity = mxUtils.getValue(state.style, mxConstants.STYLE_TEXT_OPACITY, 100);\n\t\tstate.text.dialect = (isForceHtml) ? mxConstants.DIALECT_STRICTHTML : state.view.graph.dialect;\n\t\tstate.text.style = state.style;\n\t\tstate.text.state = state;\n\t\tthis.initializeLabel(state, state.text);\n\t\t\n\t\t// Workaround for touch devices routing all events for a mouse gesture\n\t\t// (down, move, up) via the initial DOM node. IE additionally redirects\n\t\t// the event via the initial DOM node but the event source is the node\n\t\t// under the mouse, so we need to check if this is the case and force\n\t\t// getCellAt for the subsequent mouseMoves and the final mouseUp.\n\t\tvar forceGetCell = false;\n\t\t\n\t\tvar getState = function(evt)\n\t\t{\n\t\t\tvar result = state;\n\n\t\t\tif (mxClient.IS_TOUCH || forceGetCell)\n\t\t\t{\n\t\t\t\tvar x = mxEvent.getClientX(evt);\n\t\t\t\tvar y = mxEvent.getClientY(evt);\n\t\t\t\t\n\t\t\t\t// Dispatches the drop event to the graph which\n\t\t\t\t// consumes and executes the source function\n\t\t\t\tvar pt = mxUtils.convertPoint(graph.container, x, y);\n\t\t\t\tresult = graph.view.getState(graph.getCellAt(pt.x, pt.y));\n\t\t\t}\n\t\t\t\n\t\t\treturn result;\n\t\t};\n\t\t\n\t\t// TODO: Add handling for special touch device gestures\n\t\tmxEvent.addGestureListeners(state.text.node,\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (this.isLabelEvent(state, evt))\n\t\t\t\t{\n\t\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt, state));\n\t\t\t\t\tforceGetCell = graph.dialect != mxConstants.DIALECT_SVG &&\n\t\t\t\t\t\tmxEvent.getSource(evt).nodeName == 'IMG';\n\t\t\t\t}\n\t\t\t}),\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (this.isLabelEvent(state, evt))\n\t\t\t\t{\n\t\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt, getState(evt)));\n\t\t\t\t}\n\t\t\t}),\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (this.isLabelEvent(state, evt))\n\t\t\t\t{\n\t\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt, getState(evt)));\n\t\t\t\t\tforceGetCell = false;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\t// Uses double click timeout in mxGraph for quirks mode\n\t\tif (graph.nativeDblClickEnabled)\n\t\t{\n\t\t\tmxEvent.addListener(state.text.node, 'dblclick',\n\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\tif (this.isLabelEvent(state, evt))\n\t\t\t\t\t{\n\t\t\t\t\t\tgraph.dblClick(evt, state.cell);\n\t\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n * Function: initializeLabel\n * \n * Initiailzes the label with a suitable container.\n * \n * Parameters:\n * \n * state - <mxCellState> whose label should be initialized.\n */\nmxCellRenderer.prototype.initializeLabel = function(state, shape)\n{\n\tif (mxClient.IS_SVG && mxClient.NO_FO && shape.dialect != mxConstants.DIALECT_SVG)\n\t{\n\t\tshape.init(state.view.graph.container);\n\t}\n\telse\n\t{\n\t\tshape.init(state.view.getDrawPane());\n\t}\n};\n\n/**\n * Function: createCellOverlays\n * \n * Creates the actual shape for showing the overlay for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the overlay should be created.\n */\nmxCellRenderer.prototype.createCellOverlays = function(state)\n{\n\tvar graph = state.view.graph;\n\tvar overlays = graph.getCellOverlays(state.cell);\n\tvar dict = null;\n\t\n\tif (overlays != null)\n\t{\n\t\tdict = new mxDictionary();\n\t\t\n\t\tfor (var i = 0; i < overlays.length; i++)\n\t\t{\n\t\t\tvar shape = (state.overlays != null) ? state.overlays.remove(overlays[i]) : null;\n\t\t\t\n\t\t\tif (shape == null)\n\t\t\t{\n\t\t\t\tvar tmp = new mxImageShape(new mxRectangle(), overlays[i].image.src);\n\t\t\t\ttmp.dialect = state.view.graph.dialect;\n\t\t\t\ttmp.preserveImageAspect = false;\n\t\t\t\ttmp.overlay = overlays[i];\n\t\t\t\tthis.initializeOverlay(state, tmp);\n\t\t\t\tthis.installCellOverlayListeners(state, overlays[i], tmp);\n\t\n\t\t\t\tif (overlays[i].cursor != null)\n\t\t\t\t{\n\t\t\t\t\ttmp.node.style.cursor = overlays[i].cursor;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdict.put(overlays[i], tmp);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdict.put(overlays[i], shape);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Removes unused\n\tif (state.overlays != null)\n\t{\n\t\tstate.overlays.visit(function(id, shape)\n\t\t{\n\t\t\tshape.destroy();\n\t\t});\n\t}\n\t\n\tstate.overlays = dict;\n};\n\n/**\n * Function: initializeOverlay\n * \n * Initializes the given overlay.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the overlay should be created.\n * overlay - <mxImageShape> that represents the overlay.\n */\nmxCellRenderer.prototype.initializeOverlay = function(state, overlay)\n{\n\toverlay.init(state.view.getOverlayPane());\n};\n\n/**\n * Function: installOverlayListeners\n * \n * Installs the listeners for the given <mxCellState>, <mxCellOverlay> and\n * <mxShape> that represents the overlay.\n */\nmxCellRenderer.prototype.installCellOverlayListeners = function(state, overlay, shape)\n{\n\tvar graph  = state.view.graph;\n\t\n\tmxEvent.addListener(shape.node, 'click', function (evt)\n\t{\n\t\tif (graph.isEditing())\n\t\t{\n\t\t\tgraph.stopEditing(!graph.isInvokesStopCellEditing());\n\t\t}\n\t\t\n\t\toverlay.fireEvent(new mxEventObject(mxEvent.CLICK,\n\t\t\t\t'event', evt, 'cell', state.cell));\n\t});\n\t\n\tmxEvent.addGestureListeners(shape.node,\n\t\tfunction (evt)\n\t\t{\n\t\t\tmxEvent.consume(evt);\n\t\t},\n\t\tfunction (evt)\n\t\t{\n\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_MOVE,\n\t\t\t\tnew mxMouseEvent(evt, state));\n\t\t});\n\t\n\tif (mxClient.IS_TOUCH)\n\t{\n\t\tmxEvent.addListener(shape.node, 'touchend', function (evt)\n\t\t{\n\t\t\toverlay.fireEvent(new mxEventObject(mxEvent.CLICK,\n\t\t\t\t\t'event', evt, 'cell', state.cell));\n\t\t});\n\t}\n};\n\n/**\n * Function: createControl\n * \n * Creates the control for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the control should be created.\n */\nmxCellRenderer.prototype.createControl = function(state)\n{\n\tvar graph = state.view.graph;\n\tvar image = graph.getFoldingImage(state);\n\t\n\tif (graph.foldingEnabled && image != null)\n\t{\n\t\tif (state.control == null)\n\t\t{\n\t\t\tvar b = new mxRectangle(0, 0, image.width, image.height);\n\t\t\tstate.control = new mxImageShape(b, image.src);\n\t\t\tstate.control.preserveImageAspect = false;\n\t\t\tstate.control.dialect = graph.dialect;\n\n\t\t\tthis.initControl(state, state.control, true, this.createControlClickHandler(state));\n\t\t}\n\t}\n\telse if (state.control != null)\n\t{\n\t\tstate.control.destroy();\n\t\tstate.control = null;\n\t}\n};\n\n/**\n * Function: createControlClickHandler\n * \n * Hook for creating the click handler for the folding icon.\n * \n * Parameters:\n * \n * state - <mxCellState> whose control click handler should be returned.\n */\nmxCellRenderer.prototype.createControlClickHandler = function(state)\n{\n\tvar graph = state.view.graph;\n\t\n\treturn mxUtils.bind(this, function (evt)\n\t{\n\t\tif (this.forceControlClickHandler || graph.isEnabled())\n\t\t{\n\t\t\tvar collapse = !graph.isCellCollapsed(state.cell);\n\t\t\tgraph.foldCells(collapse, false, [state.cell], null, evt);\n\t\t\tmxEvent.consume(evt);\n\t\t}\n\t});\n};\n\n/**\n * Function: initControl\n * \n * Initializes the given control and returns the corresponding DOM node.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the control should be initialized.\n * control - <mxShape> to be initialized.\n * handleEvents - Boolean indicating if mousedown and mousemove should fire events via the graph.\n * clickHandler - Optional function to implement clicks on the control.\n */\nmxCellRenderer.prototype.initControl = function(state, control, handleEvents, clickHandler)\n{\n\tvar graph = state.view.graph;\n\t\n\t// In the special case where the label is in HTML and the display is SVG the image\n\t// should go into the graph container directly in order to be clickable. Otherwise\n\t// it is obscured by the HTML label that overlaps the cell.\n\tvar isForceHtml = graph.isHtmlLabel(state.cell) && mxClient.NO_FO &&\n\t\tgraph.dialect == mxConstants.DIALECT_SVG;\n\n\tif (isForceHtml)\n\t{\n\t\tcontrol.dialect = mxConstants.DIALECT_PREFERHTML;\n\t\tcontrol.init(graph.container);\n\t\tcontrol.node.style.zIndex = 1;\n\t}\n\telse\n\t{\n\t\tcontrol.init(state.view.getOverlayPane());\n\t}\n\n\tvar node = control.innerNode || control.node;\n\t\n\t// Workaround for missing click event on iOS is to check tolerance below\n\tif (clickHandler != null && !mxClient.IS_IOS)\n\t{\n\t\tif (graph.isEnabled())\n\t\t{\n\t\t\tnode.style.cursor = 'pointer';\n\t\t}\n\t\t\n\t\tmxEvent.addListener(node, 'click', clickHandler);\n\t}\n\t\n\tif (handleEvents)\n\t{\n\t\tvar first = null;\n\n\t\tmxEvent.addGestureListeners(node,\n\t\t\tfunction (evt)\n\t\t\t{\n\t\t\t\tfirst = new mxPoint(mxEvent.getClientX(evt), mxEvent.getClientY(evt));\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt, state));\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t},\n\t\t\tfunction (evt)\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt, state));\n\t\t\t},\n\t\t\tfunction (evt)\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt, state));\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t});\n\t\t\n\t\t// Uses capture phase for event interception to stop bubble phase\n\t\tif (clickHandler != null && mxClient.IS_IOS)\n\t\t{\n\t\t\tnode.addEventListener('touchend', function(evt)\n\t\t\t{\n\t\t\t\tif (first != null)\n\t\t\t\t{\n\t\t\t\t\tvar tol = graph.tolerance;\n\t\t\t\t\t\n\t\t\t\t\tif (Math.abs(first.x - mxEvent.getClientX(evt)) < tol &&\n\t\t\t\t\t\tMath.abs(first.y - mxEvent.getClientY(evt)) < tol)\n\t\t\t\t\t{\n\t\t\t\t\t\tclickHandler.call(clickHandler, evt);\n\t\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, true);\n\t\t}\n\t}\n\t\n\treturn node;\n};\n\n/**\n * Function: isShapeEvent\n * \n * Returns true if the event is for the shape of the given state. This\n * implementation always returns true.\n * \n * Parameters:\n * \n * state - <mxCellState> whose shape fired the event.\n * evt - Mouse event which was fired.\n */\nmxCellRenderer.prototype.isShapeEvent = function(state, evt)\n{\n\treturn true;\n};\n\n/**\n * Function: isLabelEvent\n * \n * Returns true if the event is for the label of the given state. This\n * implementation always returns true.\n * \n * Parameters:\n * \n * state - <mxCellState> whose label fired the event.\n * evt - Mouse event which was fired.\n */\nmxCellRenderer.prototype.isLabelEvent = function(state, evt)\n{\n\treturn true;\n};\n\n/**\n * Function: installListeners\n * \n * Installs the event listeners for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the event listeners should be isntalled.\n */\nmxCellRenderer.prototype.installListeners = function(state)\n{\n\tvar graph = state.view.graph;\n\n\t// Workaround for touch devices routing all events for a mouse\n\t// gesture (down, move, up) via the initial DOM node. Same for\n\t// HTML images in all IE versions (VML images are working).\n\tvar getState = function(evt)\n\t{\n\t\tvar result = state;\n\t\t\n\t\tif ((graph.dialect != mxConstants.DIALECT_SVG && mxEvent.getSource(evt).nodeName == 'IMG') || mxClient.IS_TOUCH)\n\t\t{\n\t\t\tvar x = mxEvent.getClientX(evt);\n\t\t\tvar y = mxEvent.getClientY(evt);\n\t\t\t\n\t\t\t// Dispatches the drop event to the graph which\n\t\t\t// consumes and executes the source function\n\t\t\tvar pt = mxUtils.convertPoint(graph.container, x, y);\n\t\t\tresult = graph.view.getState(graph.getCellAt(pt.x, pt.y));\n\t\t}\n\t\t\n\t\treturn result;\n\t};\n\n\tmxEvent.addGestureListeners(state.shape.node,\n\t\tmxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (this.isShapeEvent(state, evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt, state));\n\t\t\t}\n\t\t}),\n\t\tmxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (this.isShapeEvent(state, evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt, getState(evt)));\n\t\t\t}\n\t\t}),\n\t\tmxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (this.isShapeEvent(state, evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt, getState(evt)));\n\t\t\t}\n\t\t})\n\t);\n\t\n\t// Uses double click timeout in mxGraph for quirks mode\n\tif (graph.nativeDblClickEnabled)\n\t{\n\t\tmxEvent.addListener(state.shape.node, 'dblclick',\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (this.isShapeEvent(state, evt))\n\t\t\t\t{\n\t\t\t\t\tgraph.dblClick(evt, state.cell);\n\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n};\n\n/**\n * Function: redrawLabel\n * \n * Redraws the label for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> whose label should be redrawn.\n */\nmxCellRenderer.prototype.redrawLabel = function(state, forced)\n{\n\tvar graph = state.view.graph;\n\tvar value = this.getLabelValue(state);\n\tvar wrapping = graph.isWrapping(state.cell);\n\tvar clipping = graph.isLabelClipped(state.cell);\n\tvar isForceHtml = (state.view.graph.isHtmlLabel(state.cell) || (value != null && mxUtils.isNode(value)));\n\tvar dialect = (isForceHtml) ? mxConstants.DIALECT_STRICTHTML : state.view.graph.dialect;\n\tvar overflow = state.style[mxConstants.STYLE_OVERFLOW] || 'visible';\n\n\tif (state.text != null && (state.text.wrap != wrapping || state.text.clipped != clipping ||\n\t\tstate.text.overflow != overflow || state.text.dialect != dialect))\n\t{\n\t\tstate.text.destroy();\n\t\tstate.text = null;\n\t}\n\t\n\tif (state.text == null && value != null && (mxUtils.isNode(value) || value.length > 0))\n\t{\n\t\tthis.createLabel(state, value);\n\t}\n\telse if (state.text != null && (value == null || value.length == 0))\n\t{\n\t\tstate.text.destroy();\n\t\tstate.text = null;\n\t}\n\n\tif (state.text != null)\n\t{\n\t\t// Forced is true if the style has changed, so to get the updated\n\t\t// result in getLabelBounds we apply the new style to the shape\n\t\tif (forced)\n\t\t{\n\t\t\t// Checks if a full repaint is needed\n\t\t\tif (state.text.lastValue != null && this.isTextShapeInvalid(state, state.text))\n\t\t\t{\n\t\t\t\t// Forces a full repaint\n\t\t\t\tstate.text.lastValue = null;\n\t\t\t}\n\t\t\t\n\t\t\tstate.text.resetStyles();\n\t\t\tstate.text.apply(state);\n\t\t\t\n\t\t\t// Special case where value is obtained via hook in graph\n\t\t\tstate.text.valign = graph.getVerticalAlign(state);\n\t\t}\n\t\t\n\t\tvar bounds = this.getLabelBounds(state);\n\t\tvar nextScale = this.getTextScale(state);\n\t\tthis.resolveColor(state, 'color', mxConstants.STYLE_FONTCOLOR);\n\t\t\n\t\tif (forced || state.text.value != value || state.text.isWrapping != wrapping ||\n\t\t\tstate.text.overflow != overflow || state.text.isClipping != clipping ||\n\t\t\tstate.text.scale != nextScale || state.text.dialect != dialect ||\n\t\t\tstate.text.bounds == null || !state.text.bounds.equals(bounds))\n\t\t{\n\t\t\tstate.text.dialect = dialect;\n\t\t\tstate.text.value = value;\n\t\t\tstate.text.bounds = bounds;\n\t\t\tstate.text.scale = nextScale;\n\t\t\tstate.text.wrap = wrapping;\n\t\t\tstate.text.clipped = clipping;\n\t\t\tstate.text.overflow = overflow;\n\t\t\t\n\t\t\t// Preserves visible state\n\t\t\tvar vis = state.text.node.style.visibility;\n\t\t\tthis.redrawLabelShape(state.text);\n\t\t\tstate.text.node.style.visibility = vis;\n\t\t}\n\t}\n};\n\n/**\n * Function: isTextShapeInvalid\n * \n * Returns true if the style for the text shape has changed.\n * \n * Parameters:\n * \n * state - <mxCellState> whose label should be checked.\n * shape - <mxText> shape to be checked.\n */\nmxCellRenderer.prototype.isTextShapeInvalid = function(state, shape)\n{\n\tfunction check(property, stylename, defaultValue)\n\t{\n\t\tvar result = false;\n\t\t\n\t\t// Workaround for spacing added to directional spacing\n\t\tif (stylename == 'spacingTop' || stylename == 'spacingRight' ||\n\t\t\tstylename == 'spacingBottom' || stylename == 'spacingLeft')\n\t\t{\n\t\t\tresult = parseFloat(shape[property]) - parseFloat(shape.spacing) !=\n\t\t\t\t(state.style[stylename] || defaultValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult = shape[property] != (state.style[stylename] || defaultValue);\n\t\t}\n\t\t\n\t\treturn result;\n\t};\n\n\treturn check('fontStyle', mxConstants.STYLE_FONTSTYLE, mxConstants.DEFAULT_FONTSTYLE) ||\n\t\tcheck('family', mxConstants.STYLE_FONTFAMILY, mxConstants.DEFAULT_FONTFAMILY) ||\n\t\tcheck('size', mxConstants.STYLE_FONTSIZE, mxConstants.DEFAULT_FONTSIZE) ||\n\t\tcheck('color', mxConstants.STYLE_FONTCOLOR, 'black') ||\n\t\tcheck('align', mxConstants.STYLE_ALIGN, '') ||\n\t\tcheck('valign', mxConstants.STYLE_VERTICAL_ALIGN, '') ||\n\t\tcheck('spacing', mxConstants.STYLE_SPACING, 2) ||\n\t\tcheck('spacingTop', mxConstants.STYLE_SPACING_TOP, 0) ||\n\t\tcheck('spacingRight', mxConstants.STYLE_SPACING_RIGHT, 0) ||\n\t\tcheck('spacingBottom', mxConstants.STYLE_SPACING_BOTTOM, 0) ||\n\t\tcheck('spacingLeft', mxConstants.STYLE_SPACING_LEFT, 0) ||\n\t\tcheck('horizontal', mxConstants.STYLE_HORIZONTAL, true) ||\n\t\tcheck('background', mxConstants.STYLE_LABEL_BACKGROUNDCOLOR) ||\n\t\tcheck('border', mxConstants.STYLE_LABEL_BORDERCOLOR) ||\n\t\tcheck('opacity', mxConstants.STYLE_TEXT_OPACITY, 100) ||\n\t\tcheck('textDirection', mxConstants.STYLE_TEXT_DIRECTION, mxConstants.DEFAULT_TEXT_DIRECTION);\n};\n\n/**\n * Function: redrawLabelShape\n * \n * Called to invoked redraw on the given text shape.\n * \n * Parameters:\n * \n * shape - <mxText> shape to be redrawn.\n */\nmxCellRenderer.prototype.redrawLabelShape = function(shape)\n{\n\tshape.redraw();\n};\n\n/**\n * Function: getTextScale\n * \n * Returns the scaling used for the label of the given state\n * \n * Parameters:\n * \n * state - <mxCellState> whose label scale should be returned.\n */\nmxCellRenderer.prototype.getTextScale = function(state)\n{\n\treturn state.view.scale;\n};\n\n/**\n * Function: getLabelBounds\n * \n * Returns the bounds to be used to draw the label of the given state.\n * \n * Parameters:\n * \n * state - <mxCellState> whose label bounds should be returned.\n */\nmxCellRenderer.prototype.getLabelBounds = function(state)\n{\n\tvar graph = state.view.graph;\n\tvar scale = state.view.scale;\n\tvar isEdge = graph.getModel().isEdge(state.cell);\n\tvar bounds = new mxRectangle(state.absoluteOffset.x, state.absoluteOffset.y);\n\n\tif (isEdge)\n\t{\n\t\tvar spacing = state.text.getSpacing();\n\t\tbounds.x += spacing.x * scale;\n\t\tbounds.y += spacing.y * scale;\n\t\t\n\t\tvar geo = graph.getCellGeometry(state.cell);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tbounds.width = Math.max(0, geo.width * scale);\n\t\t\tbounds.height = Math.max(0, geo.height * scale);\n\t\t}\n\t}\n\telse\n\t{\n\t\t// Inverts label position\n\t\tif (state.text.isPaintBoundsInverted())\n\t\t{\n\t\t\tvar tmp = bounds.x;\n\t\t\tbounds.x = bounds.y;\n\t\t\tbounds.y = tmp;\n\t\t}\n\t\t\n\t\tbounds.x += state.x;\n\t\tbounds.y += state.y;\n\t\t\n\t\t// Minimum of 1 fixes alignment bug in HTML labels\n\t\tbounds.width = Math.max(1, state.width);\n\t\tbounds.height = Math.max(1, state.height);\n\t}\n\n\tif (state.text.isPaintBoundsInverted())\n\t{\n\t\t// Rotates around center of state\n\t\tvar t = (state.width - state.height) / 2;\n\t\tbounds.x += t;\n\t\tbounds.y -= t;\n\t\tvar tmp = bounds.width;\n\t\tbounds.width = bounds.height;\n\t\tbounds.height = tmp;\n\t}\n\t\n\t// Shape can modify its label bounds\n\tif (state.shape != null)\n\t{\n\t\tvar hpos = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER);\n\t\tvar vpos = mxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE);\n\t\t\n\t\tif (hpos == mxConstants.ALIGN_CENTER && vpos == mxConstants.ALIGN_MIDDLE)\n\t\t{\n\t\t\tbounds = state.shape.getLabelBounds(bounds);\n\t\t}\n\t}\n\t\n\t// Label width style overrides actual label width\n\tvar lw = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_WIDTH, null);\n\t\n\tif (lw != null)\n\t{\n\t\tbounds.width = parseFloat(lw) * scale;\n\t}\n\t\n\tif (!isEdge)\n\t{\n\t\tthis.rotateLabelBounds(state, bounds);\n\t}\n\t\n\treturn bounds;\n};\n\n/**\n * Function: rotateLabelBounds\n * \n * Adds the shape rotation to the given label bounds and\n * applies the alignment and offsets.\n * \n * Parameters:\n * \n * state - <mxCellState> whose label bounds should be rotated.\n * bounds - <mxRectangle> the rectangle to be rotated.\n */\nmxCellRenderer.prototype.rotateLabelBounds = function(state, bounds)\n{\n\tbounds.y -= state.text.margin.y * bounds.height;\n\tbounds.x -= state.text.margin.x * bounds.width;\n\t\n\tif (!this.legacySpacing || (state.style[mxConstants.STYLE_OVERFLOW] != 'fill' && state.style[mxConstants.STYLE_OVERFLOW] != 'width'))\n\t{\n\t\tvar s = state.view.scale;\n\t\tvar spacing = state.text.getSpacing();\n\t\tbounds.x += spacing.x * s;\n\t\tbounds.y += spacing.y * s;\n\t\t\n\t\tvar hpos = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER);\n\t\tvar vpos = mxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE);\n\t\tvar lw = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_WIDTH, null);\n\t\t\n\t\tbounds.width = Math.max(0, bounds.width - ((hpos == mxConstants.ALIGN_CENTER && lw == null) ? (state.text.spacingLeft * s + state.text.spacingRight * s) : 0));\n\t\tbounds.height = Math.max(0, bounds.height - ((vpos == mxConstants.ALIGN_MIDDLE) ? (state.text.spacingTop * s + state.text.spacingBottom * s) : 0));\n\t}\n\n\tvar theta = state.text.getTextRotation();\n\n\t// Only needed if rotated around another center\n\tif (theta != 0 && state != null && state.view.graph.model.isVertex(state.cell))\n\t{\n\t\tvar cx = state.getCenterX();\n\t\tvar cy = state.getCenterY();\n\t\t\n\t\tif (bounds.x != cx || bounds.y != cy)\n\t\t{\n\t\t\tvar rad = theta * (Math.PI / 180);\n\t\t\tvar pt = mxUtils.getRotatedPoint(new mxPoint(bounds.x, bounds.y),\n\t\t\t\t\tMath.cos(rad), Math.sin(rad), new mxPoint(cx, cy));\n\t\t\t\n\t\t\tbounds.x = pt.x;\n\t\t\tbounds.y = pt.y;\n\t\t}\n\t}\n};\n\n/**\n * Function: redrawCellOverlays\n * \n * Redraws the overlays for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> whose overlays should be redrawn.\n */\nmxCellRenderer.prototype.redrawCellOverlays = function(state, forced)\n{\n\tthis.createCellOverlays(state);\n\n\tif (state.overlays != null)\n\t{\n\t\tvar rot = mxUtils.mod(mxUtils.getValue(state.style, mxConstants.STYLE_ROTATION, 0), 90);\n        var rad = mxUtils.toRadians(rot);\n        var cos = Math.cos(rad);\n        var sin = Math.sin(rad);\n\t\t\n\t\tstate.overlays.visit(function(id, shape)\n\t\t{\n\t\t\tvar bounds = shape.overlay.getBounds(state);\n\t\t\n\t\t\tif (!state.view.graph.getModel().isEdge(state.cell))\n\t\t\t{\n\t\t\t\tif (state.shape != null && rot != 0)\n\t\t\t\t{\n\t\t\t\t\tvar cx = bounds.getCenterX();\n\t\t\t\t\tvar cy = bounds.getCenterY();\n\n\t\t\t\t\tvar point = mxUtils.getRotatedPoint(new mxPoint(cx, cy), cos, sin,\n\t\t\t        \t\tnew mxPoint(state.getCenterX(), state.getCenterY()));\n\n\t\t\t        cx = point.x;\n\t\t\t        cy = point.y;\n\t\t\t        bounds.x = Math.round(cx - bounds.width / 2);\n\t\t\t        bounds.y = Math.round(cy - bounds.height / 2);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (forced || shape.bounds == null || shape.scale != state.view.scale ||\n\t\t\t\t!shape.bounds.equals(bounds))\n\t\t\t{\n\t\t\t\tshape.bounds = bounds;\n\t\t\t\tshape.scale = state.view.scale;\n\t\t\t\tshape.redraw();\n\t\t\t}\n\t\t});\n\t}\n};\n\n/**\n * Function: redrawControl\n * \n * Redraws the control for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> whose control should be redrawn.\n */\nmxCellRenderer.prototype.redrawControl = function(state, forced)\n{\n\tvar image = state.view.graph.getFoldingImage(state);\n\t\n\tif (state.control != null && image != null)\n\t{\n\t\tvar bounds = this.getControlBounds(state, image.width, image.height);\n\t\tvar r = (this.legacyControlPosition) ?\n\t\t\t\tmxUtils.getValue(state.style, mxConstants.STYLE_ROTATION, 0) :\n\t\t\t\tstate.shape.getTextRotation();\n\t\tvar s = state.view.scale;\n\t\t\n\t\tif (forced || state.control.scale != s || !state.control.bounds.equals(bounds) ||\n\t\t\tstate.control.rotation != r)\n\t\t{\n\t\t\tstate.control.rotation = r;\n\t\t\tstate.control.bounds = bounds;\n\t\t\tstate.control.scale = s;\n\t\t\t\n\t\t\tstate.control.redraw();\n\t\t}\n\t}\n};\n\n/**\n * Function: getControlBounds\n * \n * Returns the bounds to be used to draw the control (folding icon) of the\n * given state.\n */\nmxCellRenderer.prototype.getControlBounds = function(state, w, h)\n{\n\tif (state.control != null)\n\t{\n\t\tvar s = state.view.scale;\n\t\tvar cx = state.getCenterX();\n\t\tvar cy = state.getCenterY();\n\t\n\t\tif (!state.view.graph.getModel().isEdge(state.cell))\n\t\t{\n\t\t\tcx = state.x + w * s;\n\t\t\tcy = state.y + h * s;\n\t\t\t\n\t\t\tif (state.shape != null)\n\t\t\t{\n\t\t\t\t// TODO: Factor out common code\n\t\t\t\tvar rot = state.shape.getShapeRotation();\n\t\t\t\t\n\t\t\t\tif (this.legacyControlPosition)\n\t\t\t\t{\n\t\t\t\t\trot = mxUtils.getValue(state.style, mxConstants.STYLE_ROTATION, 0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (state.shape.isPaintBoundsInverted())\n\t\t\t\t\t{\n\t\t\t\t\t\tvar t = (state.width - state.height) / 2;\n\t\t\t\t\t\tcx += t;\n\t\t\t\t\t\tcy -= t;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (rot != 0)\n\t\t\t\t{\n\t\t\t        var rad = mxUtils.toRadians(rot);\n\t\t\t        var cos = Math.cos(rad);\n\t\t\t        var sin = Math.sin(rad);\n\t\t\t        \n\t\t\t        var point = mxUtils.getRotatedPoint(new mxPoint(cx, cy), cos, sin,\n\t\t\t        \t\tnew mxPoint(state.getCenterX(), state.getCenterY()));\n\t\t\t        cx = point.x;\n\t\t\t        cy = point.y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn (state.view.graph.getModel().isEdge(state.cell)) ? \n\t\t\tnew mxRectangle(Math.round(cx - w / 2 * s), Math.round(cy - h / 2 * s), Math.round(w * s), Math.round(h * s))\n\t\t\t: new mxRectangle(Math.round(cx - w / 2 * s), Math.round(cy - h / 2 * s), Math.round(w * s), Math.round(h * s));\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: insertStateAfter\n * \n * Inserts the given array of <mxShapes> after the given nodes in the DOM.\n * \n * Parameters:\n * \n * shapes - Array of <mxShapes> to be inserted.\n * node - Node in <drawPane> after which the shapes should be inserted.\n * htmlNode - Node in the graph container after which the shapes should be inserted that\n * will not go into the <drawPane> (eg. HTML labels without foreignObjects).\n */\nmxCellRenderer.prototype.insertStateAfter = function(state, node, htmlNode)\n{\n\tvar shapes = this.getShapesForState(state);\n\t\n\tfor (var i = 0; i < shapes.length; i++)\n\t{\n\t\tif (shapes[i] != null && shapes[i].node != null)\n\t\t{\n\t\t\tvar html = shapes[i].node.parentNode != state.view.getDrawPane() &&\n\t\t\t\tshapes[i].node.parentNode != state.view.getOverlayPane();\n\t\t\tvar temp = (html) ? htmlNode : node;\n\t\t\t\n\t\t\tif (temp != null && temp.nextSibling != shapes[i].node)\n\t\t\t{\n\t\t\t\tif (temp.nextSibling == null)\n\t\t\t\t{\n\t\t\t\t\ttemp.parentNode.appendChild(shapes[i].node);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttemp.parentNode.insertBefore(shapes[i].node, temp.nextSibling);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (temp == null)\n\t\t\t{\n\t\t\t\t// Special case: First HTML node should be first sibling after canvas\n\t\t\t\tif (shapes[i].node.parentNode == state.view.graph.container)\n\t\t\t\t{\n\t\t\t\t\tvar canvas = state.view.canvas;\n\t\t\t\t\t\n\t\t\t\t\twhile (canvas != null && canvas.parentNode != state.view.graph.container)\n\t\t\t\t\t{\n\t\t\t\t\t\tcanvas = canvas.parentNode;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (canvas != null && canvas.nextSibling != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (canvas.nextSibling != shapes[i].node)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tshapes[i].node.parentNode.insertBefore(shapes[i].node, canvas.nextSibling);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tshapes[i].node.parentNode.appendChild(shapes[i].node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (shapes[i].node.parentNode != null &&\n\t\t\t\t\tshapes[i].node.parentNode.firstChild != null &&\n\t\t\t\t\tshapes[i].node.parentNode.firstChild != shapes[i].node)\n\t\t\t\t{\n\t\t\t\t\t// Inserts the node as the first child of the parent to implement the order\n\t\t\t\t\tshapes[i].node.parentNode.insertBefore(shapes[i].node, shapes[i].node.parentNode.firstChild);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (html)\n\t\t\t{\n\t\t\t\thtmlNode = shapes[i].node;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnode = shapes[i].node;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [node, htmlNode];\n};\n\n/**\n * Function: getShapesForState\n * \n * Returns the <mxShapes> for the given cell state in the order in which they should\n * appear in the DOM.\n * \n * Parameters:\n * \n * state - <mxCellState> whose shapes should be returned.\n */\nmxCellRenderer.prototype.getShapesForState = function(state)\n{\n\treturn [state.shape, state.text, state.control];\n};\n\n/**\n * Function: redraw\n * \n * Updates the bounds or points and scale of the shapes for the given cell\n * state. This is called in mxGraphView.validatePoints as the last step of\n * updating all cells.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the shapes should be updated.\n * force - Optional boolean that specifies if the cell should be reconfiured\n * and redrawn without any additional checks.\n * rendering - Optional boolean that specifies if the cell should actually\n * be drawn into the DOM. If this is false then redraw and/or reconfigure\n * will not be called on the shape.\n */\nmxCellRenderer.prototype.redraw = function(state, force, rendering)\n{\n\tvar shapeChanged = this.redrawShape(state, force, rendering);\n\n\tif (state.shape != null && (rendering == null || rendering))\n\t{\n\t\tthis.redrawLabel(state, shapeChanged);\n\t\tthis.redrawCellOverlays(state, shapeChanged);\n\t\tthis.redrawControl(state, shapeChanged);\n\t}\n};\n\n/**\n * Function: redrawShape\n * \n * Redraws the shape for the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> whose label should be redrawn.\n */\nmxCellRenderer.prototype.redrawShape = function(state, force, rendering)\n{\n\tvar model = state.view.graph.model;\n\tvar shapeChanged = false;\n\n\t// Forces creation of new shape if shape style has changed\n\tif (state.shape != null && state.shape.style != null && state.style != null &&\n\t\tstate.shape.style[mxConstants.STYLE_SHAPE] != state.style[mxConstants.STYLE_SHAPE])\n\t{\n\t\tstate.shape.destroy();\n\t\tstate.shape = null;\n\t}\n\t\n\tif (state.shape == null && state.view.graph.container != null &&\n\t\tstate.cell != state.view.currentRoot &&\n\t\t(model.isVertex(state.cell) || model.isEdge(state.cell)))\n\t{\n\t\tstate.shape = this.createShape(state);\n\t\t\n\t\tif (state.shape != null)\n\t\t{\n\t\t\tstate.shape.minSvgStrokeWidth = this.minSvgStrokeWidth;\n\t\t\tstate.shape.antiAlias = this.antiAlias;\n\t\n\t\t\tthis.createIndicatorShape(state);\n\t\t\tthis.initializeShape(state);\n\t\t\tthis.createCellOverlays(state);\n\t\t\tthis.installListeners(state);\n\t\t\t\n\t\t\t// Forces a refresh of the handler if one exists\n\t\t\tstate.view.graph.selectionCellsHandler.updateHandler(state);\n\t\t}\n\t}\n\telse if (!force && state.shape != null && (!mxUtils.equalEntries(state.shape.style,\n\t\tstate.style) || this.checkPlaceholderStyles(state)))\n\t{\n\t\tstate.shape.resetStyles();\n\t\tthis.configureShape(state);\n\t\t// LATER: Ignore update for realtime to fix reset of current gesture\n\t\tstate.view.graph.selectionCellsHandler.updateHandler(state);\n\t\tforce = true;\n\t}\n\t\n\t// Updates indicator shape\n\tif (state.shape != null && state.shape.indicatorShape !=\n\t\tthis.getShape(state.view.graph.getIndicatorShape(state)))\n\t{\n\t\tif (state.shape.indicator != null)\n\t\t{\n\t\t\tstate.shape.indicator.destroy();\n\t\t\tstate.shape.indicator = null;\n\t\t}\n\t\t\n\t\tthis.createIndicatorShape(state);\n\t\t\n\t\tif (state.shape.indicatorShape != null)\n\t\t{\n\t\t\tstate.shape.indicator = new state.shape.indicatorShape();\n\t\t\tstate.shape.indicator.dialect = state.shape.dialect;\n\t\t\tstate.shape.indicator.init(state.node);\n\t\t\tforce = true;\n\t\t}\n\t}\n\n\tif (state.shape != null)\n\t{\n\t\t// Handles changes of the collapse icon\n\t\tthis.createControl(state);\n\t\t\n\t\t// Redraws the cell if required, ignores changes to bounds if points are\n\t\t// defined as the bounds are updated for the given points inside the shape\n\t\tif (force || this.isShapeInvalid(state, state.shape))\n\t\t{\n\t\t\tif (state.absolutePoints != null)\n\t\t\t{\n\t\t\t\tstate.shape.points = state.absolutePoints.slice();\n\t\t\t\tstate.shape.bounds = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstate.shape.points = null;\n\t\t\t\tstate.shape.bounds = new mxRectangle(state.x, state.y, state.width, state.height);\n\t\t\t}\n\n\t\t\tstate.shape.scale = state.view.scale;\n\t\t\t\n\t\t\tif (rendering == null || rendering)\n\t\t\t{\n\t\t\t\tthis.doRedrawShape(state);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstate.shape.updateBoundingBox();\n\t\t\t}\n\t\t\t\n\t\t\tshapeChanged = true;\n\t\t}\n\t}\n\n\treturn shapeChanged;\n};\n\n/**\n * Function: doRedrawShape\n * \n * Invokes redraw on the shape of the given state.\n */\nmxCellRenderer.prototype.doRedrawShape = function(state)\n{\n\tstate.shape.redraw();\n};\n\n/**\n * Function: isShapeInvalid\n * \n * Returns true if the given shape must be repainted.\n */\nmxCellRenderer.prototype.isShapeInvalid = function(state, shape)\n{\n\treturn shape.bounds == null || shape.scale != state.view.scale ||\n\t\t(state.absolutePoints == null && !shape.bounds.equals(state)) ||\n\t\t(state.absolutePoints != null && !mxUtils.equalPoints(shape.points, state.absolutePoints))\n};\n\n/**\n * Function: destroy\n * \n * Destroys the shapes associated with the given cell state.\n * \n * Parameters:\n * \n * state - <mxCellState> for which the shapes should be destroyed.\n */\nmxCellRenderer.prototype.destroy = function(state)\n{\n\tif (state.shape != null)\n\t{\n\t\tif (state.text != null)\n\t\t{\t\t\n\t\t\tstate.text.destroy();\n\t\t\tstate.text = null;\n\t\t}\n\t\t\n\t\tif (state.overlays != null)\n\t\t{\n\t\t\tstate.overlays.visit(function(id, shape)\n\t\t\t{\n\t\t\t\tshape.destroy();\n\t\t\t});\n\t\t\t\n\t\t\tstate.overlays = null;\n\t\t}\n\n\t\tif (state.control != null)\n\t\t{\n\t\t\tstate.control.destroy();\n\t\t\tstate.control = null;\n\t\t}\n\t\t\n\t\tstate.shape.destroy();\n\t\tstate.shape = null;\n\t}\n};\n\n__mxOutput.mxCellRenderer = typeof mxCellRenderer !== 'undefined' ? mxCellRenderer : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxEdgeStyle =\n{\n\t/**\n\t * Class: mxEdgeStyle\n\t * \n\t * Provides various edge styles to be used as the values for\n\t * <mxConstants.STYLE_EDGE> in a cell style.\n\t *\n\t * Example:\n\t * \n\t * (code)\n\t * var style = stylesheet.getDefaultEdgeStyle();\n\t * style[mxConstants.STYLE_EDGE] = mxEdgeStyle.ElbowConnector;\n\t * (end)\n\t * \n\t * Sets the default edge style to <ElbowConnector>.\n\t * \n\t * Custom edge style:\n\t * \n\t * To write a custom edge style, a function must be added to the mxEdgeStyle\n\t * object as follows:\n\t * \n\t * (code)\n\t * mxEdgeStyle.MyStyle = function(state, source, target, points, result)\n\t * {\n\t *   if (source != null && target != null)\n\t *   {\n\t *     var pt = new mxPoint(target.getCenterX(), source.getCenterY());\n\t * \n\t *     if (mxUtils.contains(source, pt.x, pt.y))\n\t *     {\n\t *       pt.y = source.y + source.height;\n\t *     }\n\t * \n\t *     result.push(pt);\n\t *   }\n\t * };\n\t * (end)\n\t * \n\t * In the above example, a right angle is created using a point on the\n\t * horizontal center of the target vertex and the vertical center of the source\n\t * vertex. The code checks if that point intersects the source vertex and makes\n\t * the edge straight if it does. The point is then added into the result array,\n\t * which acts as the return value of the function.\n\t *\n\t * The new edge style should then be registered in the <mxStyleRegistry> as follows:\n\t * (code)\n\t * mxStyleRegistry.putValue('myEdgeStyle', mxEdgeStyle.MyStyle);\n\t * (end)\n\t * \n\t * The custom edge style above can now be used in a specific edge as follows:\n\t * \n\t * (code)\n\t * model.setStyle(edge, 'edgeStyle=myEdgeStyle');\n\t * (end)\n\t * \n\t * Note that the key of the <mxStyleRegistry> entry for the function should\n\t * be used in string values, unless <mxGraphView.allowEval> is true, in\n\t * which case you can also use mxEdgeStyle.MyStyle for the value in the\n\t * cell style above.\n\t * \n\t * Or it can be used for all edges in the graph as follows:\n\t * \n\t * (code)\n\t * var style = graph.getStylesheet().getDefaultEdgeStyle();\n\t * style[mxConstants.STYLE_EDGE] = mxEdgeStyle.MyStyle;\n\t * (end)\n\t * \n\t * Note that the object can be used directly when programmatically setting\n\t * the value, but the key in the <mxStyleRegistry> should be used when\n\t * setting the value via a key, value pair in a cell style.\n\t * \n\t * Function: EntityRelation\n\t * \n\t * Implements an entity relation style for edges (as used in database\n\t * schema diagrams). At the time the function is called, the result\n\t * array contains a placeholder (null) for the first absolute point,\n\t * that is, the point where the edge and source terminal are connected.\n\t * The implementation of the style then adds all intermediate waypoints\n\t * except for the last point, that is, the connection point between the\n\t * edge and the target terminal. The first ant the last point in the\n\t * result array are then replaced with mxPoints that take into account\n\t * the terminal's perimeter and next point on the edge.\n\t *\n\t * Parameters:\n\t * \n\t * state - <mxCellState> that represents the edge to be updated.\n\t * source - <mxCellState> that represents the source terminal.\n\t * target - <mxCellState> that represents the target terminal.\n\t * points - List of relative control points.\n\t * result - Array of <mxPoints> that represent the actual points of the\n\t * edge.\n\t */\n\t EntityRelation: function(state, source, target, points, result)\n\t {\n\t\tvar view = state.view;\n\t \tvar graph = view.graph;\n\t \tvar segment = mxUtils.getValue(state.style,\n\t \t\t\tmxConstants.STYLE_SEGMENT,\n\t \t\t\tmxConstants.ENTITY_SEGMENT) * view.scale;\n\t \t\n\t\tvar pts = state.absolutePoints;\n\t\tvar p0 = pts[0];\n\t\tvar pe = pts[pts.length-1];\n\n\t \tvar isSourceLeft = false;\n\t \t\n\t \tif (source != null)\n\t \t{\n \t\t\tvar sourceGeometry = graph.getCellGeometry(source.cell);\n\t\n\t\t \tif (sourceGeometry.relative)\n\t\t \t{\n\t\t \t\tisSourceLeft = sourceGeometry.x <= 0.5;\n\t\t \t}\n\t\t \telse if (target != null)\n\t\t \t{\n\t\t \t\tisSourceLeft = ((pe != null) ? pe.x : target.x + target.width) < ((p0 != null) ? p0.x : source.x);\n\t\t \t}\n\t \t}\n\n\t\tif (p0 != null)\n\t\t{\n\t\t\tsource = new mxCellState();\n\t\t\tsource.x = p0.x;\n\t\t\tsource.y = p0.y;\n\t\t}\n\t\telse if (source != null)\n\t\t{\n\t\t\tvar constraint = mxUtils.getPortConstraints(source, state, true, mxConstants.DIRECTION_MASK_NONE);\n\t\t\t\n\t\t\tif (constraint != mxConstants.DIRECTION_MASK_NONE && constraint != mxConstants.DIRECTION_MASK_WEST +\n\t\t\t\tmxConstants.DIRECTION_MASK_EAST)\n\t\t\t{\n\t\t\t\tisSourceLeft = constraint == mxConstants.DIRECTION_MASK_WEST;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn;\n\t\t}\n\t \t\n\t \tvar isTargetLeft = true;\n\t \t\n\t \tif (target != null)\n\t \t{\n\t\t \tvar targetGeometry = graph.getCellGeometry(target.cell);\n\t\n\t\t \tif (targetGeometry.relative)\n\t\t \t{\n\t\t \t\tisTargetLeft = targetGeometry.x <= 0.5;\n\t\t \t}\n\t\t \telse if (source != null)\n\t\t \t{\n\t\t \t\tisTargetLeft = ((p0 != null) ? p0.x : source.x + source.width) < ((pe != null) ? pe.x : target.x);\n\t\t \t}\n\t \t}\n\t\t\n\t\tif (pe != null)\n\t\t{\n\t\t\ttarget = new mxCellState();\n\t\t\ttarget.x = pe.x;\n\t\t\ttarget.y = pe.y;\n\t\t}\n\t\telse if (target != null)\n\t \t{\n\t\t\tvar constraint = mxUtils.getPortConstraints(target, state, false, mxConstants.DIRECTION_MASK_NONE);\n\n\t\t\tif (constraint != mxConstants.DIRECTION_MASK_NONE && constraint != mxConstants.DIRECTION_MASK_WEST +\n\t\t\t\tmxConstants.DIRECTION_MASK_EAST)\n\t\t\t{\n\t\t\t\tisTargetLeft = constraint == mxConstants.DIRECTION_MASK_WEST;\n\t\t\t}\n\t \t}\n\t\t\n\t\tif (source != null && target != null)\n\t\t{\n\t\t\tvar x0 = (isSourceLeft) ? source.x : source.x + source.width;\n\t\t\tvar y0 = view.getRoutingCenterY(source);\n\t\t\t\n\t\t\tvar xe = (isTargetLeft) ? target.x : target.x + target.width;\n\t\t\tvar ye = view.getRoutingCenterY(target);\n\t\n\t\t\tvar seg = segment;\n\t\n\t\t\tvar dx = (isSourceLeft) ? -seg : seg;\n\t\t\tvar dep = new mxPoint(x0 + dx, y0);\n\t\t\t\t\t\n\t\t\tdx = (isTargetLeft) ? -seg : seg;\n\t\t\tvar arr = new mxPoint(xe + dx, ye);\n\t\t\t\n\t\t\t// Adds intermediate points if both go out on same side\n\t\t\tif (isSourceLeft == isTargetLeft)\n\t\t\t{\n\t\t\t\tvar x = (isSourceLeft) ?\n\t\t\t\t\tMath.min(x0, xe)-segment :\n\t\t\t\t\tMath.max(x0, xe)+segment;\n\t\n\t\t\t\tresult.push(new mxPoint(x, y0));\n\t\t\t\tresult.push(new mxPoint(x, ye));\n\t\t\t}\n\t\t\telse if ((dep.x < arr.x) == isSourceLeft)\n\t\t\t{\n\t\t\t\tvar midY = y0 + (ye - y0) / 2;\n\t\n\t\t\t\tresult.push(dep);\n\t\t\t\tresult.push(new mxPoint(dep.x, midY));\n\t\t\t\tresult.push(new mxPoint(arr.x, midY));\n\t\t\t\tresult.push(arr);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.push(dep);\n\t\t\t\tresult.push(arr);\n\t\t\t}\n\t\t}\n\t },\n\n\t /**\n\t * Function: Loop\n\t * \n\t * Implements a self-reference, aka. loop.\n\t */\n\tLoop: function(state, source, target, points, result)\n\t{\n\t\tvar pts = state.absolutePoints;\n\t\t\n\t\tvar p0 = pts[0];\n\t\tvar pe = pts[pts.length-1];\n\n\t\tif (p0 != null && pe != null)\n\t\t{\n\t\t\tif (points != null && points.length > 0)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < points.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar pt = points[i];\n\t\t\t\t\tpt = state.view.transformControlPoint(state, pt);\n\t\t\t\t\tresult.push(new mxPoint(pt.x, pt.y));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (source != null)\n\t\t{\n\t\t\tvar view = state.view;\n\t\t\tvar graph = view.graph;\n\t\t\tvar pt = (points != null && points.length > 0) ? points[0] : null;\n\n\t\t\tif (pt != null)\n\t\t\t{\n\t\t\t\tpt = view.transformControlPoint(state, pt);\n\t\t\t\t\t\n\t\t\t\tif (mxUtils.contains(source, pt.x, pt.y))\n\t\t\t\t{\n\t\t\t\t\tpt = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar x = 0;\n\t\t\tvar dx = 0;\n\t\t\tvar y = 0;\n\t\t\tvar dy = 0;\n\t\t\t\n\t\t \tvar seg = mxUtils.getValue(state.style, mxConstants.STYLE_SEGMENT,\n\t\t \t\tgraph.gridSize) * view.scale;\n\t\t\tvar dir = mxUtils.getValue(state.style, mxConstants.STYLE_DIRECTION,\n\t\t\t\tmxConstants.DIRECTION_WEST);\n\t\t\t\n\t\t\tif (dir == mxConstants.DIRECTION_NORTH ||\n\t\t\t\tdir == mxConstants.DIRECTION_SOUTH)\n\t\t\t{\n\t\t\t\tx = view.getRoutingCenterX(source);\n\t\t\t\tdx = seg;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ty = view.getRoutingCenterY(source);\n\t\t\t\tdy = seg;\n\t\t\t}\n\t\t\t\n\t\t\tif (pt == null ||\n\t\t\t\tpt.x < source.x ||\n\t\t\t\tpt.x > source.x + source.width)\n\t\t\t{\n\t\t\t\tif (pt != null)\n\t\t\t\t{\n\t\t\t\t\tx = pt.x;\n\t\t\t\t\tdy = Math.max(Math.abs(y - pt.y), dy);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (dir == mxConstants.DIRECTION_NORTH)\n\t\t\t\t\t{\n\t\t\t\t\t\ty = source.y - 2 * dx;\n\t\t\t\t\t}\n\t\t\t\t\telse if (dir == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t\t{\n\t\t\t\t\t\ty = source.y + source.height + 2 * dx;\n\t\t\t\t\t}\n\t\t\t\t\telse if (dir == mxConstants.DIRECTION_EAST)\n\t\t\t\t\t{\n\t\t\t\t\t\tx = source.x - 2 * dy;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tx = source.x + source.width + 2 * dy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (pt != null)\n\t\t\t{\n\t\t\t\tx = view.getRoutingCenterX(source);\n\t\t\t\tdx = Math.max(Math.abs(x - pt.x), dy);\n\t\t\t\ty = pt.y;\n\t\t\t\tdy = 0;\n\t\t\t}\n\t\t\t\n\t\t\tresult.push(new mxPoint(x - dx, y - dy));\n\t\t\tresult.push(new mxPoint(x + dx, y + dy));\n\t\t}\n\t},\n\t\n\t/**\n\t * Function: ElbowConnector\n\t * \n\t * Uses either <SideToSide> or <TopToBottom> depending on the horizontal\n\t * flag in the cell style. <SideToSide> is used if horizontal is true or\n\t * unspecified. See <EntityRelation> for a description of the\n\t * parameters.\n\t */\n\tElbowConnector: function(state, source, target, points, result)\n\t{\n\t\tvar pt = (points != null && points.length > 0) ? points[0] : null;\n\n\t\tvar vertical = false;\n\t\tvar horizontal = false;\n\t\t\n\t\tif (source != null && target != null)\n\t\t{\n\t\t\tif (pt != null)\n\t\t\t{\n\t\t\t\tvar left = Math.min(source.x, target.x);\n\t\t\t\tvar right = Math.max(source.x + source.width,\n\t\t\t\t\ttarget.x + target.width);\n\t\n\t\t\t\tvar top = Math.min(source.y, target.y);\n\t\t\t\tvar bottom = Math.max(source.y + source.height,\n\t\t\t\t\ttarget.y + target.height);\n\n\t\t\t\tpt = state.view.transformControlPoint(state, pt);\n\t\t\t\t\t\n\t\t\t\tvertical = pt.y < top || pt.y > bottom;\n\t\t\t\thorizontal = pt.x < left || pt.x > right;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar left = Math.max(source.x, target.x);\n\t\t\t\tvar right = Math.min(source.x + source.width,\n\t\t\t\t\ttarget.x + target.width);\n\t\t\t\t\t\n\t\t\t\tvertical = left == right;\n\t\t\t\t\n\t\t\t\tif (!vertical)\n\t\t\t\t{\n\t\t\t\t\tvar top = Math.max(source.y, target.y);\n\t\t\t\t\tvar bottom = Math.min(source.y + source.height,\n\t\t\t\t\t\ttarget.y + target.height);\n\t\t\t\t\t\t\n\t\t\t\t\thorizontal = top == bottom;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!horizontal && (vertical ||\n\t\t\tstate.style[mxConstants.STYLE_ELBOW] == mxConstants.ELBOW_VERTICAL))\n\t\t{\n\t\t\tmxEdgeStyle.TopToBottom(state, source, target, points, result);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmxEdgeStyle.SideToSide(state, source, target, points, result);\n\t\t}\n\t},\n\n\t/**\n\t * Function: SideToSide\n\t * \n\t * Implements a vertical elbow edge. See <EntityRelation> for a description\n\t * of the parameters.\n\t */\n\tSideToSide: function(state, source, target, points, result)\n\t{\n\t\tvar view = state.view;\n\t\tvar pt = (points != null && points.length > 0) ? points[0] : null;\n\t\tvar pts = state.absolutePoints;\n\t\tvar p0 = pts[0];\n\t\tvar pe = pts[pts.length-1];\n\t\t\n\t\tif (pt != null)\n\t\t{\n\t\t\tpt = view.transformControlPoint(state, pt);\n\t\t}\n\t\t\n\t\tif (p0 != null)\n\t\t{\n\t\t\tsource = new mxCellState();\n\t\t\tsource.x = p0.x;\n\t\t\tsource.y = p0.y;\n\t\t}\n\t\t\n\t\tif (pe != null)\n\t\t{\n\t\t\ttarget = new mxCellState();\n\t\t\ttarget.x = pe.x;\n\t\t\ttarget.y = pe.y;\n\t\t}\n\t\t\n\t\tif (source != null && target != null)\n\t\t{\n\t\t\tvar l = Math.max(source.x, target.x);\n\t\t\tvar r = Math.min(source.x + source.width,\n\t\t\t\t\t\t\t target.x + target.width);\n\t\n\t\t\tvar x = (pt != null) ? pt.x : Math.round(r + (l - r) / 2);\n\t\n\t\t\tvar y1 = view.getRoutingCenterY(source);\n\t\t\tvar y2 = view.getRoutingCenterY(target);\n\t\n\t\t\tif (pt != null)\n\t\t\t{\n\t\t\t\tif (pt.y >= source.y && pt.y <= source.y + source.height)\n\t\t\t\t{\n\t\t\t\t\ty1 = pt.y;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (pt.y >= target.y && pt.y <= target.y + target.height)\n\t\t\t\t{\n\t\t\t\t\ty2 = pt.y;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!mxUtils.contains(target, x, y1) &&\n\t\t\t\t!mxUtils.contains(source, x, y1))\n\t\t\t{\n\t\t\t\tresult.push(new mxPoint(x,  y1));\n\t\t\t}\n\t\n\t\t\tif (!mxUtils.contains(target, x, y2) &&\n\t\t\t\t!mxUtils.contains(source, x, y2))\n\t\t\t{\n\t\t\t\tresult.push(new mxPoint(x, y2));\n\t\t\t}\n\t\n\t\t\tif (result.length == 1)\n\t\t\t{\n\t\t\t\tif (pt != null)\n\t\t\t\t{\n\t\t\t\t\tif (!mxUtils.contains(target, x, pt.y) &&\n\t\t\t\t\t\t!mxUtils.contains(source, x, pt.y))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(new mxPoint(x, pt.y));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\t\n\t\t\t\t\tvar t = Math.max(source.y, target.y);\n\t\t\t\t\tvar b = Math.min(source.y + source.height,\n\t\t\t\t\t\t\t target.y + target.height);\n\t\t\t\t\t\t \n\t\t\t\t\tresult.push(new mxPoint(x, t + (b - t) / 2));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Function: TopToBottom\n\t * \n\t * Implements a horizontal elbow edge. See <EntityRelation> for a\n\t * description of the parameters.\n\t */\n\tTopToBottom: function(state, source, target, points, result)\n\t{\n\t\tvar view = state.view;\n\t\tvar pt = (points != null && points.length > 0) ? points[0] : null;\n\t\tvar pts = state.absolutePoints;\n\t\tvar p0 = pts[0];\n\t\tvar pe = pts[pts.length-1];\n\t\t\n\t\tif (pt != null)\n\t\t{\n\t\t\tpt = view.transformControlPoint(state, pt);\n\t\t}\n\t\t\n\t\tif (p0 != null)\n\t\t{\n\t\t\tsource = new mxCellState();\n\t\t\tsource.x = p0.x;\n\t\t\tsource.y = p0.y;\n\t\t}\n\t\t\n\t\tif (pe != null)\n\t\t{\n\t\t\ttarget = new mxCellState();\n\t\t\ttarget.x = pe.x;\n\t\t\ttarget.y = pe.y;\n\t\t}\n\n\t\tif (source != null && target != null)\n\t\t{\n\t\t\tvar t = Math.max(source.y, target.y);\n\t\t\tvar b = Math.min(source.y + source.height,\n\t\t\t\t\t\t\t target.y + target.height);\n\t\n\t\t\tvar x = view.getRoutingCenterX(source);\n\t\t\t\n\t\t\tif (pt != null &&\n\t\t\t\tpt.x >= source.x &&\n\t\t\t\tpt.x <= source.x + source.width)\n\t\t\t{\n\t\t\t\tx = pt.x;\n\t\t\t}\n\t\t\t\n\t\t\tvar y = (pt != null) ? pt.y : Math.round(b + (t - b) / 2);\n\t\t\t\n\t\t\tif (!mxUtils.contains(target, x, y) &&\n\t\t\t\t!mxUtils.contains(source, x, y))\n\t\t\t{\n\t\t\t\tresult.push(new mxPoint(x, y));\t\t\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif (pt != null &&\n\t\t\t\tpt.x >= target.x &&\n\t\t\t\tpt.x <= target.x + target.width)\n\t\t\t{\n\t\t\t\tx = pt.x;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tx = view.getRoutingCenterX(target);\n\t\t\t}\n\t\t\t\n\t\t\tif (!mxUtils.contains(target, x, y) &&\n\t\t\t\t!mxUtils.contains(source, x, y))\n\t\t\t{\n\t\t\t\tresult.push(new mxPoint(x, y));\t\t\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif (result.length == 1)\n\t\t\t{\n\t\t\t\tif (pt != null && result.length == 1)\n\t\t\t\t{\n\t\t\t\t\tif (!mxUtils.contains(target, pt.x, y) &&\n\t\t\t\t\t\t!mxUtils.contains(source, pt.x, y))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(new mxPoint(pt.x, y));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar l = Math.max(source.x, target.x);\n\t\t\t\t\tvar r = Math.min(source.x + source.width,\n\t\t\t\t\t\t\t target.x + target.width);\n\t\t\t\t\t\t \n\t\t\t\t\tresult.push(new mxPoint(l + (r - l) / 2, y));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Function: SegmentConnector\n\t * \n\t * Implements an orthogonal edge style. Use <mxEdgeSegmentHandler>\n\t * as an interactive handler for this style.\n\t * \n\t * state - <mxCellState> that represents the edge to be updated.\n\t * sourceScaled - <mxCellState> that represents the source terminal.\n\t * targetScaled - <mxCellState> that represents the target terminal.\n\t * controlHints - List of relative control points.\n\t * result - Array of <mxPoints> that represent the actual points of the\n\t * edge.\n\t *\n\t */\n\tSegmentConnector: function(state, sourceScaled, targetScaled, controlHints, result)\n\t{\n\t\t// Creates array of all way- and terminalpoints\n\t\tvar pts = mxEdgeStyle.scalePointArray(state.absolutePoints, state.view.scale);\n\t\tvar source = mxEdgeStyle.scaleCellState(sourceScaled, state.view.scale);\n\t\tvar target = mxEdgeStyle.scaleCellState(targetScaled, state.view.scale);\n\t\tvar tol = 1;\n\t\t\n\t\t// Whether the first segment outgoing from the source end is horizontal\n\t\tvar lastPushed = (result.length > 0) ? result[0] : null;\n\t\tvar horizontal = true;\n\t\tvar hint = null;\n\t\t\n\t\t// Adds waypoints only if outside of tolerance\n\t\tfunction pushPoint(pt)\n\t\t{\n\t\t\tpt.x = Math.round(pt.x * state.view.scale * 10) / 10;\n\t\t\tpt.y = Math.round(pt.y * state.view.scale * 10) / 10;\n\n\t\t\tif (lastPushed == null || Math.abs(lastPushed.x - pt.x) >= tol || Math.abs(lastPushed.y - pt.y) >= Math.max(1, state.view.scale))\n\t\t\t{\n\t\t\t\tresult.push(pt);\n\t\t\t\tlastPushed = pt;\n\t\t\t}\n\t\t\t\n\t\t\treturn lastPushed;\n\t\t};\n\n\t\t// Adds the first point\n\t\tvar pt = pts[0];\n\t\t\n\t\tif (pt == null && source != null)\n\t\t{\n\t\t\tpt = new mxPoint(state.view.getRoutingCenterX(source), state.view.getRoutingCenterY(source));\n\t\t}\n\t\telse if (pt != null)\n\t\t{\n\t\t\tpt = pt.clone();\n\t\t}\n\t\t\n\t\tvar lastInx = pts.length - 1;\n\n\t\t// Adds the waypoints\n\t\tif (controlHints != null && controlHints.length > 0)\n\t\t{\n\t\t\t// Converts all hints and removes nulls\n\t\t\tvar hints = [];\n\t\t\t\n\t\t\tfor (var i = 0; i < controlHints.length; i++)\n\t\t\t{\n\t\t\t\tvar tmp = state.view.transformControlPoint(state, controlHints[i], true);\n\t\t\t\t\n\t\t\t\tif (tmp != null)\n\t\t\t\t{\n\t\t\t\t\thints.push(tmp);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (hints.length == 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Aligns source and target hint to fixed points\n\t\t\tif (pt != null && hints[0] != null)\n\t\t\t{\n\t\t\t\tif (Math.abs(hints[0].x - pt.x) < tol)\n\t\t\t\t{\n\t\t\t\t\thints[0].x = pt.x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (Math.abs(hints[0].y - pt.y) < tol)\n\t\t\t\t{\n\t\t\t\t\thints[0].y = pt.y;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar pe = pts[lastInx];\n\t\t\t\n\t\t\tif (pe != null && hints[hints.length - 1] != null)\n\t\t\t{\n\t\t\t\tif (Math.abs(hints[hints.length - 1].x - pe.x) < tol)\n\t\t\t\t{\n\t\t\t\t\thints[hints.length - 1].x = pe.x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (Math.abs(hints[hints.length - 1].y - pe.y) < tol)\n\t\t\t\t{\n\t\t\t\t\thints[hints.length - 1].y = pe.y;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\thint = hints[0];\n\n\t\t\tvar currentTerm = source;\n\t\t\tvar currentPt = pts[0];\n\t\t\tvar hozChan = false;\n\t\t\tvar vertChan = false;\n\t\t\tvar currentHint = hint;\n\t\t\t\n\t\t\tif (currentPt != null)\n\t\t\t{\n\t\t\t\tcurrentTerm = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Check for alignment with fixed points and with channels\n\t\t\t// at source and target segments only\n\t\t\tfor (var i = 0; i < 2; i++)\n\t\t\t{\n\t\t\t\tvar fixedVertAlign = currentPt != null && currentPt.x == currentHint.x;\n\t\t\t\tvar fixedHozAlign = currentPt != null && currentPt.y == currentHint.y;\n\t\t\t\t\n\t\t\t\tvar inHozChan = currentTerm != null && (currentHint.y >= currentTerm.y &&\n\t\t\t\t\t\tcurrentHint.y <= currentTerm.y + currentTerm.height);\n\t\t\t\tvar inVertChan = currentTerm != null && (currentHint.x >= currentTerm.x &&\n\t\t\t\t\t\tcurrentHint.x <= currentTerm.x + currentTerm.width);\n\n\t\t\t\thozChan = fixedHozAlign || (currentPt == null && inHozChan);\n\t\t\t\tvertChan = fixedVertAlign || (currentPt == null && inVertChan);\n\t\t\t\t\n\t\t\t\t// If the current hint falls in both the hor and vert channels in the case\n\t\t\t\t// of a floating port, or if the hint is exactly co-incident with a \n\t\t\t\t// fixed point, ignore the source and try to work out the orientation\n\t\t\t\t// from the target end\n\t\t\t\tif (i==0 && ((hozChan && vertChan) || (fixedVertAlign && fixedHozAlign)))\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (currentPt != null && (!fixedHozAlign && !fixedVertAlign) && (inHozChan || inVertChan)) \n\t\t\t\t\t{\n\t\t\t\t\t\thorizontal = inHozChan ? false : true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\tif (vertChan || hozChan)\n\t\t\t\t\t{\n\t\t\t\t\t\thorizontal = hozChan;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (i == 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Work back from target end\n\t\t\t\t\t\t\thorizontal = hints.length % 2 == 0 ? hozChan : vertChan;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcurrentTerm = target;\n\t\t\t\tcurrentPt = pts[lastInx];\n\t\t\t\t\n\t\t\t\tif (currentPt != null)\n\t\t\t\t{\n\t\t\t\t\tcurrentTerm = null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcurrentHint = hints[hints.length - 1];\n\t\t\t\t\n\t\t\t\tif (fixedVertAlign && fixedHozAlign)\n\t\t\t\t{\n\t\t\t\t\thints = hints.slice(1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (horizontal && ((pts[0] != null && pts[0].y != hint.y) ||\n\t\t\t\t(pts[0] == null && source != null &&\n\t\t\t\t(hint.y < source.y || hint.y > source.y + source.height))))\n\t\t\t{\n\t\t\t\tpushPoint(new mxPoint(pt.x, hint.y));\n\t\t\t}\n\t\t\telse if (!horizontal && ((pts[0] != null && pts[0].x != hint.x) ||\n\t\t\t\t\t(pts[0] == null && source != null &&\n\t\t\t\t\t(hint.x < source.x || hint.x > source.x + source.width))))\n\t\t\t{\n\t\t\t\tpushPoint(new mxPoint(hint.x, pt.y));\n\t\t\t}\n\t\t\t\n\t\t\tif (horizontal)\n\t\t\t{\n\t\t\t\tpt.y = hint.y;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpt.x = hint.x;\n\t\t\t}\n\t\t\n\t\t\tfor (var i = 0; i < hints.length; i++)\n\t\t\t{\n\t\t\t\thorizontal = !horizontal;\n\t\t\t\thint = hints[i];\n\t\t\t\t\n//\t\t\t\tmxLog.show();\n//\t\t\t\tmxLog.debug('hint', i, hint.x, hint.y);\n\t\t\t\t\n\t\t\t\tif (horizontal)\n\t\t\t\t{\n\t\t\t\t\tpt.y = hint.y;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpt.x = hint.x;\n\t\t\t\t}\n\t\t\n\t\t\t\tpushPoint(pt.clone());\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\thint = pt;\n\t\t\t// FIXME: First click in connect preview toggles orientation\n\t\t\thorizontal = true;\n\t\t}\n\n\t\t// Adds the last point\n\t\tpt = pts[lastInx];\n\n\t\tif (pt == null && target != null)\n\t\t{\n\t\t\tpt = new mxPoint(state.view.getRoutingCenterX(target), state.view.getRoutingCenterY(target));\n\t\t}\n\t\t\n\t\tif (pt != null)\n\t\t{\n\t\t\tif (hint != null)\n\t\t\t{\n\t\t\t\tif (horizontal && ((pts[lastInx] != null && pts[lastInx].y != hint.y) ||\n\t\t\t\t\t(pts[lastInx] == null && target != null &&\n\t\t\t\t\t(hint.y < target.y || hint.y > target.y + target.height))))\n\t\t\t\t{\n\t\t\t\t\tpushPoint(new mxPoint(pt.x, hint.y));\n\t\t\t\t}\n\t\t\t\telse if (!horizontal && ((pts[lastInx] != null && pts[lastInx].x != hint.x) ||\n\t\t\t\t\t\t(pts[lastInx] == null && target != null &&\n\t\t\t\t\t\t(hint.x < target.x || hint.x > target.x + target.width))))\n\t\t\t\t{\n\t\t\t\t\tpushPoint(new mxPoint(hint.x, pt.y));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Removes bends inside the source terminal for floating ports\n\t\tif (pts[0] == null && source != null)\n\t\t{\n\t\t\twhile (result.length > 1 && result[1] != null &&\n\t\t\t\tmxUtils.contains(source, result[1].x, result[1].y))\n\t\t\t{\n\t\t\t\tresult.splice(1, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Removes bends inside the target terminal\n\t\tif (pts[lastInx] == null && target != null)\n\t\t{\n\t\t\twhile (result.length > 1 && result[result.length - 1] != null &&\n\t\t\t\tmxUtils.contains(target, result[result.length - 1].x, result[result.length - 1].y))\n\t\t\t{\n\t\t\t\tresult.splice(result.length - 1, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Removes last point if inside tolerance with end point\n\t\tif (pe != null && result[result.length - 1] != null &&\n\t\t\tMath.abs(pe.x - result[result.length - 1].x) <= tol &&\n\t\t\tMath.abs(pe.y - result[result.length - 1].y) <= tol)\n\t\t{\n\t\t\tresult.splice(result.length - 1, 1);\n\t\t\t\n\t\t\t// Lines up second last point in result with end point\n\t\t\tif (result[result.length - 1] != null)\n\t\t\t{\n\t\t\t\tif (Math.abs(result[result.length - 1].x - pe.x) < tol)\n\t\t\t\t{\n\t\t\t\t\tresult[result.length - 1].x = pe.x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (Math.abs(result[result.length - 1].y - pe.y) < tol)\n\t\t\t\t{\n\t\t\t\t\tresult[result.length - 1].y = pe.y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\torthBuffer: 10,\n\t\n\torthPointsFallback: true,\n\n\tdirVectors: [ [ -1, 0 ],\n\t\t\t[ 0, -1 ], [ 1, 0 ], [ 0, 1 ], [ -1, 0 ], [ 0, -1 ], [ 1, 0 ] ],\n\n\twayPoints1: [ [ 0, 0], [ 0, 0],  [ 0, 0], [ 0, 0], [ 0, 0],  [ 0, 0],\n\t              [ 0, 0],  [ 0, 0], [ 0, 0],  [ 0, 0], [ 0, 0],  [ 0, 0] ],\n\n\troutePatterns: [\n\t\t[ [ 513, 2308, 2081, 2562 ], [ 513, 1090, 514, 2184, 2114, 2561 ],\n\t\t\t[ 513, 1090, 514, 2564, 2184, 2562 ],\n\t\t\t[ 513, 2308, 2561, 1090, 514, 2568, 2308 ] ],\n\t[ [ 514, 1057, 513, 2308, 2081, 2562 ], [ 514, 2184, 2114, 2561 ],\n\t\t\t[ 514, 2184, 2562, 1057, 513, 2564, 2184 ],\n\t\t\t[ 514, 1057, 513, 2568, 2308, 2561 ] ],\n\t[ [ 1090, 514, 1057, 513, 2308, 2081, 2562 ], [ 2114, 2561 ],\n\t\t\t[ 1090, 2562, 1057, 513, 2564, 2184 ],\n\t\t\t[ 1090, 514, 1057, 513, 2308, 2561, 2568 ] ],\n\t[ [ 2081, 2562 ], [ 1057, 513, 1090, 514, 2184, 2114, 2561 ],\n\t\t\t[ 1057, 513, 1090, 514, 2184, 2562, 2564 ],\n\t\t\t[ 1057, 2561, 1090, 514, 2568, 2308 ] ] ],\n\t\n\tinlineRoutePatterns: [\n\t\t\t[ null, [ 2114, 2568 ], null, null ],\n\t\t\t[ null, [ 514, 2081, 2114, 2568 ] , null, null ],\n\t\t\t[ null, [ 2114, 2561 ], null, null ],\n\t\t\t[ [ 2081, 2562 ], [ 1057, 2114, 2568 ],\n\t\t\t\t\t[ 2184, 2562 ],\n\t\t\t\t\tnull ] ],\n\tvertexSeperations: [],\n\n\tlimits: [\n\t       [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ],\n\t       [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ] ],\n\n\tLEFT_MASK: 32,\n\n\tTOP_MASK: 64,\n\n\tRIGHT_MASK: 128,\n\n\tBOTTOM_MASK: 256,\n\n\tLEFT: 1,\n\n\tTOP: 2,\n\n\tRIGHT: 4,\n\n\tBOTTOM: 8,\n\n\t// TODO remove magic numbers\n\tSIDE_MASK: 480,\n\t//mxEdgeStyle.LEFT_MASK | mxEdgeStyle.TOP_MASK | mxEdgeStyle.RIGHT_MASK\n\t//| mxEdgeStyle.BOTTOM_MASK,\n\n\tCENTER_MASK: 512,\n\n\tSOURCE_MASK: 1024,\n\n\tTARGET_MASK: 2048,\n\n\tVERTEX_MASK: 3072,\n\t// mxEdgeStyle.SOURCE_MASK | mxEdgeStyle.TARGET_MASK,\n\t\n\tgetJettySize: function(state, isSource)\n\t{\n\t\tvar value = mxUtils.getValue(state.style, (isSource) ? mxConstants.STYLE_SOURCE_JETTY_SIZE :\n\t\t\tmxConstants.STYLE_TARGET_JETTY_SIZE, mxUtils.getValue(state.style,\n\t\t\t\t\tmxConstants.STYLE_JETTY_SIZE, mxEdgeStyle.orthBuffer));\n\t\t\n\t\tif (value == 'auto')\n\t\t{\n\t\t\t// Computes the automatic jetty size\n\t\t\tvar type = mxUtils.getValue(state.style, (isSource) ? mxConstants.STYLE_STARTARROW : mxConstants.STYLE_ENDARROW, mxConstants.NONE);\n\t\t\t\n\t\t\tif (type != mxConstants.NONE)\n\t\t\t{\n\t\t\t\tvar size = mxUtils.getNumber(state.style, (isSource) ? mxConstants.STYLE_STARTSIZE : mxConstants.STYLE_ENDSIZE, mxConstants.DEFAULT_MARKERSIZE);\n\t\t\t\tvalue = Math.max(2, Math.ceil((size + mxEdgeStyle.orthBuffer) / mxEdgeStyle.orthBuffer)) * mxEdgeStyle.orthBuffer;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalue = 2 * mxEdgeStyle.orthBuffer;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn value;\n\t},\n\t\n\t/**\n\t * Function: scalePointArray\n\t * \n\t * Scales an array of <mxPoint>\n\t * \n\t * Parameters:\n\t * \n\t * points - array of <mxPoint> to scale\n\t * scale - the scaling to divide by\n\t * \n\t */\n\tscalePointArray: function(points, scale)\n\t{\n\t\tvar result = [];\n\n\t\tif (points != null)\n\t\t{\n\t\t\tfor (var i = 0; i < points.length; i++)\n\t\t\t{\n\t\t\t\tif (points[i] != null)\n\t\t\t\t{\n\t\t\t\t\tvar pt = new mxPoint(Math.round(points[i].x / scale * 10) / 10,\n\t\t\t\t\t\t\t\t\t\tMath.round(points[i].y / scale * 10) / 10);\n\t\t\t\t\tresult[i] = pt;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[i] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult = null;\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Function: scaleCellState\n\t * \n\t * Scales an <mxCellState>\n\t * \n\t * Parameters:\n\t * \n\t * state - <mxCellState> to scale\n\t * scale - the scaling to divide by\n\t * \n\t */\n\tscaleCellState: function(state, scale)\n\t{\n\t\tvar result = null;\n\n\t\tif (state != null)\n\t\t{\n\t\t\tresult = state.clone();\n\t\t\tresult.setRect(Math.round(state.x / scale * 10) / 10,\n\t\t\t\t\t\t\tMath.round(state.y / scale * 10) / 10,\n\t\t\t\t\t\t\tMath.round(state.width / scale * 10) / 10,\n\t\t\t\t\t\t\tMath.round(state.height / scale * 10) / 10);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult = null;\n\t\t}\n\t\t\n\t\treturn result;\n\t},\n\n\t/**\n\t * Function: OrthConnector\n\t * \n\t * Implements a local orthogonal router between the given\n\t * cells.\n\t * \n\t * Parameters:\n\t * \n\t * state - <mxCellState> that represents the edge to be updated.\n\t * sourceScaled - <mxCellState> that represents the source terminal.\n\t * targetScaled - <mxCellState> that represents the target terminal.\n\t * controlHints - List of relative control points.\n\t * result - Array of <mxPoints> that represent the actual points of the\n\t * edge.\n\t * \n\t */\n\tOrthConnector: function(state, sourceScaled, targetScaled, controlHints, result)\n\t{\n\t\tvar graph = state.view.graph;\n\t\tvar sourceEdge = source == null ? false : graph.getModel().isEdge(source.cell);\n\t\tvar targetEdge = target == null ? false : graph.getModel().isEdge(target.cell);\n\n\t\tvar pts = mxEdgeStyle.scalePointArray(state.absolutePoints, state.view.scale);\n\t\tvar source = mxEdgeStyle.scaleCellState(sourceScaled, state.view.scale);\n\t\tvar target = mxEdgeStyle.scaleCellState(targetScaled, state.view.scale);\n\n\t\tvar p0 = pts[0];\n\t\tvar pe = pts[pts.length-1];\n\t\t\n\t\tvar sourceX = source != null ? source.x : p0.x;\n\t\tvar sourceY = source != null ? source.y : p0.y;\n\t\tvar sourceWidth = source != null ? source.width : 0;\n\t\tvar sourceHeight = source != null ? source.height : 0;\n\t\t\n\t\tvar targetX = target != null ? target.x : pe.x;\n\t\tvar targetY = target != null ? target.y : pe.y;\n\t\tvar targetWidth = target != null ? target.width : 0;\n\t\tvar targetHeight = target != null ? target.height : 0;\n\n\t\tvar sourceBuffer = mxEdgeStyle.getJettySize(state, true);\n\t\tvar targetBuffer = mxEdgeStyle.getJettySize(state, false);\n\t\t\n\t\t//console.log('sourceBuffer', sourceBuffer);\n\t\t//console.log('targetBuffer', targetBuffer);\n\t\t// Workaround for loop routing within buffer zone\n\t\tif (source != null && target == source)\n\t\t{\n\t\t\ttargetBuffer = Math.max(sourceBuffer, targetBuffer);\n\t\t\tsourceBuffer = targetBuffer;\n\t\t}\n\t\t\n\t\tvar totalBuffer = targetBuffer + sourceBuffer;\n\t\t// console.log('totalBuffer', totalBuffer);\n\t\tvar tooShort = false;\n\t\t\n\t\t// Checks minimum distance for fixed points and falls back to segment connector\n\t\tif (p0 != null && pe != null)\n\t\t{\n\t\t\tvar dx = pe.x - p0.x;\n\t\t\tvar dy = pe.y - p0.y;\n\t\t\t\n\t\t\ttooShort = dx * dx + dy * dy < totalBuffer * totalBuffer;\n\t\t}\n\n\t\tif (tooShort || (mxEdgeStyle.orthPointsFallback && (controlHints != null &&\n\t\t\t\tcontrolHints.length > 0)) || sourceEdge || targetEdge)\n\t\t{\n\t\t\tmxEdgeStyle.SegmentConnector(state, sourceScaled, targetScaled, controlHints, result);\n\t\t\t\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine the side(s) of the source and target vertices\n\t\t// that the edge may connect to\n\t\t// portConstraint [source, target]\n\t\tvar portConstraint = [mxConstants.DIRECTION_MASK_ALL, mxConstants.DIRECTION_MASK_ALL];\n\t\tvar rotation = 0;\n\t\t\n\t\tif (source != null)\n\t\t{\n\t\t\tportConstraint[0] = mxUtils.getPortConstraints(source, state, true, \n\t\t\t\t\tmxConstants.DIRECTION_MASK_ALL);\n\t\t\trotation = mxUtils.getValue(source.style, mxConstants.STYLE_ROTATION, 0);\n\t\t\t\n\t\t\t//console.log('source rotation', rotation);\n\t\t\t\n\t\t\tif (rotation != 0)\n\t\t\t{\n\t\t\t\tvar newRect = mxUtils.getBoundingBox(new mxRectangle(sourceX, sourceY, sourceWidth, sourceHeight), rotation);\n\t\t\t\tsourceX = newRect.x; \n\t\t\t\tsourceY = newRect.y;\n\t\t\t\tsourceWidth = newRect.width;\n\t\t\t\tsourceHeight = newRect.height;\n\t\t\t}\n\t\t}\n\n\t\tif (target != null)\n\t\t{\n\t\t\tportConstraint[1] = mxUtils.getPortConstraints(target, state, false,\n\t\t\t\tmxConstants.DIRECTION_MASK_ALL);\n\t\t\trotation = mxUtils.getValue(target.style, mxConstants.STYLE_ROTATION, 0);\n\t\t\t\n\t\t\t//console.log('target rotation', rotation);\n\n\t\t\tif (rotation != 0)\n\t\t\t{\n\t\t\t\tvar newRect = mxUtils.getBoundingBox(new mxRectangle(targetX, targetY, targetWidth, targetHeight), rotation);\n\t\t\t\ttargetX = newRect.x;\n\t\t\t\ttargetY = newRect.y;\n\t\t\t\ttargetWidth = newRect.width;\n\t\t\t\ttargetHeight = newRect.height;\n\t\t\t}\n\t\t}\n\n\t\t//console.log('source' , sourceX, sourceY, sourceWidth, sourceHeight);\n\t\t//console.log('targetX' , targetX, targetY, targetWidth, targetHeight);\n\n\t\tvar dir = [0, 0];\n\n\t\t// Work out which faces of the vertices present against each other\n\t\t// in a way that would allow a 3-segment connection if port constraints\n\t\t// permitted.\n\t\t// geo -> [source, target] [x, y, width, height]\n\t\tvar geo = [ [sourceX, sourceY, sourceWidth, sourceHeight] ,\n\t\t            [targetX, targetY, targetWidth, targetHeight] ];\n\t\tvar buffer = [sourceBuffer, targetBuffer];\n\n\t\tfor (var i = 0; i < 2; i++)\n\t\t{\n\t\t\tmxEdgeStyle.limits[i][1] = geo[i][0] - buffer[i];\n\t\t\tmxEdgeStyle.limits[i][2] = geo[i][1] - buffer[i];\n\t\t\tmxEdgeStyle.limits[i][4] = geo[i][0] + geo[i][2] + buffer[i];\n\t\t\tmxEdgeStyle.limits[i][8] = geo[i][1] + geo[i][3] + buffer[i];\n\t\t}\n\t\t\n\t\t// Work out which quad the target is in\n\t\tvar sourceCenX = geo[0][0] + geo[0][2] / 2.0;\n\t\tvar sourceCenY = geo[0][1] + geo[0][3] / 2.0;\n\t\tvar targetCenX = geo[1][0] + geo[1][2] / 2.0;\n\t\tvar targetCenY = geo[1][1] + geo[1][3] / 2.0;\n\t\t\n\t\tvar dx = sourceCenX - targetCenX;\n\t\tvar dy = sourceCenY - targetCenY;\n\n\t\tvar quad = 0;\n\n\t\t// 0 | 1\n\t\t// -----\n\t\t// 3 | 2\n\t\t\n\t\tif (dx < 0)\n\t\t{\n\t\t\tif (dy < 0)\n\t\t\t{\n\t\t\t\tquad = 2;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tquad = 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (dy <= 0)\n\t\t\t{\n\t\t\t\tquad = 3;\n\t\t\t\t\n\t\t\t\t// Special case on x = 0 and negative y\n\t\t\t\tif (dx == 0)\n\t\t\t\t{\n\t\t\t\t\tquad = 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//console.log('quad', quad);\n\n\t\t// Check for connection constraints\n\t\tvar currentTerm = null;\n\t\t\n\t\tif (source != null)\n\t\t{\n\t\t\tcurrentTerm = p0;\n\t\t}\n\n\t\tvar constraint = [ [0.5, 0.5] , [0.5, 0.5] ];\n\n\t\tfor (var i = 0; i < 2; i++)\n\t\t{\n\t\t\tif (currentTerm != null)\n\t\t\t{\n\t\t\t\tconstraint[i][0] = (currentTerm.x - geo[i][0]) / geo[i][2];\n\t\t\t\t\n\t\t\t\tif (Math.abs(currentTerm.x - geo[i][0]) <= 1)\n\t\t\t\t{\n\t\t\t\t\tdir[i] = mxConstants.DIRECTION_MASK_WEST;\n\t\t\t\t}\n\t\t\t\telse if (Math.abs(currentTerm.x - geo[i][0] - geo[i][2]) <= 1)\n\t\t\t\t{\n\t\t\t\t\tdir[i] = mxConstants.DIRECTION_MASK_EAST;\n\t\t\t\t}\n\n\t\t\t\tconstraint[i][1] = (currentTerm.y - geo[i][1]) / geo[i][3];\n\n\t\t\t\tif (Math.abs(currentTerm.y - geo[i][1]) <= 1)\n\t\t\t\t{\n\t\t\t\t\tdir[i] = mxConstants.DIRECTION_MASK_NORTH;\n\t\t\t\t}\n\t\t\t\telse if (Math.abs(currentTerm.y - geo[i][1] - geo[i][3]) <= 1)\n\t\t\t\t{\n\t\t\t\t\tdir[i] = mxConstants.DIRECTION_MASK_SOUTH;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrentTerm = null;\n\t\t\t\n\t\t\tif (target != null)\n\t\t\t{\n\t\t\t\tcurrentTerm = pe;\n\t\t\t}\n\t\t}\n\n\t\tvar sourceTopDist = geo[0][1] - (geo[1][1] + geo[1][3]);\n\t\tvar sourceLeftDist = geo[0][0] - (geo[1][0] + geo[1][2]);\n\t\tvar sourceBottomDist = geo[1][1] - (geo[0][1] + geo[0][3]);\n\t\tvar sourceRightDist = geo[1][0] - (geo[0][0] + geo[0][2]);\n\n\t\tmxEdgeStyle.vertexSeperations[1] = Math.max(sourceLeftDist - totalBuffer, 0);\n\t\tmxEdgeStyle.vertexSeperations[2] = Math.max(sourceTopDist - totalBuffer, 0);\n\t\tmxEdgeStyle.vertexSeperations[4] = Math.max(sourceBottomDist - totalBuffer, 0);\n\t\tmxEdgeStyle.vertexSeperations[3] = Math.max(sourceRightDist - totalBuffer, 0);\n\t\t\t\t\n\t\t//==============================================================\n\t\t// Start of source and target direction determination\n\n\t\t// Work through the preferred orientations by relative positioning\n\t\t// of the vertices and list them in preferred and available order\n\t\t\n\t\tvar dirPref = [];\n\t\tvar horPref = [];\n\t\tvar vertPref = [];\n\n\t\thorPref[0] = (sourceLeftDist >= sourceRightDist) ? mxConstants.DIRECTION_MASK_WEST\n\t\t\t\t: mxConstants.DIRECTION_MASK_EAST;\n\t\tvertPref[0] = (sourceTopDist >= sourceBottomDist) ? mxConstants.DIRECTION_MASK_NORTH\n\t\t\t\t: mxConstants.DIRECTION_MASK_SOUTH;\n\n\t\thorPref[1] = mxUtils.reversePortConstraints(horPref[0]);\n\t\tvertPref[1] = mxUtils.reversePortConstraints(vertPref[0]);\n\t\t\n\t\tvar preferredHorizDist = sourceLeftDist >= sourceRightDist ? sourceLeftDist\n\t\t\t\t: sourceRightDist;\n\t\tvar preferredVertDist = sourceTopDist >= sourceBottomDist ? sourceTopDist\n\t\t\t\t: sourceBottomDist;\n\n\t\tvar prefOrdering = [ [0, 0] , [0, 0] ];\n\t\tvar preferredOrderSet = false;\n\n\t\t// If the preferred port isn't available, switch it\n\t\tfor (var i = 0; i < 2; i++)\n\t\t{\n\t\t\tif (dir[i] != 0x0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ((horPref[i] & portConstraint[i]) == 0)\n\t\t\t{\n\t\t\t\thorPref[i] = mxUtils.reversePortConstraints(horPref[i]);\n\t\t\t}\n\n\t\t\tif ((vertPref[i] & portConstraint[i]) == 0)\n\t\t\t{\n\t\t\t\tvertPref[i] = mxUtils\n\t\t\t\t\t\t.reversePortConstraints(vertPref[i]);\n\t\t\t}\n\n\t\t\tprefOrdering[i][0] = vertPref[i];\n\t\t\tprefOrdering[i][1] = horPref[i];\n\t\t}\n\n\t\tif (preferredVertDist > 0\n\t\t\t\t&& preferredHorizDist > 0)\n\t\t{\n\t\t\t// Possibility of two segment edge connection\n\t\t\tif (((horPref[0] & portConstraint[0]) > 0)\n\t\t\t\t\t&& ((vertPref[1] & portConstraint[1]) > 0))\n\t\t\t{\n\t\t\t\tprefOrdering[0][0] = horPref[0];\n\t\t\t\tprefOrdering[0][1] = vertPref[0];\n\t\t\t\tprefOrdering[1][0] = vertPref[1];\n\t\t\t\tprefOrdering[1][1] = horPref[1];\n\t\t\t\tpreferredOrderSet = true;\n\t\t\t}\n\t\t\telse if (((vertPref[0] & portConstraint[0]) > 0)\n\t\t\t\t\t&& ((horPref[1] & portConstraint[1]) > 0))\n\t\t\t{\n\t\t\t\tprefOrdering[0][0] = vertPref[0];\n\t\t\t\tprefOrdering[0][1] = horPref[0];\n\t\t\t\tprefOrdering[1][0] = horPref[1];\n\t\t\t\tprefOrdering[1][1] = vertPref[1];\n\t\t\t\tpreferredOrderSet = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (preferredVertDist > 0 && !preferredOrderSet)\n\t\t{\n\t\t\tprefOrdering[0][0] = vertPref[0];\n\t\t\tprefOrdering[0][1] = horPref[0];\n\t\t\tprefOrdering[1][0] = vertPref[1];\n\t\t\tprefOrdering[1][1] = horPref[1];\n\t\t\tpreferredOrderSet = true;\n\n\t\t}\n\t\t\n\t\tif (preferredHorizDist > 0 && !preferredOrderSet)\n\t\t{\n\t\t\tprefOrdering[0][0] = horPref[0];\n\t\t\tprefOrdering[0][1] = vertPref[0];\n\t\t\tprefOrdering[1][0] = horPref[1];\n\t\t\tprefOrdering[1][1] = vertPref[1];\n\t\t\tpreferredOrderSet = true;\n\t\t}\n\n\t\t// The source and target prefs are now an ordered list of\n\t\t// the preferred port selections\n\t\t// If the list contains gaps, compact it\n\n\t\tfor (var i = 0; i < 2; i++)\n\t\t{\n\t\t\tif (dir[i] != 0x0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ((prefOrdering[i][0] & portConstraint[i]) == 0)\n\t\t\t{\n\t\t\t\tprefOrdering[i][0] = prefOrdering[i][1];\n\t\t\t}\n\n\t\t\tdirPref[i] = prefOrdering[i][0] & portConstraint[i];\n\t\t\tdirPref[i] |= (prefOrdering[i][1] & portConstraint[i]) << 8;\n\t\t\tdirPref[i] |= (prefOrdering[1 - i][i] & portConstraint[i]) << 16;\n\t\t\tdirPref[i] |= (prefOrdering[1 - i][1 - i] & portConstraint[i]) << 24;\n\n\t\t\tif ((dirPref[i] & 0xF) == 0)\n\t\t\t{\n\t\t\t\tdirPref[i] = dirPref[i] << 8;\n\t\t\t}\n\t\t\t\n\t\t\tif ((dirPref[i] & 0xF00) == 0)\n\t\t\t{\n\t\t\t\tdirPref[i] = (dirPref[i] & 0xF) | dirPref[i] >> 8;\n\t\t\t}\n\t\t\t\n\t\t\tif ((dirPref[i] & 0xF0000) == 0)\n\t\t\t{\n\t\t\t\tdirPref[i] = (dirPref[i] & 0xFFFF)\n\t\t\t\t\t\t| ((dirPref[i] & 0xF000000) >> 8);\n\t\t\t}\n\n\t\t\tdir[i] = dirPref[i] & 0xF;\n\n\t\t\tif (portConstraint[i] == mxConstants.DIRECTION_MASK_WEST\n\t\t\t\t\t|| portConstraint[i] == mxConstants.DIRECTION_MASK_NORTH\n\t\t\t\t\t|| portConstraint[i] == mxConstants.DIRECTION_MASK_EAST\n\t\t\t\t\t|| portConstraint[i] == mxConstants.DIRECTION_MASK_SOUTH)\n\t\t\t{\n\t\t\t\tdir[i] = portConstraint[i];\n\t\t\t}\n\t\t}\n\n\t\t//==============================================================\n\t\t// End of source and target direction determination\n\n\t\tvar sourceIndex = dir[0] == mxConstants.DIRECTION_MASK_EAST ? 3\n\t\t\t\t: dir[0];\n\t\tvar targetIndex = dir[1] == mxConstants.DIRECTION_MASK_EAST ? 3\n\t\t\t\t: dir[1];\n\n\t\tsourceIndex -= quad;\n\t\ttargetIndex -= quad;\n\n\t\tif (sourceIndex < 1)\n\t\t{\n\t\t\tsourceIndex += 4;\n\t\t}\n\t\t\n\t\tif (targetIndex < 1)\n\t\t{\n\t\t\ttargetIndex += 4;\n\t\t}\n\n\t\tvar routePattern = mxEdgeStyle.routePatterns[sourceIndex - 1][targetIndex - 1];\n\t\t\n\t\t//console.log('routePattern', routePattern);\n\n\t\tmxEdgeStyle.wayPoints1[0][0] = geo[0][0];\n\t\tmxEdgeStyle.wayPoints1[0][1] = geo[0][1];\n\n\t\tswitch (dir[0])\n\t\t{\n\t\t\tcase mxConstants.DIRECTION_MASK_WEST:\n\t\t\t\tmxEdgeStyle.wayPoints1[0][0] -= sourceBuffer;\n\t\t\t\tmxEdgeStyle.wayPoints1[0][1] += constraint[0][1] * geo[0][3];\n\t\t\t\tbreak;\n\t\t\tcase mxConstants.DIRECTION_MASK_SOUTH:\n\t\t\t\tmxEdgeStyle.wayPoints1[0][0] += constraint[0][0] * geo[0][2];\n\t\t\t\tmxEdgeStyle.wayPoints1[0][1] += geo[0][3] + sourceBuffer;\n\t\t\t\tbreak;\n\t\t\tcase mxConstants.DIRECTION_MASK_EAST:\n\t\t\t\tmxEdgeStyle.wayPoints1[0][0] += geo[0][2] + sourceBuffer;\n\t\t\t\tmxEdgeStyle.wayPoints1[0][1] += constraint[0][1] * geo[0][3];\n\t\t\t\tbreak;\n\t\t\tcase mxConstants.DIRECTION_MASK_NORTH:\n\t\t\t\tmxEdgeStyle.wayPoints1[0][0] += constraint[0][0] * geo[0][2];\n\t\t\t\tmxEdgeStyle.wayPoints1[0][1] -= sourceBuffer;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tvar currentIndex = 0;\n\n\t\t// Orientation, 0 horizontal, 1 vertical\n\t\tvar lastOrientation = (dir[0] & (mxConstants.DIRECTION_MASK_EAST | mxConstants.DIRECTION_MASK_WEST)) > 0 ? 0\n\t\t\t\t: 1;\n\t\tvar initialOrientation = lastOrientation;\n\t\tvar currentOrientation = 0;\n\n\t\tfor (var i = 0; i < routePattern.length; i++)\n\t\t{\n\t\t\tvar nextDirection = routePattern[i] & 0xF;\n\n\t\t\t// Rotate the index of this direction by the quad\n\t\t\t// to get the real direction\n\t\t\tvar directionIndex = nextDirection == mxConstants.DIRECTION_MASK_EAST ? 3\n\t\t\t\t\t: nextDirection;\n\n\t\t\tdirectionIndex += quad;\n\n\t\t\tif (directionIndex > 4)\n\t\t\t{\n\t\t\t\tdirectionIndex -= 4;\n\t\t\t}\n\n\t\t\tvar direction = mxEdgeStyle.dirVectors[directionIndex - 1];\n\n\t\t\tcurrentOrientation = (directionIndex % 2 > 0) ? 0 : 1;\n\t\t\t// Only update the current index if the point moved\n\t\t\t// in the direction of the current segment move,\n\t\t\t// otherwise the same point is moved until there is \n\t\t\t// a segment direction change\n\t\t\tif (currentOrientation != lastOrientation)\n\t\t\t{\n\t\t\t\tcurrentIndex++;\n\t\t\t\t// Copy the previous way point into the new one\n\t\t\t\t// We can't base the new position on index - 1\n\t\t\t\t// because sometime elbows turn out not to exist,\n\t\t\t\t// then we'd have to rewind.\n\t\t\t\tmxEdgeStyle.wayPoints1[currentIndex][0] = mxEdgeStyle.wayPoints1[currentIndex - 1][0];\n\t\t\t\tmxEdgeStyle.wayPoints1[currentIndex][1] = mxEdgeStyle.wayPoints1[currentIndex - 1][1];\n\t\t\t}\n\n\t\t\tvar tar = (routePattern[i] & mxEdgeStyle.TARGET_MASK) > 0;\n\t\t\tvar sou = (routePattern[i] & mxEdgeStyle.SOURCE_MASK) > 0;\n\t\t\tvar side = (routePattern[i] & mxEdgeStyle.SIDE_MASK) >> 5;\n\t\t\tside = side << quad;\n\n\t\t\tif (side > 0xF)\n\t\t\t{\n\t\t\t\tside = side >> 4;\n\t\t\t}\n\n\t\t\tvar center = (routePattern[i] & mxEdgeStyle.CENTER_MASK) > 0;\n\n\t\t\tif ((sou || tar) && side < 9)\n\t\t\t{\n\t\t\t\tvar limit = 0;\n\t\t\t\tvar souTar = sou ? 0 : 1;\n\n\t\t\t\tif (center && currentOrientation == 0)\n\t\t\t\t{\n\t\t\t\t\tlimit = geo[souTar][0] + constraint[souTar][0] * geo[souTar][2];\n\t\t\t\t}\n\t\t\t\telse if (center)\n\t\t\t\t{\n\t\t\t\t\tlimit = geo[souTar][1] + constraint[souTar][1] * geo[souTar][3];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlimit = mxEdgeStyle.limits[souTar][side];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (currentOrientation == 0)\n\t\t\t\t{\n\t\t\t\t\tvar lastX = mxEdgeStyle.wayPoints1[currentIndex][0];\n\t\t\t\t\tvar deltaX = (limit - lastX) * direction[0];\n\n\t\t\t\t\tif (deltaX > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tmxEdgeStyle.wayPoints1[currentIndex][0] += direction[0]\n\t\t\t\t\t\t\t\t* deltaX;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar lastY = mxEdgeStyle.wayPoints1[currentIndex][1];\n\t\t\t\t\tvar deltaY = (limit - lastY) * direction[1];\n\n\t\t\t\t\tif (deltaY > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tmxEdgeStyle.wayPoints1[currentIndex][1] += direction[1]\n\t\t\t\t\t\t\t\t* deltaY;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse if (center)\n\t\t\t{\n\t\t\t\t// Which center we're travelling to depend on the current direction\n\t\t\t\tmxEdgeStyle.wayPoints1[currentIndex][0] += direction[0]\n\t\t\t\t\t\t* Math.abs(mxEdgeStyle.vertexSeperations[directionIndex] / 2);\n\t\t\t\tmxEdgeStyle.wayPoints1[currentIndex][1] += direction[1]\n\t\t\t\t\t\t* Math.abs(mxEdgeStyle.vertexSeperations[directionIndex] / 2);\n\t\t\t}\n\n\t\t\tif (currentIndex > 0\n\t\t\t\t\t&& mxEdgeStyle.wayPoints1[currentIndex][currentOrientation] == mxEdgeStyle.wayPoints1[currentIndex - 1][currentOrientation])\n\t\t\t{\n\t\t\t\tcurrentIndex--;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlastOrientation = currentOrientation;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i <= currentIndex; i++)\n\t\t{\n\t\t\tif (i == currentIndex)\n\t\t\t{\n\t\t\t\t// Last point can cause last segment to be in\n\t\t\t\t// same direction as jetty/approach. If so,\n\t\t\t\t// check the number of points is consistent\n\t\t\t\t// with the relative orientation of source and target\n\t\t\t\t// jx. Same orientation requires an even\n\t\t\t\t// number of turns (points), different requires\n\t\t\t\t// odd.\n\t\t\t\tvar targetOrientation = (dir[1] & (mxConstants.DIRECTION_MASK_EAST | mxConstants.DIRECTION_MASK_WEST)) > 0 ? 0\n\t\t\t\t\t\t: 1;\n\t\t\t\tvar sameOrient = targetOrientation == initialOrientation ? 0 : 1;\n\n\t\t\t\t// (currentIndex + 1) % 2 is 0 for even number of points,\n\t\t\t\t// 1 for odd\n\t\t\t\tif (sameOrient != (currentIndex + 1) % 2)\n\t\t\t\t{\n\t\t\t\t\t// The last point isn't required\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tresult.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[i][0] * state.view.scale * 10) / 10,\n\t\t\t\t\t\t\t\t\tMath.round(mxEdgeStyle.wayPoints1[i][1] * state.view.scale * 10) / 10));\n\t\t}\n\t\t\n\t\t//console.log(result);\n\n\t\t// Removes duplicates\n\t\tvar index = 1;\n\t\t\n\t\twhile (index < result.length)\n\t\t{\n\t\t\tif (result[index - 1] == null || result[index] == null ||\n\t\t\t\tresult[index - 1].x != result[index].x ||\n\t\t\t\tresult[index - 1].y != result[index].y)\n\t\t\t{\n\t\t\t\tindex++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.splice(index, 1);\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgetRoutePattern: function(dir, quad, dx, dy)\n\t{\n\t\tvar sourceIndex = dir[0] == mxConstants.DIRECTION_MASK_EAST ? 3\n\t\t\t\t: dir[0];\n\t\tvar targetIndex = dir[1] == mxConstants.DIRECTION_MASK_EAST ? 3\n\t\t\t\t: dir[1];\n\n\t\tsourceIndex -= quad;\n\t\ttargetIndex -= quad;\n\n\t\tif (sourceIndex < 1)\n\t\t{\n\t\t\tsourceIndex += 4;\n\t\t}\n\t\tif (targetIndex < 1)\n\t\t{\n\t\t\ttargetIndex += 4;\n\t\t}\n\n\t\tvar result = routePatterns[sourceIndex - 1][targetIndex - 1];\n\n\t\tif (dx == 0 || dy == 0)\n\t\t{\n\t\t\tif (inlineRoutePatterns[sourceIndex - 1][targetIndex - 1] != null)\n\t\t\t{\n\t\t\t\tresult = inlineRoutePatterns[sourceIndex - 1][targetIndex - 1];\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n__mxOutput.mxEdgeStyle = typeof mxEdgeStyle !== 'undefined' ? mxEdgeStyle : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxStyleRegistry =\n{\n\t/**\n\t * Class: mxStyleRegistry\n\t *\n\t * Singleton class that acts as a global converter from string to object values\n\t * in a style. This is currently only used to perimeters and edge styles.\n\t * \n\t * Variable: values\n\t *\n\t * Maps from strings to objects.\n\t */\n\tvalues: [],\n\n\t/**\n\t * Function: putValue\n\t *\n\t * Puts the given object into the registry under the given name.\n\t */\n\tputValue: function(name, obj)\n\t{\n\t\tmxStyleRegistry.values[name] = obj;\n\t},\n\n\t/**\n\t * Function: getValue\n\t *\n\t * Returns the value associated with the given name.\n\t */\n\tgetValue: function(name)\n\t{\n\t\treturn mxStyleRegistry.values[name];\n\t},\n\t\n\t/**\n\t * Function: getName\n\t * \n\t * Returns the name for the given value.\n\t */\n\tgetName: function(value)\n\t{\n\t\tfor (var key in mxStyleRegistry.values)\n\t\t{\n\t\t\tif (mxStyleRegistry.values[key] == value)\n\t\t\t{\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\n};\n\nmxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW, mxEdgeStyle.ElbowConnector);\nmxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION, mxEdgeStyle.EntityRelation);\nmxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP, mxEdgeStyle.Loop);\nmxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE, mxEdgeStyle.SideToSide);\nmxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM, mxEdgeStyle.TopToBottom);\nmxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL, mxEdgeStyle.OrthConnector);\nmxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT, mxEdgeStyle.SegmentConnector);\n\nmxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE, mxPerimeter.EllipsePerimeter);\nmxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE, mxPerimeter.RectanglePerimeter);\nmxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS, mxPerimeter.RhombusPerimeter);\nmxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE, mxPerimeter.TrianglePerimeter);\nmxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON, mxPerimeter.HexagonPerimeter);\n\n__mxOutput.mxStyleRegistry = typeof mxStyleRegistry !== 'undefined' ? mxStyleRegistry : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraphView\n *\n * Extends <mxEventSource> to implement a view for a graph. This class is in\n * charge of computing the absolute coordinates for the relative child\n * geometries, the points for perimeters and edge styles and keeping them\n * cached in <mxCellStates> for faster retrieval. The states are updated\n * whenever the model or the view state (translate, scale) changes. The scale\n * and translate are honoured in the bounds.\n * \n * Event: mxEvent.UNDO\n * \n * Fires after the root was changed in <setCurrentRoot>. The <code>edit</code>\n * property contains the <mxUndoableEdit> which contains the\n * <mxCurrentRootChange>.\n * \n * Event: mxEvent.SCALE_AND_TRANSLATE\n * \n * Fires after the scale and translate have been changed in <scaleAndTranslate>.\n * The <code>scale</code>, <code>previousScale</code>, <code>translate</code>\n * and <code>previousTranslate</code> properties contain the new and previous\n * scale and translate, respectively.\n * \n * Event: mxEvent.SCALE\n * \n * Fires after the scale was changed in <setScale>. The <code>scale</code> and\n * <code>previousScale</code> properties contain the new and previous scale.\n * \n * Event: mxEvent.TRANSLATE\n * \n * Fires after the translate was changed in <setTranslate>. The\n * <code>translate</code> and <code>previousTranslate</code> properties contain\n * the new and previous value for translate.\n * \n * Event: mxEvent.DOWN and mxEvent.UP\n * \n * Fire if the current root is changed by executing an <mxCurrentRootChange>.\n * The event name depends on the location of the root in the cell hierarchy\n * with respect to the current root. The <code>root</code> and\n * <code>previous</code> properties contain the new and previous root,\n * respectively.\n * \n * Constructor: mxGraphView\n *\n * Constructs a new view for the given <mxGraph>.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n */\nfunction mxGraphView(graph)\n{\n\tthis.graph = graph;\n\tthis.translate = new mxPoint();\n\tthis.graphBounds = new mxRectangle();\n\tthis.states = new mxDictionary();\n};\n\n/**\n * Extends mxEventSource.\n */\nmxGraphView.prototype = new mxEventSource();\nmxGraphView.prototype.constructor = mxGraphView;\n\n/**\n *\n */\nmxGraphView.prototype.EMPTY_POINT = new mxPoint();\n\n/**\n * Variable: doneResource\n * \n * Specifies the resource key for the status message after a long operation.\n * If the resource for this key does not exist then the value is used as\n * the status message. Default is 'done'.\n */\nmxGraphView.prototype.doneResource = (mxClient.language != 'none') ? 'done' : '';\n\n/**\n * Function: updatingDocumentResource\n *\n * Specifies the resource key for the status message while the document is\n * being updated. If the resource for this key does not exist then the\n * value is used as the status message. Default is 'updatingDocument'.\n */\nmxGraphView.prototype.updatingDocumentResource = (mxClient.language != 'none') ? 'updatingDocument' : '';\n\n/**\n * Variable: allowEval\n * \n * Specifies if string values in cell styles should be evaluated using\n * <mxUtils.eval>. This will only be used if the string values can't be mapped\n * to objects using <mxStyleRegistry>. Default is false. NOTE: Enabling this\n * switch carries a possible security risk.\n */\nmxGraphView.prototype.allowEval = false;\n\n/**\n * Variable: captureDocumentGesture\n * \n * Specifies if a gesture should be captured when it goes outside of the\n * graph container. Default is true.\n */\nmxGraphView.prototype.captureDocumentGesture = true;\n\n/**\n * Variable: optimizeVmlReflows\n * \n * Specifies if the <canvas> should be hidden while rendering in IE8 standards\n * mode and quirks mode. This will significantly improve rendering performance.\n * Default is true.\n */\nmxGraphView.prototype.optimizeVmlReflows = true;\n\n/**\n * Variable: rendering\n * \n * Specifies if shapes should be created, updated and destroyed using the\n * methods of <mxCellRenderer> in <graph>. Default is true.\n */\nmxGraphView.prototype.rendering = true;\n\n/**\n * Variable: graph\n *\n * Reference to the enclosing <mxGraph>.\n */\nmxGraphView.prototype.graph = null;\n\n/**\n * Variable: currentRoot\n *\n * <mxCell> that acts as the root of the displayed cell hierarchy.\n */\nmxGraphView.prototype.currentRoot = null;\n\n/**\n * Variable: graphBounds\n *\n * <mxRectangle> that caches the scales, translated bounds of the current view.\n */\nmxGraphView.prototype.graphBounds = null;\n\n/**\n * Variable: scale\n * \n * Specifies the scale. Default is 1 (100%).\n */\nmxGraphView.prototype.scale = 1;\n\t\n/**\n * Variable: translate\n *\n * <mxPoint> that specifies the current translation. Default is a new\n * empty <mxPoint>.\n */\nmxGraphView.prototype.translate = null;\n\n/**\n * Variable: states\n * \n * <mxDictionary> that maps from cell IDs to <mxCellStates>.\n */\nmxGraphView.prototype.states = null;\n\n/**\n * Variable: updateStyle\n * \n * Specifies if the style should be updated in each validation step. If this\n * is false then the style is only updated if the state is created or if the\n * style of the cell was changed. Default is false.\n */\nmxGraphView.prototype.updateStyle = false;\n\n/**\n * Variable: lastNode\n * \n * During validation, this contains the last DOM node that was processed.\n */\nmxGraphView.prototype.lastNode = null;\n\n/**\n * Variable: lastHtmlNode\n * \n * During validation, this contains the last HTML DOM node that was processed.\n */\nmxGraphView.prototype.lastHtmlNode = null;\n\n/**\n * Variable: lastForegroundNode\n * \n * During validation, this contains the last edge's DOM node that was processed.\n */\nmxGraphView.prototype.lastForegroundNode = null;\n\n/**\n * Variable: lastForegroundHtmlNode\n * \n * During validation, this contains the last edge HTML DOM node that was processed.\n */\nmxGraphView.prototype.lastForegroundHtmlNode = null;\n\n/**\n * Function: getGraphBounds\n *\n * Returns <graphBounds>.\n */\nmxGraphView.prototype.getGraphBounds = function()\n{\n\treturn this.graphBounds;\n};\n\n/**\n * Function: setGraphBounds\n *\n * Sets <graphBounds>.\n */\nmxGraphView.prototype.setGraphBounds = function(value)\n{\n\tthis.graphBounds = value;\n};\n\n/**\n * Function: getBounds\n * \n * Returns the union of all <mxCellStates> for the given array of <mxCells>.\n *\n * Parameters:\n *\n * cells - Array of <mxCells> whose bounds should be returned.\n */\nmxGraphView.prototype.getBounds = function(cells)\n{\n\tvar result = null;\n\t\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tvar model = this.graph.getModel();\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (model.isVertex(cells[i]) || model.isEdge(cells[i]))\n\t\t\t{\n\t\t\t\tvar state = this.getState(cells[i]);\n\t\t\t\n\t\t\t\tif (state != null)\n\t\t\t\t{\n\t\t\t\t\tif (result == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = mxRectangle.fromRectangle(state);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.add(state);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: setCurrentRoot\n *\n * Sets and returns the current root and fires an <undo> event before\n * calling <mxGraph.sizeDidChange>.\n *\n * Parameters:\n *\n * root - <mxCell> that specifies the root of the displayed cell hierarchy.\n */\nmxGraphView.prototype.setCurrentRoot = function(root)\n{\n\tif (this.currentRoot != root)\n\t{\n\t\tvar change = new mxCurrentRootChange(this, root);\n\t\tchange.execute();\n\t\tvar edit = new mxUndoableEdit(this, true);\n\t\tedit.add(change);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.UNDO, 'edit', edit));\n\t\tthis.graph.sizeDidChange();\n\t}\n\t\n\treturn root;\n};\n\n/**\n * Function: scaleAndTranslate\n *\n * Sets the scale and translation and fires a <scale> and <translate> event\n * before calling <revalidate> followed by <mxGraph.sizeDidChange>.\n *\n * Parameters:\n *\n * scale - Decimal value that specifies the new scale (1 is 100%).\n * dx - X-coordinate of the translation.\n * dy - Y-coordinate of the translation.\n */\nmxGraphView.prototype.scaleAndTranslate = function(scale, dx, dy)\n{\n\tvar previousScale = this.scale;\n\tvar previousTranslate = new mxPoint(this.translate.x, this.translate.y);\n\t\n\tif (this.scale != scale || this.translate.x != dx || this.translate.y != dy)\n\t{\n\t\tthis.scale = scale;\n\t\t\n\t\tthis.translate.x = dx;\n\t\tthis.translate.y = dy;\n\n\t\tif (this.isEventsEnabled())\n\t\t{\n\t\t\tthis.viewStateChanged();\n\t\t}\n\t}\n\t\n\tthis.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,\n\t\t'scale', scale, 'previousScale', previousScale,\n\t\t'translate', this.translate, 'previousTranslate', previousTranslate));\n};\n\n/**\n * Function: getScale\n * \n * Returns the <scale>.\n */\nmxGraphView.prototype.getScale = function()\n{\n\treturn this.scale;\n};\n\n/**\n * Function: setScale\n *\n * Sets the scale and fires a <scale> event before calling <revalidate> followed\n * by <mxGraph.sizeDidChange>.\n *\n * Parameters:\n *\n * value - Decimal value that specifies the new scale (1 is 100%).\n */\nmxGraphView.prototype.setScale = function(value)\n{\n\tvar previousScale = this.scale;\n\t\n\tif (this.scale != value)\n\t{\n\t\tthis.scale = value;\n\n\t\tif (this.isEventsEnabled())\n\t\t{\n\t\t\tthis.viewStateChanged();\n\t\t}\n\t}\n\t\n\tthis.fireEvent(new mxEventObject(mxEvent.SCALE,\n\t\t'scale', value, 'previousScale', previousScale));\n};\n\n/**\n * Function: getTranslate\n * \n * Returns the <translate>.\n */\nmxGraphView.prototype.getTranslate = function()\n{\n\treturn this.translate;\n};\n\n/**\n * Function: setTranslate\n *\n * Sets the translation and fires a <translate> event before calling\n * <revalidate> followed by <mxGraph.sizeDidChange>. The translation is the\n * negative of the origin.\n *\n * Parameters:\n *\n * dx - X-coordinate of the translation.\n * dy - Y-coordinate of the translation.\n */\nmxGraphView.prototype.setTranslate = function(dx, dy)\n{\n\tvar previousTranslate = new mxPoint(this.translate.x, this.translate.y);\n\t\n\tif (this.translate.x != dx || this.translate.y != dy)\n\t{\n\t\tthis.translate.x = dx;\n\t\tthis.translate.y = dy;\n\n\t\tif (this.isEventsEnabled())\n\t\t{\n\t\t\tthis.viewStateChanged();\n\t\t}\n\t}\n\t\n\tthis.fireEvent(new mxEventObject(mxEvent.TRANSLATE,\n\t\t'translate', this.translate, 'previousTranslate', previousTranslate));\n};\n\n/**\n * Function: viewStateChanged\n * \n * Invoked after <scale> and/or <translate> has changed.\n */\nmxGraphView.prototype.viewStateChanged = function()\n{\n\tthis.revalidate();\n\tthis.graph.sizeDidChange();\n};\n\n/**\n * Function: refresh\n *\n * Clears the view if <currentRoot> is not null and revalidates.\n */\nmxGraphView.prototype.refresh = function()\n{\n\tif (this.currentRoot != null)\n\t{\n\t\tthis.clear();\n\t}\n\t\n\tthis.revalidate();\n};\n\n/**\n * Function: revalidate\n *\n * Revalidates the complete view with all cell states.\n */\nmxGraphView.prototype.revalidate = function()\n{\n\tthis.invalidate();\n\tthis.validate();\n};\n\n/**\n * Function: clear\n *\n * Removes the state of the given cell and all descendants if the given\n * cell is not the current root.\n * \n * Parameters:\n * \n * cell - Optional <mxCell> for which the state should be removed. Default\n * is the root of the model.\n * force - Boolean indicating if the current root should be ignored for\n * recursion.\n */\nmxGraphView.prototype.clear = function(cell, force, recurse)\n{\n\tvar model = this.graph.getModel();\n\tcell = cell || model.getRoot();\n\tforce = (force != null) ? force : false;\n\trecurse = (recurse != null) ? recurse : true;\n\t\n\tthis.removeState(cell);\n\t\n\tif (recurse && (force || cell != this.currentRoot))\n\t{\n\t\tvar childCount = model.getChildCount(cell);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tthis.clear(model.getChildAt(cell, i), force);\n\t\t}\n\t}\n\telse\n\t{\n\t\tthis.invalidate(cell);\n\t}\n};\n\n/**\n * Function: invalidate\n * \n * Invalidates the state of the given cell, all its descendants and\n * connected edges.\n * \n * Parameters:\n * \n * cell - Optional <mxCell> to be invalidated. Default is the root of the\n * model.\n */\nmxGraphView.prototype.invalidate = function(cell, recurse, includeEdges)\n{\n\tvar model = this.graph.getModel();\n\tcell = cell || model.getRoot();\n\trecurse = (recurse != null) ? recurse : true;\n\tincludeEdges = (includeEdges != null) ? includeEdges : true;\n\t\n\tvar state = this.getState(cell);\n\t\n\tif (state != null)\n\t{\n\t\tstate.invalid = true;\n\t}\n\t\n\t// Avoids infinite loops for invalid graphs\n\tif (!cell.invalidating)\n\t{\n\t\tcell.invalidating = true;\n\t\t\n\t\t// Recursively invalidates all descendants\n\t\tif (recurse)\n\t\t{\n\t\t\tvar childCount = model.getChildCount(cell);\n\t\t\t\n\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t{\n\t\t\t\tvar child = model.getChildAt(cell, i);\n\t\t\t\tthis.invalidate(child, recurse, includeEdges);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Propagates invalidation to all connected edges\n\t\tif (includeEdges)\n\t\t{\n\t\t\tvar edgeCount = model.getEdgeCount(cell);\n\t\t\t\n\t\t\tfor (var i = 0; i < edgeCount; i++)\n\t\t\t{\n\t\t\t\tthis.invalidate(model.getEdgeAt(cell, i), recurse, includeEdges);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdelete cell.invalidating;\n\t}\n};\n\n/**\n * Function: validate\n * \n * Calls <validateCell> and <validateCellState> and updates the <graphBounds>\n * using <getBoundingBox>. Finally the background is validated using\n * <validateBackground>.\n * \n * Parameters:\n * \n * cell - Optional <mxCell> to be used as the root of the validation.\n * Default is <currentRoot> or the root of the model.\n */\nmxGraphView.prototype.validate = function(cell)\n{\n\tvar t0 = mxLog.enter('mxGraphView.validate');\n\twindow.status = mxResources.get(this.updatingDocumentResource) ||\n\t\tthis.updatingDocumentResource;\n\t\n\tthis.resetValidationState();\n\t\n\t// Improves IE rendering speed by minimizing reflows\n\tvar prevDisplay = null;\n\t\n\tif (this.optimizeVmlReflows && this.canvas != null && this.textDiv == null &&\n\t\t((document.documentMode == 8 && !mxClient.IS_EM) || mxClient.IS_QUIRKS))\n\t{\n\t\t// Placeholder keeps scrollbar positions when canvas is hidden\n\t\tthis.placeholder = document.createElement('div');\n\t\tthis.placeholder.style.position = 'absolute';\n\t\tthis.placeholder.style.width = this.canvas.clientWidth + 'px';\n\t\tthis.placeholder.style.height = this.canvas.clientHeight + 'px';\n\t\tthis.canvas.parentNode.appendChild(this.placeholder);\n\n\t\tprevDisplay = this.drawPane.style.display;\n\t\tthis.canvas.style.display = 'none';\n\t\t\n\t\t// Creates temporary DIV used for text measuring in mxText.updateBoundingBox\n\t\tthis.textDiv = document.createElement('div');\n\t\tthis.textDiv.style.position = 'absolute';\n\t\tthis.textDiv.style.whiteSpace = 'nowrap';\n\t\tthis.textDiv.style.visibility = 'hidden';\n\t\tthis.textDiv.style.display = (mxClient.IS_QUIRKS) ? 'inline' : 'inline-block';\n\t\tthis.textDiv.style.zoom = '1';\n\t\t\n\t\tdocument.body.appendChild(this.textDiv);\n\t}\n\t\n\tvar graphBounds = this.getBoundingBox(this.validateCellState(\n\t\tthis.validateCell(cell || ((this.currentRoot != null) ?\n\t\t\tthis.currentRoot : this.graph.getModel().getRoot()))));\n\tthis.setGraphBounds((graphBounds != null) ? graphBounds : this.getEmptyBounds());\n\tthis.validateBackground();\n\t\n\tif (prevDisplay != null)\n\t{\n\t\tthis.canvas.style.display = prevDisplay;\n\t\tthis.textDiv.parentNode.removeChild(this.textDiv);\n\t\t\n\t\tif (this.placeholder != null)\n\t\t{\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t\t\t\t\n\t\t// Textdiv cannot be reused\n\t\tthis.textDiv = null;\n\t}\n\t\n\tthis.resetValidationState();\n\t\n\twindow.status = mxResources.get(this.doneResource) ||\n\t\tthis.doneResource;\n\tmxLog.leave('mxGraphView.validate', t0);\n};\n\n/**\n * Function: getEmptyBounds\n * \n * Returns the bounds for an empty graph. This returns a rectangle at\n * <translate> with the size of 0 x 0.\n */\nmxGraphView.prototype.getEmptyBounds = function()\n{\n\treturn new mxRectangle(this.translate.x * this.scale, this.translate.y * this.scale);\n};\n\n/**\n * Function: getBoundingBox\n * \n * Returns the bounding box of the shape and the label for the given\n * <mxCellState> and its children if recurse is true.\n * \n * Parameters:\n * \n * state - <mxCellState> whose bounding box should be returned.\n * recurse - Optional boolean indicating if the children should be included.\n * Default is true.\n */\nmxGraphView.prototype.getBoundingBox = function(state, recurse)\n{\n\trecurse = (recurse != null) ? recurse : true;\n\tvar bbox = null;\n\t\n\tif (state != null)\n\t{\n\t\tif (state.shape != null && state.shape.boundingBox != null)\n\t\t{\n\t\t\tbbox = state.shape.boundingBox.clone();\n\t\t}\n\t\t\n\t\t// Adds label bounding box to graph bounds\n\t\tif (state.text != null && state.text.boundingBox != null)\n\t\t{\n\t\t\tif (bbox != null)\n\t\t\t{\n\t\t\t\tbbox.add(state.text.boundingBox);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbbox = state.text.boundingBox.clone();\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (recurse)\n\t\t{\n\t\t\tvar model = this.graph.getModel();\n\t\t\tvar childCount = model.getChildCount(state.cell);\n\t\t\t\n\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t{\n\t\t\t\tvar bounds = this.getBoundingBox(this.getState(model.getChildAt(state.cell, i)));\n\t\t\t\t\n\t\t\t\tif (bounds != null)\n\t\t\t\t{\n\t\t\t\t\tif (bbox == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tbbox = bounds;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tbbox.add(bounds);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn bbox;\n};\n\n/**\n * Function: createBackgroundPageShape\n *\n * Creates and returns the shape used as the background page.\n * \n * Parameters:\n * \n * bounds - <mxRectangle> that represents the bounds of the shape.\n */\nmxGraphView.prototype.createBackgroundPageShape = function(bounds)\n{\n\treturn new mxRectangleShape(bounds, 'white', 'black');\n};\n\n/**\n * Function: validateBackground\n *\n * Calls <validateBackgroundImage> and <validateBackgroundPage>.\n */\nmxGraphView.prototype.validateBackground = function()\n{\n\tthis.validateBackgroundImage();\n\tthis.validateBackgroundPage();\n};\n\n/**\n * Function: validateBackgroundImage\n * \n * Validates the background image.\n */\nmxGraphView.prototype.validateBackgroundImage = function()\n{\n\tvar bg = this.graph.getBackgroundImage();\n\t\n\tif (bg != null)\n\t{\n\t\tif (this.backgroundImage == null || this.backgroundImage.image != bg.src)\n\t\t{\n\t\t\tif (this.backgroundImage != null)\n\t\t\t{\n\t\t\t\tthis.backgroundImage.destroy();\n\t\t\t}\n\t\t\t\n\t\t\tvar bounds = new mxRectangle(0, 0, 1, 1);\n\t\t\t\n\t\t\tthis.backgroundImage = new mxImageShape(bounds, bg.src);\n\t\t\tthis.backgroundImage.dialect = this.graph.dialect;\n\t\t\tthis.backgroundImage.init(this.backgroundPane);\n\t\t\tthis.backgroundImage.redraw();\n\n\t\t\t// Workaround for ignored event on background in IE8 standards mode\n\t\t\tif (document.documentMode == 8 && !mxClient.IS_EM)\n\t\t\t{\n\t\t\t\tmxEvent.addGestureListeners(this.backgroundImage.node,\n\t\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.graph.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt));\n\t\t\t\t\t}),\n\t\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.graph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt));\n\t\t\t\t\t}),\n\t\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.graph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt));\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBackgroundImage(this.backgroundImage, bg);\n\t}\n\telse if (this.backgroundImage != null)\n\t{\n\t\tthis.backgroundImage.destroy();\n\t\tthis.backgroundImage = null;\n\t}\n};\n\n/**\n * Function: validateBackgroundPage\n * \n * Validates the background page.\n */\nmxGraphView.prototype.validateBackgroundPage = function()\n{\n\tif (this.graph.pageVisible)\n\t{\n\t\tvar bounds = this.getBackgroundPageBounds();\n\t\t\n\t\tif (this.backgroundPageShape == null)\n\t\t{\n\t\t\tthis.backgroundPageShape = this.createBackgroundPageShape(bounds);\n\t\t\tthis.backgroundPageShape.scale = this.scale;\n\t\t\tthis.backgroundPageShape.isShadow = true;\n\t\t\tthis.backgroundPageShape.dialect = this.graph.dialect;\n\t\t\tthis.backgroundPageShape.init(this.backgroundPane);\n\t\t\tthis.backgroundPageShape.redraw();\n\t\t\t\n\t\t\t// Adds listener for double click handling on background\n\t\t\tif (this.graph.nativeDblClickEnabled)\n\t\t\t{\n\t\t\t\tmxEvent.addListener(this.backgroundPageShape.node, 'dblclick', mxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.dblClick(evt);\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\t// Adds basic listeners for graph event dispatching outside of the\n\t\t\t// container and finishing the handling of a single gesture\n\t\t\tmxEvent.addGestureListeners(this.backgroundPageShape.node,\n\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt));\n\t\t\t\t}),\n\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\t// Hides the tooltip if mouse is outside container\n\t\t\t\t\tif (this.graph.tooltipHandler != null && this.graph.tooltipHandler.isHideOnHover())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.graph.tooltipHandler.hide();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.graph.isMouseDown && !mxEvent.isConsumed(evt))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.graph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt));\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt));\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.backgroundPageShape.scale = this.scale;\n\t\t\tthis.backgroundPageShape.bounds = bounds;\n\t\t\tthis.backgroundPageShape.redraw();\n\t\t}\n\t}\n\telse if (this.backgroundPageShape != null)\n\t{\n\t\tthis.backgroundPageShape.destroy();\n\t\tthis.backgroundPageShape = null;\n\t}\n};\n\n/**\n * Function: getBackgroundPageBounds\n * \n * Returns the bounds for the background page.\n */\nmxGraphView.prototype.getBackgroundPageBounds = function()\n{\n\tvar fmt = this.graph.pageFormat;\n\tvar ps = this.scale * this.graph.pageScale;\n\tvar bounds = new mxRectangle(this.scale * this.translate.x, this.scale * this.translate.y,\n\t\t\tfmt.width * ps, fmt.height * ps);\n\t\n\treturn bounds;\n};\n\n/**\n * Function: redrawBackgroundImage\n *\n * Updates the bounds and redraws the background image.\n * \n * Example:\n * \n * If the background image should not be scaled, this can be replaced with\n * the following.\n * \n * (code)\n * mxGraphView.prototype.redrawBackground = function(backgroundImage, bg)\n * {\n *   backgroundImage.bounds.x = this.translate.x;\n *   backgroundImage.bounds.y = this.translate.y;\n *   backgroundImage.bounds.width = bg.width;\n *   backgroundImage.bounds.height = bg.height;\n *\n *   backgroundImage.redraw();\n * };\n * (end)\n * \n * Parameters:\n * \n * backgroundImage - <mxImageShape> that represents the background image.\n * bg - <mxImage> that specifies the image and its dimensions.\n */\nmxGraphView.prototype.redrawBackgroundImage = function(backgroundImage, bg)\n{\n\tbackgroundImage.scale = this.scale;\n\tbackgroundImage.bounds.x = this.scale * this.translate.x;\n\tbackgroundImage.bounds.y = this.scale * this.translate.y;\n\tbackgroundImage.bounds.width = this.scale * bg.width;\n\tbackgroundImage.bounds.height = this.scale * bg.height;\n\n\tbackgroundImage.redraw();\n};\n\n/**\n * Function: validateCell\n * \n * Recursively creates the cell state for the given cell if visible is true and\n * the given cell is visible. If the cell is not visible but the state exists\n * then it is removed using <removeState>.\n * \n * Parameters:\n * \n * cell - <mxCell> whose <mxCellState> should be created.\n * visible - Optional boolean indicating if the cell should be visible. Default\n * is true.\n */\nmxGraphView.prototype.validateCell = function(cell, visible)\n{\n\tvisible = (visible != null) ? visible : true;\n\t\n\tif (cell != null)\n\t{\n\t\tvisible = visible && this.graph.isCellVisible(cell);\n\t\tvar state = this.getState(cell, visible);\n\t\t\n\t\tif (state != null && !visible)\n\t\t{\n\t\t\tthis.removeState(cell);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar model = this.graph.getModel();\n\t\t\tvar childCount = model.getChildCount(cell);\n\t\t\t\n\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t{\n\t\t\t\tthis.validateCell(model.getChildAt(cell, i), visible &&\n\t\t\t\t\t(!this.isCellCollapsed(cell) || cell == this.currentRoot));\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn cell;\n};\n\n/**\n * Function: validateCellState\n * \n * Validates and repaints the <mxCellState> for the given <mxCell>.\n * \n * Parameters:\n * \n * cell - <mxCell> whose <mxCellState> should be validated.\n * recurse - Optional boolean indicating if the children of the cell should be\n * validated. Default is true.\n */\nmxGraphView.prototype.validateCellState = function(cell, recurse)\n{\n\trecurse = (recurse != null) ? recurse : true;\n\tvar state = null;\n\t\n\tif (cell != null)\n\t{\n\t\tstate = this.getState(cell);\n\t\t\n\t\tif (state != null)\n\t\t{\n\t\t\tvar model = this.graph.getModel();\n\t\t\t\n\t\t\tif (state.invalid)\n\t\t\t{\n\t\t\t\tstate.invalid = false;\n\t\t\t\t\n\t\t\t\tif (state.style == null || state.invalidStyle)\n\t\t\t\t{\n\t\t\t\t\tstate.style = this.graph.getCellStyle(state.cell);\n\t\t\t\t\tstate.invalidStyle = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (cell != this.currentRoot)\n\t\t\t\t{\n\t\t\t\t\tthis.validateCellState(model.getParent(cell), false);\n\t\t\t\t}\n\n\t\t\t\tstate.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(cell, true), false), true);\n\t\t\t\tstate.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(cell, false), false), false);\n\t\t\t\t\n\t\t\t\tthis.updateCellState(state);\n\t\t\t\t\n\t\t\t\t// Repaint happens immediately after the cell is validated\n\t\t\t\tif (cell != this.currentRoot && !state.invalid)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.cellRenderer.redraw(state, false, this.isRendering());\n\n\t\t\t\t\t// Handles changes to invertex paintbounds after update of rendering shape\n\t\t\t\t\tstate.updateCachedBounds();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (recurse && !state.invalid)\n\t\t\t{\n\t\t\t\t// Updates order in DOM if recursively traversing\n\t\t\t\tif (state.shape != null)\n\t\t\t\t{\n\t\t\t\t\tthis.stateValidated(state);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tvar childCount = model.getChildCount(cell);\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t\t{\n\t\t\t\t\tthis.validateCellState(model.getChildAt(cell, i));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn state;\n};\n\n/**\n * Function: updateCellState\n * \n * Updates the given <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> to be updated.\n */\nmxGraphView.prototype.updateCellState = function(state)\n{\n\tstate.absoluteOffset.x = 0;\n\tstate.absoluteOffset.y = 0;\n\tstate.origin.x = 0;\n\tstate.origin.y = 0;\n\tstate.length = 0;\n\t\n\tif (state.cell != this.currentRoot)\n\t{\n\t\tvar model = this.graph.getModel();\n\t\tvar pState = this.getState(model.getParent(state.cell)); \n\t\t\n\t\tif (pState != null && pState.cell != this.currentRoot)\n\t\t{\n\t\t\tstate.origin.x += pState.origin.x;\n\t\t\tstate.origin.y += pState.origin.y;\n\t\t}\n\t\t\n\t\tvar offset = this.graph.getChildOffsetForCell(state.cell);\n\t\t\n\t\tif (offset != null)\n\t\t{\n\t\t\tstate.origin.x += offset.x;\n\t\t\tstate.origin.y += offset.y;\n\t\t}\n\t\t\n\t\tvar geo = this.graph.getCellGeometry(state.cell);\t\t\t\t\n\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tif (!model.isEdge(state.cell))\n\t\t\t{\n\t\t\t\toffset = (geo.offset != null) ? geo.offset : this.EMPTY_POINT;\n\t\n\t\t\t\tif (geo.relative && pState != null)\n\t\t\t\t{\n\t\t\t\t\tif (model.isEdge(pState.cell))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar origin = this.getPoint(pState, geo);\n\n\t\t\t\t\t\tif (origin != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.origin.x += (origin.x / this.scale) - pState.origin.x - this.translate.x;\n\t\t\t\t\t\t\tstate.origin.y += (origin.y / this.scale) - pState.origin.y - this.translate.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.origin.x += geo.x * pState.unscaledWidth + offset.x;\n\t\t\t\t\t\tstate.origin.y += geo.y * pState.unscaledHeight + offset.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.absoluteOffset.x = this.scale * offset.x;\n\t\t\t\t\tstate.absoluteOffset.y = this.scale * offset.y;\n\t\t\t\t\tstate.origin.x += geo.x;\n\t\t\t\t\tstate.origin.y += geo.y;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tstate.x = this.scale * (this.translate.x + state.origin.x);\n\t\t\tstate.y = this.scale * (this.translate.y + state.origin.y);\n\t\t\tstate.width = this.scale * geo.width;\n\t\t\tstate.unscaledWidth = geo.width;\n\t\t\tstate.height = this.scale * geo.height;\n\t\t\tstate.unscaledHeight = geo.height;\n\t\t\t\n\t\t\tif (model.isVertex(state.cell))\n\t\t\t{\n\t\t\t\tthis.updateVertexState(state, geo);\n\t\t\t}\n\t\t\t\n\t\t\tif (model.isEdge(state.cell))\n\t\t\t{\n\t\t\t\tthis.updateEdgeState(state, geo);\n\t\t\t}\n\t\t}\n\t}\n\n\tstate.updateCachedBounds();\n};\n\n/**\n * Function: isCellCollapsed\n * \n * Returns true if the children of the given cell should not be visible in the\n * view. This implementation uses <mxGraph.isCellVisible> but it can be\n * overidden to use a separate condition.\n */\nmxGraphView.prototype.isCellCollapsed = function(cell)\n{\n\treturn this.graph.isCellCollapsed(cell);\n};\n\n/**\n * Function: updateVertexState\n * \n * Validates the given cell state.\n */\nmxGraphView.prototype.updateVertexState = function(state, geo)\n{\n\tvar model = this.graph.getModel();\n\tvar pState = this.getState(model.getParent(state.cell));\n\t\n\tif (geo.relative && pState != null && !model.isEdge(pState.cell))\n\t{\n\t\tvar alpha = mxUtils.toRadians(pState.style[mxConstants.STYLE_ROTATION] || '0');\n\t\t\n\t\tif (alpha != 0)\n\t\t{\n\t\t\tvar cos = Math.cos(alpha);\n\t\t\tvar sin = Math.sin(alpha);\n\n\t\t\tvar ct = new mxPoint(state.getCenterX(), state.getCenterY());\n\t\t\tvar cx = new mxPoint(pState.getCenterX(), pState.getCenterY());\n\t\t\tvar pt = mxUtils.getRotatedPoint(ct, cos, sin, cx);\n\t\t\tstate.x = pt.x - state.width / 2;\n\t\t\tstate.y = pt.y - state.height / 2;\n\t\t}\n\t}\n\t\n\tthis.updateVertexLabelOffset(state);\n};\n\n/**\n * Function: updateEdgeState\n * \n * Validates the given cell state.\n */\nmxGraphView.prototype.updateEdgeState = function(state, geo)\n{\n\tvar source = state.getVisibleTerminalState(true);\n\tvar target = state.getVisibleTerminalState(false);\n\t\n\t// This will remove edges with no terminals and no terminal points\n\t// as such edges are invalid and produce NPEs in the edge styles.\n\t// Also removes connected edges that have no visible terminals.\n\tif ((this.graph.model.getTerminal(state.cell, true) != null && source == null) ||\n\t\t(source == null && geo.getTerminalPoint(true) == null) ||\n\t\t(this.graph.model.getTerminal(state.cell, false) != null && target == null) ||\n\t\t(target == null && geo.getTerminalPoint(false) == null))\n\t{\n\t\tthis.clear(state.cell, true);\n\t}\n\telse\n\t{\n\t\tthis.updateFixedTerminalPoints(state, source, target);\n\t\tthis.updatePoints(state, geo.points, source, target);\n\t\tthis.updateFloatingTerminalPoints(state, source, target);\n\t\t\n\t\tvar pts = state.absolutePoints;\n\t\t\n\t\tif (state.cell != this.currentRoot && (pts == null || pts.length < 2 ||\n\t\t\tpts[0] == null || pts[pts.length - 1] == null))\n\t\t{\n\t\t\t// This will remove edges with invalid points from the list of states in the view.\n\t\t\t// Happens if the one of the terminals and the corresponding terminal point is null.\n\t\t\tthis.clear(state.cell, true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.updateEdgeBounds(state);\n\t\t\tthis.updateEdgeLabelOffset(state);\n\t\t}\n\t}\n};\n\n/**\n * Function: updateVertexLabelOffset\n * \n * Updates the absoluteOffset of the given vertex cell state. This takes\n * into account the label position styles.\n * \n * Parameters:\n * \n * state - <mxCellState> whose absolute offset should be updated.\n */\nmxGraphView.prototype.updateVertexLabelOffset = function(state)\n{\n\tvar h = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_POSITION, mxConstants.ALIGN_CENTER);\n\n\tif (h == mxConstants.ALIGN_LEFT)\n\t{\n\t\tvar lw = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_WIDTH, null);\n\t\t\n\t\tif (lw != null)\n\t\t{\n\t\t\tlw *= this.scale;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlw = state.width;\n\t\t}\n\t\t\n\t\tstate.absoluteOffset.x -= lw;\n\t}\n\telse if (h == mxConstants.ALIGN_RIGHT)\n\t{\n\t\tstate.absoluteOffset.x += state.width;\n\t}\n\telse if (h == mxConstants.ALIGN_CENTER)\n\t{\n\t\tvar lw = mxUtils.getValue(state.style, mxConstants.STYLE_LABEL_WIDTH, null);\n\t\t\n\t\tif (lw != null)\n\t\t{\n\t\t\t// Aligns text block with given width inside the vertex width\n\t\t\tvar align = mxUtils.getValue(state.style, mxConstants.STYLE_ALIGN, mxConstants.ALIGN_CENTER);\n\t\t\tvar dx = 0;\n\t\t\t\n\t\t\tif (align == mxConstants.ALIGN_CENTER)\n\t\t\t{\n\t\t\t\tdx = 0.5;\n\t\t\t}\n\t\t\telse if (align == mxConstants.ALIGN_RIGHT)\n\t\t\t{\n\t\t\t\tdx = 1;\n\t\t\t}\n\t\t\t\n\t\t\tif (dx != 0)\n\t\t\t{\n\t\t\t\tstate.absoluteOffset.x -= (lw * this.scale - state.width) * dx;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tvar v = mxUtils.getValue(state.style, mxConstants.STYLE_VERTICAL_LABEL_POSITION, mxConstants.ALIGN_MIDDLE);\n\t\n\tif (v == mxConstants.ALIGN_TOP)\n\t{\n\t\tstate.absoluteOffset.y -= state.height;\n\t}\n\telse if (v == mxConstants.ALIGN_BOTTOM)\n\t{\n\t\tstate.absoluteOffset.y += state.height;\n\t}\n};\n\n/**\n * Function: resetValidationState\n *\n * Resets the current validation state.\n */\nmxGraphView.prototype.resetValidationState = function()\n{\n\tthis.lastNode = null;\n\tthis.lastHtmlNode = null;\n\tthis.lastForegroundNode = null;\n\tthis.lastForegroundHtmlNode = null;\n};\n\n/**\n * Function: stateValidated\n * \n * Invoked when a state has been processed in <validatePoints>. This is used\n * to update the order of the DOM nodes of the shape.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the cell state.\n */\nmxGraphView.prototype.stateValidated = function(state)\n{\n\tvar fg = (this.graph.getModel().isEdge(state.cell) && this.graph.keepEdgesInForeground) ||\n\t\t(this.graph.getModel().isVertex(state.cell) && this.graph.keepEdgesInBackground);\n\tvar htmlNode = (fg) ? this.lastForegroundHtmlNode || this.lastHtmlNode : this.lastHtmlNode;\n\tvar node = (fg) ? this.lastForegroundNode || this.lastNode : this.lastNode;\n\tvar result = this.graph.cellRenderer.insertStateAfter(state, node, htmlNode);\n\n\tif (fg)\n\t{\n\t\tthis.lastForegroundHtmlNode = result[1];\n\t\tthis.lastForegroundNode = result[0];\n\t}\n\telse\n\t{\n\t\tthis.lastHtmlNode = result[1];\n\t\tthis.lastNode = result[0];\n\t}\n};\n\n/**\n * Function: updateFixedTerminalPoints\n *\n * Sets the initial absolute terminal points in the given state before the edge\n * style is computed.\n * \n * Parameters:\n * \n * edge - <mxCellState> whose initial terminal points should be updated.\n * source - <mxCellState> which represents the source terminal.\n * target - <mxCellState> which represents the target terminal.\n */\nmxGraphView.prototype.updateFixedTerminalPoints = function(edge, source, target)\n{\n\tthis.updateFixedTerminalPoint(edge, source, true,\n\t\tthis.graph.getConnectionConstraint(edge, source, true));\n\tthis.updateFixedTerminalPoint(edge, target, false,\n\t\tthis.graph.getConnectionConstraint(edge, target, false));\n};\n\n/**\n * Function: updateFixedTerminalPoint\n *\n * Sets the fixed source or target terminal point on the given edge.\n * \n * Parameters:\n * \n * edge - <mxCellState> whose terminal point should be updated.\n * terminal - <mxCellState> which represents the actual terminal.\n * source - Boolean that specifies if the terminal is the source.\n * constraint - <mxConnectionConstraint> that specifies the connection.\n */\nmxGraphView.prototype.updateFixedTerminalPoint = function(edge, terminal, source, constraint)\n{\n\tedge.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(edge, terminal, source, constraint), source);\n};\n\n/**\n * Function: getFixedTerminalPoint\n *\n * Returns the fixed source or target terminal point for the given edge.\n * \n * Parameters:\n * \n * edge - <mxCellState> whose terminal point should be returned.\n * terminal - <mxCellState> which represents the actual terminal.\n * source - Boolean that specifies if the terminal is the source.\n * constraint - <mxConnectionConstraint> that specifies the connection.\n */\nmxGraphView.prototype.getFixedTerminalPoint = function(edge, terminal, source, constraint)\n{\n\tvar pt = null;\n\t\n\tif (constraint != null)\n\t{\n\t\tpt = this.graph.getConnectionPoint(terminal, constraint, false); // FIXME Rounding introduced bugs when calculating label positions -> , this.graph.isOrthogonal(edge));\n\t}\n\t\n\tif (pt == null && terminal == null)\n\t{\n\t\tvar s = this.scale;\n\t\tvar tr = this.translate;\n\t\tvar orig = edge.origin;\n\t\tvar geo = this.graph.getCellGeometry(edge.cell);\n\t\tpt = geo.getTerminalPoint(source);\n\t\t\n\t\tif (pt != null)\n\t\t{\n\t\t\tpt = new mxPoint(s * (tr.x + pt.x + orig.x),\n\t\t\t\t\t\t\t s * (tr.y + pt.y + orig.y));\n\t\t}\n\t}\n\t\n\treturn pt;\n};\n\n/**\n * Function: updateBoundsFromStencil\n * \n * Updates the bounds of the given cell state to reflect the bounds of the stencil\n * if it has a fixed aspect and returns the previous bounds as an <mxRectangle> if\n * the bounds have been modified or null otherwise.\n * \n * Parameters:\n * \n * edge - <mxCellState> whose bounds should be updated.\n */\nmxGraphView.prototype.updateBoundsFromStencil = function(state)\n{\n\tvar previous = null;\n\t\n\tif (state != null && state.shape != null && state.shape.stencil != null && state.shape.stencil.aspect == 'fixed')\n\t{\n\t\tprevious = mxRectangle.fromRectangle(state);\n\t\tvar asp = state.shape.stencil.computeAspect(state.style, state.x, state.y, state.width, state.height);\n\t\tstate.setRect(asp.x, asp.y, state.shape.stencil.w0 * asp.width, state.shape.stencil.h0 * asp.height);\n\t}\n\t\n\treturn previous;\n};\n\n/**\n * Function: updatePoints\n *\n * Updates the absolute points in the given state using the specified array\n * of <mxPoints> as the relative points.\n * \n * Parameters:\n * \n * edge - <mxCellState> whose absolute points should be updated.\n * points - Array of <mxPoints> that constitute the relative points.\n * source - <mxCellState> that represents the source terminal.\n * target - <mxCellState> that represents the target terminal.\n */\nmxGraphView.prototype.updatePoints = function(edge, points, source, target)\n{\n\tif (edge != null)\n\t{\n\t\tvar pts = [];\n\t\tpts.push(edge.absolutePoints[0]);\n\t\tvar edgeStyle = this.getEdgeStyle(edge, points, source, target);\n\t\t\n\t\tif (edgeStyle != null)\n\t\t{\n\t\t\tvar src = this.getTerminalPort(edge, source, true);\n\t\t\tvar trg = this.getTerminalPort(edge, target, false);\n\t\t\t\n\t\t\t// Uses the stencil bounds for routing and restores after routing\n\t\t\tvar srcBounds = this.updateBoundsFromStencil(src);\n\t\t\tvar trgBounds = this.updateBoundsFromStencil(trg);\n\n\t\t\tedgeStyle(edge, src, trg, points, pts);\n\t\t\t\n\t\t\t// Restores previous bounds\n\t\t\tif (srcBounds != null)\n\t\t\t{\n\t\t\t\tsrc.setRect(srcBounds.x, srcBounds.y, srcBounds.width, srcBounds.height);\n\t\t\t}\n\t\t\t\n\t\t\tif (trgBounds != null)\n\t\t\t{\n\t\t\t\ttrg.setRect(trgBounds.x, trgBounds.y, trgBounds.width, trgBounds.height);\n\t\t\t}\n\t\t}\n\t\telse if (points != null)\n\t\t{\n\t\t\tfor (var i = 0; i < points.length; i++)\n\t\t\t{\n\t\t\t\tif (points[i] != null)\n\t\t\t\t{\n\t\t\t\t\tvar pt = mxUtils.clone(points[i]);\n\t\t\t\t\tpts.push(this.transformControlPoint(edge, pt));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar tmp = edge.absolutePoints;\n\t\tpts.push(tmp[tmp.length-1]);\n\n\t\tedge.absolutePoints = pts;\n\t}\n};\n\n/**\n * Function: transformControlPoint\n *\n * Transforms the given control point to an absolute point.\n */\nmxGraphView.prototype.transformControlPoint = function(state, pt, ignoreScale)\n{\n\tif (state != null && pt != null)\n\t{\n\t\tvar orig = state.origin;\n\t\tvar scale = ignoreScale ? 1 : this.scale\n\t\t\n\t    return new mxPoint(scale * (pt.x + this.translate.x + orig.x),\n\t    \t\tscale * (pt.y + this.translate.y + orig.y));\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: isLoopStyleEnabled\n * \n * Returns true if the given edge should be routed with <mxGraph.defaultLoopStyle>\n * or the <mxConstants.STYLE_LOOP> defined for the given edge. This implementation\n * returns true if the given edge is a loop and does not have connections constraints\n * associated.\n */\nmxGraphView.prototype.isLoopStyleEnabled = function(edge, points, source, target)\n{\n\tvar sc = this.graph.getConnectionConstraint(edge, source, true);\n\tvar tc = this.graph.getConnectionConstraint(edge, target, false);\n\t\n\tif ((points == null || points.length < 2) &&\n\t\t(!mxUtils.getValue(edge.style, mxConstants.STYLE_ORTHOGONAL_LOOP, false) ||\n\t\t((sc == null || sc.point == null) && (tc == null || tc.point == null))))\n\t{\n\t\treturn source != null && source == target;\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: getEdgeStyle\n * \n * Returns the edge style function to be used to render the given edge state.\n */\nmxGraphView.prototype.getEdgeStyle = function(edge, points, source, target)\n{\n\tvar edgeStyle = this.isLoopStyleEnabled(edge, points, source, target) ?\n\t\tmxUtils.getValue(edge.style, mxConstants.STYLE_LOOP, this.graph.defaultLoopStyle) :\n\t\t(!mxUtils.getValue(edge.style, mxConstants.STYLE_NOEDGESTYLE, false) ?\n\t\tedge.style[mxConstants.STYLE_EDGE] : null);\n\n\t// Converts string values to objects\n\tif (typeof(edgeStyle) == \"string\")\n\t{\n\t\tvar tmp = mxStyleRegistry.getValue(edgeStyle);\n\t\t\n\t\tif (tmp == null && this.isAllowEval())\n\t\t{\n \t\t\ttmp = mxUtils.eval(edgeStyle);\n\t\t}\n\t\t\n\t\tedgeStyle = tmp;\n\t}\n\t\n\tif (typeof(edgeStyle) == \"function\")\n\t{\n\t\treturn edgeStyle;\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: updateFloatingTerminalPoints\n *\n * Updates the terminal points in the given state after the edge style was\n * computed for the edge.\n * \n * Parameters:\n * \n * state - <mxCellState> whose terminal points should be updated.\n * source - <mxCellState> that represents the source terminal.\n * target - <mxCellState> that represents the target terminal.\n */\nmxGraphView.prototype.updateFloatingTerminalPoints = function(state, source, target)\n{\n\tvar pts = state.absolutePoints;\n\tvar p0 = pts[0];\n\tvar pe = pts[pts.length - 1];\n\n\tif (pe == null && target != null)\n\t{\n\t\tthis.updateFloatingTerminalPoint(state, target, source, false);\n\t}\n\t\n\tif (p0 == null && source != null)\n\t{\n\t\tthis.updateFloatingTerminalPoint(state, source, target, true);\n\t}\n};\n\n/**\n * Function: updateFloatingTerminalPoint\n *\n * Updates the absolute terminal point in the given state for the given\n * start and end state, where start is the source if source is true.\n * \n * Parameters:\n * \n * edge - <mxCellState> whose terminal point should be updated.\n * start - <mxCellState> for the terminal on \"this\" side of the edge.\n * end - <mxCellState> for the terminal on the other side of the edge.\n * source - Boolean indicating if start is the source terminal state.\n */\nmxGraphView.prototype.updateFloatingTerminalPoint = function(edge, start, end, source)\n{\n\tedge.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(edge, start, end, source), source);\n};\n\n/**\n * Function: getFloatingTerminalPoint\n * \n * Returns the floating terminal point for the given edge, start and end\n * state, where start is the source if source is true.\n * \n * Parameters:\n * \n * edge - <mxCellState> whose terminal point should be returned.\n * start - <mxCellState> for the terminal on \"this\" side of the edge.\n * end - <mxCellState> for the terminal on the other side of the edge.\n * source - Boolean indicating if start is the source terminal state.\n */\nmxGraphView.prototype.getFloatingTerminalPoint = function(edge, start, end, source)\n{\n\tstart = this.getTerminalPort(edge, start, source);\n\tvar next = this.getNextPoint(edge, end, source);\n\t\n\tvar orth = this.graph.isOrthogonal(edge);\n\tvar alpha = mxUtils.toRadians(Number(start.style[mxConstants.STYLE_ROTATION] || '0'));\n\tvar center = new mxPoint(start.getCenterX(), start.getCenterY());\n\t\n\tif (alpha != 0)\n\t{\n\t\tvar cos = Math.cos(-alpha);\n\t\tvar sin = Math.sin(-alpha);\n\t\tnext = mxUtils.getRotatedPoint(next, cos, sin, center);\n\t}\n\t\n\tvar border = parseFloat(edge.style[mxConstants.STYLE_PERIMETER_SPACING] || 0);\n\tborder += parseFloat(edge.style[(source) ?\n\t\tmxConstants.STYLE_SOURCE_PERIMETER_SPACING :\n\t\tmxConstants.STYLE_TARGET_PERIMETER_SPACING] || 0);\n\tvar pt = this.getPerimeterPoint(start, next, alpha == 0 && orth, border);\n\n\tif (alpha != 0)\n\t{\n\t\tvar cos = Math.cos(alpha);\n\t\tvar sin = Math.sin(alpha);\n\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, center);\n\t}\n\n\treturn pt;\n};\n\n/**\n * Function: getTerminalPort\n * \n * Returns an <mxCellState> that represents the source or target terminal or\n * port for the given edge.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the state of the edge.\n * terminal - <mxCellState> that represents the terminal.\n * source - Boolean indicating if the given terminal is the source terminal.\n */\nmxGraphView.prototype.getTerminalPort = function(state, terminal, source)\n{\n\tvar key = (source) ? mxConstants.STYLE_SOURCE_PORT :\n\t\tmxConstants.STYLE_TARGET_PORT;\n\tvar id = mxUtils.getValue(state.style, key);\n\t\n\tif (id != null)\n\t{\n\t\tvar tmp = this.getState(this.graph.getModel().getCell(id));\n\t\t\n\t\t// Only uses ports where a cell state exists\n\t\tif (tmp != null)\n\t\t{\n\t\t\tterminal = tmp;\n\t\t}\n\t}\n\t\n\treturn terminal;\n};\n\n/**\n * Function: getPerimeterPoint\n *\n * Returns an <mxPoint> that defines the location of the intersection point between\n * the perimeter and the line between the center of the shape and the given point.\n * \n * Parameters:\n * \n * terminal - <mxCellState> for the source or target terminal.\n * next - <mxPoint> that lies outside of the given terminal.\n * orthogonal - Boolean that specifies if the orthogonal projection onto\n * the perimeter should be returned. If this is false then the intersection\n * of the perimeter and the line between the next and the center point is\n * returned.\n * border - Optional border between the perimeter and the shape.\n */\nmxGraphView.prototype.getPerimeterPoint = function(terminal, next, orthogonal, border)\n{\n\tvar point = null;\n\t\n\tif (terminal != null)\n\t{\n\t\tvar perimeter = this.getPerimeterFunction(terminal);\n\t\t\n\t\tif (perimeter != null && next != null)\n\t\t{\n\t\t\tvar bounds = this.getPerimeterBounds(terminal, border);\n\n\t\t\tif (bounds.width > 0 || bounds.height > 0)\n\t\t\t{\n\t\t\t\tpoint = new mxPoint(next.x, next.y);\n\t\t\t\tvar flipH = false;\n\t\t\t\tvar flipV = false;\t\n\t\t\t\t\n\t\t\t\tif (this.graph.model.isVertex(terminal.cell))\n\t\t\t\t{\n\t\t\t\t\tflipH = mxUtils.getValue(terminal.style, mxConstants.STYLE_FLIPH, 0) == 1;\n\t\t\t\t\tflipV = mxUtils.getValue(terminal.style, mxConstants.STYLE_FLIPV, 0) == 1;\t\n\t\n\t\t\t\t\t// Legacy support for stencilFlipH/V\n\t\t\t\t\tif (terminal.shape != null && terminal.shape.stencil != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tflipH = (mxUtils.getValue(terminal.style, 'stencilFlipH', 0) == 1) || flipH;\n\t\t\t\t\t\tflipV = (mxUtils.getValue(terminal.style, 'stencilFlipV', 0) == 1) || flipV;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (flipH)\n\t\t\t\t\t{\n\t\t\t\t\t\tpoint.x = 2 * bounds.getCenterX() - point.x;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (flipV)\n\t\t\t\t\t{\n\t\t\t\t\t\tpoint.y = 2 * bounds.getCenterY() - point.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpoint = perimeter(bounds, terminal, point, orthogonal);\n\n\t\t\t\tif (point != null)\n\t\t\t\t{\n\t\t\t\t\tif (flipH)\n\t\t\t\t\t{\n\t\t\t\t\t\tpoint.x = 2 * bounds.getCenterX() - point.x;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (flipV)\n\t\t\t\t\t{\n\t\t\t\t\t\tpoint.y = 2 * bounds.getCenterY() - point.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (point == null)\n\t\t{\n\t\t\tpoint = this.getPoint(terminal);\n\t\t}\n\t}\n\t\n\treturn point;\n};\n\n/**\n * Function: getRoutingCenterX\n * \n * Returns the x-coordinate of the center point for automatic routing.\n */\nmxGraphView.prototype.getRoutingCenterX = function (state)\n{\n\tvar f = (state.style != null) ? parseFloat(state.style\n\t\t[mxConstants.STYLE_ROUTING_CENTER_X]) || 0 : 0;\n\n\treturn state.getCenterX() + f * state.width;\n};\n\n/**\n * Function: getRoutingCenterY\n * \n * Returns the y-coordinate of the center point for automatic routing.\n */\nmxGraphView.prototype.getRoutingCenterY = function (state)\n{\n\tvar f = (state.style != null) ? parseFloat(state.style\n\t\t[mxConstants.STYLE_ROUTING_CENTER_Y]) || 0 : 0;\n\n\treturn state.getCenterY() + f * state.height;\n};\n\n/**\n * Function: getPerimeterBounds\n *\n * Returns the perimeter bounds for the given terminal, edge pair as an\n * <mxRectangle>.\n * \n * If you have a model where each terminal has a relative child that should\n * act as the graphical endpoint for a connection from/to the terminal, then\n * this method can be replaced as follows:\n * \n * (code)\n * var oldGetPerimeterBounds = mxGraphView.prototype.getPerimeterBounds;\n * mxGraphView.prototype.getPerimeterBounds = function(terminal, edge, isSource)\n * {\n *   var model = this.graph.getModel();\n *   var childCount = model.getChildCount(terminal.cell);\n * \n *   if (childCount > 0)\n *   {\n *     var child = model.getChildAt(terminal.cell, 0);\n *     var geo = model.getGeometry(child);\n *\n *     if (geo != null &&\n *         geo.relative)\n *     {\n *       var state = this.getState(child);\n *       \n *       if (state != null)\n *       {\n *         terminal = state;\n *       }\n *     }\n *   }\n *   \n *   return oldGetPerimeterBounds.apply(this, arguments);\n * };\n * (end)\n * \n * Parameters:\n * \n * terminal - <mxCellState> that represents the terminal.\n * border - Number that adds a border between the shape and the perimeter.\n */\nmxGraphView.prototype.getPerimeterBounds = function(terminal, border)\n{\n\tborder = (border != null) ? border : 0;\n\n\tif (terminal != null)\n\t{\n\t\tborder += parseFloat(terminal.style[mxConstants.STYLE_PERIMETER_SPACING] || 0);\n\t}\n\n\treturn terminal.getPerimeterBounds(border * this.scale);\n};\n\n/**\n * Function: getPerimeterFunction\n *\n * Returns the perimeter function for the given state.\n */\nmxGraphView.prototype.getPerimeterFunction = function(state)\n{\n\tvar perimeter = state.style[mxConstants.STYLE_PERIMETER];\n\n\t// Converts string values to objects\n\tif (typeof(perimeter) == \"string\")\n\t{\n\t\tvar tmp = mxStyleRegistry.getValue(perimeter);\n\t\t\n\t\tif (tmp == null && this.isAllowEval())\n\t\t{\n \t\t\ttmp = mxUtils.eval(perimeter);\n\t\t}\n\n\t\tperimeter = tmp;\n\t}\n\t\n\tif (typeof(perimeter) == \"function\")\n\t{\n\t\treturn perimeter;\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: getNextPoint\n *\n * Returns the nearest point in the list of absolute points or the center\n * of the opposite terminal.\n * \n * Parameters:\n * \n * edge - <mxCellState> that represents the edge.\n * opposite - <mxCellState> that represents the opposite terminal.\n * source - Boolean indicating if the next point for the source or target\n * should be returned.\n */\nmxGraphView.prototype.getNextPoint = function(edge, opposite, source)\n{\n\tvar pts = edge.absolutePoints;\n\tvar point = null;\n\t\n\tif (pts != null && pts.length >= 2)\n\t{\n\t\tvar count = pts.length;\n\t\tpoint = pts[(source) ? Math.min(1, count - 1) : Math.max(0, count - 2)];\n\t}\n\t\n\tif (point == null && opposite != null)\n\t{\n\t\tpoint = new mxPoint(opposite.getCenterX(), opposite.getCenterY());\n\t}\n\t\n\treturn point;\n};\n\n/**\n * Function: getVisibleTerminal\n *\n * Returns the nearest ancestor terminal that is visible. The edge appears\n * to be connected to this terminal on the display. The result of this method\n * is cached in <mxCellState.getVisibleTerminalState>.\n * \n * Parameters:\n * \n * edge - <mxCell> whose visible terminal should be returned.\n * source - Boolean that specifies if the source or target terminal\n * should be returned.\n */\nmxGraphView.prototype.getVisibleTerminal = function(edge, source)\n{\n\tvar model = this.graph.getModel();\n\tvar result = model.getTerminal(edge, source);\n\tvar best = result;\n\t\n\twhile (result != null && result != this.currentRoot)\n\t{\n\t\tif (!this.graph.isCellVisible(best) || this.isCellCollapsed(result))\n\t\t{\n\t\t\tbest = result;\n\t\t}\n\t\t\n\t\tresult = model.getParent(result);\n\t}\n\n\t// Checks if the result is valid for the current view state\n\tif (best != null && (!model.contains(best) ||\n\t\tmodel.getParent(best) == model.getRoot() ||\n\t\tbest == this.currentRoot))\n\t{\n\t\tbest = null;\n\t}\n\t\n\treturn best;\n};\n\n/**\n * Function: updateEdgeBounds\n *\n * Updates the given state using the bounding box of t\n * he absolute points.\n * Also updates <mxCellState.terminalDistance>, <mxCellState.length> and\n * <mxCellState.segments>.\n * \n * Parameters:\n * \n * state - <mxCellState> whose bounds should be updated.\n */\nmxGraphView.prototype.updateEdgeBounds = function(state)\n{\n\tvar points = state.absolutePoints;\n\tvar p0 = points[0];\n\tvar pe = points[points.length - 1];\n\t\n\tif (p0.x != pe.x || p0.y != pe.y)\n\t{\n\t\tvar dx = pe.x - p0.x;\n\t\tvar dy = pe.y - p0.y;\n\t\tstate.terminalDistance = Math.sqrt(dx * dx + dy * dy);\n\t}\n\telse\n\t{\n\t\tstate.terminalDistance = 0;\n\t}\n\t\n\tvar length = 0;\n\tvar segments = [];\n\tvar pt = p0;\n\t\n\tif (pt != null)\n\t{\n\t\tvar minX = pt.x;\n\t\tvar minY = pt.y;\n\t\tvar maxX = minX;\n\t\tvar maxY = minY;\n\t\t\n\t\tfor (var i = 1; i < points.length; i++)\n\t\t{\n\t\t\tvar tmp = points[i];\n\t\t\t\n\t\t\tif (tmp != null)\n\t\t\t{\n\t\t\t\tvar dx = pt.x - tmp.x;\n\t\t\t\tvar dy = pt.y - tmp.y;\n\t\t\t\t\n\t\t\t\tvar segment = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tsegments.push(segment);\n\t\t\t\tlength += segment;\n\t\t\t\t\n\t\t\t\tpt = tmp;\n\t\t\t\t\n\t\t\t\tminX = Math.min(pt.x, minX);\n\t\t\t\tminY = Math.min(pt.y, minY);\n\t\t\t\tmaxX = Math.max(pt.x, maxX);\n\t\t\t\tmaxY = Math.max(pt.y, maxY);\n\t\t\t}\n\t\t}\n\t\t\n\t\tstate.length = length;\n\t\tstate.segments = segments;\n\t\t\n\t\tvar markerSize = 1; // TODO: include marker size\n\t\t\n\t\tstate.x = minX;\n\t\tstate.y = minY;\n\t\tstate.width = Math.max(markerSize, maxX - minX);\n\t\tstate.height = Math.max(markerSize, maxY - minY);\n\t}\n};\n\n/**\n * Function: getPoint\n *\n * Returns the absolute point on the edge for the given relative\n * <mxGeometry> as an <mxPoint>. The edge is represented by the given\n * <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the state of the parent edge.\n * geometry - <mxGeometry> that represents the relative location.\n */\nmxGraphView.prototype.getPoint = function(state, geometry)\n{\n\tvar x = state.getCenterX();\n\tvar y = state.getCenterY();\n\t\n\tif (state.segments != null && (geometry == null || geometry.relative))\n\t{\n\t\tvar gx = (geometry != null) ? geometry.x / 2 : 0;\n\t\tvar pointCount = state.absolutePoints.length;\n\t\tvar dist = Math.round((gx + 0.5) * state.length);\n\t\tvar segment = state.segments[0];\n\t\tvar length = 0;\t\t\t\t\n\t\tvar index = 1;\n\n\t\twhile (dist >= Math.round(length + segment) && index < pointCount - 1)\n\t\t{\n\t\t\tlength += segment;\n\t\t\tsegment = state.segments[index++];\n\t\t}\n\n\t\tvar factor = (segment == 0) ? 0 : (dist - length) / segment;\n\t\tvar p0 = state.absolutePoints[index-1];\n\t\tvar pe = state.absolutePoints[index];\n\n\t\tif (p0 != null && pe != null)\n\t\t{\n\t\t\tvar gy = 0;\n\t\t\tvar offsetX = 0;\n\t\t\tvar offsetY = 0;\n\n\t\t\tif (geometry != null)\n\t\t\t{\n\t\t\t\tgy = geometry.y;\n\t\t\t\tvar offset = geometry.offset;\n\t\t\t\t\n\t\t\t\tif (offset != null)\n\t\t\t\t{\n\t\t\t\t\toffsetX = offset.x;\n\t\t\t\t\toffsetY = offset.y;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar dx = pe.x - p0.x;\n\t\t\tvar dy = pe.y - p0.y;\n\t\t\tvar nx = (segment == 0) ? 0 : dy / segment;\n\t\t\tvar ny = (segment == 0) ? 0 : dx / segment;\n\t\t\t\n\t\t\tx = p0.x + dx * factor + (nx * gy + offsetX) * this.scale;\n\t\t\ty = p0.y + dy * factor - (ny * gy - offsetY) * this.scale;\n\t\t}\n\t}\n\telse if (geometry != null)\n\t{\n\t\tvar offset = geometry.offset;\n\t\t\n\t\tif (offset != null)\n\t\t{\n\t\t\tx += offset.x;\n\t\t\ty += offset.y;\n\t\t}\n\t}\n\t\n\treturn new mxPoint(x, y);\t\t\n};\n\n/**\n * Function: getRelativePoint\n *\n * Gets the relative point that describes the given, absolute label\n * position for the given edge state.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the state of the parent edge.\n * x - Specifies the x-coordinate of the absolute label location.\n * y - Specifies the y-coordinate of the absolute label location.\n */\nmxGraphView.prototype.getRelativePoint = function(edgeState, x, y)\n{\n\tvar model = this.graph.getModel();\n\tvar geometry = model.getGeometry(edgeState.cell);\n\t\n\tif (geometry != null)\n\t{\n\t\tvar pointCount = edgeState.absolutePoints.length;\n\t\t\n\t\tif (geometry.relative && pointCount > 1)\n\t\t{\n\t\t\tvar totalLength = edgeState.length;\n\t\t\tvar segments = edgeState.segments;\n\n\t\t\t// Works which line segment the point of the label is closest to\n\t\t\tvar p0 = edgeState.absolutePoints[0];\n\t\t\tvar pe = edgeState.absolutePoints[1];\n\t\t\tvar minDist = mxUtils.ptSegDistSq(p0.x, p0.y, pe.x, pe.y, x, y);\n\n\t\t\tvar index = 0;\n\t\t\tvar tmp = 0;\n\t\t\tvar length = 0;\n\t\t\t\n\t\t\tfor (var i = 2; i < pointCount; i++)\n\t\t\t{\n\t\t\t\ttmp += segments[i - 2];\n\t\t\t\tpe = edgeState.absolutePoints[i];\n\t\t\t\tvar dist = mxUtils.ptSegDistSq(p0.x, p0.y, pe.x, pe.y, x, y);\n\n\t\t\t\tif (dist <= minDist)\n\t\t\t\t{\n\t\t\t\t\tminDist = dist;\n\t\t\t\t\tindex = i - 1;\n\t\t\t\t\tlength = tmp;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tp0 = pe;\n\t\t\t}\n\t\t\t\n\t\t\tvar seg = segments[index];\n\t\t\tp0 = edgeState.absolutePoints[index];\n\t\t\tpe = edgeState.absolutePoints[index + 1];\n\t\t\t\n\t\t\tvar x2 = p0.x;\n\t\t\tvar y2 = p0.y;\n\t\t\t\n\t\t\tvar x1 = pe.x;\n\t\t\tvar y1 = pe.y;\n\t\t\t\n\t\t\tvar px = x;\n\t\t\tvar py = y;\n\t\t\t\n\t\t\tvar xSegment = x2 - x1;\n\t\t\tvar ySegment = y2 - y1;\n\t\t\t\n\t\t\tpx -= x1;\n\t\t\tpy -= y1;\n\t\t\tvar projlenSq = 0;\n\t\t\t\n\t\t\tpx = xSegment - px;\n\t\t\tpy = ySegment - py;\n\t\t\tvar dotprod = px * xSegment + py * ySegment;\n\n\t\t\tif (dotprod <= 0.0)\n\t\t\t{\n\t\t\t\tprojlenSq = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tprojlenSq = dotprod * dotprod\n\t\t\t\t\t\t/ (xSegment * xSegment + ySegment * ySegment);\n\t\t\t}\n\n\t\t\tvar projlen = Math.sqrt(projlenSq);\n\n\t\t\tif (projlen > seg)\n\t\t\t{\n\t\t\t\tprojlen = seg;\n\t\t\t}\n\n\t\t\tvar yDistance = Math.sqrt(mxUtils.ptSegDistSq(p0.x, p0.y, pe\n\t\t\t\t\t.x, pe.y, x, y));\n\t\t\tvar direction = mxUtils.relativeCcw(p0.x, p0.y, pe.x, pe.y, x, y);\n\n\t\t\tif (direction == -1)\n\t\t\t{\n\t\t\t\tyDistance = -yDistance;\n\t\t\t}\n\n\t\t\t// Constructs the relative point for the label\n\t\t\treturn new mxPoint(((totalLength / 2 - length - projlen) / totalLength) * -2,\n\t\t\t\t\t\tyDistance / this.scale);\n\t\t}\n\t}\n\t\n\treturn new mxPoint();\n};\n\n/**\n * Function: updateEdgeLabelOffset\n *\n * Updates <mxCellState.absoluteOffset> for the given state. The absolute\n * offset is normally used for the position of the edge label. Is is\n * calculated from the geometry as an absolute offset from the center\n * between the two endpoints if the geometry is absolute, or as the\n * relative distance between the center along the line and the absolute\n * orthogonal distance if the geometry is relative.\n * \n * Parameters:\n * \n * state - <mxCellState> whose absolute offset should be updated.\n */\nmxGraphView.prototype.updateEdgeLabelOffset = function(state)\n{\n\tvar points = state.absolutePoints;\n\t\n\tstate.absoluteOffset.x = state.getCenterX();\n\tstate.absoluteOffset.y = state.getCenterY();\n\n\tif (points != null && points.length > 0 && state.segments != null)\n\t{\n\t\tvar geometry = this.graph.getCellGeometry(state.cell);\n\t\t\n\t\tif (geometry.relative)\n\t\t{\n\t\t\tvar offset = this.getPoint(state, geometry);\n\t\t\t\n\t\t\tif (offset != null)\n\t\t\t{\n\t\t\t\tstate.absoluteOffset = offset;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar p0 = points[0];\n\t\t\tvar pe = points[points.length - 1];\n\t\t\t\n\t\t\tif (p0 != null && pe != null)\n\t\t\t{\n\t\t\t\tvar dx = pe.x - p0.x;\n\t\t\t\tvar dy = pe.y - p0.y;\n\t\t\t\tvar x0 = 0;\n\t\t\t\tvar y0 = 0;\n\n\t\t\t\tvar off = geometry.offset;\n\t\t\t\t\n\t\t\t\tif (off != null)\n\t\t\t\t{\n\t\t\t\t\tx0 = off.x;\n\t\t\t\t\ty0 = off.y;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar x = p0.x + dx / 2 + x0 * this.scale;\n\t\t\t\tvar y = p0.y + dy / 2 + y0 * this.scale;\n\t\t\t\t\n\t\t\t\tstate.absoluteOffset.x = x;\n\t\t\t\tstate.absoluteOffset.y = y;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: getState\n *\n * Returns the <mxCellState> for the given cell. If create is true, then\n * the state is created if it does not yet exist.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the <mxCellState> should be returned.\n * create - Optional boolean indicating if a new state should be created\n * if it does not yet exist. Default is false.\n */\nmxGraphView.prototype.getState = function(cell, create)\n{\n\tcreate = create || false;\n\tvar state = null;\n\t\n\tif (cell != null)\n\t{\n\t\tstate = this.states.get(cell);\n\t\t\n\t\tif (create && (state == null || this.updateStyle) && this.graph.isCellVisible(cell))\n\t\t{\n\t\t\tif (state == null)\n\t\t\t{\n\t\t\t\tstate = this.createState(cell);\n\t\t\t\tthis.states.put(cell, state);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstate.style = this.graph.getCellStyle(cell);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn state;\n};\n\n/**\n * Function: isRendering\n *\n * Returns <rendering>.\n */\nmxGraphView.prototype.isRendering = function()\n{\n\treturn this.rendering;\n};\n\n/**\n * Function: setRendering\n *\n * Sets <rendering>.\n */\nmxGraphView.prototype.setRendering = function(value)\n{\n\tthis.rendering = value;\n};\n\n/**\n * Function: isAllowEval\n *\n * Returns <allowEval>.\n */\nmxGraphView.prototype.isAllowEval = function()\n{\n\treturn this.allowEval;\n};\n\n/**\n * Function: setAllowEval\n *\n * Sets <allowEval>.\n */\nmxGraphView.prototype.setAllowEval = function(value)\n{\n\tthis.allowEval = value;\n};\n\n/**\n * Function: getStates\n *\n * Returns <states>.\n */\nmxGraphView.prototype.getStates = function()\n{\n\treturn this.states;\n};\n\n/**\n * Function: setStates\n *\n * Sets <states>.\n */\nmxGraphView.prototype.setStates = function(value)\n{\n\tthis.states = value;\n};\n\n/**\n * Function: getCellStates\n *\n * Returns the <mxCellStates> for the given array of <mxCells>. The array\n * contains all states that are not null, that is, the returned array may\n * have less elements than the given array. If no argument is given, then\n * this returns <states>.\n */\nmxGraphView.prototype.getCellStates = function(cells)\n{\n\tif (cells == null)\n\t{\n\t\treturn this.states;\n\t}\n\telse\n\t{\n\t\tvar result = [];\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tvar state = this.getState(cells[i]);\n\t\t\t\n\t\t\tif (state != null)\n\t\t\t{\n\t\t\t\tresult.push(state);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n};\n\n/**\n * Function: removeState\n *\n * Removes and returns the <mxCellState> for the given cell.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the <mxCellState> should be removed.\n */\nmxGraphView.prototype.removeState = function(cell)\n{\n\tvar state = null;\n\t\n\tif (cell != null)\n\t{\n\t\tstate = this.states.remove(cell);\n\t\t\n\t\tif (state != null)\n\t\t{\n\t\t\tthis.graph.cellRenderer.destroy(state);\n\t\t\tstate.invalid = true;\n\t\t\tstate.destroy();\n\t\t}\n\t}\n\t\n\treturn state;\n};\n\n/**\n * Function: createState\n *\n * Creates and returns an <mxCellState> for the given cell and initializes\n * it using <mxCellRenderer.initialize>.\n * \n * Parameters:\n * \n * cell - <mxCell> for which a new <mxCellState> should be created.\n */\nmxGraphView.prototype.createState = function(cell)\n{\n\treturn new mxCellState(this, cell, this.graph.getCellStyle(cell));\n};\n\n/**\n * Function: getCanvas\n *\n * Returns the DOM node that contains the background-, draw- and\n * overlay- and decoratorpanes.\n */\nmxGraphView.prototype.getCanvas = function()\n{\n\treturn this.canvas;\n};\n\n/**\n * Function: getBackgroundPane\n *\n * Returns the DOM node that represents the background layer.\n */\nmxGraphView.prototype.getBackgroundPane = function()\n{\n\treturn this.backgroundPane;\n};\n\n/**\n * Function: getDrawPane\n *\n * Returns the DOM node that represents the main drawing layer.\n */\nmxGraphView.prototype.getDrawPane = function()\n{\n\treturn this.drawPane;\n};\n\n/**\n * Function: getOverlayPane\n *\n * Returns the DOM node that represents the layer above the drawing layer.\n */\nmxGraphView.prototype.getOverlayPane = function()\n{\n\treturn this.overlayPane;\n};\n\n/**\n * Function: getDecoratorPane\n *\n * Returns the DOM node that represents the topmost drawing layer.\n */\nmxGraphView.prototype.getDecoratorPane = function()\n{\n\treturn this.decoratorPane;\n};\n\n/**\n * Function: isContainerEvent\n * \n * Returns true if the event origin is one of the drawing panes or\n * containers of the view.\n */\nmxGraphView.prototype.isContainerEvent = function(evt)\n{\n\tvar source = mxEvent.getSource(evt);\n\n\treturn (source == this.graph.container ||\n\t\tsource.parentNode == this.backgroundPane ||\n\t\t(source.parentNode != null &&\n\t\tsource.parentNode.parentNode == this.backgroundPane) ||\n\t\tsource == this.canvas.parentNode ||\n\t\tsource == this.canvas ||\n\t\tsource == this.backgroundPane ||\n\t\tsource == this.drawPane ||\n\t\tsource == this.overlayPane ||\n\t\tsource == this.decoratorPane);\n};\n\n/**\n * Function: isScrollEvent\n * \n * Returns true if the event origin is one of the scrollbars of the\n * container in IE. Such events are ignored.\n */\n mxGraphView.prototype.isScrollEvent = function(evt)\n{\n\tvar offset = mxUtils.getOffset(this.graph.container);\n\tvar pt = new mxPoint(evt.clientX - offset.x, evt.clientY - offset.y);\n\n\tvar outWidth = this.graph.container.offsetWidth;\n\tvar inWidth = this.graph.container.clientWidth;\n\n\tif (outWidth > inWidth && pt.x > inWidth + 2 && pt.x <= outWidth)\n\t{\n\t\treturn true;\n\t}\n\n\tvar outHeight = this.graph.container.offsetHeight;\n\tvar inHeight = this.graph.container.clientHeight;\n\t\n\tif (outHeight > inHeight && pt.y > inHeight + 2 && pt.y <= outHeight)\n\t{\n\t\treturn true;\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: init\n *\n * Initializes the graph event dispatch loop for the specified container\n * and invokes <create> to create the required DOM nodes for the display.\n */\nmxGraphView.prototype.init = function()\n{\n\tthis.installListeners();\n\t\n\t// Creates the DOM nodes for the respective display dialect\n\tvar graph = this.graph;\n\t\n\tif (graph.dialect == mxConstants.DIALECT_SVG)\n\t{\n\t\tthis.createSvg();\n\t}\n\telse if (graph.dialect == mxConstants.DIALECT_VML)\n\t{\n\t\tthis.createVml();\n\t}\n\telse\n\t{\n\t\tthis.createHtml();\n\t}\n};\n\n/**\n * Function: installListeners\n *\n * Installs the required listeners in the container.\n */\nmxGraphView.prototype.installListeners = function()\n{\n\tvar graph = this.graph;\n\tvar container = graph.container;\n\t\n\tif (container != null)\n\t{\n\t\t// Support for touch device gestures (eg. pinch to zoom)\n\t\t// Double-tap handling is implemented in mxGraph.fireMouseEvent\n\t\tif (mxClient.IS_TOUCH)\n\t\t{\n\t\t\tmxEvent.addListener(container, 'gesturestart', mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tgraph.fireGestureEvent(evt);\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}));\n\t\t\t\n\t\t\tmxEvent.addListener(container, 'gesturechange', mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tgraph.fireGestureEvent(evt);\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}));\n\n\t\t\tmxEvent.addListener(container, 'gestureend', mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tgraph.fireGestureEvent(evt);\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}));\n\t\t}\n\t\t\n\t\t// Fires event only for one pointer per gesture\n\t\tvar pointerId = null;\n\t\t\n\t\t// Adds basic listeners for graph event dispatching\n\t\tmxEvent.addGestureListeners(container, mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\t// Condition to avoid scrollbar events starting a rubberband selection\n\t\t\tif (this.isContainerEvent(evt) && ((!mxClient.IS_IE && !mxClient.IS_IE11 && !mxClient.IS_GC &&\n\t\t\t\t!mxClient.IS_OP && !mxClient.IS_SF) || !this.isScrollEvent(evt)))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt));\n\t\t\t\tpointerId = evt.pointerId;\n\t\t\t}\n\t\t}),\n\t\tmxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (this.isContainerEvent(evt) && (pointerId == null || evt.pointerId == pointerId))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt));\n\t\t\t}\n\t\t}),\n\t\tmxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (this.isContainerEvent(evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt));\n\t\t\t}\n\t\t\t\n\t\t\tpointerId = null;\n\t\t}));\n\t\t\n\t\t// Adds listener for double click handling on background, this does always\n\t\t// use native event handler, we assume that the DOM of the background\n\t\t// does not change during the double click\n\t\tmxEvent.addListener(container, 'dblclick', mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (this.isContainerEvent(evt))\n\t\t\t{\n\t\t\t\tgraph.dblClick(evt);\n\t\t\t}\n\t\t}));\n\n\t\t// Workaround for touch events which started on some DOM node\n\t\t// on top of the container, in which case the cells under the\n\t\t// mouse for the move and up events are not detected.\n\t\tvar getState = function(evt)\n\t\t{\n\t\t\tvar state = null;\n\t\t\t\n\t\t\t// Workaround for touch events which started on some DOM node\n\t\t\t// on top of the container, in which case the cells under the\n\t\t\t// mouse for the move and up events are not detected.\n\t\t\tif (mxClient.IS_TOUCH)\n\t\t\t{\n\t\t\t\tvar x = mxEvent.getClientX(evt);\n\t\t\t\tvar y = mxEvent.getClientY(evt);\n\t\t\t\t\n\t\t\t\t// Dispatches the drop event to the graph which\n\t\t\t\t// consumes and executes the source function\n\t\t\t\tvar pt = mxUtils.convertPoint(container, x, y);\n\t\t\t\tstate = graph.view.getState(graph.getCellAt(pt.x, pt.y));\n\t\t\t}\n\t\t\t\n\t\t\treturn state;\n\t\t};\n\t\t\n\t\t// Adds basic listeners for graph event dispatching outside of the\n\t\t// container and finishing the handling of a single gesture\n\t\t// Implemented via graph event dispatch loop to avoid duplicate events\n\t\t// in Firefox and Chrome\n\t\tgraph.addMouseListener(\n\t\t{\n\t\t\tmouseDown: function(sender, me)\n\t\t\t{\n\t\t\t\tgraph.popupMenuHandler.hideMenu();\n\t\t\t},\n\t\t\tmouseMove: function() { },\n\t\t\tmouseUp: function() { }\n\t\t});\n\t\t\n\t\tthis.moveHandler = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\t// Hides the tooltip if mouse is outside container\n\t\t\tif (graph.tooltipHandler != null && graph.tooltipHandler.isHideOnHover())\n\t\t\t{\n\t\t\t\tgraph.tooltipHandler.hide();\n\t\t\t}\n\n\t\t\tif (this.captureDocumentGesture && graph.isMouseDown && graph.container != null &&\n\t\t\t\t!this.isContainerEvent(evt) && graph.container.style.display != 'none' &&\n\t\t\t\tgraph.container.style.visibility != 'hidden' && !mxEvent.isConsumed(evt))\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt, getState(evt)));\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.endHandler = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (this.captureDocumentGesture && graph.isMouseDown && graph.container != null &&\n\t\t\t\t!this.isContainerEvent(evt) && graph.container.style.display != 'none' &&\n\t\t\t\tgraph.container.style.visibility != 'hidden')\n\t\t\t{\n\t\t\t\tgraph.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt));\n\t\t\t}\n\t\t});\n\t\t\n\t\tmxEvent.addGestureListeners(document, null, this.moveHandler, this.endHandler);\n\t}\n};\n\n/**\n * Function: createHtml\n *\n * Creates the DOM nodes for the HTML display.\n */\nmxGraphView.prototype.createHtml = function()\n{\n\tvar container = this.graph.container;\n\t\n\tif (container != null)\n\t{\n\t\tthis.canvas = this.createHtmlPane('100%', '100%');\n\t\tthis.canvas.style.overflow = 'hidden';\n\t\n\t\t// Uses minimal size for inner DIVs on Canvas. This is required\n\t\t// for correct event processing in IE. If we have an overlapping\n\t\t// DIV then the events on the cells are only fired for labels.\n\t\tthis.backgroundPane = this.createHtmlPane('1px', '1px');\n\t\tthis.drawPane = this.createHtmlPane('1px', '1px');\n\t\tthis.overlayPane = this.createHtmlPane('1px', '1px');\n\t\tthis.decoratorPane = this.createHtmlPane('1px', '1px');\n\t\t\n\t\tthis.canvas.appendChild(this.backgroundPane);\n\t\tthis.canvas.appendChild(this.drawPane);\n\t\tthis.canvas.appendChild(this.overlayPane);\n\t\tthis.canvas.appendChild(this.decoratorPane);\n\n\t\tcontainer.appendChild(this.canvas);\n\t\tthis.updateContainerStyle(container);\n\t\t\n\t\t// Implements minWidth/minHeight in quirks mode\n\t\tif (mxClient.IS_QUIRKS)\n\t\t{\n\t\t\tvar onResize = mxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tvar bounds = this.getGraphBounds();\n\t\t\t\tvar width = bounds.x + bounds.width + this.graph.border;\n\t\t\t\tvar height = bounds.y + bounds.height + this.graph.border;\n\t\t\t\t\n\t\t\t\tthis.updateHtmlCanvasSize(width, height);\n\t\t\t});\n\t\t\t\n\t\t\tmxEvent.addListener(window, 'resize', onResize);\n\t\t}\n\t}\n};\n\n/**\n * Function: updateHtmlCanvasSize\n * \n * Updates the size of the HTML canvas.\n */\nmxGraphView.prototype.updateHtmlCanvasSize = function(width, height)\n{\n\tif (this.graph.container != null)\n\t{\n\t\tvar ow = this.graph.container.offsetWidth;\n\t\tvar oh = this.graph.container.offsetHeight;\n\n\t\tif (ow < width)\n\t\t{\n\t\t\tthis.canvas.style.width = width + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.canvas.style.width = '100%';\n\t\t}\n\n\t\tif (oh < height)\n\t\t{\n\t\t\tthis.canvas.style.height = height + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.canvas.style.height = '100%';\n\t\t}\n\t}\n};\n\n/**\n * Function: createHtmlPane\n * \n * Creates and returns a drawing pane in HTML (DIV).\n */\nmxGraphView.prototype.createHtmlPane = function(width, height)\n{\n\tvar pane = document.createElement('DIV');\n\t\n\tif (width != null && height != null)\n\t{\n\t\tpane.style.position = 'absolute';\n\t\tpane.style.left = '0px';\n\t\tpane.style.top = '0px';\n\n\t\tpane.style.width = width;\n\t\tpane.style.height = height;\n\t}\n\telse\n\t{\n\t\tpane.style.position = 'relative';\n\t}\n\t\n\treturn pane;\n};\n\n/**\n * Function: createVml\n *\n * Creates the DOM nodes for the VML display.\n */\nmxGraphView.prototype.createVml = function()\n{\n\tvar container = this.graph.container;\n\n\tif (container != null)\n\t{\n\t\tvar width = container.offsetWidth;\n\t\tvar height = container.offsetHeight;\n\t\tthis.canvas = this.createVmlPane(width, height);\n\t\tthis.canvas.style.overflow = 'hidden';\n\t\t\n\t\tthis.backgroundPane = this.createVmlPane(width, height);\n\t\tthis.drawPane = this.createVmlPane(width, height);\n\t\tthis.overlayPane = this.createVmlPane(width, height);\n\t\tthis.decoratorPane = this.createVmlPane(width, height);\n\t\t\n\t\tthis.canvas.appendChild(this.backgroundPane);\n\t\tthis.canvas.appendChild(this.drawPane);\n\t\tthis.canvas.appendChild(this.overlayPane);\n\t\tthis.canvas.appendChild(this.decoratorPane);\n\t\t\n\t\tcontainer.appendChild(this.canvas);\n\t}\n};\n\n/**\n * Function: createVmlPane\n * \n * Creates a drawing pane in VML (group).\n */\nmxGraphView.prototype.createVmlPane = function(width, height)\n{\n\tvar pane = document.createElement(mxClient.VML_PREFIX + ':group');\n\t\n\t// At this point the width and height are potentially\n\t// uninitialized. That's OK.\n\tpane.style.position = 'absolute';\n\tpane.style.left = '0px';\n\tpane.style.top = '0px';\n\n\tpane.style.width = width + 'px';\n\tpane.style.height = height + 'px';\n\n\tpane.setAttribute('coordsize', width + ',' + height);\n\tpane.setAttribute('coordorigin', '0,0');\n\t\n\treturn pane;\n};\n\n/**\n * Function: createSvg\n *\n * Creates and returns the DOM nodes for the SVG display.\n */\nmxGraphView.prototype.createSvg = function()\n{\n\tvar container = this.graph.container;\n\tthis.canvas = document.createElementNS(mxConstants.NS_SVG, 'g');\n\t\n\t// For background image\n\tthis.backgroundPane = document.createElementNS(mxConstants.NS_SVG, 'g');\n\tthis.canvas.appendChild(this.backgroundPane);\n\n\t// Adds two layers (background is early feature)\n\tthis.drawPane = document.createElementNS(mxConstants.NS_SVG, 'g');\n\tthis.canvas.appendChild(this.drawPane);\n\n\tthis.overlayPane = document.createElementNS(mxConstants.NS_SVG, 'g');\n\tthis.canvas.appendChild(this.overlayPane);\n\t\n\tthis.decoratorPane = document.createElementNS(mxConstants.NS_SVG, 'g');\n\tthis.canvas.appendChild(this.decoratorPane);\n\t\n\tvar root = document.createElementNS(mxConstants.NS_SVG, 'svg');\n\troot.style.left = '0px';\n\troot.style.top = '0px';\n\troot.style.width = '100%';\n\troot.style.height = '100%';\n\t\n\t// NOTE: In standards mode, the SVG must have block layout\n\t// in order for the container DIV to not show scrollbars.\n\troot.style.display = 'block';\n\troot.appendChild(this.canvas);\n\t\n\t// Workaround for scrollbars in IE11 and below\n\tif (mxClient.IS_IE || mxClient.IS_IE11)\n\t{\n\t\troot.style.overflow = 'hidden';\n\t}\n\n\tif (container != null)\n\t{\n\t\tcontainer.appendChild(root);\n\t\tthis.updateContainerStyle(container);\n\t}\n};\n\n/**\n * Function: updateContainerStyle\n * \n * Updates the style of the container after installing the SVG DOM elements.\n */\nmxGraphView.prototype.updateContainerStyle = function(container)\n{\n\t// Workaround for offset of container\n\tvar style = mxUtils.getCurrentStyle(container);\n\t\n\tif (style != null && style.position == 'static')\n\t{\n\t\tcontainer.style.position = 'relative';\n\t}\n\t\n\t// Disables built-in pan and zoom in IE10 and later\n\tif (mxClient.IS_POINTER)\n\t{\n\t\tcontainer.style.touchAction = 'none';\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the view and all its resources.\n */\nmxGraphView.prototype.destroy = function()\n{\n\tvar root = (this.canvas != null) ? this.canvas.ownerSVGElement : null;\n\t\n\tif (root == null)\n\t{\n\t\troot = this.canvas;\n\t}\n\t\n\tif (root != null && root.parentNode != null)\n\t{\n\t\tthis.clear(this.currentRoot, true);\n\t\tmxEvent.removeGestureListeners(document, null, this.moveHandler, this.endHandler);\n\t\tmxEvent.release(this.graph.container);\n\t\troot.parentNode.removeChild(root);\n\t\t\n\t\tthis.moveHandler = null;\n\t\tthis.endHandler = null;\n\t\tthis.canvas = null;\n\t\tthis.backgroundPane = null;\n\t\tthis.drawPane = null;\n\t\tthis.overlayPane = null;\n\t\tthis.decoratorPane = null;\n\t}\n};\n\n/**\n * Class: mxCurrentRootChange\n *\n * Action to change the current root in a view.\n *\n * Constructor: mxCurrentRootChange\n *\n * Constructs a change of the current root in the given view.\n */\nfunction mxCurrentRootChange(view, root)\n{\n\tthis.view = view;\n\tthis.root = root;\n\tthis.previous = root;\n\tthis.isUp = root == null;\n\t\n\tif (!this.isUp)\n\t{\n\t\tvar tmp = this.view.currentRoot;\n\t\tvar model = this.view.graph.getModel();\n\t\t\n\t\twhile (tmp != null)\n\t\t{\n\t\t\tif (tmp == root)\n\t\t\t{\n\t\t\t\tthis.isUp = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\ttmp = model.getParent(tmp);\n\t\t}\n\t}\n};\n\n/**\n * Function: execute\n *\n * Changes the current root of the view.\n */\nmxCurrentRootChange.prototype.execute = function()\n{\n\tvar tmp = this.view.currentRoot;\n\tthis.view.currentRoot = this.previous;\n\tthis.previous = tmp;\n\n\tvar translate = this.view.graph.getTranslateForRoot(this.view.currentRoot);\n\t\n\tif (translate != null)\n\t{\n\t\tthis.view.translate = new mxPoint(-translate.x, -translate.y);\n\t}\n\n\tif (this.isUp)\n\t{\n\t\tthis.view.clear(this.view.currentRoot, true);\n\t\tthis.view.validate();\n\t}\n\telse\n\t{\n\t\tthis.view.refresh();\n\t}\n\t\n\tvar name = (this.isUp) ? mxEvent.UP : mxEvent.DOWN;\n\tthis.view.fireEvent(new mxEventObject(name,\n\t\t'root', this.view.currentRoot, 'previous', this.previous));\n\tthis.isUp = !this.isUp;\n};\n\n__mxOutput.mxGraphView = typeof mxGraphView !== 'undefined' ? mxGraphView : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraph\n *\n * Extends <mxEventSource> to implement a graph component for\n * the browser. This is the main class of the package. To activate\n * panning and connections use <setPanning> and <setConnectable>.\n * For rubberband selection you must create a new instance of\n * <mxRubberband>. The following listeners are added to\n * <mouseListeners> by default:\n * \n * - <tooltipHandler>: <mxTooltipHandler> that displays tooltips\n * - <panningHandler>: <mxPanningHandler> for panning and popup menus\n * - <connectionHandler>: <mxConnectionHandler> for creating connections\n * - <graphHandler>: <mxGraphHandler> for moving and cloning cells\n * \n * These listeners will be called in the above order if they are enabled.\n *\n * Background Images:\n * \n * To display a background image, set the image, image width and\n * image height using <setBackgroundImage>. If one of the\n * above values has changed then the <view>'s <mxGraphView.validate>\n * should be invoked.\n * \n * Cell Images:\n * \n * To use images in cells, a shape must be specified in the default\n * vertex style (or any named style). Possible shapes are\n * <mxConstants.SHAPE_IMAGE> and <mxConstants.SHAPE_LABEL>.\n * The code to change the shape used in the default vertex style,\n * the following code is used:\n * \n * (code)\n * var style = graph.getStylesheet().getDefaultVertexStyle();\n * style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_IMAGE;\n * (end)\n * \n * For the default vertex style, the image to be displayed can be\n * specified in a cell's style using the <mxConstants.STYLE_IMAGE>\n * key and the image URL as a value, for example:\n * \n * (code)\n * image=http://www.example.com/image.gif\n * (end)\n * \n * For a named style, the the stylename must be the first element\n * of the cell style:\n * \n * (code)\n * stylename;image=http://www.example.com/image.gif\n * (end)\n * \n * A cell style can have any number of key=value pairs added, divided\n * by a semicolon as follows:\n * \n * (code)\n * [stylename;|key=value;]\n * (end)\n *\n * Labels:\n * \n * The cell labels are defined by <getLabel> which uses <convertValueToString>\n * if <labelsVisible> is true. If a label must be rendered as HTML markup, then\n * <isHtmlLabel> should return true for the respective cell. If all labels\n * contain HTML markup, <htmlLabels> can be set to true. NOTE: Enabling HTML\n * labels carries a possible security risk (see the section on security in\n * the manual).\n * \n * If wrapping is needed for a label, then <isHtmlLabel> and <isWrapping> must\n * return true for the cell whose label should be wrapped. See <isWrapping> for\n * an example.\n * \n * If clipping is needed to keep the rendering of a HTML label inside the\n * bounds of its vertex, then <isClipping> should return true for the\n * respective cell.\n * \n * By default, edge labels are movable and vertex labels are fixed. This can be\n * changed by setting <edgeLabelsMovable> and <vertexLabelsMovable>, or by\n * overriding <isLabelMovable>.\n *\n * In-place Editing:\n * \n * In-place editing is started with a doubleclick or by typing F2.\n * Programmatically, <edit> is used to check if the cell is editable\n * (<isCellEditable>) and call <startEditingAtCell>, which invokes\n * <mxCellEditor.startEditing>. The editor uses the value returned\n * by <getEditingValue> as the editing value.\n * \n * After in-place editing, <labelChanged> is called, which invokes\n * <mxGraphModel.setValue>, which in turn calls\n * <mxGraphModel.valueForCellChanged> via <mxValueChange>.\n * \n * The event that triggers in-place editing is passed through to the\n * <cellEditor>, which may take special actions depending on the type of the\n * event or mouse location, and is also passed to <getEditingValue>. The event\n * is then passed back to the event processing functions which can perform\n * specific actions based on the trigger event.\n * \n * Tooltips:\n * \n * Tooltips are implemented by <getTooltip>, which calls <getTooltipForCell>\n * if a cell is under the mousepointer. The default implementation checks if\n * the cell has a getTooltip function and calls it if it exists. Hence, in order\n * to provide custom tooltips, the cell must provide a getTooltip function, or \n * one of the two above functions must be overridden.\n * \n * Typically, for custom cell tooltips, the latter function is overridden as\n * follows:\n * \n * (code)\n * graph.getTooltipForCell = function(cell)\n * {\n *   var label = this.convertValueToString(cell);\n *   return 'Tooltip for '+label;\n * }\n * (end)\n * \n * When using a config file, the function is overridden in the mxGraph section\n * using the following entry:\n * \n * (code)\n * <add as=\"getTooltipForCell\"><![CDATA[\n *   function(cell)\n *   {\n *     var label = this.convertValueToString(cell);\n *     return 'Tooltip for '+label;\n *   }\n * ]]></add>\n * (end)\n * \n * \"this\" refers to the graph in the implementation, so for example to check if \n * a cell is an edge, you use this.getModel().isEdge(cell)\n *\n * For replacing the default implementation of <getTooltipForCell> (rather than \n * replacing the function on a specific instance), the following code should be \n * used after loading the JavaScript files, but before creating a new mxGraph \n * instance using <mxGraph>:\n * \n * (code)\n * mxGraph.prototype.getTooltipForCell = function(cell)\n * {\n *   var label = this.convertValueToString(cell);\n *   return 'Tooltip for '+label;\n * }\n * (end)\n * \n * Shapes & Styles:\n * \n * The implementation of new shapes is demonstrated in the examples. We'll assume\n * that we have implemented a custom shape with the name BoxShape which we want\n * to use for drawing vertices. To use this shape, it must first be registered in\n * the cell renderer as follows:\n * \n * (code)\n * mxCellRenderer.registerShape('box', BoxShape);\n * (end)\n * \n * The code registers the BoxShape constructor under the name box in the cell\n * renderer of the graph. The shape can now be referenced using the shape-key in\n * a style definition. (The cell renderer contains a set of additional shapes,\n * namely one for each constant with a SHAPE-prefix in <mxConstants>.)\n *\n * Styles are a collection of key, value pairs and a stylesheet is a collection\n * of named styles. The names are referenced by the cellstyle, which is stored\n * in <mxCell.style> with the following format: [stylename;|key=value;]. The\n * string is resolved to a collection of key, value pairs, where the keys are\n * overridden with the values in the string.\n *\n * When introducing a new shape, the name under which the shape is registered\n * must be used in the stylesheet. There are three ways of doing this:\n * \n *   - By changing the default style, so that all vertices will use the new\n * \t\tshape\n *   - By defining a new style, so that only vertices with the respective\n * \t\tcellstyle will use the new shape\n *   - By using shape=box in the cellstyle's optional list of key, value pairs\n * \t\tto be overridden\n *\n * In the first case, the code to fetch and modify the default style for\n * vertices is as follows:\n * \n * (code)\n * var style = graph.getStylesheet().getDefaultVertexStyle();\n * style[mxConstants.STYLE_SHAPE] = 'box';\n * (end)\n * \n * The code takes the default vertex style, which is used for all vertices that\n * do not have a specific cellstyle, and modifies the value for the shape-key\n * in-place to use the new BoxShape for drawing vertices. This is done by\n * assigning the box value in the second line, which refers to the name of the\n * BoxShape in the cell renderer.\n * \n * In the second case, a collection of key, value pairs is created and then\n * added to the stylesheet under a new name. In order to distinguish the\n * shapename and the stylename we'll use boxstyle for the stylename:\n * \n * (code)\n * var style = new Object();\n * style[mxConstants.STYLE_SHAPE] = 'box';\n * style[mxConstants.STYLE_STROKECOLOR] = '#000000';\n * style[mxConstants.STYLE_FONTCOLOR] = '#000000';\n * graph.getStylesheet().putCellStyle('boxstyle', style);\n * (end)\n * \n * The code adds a new style with the name boxstyle to the stylesheet. To use\n * this style with a cell, it must be referenced from the cellstyle as follows:\n * \n * (code)\n * var vertex = graph.insertVertex(parent, null, 'Hello, World!', 20, 20, 80, 20,\n * \t\t\t\t'boxstyle');\n * (end)\n * \n * To summarize, each new shape must be registered in the <mxCellRenderer> with\n * a unique name. That name is then used as the value of the shape-key in a\n * default or custom style. If there are multiple custom shapes, then there\n * should be a separate style for each shape.\n * \n * Inheriting Styles:\n * \n * For fill-, stroke-, gradient-, font- and indicatorColors special keywords\n * can be used. The inherit keyword for one of these colors will inherit the\n * color for the same key from the parent cell. The swimlane keyword does the\n * same, but inherits from the nearest swimlane in the ancestor hierarchy.\n * Finally, the indicated keyword will use the color of the indicator as the\n * color for the given key.\n * \n * Scrollbars:\n * \n * The <containers> overflow CSS property defines if scrollbars are used to\n * display the graph. For values of 'auto' or 'scroll', the scrollbars will\n * be shown. Note that the <resizeContainer> flag is normally not used\n * together with scrollbars, as it will resize the container to match the\n * size of the graph after each change.\n * \n * Multiplicities and Validation:\n * \n * To control the possible connections in mxGraph, <getEdgeValidationError> is\n * used. The default implementation of the function uses <multiplicities>,\n * which is an array of <mxMultiplicity>. Using this class allows to establish\n * simple multiplicities, which are enforced by the graph.\n * \n * The <mxMultiplicity> uses <mxCell.is> to determine for which terminals it\n * applies. The default implementation of <mxCell.is> works with DOM nodes (XML\n * nodes) and checks if the given type parameter matches the nodeName of the\n * node (case insensitive). Optionally, an attributename and value can be\n * specified which are also checked.\n * \n * <getEdgeValidationError> is called whenever the connectivity of an edge\n * changes. It returns an empty string or an error message if the edge is\n * invalid or null if the edge is valid. If the returned string is not empty\n * then it is displayed as an error message.\n * \n * <mxMultiplicity> allows to specify the multiplicity between a terminal and\n * its possible neighbors. For example, if any rectangle may only be connected\n * to, say, a maximum of two circles you can add the following rule to\n * <multiplicities>:\n * \n * (code)\n * graph.multiplicities.push(new mxMultiplicity(\n *   true, 'rectangle', null, null, 0, 2, ['circle'],\n *   'Only 2 targets allowed',\n *   'Only shape targets allowed'));\n * (end)\n * \n * This will display the first error message whenever a rectangle is connected\n * to more than two circles and the second error message if a rectangle is\n * connected to anything but a circle.\n * \n * For certain multiplicities, such as a minimum of 1 connection, which cannot\n * be enforced at cell creation time (unless the cell is created together with\n * the connection), mxGraph offers <validate> which checks all multiplicities\n * for all cells and displays the respective error messages in an overlay icon\n * on the cells.\n * \n * If a cell is collapsed and contains validation errors, a respective warning\n * icon is attached to the collapsed cell.\n * \n * Auto-Layout:\n * \n * For automatic layout, the <getLayout> hook is provided in <mxLayoutManager>.\n * It can be overridden to return a layout algorithm for the children of a\n * given cell.\n * \n * Unconnected edges:\n * \n * The default values for all switches are designed to meet the requirements of\n * general diagram drawing applications. A very typical set of settings to\n * avoid edges that are not connected is the following:\n * \n * (code)\n * graph.setAllowDanglingEdges(false);\n * graph.setDisconnectOnMove(false);\n * (end)\n * \n * Setting the <cloneInvalidEdges> switch to true is optional. This switch\n * controls if edges are inserted after a copy, paste or clone-drag if they are\n * invalid. For example, edges are invalid if copied or control-dragged without \n * having selected the corresponding terminals and allowDanglingEdges is\n * false, in which case the edges will not be cloned if the switch is false.\n * \n * Output:\n * \n * To produce an XML representation for a diagram, the following code can be\n * used.\n * \n * (code)\n * var enc = new mxCodec(mxUtils.createXmlDocument());\n * var node = enc.encode(graph.getModel());\n * (end)\n * \n * This will produce an XML node than can be handled using the DOM API or\n * turned into a string representation using the following code:\n * \n * (code)\n * var xml = mxUtils.getXml(node);\n * (end)\n * \n * To obtain a formatted string, mxUtils.getPrettyXml can be used instead.\n * \n * This string can now be stored in a local persistent storage (for example\n * using Google Gears) or it can be passed to a backend using mxUtils.post as\n * follows. The url variable is the URL of the Java servlet, PHP page or HTTP\n * handler, depending on the server.\n * \n * (code)\n * var xmlString = encodeURIComponent(mxUtils.getXml(node));\n * mxUtils.post(url, 'xml='+xmlString, function(req)\n * {\n *   // Process server response using req of type mxXmlRequest\n * });\n * (end)\n * \n * Input:\n * \n * To load an XML representation of a diagram into an existing graph object\n * mxUtils.load can be used as follows. The url variable is the URL of the Java\n * servlet, PHP page or HTTP handler that produces the XML string.\n * \n * (code)\n * var xmlDoc = mxUtils.load(url).getXml();\n * var node = xmlDoc.documentElement;\n * var dec = new mxCodec(node.ownerDocument);\n * dec.decode(node, graph.getModel());\n * (end)\n * \n * For creating a page that loads the client and a diagram using a single\n * request please refer to the deployment examples in the backends.\n * \n * Functional dependencies:\n * \n * (see images/callgraph.png)\n * \n * Resources:\n *\n * resources/graph - Language resources for mxGraph\n *\n * Group: Events\n * \n * Event: mxEvent.ROOT\n * \n * Fires if the root in the model has changed. This event has no properties.\n * \n * Event: mxEvent.ALIGN_CELLS\n * \n * Fires between begin- and endUpdate in <alignCells>. The <code>cells</code>\n * and <code>align</code> properties contain the respective arguments that were\n * passed to <alignCells>.\n *\n * Event: mxEvent.FLIP_EDGE\n *\n * Fires between begin- and endUpdate in <flipEdge>. The <code>edge</code>\n * property contains the edge passed to <flipEdge>.\n * \n * Event: mxEvent.ORDER_CELLS\n * \n * Fires between begin- and endUpdate in <orderCells>. The <code>cells</code>\n * and <code>back</code> properties contain the respective arguments that were\n * passed to <orderCells>.\n *\n * Event: mxEvent.CELLS_ORDERED\n *\n * Fires between begin- and endUpdate in <cellsOrdered>. The <code>cells</code>\n * and <code>back</code> arguments contain the respective arguments that were\n * passed to <cellsOrdered>.\n * \n * Event: mxEvent.GROUP_CELLS\n * \n * Fires between begin- and endUpdate in <groupCells>. The <code>group</code>,\n * <code>cells</code> and <code>border</code> arguments contain the respective\n * arguments that were passed to <groupCells>.\n * \n * Event: mxEvent.UNGROUP_CELLS\n * \n * Fires between begin- and endUpdate in <ungroupCells>. The <code>cells</code>\n * property contains the array of cells that was passed to <ungroupCells>.\n * \n * Event: mxEvent.REMOVE_CELLS_FROM_PARENT\n * \n * Fires between begin- and endUpdate in <removeCellsFromParent>. The\n * <code>cells</code> property contains the array of cells that was passed to\n * <removeCellsFromParent>.\n * \n * Event: mxEvent.ADD_CELLS\n * \n * Fires between begin- and endUpdate in <addCells>. The <code>cells</code>,\n * <code>parent</code>, <code>index</code>, <code>source</code> and\n * <code>target</code> properties contain the respective arguments that were\n * passed to <addCells>.\n * \n * Event: mxEvent.CELLS_ADDED\n * \n * Fires between begin- and endUpdate in <cellsAdded>. The <code>cells</code>,\n * <code>parent</code>, <code>index</code>, <code>source</code>,\n * <code>target</code> and <code>absolute</code> properties contain the\n * respective arguments that were passed to <cellsAdded>.\n * \n * Event: mxEvent.REMOVE_CELLS\n * \n * Fires between begin- and endUpdate in <removeCells>. The <code>cells</code>\n * and <code>includeEdges</code> arguments contain the respective arguments\n * that were passed to <removeCells>.\n * \n * Event: mxEvent.CELLS_REMOVED\n * \n * Fires between begin- and endUpdate in <cellsRemoved>. The <code>cells</code>\n * argument contains the array of cells that was removed.\n * \n * Event: mxEvent.SPLIT_EDGE\n * \n * Fires between begin- and endUpdate in <splitEdge>. The <code>edge</code>\n * property contains the edge to be splitted, the <code>cells</code>,\n * <code>newEdge</code>, <code>dx</code> and <code>dy</code> properties contain\n * the respective arguments that were passed to <splitEdge>.\n * \n * Event: mxEvent.TOGGLE_CELLS\n * \n * Fires between begin- and endUpdate in <toggleCells>. The <code>show</code>,\n * <code>cells</code> and <code>includeEdges</code> properties contain the\n * respective arguments that were passed to <toggleCells>.\n * \n * Event: mxEvent.FOLD_CELLS\n * \n * Fires between begin- and endUpdate in <foldCells>. The\n * <code>collapse</code>, <code>cells</code> and <code>recurse</code>\n * properties contain the respective arguments that were passed to <foldCells>.\n * \n * Event: mxEvent.CELLS_FOLDED\n * \n * Fires between begin- and endUpdate in cellsFolded. The\n * <code>collapse</code>, <code>cells</code> and <code>recurse</code>\n * properties contain the respective arguments that were passed to\n * <cellsFolded>.\n * \n * Event: mxEvent.UPDATE_CELL_SIZE\n * \n * Fires between begin- and endUpdate in <updateCellSize>. The\n * <code>cell</code> and <code>ignoreChildren</code> properties contain the\n * respective arguments that were passed to <updateCellSize>.\n * \n * Event: mxEvent.RESIZE_CELLS\n * \n * Fires between begin- and endUpdate in <resizeCells>. The <code>cells</code>\n * and <code>bounds</code> properties contain the respective arguments that\n * were passed to <resizeCells>.\n * \n * Event: mxEvent.CELLS_RESIZED\n * \n * Fires between begin- and endUpdate in <cellsResized>. The <code>cells</code>\n * and <code>bounds</code> properties contain the respective arguments that\n * were passed to <cellsResized>.\n * \n * Event: mxEvent.MOVE_CELLS\n * \n * Fires between begin- and endUpdate in <moveCells>. The <code>cells</code>,\n * <code>dx</code>, <code>dy</code>, <code>clone</code>, <code>target</code>\n * and <code>event</code> properties contain the respective arguments that\n * were passed to <moveCells>.\n * \n * Event: mxEvent.CELLS_MOVED\n * \n * Fires between begin- and endUpdate in <cellsMoved>. The <code>cells</code>,\n * <code>dx</code>, <code>dy</code> and <code>disconnect</code> properties\n * contain the respective arguments that were passed to <cellsMoved>.\n * \n * Event: mxEvent.CONNECT_CELL\n * \n * Fires between begin- and endUpdate in <connectCell>. The <code>edge</code>,\n * <code>terminal</code> and <code>source</code> properties contain the\n * respective arguments that were passed to <connectCell>.\n * \n * Event: mxEvent.CELL_CONNECTED\n * \n * Fires between begin- and endUpdate in <cellConnected>. The\n * <code>edge</code>, <code>terminal</code> and <code>source</code> properties\n * contain the respective arguments that were passed to <cellConnected>.\n * \n * Event: mxEvent.REFRESH\n * \n * Fires after <refresh> was executed. This event has no properties.\n *\n * Event: mxEvent.CLICK\n * \n * Fires in <click> after a click event. The <code>event</code> property\n * contains the original mouse event and <code>cell</code> property contains\n * the cell under the mouse or null if the background was clicked.\n * \n * Event: mxEvent.DOUBLE_CLICK\n *\n * Fires in <dblClick> after a double click. The <code>event</code> property\n * contains the original mouse event and the <code>cell</code> property\n * contains the cell under the mouse or null if the background was clicked.\n * \n * Event: mxEvent.GESTURE\n *\n * Fires in <fireGestureEvent> after a touch gesture. The <code>event</code>\n * property contains the original gesture end event and the <code>cell</code>\n * property contains the optional cell associated with the gesture.\n *\n * Event: mxEvent.TAP_AND_HOLD\n *\n * Fires in <tapAndHold> if a tap and hold event was detected. The <code>event</code>\n * property contains the initial touch event and the <code>cell</code> property\n * contains the cell under the mouse or null if the background was clicked.\n *\n * Event: mxEvent.FIRE_MOUSE_EVENT\n *\n * Fires in <fireMouseEvent> before the mouse listeners are invoked. The\n * <code>eventName</code> property contains the event name and the\n * <code>event</code> property contains the <mxMouseEvent>.\n *\n * Event: mxEvent.SIZE\n *\n * Fires after <sizeDidChange> was executed. The <code>bounds</code> property\n * contains the new graph bounds.\n *\n * Event: mxEvent.START_EDITING\n *\n * Fires before the in-place editor starts in <startEditingAtCell>. The\n * <code>cell</code> property contains the cell that is being edited and the\n * <code>event</code> property contains the optional event argument that was\n * passed to <startEditingAtCell>.\n * \n * Event: mxEvent.EDITING_STARTED\n *\n * Fires after the in-place editor starts in <startEditingAtCell>. The\n * <code>cell</code> property contains the cell that is being edited and the\n * <code>event</code> property contains the optional event argument that was\n * passed to <startEditingAtCell>.\n * \n * Event: mxEvent.EDITING_STOPPED\n *\n * Fires after the in-place editor stops in <stopEditing>.\n *\n * Event: mxEvent.LABEL_CHANGED\n *\n * Fires between begin- and endUpdate in <cellLabelChanged>. The\n * <code>cell</code> property contains the cell, the <code>value</code>\n * property contains the new value for the cell, the <code>old</code> property\n * contains the old value and the optional <code>event</code> property contains\n * the mouse event that started the edit.\n * \n * Event: mxEvent.ADD_OVERLAY\n *\n * Fires after an overlay is added in <addCellOverlay>. The <code>cell</code>\n * property contains the cell and the <code>overlay</code> property contains\n * the <mxCellOverlay> that was added.\n *\n * Event: mxEvent.REMOVE_OVERLAY\n *\n * Fires after an overlay is removed in <removeCellOverlay> and\n * <removeCellOverlays>. The <code>cell</code> property contains the cell and\n * the <code>overlay</code> property contains the <mxCellOverlay> that was\n * removed.\n * \n * Constructor: mxGraph\n * \n * Constructs a new mxGraph in the specified container. Model is an optional\n * mxGraphModel. If no model is provided, a new mxGraphModel instance is \n * used as the model. The container must have a valid owner document prior \n * to calling this function in Internet Explorer. RenderHint is a string to\n * affect the display performance and rendering in IE, but not in SVG-based \n * browsers. The parameter is mapped to <dialect>, which may \n * be one of <mxConstants.DIALECT_SVG> for SVG-based browsers, \n * <mxConstants.DIALECT_STRICTHTML> for fastest display mode,\n * <mxConstants.DIALECT_PREFERHTML> for faster display mode,\n * <mxConstants.DIALECT_MIXEDHTML> for fast and <mxConstants.DIALECT_VML> \n * for exact display mode (slowest). The dialects are defined in mxConstants.\n * The default values are DIALECT_SVG for SVG-based browsers and\n * DIALECT_MIXED for IE.\n *\n * The possible values for the renderingHint parameter are explained below:\n * \n * fast - The parameter is based on the fact that the display performance is \n * highly improved in IE if the VML is not contained within a VML group \n * element. The lack of a group element only slightly affects the display while \n * panning, but improves the performance by almost a factor of 2, while keeping \n * the display sufficiently accurate. This also allows to render certain shapes as HTML \n * if the display accuracy is not affected, which is implemented by \n * <mxShape.isMixedModeHtml>. This is the default setting and is mapped to\n * DIALECT_MIXEDHTML.\n * faster - Same as fast, but more expensive shapes are avoided. This is \n * controlled by <mxShape.preferModeHtml>. The default implementation will \n * avoid gradients and rounded rectangles, but more significant shapes, such \n * as rhombus, ellipse, actor and cylinder will be rendered accurately. This \n * setting is mapped to DIALECT_PREFERHTML.\n * fastest - Almost anything will be rendered in Html. This allows for \n * rectangles, labels and images. This setting is mapped to\n * DIALECT_STRICTHTML.\n * exact - If accurate panning is required and if the diagram is small (up\n * to 100 cells), then this value should be used. In this mode, a group is \n * created that contains the VML. This allows for accurate panning and is \n * mapped to DIALECT_VML.\n *\n * Example:\n * \n * To create a graph inside a DOM node with an id of graph:\n * (code)\n * var container = document.getElementById('graph');\n * var graph = new mxGraph(container);\n * (end)\n * \n * Parameters:\n * \n * container - Optional DOM node that acts as a container for the graph.\n * If this is null then the container can be initialized later using\n * <init>.\n * model - Optional <mxGraphModel> that constitutes the graph data.\n * renderHint - Optional string that specifies the display accuracy and\n * performance. Default is mxConstants.DIALECT_MIXEDHTML (for IE).\n * stylesheet - Optional <mxStylesheet> to be used in the graph.\n */\nfunction mxGraph(container, model, renderHint, stylesheet)\n{\n\t// Initializes the variable in case the prototype has been\n\t// modified to hold some listeners (which is possible because\n\t// the createHandlers call is executed regardless of the\n\t// arguments passed into the ctor).\n\tthis.mouseListeners = null;\n\t\n\t// Converts the renderHint into a dialect\n\tthis.renderHint = renderHint;\n\n\tif (mxClient.IS_SVG)\n\t{\n\t\tthis.dialect = mxConstants.DIALECT_SVG;\n\t}\n\telse if (renderHint == mxConstants.RENDERING_HINT_EXACT && mxClient.IS_VML)\n\t{\n\t\tthis.dialect = mxConstants.DIALECT_VML;\n\t}\n\telse if (renderHint == mxConstants.RENDERING_HINT_FASTEST)\n\t{\n\t\tthis.dialect = mxConstants.DIALECT_STRICTHTML;\n\t}\n\telse if (renderHint == mxConstants.RENDERING_HINT_FASTER)\n\t{\n\t\tthis.dialect = mxConstants.DIALECT_PREFERHTML;\n\t}\n\telse // default for VML\n\t{\n\t\tthis.dialect = mxConstants.DIALECT_MIXEDHTML;\n\t}\n\t\n\t// Initializes the main members that do not require a container\n\tthis.model = (model != null) ? model : new mxGraphModel();\n\tthis.multiplicities = [];\n\tthis.imageBundles = [];\n\tthis.cellRenderer = this.createCellRenderer();\n\tthis.setSelectionModel(this.createSelectionModel());\n\tthis.setStylesheet((stylesheet != null) ? stylesheet : this.createStylesheet());\n\tthis.view = this.createGraphView();\n\t\n\t// Adds a graph model listener to update the view\n\tthis.graphModelChangeListener = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tthis.graphModelChanged(evt.getProperty('edit').changes);\n\t});\n\t\n\tthis.model.addListener(mxEvent.CHANGE, this.graphModelChangeListener);\n\n\t// Installs basic event handlers with disabled default settings.\n\tthis.createHandlers();\n\t\n\t// Initializes the display if a container was specified\n\tif (container != null)\n\t{\n\t\tthis.init(container);\n\t}\n\t\n\tthis.view.revalidate();\n};\n\n/**\n * Installs the required language resources at class\n * loading time.\n */\nif (mxLoadResources)\n{\n\tmxResources.add(mxClient.basePath + '/resources/graph');\n}\nelse\n{\n\tmxClient.defaultBundles.push(mxClient.basePath + '/resources/graph');\n}\n\n/**\n * Extends mxEventSource.\n */\nmxGraph.prototype = new mxEventSource();\nmxGraph.prototype.constructor = mxGraph;\n\n/**\n * Group: Variables\n */\n\n/**\n * Variable: mouseListeners\n * \n * Holds the mouse event listeners. See <fireMouseEvent>.\n */\nmxGraph.prototype.mouseListeners = null;\n\n/**\n * Variable: isMouseDown\n * \n * Holds the state of the mouse button.\n */\nmxGraph.prototype.isMouseDown = false;\n\n/**\n * Variable: model\n * \n * Holds the <mxGraphModel> that contains the cells to be displayed.\n */\nmxGraph.prototype.model = null;\n\n/**\n * Variable: view\n * \n * Holds the <mxGraphView> that caches the <mxCellStates> for the cells.\n */\nmxGraph.prototype.view = null;\n\n/**\n * Variable: stylesheet\n * \n * Holds the <mxStylesheet> that defines the appearance of the cells.\n * \n * \n * Example:\n * \n * Use the following code to read a stylesheet into an existing graph.\n * \n * (code)\n * var req = mxUtils.load('stylesheet.xml');\n * var root = req.getDocumentElement();\n * var dec = new mxCodec(root.ownerDocument);\n * dec.decode(root, graph.stylesheet);\n * (end)\n */\nmxGraph.prototype.stylesheet = null;\n\t\n/**\n * Variable: selectionModel\n * \n * Holds the <mxGraphSelectionModel> that models the current selection.\n */\nmxGraph.prototype.selectionModel = null;\n\n/**\n * Variable: cellEditor\n * \n * Holds the <mxCellEditor> that is used as the in-place editing.\n */\nmxGraph.prototype.cellEditor = null;\n\n/**\n * Variable: cellRenderer\n * \n * Holds the <mxCellRenderer> for rendering the cells in the graph.\n */\nmxGraph.prototype.cellRenderer = null;\n\n/**\n * Variable: multiplicities\n * \n * An array of <mxMultiplicities> describing the allowed\n * connections in a graph.\n */\nmxGraph.prototype.multiplicities = null;\n\n/**\n * Variable: renderHint\n * \n * RenderHint as it was passed to the constructor.\n */\nmxGraph.prototype.renderHint = null;\n\n/**\n * Variable: dialect\n * \n * Dialect to be used for drawing the graph. Possible values are all\n * constants in <mxConstants> with a DIALECT-prefix.\n */\nmxGraph.prototype.dialect = null;\n\n/**\n * Variable: gridSize\n * \n * Specifies the grid size. Default is 10.\n */\nmxGraph.prototype.gridSize = 10;\n\t\n/**\n * Variable: gridEnabled\n * \n * Specifies if the grid is enabled. This is used in <snap>. Default is\n * true.\n */\nmxGraph.prototype.gridEnabled = true;\n\n/**\n * Variable: portsEnabled\n * \n * Specifies if ports are enabled. This is used in <cellConnected> to update\n * the respective style. Default is true.\n */\nmxGraph.prototype.portsEnabled = true;\n\n/**\n * Variable: nativeDoubleClickEnabled\n * \n * Specifies if native double click events should be detected. Default is true.\n */\nmxGraph.prototype.nativeDblClickEnabled = true;\n\n/**\n * Variable: doubleTapEnabled\n * \n * Specifies if double taps on touch-based devices should be handled as a\n * double click. Default is true.\n */\nmxGraph.prototype.doubleTapEnabled = true;\n\n/**\n * Variable: doubleTapTimeout\n * \n * Specifies the timeout for double taps and non-native double clicks. Default\n * is 500 ms.\n */\nmxGraph.prototype.doubleTapTimeout = 500;\n\n/**\n * Variable: doubleTapTolerance\n * \n * Specifies the tolerance for double taps and double clicks in quirks mode.\n * Default is 25 pixels.\n */\nmxGraph.prototype.doubleTapTolerance = 25;\n\n/**\n * Variable: lastTouchX\n * \n * Holds the x-coordinate of the last touch event for double tap detection.\n */\nmxGraph.prototype.lastTouchY = 0;\n\n/**\n * Variable: lastTouchX\n * \n * Holds the y-coordinate of the last touch event for double tap detection.\n */\nmxGraph.prototype.lastTouchY = 0;\n\n/**\n * Variable: lastTouchTime\n * \n * Holds the time of the last touch event for double click detection.\n */\nmxGraph.prototype.lastTouchTime = 0;\n\n/**\n * Variable: tapAndHoldEnabled\n * \n * Specifies if tap and hold should be used for starting connections on touch-based\n * devices. Default is true.\n */\nmxGraph.prototype.tapAndHoldEnabled = true;\n\n/**\n * Variable: tapAndHoldDelay\n * \n * Specifies the time for a tap and hold. Default is 500 ms.\n */\nmxGraph.prototype.tapAndHoldDelay = 500;\n\n/**\n * Variable: tapAndHoldInProgress\n * \n * True if the timer for tap and hold events is running.\n */\nmxGraph.prototype.tapAndHoldInProgress = false;\n\n/**\n * Variable: tapAndHoldValid\n * \n * True as long as the timer is running and the touch events\n * stay within the given <tapAndHoldTolerance>.\n */\nmxGraph.prototype.tapAndHoldValid = false;\n\n/**\n * Variable: initialTouchX\n * \n * Holds the x-coordinate of the intial touch event for tap and hold.\n */\nmxGraph.prototype.initialTouchX = 0;\n\n/**\n * Variable: initialTouchY\n * \n * Holds the y-coordinate of the intial touch event for tap and hold.\n */\nmxGraph.prototype.initialTouchY = 0;\n\n/**\n * Variable: tolerance\n * \n * Tolerance for a move to be handled as a single click.\n * Default is 4 pixels.\n */\nmxGraph.prototype.tolerance = 4;\n\n/**\n * Variable: defaultOverlap\n * \n * Value returned by <getOverlap> if <isAllowOverlapParent> returns\n * true for the given cell. <getOverlap> is used in <constrainChild> if\n * <isConstrainChild> returns true. The value specifies the\n * portion of the child which is allowed to overlap the parent.\n */\nmxGraph.prototype.defaultOverlap = 0.5;\n\n/**\n * Variable: defaultParent\n * \n * Specifies the default parent to be used to insert new cells.\n * This is used in <getDefaultParent>. Default is null.\n */\nmxGraph.prototype.defaultParent = null;\n\n/**\n * Variable: alternateEdgeStyle\n * \n * Specifies the alternate edge style to be used if the main control point\n * on an edge is being doubleclicked. Default is null.\n */\nmxGraph.prototype.alternateEdgeStyle = null;\n\n/**\n * Variable: backgroundImage\n *\n * Specifies the <mxImage> to be returned by <getBackgroundImage>. Default\n * is null.\n * \n * Example:\n *\n * (code)\n * var img = new mxImage('http://www.example.com/maps/examplemap.jpg', 1024, 768);\n * graph.setBackgroundImage(img);\n * graph.view.validate();\n * (end)\n */\nmxGraph.prototype.backgroundImage = null;\n\n/**\n * Variable: pageVisible\n *\n * Specifies if the background page should be visible. Default is false.\n * Not yet implemented.\n */\nmxGraph.prototype.pageVisible = false;\n\n/**\n * Variable: pageBreaksVisible\n * \n * Specifies if a dashed line should be drawn between multiple pages. Default\n * is false. If you change this value while a graph is being displayed then you\n * should call <sizeDidChange> to force an update of the display.\n */\nmxGraph.prototype.pageBreaksVisible = false;\n\n/**\n * Variable: pageBreakColor\n * \n * Specifies the color for page breaks. Default is 'gray'.\n */\nmxGraph.prototype.pageBreakColor = 'gray';\n\n/**\n * Variable: pageBreakDashed\n * \n * Specifies the page breaks should be dashed. Default is true.\n */\nmxGraph.prototype.pageBreakDashed = true;\n\n/**\n * Variable: minPageBreakDist\n * \n * Specifies the minimum distance for page breaks to be visible. Default is\n * 20 (in pixels).\n */\nmxGraph.prototype.minPageBreakDist = 20;\n\n/**\n * Variable: preferPageSize\n * \n * Specifies if the graph size should be rounded to the next page number in\n * <sizeDidChange>. This is only used if the graph container has scrollbars.\n * Default is false.\n */\nmxGraph.prototype.preferPageSize = false;\n\n/**\n * Variable: pageFormat\n *\n * Specifies the page format for the background page. Default is\n * <mxConstants.PAGE_FORMAT_A4_PORTRAIT>. This is used as the default in\n * <mxPrintPreview> and for painting the background page if <pageVisible> is\n * true and the pagebreaks if <pageBreaksVisible> is true.\n */\nmxGraph.prototype.pageFormat = mxConstants.PAGE_FORMAT_A4_PORTRAIT;\n\n/**\n * Variable: pageScale\n *\n * Specifies the scale of the background page. Default is 1.5.\n * Not yet implemented.\n */\nmxGraph.prototype.pageScale = 1.5;\n\n/**\n * Variable: enabled\n * \n * Specifies the return value for <isEnabled>. Default is true.\n */\nmxGraph.prototype.enabled = true;\n\n/**\n * Variable: escapeEnabled\n * \n * Specifies if <mxKeyHandler> should invoke <escape> when the escape key\n * is pressed. Default is true.\n */\nmxGraph.prototype.escapeEnabled = true;\n\n/**\n * Variable: invokesStopCellEditing\n * \n * If true, when editing is to be stopped by way of selection changing,\n * data in diagram changing or other means stopCellEditing is invoked, and\n * changes are saved. This is implemented in a focus handler in\n * <mxCellEditor>. Default is true.\n */\nmxGraph.prototype.invokesStopCellEditing = true;\n\n/**\n * Variable: enterStopsCellEditing\n * \n * If true, pressing the enter key without pressing control or shift will stop\n * editing and accept the new value. This is used in <mxCellEditor> to stop\n * cell editing. Note: You can always use F2 and escape to stop editing.\n * Default is false.\n */\nmxGraph.prototype.enterStopsCellEditing = false;\n\n/**\n * Variable: useScrollbarsForPanning\n * \n * Specifies if scrollbars should be used for panning in <panGraph> if\n * any scrollbars are available. If scrollbars are enabled in CSS, but no\n * scrollbars appear because the graph is smaller than the container size,\n * then no panning occurs if this is true. Default is true.\n */\nmxGraph.prototype.useScrollbarsForPanning = true;\n\n/**\n * Variable: exportEnabled\n * \n * Specifies the return value for <canExportCell>. Default is true.\n */\nmxGraph.prototype.exportEnabled = true;\n\n/**\n * Variable: importEnabled\n * \n * Specifies the return value for <canImportCell>. Default is true.\n */\nmxGraph.prototype.importEnabled = true;\n\n/**\n * Variable: cellsLocked\n * \n * Specifies the return value for <isCellLocked>. Default is false.\n */\nmxGraph.prototype.cellsLocked = false;\n\n/**\n * Variable: cellsCloneable\n * \n * Specifies the return value for <isCellCloneable>. Default is true.\n */\nmxGraph.prototype.cellsCloneable = true;\n\n/**\n * Variable: foldingEnabled\n * \n * Specifies if folding (collapse and expand via an image icon in the graph\n * should be enabled). Default is true.\n */\nmxGraph.prototype.foldingEnabled = true;\n\n/**\n * Variable: cellsEditable\n * \n * Specifies the return value for <isCellEditable>. Default is true.\n */\nmxGraph.prototype.cellsEditable = true;\n\t\t\n/**\n * Variable: cellsDeletable\n * \n * Specifies the return value for <isCellDeletable>. Default is true.\n */\nmxGraph.prototype.cellsDeletable = true;\n\n/**\n * Variable: cellsMovable\n * \n * Specifies the return value for <isCellMovable>. Default is true.\n */\nmxGraph.prototype.cellsMovable = true;\n\t\n/**\n * Variable: edgeLabelsMovable\n * \n * Specifies the return value for edges in <isLabelMovable>. Default is true.\n */\nmxGraph.prototype.edgeLabelsMovable = true;\n\t\n/**\n * Variable: vertexLabelsMovable\n * \n * Specifies the return value for vertices in <isLabelMovable>. Default is false.\n */\nmxGraph.prototype.vertexLabelsMovable = false;\n\n/**\n * Variable: dropEnabled\n * \n * Specifies the return value for <isDropEnabled>. Default is false.\n */\nmxGraph.prototype.dropEnabled = false;\n\n/**\n * Variable: splitEnabled\n * \n * Specifies if dropping onto edges should be enabled. This is ignored if\n * <dropEnabled> is false. If enabled, it will call <splitEdge> to carry\n * out the drop operation. Default is true.\n */\nmxGraph.prototype.splitEnabled = true;\n\n/**\n * Variable: cellsResizable\n * \n * Specifies the return value for <isCellResizable>. Default is true.\n */\nmxGraph.prototype.cellsResizable = true;\n\n/**\n * Variable: cellsBendable\n * \n * Specifies the return value for <isCellsBendable>. Default is true.\n */\nmxGraph.prototype.cellsBendable = true;\n\n/**\n * Variable: cellsSelectable\n * \n * Specifies the return value for <isCellSelectable>. Default is true.\n */\nmxGraph.prototype.cellsSelectable = true;\n\n/**\n * Variable: cellsDisconnectable\n * \n * Specifies the return value for <isCellDisconntable>. Default is true.\n */\nmxGraph.prototype.cellsDisconnectable = true;\n\n/**\n * Variable: autoSizeCells\n * \n * Specifies if the graph should automatically update the cell size after an\n * edit. This is used in <isAutoSizeCell>. Default is false.\n */\nmxGraph.prototype.autoSizeCells = false;\n\n/**\n * Variable: autoSizeCellsOnAdd\n * \n * Specifies if autoSize style should be applied when cells are added. Default is false.\n */\nmxGraph.prototype.autoSizeCellsOnAdd = false;\n\n/**\n * Variable: autoScroll\n * \n * Specifies if the graph should automatically scroll if the mouse goes near\n * the container edge while dragging. This is only taken into account if the\n * container has scrollbars. Default is true.\n * \n * If you need this to work without scrollbars then set <ignoreScrollbars> to\n * true. Please consult the <ignoreScrollbars> for details. In general, with\n * no scrollbars, the use of <allowAutoPanning> is recommended.\n */\nmxGraph.prototype.autoScroll = true;\n\n/**\n * Variable: ignoreScrollbars\n * \n * Specifies if the graph should automatically scroll regardless of the\n * scrollbars. This will scroll the container using positive values for\n * scroll positions (ie usually only rightwards and downwards). To avoid\n * possible conflicts with panning, set <translateToScrollPosition> to true.\n */\nmxGraph.prototype.ignoreScrollbars = false;\n\n/**\n * Variable: translateToScrollPosition\n * \n * Specifies if the graph should automatically convert the current scroll\n * position to a translate in the graph view when a mouseUp event is received.\n * This can be used to avoid conflicts when using <autoScroll> and\n * <ignoreScrollbars> with no scrollbars in the container.\n */\nmxGraph.prototype.translateToScrollPosition = false;\n\n/**\n * Variable: timerAutoScroll\n * \n * Specifies if autoscrolling should be carried out via mxPanningManager even\n * if the container has scrollbars. This disables <scrollPointToVisible> and\n * uses <mxPanningManager> instead. If this is true then <autoExtend> is\n * disabled. It should only be used with a scroll buffer or when scollbars\n * are visible and scrollable in all directions. Default is false.\n */\nmxGraph.prototype.timerAutoScroll = false;\n\n/**\n * Variable: allowAutoPanning\n * \n * Specifies if panning via <panGraph> should be allowed to implement autoscroll\n * if no scrollbars are available in <scrollPointToVisible>. To enable panning\n * inside the container, near the edge, set <mxPanningManager.border> to a\n * positive value. Default is false.\n */\nmxGraph.prototype.allowAutoPanning = false;\n\n/**\n * Variable: autoExtend\n * \n * Specifies if the size of the graph should be automatically extended if the\n * mouse goes near the container edge while dragging. This is only taken into\n * account if the container has scrollbars. Default is true. See <autoScroll>.\n */\nmxGraph.prototype.autoExtend = true;\n\n/**\n * Variable: maximumGraphBounds\n * \n * <mxRectangle> that specifies the area in which all cells in the diagram\n * should be placed. Uses in <getMaximumGraphBounds>. Use a width or height of\n * 0 if you only want to give a upper, left corner.\n */\nmxGraph.prototype.maximumGraphBounds = null;\n\n/**\n * Variable: minimumGraphSize\n * \n * <mxRectangle> that specifies the minimum size of the graph. This is ignored\n * if the graph container has no scrollbars. Default is null.\n */\nmxGraph.prototype.minimumGraphSize = null;\n\n/**\n * Variable: minimumContainerSize\n * \n * <mxRectangle> that specifies the minimum size of the <container> if\n * <resizeContainer> is true.\n */\nmxGraph.prototype.minimumContainerSize = null;\n\t\t\n/**\n * Variable: maximumContainerSize\n * \n * <mxRectangle> that specifies the maximum size of the container if\n * <resizeContainer> is true.\n */\nmxGraph.prototype.maximumContainerSize = null;\n\n/**\n * Variable: resizeContainer\n * \n * Specifies if the container should be resized to the graph size when\n * the graph size has changed. Default is false.\n */\nmxGraph.prototype.resizeContainer = false;\n\n/**\n * Variable: border\n * \n * Border to be added to the bottom and right side when the container is\n * being resized after the graph has been changed. Default is 0.\n */\nmxGraph.prototype.border = 0;\n\t\t\n/**\n * Variable: keepEdgesInForeground\n * \n * Specifies if edges should appear in the foreground regardless of their order\n * in the model. If <keepEdgesInForeground> and <keepEdgesInBackground> are\n * both true then the normal order is applied. Default is false.\n */\nmxGraph.prototype.keepEdgesInForeground = false;\n\n/**\n * Variable: keepEdgesInBackground\n * \n * Specifies if edges should appear in the background regardless of their order\n * in the model. If <keepEdgesInForeground> and <keepEdgesInBackground> are\n * both true then the normal order is applied. Default is false.\n */\nmxGraph.prototype.keepEdgesInBackground = false;\n\n/**\n * Variable: allowNegativeCoordinates\n * \n * Specifies if negative coordinates for vertices are allowed. Default is true.\n */\nmxGraph.prototype.allowNegativeCoordinates = true;\n\n/**\n * Variable: constrainChildren\n * \n * Specifies if a child should be constrained inside the parent bounds after a\n * move or resize of the child. Default is true.\n */\nmxGraph.prototype.constrainChildren = true;\n\n/**\n * Variable: constrainRelativeChildren\n * \n * Specifies if child cells with relative geometries should be constrained\n * inside the parent bounds, if <constrainChildren> is true, and/or the\n * <maximumGraphBounds>. Default is false.\n */\nmxGraph.prototype.constrainRelativeChildren = false;\n\n/**\n * Variable: extendParents\n * \n * Specifies if a parent should contain the child bounds after a resize of\n * the child. Default is true. This has precedence over <constrainChildren>.\n */\nmxGraph.prototype.extendParents = true;\n\n/**\n * Variable: extendParentsOnAdd\n * \n * Specifies if parents should be extended according to the <extendParents>\n * switch if cells are added. Default is true.\n */\nmxGraph.prototype.extendParentsOnAdd = true;\n\n/**\n * Variable: extendParentsOnAdd\n * \n * Specifies if parents should be extended according to the <extendParents>\n * switch if cells are added. Default is false for backwards compatiblity.\n */\nmxGraph.prototype.extendParentsOnMove = false;\n\n/**\n * Variable: recursiveResize\n * \n * Specifies the return value for <isRecursiveResize>. Default is\n * false for backwards compatiblity.\n */\nmxGraph.prototype.recursiveResize = false;\n\n/**\n * Variable: collapseToPreferredSize\n * \n * Specifies if the cell size should be changed to the preferred size when\n * a cell is first collapsed. Default is true.\n */\nmxGraph.prototype.collapseToPreferredSize = true;\n\n/**\n * Variable: zoomFactor\n * \n * Specifies the factor used for <zoomIn> and <zoomOut>. Default is 1.2\n * (120%).\n */\nmxGraph.prototype.zoomFactor = 1.2;\n\n/**\n * Variable: keepSelectionVisibleOnZoom\n * \n * Specifies if the viewport should automatically contain the selection cells\n * after a zoom operation. Default is false.\n */\nmxGraph.prototype.keepSelectionVisibleOnZoom = false;\n\n/**\n * Variable: centerZoom\n * \n * Specifies if the zoom operations should go into the center of the actual\n * diagram rather than going from top, left. Default is true.\n */\nmxGraph.prototype.centerZoom = true;\n\n/**\n * Variable: resetViewOnRootChange\n * \n * Specifies if the scale and translate should be reset if the root changes in\n * the model. Default is true.\n */\nmxGraph.prototype.resetViewOnRootChange = true;\n\n/**\n * Variable: resetEdgesOnResize\n * \n * Specifies if edge control points should be reset after the resize of a\n * connected cell. Default is false.\n */\nmxGraph.prototype.resetEdgesOnResize = false;\n\n/**\n * Variable: resetEdgesOnMove\n * \n * Specifies if edge control points should be reset after the move of a\n * connected cell. Default is false.\n */\nmxGraph.prototype.resetEdgesOnMove = false;\n\n/**\n * Variable: resetEdgesOnConnect\n * \n * Specifies if edge control points should be reset after the the edge has been\n * reconnected. Default is true.\n */\nmxGraph.prototype.resetEdgesOnConnect = true;\n\n/**\n * Variable: allowLoops\n * \n * Specifies if loops (aka self-references) are allowed. Default is false.\n */\nmxGraph.prototype.allowLoops = false;\n\t\n/**\n * Variable: defaultLoopStyle\n * \n * <mxEdgeStyle> to be used for loops. This is a fallback for loops if the\n * <mxConstants.STYLE_LOOP> is undefined. Default is <mxEdgeStyle.Loop>.\n */\nmxGraph.prototype.defaultLoopStyle = mxEdgeStyle.Loop;\n\n/**\n * Variable: multigraph\n * \n * Specifies if multiple edges in the same direction between the same pair of\n * vertices are allowed. Default is true.\n */\nmxGraph.prototype.multigraph = true;\n\n/**\n * Variable: connectableEdges\n * \n * Specifies if edges are connectable. Default is false. This overrides the\n * connectable field in edges.\n */\nmxGraph.prototype.connectableEdges = false;\n\n/**\n * Variable: allowDanglingEdges\n * \n * Specifies if edges with disconnected terminals are allowed in the graph.\n * Default is true.\n */\nmxGraph.prototype.allowDanglingEdges = true;\n\n/**\n * Variable: cloneInvalidEdges\n * \n * Specifies if edges that are cloned should be validated and only inserted\n * if they are valid. Default is true.\n */\nmxGraph.prototype.cloneInvalidEdges = false;\n\n/**\n * Variable: disconnectOnMove\n * \n * Specifies if edges should be disconnected from their terminals when they\n * are moved. Default is true.\n */\nmxGraph.prototype.disconnectOnMove = true;\n\n/**\n * Variable: labelsVisible\n * \n * Specifies if labels should be visible. This is used in <getLabel>. Default\n * is true.\n */\nmxGraph.prototype.labelsVisible = true;\n\t\n/**\n * Variable: htmlLabels\n * \n * Specifies the return value for <isHtmlLabel>. Default is false.\n */\nmxGraph.prototype.htmlLabels = false;\n\n/**\n * Variable: swimlaneSelectionEnabled\n * \n * Specifies if swimlanes should be selectable via the content if the\n * mouse is released. Default is true.\n */\nmxGraph.prototype.swimlaneSelectionEnabled = true;\n\n/**\n * Variable: swimlaneNesting\n * \n * Specifies if nesting of swimlanes is allowed. Default is true.\n */\nmxGraph.prototype.swimlaneNesting = true;\n\t\n/**\n * Variable: swimlaneIndicatorColorAttribute\n * \n * The attribute used to find the color for the indicator if the indicator\n * color is set to 'swimlane'. Default is <mxConstants.STYLE_FILLCOLOR>.\n */\nmxGraph.prototype.swimlaneIndicatorColorAttribute = mxConstants.STYLE_FILLCOLOR;\n\n/**\n * Variable: imageBundles\n * \n * Holds the list of image bundles.\n */\nmxGraph.prototype.imageBundles = null;\n\n/**\n * Variable: minFitScale\n * \n * Specifies the minimum scale to be applied in <fit>. Default is 0.1. Set this\n * to null to allow any value.\n */\nmxGraph.prototype.minFitScale = 0.1;\n\n/**\n * Variable: maxFitScale\n * \n * Specifies the maximum scale to be applied in <fit>. Default is 8. Set this\n * to null to allow any value.\n */\nmxGraph.prototype.maxFitScale = 8;\n\n/**\n * Variable: panDx\n * \n * Current horizontal panning value. Default is 0.\n */\nmxGraph.prototype.panDx = 0;\n\n/**\n * Variable: panDy\n * \n * Current vertical panning value. Default is 0.\n */\nmxGraph.prototype.panDy = 0;\n\n/**\n * Variable: collapsedImage\n * \n * Specifies the <mxImage> to indicate a collapsed state.\n * Default value is mxClient.imageBasePath + '/collapsed.gif'\n */\nmxGraph.prototype.collapsedImage = new mxImage(mxClient.imageBasePath + '/collapsed.gif', 9, 9);\n\n/**\n * Variable: expandedImage\n * \n * Specifies the <mxImage> to indicate a expanded state.\n * Default value is mxClient.imageBasePath + '/expanded.gif'\n */\nmxGraph.prototype.expandedImage = new mxImage(mxClient.imageBasePath + '/expanded.gif', 9, 9);\n\n/**\n * Variable: warningImage\n * \n * Specifies the <mxImage> for the image to be used to display a warning\n * overlay. See <setCellWarning>. Default value is mxClient.imageBasePath +\n * '/warning'.  The extension for the image depends on the platform. It is\n * '.png' on the Mac and '.gif' on all other platforms.\n */\nmxGraph.prototype.warningImage = new mxImage(mxClient.imageBasePath + '/warning'+\n\t((mxClient.IS_MAC) ? '.png' : '.gif'), 16, 16);\n\n/**\n * Variable: alreadyConnectedResource\n * \n * Specifies the resource key for the error message to be displayed in\n * non-multigraphs when two vertices are already connected. If the resource\n * for this key does not exist then the value is used as the error message.\n * Default is 'alreadyConnected'.\n */\nmxGraph.prototype.alreadyConnectedResource = (mxClient.language != 'none') ? 'alreadyConnected' : '';\n\n/**\n * Variable: containsValidationErrorsResource\n * \n * Specifies the resource key for the warning message to be displayed when\n * a collapsed cell contains validation errors. If the resource for this\n * key does not exist then the value is used as the warning message.\n * Default is 'containsValidationErrors'.\n */\nmxGraph.prototype.containsValidationErrorsResource = (mxClient.language != 'none') ? 'containsValidationErrors' : '';\n\n/**\n * Variable: collapseExpandResource\n * \n * Specifies the resource key for the tooltip on the collapse/expand icon.\n * If the resource for this key does not exist then the value is used as\n * the tooltip. Default is 'collapse-expand'.\n */\nmxGraph.prototype.collapseExpandResource = (mxClient.language != 'none') ? 'collapse-expand' : '';\n\n/**\n * Function: init\n * \n * Initializes the <container> and creates the respective datastructures.\n * \n * Parameters:\n * \n * container - DOM node that will contain the graph display.\n */\nmxGraph.prototype.init = function(container)\n{\n\tthis.container = container;\n\t\n\t// Initializes the in-place editor\n\tthis.cellEditor = this.createCellEditor();\t\n\n\t// Initializes the container using the view\n\tthis.view.init();\n\t\n\t// Updates the size of the container for the current graph\n\tthis.sizeDidChange();\n\t\n\t// Hides tooltips and resets tooltip timer if mouse leaves container\n\tmxEvent.addListener(container, 'mouseleave', mxUtils.bind(this, function(evt)\n\t{\n\t\tif (this.tooltipHandler != null && this.tooltipHandler.div != null &&\n\t\t\tthis.tooltipHandler.div != evt.relatedTarget)\n\t\t{\n\t\t\tthis.tooltipHandler.hide();\n\t\t}\n\t}));\n\n\t// Automatic deallocation of memory\n\tif (mxClient.IS_IE)\n\t{\n\t\tmxEvent.addListener(window, 'unload', mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.destroy();\n\t\t}));\n\t\t\n\t\t// Disable shift-click for text\n\t\tmxEvent.addListener(container, 'selectstart',\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\treturn this.isEditing() || (!this.isMouseDown && !mxEvent.isShiftDown(evt));\n\t\t\t})\n\t\t);\n\t}\n\t\n\t// Workaround for missing last shape and connect preview in IE8 standards\n\t// mode if no initial graph displayed or no label for shape defined\n\tif (document.documentMode == 8)\n\t{\n\t\tcontainer.insertAdjacentHTML('beforeend', '<' + mxClient.VML_PREFIX + ':group' +\n\t\t\t' style=\"DISPLAY: none;\"></' + mxClient.VML_PREFIX + ':group>');\n\t}\n};\n\n/**\n * Function: createHandlers\n * \n * Creates the tooltip-, panning-, connection- and graph-handler (in this\n * order). This is called in the constructor before <init> is called.\n */\nmxGraph.prototype.createHandlers = function()\n{\n\tthis.tooltipHandler = this.createTooltipHandler();\n\tthis.tooltipHandler.setEnabled(false);\n\tthis.selectionCellsHandler = this.createSelectionCellsHandler();\n\tthis.connectionHandler = this.createConnectionHandler();\n\tthis.connectionHandler.setEnabled(false);\n\tthis.graphHandler = this.createGraphHandler();\n\tthis.panningHandler = this.createPanningHandler();\n\tthis.panningHandler.panningEnabled = false;\n\tthis.popupMenuHandler = this.createPopupMenuHandler();\n};\n\n/**\n * Function: createTooltipHandler\n * \n * Creates and returns a new <mxTooltipHandler> to be used in this graph.\n */\nmxGraph.prototype.createTooltipHandler = function()\n{\n\treturn new mxTooltipHandler(this);\n};\n\n/**\n * Function: createSelectionCellsHandler\n * \n * Creates and returns a new <mxTooltipHandler> to be used in this graph.\n */\nmxGraph.prototype.createSelectionCellsHandler = function()\n{\n\treturn new mxSelectionCellsHandler(this);\n};\n\n/**\n * Function: createConnectionHandler\n * \n * Creates and returns a new <mxConnectionHandler> to be used in this graph.\n */\nmxGraph.prototype.createConnectionHandler = function()\n{\n\treturn new mxConnectionHandler(this);\n};\n\n/**\n * Function: createGraphHandler\n * \n * Creates and returns a new <mxGraphHandler> to be used in this graph.\n */\nmxGraph.prototype.createGraphHandler = function()\n{\n\treturn new mxGraphHandler(this);\n};\n\n/**\n * Function: createPanningHandler\n * \n * Creates and returns a new <mxPanningHandler> to be used in this graph.\n */\nmxGraph.prototype.createPanningHandler = function()\n{\n\treturn new mxPanningHandler(this);\n};\n\n/**\n * Function: createPopupMenuHandler\n * \n * Creates and returns a new <mxPopupMenuHandler> to be used in this graph.\n */\nmxGraph.prototype.createPopupMenuHandler = function()\n{\n\treturn new mxPopupMenuHandler(this);\n};\n\n/**\n * Function: createSelectionModel\n * \n * Creates a new <mxGraphSelectionModel> to be used in this graph.\n */\nmxGraph.prototype.createSelectionModel = function()\n{\n\treturn new mxGraphSelectionModel(this);\n};\n\n/**\n * Function: createStylesheet\n * \n * Creates a new <mxGraphSelectionModel> to be used in this graph.\n */\nmxGraph.prototype.createStylesheet = function()\n{\n\treturn new mxStylesheet();\n};\n\n/**\n * Function: createGraphView\n * \n * Creates a new <mxGraphView> to be used in this graph.\n */\nmxGraph.prototype.createGraphView = function()\n{\n\treturn new mxGraphView(this);\n};\n \n/**\n * Function: createCellRenderer\n * \n * Creates a new <mxCellRenderer> to be used in this graph.\n */\nmxGraph.prototype.createCellRenderer = function()\n{\n\treturn new mxCellRenderer();\n};\n\n/**\n * Function: createCellEditor\n * \n * Creates a new <mxCellEditor> to be used in this graph.\n */\nmxGraph.prototype.createCellEditor = function()\n{\n\treturn new mxCellEditor(this);\n};\n\n/**\n * Function: getModel\n * \n * Returns the <mxGraphModel> that contains the cells.\n */\nmxGraph.prototype.getModel = function()\n{\n\treturn this.model;\n};\n\n/**\n * Function: getView\n * \n * Returns the <mxGraphView> that contains the <mxCellStates>.\n */\nmxGraph.prototype.getView = function()\n{\n\treturn this.view;\n};\n\n/**\n * Function: getStylesheet\n * \n * Returns the <mxStylesheet> that defines the style.\n */\nmxGraph.prototype.getStylesheet = function()\n{\n\treturn this.stylesheet;\n};\n\n/**\n * Function: setStylesheet\n * \n * Sets the <mxStylesheet> that defines the style.\n */\nmxGraph.prototype.setStylesheet = function(stylesheet)\n{\n\tthis.stylesheet = stylesheet;\n};\n\n/**\n * Function: getSelectionModel\n * \n * Returns the <mxGraphSelectionModel> that contains the selection.\n */\nmxGraph.prototype.getSelectionModel = function()\n{\n\treturn this.selectionModel;\n};\n\n/**\n * Function: setSelectionModel\n * \n * Sets the <mxSelectionModel> that contains the selection.\n */\nmxGraph.prototype.setSelectionModel = function(selectionModel)\n{\n\tthis.selectionModel = selectionModel;\n};\n\n/**\n * Function: getSelectionCellsForChanges\n * \n * Returns the cells to be selected for the given array of changes.\n * \n * Parameters:\n * \n * ignoreFn - Optional function that takes a change and returns true if the\n * change should be ignored.\n * \n */\nmxGraph.prototype.getSelectionCellsForChanges = function(changes, ignoreFn)\n{\n\tvar dict = new mxDictionary();\n\tvar cells = [];\n\t\n\tvar addCell = mxUtils.bind(this, function(cell)\n\t{\n\t\tif (!dict.get(cell) && this.model.contains(cell))\n\t\t{\n\t\t\tif (this.model.isEdge(cell) || this.model.isVertex(cell))\n\t\t\t{\n\t\t\t\tdict.put(cell, true);\n\t\t\t\tcells.push(cell);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar childCount = this.model.getChildCount(cell);\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t\t{\n\t\t\t\t\taddCell(this.model.getChildAt(cell, i));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfor (var i = 0; i < changes.length; i++)\n\t{\n\t\tvar change = changes[i];\n\t\t\n\t\tif (change.constructor != mxRootChange &&\n\t\t\t(ignoreFn == null || !ignoreFn(change)))\n\t\t{\n\t\t\tvar cell = null;\n\n\t\t\tif (change instanceof mxChildChange)\n\t\t\t{\n\t\t\t\tcell = change.child;\n\t\t\t}\n\t\t\telse if (change.cell != null &&\n\t\t\t\tchange.cell instanceof mxCell)\n\t\t\t{\n\t\t\t\tcell = change.cell;\n\t\t\t}\n\t\t\t\n\t\t\tif (cell != null)\n\t\t\t{\n\t\t\t\taddCell(cell);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn cells;\n};\n\n/**\n * Function: graphModelChanged\n * \n * Called when the graph model changes. Invokes <processChange> on each\n * item of the given array to update the view accordingly.\n * \n * Parameters:\n * \n * changes - Array that contains the individual changes.\n */\nmxGraph.prototype.graphModelChanged = function(changes)\n{\n\tfor (var i = 0; i < changes.length; i++)\n\t{\n\t\tthis.processChange(changes[i]);\n\t}\n\n\tthis.updateSelection();\n\tthis.view.validate();\n\tthis.sizeDidChange();\n};\n\n/**\n * Function: updateSelection\n * \n * Removes selection cells that are not in the model from the selection.\n */\nmxGraph.prototype.updateSelection = function()\n{\n\tvar cells = this.getSelectionCells();\n\tvar removed = [];\n\t\n\tfor (var i = 0; i < cells.length; i++)\n\t{\n\t\tif (!this.model.contains(cells[i]) || !this.isCellVisible(cells[i]))\n\t\t{\n\t\t\tremoved.push(cells[i]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar par = this.model.getParent(cells[i]);\n\t\t\t\n\t\t\twhile (par != null && par != this.view.currentRoot)\n\t\t\t{\n\t\t\t\tif (this.isCellCollapsed(par) || !this.isCellVisible(par))\n\t\t\t\t{\n\t\t\t\t\tremoved.push(cells[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpar = this.model.getParent(par);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tthis.removeSelectionCells(removed);\n};\n\n/**\n * Function: processChange\n * \n * Processes the given change and invalidates the respective cached data\n * in <view>. This fires a <root> event if the root has changed in the\n * model.\n * \n * Parameters:\n * \n * change - Object that represents the change on the model.\n */\nmxGraph.prototype.processChange = function(change)\n{\n\t// Resets the view settings, removes all cells and clears\n\t// the selection if the root changes.\n\tif (change instanceof mxRootChange)\n\t{\n\t\tthis.clearSelection();\n\t\tthis.setDefaultParent(null);\n\t\tthis.removeStateForCell(change.previous);\n\t\t\n\t\tif (this.resetViewOnRootChange)\n\t\t{\n\t\t\tthis.view.scale = 1;\n\t\t\tthis.view.translate.x = 0;\n\t\t\tthis.view.translate.y = 0;\n\t\t}\n\n\t\tthis.fireEvent(new mxEventObject(mxEvent.ROOT));\n\t}\n\t\n\t// Adds or removes a child to the view by online invaliding\n\t// the minimal required portions of the cache, namely, the\n\t// old and new parent and the child.\n\telse if (change instanceof mxChildChange)\n\t{\n\t\tvar newParent = this.model.getParent(change.child);\n\t\tthis.view.invalidate(change.child, true, true);\n\t\t\n\t\tif (!this.model.contains(newParent) || this.isCellCollapsed(newParent))\n\t\t{\n\t\t\tthis.view.invalidate(change.child, true, true);\n\t\t\tthis.removeStateForCell(change.child);\n\t\t\t\n\t\t\t// Handles special case of current root of view being removed\n\t\t\tif (this.view.currentRoot == change.child)\n\t\t\t{\n\t\t\t\tthis.home();\n\t\t\t}\n\t\t}\n \n\t\tif (newParent != change.previous)\n\t\t{\n\t\t\t// Refreshes the collapse/expand icons on the parents\n\t\t\tif (newParent != null)\n\t\t\t{\n\t\t\t\tthis.view.invalidate(newParent, false, false);\n\t\t\t}\n\t\t\t\n\t\t\tif (change.previous != null)\n\t\t\t{\n\t\t\t\tthis.view.invalidate(change.previous, false, false);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Handles two special cases where the shape does not need to be\n\t// recreated from scratch, it only needs to be invalidated.\n\telse if (change instanceof mxTerminalChange || change instanceof mxGeometryChange)\n\t{\n\t\t// Checks if the geometry has changed to avoid unnessecary revalidation\n\t\tif (change instanceof mxTerminalChange || ((change.previous == null && change.geometry != null) ||\n\t\t\t(change.previous != null && !change.previous.equals(change.geometry))))\n\t\t{\n\t\t\tthis.view.invalidate(change.cell);\n\t\t}\n\t}\n\n\t// Handles two special cases where only the shape, but no\n\t// descendants need to be recreated\n\telse if (change instanceof mxValueChange)\n\t{\n\t\tthis.view.invalidate(change.cell, false, false);\n\t}\n\t\n\t// Requires a new mxShape in JavaScript\n\telse if (change instanceof mxStyleChange)\n\t{\n\t\tthis.view.invalidate(change.cell, true, true);\n\t\tvar state = this.view.getState(change.cell);\n\t\t\n\t\tif (state != null)\n\t\t{\n\t\t\tstate.invalidStyle = true;\n\t\t}\n\t}\n\t\n\t// Removes the state from the cache by default\n\telse if (change.cell != null && change.cell instanceof mxCell)\n\t{\n\t\tthis.removeStateForCell(change.cell);\n\t}\n};\n\n/**\n * Function: removeStateForCell\n * \n * Removes all cached information for the given cell and its descendants.\n * This is called when a cell was removed from the model.\n * \n * Paramters:\n * \n * cell - <mxCell> that was removed from the model.\n */\nmxGraph.prototype.removeStateForCell = function(cell)\n{\n\tvar childCount = this.model.getChildCount(cell);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tthis.removeStateForCell(this.model.getChildAt(cell, i));\n\t}\n\n\tthis.view.invalidate(cell, false, true);\n\tthis.view.removeState(cell);\n};\n\n/**\n * Group: Overlays\n */\n\n/**\n * Function: addCellOverlay\n * \n * Adds an <mxCellOverlay> for the specified cell. This method fires an\n * <addoverlay> event and returns the new <mxCellOverlay>.\n * \n * Parameters:\n * \n * cell - <mxCell> to add the overlay for.\n * overlay - <mxCellOverlay> to be added for the cell.\n */\nmxGraph.prototype.addCellOverlay = function(cell, overlay)\n{\n\tif (cell.overlays == null)\n\t{\n\t\tcell.overlays = [];\n\t}\n\t\n\tcell.overlays.push(overlay);\n\n\tvar state = this.view.getState(cell);\n\n\t// Immediately updates the cell display if the state exists\n\tif (state != null)\n\t{\n\t\tthis.cellRenderer.redraw(state);\n\t}\n\t\n\tthis.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,\n\t\t\t'cell', cell, 'overlay', overlay));\n\t\n\treturn overlay;\n};\n\n/**\n * Function: getCellOverlays\n * \n * Returns the array of <mxCellOverlays> for the given cell or null, if\n * no overlays are defined.\n * \n * Parameters:\n * \n * cell - <mxCell> whose overlays should be returned.\n */\nmxGraph.prototype.getCellOverlays = function(cell)\n{\n\treturn cell.overlays;\n};\n\n/**\n * Function: removeCellOverlay\n * \n * Removes and returns the given <mxCellOverlay> from the given cell. This\n * method fires a <removeoverlay> event. If no overlay is given, then all\n * overlays are removed using <removeOverlays>.\n * \n * Parameters:\n * \n * cell - <mxCell> whose overlay should be removed.\n * overlay - Optional <mxCellOverlay> to be removed.\n */\nmxGraph.prototype.removeCellOverlay = function(cell, overlay)\n{\n\tif (overlay == null)\n\t{\n\t\tthis.removeCellOverlays(cell);\n\t}\n\telse\n\t{\n\t\tvar index = mxUtils.indexOf(cell.overlays, overlay);\n\t\t\n\t\tif (index >= 0)\n\t\t{\n\t\t\tcell.overlays.splice(index, 1);\n\t\t\t\n\t\t\tif (cell.overlays.length == 0)\n\t\t\t{\n\t\t\t\tcell.overlays = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Immediately updates the cell display if the state exists\n\t\t\tvar state = this.view.getState(cell);\n\t\t\t\n\t\t\tif (state != null)\n\t\t\t{\n\t\t\t\tthis.cellRenderer.redraw(state);\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,\n\t\t\t\t\t'cell', cell, 'overlay', overlay));\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\toverlay = null;\n\t\t}\n\t}\n\t\n\treturn overlay;\n};\n\n/**\n * Function: removeCellOverlays\n * \n * Removes all <mxCellOverlays> from the given cell. This method\n * fires a <removeoverlay> event for each <mxCellOverlay> and returns\n * the array of <mxCellOverlays> that was removed from the cell.\n * \n * Parameters:\n * \n * cell - <mxCell> whose overlays should be removed\n */\nmxGraph.prototype.removeCellOverlays = function(cell)\n{\n\tvar overlays = cell.overlays;\n\t\n\tif (overlays != null)\n\t{\n\t\tcell.overlays = null;\n\t\t\n\t\t// Immediately updates the cell display if the state exists\n\t\tvar state = this.view.getState(cell);\n\t\t\n\t\tif (state != null)\n\t\t{\n\t\t\tthis.cellRenderer.redraw(state);\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < overlays.length; i++)\n\t\t{\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,\n\t\t\t\t\t'cell', cell, 'overlay', overlays[i]));\n\t\t}\n\t}\n\t\n\treturn overlays;\n};\n\n/**\n * Function: clearCellOverlays\n * \n * Removes all <mxCellOverlays> in the graph for the given cell and all its\n * descendants. If no cell is specified then all overlays are removed from\n * the graph. This implementation uses <removeCellOverlays> to remove the\n * overlays from the individual cells.\n * \n * Parameters:\n * \n * cell - Optional <mxCell> that represents the root of the subtree to\n * remove the overlays from. Default is the root in the model.\n */\nmxGraph.prototype.clearCellOverlays = function(cell)\n{\n\tcell = (cell != null) ? cell : this.model.getRoot();\n\tthis.removeCellOverlays(cell);\n\t\n\t// Recursively removes all overlays from the children\n\tvar childCount = this.model.getChildCount(cell);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = this.model.getChildAt(cell, i);\n\t\tthis.clearCellOverlays(child); // recurse\n\t}\n};\n\n/**\n * Function: setCellWarning\n * \n * Creates an overlay for the given cell using the warning and image or\n * <warningImage> and returns the new <mxCellOverlay>. The warning is\n * displayed as a tooltip in a red font and may contain HTML markup. If\n * the warning is null or a zero length string, then all overlays are\n * removed from the cell.\n * \n * Example:\n * \n * (code)\n * graph.setCellWarning(cell, '<b>Warning:</b>: Hello, World!');\n * (end)\n * \n * Parameters:\n * \n * cell - <mxCell> whose warning should be set.\n * warning - String that represents the warning to be displayed.\n * img - Optional <mxImage> to be used for the overlay. Default is\n * <warningImage>.\n * isSelect - Optional boolean indicating if a click on the overlay\n * should select the corresponding cell. Default is false.\n */\nmxGraph.prototype.setCellWarning = function(cell, warning, img, isSelect)\n{\n\tif (warning != null && warning.length > 0)\n\t{\n\t\timg = (img != null) ? img : this.warningImage;\n\t\t\n\t\t// Creates the overlay with the image and warning\n\t\tvar overlay = new mxCellOverlay(img,\n\t\t\t'<font color=red>'+warning+'</font>');\n\t\t\n\t\t// Adds a handler for single mouseclicks to select the cell\n\t\tif (isSelect)\n\t\t{\n\t\t\toverlay.addListener(mxEvent.CLICK,\n\t\t\t\tmxUtils.bind(this, function(sender, evt)\n\t\t\t\t{\n\t\t\t\t\tif (this.isEnabled())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setSelectionCell(cell);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\t\n\t\t// Sets and returns the overlay in the graph\n\t\treturn this.addCellOverlay(cell, overlay);\n\t}\n\telse\n\t{\n\t\tthis.removeCellOverlays(cell);\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Group: In-place editing\n */\n\n/**\n * Function: startEditing\n * \n * Calls <startEditingAtCell> using the given cell or the first selection\n * cell.\n * \n * Parameters:\n * \n * evt - Optional mouse event that triggered the editing.\n */\nmxGraph.prototype.startEditing = function(evt)\n{\n\tthis.startEditingAtCell(null, evt);\n};\n\n/**\n * Function: startEditingAtCell\n * \n * Fires a <startEditing> event and invokes <mxCellEditor.startEditing>\n * on <editor>. After editing was started, a <editingStarted> event is\n * fired.\n * \n * Parameters:\n * \n * cell - <mxCell> to start the in-place editor for.\n * evt - Optional mouse event that triggered the editing.\n */\nmxGraph.prototype.startEditingAtCell = function(cell, evt)\n{\n\tif (evt == null || !mxEvent.isMultiTouchEvent(evt))\n\t{\n\t\tif (cell == null)\n\t\t{\n\t\t\tcell = this.getSelectionCell();\n\t\t\t\n\t\t\tif (cell != null && !this.isCellEditable(cell))\n\t\t\t{\n\t\t\t\tcell = null;\n\t\t\t}\n\t\t}\n\t\n\t\tif (cell != null)\n\t\t{\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.START_EDITING,\n\t\t\t\t\t'cell', cell, 'event', evt));\n\t\t\tthis.cellEditor.startEditing(cell, evt);\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,\n\t\t\t\t\t'cell', cell, 'event', evt));\n\t\t}\n\t}\n};\n\n/**\n * Function: getEditingValue\n * \n * Returns the initial value for in-place editing. This implementation\n * returns <convertValueToString> for the given cell. If this function is\n * overridden, then <mxGraphModel.valueForCellChanged> should take care\n * of correctly storing the actual new value inside the user object.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the initial editing value should be returned.\n * evt - Optional mouse event that triggered the editor.\n */\nmxGraph.prototype.getEditingValue = function(cell, evt)\n{\n\treturn this.convertValueToString(cell);\n};\n\n/**\n * Function: stopEditing\n * \n * Stops the current editing  and fires a <editingStopped> event.\n * \n * Parameters:\n * \n * cancel - Boolean that specifies if the current editing value\n * should be stored.\n */\nmxGraph.prototype.stopEditing = function(cancel)\n{\n\tthis.cellEditor.stopEditing(cancel);\n\tthis.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED, 'cancel', cancel));\n};\n\n/**\n * Function: labelChanged\n * \n * Sets the label of the specified cell to the given value using\n * <cellLabelChanged> and fires <mxEvent.LABEL_CHANGED> while the\n * transaction is in progress. Returns the cell whose label was changed.\n * \n * Parameters:\n * \n * cell - <mxCell> whose label should be changed.\n * value - New label to be assigned.\n * evt - Optional event that triggered the change.\n */\nmxGraph.prototype.labelChanged = function(cell, value, evt)\n{\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tvar old = cell.value;\n\t\tthis.cellLabelChanged(cell, value, this.isAutoSizeCell(cell));\n\t\tthis.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,\n\t\t\t'cell', cell, 'value', value, 'old', old, 'event', evt));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\t\n\treturn cell;\n};\n\n/**\n * Function: cellLabelChanged\n * \n * Sets the new label for a cell. If autoSize is true then\n * <cellSizeUpdated> will be called.\n * \n * In the following example, the function is extended to map changes to\n * attributes in an XML node, as shown in <convertValueToString>.\n * Alternatively, the handling of this can be implemented as shown in\n * <mxGraphModel.valueForCellChanged> without the need to clone the\n * user object.\n * \n * (code)\n * var graphCellLabelChanged = graph.cellLabelChanged;\n * graph.cellLabelChanged = function(cell, newValue, autoSize)\n * {\n * \t// Cloned for correct undo/redo\n * \tvar elt = cell.value.cloneNode(true);\n *  elt.setAttribute('label', newValue);\n *  \n *  newValue = elt;\n *  graphCellLabelChanged.apply(this, arguments);\n * };\n * (end) \n * \n * Parameters:\n * \n * cell - <mxCell> whose label should be changed.\n * value - New label to be assigned.\n * autoSize - Boolean that specifies if <cellSizeUpdated> should be called.\n */\nmxGraph.prototype.cellLabelChanged = function(cell, value, autoSize)\n{\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tthis.model.setValue(cell, value);\n\t\t\n\t\tif (autoSize)\n\t\t{\n\t\t\tthis.cellSizeUpdated(cell, false);\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n};\n\n/**\n * Group: Event processing\n */\n\n/**\n * Function: escape\n * \n * Processes an escape keystroke.\n * \n * Parameters:\n * \n * evt - Mouseevent that represents the keystroke.\n */\nmxGraph.prototype.escape = function(evt)\n{\n\tthis.fireEvent(new mxEventObject(mxEvent.ESCAPE, 'event', evt));\n};\n\n/**\n * Function: click\n * \n * Processes a singleclick on an optional cell and fires a <click> event.\n * The click event is fired initially. If the graph is enabled and the\n * event has not been consumed, then the cell is selected using\n * <selectCellForEvent> or the selection is cleared using\n * <clearSelection>. The events consumed state is set to true if the\n * corresponding <mxMouseEvent> has been consumed.\n *\n * To handle a click event, use the following code.\n * \n * (code)\n * graph.addListener(mxEvent.CLICK, function(sender, evt)\n * {\n *   var e = evt.getProperty('event'); // mouse event\n *   var cell = evt.getProperty('cell'); // cell may be null\n *   \n *   if (cell != null)\n *   {\n *     // Do something useful with cell and consume the event\n *     evt.consume();\n *   }\n * });\n * (end)\n * \n * Parameters:\n * \n * me - <mxMouseEvent> that represents the single click.\n */\nmxGraph.prototype.click = function(me)\n{\n\tvar evt = me.getEvent();\n\tvar cell = me.getCell();\n\tvar mxe = new mxEventObject(mxEvent.CLICK, 'event', evt, 'cell', cell);\n\t\n\tif (me.isConsumed())\n\t{\n\t\tmxe.consume();\n\t}\n\t\n\tthis.fireEvent(mxe);\n\t\n\tif (this.isEnabled() && !mxEvent.isConsumed(evt) && !mxe.isConsumed())\n\t{\n\t\tif (cell != null)\n\t\t{\n\t\t\tif (this.isTransparentClickEvent(evt))\n\t\t\t{\n\t\t\t\tvar active = false;\n\t\t\t\t\n\t\t\t\tvar tmp = this.getCellAt(me.graphX, me.graphY, null, null, null,\n\t\t\t\t\tmxUtils.bind(this, function(state)\n\t\t\t\t{\n\t\t\t\t\tvar selected = this.isCellSelected(state.cell);\n\t\t\t\t\tactive = active || selected;\n\t\t\t\t\t\n\t\t\t\t\treturn !active || selected || (state.cell != cell &&\n\t\t\t\t\t\tthis.model.isAncestor(state.cell, cell));\n\t\t\t\t}));\n\t\t\t\t\n\t\t\t\tif (tmp != null)\n\t\t\t\t{\n\t\t\t\t\tcell = tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.isSwimlaneSelectionEnabled())\n\t\t{\n\t\t\tcell = this.getSwimlaneAt(me.getGraphX(), me.getGraphY());\n\t\t\t\t\n\t\t\tif (cell != null && (!this.isToggleEvent(evt) ||\n\t\t\t\t!mxEvent.isAltDown(evt)))\n\t\t\t{\n\t\t\t\tvar temp = cell;\n\t\t\t\tvar swimlanes = [];\n\t\t\t\t\n\t\t\t\twhile (temp != null)\n\t\t\t\t{\n\t\t\t\t\ttemp = this.model.getParent(temp);\n\t\t\t\t\tvar state = this.view.getState(temp);\n\t\t\t\t\t\n\t\t\t\t\tif (this.isSwimlane(temp) && state != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tswimlanes.push(temp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Selects ancestors for selected swimlanes\n\t\t\t\tif (swimlanes.length > 0)\n\t\t\t\t{\n\t\t\t\t\tswimlanes = swimlanes.reverse();\n\t\t\t\t\tswimlanes.splice(0, 0, cell);\n\t\t\t\t\tswimlanes.push(cell);\n\t\t\t\t\t\n\t\t\t\t\tfor (var i = 0; i < swimlanes.length - 1; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.isCellSelected(swimlanes[i]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcell = swimlanes[(this.isToggleEvent(evt)) ?\n\t\t\t\t\t\t\t\ti : i + 1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\t\n\t\tif (cell != null)\n\t\t{\n\t\t\tthis.selectCellForEvent(cell, evt);\n\t\t}\n\t\telse if (!this.isToggleEvent(evt))\n\t\t{\n\t\t\tthis.clearSelection();\n\t\t}\n\t}\n};\n\n/**\n * Function: isSiblingSelected\n * \n * Returns true if any sibling of the given cell is selected.\n */\nmxGraph.prototype.isSiblingSelected = function(cell)\n{\n\tvar model = this.model;\n\tvar parent = model.getParent(cell);\n\tvar childCount = model.getChildCount(parent);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = model.getChildAt(parent, i);\n\t\t\n\t\tif (cell != child && this.isCellSelected(child))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\treturn false;\n};\n\n\n/**\n * Function: dblClick\n * \n * Processes a doubleclick on an optional cell and fires a <dblclick>\n * event. The event is fired initially. If the graph is enabled and the\n * event has not been consumed, then <edit> is called with the given\n * cell. The event is ignored if no cell was specified.\n *\n * Example for overriding this method.\n *\n * (code)\n * graph.dblClick = function(evt, cell)\n * {\n *   var mxe = new mxEventObject(mxEvent.DOUBLE_CLICK, 'event', evt, 'cell', cell);\n *   this.fireEvent(mxe);\n *   \n *   if (this.isEnabled() && !mxEvent.isConsumed(evt) && !mxe.isConsumed())\n *   {\n * \t   mxUtils.alert('Hello, World!');\n *     mxe.consume();\n *   }\n * }\n * (end)\n * \n * Example listener for this event.\n * \n * (code)\n * graph.addListener(mxEvent.DOUBLE_CLICK, function(sender, evt)\n * {\n *   var cell = evt.getProperty('cell');\n *   // do something with the cell and consume the\n *   // event to prevent in-place editing from start\n * });\n * (end) \n * \n * Parameters:\n * \n * evt - Mouseevent that represents the doubleclick.\n * cell - Optional <mxCell> under the mousepointer.\n */\nmxGraph.prototype.dblClick = function(evt, cell)\n{\n\tvar mxe = new mxEventObject(mxEvent.DOUBLE_CLICK, 'event', evt, 'cell', cell);\n\tthis.fireEvent(mxe);\n\t\n\t// Handles the event if it has not been consumed\n\tif (this.isEnabled() && !mxEvent.isConsumed(evt) && !mxe.isConsumed() &&\n\t\tcell != null && this.isCellEditable(cell) && !this.isEditing(cell))\n\t{\n\t\tthis.startEditingAtCell(cell, evt);\n\t\tmxEvent.consume(evt);\n\t}\n};\n\n/**\n * Function: tapAndHold\n * \n * Handles the <mxMouseEvent> by highlighting the <mxCellState>.\n * \n * Parameters:\n * \n * me - <mxMouseEvent> that represents the touch event.\n * state - Optional <mxCellState> that is associated with the event.\n */\nmxGraph.prototype.tapAndHold = function(me)\n{\n\tvar evt = me.getEvent();\n\tvar mxe = new mxEventObject(mxEvent.TAP_AND_HOLD, 'event', evt, 'cell', me.getCell());\n\n\t// LATER: Check if event should be consumed if me is consumed\n\tthis.fireEvent(mxe);\n\n\tif (mxe.isConsumed())\n\t{\n\t\t// Resets the state of the panning handler\n\t\tthis.panningHandler.panningTrigger = false;\n\t}\n\t\n\t// Handles the event if it has not been consumed\n\tif (this.isEnabled() && !mxEvent.isConsumed(evt) && !mxe.isConsumed() && this.connectionHandler.isEnabled())\n\t{\n\t\tvar state = this.view.getState(this.connectionHandler.marker.getCell(me));\n\n\t\tif (state != null)\n\t\t{\n\t\t\tthis.connectionHandler.marker.currentColor = this.connectionHandler.marker.validColor;\n\t\t\tthis.connectionHandler.marker.markedState = state;\n\t\t\tthis.connectionHandler.marker.mark();\n\t\t\t\n\t\t\tthis.connectionHandler.first = new mxPoint(me.getGraphX(), me.getGraphY());\n\t\t\tthis.connectionHandler.edgeState = this.connectionHandler.createEdgeState(me);\n\t\t\tthis.connectionHandler.previous = state;\n\t\t\tthis.connectionHandler.fireEvent(new mxEventObject(mxEvent.START, 'state', this.connectionHandler.previous));\n\t\t}\n\t}\n};\n\n/**\n * Function: scrollPointToVisible\n * \n * Scrolls the graph to the given point, extending the graph container if\n * specified.\n */\nmxGraph.prototype.scrollPointToVisible = function(x, y, extend, border)\n{\n\tif (!this.timerAutoScroll && (this.ignoreScrollbars || mxUtils.hasScrollbars(this.container)))\n\t{\n\t\tvar c = this.container;\n\t\tborder = (border != null) ? border : 20;\n\t\t\n\t\tif (x >= c.scrollLeft && y >= c.scrollTop && x <= c.scrollLeft + c.clientWidth &&\n\t\t\ty <= c.scrollTop + c.clientHeight)\n\t\t{\n\t\t\tvar dx = c.scrollLeft + c.clientWidth - x;\n\t\t\t\n\t\t\tif (dx < border)\n\t\t\t{\n\t\t\t\tvar old = c.scrollLeft;\n\t\t\t\tc.scrollLeft += border - dx;\n\n\t\t\t\t// Automatically extends the canvas size to the bottom, right\n\t\t\t\t// if the event is outside of the canvas and the edge of the\n\t\t\t\t// canvas has been reached. Notes: Needs fix for IE.\n\t\t\t\tif (extend && old == c.scrollLeft)\n\t\t\t\t{\n\t\t\t\t\tif (this.dialect == mxConstants.DIALECT_SVG)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar root = this.view.getDrawPane().ownerSVGElement;\n\t\t\t\t\t\tvar width = this.container.scrollWidth + border - dx;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Updates the clipping region. This is an expensive\n\t\t\t\t\t\t// operation that should not be executed too often.\n\t\t\t\t\t\troot.style.width = width + 'px';\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar width = Math.max(c.clientWidth, c.scrollWidth) + border - dx;\n\t\t\t\t\t\tvar canvas = this.view.getCanvas();\n\t\t\t\t\t\tcanvas.style.width = width + 'px';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tc.scrollLeft += border - dx;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdx = x - c.scrollLeft;\n\t\t\t\t\n\t\t\t\tif (dx < border)\n\t\t\t\t{\n\t\t\t\t\tc.scrollLeft -= border - dx;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar dy = c.scrollTop + c.clientHeight - y;\n\t\t\t\n\t\t\tif (dy < border)\n\t\t\t{\n\t\t\t\tvar old = c.scrollTop;\n\t\t\t\tc.scrollTop += border - dy;\n\n\t\t\t\tif (old == c.scrollTop && extend)\n\t\t\t\t{\n\t\t\t\t\tif (this.dialect == mxConstants.DIALECT_SVG)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar root = this.view.getDrawPane().ownerSVGElement;\n\t\t\t\t\t\tvar height = this.container.scrollHeight + border - dy;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Updates the clipping region. This is an expensive\n\t\t\t\t\t\t// operation that should not be executed too often.\n\t\t\t\t\t\troot.style.height = height + 'px';\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar height = Math.max(c.clientHeight, c.scrollHeight) + border - dy;\n\t\t\t\t\t\tvar canvas = this.view.getCanvas();\n\t\t\t\t\t\tcanvas.style.height = height + 'px';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tc.scrollTop += border - dy;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdy = y - c.scrollTop;\n\t\t\t\t\n\t\t\t\tif (dy < border)\n\t\t\t\t{\n\t\t\t\t\tc.scrollTop -= border - dy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse if (this.allowAutoPanning && !this.panningHandler.isActive())\n\t{\n\t\tif (this.panningManager == null)\n\t\t{\n\t\t\tthis.panningManager = this.createPanningManager();\n\t\t}\n\n\t\tthis.panningManager.panTo(x + this.panDx, y + this.panDy);\n\t}\n};\n\n\n/**\n * Function: createPanningManager\n * \n * Creates and returns an <mxPanningManager>.\n */\nmxGraph.prototype.createPanningManager = function()\n{\n\treturn new mxPanningManager(this);\n};\n\n/**\n * Function: getBorderSizes\n * \n * Returns the size of the border and padding on all four sides of the\n * container. The left, top, right and bottom borders are stored in the x, y,\n * width and height of the returned <mxRectangle>, respectively.\n */\nmxGraph.prototype.getBorderSizes = function()\n{\n\tvar css = mxUtils.getCurrentStyle(this.container);\n\t\n\treturn new mxRectangle(mxUtils.parseCssNumber(css.paddingLeft) +\n\t\t\t((css.borderLeftStyle != 'none') ? mxUtils.parseCssNumber(css.borderLeftWidth) : 0),\n\t\tmxUtils.parseCssNumber(css.paddingTop) +\n\t\t\t((css.borderTopStyle != 'none') ? mxUtils.parseCssNumber(css.borderTopWidth) : 0),\n\t\tmxUtils.parseCssNumber(css.paddingRight) +\n\t\t\t((css.borderRightStyle != 'none') ? mxUtils.parseCssNumber(css.borderRightWidth) : 0),\n\t\tmxUtils.parseCssNumber(css.paddingBottom) +\n\t\t\t((css.borderBottomStyle != 'none') ? mxUtils.parseCssNumber(css.borderBottomWidth) : 0));\n};\n\n/**\n * Function: getPreferredPageSize\n * \n * Returns the preferred size of the background page if <preferPageSize> is true.\n */\nmxGraph.prototype.getPreferredPageSize = function(bounds, width, height)\n{\n\tvar scale = this.view.scale;\n\tvar tr = this.view.translate;\n\tvar fmt = this.pageFormat;\n\tvar ps = this.pageScale;\n\tvar page = new mxRectangle(0, 0, Math.ceil(fmt.width * ps), Math.ceil(fmt.height * ps));\n\t\n\tvar hCount = (this.pageBreaksVisible) ? Math.ceil(width / page.width) : 1;\n\tvar vCount = (this.pageBreaksVisible) ? Math.ceil(height / page.height) : 1;\n\t\n\treturn new mxRectangle(0, 0, hCount * page.width + 2 + tr.x, vCount * page.height + 2 + tr.y);\n};\n\n/**\n * Function: fit\n *\n * Scales the graph such that the complete diagram fits into <container> and\n * returns the current scale in the view. To fit an initial graph prior to\n * rendering, set <mxGraphView.rendering> to false prior to changing the model\n * and execute the following after changing the model.\n * \n * (code)\n * graph.fit();\n * graph.view.rendering = true;\n * graph.refresh();\n * (end)\n * \n * To fit and center the graph, the following code can be used.\n * \n * (code)\n * var margin = 2;\n * var max = 3;\n * \n * var bounds = graph.getGraphBounds();\n * var cw = graph.container.clientWidth - margin;\n * var ch = graph.container.clientHeight - margin;\n * var w = bounds.width / graph.view.scale;\n * var h = bounds.height / graph.view.scale;\n * var s = Math.min(max, Math.min(cw / w, ch / h));\n * \n * graph.view.scaleAndTranslate(s,\n *   (margin + cw - w * s) / (2 * s) - bounds.x / graph.view.scale,\n *   (margin + ch - h * s) / (2 * s) - bounds.y / graph.view.scale);\n * (end)\n * \n * Parameters:\n * \n * border - Optional number that specifies the border. Default is <border>.\n * keepOrigin - Optional boolean that specifies if the translate should be\n * changed. Default is false.\n * margin - Optional margin in pixels. Default is 0.\n * enabled - Optional boolean that specifies if the scale should be set or\n * just returned. Default is true.\n * ignoreWidth - Optional boolean that specifies if the width should be\n * ignored. Default is false.\n * ignoreHeight - Optional boolean that specifies if the height should be\n * ignored. Default is false.\n * maxHeight - Optional maximum height.\n */\nmxGraph.prototype.fit = function(border, keepOrigin, margin, enabled, ignoreWidth, ignoreHeight, maxHeight)\n{\n\tif (this.container != null)\n\t{\n\t\tborder = (border != null) ? border : this.getBorder();\n\t\tkeepOrigin = (keepOrigin != null) ? keepOrigin : false;\n\t\tmargin = (margin != null) ? margin : 0;\n\t\tenabled = (enabled != null) ? enabled : true;\n\t\tignoreWidth = (ignoreWidth != null) ? ignoreWidth : false;\n\t\tignoreHeight = (ignoreHeight != null) ? ignoreHeight : false;\n\t\t\n\t\t// Adds spacing and border from css\n\t\tvar cssBorder = this.getBorderSizes();\n\t\tvar w1 = this.container.offsetWidth - cssBorder.x - cssBorder.width - 1;\n\t\tvar h1 = (maxHeight != null) ? maxHeight : this.container.offsetHeight - cssBorder.y - cssBorder.height - 1;\n\t\tvar bounds = this.view.getGraphBounds();\n\t\t\n\t\tif (bounds.width > 0 && bounds.height > 0)\n\t\t{\n\t\t\tif (keepOrigin && bounds.x != null && bounds.y != null)\n\t\t\t{\n\t\t\t\tbounds = bounds.clone();\n\t\t\t\tbounds.width += bounds.x;\n\t\t\t\tbounds.height += bounds.y;\n\t\t\t\tbounds.x = 0;\n\t\t\t\tbounds.y = 0;\n\t\t\t}\n\t\t\t\n\t\t\t// LATER: Use unscaled bounding boxes to fix rounding errors\n\t\t\tvar s = this.view.scale;\n\t\t\tvar w2 = bounds.width / s;\n\t\t\tvar h2 = bounds.height / s;\n\t\t\t\n\t\t\t// Fits to the size of the background image if required\n\t\t\tif (this.backgroundImage != null)\n\t\t\t{\n\t\t\t\tw2 = Math.max(w2, this.backgroundImage.width - bounds.x / s);\n\t\t\t\th2 = Math.max(h2, this.backgroundImage.height - bounds.y / s);\n\t\t\t}\n\t\t\t\n\t\t\tvar b = ((keepOrigin) ? border : 2 * border) + margin + 1;\n\n\t\t\tw1 -= b;\n\t\t\th1 -= b;\n\t\t\t\n\t\t\tvar s2 = (((ignoreWidth) ? h1 / h2 : (ignoreHeight) ? w1 / w2 :\n\t\t\t\tMath.min(w1 / w2, h1 / h2)));\n\t\t\t\n\t\t\tif (this.minFitScale != null)\n\t\t\t{\n\t\t\t\ts2 = Math.max(s2, this.minFitScale);\n\t\t\t}\n\t\t\t\n\t\t\tif (this.maxFitScale != null)\n\t\t\t{\n\t\t\t\ts2 = Math.min(s2, this.maxFitScale);\n\t\t\t}\n\t\n\t\t\tif (enabled)\n\t\t\t{\n\t\t\t\tif (!keepOrigin)\n\t\t\t\t{\n\t\t\t\t\tif (!mxUtils.hasScrollbars(this.container))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x0 = (bounds.x != null) ? Math.floor(this.view.translate.x - bounds.x / s + border / s2 + margin / 2) : border;\n\t\t\t\t\t\tvar y0 = (bounds.y != null) ? Math.floor(this.view.translate.y - bounds.y / s + border / s2 + margin / 2) : border;\n\n\t\t\t\t\t\tthis.view.scaleAndTranslate(s2, x0, y0);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.view.setScale(s2);\n\t\t\t\t\t\tvar b2 = this.getGraphBounds();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (b2.x != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.container.scrollLeft = b2.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (b2.y != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.container.scrollTop = b2.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this.view.scale != s2)\n\t\t\t\t{\n\t\t\t\t\tthis.view.setScale(s2);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn s2;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this.view.scale;\n};\n\n/**\n * Function: sizeDidChange\n * \n * Called when the size of the graph has changed. This implementation fires\n * a <size> event after updating the clipping region of the SVG element in\n * SVG-bases browsers.\n */\nmxGraph.prototype.sizeDidChange = function()\n{\n\tvar bounds = this.getGraphBounds();\n\t\n\tif (this.container != null)\n\t{\n\t\tvar border = this.getBorder();\n\t\t\n\t\tvar width = Math.max(0, bounds.x) + bounds.width + 2 * border;\n\t\tvar height = Math.max(0, bounds.y) + bounds.height + 2 * border;\n\t\t\n\t\tif (this.minimumContainerSize != null)\n\t\t{\n\t\t\twidth = Math.max(width, this.minimumContainerSize.width);\n\t\t\theight = Math.max(height, this.minimumContainerSize.height);\n\t\t}\n\n\t\tif (this.resizeContainer)\n\t\t{\n\t\t\tthis.doResizeContainer(width, height);\n\t\t}\n\n\t\tif (this.preferPageSize || (!mxClient.IS_IE && this.pageVisible))\n\t\t{\n\t\t\tvar size = this.getPreferredPageSize(bounds, Math.max(1, width), Math.max(1, height));\n\t\t\t\n\t\t\tif (size != null)\n\t\t\t{\n\t\t\t\twidth = size.width * this.view.scale;\n\t\t\t\theight = size.height * this.view.scale;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.minimumGraphSize != null)\n\t\t{\n\t\t\twidth = Math.max(width, this.minimumGraphSize.width * this.view.scale);\n\t\t\theight = Math.max(height, this.minimumGraphSize.height * this.view.scale);\n\t\t}\n\n\t\twidth = Math.ceil(width);\n\t\theight = Math.ceil(height);\n\n\t\tif (this.dialect == mxConstants.DIALECT_SVG)\n\t\t{\n\t\t\tvar root = this.view.getDrawPane().ownerSVGElement;\n\t\t\t\n\t\t\tif (root != null)\n\t\t\t{\n\t\t\t\troot.style.minWidth = Math.max(1, width) + 'px';\n\t\t\t\troot.style.minHeight = Math.max(1, height) + 'px';\n\t\t\t\troot.style.width = '100%';\n\t\t\t\troot.style.height = '100%';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (mxClient.IS_QUIRKS)\n\t\t\t{\n\t\t\t\t// Quirks mode does not support minWidth/-Height\n\t\t\t\tthis.view.updateHtmlCanvasSize(Math.max(1, width), Math.max(1, height));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.view.canvas.style.minWidth = Math.max(1, width) + 'px';\n\t\t\t\tthis.view.canvas.style.minHeight = Math.max(1, height) + 'px';\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.updatePageBreaks(this.pageBreaksVisible, width, height);\n\t}\n\n\tthis.fireEvent(new mxEventObject(mxEvent.SIZE, 'bounds', bounds));\n};\n\n/**\n * Function: doResizeContainer\n * \n * Resizes the container for the given graph width and height.\n */\nmxGraph.prototype.doResizeContainer = function(width, height)\n{\n\tif (this.maximumContainerSize != null)\n\t{\n\t\twidth = Math.min(this.maximumContainerSize.width, width);\n\t\theight = Math.min(this.maximumContainerSize.height, height);\n\t}\n\n\tthis.container.style.width = Math.ceil(width) + 'px';\n\tthis.container.style.height = Math.ceil(height) + 'px';\n};\n\n/**\n * Function: updatePageBreaks\n * \n * Invokes from <sizeDidChange> to redraw the page breaks.\n * \n * Parameters:\n * \n * visible - Boolean that specifies if page breaks should be shown.\n * width - Specifies the width of the container in pixels.\n * height - Specifies the height of the container in pixels.\n */\nmxGraph.prototype.updatePageBreaks = function(visible, width, height)\n{\n\tvar scale = this.view.scale;\n\tvar tr = this.view.translate;\n\tvar fmt = this.pageFormat;\n\tvar ps = scale * this.pageScale;\n\tvar bounds = new mxRectangle(0, 0, fmt.width * ps, fmt.height * ps);\n\n\tvar gb = mxRectangle.fromRectangle(this.getGraphBounds());\n\tgb.width = Math.max(1, gb.width);\n\tgb.height = Math.max(1, gb.height);\n\t\n\tbounds.x = Math.floor((gb.x - tr.x * scale) / bounds.width) * bounds.width + tr.x * scale;\n\tbounds.y = Math.floor((gb.y - tr.y * scale) / bounds.height) * bounds.height + tr.y * scale;\n\t\n\tgb.width = Math.ceil((gb.width + (gb.x - bounds.x)) / bounds.width) * bounds.width;\n\tgb.height = Math.ceil((gb.height + (gb.y - bounds.y)) / bounds.height) * bounds.height;\n\t\n\t// Does not show page breaks if the scale is too small\n\tvisible = visible && Math.min(bounds.width, bounds.height) > this.minPageBreakDist;\n\n\tvar horizontalCount = (visible) ? Math.ceil(gb.height / bounds.height) + 1 : 0;\n\tvar verticalCount = (visible) ? Math.ceil(gb.width / bounds.width) + 1 : 0;\n\tvar right = (verticalCount - 1) * bounds.width;\n\tvar bottom = (horizontalCount - 1) * bounds.height;\n\t\n\tif (this.horizontalPageBreaks == null && horizontalCount > 0)\n\t{\n\t\tthis.horizontalPageBreaks = [];\n\t}\n\n\tif (this.verticalPageBreaks == null && verticalCount > 0)\n\t{\n\t\tthis.verticalPageBreaks = [];\n\t}\n\t\n\tvar drawPageBreaks = mxUtils.bind(this, function(breaks)\n\t{\n\t\tif (breaks != null)\n\t\t{\n\t\t\tvar count = (breaks == this.horizontalPageBreaks) ? horizontalCount : verticalCount; \n\t\t\t\n\t\t\tfor (var i = 0; i <= count; i++)\n\t\t\t{\n\t\t\t\tvar pts = (breaks == this.horizontalPageBreaks) ?\n\t\t\t\t\t[new mxPoint(Math.round(bounds.x), Math.round(bounds.y + i * bounds.height)),\n\t\t\t         new mxPoint(Math.round(bounds.x + right), Math.round(bounds.y + i * bounds.height))] :\n\t\t\t        [new mxPoint(Math.round(bounds.x + i * bounds.width), Math.round(bounds.y)),\n\t\t\t         new mxPoint(Math.round(bounds.x + i * bounds.width), Math.round(bounds.y + bottom))];\n\n\t\t\t\tif (breaks[i] != null)\n\t\t\t\t{\n\t\t\t\t\tbreaks[i].points = pts;\n\t\t\t\t\tbreaks[i].redraw();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar pageBreak = new mxPolyline(pts, this.pageBreakColor);\n\t\t\t\t\tpageBreak.dialect = this.dialect;\n\t\t\t\t\tpageBreak.pointerEvents = false;\n\t\t\t\t\tpageBreak.isDashed = this.pageBreakDashed;\n\t\t\t\t\tpageBreak.init(this.view.backgroundPane);\n\t\t\t\t\tpageBreak.redraw();\n\t\t\t\t\t\n\t\t\t\t\tbreaks[i] = pageBreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor (var i = count; i < breaks.length; i++)\n\t\t\t{\n\t\t\t\tbreaks[i].destroy();\n\t\t\t}\n\t\t\t\n\t\t\tbreaks.splice(count, breaks.length - count);\n\t\t}\n\t});\n\t\n\tdrawPageBreaks(this.horizontalPageBreaks);\n\tdrawPageBreaks(this.verticalPageBreaks);\n};\n\n/**\n * Group: Cell styles\n */\n\n/**\n * Function: getCurrentCellStyle\n * \n * Returns the style for the given cell from the cell state, if one exists,\n * or using <getCellStyle>.\n * \n * Parameters:\n * \n * cell - <mxCell> whose style should be returned as an array.\n * ignoreState - Optional boolean that specifies if the cell state should be ignored.\n */\nmxGraph.prototype.getCurrentCellStyle = function(cell, ignoreState)\n{\n\tvar state = (ignoreState) ? null : this.view.getState(cell);\n\t\n\treturn (state != null) ? state.style : this.getCellStyle(cell);\n};\n\n/**\n * Function: getCellStyle\n * \n * Returns an array of key, value pairs representing the cell style for the\n * given cell. If no string is defined in the model that specifies the\n * style, then the default style for the cell is returned or an empty object,\n * if no style can be found. Note: You should try and get the cell state\n * for the given cell and use the cached style in the state before using\n * this method.\n * \n * Parameters:\n * \n * cell - <mxCell> whose style should be returned as an array.\n */\nmxGraph.prototype.getCellStyle = function(cell)\n{\n\tvar stylename = this.model.getStyle(cell);\n\tvar style = null;\n\t\n\t// Gets the default style for the cell\n\tif (this.model.isEdge(cell))\n\t{\n\t\tstyle = this.stylesheet.getDefaultEdgeStyle();\n\t}\n\telse\n\t{\n\t\tstyle = this.stylesheet.getDefaultVertexStyle();\n\t}\n\t\n\t// Resolves the stylename using the above as the default\n\tif (stylename != null)\n\t{\n\t\tstyle = this.postProcessCellStyle(this.stylesheet.getCellStyle(stylename, style));\n\t}\n\t\n\t// Returns a non-null value if no style can be found\n\tif (style == null)\n\t{\n\t\tstyle = new Object();\n\t}\n\t\n\treturn style;\n};\n\n/**\n * Function: postProcessCellStyle\n * \n * Tries to resolve the value for the image style in the image bundles and\n * turns short data URIs as defined in mxImageBundle to data URIs as\n * defined in RFC 2397 of the IETF.\n */\nmxGraph.prototype.postProcessCellStyle = function(style)\n{\n\tif (style != null)\n\t{\n\t\tvar key = style[mxConstants.STYLE_IMAGE];\n\t\tvar image = this.getImageFromBundles(key);\n\n\t\tif (image != null)\n\t\t{\n\t\t\tstyle[mxConstants.STYLE_IMAGE] = image;\n\t\t}\n\t\telse\n\t\t{\n\t\t\timage = key;\n\t\t}\n\t\t\n\t\t// Converts short data uris to normal data uris\n\t\tif (image != null && image.substring(0, 11) == 'data:image/')\n\t\t{\n\t\t\tif (image.substring(0, 20) == 'data:image/svg+xml,<')\n\t\t\t{\n\t\t\t\t// Required for FF and IE11\n\t\t\t\timage = image.substring(0, 19) + encodeURIComponent(image.substring(19));\n\t\t\t}\n\t\t\telse if (image.substring(0, 22) != 'data:image/svg+xml,%3C')\n\t\t\t{\n\t\t\t\tvar comma = image.indexOf(',');\n\t\t\t\t\n\t\t\t\t// Adds base64 encoding prefix if needed\n\t\t\t\tif (comma > 0 && image.substring(comma - 7, comma + 1) != ';base64,')\n\t\t\t\t{\n\t\t\t\t\timage = image.substring(0, comma) + ';base64,'\n\t\t\t\t\t\t+ image.substring(comma + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tstyle[mxConstants.STYLE_IMAGE] = image;\n\t\t}\n\t}\n\n\treturn style;\n};\n\n/**\n * Function: setCellStyle\n * \n * Sets the style of the specified cells. If no cells are given, then the\n * selection cells are changed.\n * \n * Parameters:\n * \n * style - String representing the new style of the cells.\n * cells - Optional array of <mxCells> to set the style for. Default is the\n * selection cells.\n */\nmxGraph.prototype.setCellStyle = function(style, cells)\n{\n\tcells = cells || this.getSelectionCells();\n\t\n\tif (cells != null)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tthis.model.setStyle(cells[i], style);\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: toggleCellStyle\n * \n * Toggles the boolean value for the given key in the style of the given cell\n * and returns the new value as 0 or 1. If no cell is specified then the\n * selection cell is used.\n * \n * Parameter:\n * \n * key - String representing the key for the boolean value to be toggled.\n * defaultValue - Optional boolean default value if no value is defined.\n * Default is false.\n * cell - Optional <mxCell> whose style should be modified. Default is\n * the selection cell.\n */\nmxGraph.prototype.toggleCellStyle = function(key, defaultValue, cell)\n{\n\tcell = cell || this.getSelectionCell();\n\t\n\treturn this.toggleCellStyles(key, defaultValue, [cell]);\n};\n\n/**\n * Function: toggleCellStyles\n * \n * Toggles the boolean value for the given key in the style of the given cells\n * and returns the new value as 0 or 1. If no cells are specified, then the\n * selection cells are used. For example, this can be used to toggle\n * <mxConstants.STYLE_ROUNDED> or any other style with a boolean value.\n * \n * Parameter:\n * \n * key - String representing the key for the boolean value to be toggled.\n * defaultValue - Optional boolean default value if no value is defined.\n * Default is false.\n * cells - Optional array of <mxCells> whose styles should be modified.\n * Default is the selection cells.\n */\nmxGraph.prototype.toggleCellStyles = function(key, defaultValue, cells)\n{\n\tdefaultValue = (defaultValue != null) ? defaultValue : false;\n\tcells = cells || this.getSelectionCells();\n\tvar value = null;\n\t\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tvar style = this.getCurrentCellStyle(cells[0]);\n\t\tvalue = (mxUtils.getValue(style, key, defaultValue)) ? 0 : 1;\n\t\tthis.setCellStyles(key, value, cells);\n\t}\n\t\n\treturn value;\n};\n\n/**\n * Function: setCellStyles\n * \n * Sets the key to value in the styles of the given cells. This will modify\n * the existing cell styles in-place and override any existing assignment\n * for the given key. If no cells are specified, then the selection cells\n * are changed. If no value is specified, then the respective key is\n * removed from the styles.\n * \n * Parameters:\n * \n * key - String representing the key to be assigned.\n * value - String representing the new value for the key.\n * cells - Optional array of <mxCells> to change the style for. Default is\n * the selection cells.\n */\nmxGraph.prototype.setCellStyles = function(key, value, cells)\n{\n\tcells = cells || this.getSelectionCells();\n\tmxUtils.setCellStyles(this.model, cells, key, value);\n};\n\n/**\n * Function: toggleCellStyleFlags\n * \n * Toggles the given bit for the given key in the styles of the specified\n * cells.\n * \n * Parameters:\n * \n * key - String representing the key to toggle the flag in.\n * flag - Integer that represents the bit to be toggled.\n * cells - Optional array of <mxCells> to change the style for. Default is\n * the selection cells.\n */\nmxGraph.prototype.toggleCellStyleFlags = function(key, flag, cells)\n{\n\tthis.setCellStyleFlags(key, flag, null, cells);\n};\n\n/**\n * Function: setCellStyleFlags\n * \n * Sets or toggles the given bit for the given key in the styles of the\n * specified cells.\n * \n * Parameters:\n * \n * key - String representing the key to toggle the flag in.\n * flag - Integer that represents the bit to be toggled.\n * value - Boolean value to be used or null if the value should be toggled.\n * cells - Optional array of <mxCells> to change the style for. Default is\n * the selection cells.\n */\nmxGraph.prototype.setCellStyleFlags = function(key, flag, value, cells)\n{\n\tcells = cells || this.getSelectionCells();\n\t\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tif (value == null)\n\t\t{\n\t\t\tvar style = this.getCurrentCellStyle(cells[0]);\n\t\t\tvar current = parseInt(style[key] || 0);\n\t\t\tvalue = !((current & flag) == flag);\n\t\t}\n\n\t\tmxUtils.setCellStyleFlags(this.model, cells, key, flag, value);\n\t}\n};\n\n/**\n * Group: Cell alignment and orientation\n */\n\n/**\n * Function: alignCells\n * \n * Aligns the given cells vertically or horizontally according to the given\n * alignment using the optional parameter as the coordinate.\n * \n * Parameters:\n * \n * align - Specifies the alignment. Possible values are all constants in\n * mxConstants with an ALIGN prefix.\n * cells - Array of <mxCells> to be aligned.\n * param - Optional coordinate for the alignment.\n */\nmxGraph.prototype.alignCells = function(align, cells, param)\n{\n\tif (cells == null)\n\t{\n\t\tcells = this.getSelectionCells();\n\t}\n\t\n\tif (cells != null && cells.length > 1)\n\t{\n\t\t// Finds the required coordinate for the alignment\n\t\tif (param == null)\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tvar state = this.view.getState(cells[i]);\n\t\t\t\t\n\t\t\t\tif (state != null && !this.model.isEdge(cells[i]))\n\t\t\t\t{\n\t\t\t\t\tif (param == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (align == mxConstants.ALIGN_CENTER)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = state.x + state.width / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (align == mxConstants.ALIGN_RIGHT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = state.x + state.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (align == mxConstants.ALIGN_TOP)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = state.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (align == mxConstants.ALIGN_MIDDLE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = state.y + state.height / 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (align == mxConstants.ALIGN_BOTTOM)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = state.y + state.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = state.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (align == mxConstants.ALIGN_RIGHT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = Math.max(param, state.x + state.width);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (align == mxConstants.ALIGN_TOP)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = Math.min(param, state.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (align == mxConstants.ALIGN_BOTTOM)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = Math.max(param, state.y + state.height);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparam = Math.min(param, state.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Aligns the cells to the coordinate\n\t\tif (param != null)\n\t\t{\n\t\t\tvar s = this.view.scale;\n\n\t\t\tthis.model.beginUpdate();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar state = this.view.getState(cells[i]);\n\t\t\t\t\t\n\t\t\t\t\tif (state != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar geo = this.getCellGeometry(cells[i]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (geo != null && !this.model.isEdge(cells[i]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (align == mxConstants.ALIGN_CENTER)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.x += (param - state.x - state.width / 2) / s;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (align == mxConstants.ALIGN_RIGHT)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.x += (param - state.x - state.width) / s;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (align == mxConstants.ALIGN_TOP)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.y += (param - state.y) / s;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (align == mxConstants.ALIGN_MIDDLE)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.y += (param - state.y - state.height / 2) / s;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (align == mxConstants.ALIGN_BOTTOM)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.y += (param - state.y - state.height) / s;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.x += (param - state.x) / s;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.resizeCell(cells[i], geo);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,\n\t\t\t\t\t\t'align', align, 'cells', cells));\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.model.endUpdate();\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn cells;\n};\n\n/**\n * Function: flipEdge\n * \n * Toggles the style of the given edge between null (or empty) and\n * <alternateEdgeStyle>. This method fires <mxEvent.FLIP_EDGE> while the\n * transaction is in progress. Returns the edge that was flipped.\n * \n * Here is an example that overrides this implementation to invert the\n * value of <mxConstants.STYLE_ELBOW> without removing any existing styles.\n * \n * (code)\n * graph.flipEdge = function(edge)\n * {\n *   if (edge != null)\n *   {\n *     var style = this.getCurrentCellStyle(edge);\n *     var elbow = mxUtils.getValue(style, mxConstants.STYLE_ELBOW,\n *         mxConstants.ELBOW_HORIZONTAL);\n *     var value = (elbow == mxConstants.ELBOW_HORIZONTAL) ?\n *         mxConstants.ELBOW_VERTICAL : mxConstants.ELBOW_HORIZONTAL;\n *     this.setCellStyles(mxConstants.STYLE_ELBOW, value, [edge]);\n *   }\n * };\n * (end)\n * \n * Parameters:\n * \n * edge - <mxCell> whose style should be changed.\n */\nmxGraph.prototype.flipEdge = function(edge)\n{\n\tif (edge != null &&\n\t\tthis.alternateEdgeStyle != null)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tvar style = this.model.getStyle(edge);\n\n\t\t\tif (style == null || style.length == 0)\n\t\t\t{\n\t\t\t\tthis.model.setStyle(edge, this.alternateEdgeStyle);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.model.setStyle(edge, null);\n\t\t\t}\n\n\t\t\t// Removes all existing control points\n\t\t\tthis.resetEdge(edge);\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE, 'edge', edge));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n\n\treturn edge;\n};\n\n/**\n * Function: addImageBundle\n *\n * Adds the specified <mxImageBundle>.\n */\nmxGraph.prototype.addImageBundle = function(bundle)\n{\n\tthis.imageBundles.push(bundle);\n};\n\n/**\n * Function: removeImageBundle\n * \n * Removes the specified <mxImageBundle>.\n */\nmxGraph.prototype.removeImageBundle = function(bundle)\n{\n\tvar tmp = [];\n\t\n\tfor (var i = 0; i < this.imageBundles.length; i++)\n\t{\n\t\tif (this.imageBundles[i] != bundle)\n\t\t{\n\t\t\ttmp.push(this.imageBundles[i]);\n\t\t}\n\t}\n\t\n\tthis.imageBundles = tmp;\n};\n\n/**\n * Function: getImageFromBundles\n *\n * Searches all <imageBundles> for the specified key and returns the value\n * for the first match or null if the key is not found.\n */\nmxGraph.prototype.getImageFromBundles = function(key)\n{\n\tif (key != null)\n\t{\n\t\tfor (var i = 0; i < this.imageBundles.length; i++)\n\t\t{\n\t\t\tvar image = this.imageBundles[i].getImage(key);\n\t\t\t\n\t\t\tif (image != null)\n\t\t\t{\n\t\t\t\treturn image;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Group: Order\n */\n\n/**\n * Function: orderCells\n * \n * Moves the given cells to the front or back. The change is carried out\n * using <cellsOrdered>. This method fires <mxEvent.ORDER_CELLS> while the\n * transaction is in progress.\n * \n * Parameters:\n * \n * back - Boolean that specifies if the cells should be moved to back.\n * cells - Array of <mxCells> to move to the background. If null is\n * specified then the selection cells are used.\n */\nmxGraph.prototype.orderCells = function(back, cells)\n{\n\tif (cells == null)\n\t{\n\t\tcells = mxUtils.sortCells(this.getSelectionCells(), true);\n\t}\n\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tthis.cellsOrdered(cells, back);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,\n\t\t\t\t'back', back, 'cells', cells));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: cellsOrdered\n * \n * Moves the given cells to the front or back. This method fires\n * <mxEvent.CELLS_ORDERED> while the transaction is in progress.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose order should be changed.\n * back - Boolean that specifies if the cells should be moved to back.\n */\nmxGraph.prototype.cellsOrdered = function(cells, back)\n{\n\tif (cells != null)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tvar parent = this.model.getParent(cells[i]);\n\n\t\t\t\tif (back)\n\t\t\t\t{\n\t\t\t\t\tthis.model.add(parent, cells[i], i);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.model.add(parent, cells[i],\n\t\t\t\t\t\t\tthis.model.getChildCount(parent) - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,\n\t\t\t\t\t'back', back, 'cells', cells));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Group: Grouping\n */\n\n/**\n * Function: groupCells\n * \n * Adds the cells into the given group. The change is carried out using\n * <cellsAdded>, <cellsMoved> and <cellsResized>. This method fires\n * <mxEvent.GROUP_CELLS> while the transaction is in progress. Returns the\n * new group. A group is only created if there is at least one entry in the\n * given array of cells.\n * \n * Parameters:\n * \n * group - <mxCell> that represents the target group. If null is specified\n * then a new group is created using <createGroupCell>.\n * border - Optional integer that specifies the border between the child\n * area and the group bounds. Default is 0.\n * cells - Optional array of <mxCells> to be grouped. If null is specified\n * then the selection cells are used.\n */\nmxGraph.prototype.groupCells = function(group, border, cells)\n{\n\tif (cells == null)\n\t{\n\t\tcells = mxUtils.sortCells(this.getSelectionCells(), true);\n\t}\n\n\tcells = this.getCellsForGroup(cells);\n\n\tif (group == null)\n\t{\n\t\tgroup = this.createGroupCell(cells);\n\t}\n\n\tvar bounds = this.getBoundsForGroup(group, cells, border);\n\n\tif (cells.length > 1 && bounds != null)\n\t{\n\t\t// Uses parent of group or previous parent of first child\n\t\tvar parent = this.model.getParent(group);\n\t\t\n\t\tif (parent == null)\n\t\t{\n\t\t\tparent = this.model.getParent(cells[0]);\n\t\t}\n\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\t// Checks if the group has a geometry and\n\t\t\t// creates one if one does not exist\n\t\t\tif (this.getCellGeometry(group) == null)\n\t\t\t{\n\t\t\t\tthis.model.setGeometry(group, new mxGeometry());\n\t\t\t}\n\n\t\t\t// Adds the group into the parent\n\t\t\tvar index = this.model.getChildCount(parent);\n\t\t\tthis.cellsAdded([group], parent, index, null, null, false, false, false);\n\n\t\t\t// Adds the children into the group and moves\n\t\t\tindex = this.model.getChildCount(group);\n\t\t\tthis.cellsAdded(cells, group, index, null, null, false, false, false);\n\t\t\tthis.cellsMoved(cells, -bounds.x, -bounds.y, false, false, false);\n\n\t\t\t// Resizes the group\n\t\t\tthis.cellsResized([group], [bounds], false);\n\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,\n\t\t\t\t\t'group', group, 'border', border, 'cells', cells));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n\n\treturn group;\n};\n\n/**\n * Function: getCellsForGroup\n * \n * Returns the cells with the same parent as the first cell\n * in the given array.\n */\nmxGraph.prototype.getCellsForGroup = function(cells)\n{\n\tvar result = [];\n\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tvar parent = this.model.getParent(cells[0]);\n\t\tresult.push(cells[0]);\n\n\t\t// Filters selection cells with the same parent\n\t\tfor (var i = 1; i < cells.length; i++)\n\t\t{\n\t\t\tif (this.model.getParent(cells[i]) == parent)\n\t\t\t{\n\t\t\t\tresult.push(cells[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: getBoundsForGroup\n * \n * Returns the bounds to be used for the given group and children.\n */\nmxGraph.prototype.getBoundsForGroup = function(group, children, border)\n{\n\tvar result = this.getBoundingBoxFromGeometry(children, true);\n\t\n\tif (result != null)\n\t{\n\t\tif (this.isSwimlane(group))\n\t\t{\n\t\t\tvar size = this.getStartSize(group);\n\t\t\t\n\t\t\tresult.x -= size.width;\n\t\t\tresult.y -= size.height;\n\t\t\tresult.width += size.width;\n\t\t\tresult.height += size.height;\n\t\t}\n\t\t\n\t\t// Adds the border\n\t\tif (border != null)\n\t\t{\n\t\t\tresult.x -= border;\n\t\t\tresult.y -= border;\n\t\t\tresult.width += 2 * border;\n\t\t\tresult.height += 2 * border;\n\t\t}\n\t}\t\t\t\n\t\n\treturn result;\n};\n\n/**\n * Function: createGroupCell\n * \n * Hook for creating the group cell to hold the given array of <mxCells> if\n * no group cell was given to the <group> function.\n * \n * The following code can be used to set the style of new group cells.\n * \n * (code)\n * var graphCreateGroupCell = graph.createGroupCell;\n * graph.createGroupCell = function(cells)\n * {\n *   var group = graphCreateGroupCell.apply(this, arguments);\n *   group.setStyle('group');\n *   \n *   return group;\n * };\n */\nmxGraph.prototype.createGroupCell = function(cells)\n{\n\tvar group = new mxCell('');\n\tgroup.setVertex(true);\n\tgroup.setConnectable(false);\n\t\n\treturn group;\n};\n\n/**\n * Function: ungroupCells\n * \n * Ungroups the given cells by moving the children the children to their\n * parents parent and removing the empty groups. Returns the children that\n * have been removed from the groups.\n * \n * Parameters:\n * \n * cells - Array of cells to be ungrouped. If null is specified then the\n * selection cells are used.\n */\nmxGraph.prototype.ungroupCells = function(cells)\n{\n\tvar result = [];\n\t\n\tif (cells == null)\n\t{\n\t\tcells = this.getCellsForUngroup();\n\t}\n\t\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tvar children = this.model.getChildren(cells[i]);\n\t\t\t\t\n\t\t\t\tif (children != null && children.length > 0)\n\t\t\t\t{\n\t\t\t\t\tchildren = children.slice();\n\t\t\t\t\tvar parent = this.model.getParent(cells[i]);\n\t\t\t\t\tvar index = this.model.getChildCount(parent);\n\n\t\t\t\t\tthis.cellsAdded(children, parent, index, null, null, true);\n\t\t\t\t\tresult = result.concat(children);\n\t\t\t\t\t\n\t\t\t\t\t// Fix relative child cells\n\t\t\t\t\tfor (var j = 0; j < children.length; j++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar state = this.view.getState(children[j]);\n\t\t\t\t\t\tvar geo = this.getCellGeometry(children[j]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (state != null && geo != null && geo.relative)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\tgeo.x = state.origin.x;\n\t\t\t\t\t\t\tgeo.y = state.origin.y;\n\t\t\t\t\t\t\tgeo.relative = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.model.setGeometry(children[j], geo);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.removeCellsAfterUngroup(cells);\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS, 'cells', cells));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getCellsForUngroup\n * \n * Returns the selection cells that can be ungrouped.\n */\nmxGraph.prototype.getCellsForUngroup = function()\n{\n\tvar cells = this.getSelectionCells();\n\n\t// Finds the cells with children\n\tvar tmp = [];\n\t\n\tfor (var i = 0; i < cells.length; i++)\n\t{\n\t\tif (this.model.isVertex(cells[i]) &&\n\t\t\tthis.model.getChildCount(cells[i]) > 0)\n\t\t{\n\t\t\ttmp.push(cells[i]);\n\t\t}\n\t}\n\n\treturn tmp;\n};\n\n/**\n * Function: removeCellsAfterUngroup\n * \n * Hook to remove the groups after <ungroupCells>.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> that were ungrouped.\n */\nmxGraph.prototype.removeCellsAfterUngroup = function(cells)\n{\n\tthis.cellsRemoved(this.addAllEdges(cells));\n};\n\n/**\n * Function: removeCellsFromParent\n * \n * Removes the specified cells from their parents and adds them to the\n * default parent. Returns the cells that were removed from their parents.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be removed from their parents.\n */\nmxGraph.prototype.removeCellsFromParent = function(cells)\n{\n\tif (cells == null)\n\t{\n\t\tcells = this.getSelectionCells();\n\t}\n\t\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tvar parent = this.getDefaultParent();\n\t\tvar index = this.model.getChildCount(parent);\n\n\t\tthis.cellsAdded(cells, parent, index, null, null, true);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT, 'cells', cells));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: updateGroupBounds\n * \n * Updates the bounds of the given groups to include all children and returns\n * the passed-in cells. Call this with the groups in parent to child order,\n * top-most group first, the cells are processed in reverse order and cells\n * with no children are ignored.\n * \n * Parameters:\n * \n * cells - The groups whose bounds should be updated. If this is null, then\n * the selection cells are used.\n * border - Optional border to be added in the group. Default is 0.\n * moveGroup - Optional boolean that allows the group to be moved. Default\n * is false.\n * topBorder - Optional top border to be added in the group. Default is 0.\n * rightBorder - Optional top border to be added in the group. Default is 0.\n * bottomBorder - Optional top border to be added in the group. Default is 0.\n * leftBorder - Optional top border to be added in the group. Default is 0.\n */\nmxGraph.prototype.updateGroupBounds = function(cells, border, moveGroup, topBorder, rightBorder, bottomBorder, leftBorder)\n{\n\tif (cells == null)\n\t{\n\t\tcells = this.getSelectionCells();\n\t}\n\t\n\tborder = (border != null) ? border : 0;\n\tmoveGroup = (moveGroup != null) ? moveGroup : false;\n\ttopBorder = (topBorder != null) ? topBorder : 0;\n\trightBorder = (rightBorder != null) ? rightBorder : 0;\n\tbottomBorder = (bottomBorder != null) ? bottomBorder : 0;\n\tleftBorder = (leftBorder != null) ? leftBorder : 0;\n\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tfor (var i = cells.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tvar geo = this.getCellGeometry(cells[i]);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tvar children = this.getChildCells(cells[i]);\n\t\t\t\t\n\t\t\t\tif (children != null && children.length > 0)\n\t\t\t\t{\n\t\t\t\t\tvar bounds = this.getBoundingBoxFromGeometry(children, true);\n\t\t\t\t\t\n\t\t\t\t\tif (bounds != null && bounds.width > 0 && bounds.height > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Adds the size of the title area for swimlanes\n\t\t\t\t\t\tvar size = (this.isSwimlane(cells[i])) ?\n\t\t\t\t\t\t\tthis.getActualStartSize(cells[i], true) : new mxRectangle();\n\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (moveGroup)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.x = Math.round(geo.x + bounds.x - border - size.x - leftBorder);\n\t\t\t\t\t\t\tgeo.y = Math.round(geo.y + bounds.y - border - size.y - topBorder);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tgeo.width = Math.round(bounds.width + 2 * border + size.x + leftBorder + rightBorder + size.width);\n\t\t\t\t\t\tgeo.height = Math.round(bounds.height + 2 * border + size.y + topBorder + bottomBorder + size.height);\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.model.setGeometry(cells[i], geo);\n\t\t\t\t\t\tthis.moveCells(children, border + size.x - bounds.x + leftBorder,\n\t\t\t\t\t\t\t\tborder + size.y - bounds.y + topBorder);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: getBoundingBox\n * \n * Returns the bounding box for the given array of <mxCells>. The bounding box for\n * each cell and its descendants is computed using <mxGraphView.getBoundingBox>.\n *\n * Parameters:\n *\n * cells - Array of <mxCells> whose bounding box should be returned.\n */\nmxGraph.prototype.getBoundingBox = function(cells)\n{\n\tvar result = null;\n\t\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (this.model.isVertex(cells[i]) || this.model.isEdge(cells[i]))\n\t\t\t{\n\t\t\t\tvar bbox = this.view.getBoundingBox(this.view.getState(cells[i]), true);\n\t\t\t\n\t\t\t\tif (bbox != null)\n\t\t\t\t{\n\t\t\t\t\tif (result == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = mxRectangle.fromRectangle(bbox);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.add(bbox);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Group: Cell cloning, insertion and removal\n */\n\n/**\n * Function: cloneCell\n * \n * Returns the clone for the given cell. Uses <cloneCells>.\n * \n * Parameters:\n * \n * cell - <mxCell> to be cloned.\n * allowInvalidEdges - Optional boolean that specifies if invalid edges\n * should be cloned. Default is true.\n * mapping - Optional mapping for existing clones.\n * keepPosition - Optional boolean indicating if the position of the cells should\n * be updated to reflect the lost parent cell. Default is false.\n */\nmxGraph.prototype.cloneCell = function(cell, allowInvalidEdges, mapping, keepPosition)\n{\n\treturn this.cloneCells([cell], allowInvalidEdges, mapping, keepPosition)[0];\n};\n\n/**\n * Function: cloneCells\n * \n * Returns the clones for the given cells. The clones are created recursively\n * using <mxGraphModel.cloneCells>. If the terminal of an edge is not in the\n * given array, then the respective end is assigned a terminal point and the\n * terminal is removed.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be cloned.\n * allowInvalidEdges - Optional boolean that specifies if invalid edges\n * should be cloned. Default is true.\n * mapping - Optional mapping for existing clones.\n * keepPosition - Optional boolean indicating if the position of the cells should\n * be updated to reflect the lost parent cell. Default is false.\n */\nmxGraph.prototype.cloneCells = function(cells, allowInvalidEdges, mapping, keepPosition)\n{\n\tallowInvalidEdges = (allowInvalidEdges != null) ? allowInvalidEdges : true;\n\tvar clones = null;\n\t\n\tif (cells != null)\n\t{\n\t\t// Creates a dictionary for fast lookups\n\t\tvar dict = new mxDictionary();\n\t\tvar tmp = [];\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tdict.put(cells[i], true);\n\t\t\ttmp.push(cells[i]);\n\t\t}\n\t\t\n\t\tif (tmp.length > 0)\n\t\t{\n\t\t\tvar scale = this.view.scale;\n\t\t\tvar trans = this.view.translate;\n\t\t\tclones = this.model.cloneCells(cells, true, mapping);\n\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tif (!allowInvalidEdges && this.model.isEdge(clones[i]) &&\n\t\t\t\t\tthis.getEdgeValidationError(clones[i],\n\t\t\t\t\t\tthis.model.getTerminal(clones[i], true),\n\t\t\t\t\t\tthis.model.getTerminal(clones[i], false)) != null)\n\t\t\t\t{\n\t\t\t\t\tclones[i] = null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar g = this.model.getGeometry(clones[i]);\n\t\t\t\t\t\n\t\t\t\t\tif (g != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar state = this.view.getState(cells[i]);\n\t\t\t\t\t\tvar pstate = this.view.getState(this.model.getParent(cells[i]));\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (state != null && pstate != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar dx = (keepPosition) ? 0 : pstate.origin.x;\n\t\t\t\t\t\t\tvar dy = (keepPosition) ? 0 : pstate.origin.y;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (this.model.isEdge(clones[i]))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar pts = state.absolutePoints;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (pts != null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// Checks if the source is cloned or sets the terminal point\n\t\t\t\t\t\t\t\t\tvar src = this.model.getTerminal(cells[i], true);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\twhile (src != null && !dict.get(src))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsrc = this.model.getParent(src);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (src == null && pts[0] != null)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tg.setTerminalPoint(\n\t\t\t\t\t\t\t\t\t\t\tnew mxPoint(pts[0].x / scale - trans.x,\n\t\t\t\t\t\t\t\t\t\t\t\tpts[0].y / scale - trans.y), true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// Checks if the target is cloned or sets the terminal point\n\t\t\t\t\t\t\t\t\tvar trg = this.model.getTerminal(cells[i], false);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\twhile (trg != null && !dict.get(trg))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttrg = this.model.getParent(trg);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar n = pts.length - 1;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (trg == null && pts[n] != null)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tg.setTerminalPoint(\n\t\t\t\t\t\t\t\t\t\t\tnew mxPoint(pts[n].x / scale - trans.x,\n\t\t\t\t\t\t\t\t\t\t\t\tpts[n].y / scale - trans.y), false);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// Translates the control points\n\t\t\t\t\t\t\t\t\tvar points = g.points;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (points != null)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < points.length; j++)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tpoints[j].x += dx;\n\t\t\t\t\t\t\t\t\t\t\tpoints[j].y += dy;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tg.translate(dx, dy);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclones = [];\n\t\t}\n\t}\n\t\n\treturn clones;\n};\n\n/**\n * Function: insertVertex\n * \n * Adds a new vertex into the given parent <mxCell> using value as the user\n * object and the given coordinates as the <mxGeometry> of the new vertex.\n * The id and style are used for the respective properties of the new\n * <mxCell>, which is returned.\n *\n * When adding new vertices from a mouse event, one should take into\n * account the offset of the graph container and the scale and translation\n * of the view in order to find the correct unscaled, untranslated\n * coordinates using <mxGraph.getPointForEvent> as follows:\n * \n * (code)\n * var pt = graph.getPointForEvent(evt);\n * var parent = graph.getDefaultParent();\n * graph.insertVertex(parent, null,\n * \t\t\t'Hello, World!', x, y, 220, 30);\n * (end)\n * \n * For adding image cells, the style parameter can be assigned as\n * \n * (code)\n * stylename;image=imageUrl\n * (end)\n * \n * See <mxGraph> for more information on using images.\n *\n * Parameters:\n * \n * parent - <mxCell> that specifies the parent of the new vertex.\n * id - Optional string that defines the Id of the new vertex.\n * value - Object to be used as the user object.\n * x - Integer that defines the x coordinate of the vertex.\n * y - Integer that defines the y coordinate of the vertex.\n * width - Integer that defines the width of the vertex.\n * height - Integer that defines the height of the vertex.\n * style - Optional string that defines the cell style.\n * relative - Optional boolean that specifies if the geometry is relative.\n * Default is false.\n */\nmxGraph.prototype.insertVertex = function(parent, id, value,\n\tx, y, width, height, style, relative)\n{\n\tvar vertex = this.createVertex(parent, id, value, x, y, width, height, style, relative);\n\n\treturn this.addCell(vertex, parent);\n};\n\n/**\n * Function: createVertex\n * \n * Hook method that creates the new vertex for <insertVertex>.\n */\nmxGraph.prototype.createVertex = function(parent, id, value,\n\t\tx, y, width, height, style, relative)\n{\n\t// Creates the geometry for the vertex\n\tvar geometry = new mxGeometry(x, y, width, height);\n\tgeometry.relative = (relative != null) ? relative : false;\n\t\n\t// Creates the vertex\n\tvar vertex = new mxCell(value, geometry, style);\n\tvertex.setId(id);\n\tvertex.setVertex(true);\n\tvertex.setConnectable(true);\n\t\n\treturn vertex;\n};\n\t\n/**\n * Function: insertEdge\n * \n * Adds a new edge into the given parent <mxCell> using value as the user\n * object and the given source and target as the terminals of the new edge.\n * The id and style are used for the respective properties of the new\n * <mxCell>, which is returned.\n *\n * Parameters:\n * \n * parent - <mxCell> that specifies the parent of the new edge.\n * id - Optional string that defines the Id of the new edge.\n * value - JavaScript object to be used as the user object.\n * source - <mxCell> that defines the source of the edge.\n * target - <mxCell> that defines the target of the edge.\n * style - Optional string that defines the cell style.\n */\nmxGraph.prototype.insertEdge = function(parent, id, value, source, target, style)\n{\n\tvar edge = this.createEdge(parent, id, value, source, target, style);\n\t\n\treturn this.addEdge(edge, parent, source, target);\n};\n\n/**\n * Function: createEdge\n * \n * Hook method that creates the new edge for <insertEdge>. This\n * implementation does not set the source and target of the edge, these\n * are set when the edge is added to the model.\n * \n */\nmxGraph.prototype.createEdge = function(parent, id, value, source, target, style)\n{\n\t// Creates the edge\n\tvar edge = new mxCell(value, new mxGeometry(), style);\n\tedge.setId(id);\n\tedge.setEdge(true);\n\tedge.geometry.relative = true;\n\t\n\treturn edge;\n};\n\n/**\n * Function: addEdge\n * \n * Adds the edge to the parent and connects it to the given source and\n * target terminals. This is a shortcut method. Returns the edge that was\n * added.\n * \n * Parameters:\n * \n * edge - <mxCell> to be inserted into the given parent.\n * parent - <mxCell> that represents the new parent. If no parent is\n * given then the default parent is used.\n * source - Optional <mxCell> that represents the source terminal.\n * target - Optional <mxCell> that represents the target terminal.\n * index - Optional index to insert the cells at. Default is to append.\n */\nmxGraph.prototype.addEdge = function(edge, parent, source, target, index)\n{\n\treturn this.addCell(edge, parent, index, source, target);\n};\n\n/**\n * Function: addCell\n * \n * Adds the cell to the parent and connects it to the given source and\n * target terminals. This is a shortcut method. Returns the cell that was\n * added.\n * \n * Parameters:\n * \n * cell - <mxCell> to be inserted into the given parent.\n * parent - <mxCell> that represents the new parent. If no parent is\n * given then the default parent is used.\n * index - Optional index to insert the cells at. Default is to append.\n * source - Optional <mxCell> that represents the source terminal.\n * target - Optional <mxCell> that represents the target terminal.\n */\nmxGraph.prototype.addCell = function(cell, parent, index, source, target)\n{\n\treturn this.addCells([cell], parent, index, source, target)[0];\n};\n\n/**\n * Function: addCells\n * \n * Adds the cells to the parent at the given index, connecting each cell to\n * the optional source and target terminal. The change is carried out using\n * <cellsAdded>. This method fires <mxEvent.ADD_CELLS> while the\n * transaction is in progress. Returns the cells that were added.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be inserted.\n * parent - <mxCell> that represents the new parent. If no parent is\n * given then the default parent is used.\n * index - Optional index to insert the cells at. Default is to append.\n * source - Optional source <mxCell> for all inserted cells.\n * target - Optional target <mxCell> for all inserted cells.\n * absolute - Optional boolean indicating of cells should be kept at\n * their absolute position. Default is false.\n */\nmxGraph.prototype.addCells = function(cells, parent, index, source, target, absolute)\n{\n\tif (parent == null)\n\t{\n\t\tparent = this.getDefaultParent();\n\t}\n\t\n\tif (index == null)\n\t{\n\t\tindex = this.model.getChildCount(parent);\n\t}\n\t\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tthis.cellsAdded(cells, parent, index, source, target, (absolute != null) ? absolute : false, true);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.ADD_CELLS, 'cells', cells,\n\t\t\t\t'parent', parent, 'index', index, 'source', source, 'target', target));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: cellsAdded\n * \n * Adds the specified cells to the given parent. This method fires\n * <mxEvent.CELLS_ADDED> while the transaction is in progress.\n */\nmxGraph.prototype.cellsAdded = function(cells, parent, index, source, target, absolute, constrain, extend)\n{\n\tif (cells != null && parent != null && index != null)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tvar parentState = (absolute) ? this.view.getState(parent) : null;\n\t\t\tvar o1 = (parentState != null) ? parentState.origin : null;\n\t\t\tvar zero = new mxPoint(0, 0);\n\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tif (cells[i] == null)\n\t\t\t\t{\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar previous = this.model.getParent(cells[i]);\n\t\n\t\t\t\t\t// Keeps the cell at its absolute location\n\t\t\t\t\tif (o1 != null && cells[i] != parent && parent != previous)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar oldState = this.view.getState(previous);\n\t\t\t\t\t\tvar o2 = (oldState != null) ? oldState.origin : zero;\n\t\t\t\t\t\tvar geo = this.model.getGeometry(cells[i]);\n\t\n\t\t\t\t\t\tif (geo != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar dx = o2.x - o1.x;\n\t\t\t\t\t\t\tvar dy = o2.y - o1.y;\n\t\n\t\t\t\t\t\t\t// FIXME: Cells should always be inserted first before any other edit\n\t\t\t\t\t\t\t// to avoid forward references in sessions.\n\t\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\tgeo.translate(dx, dy);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (!geo.relative && this.model.isVertex(cells[i]) &&\n\t\t\t\t\t\t\t\t!this.isAllowNegativeCoordinates())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.x = Math.max(0, geo.x);\n\t\t\t\t\t\t\t\tgeo.y = Math.max(0, geo.y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.model.setGeometry(cells[i], geo);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Decrements all following indices\n\t\t\t\t\t// if cell is already in parent\n\t\t\t\t\tif (parent == previous && index + i > this.model.getChildCount(parent))\n\t\t\t\t\t{\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.model.add(parent, cells[i], index + i);\n\t\t\t\t\t\n\t\t\t\t\tif (this.autoSizeCellsOnAdd)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.autoSizeCell(cells[i], true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Extends the parent or constrains the child\n\t\t\t\t\tif ((extend == null || extend) &&\n\t\t\t\t\t\tthis.isExtendParentsOnAdd(cells[i]) && this.isExtendParent(cells[i]))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.extendParent(cells[i]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Additionally constrains the child after extending the parent\n\t\t\t\t\tif (constrain == null || constrain)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.constrainChild(cells[i]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Sets the source terminal\n\t\t\t\t\tif (source != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.cellConnected(cells[i], source, true);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Sets the target terminal\n\t\t\t\t\tif (target != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.cellConnected(cells[i], target, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED, 'cells', cells,\n\t\t\t\t'parent', parent, 'index', index, 'source', source, 'target', target,\n\t\t\t\t'absolute', absolute));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: autoSizeCell\n * \n * Resizes the specified cell to just fit around the its label and/or children\n * \n * Parameters:\n * \n * cell - <mxCells> to be resized.\n * recurse - Optional boolean which specifies if all descendants should be\n * autosized. Default is true.\n */\nmxGraph.prototype.autoSizeCell = function(cell, recurse)\n{\n\trecurse = (recurse != null) ? recurse : true;\n\t\n\tif (recurse)\n\t{\n\t\tvar childCount = this.model.getChildCount(cell);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tthis.autoSizeCell(this.model.getChildAt(cell, i));\n\t\t}\n\t}\n\n\tif (this.getModel().isVertex(cell) && this.isAutoSizeCell(cell))\n\t{\n\t\tthis.updateCellSize(cell);\n\t}\n};\n\n/**\n * Function: removeCells\n * \n * Removes the given cells from the graph including all connected edges if\n * includeEdges is true. The change is carried out using <cellsRemoved>.\n * This method fires <mxEvent.REMOVE_CELLS> while the transaction is in\n * progress. The removed cells are returned as an array.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to remove. If null is specified then the\n * selection cells which are deletable are used.\n * includeEdges - Optional boolean which specifies if all connected edges\n * should be removed as well. Default is true.\n */\nmxGraph.prototype.removeCells = function(cells, includeEdges)\n{\n\tincludeEdges = (includeEdges != null) ? includeEdges : true;\n\t\n\tif (cells == null)\n\t{\n\t\tcells = this.getDeletableCells(this.getSelectionCells());\n\t}\n\n\t// Adds all edges to the cells\n\tif (includeEdges)\n\t{\n\t\t// FIXME: Remove duplicate cells in result or do not add if\n\t\t// in cells or descendant of cells\n\t\tcells = this.getDeletableCells(this.addAllEdges(cells));\n\t}\n\telse\n\t{\n\t\tcells = cells.slice();\n\t\t\n\t\t// Removes edges that are currently not\n\t\t// visible as those cannot be updated\n\t\tvar edges = this.getDeletableCells(this.getAllEdges(cells));\n\t\tvar dict = new mxDictionary();\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tdict.put(cells[i], true);\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < edges.length; i++)\n\t\t{\n\t\t\tif (this.view.getState(edges[i]) == null &&\n\t\t\t\t!dict.get(edges[i]))\n\t\t\t{\n\t\t\t\tdict.put(edges[i], true);\n\t\t\t\tcells.push(edges[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tthis.cellsRemoved(cells);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS, \n\t\t\t\t'cells', cells, 'includeEdges', includeEdges));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\t\n\treturn cells;\n};\n\n/**\n * Function: cellsRemoved\n * \n * Removes the given cells from the model. This method fires\n * <mxEvent.CELLS_REMOVED> while the transaction is in progress.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to remove.\n */\nmxGraph.prototype.cellsRemoved = function(cells)\n{\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tvar scale = this.view.scale;\n\t\tvar tr = this.view.translate;\n\t\t\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\t// Creates hashtable for faster lookup\n\t\t\tvar dict = new mxDictionary();\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tdict.put(cells[i], true);\n\t\t\t}\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\t// Disconnects edges which are not being removed\n\t\t\t\tvar edges = this.getAllEdges([cells[i]]);\n\t\t\t\t\n\t\t\t\tvar disconnectTerminal = mxUtils.bind(this, function(edge, source)\n\t\t\t\t{\n\t\t\t\t\tvar geo = this.model.getGeometry(edge);\n\n\t\t\t\t\tif (geo != null)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Checks if terminal is being removed\n\t\t\t\t\t\tvar terminal = this.model.getTerminal(edge, source);\n\t\t\t\t\t\tvar connected = false;\n\t\t\t\t\t\tvar tmp = terminal;\n\t\t\t\t\t\t\n\t\t\t\t\t\twhile (tmp != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (cells[i] == tmp)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconnected = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttmp = this.model.getParent(tmp);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (connected)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\tvar state = this.view.getState(edge);\n\n\t\t\t\t\t\t\tif (state != null && state.absolutePoints != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar pts = state.absolutePoints;\n\t\t\t\t\t\t\t\tvar n = (source) ? 0 : pts.length - 1;\n\n\t\t\t\t\t\t\t\tgeo.setTerminalPoint(new mxPoint(\n\t\t\t\t\t\t\t\t\tpts[n].x / scale - tr.x - state.origin.x,\n\t\t\t\t\t\t\t\t\tpts[n].y / scale - tr.y - state.origin.y), source);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// Fallback to center of terminal if routing\n\t\t\t\t\t\t\t\t// points are not available to add new point\n\t\t\t\t\t\t\t\t// KNOWN: Should recurse to find parent offset\n\t\t\t\t\t\t\t\t// of edge for nested groups but invisible edges\n\t\t\t\t\t\t\t\t// should be removed in removeCells step\n\t\t\t\t\t\t\t\tvar tstate = this.view.getState(terminal);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (tstate != null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tgeo.setTerminalPoint(new mxPoint(\n\t\t\t\t\t\t\t\t\t\ttstate.getCenterX() / scale - tr.x,\n\t\t\t\t\t\t\t\t\t\ttstate.getCenterY() / scale - tr.y), source);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.model.setGeometry(edge, geo);\n\t\t\t\t\t\t\tthis.model.setTerminal(edge, null, source);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tfor (var j = 0; j < edges.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (!dict.get(edges[j]))\n\t\t\t\t\t{\n\t\t\t\t\t\tdict.put(edges[j], true);\n\t\t\t\t\t\tdisconnectTerminal(edges[j], true);\n\t\t\t\t\t\tdisconnectTerminal(edges[j], false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.model.remove(cells[i]);\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED, 'cells', cells));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: splitEdge\n * \n * Splits the given edge by adding the newEdge between the previous source\n * and the given cell and reconnecting the source of the given edge to the\n * given cell. This method fires <mxEvent.SPLIT_EDGE> while the transaction\n * is in progress. Returns the new edge that was inserted.\n * \n * Parameters:\n * \n * edge - <mxCell> that represents the edge to be splitted.\n * cells - <mxCells> that represents the cells to insert into the edge.\n * newEdge - <mxCell> that represents the edge to be inserted.\n * dx - Optional integer that specifies the vector to move the cells.\n * dy - Optional integer that specifies the vector to move the cells.\n * x - Integer that specifies the x-coordinate of the drop location.\n * y - Integer that specifies the y-coordinate of the drop location.\n * parent - Optional parent to insert the cell. If null the parent of\n * the edge is used.\n */\nmxGraph.prototype.splitEdge = function(edge, cells, newEdge, dx, dy, x, y, parent)\n{\n\tdx = dx || 0;\n\tdy = dy || 0;\n\n\tparent = (parent != null) ? parent : this.model.getParent(edge);\n\tvar source = this.model.getTerminal(edge, true);\n\t\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tif (newEdge == null)\n\t\t{\n\t\t\tnewEdge = this.cloneCell(edge);\n\t\t\t\n\t\t\t// Removes waypoints before/after new cell\n\t\t\tvar state = this.view.getState(edge);\n\t\t\tvar geo = this.getCellGeometry(newEdge);\n\t\t\t\n\t\t\tif (geo != null && geo.points != null && state != null)\n\t\t\t{\n\t\t\t\tvar t = this.view.translate;\n\t\t\t\tvar s = this.view.scale;\n\t\t\t\tvar idx = mxUtils.findNearestSegment(state, (dx + t.x) * s, (dy + t.y) * s);\n\t\t\t\tgeo.points = geo.points.slice(0, idx);\n\t\t\t\t\t\t\t\t\n\t\t\t\tgeo = this.getCellGeometry(edge);\n\t\t\t\t\n\t\t\t\tif (geo != null && geo.points != null)\n\t\t\t\t{\n\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\tgeo.points = geo.points.slice(idx);\n\t\t\t\t\tthis.model.setGeometry(edge, geo);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.cellsMoved(cells, dx, dy, false, false);\n\t\tthis.cellsAdded(cells, parent, this.model.getChildCount(parent), null, null,\n\t\t\t\ttrue);\n\t\tthis.cellsAdded([newEdge], parent, this.model.getChildCount(parent),\n\t\t\t\tsource, cells[0], false);\n\t\tthis.cellConnected(edge, cells[0], true);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE, 'edge', edge,\n\t\t\t\t'cells', cells, 'newEdge', newEdge, 'dx', dx, 'dy', dy));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn newEdge;\n};\n\n/**\n * Group: Cell visibility\n */\n\n/**\n * Function: toggleCells\n * \n * Sets the visible state of the specified cells and all connected edges\n * if includeEdges is true. The change is carried out using <cellsToggled>.\n * This method fires <mxEvent.TOGGLE_CELLS> while the transaction is in\n * progress. Returns the cells whose visible state was changed.\n * \n * Parameters:\n * \n * show - Boolean that specifies the visible state to be assigned.\n * cells - Array of <mxCells> whose visible state should be changed. If\n * null is specified then the selection cells are used.\n * includeEdges - Optional boolean indicating if the visible state of all\n * connected edges should be changed as well. Default is true.\n */\nmxGraph.prototype.toggleCells = function(show, cells, includeEdges)\n{\n\tif (cells == null)\n\t{\n\t\tcells = this.getSelectionCells();\n\t}\n\n\t// Adds all connected edges recursively\n\tif (includeEdges)\n\t{\n\t\tcells = this.addAllEdges(cells);\n\t}\n\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tthis.cellsToggled(cells, show);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,\n\t\t\t'show', show, 'cells', cells, 'includeEdges', includeEdges));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: cellsToggled\n * \n * Sets the visible state of the specified cells.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose visible state should be changed.\n * show - Boolean that specifies the visible state to be assigned.\n */\nmxGraph.prototype.cellsToggled = function(cells, show)\n{\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tthis.model.setVisible(cells[i], show);\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Group: Folding\n */\n\n/**\n * Function: foldCells\n * \n * Sets the collapsed state of the specified cells and all descendants\n * if recurse is true. The change is carried out using <cellsFolded>.\n * This method fires <mxEvent.FOLD_CELLS> while the transaction is in\n * progress. Returns the cells whose collapsed state was changed.\n * \n * Parameters:\n * \n * collapsed - Boolean indicating the collapsed state to be assigned.\n * recurse - Optional boolean indicating if the collapsed state of all\n * descendants should be set. Default is false.\n * cells - Array of <mxCells> whose collapsed state should be set. If\n * null is specified then the foldable selection cells are used.\n * checkFoldable - Optional boolean indicating of isCellFoldable should be\n * checked. Default is false.\n * evt - Optional native event that triggered the invocation.\n */\nmxGraph.prototype.foldCells = function(collapse, recurse, cells, checkFoldable, evt)\n{\n\trecurse = (recurse != null) ? recurse : false;\n\t\n\tif (cells == null)\n\t{\n\t\tcells = this.getFoldableCells(this.getSelectionCells(), collapse);\n\t}\n\n\tthis.stopEditing(false);\n\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tthis.cellsFolded(cells, collapse, recurse, checkFoldable);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,\n\t\t\t'collapse', collapse, 'recurse', recurse, 'cells', cells));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: cellsFolded\n * \n * Sets the collapsed state of the specified cells. This method fires\n * <mxEvent.CELLS_FOLDED> while the transaction is in progress. Returns the\n * cells whose collapsed state was changed.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose collapsed state should be set.\n * collapsed - Boolean indicating the collapsed state to be assigned.\n * recurse - Boolean indicating if the collapsed state of all descendants\n * should be set.\n * checkFoldable - Optional boolean indicating of isCellFoldable should be\n * checked. Default is false.\n */\nmxGraph.prototype.cellsFolded = function(cells, collapse, recurse, checkFoldable)\n{\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tif ((!checkFoldable || this.isCellFoldable(cells[i], collapse)) &&\n\t\t\t\t\tcollapse != this.isCellCollapsed(cells[i]))\n\t\t\t\t{\n\t\t\t\t\tthis.model.setCollapsed(cells[i], collapse);\n\t\t\t\t\tthis.swapBounds(cells[i], collapse);\n\n\t\t\t\t\tif (this.isExtendParent(cells[i]))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.extendParent(cells[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (recurse)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar children = this.model.getChildren(cells[i]);\n\t\t\t\t\t\tthis.cellsFolded(children, collapse, recurse);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.constrainChild(cells[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,\n\t\t\t\t'cells', cells, 'collapse', collapse, 'recurse', recurse));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: swapBounds\n * \n * Swaps the alternate and the actual bounds in the geometry of the given\n * cell invoking <updateAlternateBounds> before carrying out the swap.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the bounds should be swapped.\n * willCollapse - Boolean indicating if the cell is going to be collapsed.\n */\nmxGraph.prototype.swapBounds = function(cell, willCollapse)\n{\n\tif (cell != null)\n\t{\n\t\tvar geo = this.model.getGeometry(cell);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tgeo = geo.clone();\n\t\t\t\n\t\t\tthis.updateAlternateBounds(cell, geo, willCollapse);\n\t\t\tgeo.swap();\n\t\t\t\n\t\t\tthis.model.setGeometry(cell, geo);\n\t\t}\n\t}\n};\n\n/**\n * Function: updateAlternateBounds\n * \n * Updates or sets the alternate bounds in the given geometry for the given\n * cell depending on whether the cell is going to be collapsed. If no\n * alternate bounds are defined in the geometry and\n * <collapseToPreferredSize> is true, then the preferred size is used for\n * the alternate bounds. The top, left corner is always kept at the same\n * location.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the geometry is being udpated.\n * g - <mxGeometry> for which the alternate bounds should be updated.\n * willCollapse - Boolean indicating if the cell is going to be collapsed.\n */\nmxGraph.prototype.updateAlternateBounds = function(cell, geo, willCollapse)\n{\n\tif (cell != null && geo != null)\n\t{\n\t\tvar style = this.getCurrentCellStyle(cell);\n\n\t\tif (geo.alternateBounds == null)\n\t\t{\n\t\t\tvar bounds = geo;\n\t\t\t\n\t\t\tif (this.collapseToPreferredSize)\n\t\t\t{\n\t\t\t\tvar tmp = this.getPreferredSizeForCell(cell);\n\t\t\t\t\n\t\t\t\tif (tmp != null)\n\t\t\t\t{\n\t\t\t\t\tbounds = tmp;\n\n\t\t\t\t\tvar startSize = mxUtils.getValue(style, mxConstants.STYLE_STARTSIZE);\n\n\t\t\t\t\tif (startSize > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tbounds.height = Math.max(bounds.height, startSize);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tgeo.alternateBounds = new mxRectangle(0, 0, bounds.width, bounds.height);\n\t\t}\n\t\t\n\t\tif (geo.alternateBounds != null)\n\t\t{\n\t\t\tgeo.alternateBounds.x = geo.x;\n\t\t\tgeo.alternateBounds.y = geo.y;\n\t\t\t\n\t\t\tvar alpha = mxUtils.toRadians(style[mxConstants.STYLE_ROTATION] || 0);\n\t\t\t\n\t\t\tif (alpha != 0)\n\t\t\t{\n\t\t\t\tvar dx = geo.alternateBounds.getCenterX() - geo.getCenterX();\n\t\t\t\tvar dy = geo.alternateBounds.getCenterY() - geo.getCenterY();\n\t\n\t\t\t\tvar cos = Math.cos(alpha);\n\t\t\t\tvar sin = Math.sin(alpha);\n\t\n\t\t\t\tvar dx2 = cos * dx - sin * dy;\n\t\t\t\tvar dy2 = sin * dx + cos * dy;\n\t\t\t\t\n\t\t\t\tgeo.alternateBounds.x += dx2 - dx;\n\t\t\t\tgeo.alternateBounds.y += dy2 - dy;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: addAllEdges\n * \n * Returns an array with the given cells and all edges that are connected\n * to a cell or one of its descendants.\n */\nmxGraph.prototype.addAllEdges = function(cells)\n{\n\tvar allCells = cells.slice();\n\t\n\treturn mxUtils.removeDuplicates(allCells.concat(this.getAllEdges(cells)));\n};\n\n/**\n * Function: getAllEdges\n * \n * Returns all edges connected to the given cells or its descendants.\n */\nmxGraph.prototype.getAllEdges = function(cells)\n{\n\tvar edges = [];\n\t\n\tif (cells != null)\n\t{\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tvar edgeCount = this.model.getEdgeCount(cells[i]);\n\t\t\t\n\t\t\tfor (var j = 0; j < edgeCount; j++)\n\t\t\t{\n\t\t\t\tedges.push(this.model.getEdgeAt(cells[i], j));\n\t\t\t}\n\n\t\t\t// Recurses\n\t\t\tvar children = this.model.getChildren(cells[i]);\n\t\t\tedges = edges.concat(this.getAllEdges(children));\n\t\t}\n\t}\n\t\n\treturn edges;\n};\n\n/**\n * Group: Cell sizing\n */\n\n/**\n * Function: updateCellSize\n * \n * Updates the size of the given cell in the model using <cellSizeUpdated>.\n * This method fires <mxEvent.UPDATE_CELL_SIZE> while the transaction is in\n * progress. Returns the cell whose size was updated.\n * \n * Parameters:\n * \n * cell - <mxCell> whose size should be updated.\n */\nmxGraph.prototype.updateCellSize = function(cell, ignoreChildren)\n{\n\tignoreChildren = (ignoreChildren != null) ? ignoreChildren : false;\n\t\n\tthis.model.beginUpdate();\t\t\t\t\n\ttry\n\t{\n\t\tthis.cellSizeUpdated(cell, ignoreChildren);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,\n\t\t\t\t'cell', cell, 'ignoreChildren', ignoreChildren));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\t\n\treturn cell;\n};\n\n/**\n * Function: cellSizeUpdated\n * \n * Updates the size of the given cell in the model using\n * <getPreferredSizeForCell> to get the new size.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the size should be changed.\n */\nmxGraph.prototype.cellSizeUpdated = function(cell, ignoreChildren)\n{\n\tif (cell != null)\n\t{\n\t\tthis.model.beginUpdate();\t\t\t\t\n\t\ttry\n\t\t{\n\t\t\tvar size = this.getPreferredSizeForCell(cell);\n\t\t\tvar geo = this.model.getGeometry(cell);\n\t\t\t\n\t\t\tif (size != null && geo != null)\n\t\t\t{\n\t\t\t\tvar collapsed = this.isCellCollapsed(cell);\n\t\t\t\tgeo = geo.clone();\n\n\t\t\t\tif (this.isSwimlane(cell))\n\t\t\t\t{\n\t\t\t\t\tvar style = this.getCellStyle(cell);\n\t\t\t\t\tvar cellStyle = this.model.getStyle(cell);\n\n\t\t\t\t\tif (cellStyle == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tcellStyle = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (mxUtils.getValue(style, mxConstants.STYLE_HORIZONTAL, true))\n\t\t\t\t\t{\n\t\t\t\t\t\tcellStyle = mxUtils.setStyle(cellStyle,\n\t\t\t\t\t\t\t\tmxConstants.STYLE_STARTSIZE, size.height + 8);\n\n\t\t\t\t\t\tif (collapsed)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.height = size.height + 8;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeo.width = size.width;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcellStyle = mxUtils.setStyle(cellStyle,\n\t\t\t\t\t\t\t\tmxConstants.STYLE_STARTSIZE, size.width + 8);\n\n\t\t\t\t\t\tif (collapsed)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.width = size.width + 8;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeo.height = size.height;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.model.setStyle(cell, cellStyle);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar state = this.view.createState(cell);\n\t\t\t\t\tvar align = (state.style[mxConstants.STYLE_ALIGN] || mxConstants.ALIGN_CENTER);\n\t\t\t\t\t\n\t\t\t\t\tif (align == mxConstants.ALIGN_RIGHT)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.x += geo.width - size.width;\n\t\t\t\t\t}\n\t\t\t\t\telse if (align == mxConstants.ALIGN_CENTER)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.x += Math.round((geo.width - size.width) / 2);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar valign = this.getVerticalAlign(state);\n\t\t\t\t\t\n\t\t\t\t\tif (valign == mxConstants.ALIGN_BOTTOM)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.y += geo.height - size.height;\n\t\t\t\t\t}\n\t\t\t\t\telse if (valign == mxConstants.ALIGN_MIDDLE)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.y += Math.round((geo.height - size.height) / 2);\n\t\t\t\t\t}\n\n\t\t\t\t\tgeo.width = size.width;\n\t\t\t\t\tgeo.height = size.height;\n\t\t\t\t}\n\n\t\t\t\tif (!ignoreChildren && !collapsed)\n\t\t\t\t{\n\t\t\t\t\tvar bounds = this.view.getBounds(this.model.getChildren(cell));\n\n\t\t\t\t\tif (bounds != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tr = this.view.translate;\n\t\t\t\t\t\tvar scale = this.view.scale;\n\n\t\t\t\t\t\tvar width = (bounds.x + bounds.width) / scale - geo.x - tr.x;\n\t\t\t\t\t\tvar height = (bounds.y + bounds.height) / scale - geo.y - tr.y;\n\n\t\t\t\t\t\tgeo.width = Math.max(geo.width, width);\n\t\t\t\t\t\tgeo.height = Math.max(geo.height, height);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.cellsResized([cell], [geo], false);\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: getPreferredSizeForCell\n * \n * Returns the preferred width and height of the given <mxCell> as an\n * <mxRectangle>. To implement a minimum width, add a new style eg.\n * minWidth in the vertex and override this method as follows.\n * \n * (code)\n * var graphGetPreferredSizeForCell = graph.getPreferredSizeForCell;\n * graph.getPreferredSizeForCell = function(cell)\n * {\n *   var result = graphGetPreferredSizeForCell.apply(this, arguments);\n *   var style = this.getCellStyle(cell);\n *   \n *   if (style['minWidth'] > 0)\n *   {\n *     result.width = Math.max(style['minWidth'], result.width);\n *   }\n * \n *   return result;\n * };\n * (end)\n * \n * Parameters:\n * \n * cell - <mxCell> for which the preferred size should be returned.\n * textWidth - Optional maximum text width for word wrapping.\n */\nmxGraph.prototype.getPreferredSizeForCell = function(cell, textWidth)\n{\n\tvar result = null;\n\t\n\tif (cell != null)\n\t{\n\t\tvar state = this.view.createState(cell);\n\t\tvar style = state.style;\n\n\t\tif (!this.model.isEdge(cell))\n\t\t{\n\t\t\tvar fontSize = style[mxConstants.STYLE_FONTSIZE] || mxConstants.DEFAULT_FONTSIZE;\n\t\t\tvar dx = 0;\n\t\t\tvar dy = 0;\n\t\t\t\n\t\t\t// Adds dimension of image if shape is a label\n\t\t\tif (this.getImage(state) != null || style[mxConstants.STYLE_IMAGE] != null)\n\t\t\t{\n\t\t\t\tif (style[mxConstants.STYLE_SHAPE] == mxConstants.SHAPE_LABEL)\n\t\t\t\t{\n\t\t\t\t\tif (style[mxConstants.STYLE_VERTICAL_ALIGN] == mxConstants.ALIGN_MIDDLE)\n\t\t\t\t\t{\n\t\t\t\t\t\tdx += parseFloat(style[mxConstants.STYLE_IMAGE_WIDTH]) || mxLabel.prototype.imageSize;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (style[mxConstants.STYLE_ALIGN] != mxConstants.ALIGN_CENTER)\n\t\t\t\t\t{\n\t\t\t\t\t\tdy += parseFloat(style[mxConstants.STYLE_IMAGE_HEIGHT]) || mxLabel.prototype.imageSize;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Adds spacings\n\t\t\tdx += 2 * (style[mxConstants.STYLE_SPACING] || 0);\n\t\t\tdx += style[mxConstants.STYLE_SPACING_LEFT] || 0;\n\t\t\tdx += style[mxConstants.STYLE_SPACING_RIGHT] || 0;\n\n\t\t\tdy += 2 * (style[mxConstants.STYLE_SPACING] || 0);\n\t\t\tdy += style[mxConstants.STYLE_SPACING_TOP] || 0;\n\t\t\tdy += style[mxConstants.STYLE_SPACING_BOTTOM] || 0;\n\t\t\t\n\t\t\t// Add spacing for collapse/expand icon\n\t\t\t// LATER: Check alignment and use constants\n\t\t\t// for image spacing\n\t\t\tvar image = this.getFoldingImage(state);\n\t\t\t\n\t\t\tif (image != null)\n\t\t\t{\n\t\t\t\tdx += image.width + 8;\n\t\t\t}\n\n\t\t\t// Adds space for label\n\t\t\tvar value = this.cellRenderer.getLabelValue(state);\n\n\t\t\tif (value != null && value.length > 0)\n\t\t\t{\n\t\t\t\tif (!this.isHtmlLabel(state.cell))\n\t\t\t\t{\n\t\t\t\t\tvalue = mxUtils.htmlEntities(value, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvalue = value.replace(/\\n/g, '<br>');\n\t\t\t\t\n\t\t\t\tvar size = mxUtils.getSizeForString(value, fontSize,\n\t\t\t\t\tstyle[mxConstants.STYLE_FONTFAMILY], textWidth,\n\t\t\t\t\tstyle[mxConstants.STYLE_FONTSTYLE]);\n\t\t\t\tvar width = size.width + dx;\n\t\t\t\tvar height = size.height + dy;\n\t\t\t\t\n\t\t\t\tif (!mxUtils.getValue(style, mxConstants.STYLE_HORIZONTAL, true))\n\t\t\t\t{\n\t\t\t\t\tvar tmp = height;\n\t\t\t\t\t\n\t\t\t\t\theight = width;\n\t\t\t\t\twidth = tmp;\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif (this.gridEnabled)\n\t\t\t\t{\n\t\t\t\t\twidth = this.snap(width + this.gridSize / 2);\n\t\t\t\t\theight = this.snap(height + this.gridSize / 2);\n\t\t\t\t}\n\n\t\t\t\tresult = new mxRectangle(0, 0, width, height);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar gs2 = 4 * this.gridSize;\n\t\t\t\tresult = new mxRectangle(0, 0, gs2, gs2);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: resizeCell\n * \n * Sets the bounds of the given cell using <resizeCells>. Returns the\n * cell which was passed to the function.\n * \n * Parameters:\n * \n * cell - <mxCell> whose bounds should be changed.\n * bounds - <mxRectangle> that represents the new bounds.\n */\nmxGraph.prototype.resizeCell = function(cell, bounds, recurse)\n{\n\treturn this.resizeCells([cell], [bounds], recurse)[0];\n};\n\n/**\n * Function: resizeCells\n * \n * Sets the bounds of the given cells and fires a <mxEvent.RESIZE_CELLS>\n * event while the transaction is in progress. Returns the cells which\n * have been passed to the function.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose bounds should be changed.\n * bounds - Array of <mxRectangles> that represent the new bounds.\n */\nmxGraph.prototype.resizeCells = function(cells, bounds, recurse)\n{\n\trecurse = (recurse != null) ? recurse : this.isRecursiveResize();\n\t\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tvar prev = this.cellsResized(cells, bounds, recurse);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,\n\t\t\t'cells', cells, 'bounds', bounds, 'previous', prev));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: cellsResized\n * \n * Sets the bounds of the given cells and fires a <mxEvent.CELLS_RESIZED>\n * event. If <extendParents> is true, then the parent is extended if a\n * child size is changed so that it overlaps with the parent.\n * \n * The following example shows how to control group resizes to make sure\n * that all child cells stay within the group.\n * \n * (code)\n * graph.addListener(mxEvent.CELLS_RESIZED, function(sender, evt)\n * {\n *   var cells = evt.getProperty('cells');\n *   \n *   if (cells != null)\n *   {\n *     for (var i = 0; i < cells.length; i++)\n *     {\n *       if (graph.getModel().getChildCount(cells[i]) > 0)\n *       {\n *         var geo = graph.getCellGeometry(cells[i]);\n *         \n *         if (geo != null)\n *         {\n *           var children = graph.getChildCells(cells[i], true, true);\n *           var bounds = graph.getBoundingBoxFromGeometry(children, true);\n *           \n *           geo = geo.clone();\n *           geo.width = Math.max(geo.width, bounds.width);\n *           geo.height = Math.max(geo.height, bounds.height);\n *           \n *           graph.getModel().setGeometry(cells[i], geo);\n *         }\n *       }\n *     }\n *   }\n * });\n * (end)\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose bounds should be changed.\n * bounds - Array of <mxRectangles> that represent the new bounds.\n * recurse - Optional boolean that specifies if the children should be resized.\n */\nmxGraph.prototype.cellsResized = function(cells, bounds, recurse)\n{\n\trecurse = (recurse != null) ? recurse : false;\n\tvar prev = [];\n\n\tif (cells != null && bounds != null && cells.length == bounds.length)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tprev.push(this.cellResized(cells[i], bounds[i], false, recurse));\n\n\t\t\t\tif (this.isExtendParent(cells[i]))\n\t\t\t\t{\n\t\t\t\t\tthis.extendParent(cells[i]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.constrainChild(cells[i]);\n\t\t\t}\n\n\t\t\tif (this.resetEdgesOnResize)\n\t\t\t{\n\t\t\t\tthis.resetEdges(cells);\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,\n\t\t\t\t'cells', cells, 'bounds', bounds, 'previous', prev));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n\t\n\treturn prev;\n};\n\n/**\n * Function: cellResized\n * \n * Resizes the parents recursively so that they contain the complete area\n * of the resized child cell.\n * \n * Parameters:\n * \n * cell - <mxCell> whose bounds should be changed.\n * bounds - <mxRectangles> that represent the new bounds.\n * ignoreRelative - Boolean that indicates if relative cells should be ignored.\n * recurse - Optional boolean that specifies if the children should be resized.\n */\nmxGraph.prototype.cellResized = function(cell, bounds, ignoreRelative, recurse)\n{\n\tvar prev = this.model.getGeometry(cell);\n\n\tif (prev != null && (prev.x != bounds.x || prev.y != bounds.y ||\n\t\tprev.width != bounds.width || prev.height != bounds.height))\n\t{\n\t\tvar geo = prev.clone();\n\n\t\tif (!ignoreRelative && geo.relative)\n\t\t{\n\t\t\tvar offset = geo.offset;\n\n\t\t\tif (offset != null)\n\t\t\t{\n\t\t\t\toffset.x += bounds.x - geo.x;\n\t\t\t\toffset.y += bounds.y - geo.y;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgeo.x = bounds.x;\n\t\t\tgeo.y = bounds.y;\n\t\t}\n\n\t\tgeo.width = bounds.width;\n\t\tgeo.height = bounds.height;\n\n\t\tif (!geo.relative && this.model.isVertex(cell) && !this.isAllowNegativeCoordinates())\n\t\t{\n\t\t\tgeo.x = Math.max(0, geo.x);\n\t\t\tgeo.y = Math.max(0, geo.y);\n\t\t}\n\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tif (recurse)\n\t\t\t{\n\t\t\t\tthis.resizeChildCells(cell, geo);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tthis.model.setGeometry(cell, geo);\n\t\t\tthis.constrainChildCells(cell);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n\t\n\treturn prev;\n};\n\n/**\n * Function: resizeChildCells\n * \n * Resizes the child cells of the given cell for the given new geometry with\n * respect to the current geometry of the cell.\n * \n * Parameters:\n * \n * cell - <mxCell> that has been resized.\n * newGeo - <mxGeometry> that represents the new bounds.\n */\nmxGraph.prototype.resizeChildCells = function(cell, newGeo)\n{\n\tvar geo = this.model.getGeometry(cell);\n\tvar dx = (geo.width != 0) ? newGeo.width / geo.width : 1;\n\tvar dy = (geo.height != 0) ? newGeo.height / geo.height : 1;\n\tvar childCount = this.model.getChildCount(cell);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tthis.scaleCell(this.model.getChildAt(cell, i), dx, dy, true);\n\t}\n};\n\n/**\n * Function: constrainChildCells\n * \n * Constrains the children of the given cell using <constrainChild>.\n * \n * Parameters:\n * \n * cell - <mxCell> that has been resized.\n */\nmxGraph.prototype.constrainChildCells = function(cell)\n{\n\tvar childCount = this.model.getChildCount(cell);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tthis.constrainChild(this.model.getChildAt(cell, i));\n\t}\n};\n\n/**\n * Function: scaleCell\n * \n * Scales the points, position and size of the given cell according to the\n * given vertical and horizontal scaling factors.\n * \n * Parameters:\n * \n * cell - <mxCell> whose geometry should be scaled.\n * dx - Horizontal scaling factor.\n * dy - Vertical scaling factor.\n * recurse - Boolean indicating if the child cells should be scaled.\n */\nmxGraph.prototype.scaleCell = function(cell, dx, dy, recurse)\n{\n\tvar geo = this.model.getGeometry(cell);\n\t\n\tif (geo != null)\n\t{\n\t\tvar style = this.getCurrentCellStyle(cell);\n\t\tgeo = geo.clone();\n\t\t\n\t\t// Stores values for restoring based on style\n\t\tvar x = geo.x;\n\t\tvar y = geo.y\n\t\tvar w = geo.width;\n\t\tvar h = geo.height;\n\t\t\n\t\tgeo.scale(dx, dy, style[mxConstants.STYLE_ASPECT] == 'fixed');\n\t\t\n\t\tif (style[mxConstants.STYLE_RESIZE_WIDTH] == '1')\n\t\t{\n\t\t\tgeo.width = w * dx;\n\t\t}\n\t\telse if (style[mxConstants.STYLE_RESIZE_WIDTH] == '0')\n\t\t{\n\t\t\tgeo.width = w;\n\t\t}\n\t\t\n\t\tif (style[mxConstants.STYLE_RESIZE_HEIGHT] == '1')\n\t\t{\n\t\t\tgeo.height = h * dy;\n\t\t}\n\t\telse if (style[mxConstants.STYLE_RESIZE_HEIGHT] == '0')\n\t\t{\n\t\t\tgeo.height = h;\n\t\t}\n\t\t\n\t\tif (!this.isCellMovable(cell))\n\t\t{\n\t\t\tgeo.x = x;\n\t\t\tgeo.y = y;\n\t\t}\n\t\t\n\t\tif (!this.isCellResizable(cell))\n\t\t{\n\t\t\tgeo.width = w;\n\t\t\tgeo.height = h;\n\t\t}\n\n\t\tif (this.model.isVertex(cell))\n\t\t{\n\t\t\tthis.cellResized(cell, geo, true, recurse);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.model.setGeometry(cell, geo);\n\t\t}\n\t}\n};\n\n/**\n * Function: extendParent\n * \n * Resizes the parents recursively so that they contain the complete area\n * of the resized child cell.\n * \n * Parameters:\n * \n * cell - <mxCell> that has been resized.\n */\nmxGraph.prototype.extendParent = function(cell)\n{\n\tif (cell != null)\n\t{\n\t\tvar parent = this.model.getParent(cell);\n\t\tvar p = this.getCellGeometry(parent);\n\t\t\n\t\tif (parent != null && p != null && !this.isCellCollapsed(parent))\n\t\t{\n\t\t\tvar geo = this.getCellGeometry(cell);\n\t\t\t\n\t\t\tif (geo != null && !geo.relative &&\n\t\t\t\t(p.width < geo.x + geo.width ||\n\t\t\t\tp.height < geo.y + geo.height))\n\t\t\t{\n\t\t\t\tp = p.clone();\n\t\t\t\t\n\t\t\t\tp.width = Math.max(p.width, geo.x + geo.width);\n\t\t\t\tp.height = Math.max(p.height, geo.y + geo.height);\n\t\t\t\t\n\t\t\t\tthis.cellsResized([parent], [p], false);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Group: Cell moving\n */\n\n/**\n * Function: importCells\n * \n * Clones and inserts the given cells into the graph using the move\n * method and returns the inserted cells. This shortcut is used if\n * cells are inserted via datatransfer.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be imported.\n * dx - Integer that specifies the x-coordinate of the vector. Default is 0.\n * dy - Integer that specifies the y-coordinate of the vector. Default is 0.\n * target - <mxCell> that represents the new parent of the cells.\n * evt - Mouseevent that triggered the invocation.\n * mapping - Optional mapping for existing clones.\n */\nmxGraph.prototype.importCells = function(cells, dx, dy, target, evt, mapping)\n{\t\n\treturn this.moveCells(cells, dx, dy, true, target, evt, mapping);\n};\n\n/**\n * Function: moveCells\n * \n * Moves or clones the specified cells and moves the cells or clones by the\n * given amount, adding them to the optional target cell. The evt is the\n * mouse event as the mouse was released. The change is carried out using\n * <cellsMoved>. This method fires <mxEvent.MOVE_CELLS> while the\n * transaction is in progress. Returns the cells that were moved.\n * \n * Use the following code to move all cells in the graph.\n * \n * (code)\n * graph.moveCells(graph.getChildCells(null, true, true), 10, 10);\n * (end)\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be moved, cloned or added to the target.\n * dx - Integer that specifies the x-coordinate of the vector. Default is 0.\n * dy - Integer that specifies the y-coordinate of the vector. Default is 0.\n * clone - Boolean indicating if the cells should be cloned. Default is false.\n * target - <mxCell> that represents the new parent of the cells.\n * evt - Mouseevent that triggered the invocation.\n * mapping - Optional mapping for existing clones.\n */\nmxGraph.prototype.moveCells = function(cells, dx, dy, clone, target, evt, mapping)\n{\n\tdx = (dx != null) ? dx : 0;\n\tdy = (dy != null) ? dy : 0;\n\tclone = (clone != null) ? clone : false;\n\t\n\tif (cells != null && (dx != 0 || dy != 0 || clone || target != null))\n\t{\n\t\t// Removes descendants with ancestors in cells to avoid multiple moving\n\t\tcells = this.model.getTopmostCells(cells);\n\t\tvar origCells = cells;\n\t\t\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\t// Faster cell lookups to remove relative edge labels with selected\n\t\t\t// terminals to avoid explicit and implicit move at same time\n\t\t\tvar dict = new mxDictionary();\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tdict.put(cells[i], true);\n\t\t\t}\n\t\t\t\n\t\t\tvar isSelected = mxUtils.bind(this, function(cell)\n\t\t\t{\n\t\t\t\twhile (cell != null)\n\t\t\t\t{\n\t\t\t\t\tif (dict.get(cell))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell = this.model.getParent(cell);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\t// Removes relative edge labels with selected terminals\n\t\t\tvar checked = [];\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tvar geo = this.getCellGeometry(cells[i]);\n\t\t\t\tvar parent = this.model.getParent(cells[i]);\n\t\t\n\t\t\t\tif ((geo == null || !geo.relative) || !this.model.isEdge(parent) ||\n\t\t\t\t\t(!isSelected(this.model.getTerminal(parent, true)) &&\n\t\t\t\t\t!isSelected(this.model.getTerminal(parent, false))))\n\t\t\t\t{\n\t\t\t\t\tchecked.push(cells[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcells = checked;\n\t\t\t\n\t\t\tif (clone)\n\t\t\t{\n\t\t\t\tcells = this.cloneCells(cells, this.isCloneInvalidEdges(), mapping);\n\n\t\t\t\tif (target == null)\n\t\t\t\t{\n\t\t\t\t\ttarget = this.getDefaultParent();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// FIXME: Cells should always be inserted first before any other edit\n\t\t\t// to avoid forward references in sessions.\n\t\t\t// Need to disable allowNegativeCoordinates if target not null to\n\t\t\t// allow for temporary negative numbers until cellsAdded is called.\n\t\t\tvar previous = this.isAllowNegativeCoordinates();\n\t\t\t\n\t\t\tif (target != null)\n\t\t\t{\n\t\t\t\tthis.setAllowNegativeCoordinates(true);\n\t\t\t}\n\t\t\t\n\t\t\tthis.cellsMoved(cells, dx, dy, !clone && this.isDisconnectOnMove()\n\t\t\t\t\t&& this.isAllowDanglingEdges(), target == null,\n\t\t\t\t\tthis.isExtendParentsOnMove() && target == null);\n\t\t\t\n\t\t\tthis.setAllowNegativeCoordinates(previous);\n\n\t\t\tif (target != null)\n\t\t\t{\n\t\t\t\tvar index = this.model.getChildCount(target);\n\t\t\t\tthis.cellsAdded(cells, target, index, null, null, true);\n\t\t\t\t\n\t\t\t\t// Restores parent edge on cloned edge labels\n\t\t\t\tif (clone)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar geo = this.getCellGeometry(cells[i]);\n\t\t\t\t\t\tvar parent = this.model.getParent(origCells[i]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (geo != null && geo.relative &&\n\t\t\t\t\t\t\tthis.model.isEdge(parent) &&\n\t\t\t\t\t\t\tthis.model.contains(parent))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.model.add(parent, cells[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatches a move event\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS, 'cells', cells,\n\t\t\t\t'dx', dx, 'dy', dy, 'clone', clone, 'target', target, 'event', evt));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n\n\treturn cells;\n};\n\n/**\n * Function: cellsMoved\n * \n * Moves the specified cells by the given vector, disconnecting the cells\n * using disconnectGraph is disconnect is true. This method fires\n * <mxEvent.CELLS_MOVED> while the transaction is in progress.\n */\nmxGraph.prototype.cellsMoved = function(cells, dx, dy, disconnect, constrain, extend)\n{\n\tif (cells != null && (dx != 0 || dy != 0))\n\t{\n\t\textend = (extend != null) ? extend : false;\n\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tif (disconnect)\n\t\t\t{\n\t\t\t\tthis.disconnectGraph(cells);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tthis.translateCell(cells[i], dx, dy);\n\t\t\t\t\n\t\t\t\tif (extend && this.isExtendParent(cells[i]))\n\t\t\t\t{\n\t\t\t\t\tthis.extendParent(cells[i]);\n\t\t\t\t}\n\t\t\t\telse if (constrain)\n\t\t\t\t{\n\t\t\t\t\tthis.constrainChild(cells[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.resetEdgesOnMove)\n\t\t\t{\n\t\t\t\tthis.resetEdges(cells);\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,\n\t\t\t\t'cells', cells, 'dx', dx, 'dy', dy, 'disconnect', disconnect));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: translateCell\n * \n * Translates the geometry of the given cell and stores the new,\n * translated geometry in the model as an atomic change.\n */\nmxGraph.prototype.translateCell = function(cell, dx, dy)\n{\n\tvar geo = this.model.getGeometry(cell);\n\n\tif (geo != null)\n\t{\n\t\tdx = parseFloat(dx);\n\t\tdy = parseFloat(dy);\n\t\tgeo = geo.clone();\n\t\tgeo.translate(dx, dy);\n\n\t\tif (!geo.relative && this.model.isVertex(cell) && !this.isAllowNegativeCoordinates())\n\t\t{\n\t\t\tgeo.x = Math.max(0, parseFloat(geo.x));\n\t\t\tgeo.y = Math.max(0, parseFloat(geo.y));\n\t\t}\n\t\t\n\t\tif (geo.relative && !this.model.isEdge(cell))\n\t\t{\n\t\t\tvar parent = this.model.getParent(cell);\n\t\t\tvar angle = 0;\n\t\t\t\n\t\t\tif (this.model.isVertex(parent))\n\t\t\t{\n\t\t\t\tvar style = this.getCurrentCellStyle(parent);\n\t\t\t\tangle = mxUtils.getValue(style, mxConstants.STYLE_ROTATION, 0);\n\t\t\t}\n\t\t\t\n\t\t\tif (angle != 0)\n\t\t\t{\n\t\t\t\tvar rad = mxUtils.toRadians(-angle);\n\t\t\t\tvar cos = Math.cos(rad);\n\t\t\t\tvar sin = Math.sin(rad);\n\t\t\t\tvar pt = mxUtils.getRotatedPoint(new mxPoint(dx, dy), cos, sin, new mxPoint(0, 0));\n\t\t\t\tdx = pt.x;\n\t\t\t\tdy = pt.y;\n\t\t\t}\n\t\t\t\n\t\t\tif (geo.offset == null)\n\t\t\t{\n\t\t\t\tgeo.offset = new mxPoint(dx, dy);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgeo.offset.x = parseFloat(geo.offset.x) + dx;\n\t\t\t\tgeo.offset.y = parseFloat(geo.offset.y) + dy;\n\t\t\t}\n\t\t}\n\n\t\tthis.model.setGeometry(cell, geo);\n\t}\n};\n\n/**\n * Function: getCellContainmentArea\n * \n * Returns the <mxRectangle> inside which a cell is to be kept.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the area should be returned.\n */\nmxGraph.prototype.getCellContainmentArea = function(cell)\n{\n\tif (cell != null && !this.model.isEdge(cell))\n\t{\n\t\tvar parent = this.model.getParent(cell);\n\t\t\n\t\tif (parent != null && parent != this.getDefaultParent())\n\t\t{\n\t\t\tvar g = this.model.getGeometry(parent);\n\t\t\t\n\t\t\tif (g != null)\n\t\t\t{\n\t\t\t\tvar x = 0;\n\t\t\t\tvar y = 0;\n\t\t\t\tvar w = g.width;\n\t\t\t\tvar h = g.height;\n\t\t\t\t\n\t\t\t\tif (this.isSwimlane(parent))\n\t\t\t\t{\n\t\t\t\t\tvar size = this.getStartSize(parent);\n\t\t\t\t\tvar style = this.getCurrentCellStyle(parent);\n\t\t\t\t\tvar dir = mxUtils.getValue(style, mxConstants.STYLE_DIRECTION, mxConstants.DIRECTION_EAST);\n\t\t\t\t\tvar flipH = mxUtils.getValue(style, mxConstants.STYLE_FLIPH, 0) == 1;\n\t\t\t\t\tvar flipV = mxUtils.getValue(style, mxConstants.STYLE_FLIPV, 0) == 1;\n\t\t\t\t\t\n\t\t\t\t\tif (dir == mxConstants.DIRECTION_SOUTH || dir == mxConstants.DIRECTION_NORTH)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tmp = size.width;\n\t\t\t\t\t\tsize.width = size.height;\n\t\t\t\t\t\tsize.height = tmp;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ((dir == mxConstants.DIRECTION_EAST && !flipV) || (dir == mxConstants.DIRECTION_NORTH && !flipH) ||\n\t\t\t\t\t\t(dir == mxConstants.DIRECTION_WEST && flipV) || (dir == mxConstants.DIRECTION_SOUTH && flipH))\n\t\t\t\t\t{\n\t\t\t\t\t\tx = size.width;\n\t\t\t\t\t\ty = size.height;\n\t\t\t\t\t}\n\n\t\t\t\t\tw -= size.width;\n\t\t\t\t\th -= size.height;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn new mxRectangle(x, y, w, h);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: getMaximumGraphBounds\n * \n * Returns the bounds inside which the diagram should be kept as an\n * <mxRectangle>.\n */\nmxGraph.prototype.getMaximumGraphBounds = function()\n{\n\treturn this.maximumGraphBounds;\n};\n\n/**\n * Function: constrainChild\n * \n * Keeps the given cell inside the bounds returned by\n * <getCellContainmentArea> for its parent, according to the rules defined by\n * <getOverlap> and <isConstrainChild>. This modifies the cell's geometry\n * in-place and does not clone it.\n * \n * Parameters:\n * \n * cells - <mxCell> which should be constrained.\n * sizeFirst - Specifies if the size should be changed first. Default is true.\n */\nmxGraph.prototype.constrainChild = function(cell, sizeFirst)\n{\n\tsizeFirst = (sizeFirst != null) ? sizeFirst : true;\n\t\n\tif (cell != null)\n\t{\n\t\tvar geo = this.getCellGeometry(cell);\n\t\t\n\t\tif (geo != null && (this.isConstrainRelativeChildren() || !geo.relative))\n\t\t{\n\t\t\tvar parent = this.model.getParent(cell);\n\t\t\tvar pgeo = this.getCellGeometry(parent);\n\t\t\tvar max = this.getMaximumGraphBounds();\n\t\t\t\n\t\t\t// Finds parent offset\n\t\t\tif (max != null)\n\t\t\t{\n\t\t\t\tvar off = this.getBoundingBoxFromGeometry([parent], false);\n\t\t\t\t\n\t\t\t\tif (off != null)\n\t\t\t\t{\n\t\t\t\t\tmax = mxRectangle.fromRectangle(max);\n\t\t\t\t\t\n\t\t\t\t\tmax.x -= off.x;\n\t\t\t\t\tmax.y -= off.y;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (this.isConstrainChild(cell))\n\t\t\t{\n\t\t\t\tvar tmp = this.getCellContainmentArea(cell);\n\t\t\t\t\n\t\t\t\tif (tmp != null)\n\t\t\t\t{\n\t\t\t\t\tvar overlap = this.getOverlap(cell);\n\t\n\t\t\t\t\tif (overlap > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\ttmp = mxRectangle.fromRectangle(tmp);\n\t\t\t\t\t\t\n\t\t\t\t\t\ttmp.x -= tmp.width * overlap;\n\t\t\t\t\t\ttmp.y -= tmp.height * overlap;\n\t\t\t\t\t\ttmp.width += 2 * tmp.width * overlap;\n\t\t\t\t\t\ttmp.height += 2 * tmp.height * overlap;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Find the intersection between max and tmp\n\t\t\t\t\tif (max == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tmax = tmp;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmax = mxRectangle.fromRectangle(max);\n\t\t\t\t\t\tmax.intersect(tmp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (max != null)\n\t\t\t{\n\t\t\t\tvar cells = [cell];\n\t\t\t\t\n\t\t\t\tif (!this.isCellCollapsed(cell))\n\t\t\t\t{\n\t\t\t\t\tvar desc = this.model.getDescendants(cell);\n\t\t\t\t\t\n\t\t\t\t\tfor (var i = 0; i < desc.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.isCellVisible(desc[i]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcells.push(desc[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar bbox = this.getBoundingBoxFromGeometry(cells, false);\n\t\t\t\t\n\t\t\t\tif (bbox != null)\n\t\t\t\t{\n\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\n\t\t\t\t\t// Cumulative horizontal movement\n\t\t\t\t\tvar dx = 0;\n\t\t\t\t\t\n\t\t\t\t\tif (geo.width > max.width)\n\t\t\t\t\t{\n\t\t\t\t\t\tdx = geo.width - max.width;\n\t\t\t\t\t\tgeo.width -= dx;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (bbox.x + bbox.width > max.x + max.width)\n\t\t\t\t\t{\n\t\t\t\t\t\tdx -= bbox.x + bbox.width - max.x - max.width - dx;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Cumulative vertical movement\n\t\t\t\t\tvar dy = 0;\n\t\t\t\t\t\n\t\t\t\t\tif (geo.height > max.height)\n\t\t\t\t\t{\n\t\t\t\t\t\tdy = geo.height - max.height;\n\t\t\t\t\t\tgeo.height -= dy;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (bbox.y + bbox.height > max.y + max.height)\n\t\t\t\t\t{\n\t\t\t\t\t\tdy -= bbox.y + bbox.height - max.y - max.height - dy;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (bbox.x < max.x)\n\t\t\t\t\t{\n\t\t\t\t\t\tdx -= bbox.x - max.x;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (bbox.y < max.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tdy -= bbox.y - max.y;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (dx != 0 || dy != 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (geo.relative)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Relative geometries are moved via absolute offset\n\t\t\t\t\t\t\tif (geo.offset == null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo.offset = new mxPoint();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tgeo.offset.x += dx;\n\t\t\t\t\t\t\tgeo.offset.y += dy;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo.x += dx;\n\t\t\t\t\t\t\tgeo.y += dy;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.model.setGeometry(cell, geo);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: resetEdges\n * \n * Resets the control points of the edges that are connected to the given\n * cells if not both ends of the edge are in the given cells array.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> for which the connected edges should be\n * reset.\n */\nmxGraph.prototype.resetEdges = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\t// Prepares faster cells lookup\n\t\tvar dict = new mxDictionary();\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tdict.put(cells[i], true);\n\t\t}\n\t\t\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tvar edges = this.model.getEdges(cells[i]);\n\t\t\t\t\n\t\t\t\tif (edges != null)\n\t\t\t\t{\n\t\t\t\t\tfor (var j = 0; j < edges.length; j++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar state = this.view.getState(edges[j]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar source = (state != null) ? state.getVisibleTerminal(true) : this.view.getVisibleTerminal(edges[j], true);\n\t\t\t\t\t\tvar target = (state != null) ? state.getVisibleTerminal(false) : this.view.getVisibleTerminal(edges[j], false);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Checks if one of the terminals is not in the given array\n\t\t\t\t\t\tif (!dict.get(source) || !dict.get(target))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.resetEdge(edges[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.resetEdges(this.model.getChildren(cells[i]));\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: resetEdge\n * \n * Resets the control points of the given edge.\n * \n * Parameters:\n * \n * edge - <mxCell> whose points should be reset.\n */\nmxGraph.prototype.resetEdge = function(edge)\n{\n\tvar geo = this.model.getGeometry(edge);\n\t\n\t// Resets the control points\n\tif (geo != null && geo.points != null && geo.points.length > 0)\n\t{\n\t\tgeo = geo.clone();\n\t\tgeo.points = [];\n\t\tthis.model.setGeometry(edge, geo);\n\t}\n\t\n\treturn edge;\n};\n\n/**\n * Group: Cell connecting and connection constraints\n */\n\n/**\n * Function: getOutlineConstraint\n * \n * Returns the constraint used to connect to the outline of the given state.\n */\nmxGraph.prototype.getOutlineConstraint = function(point, terminalState, me)\n{\n\tif (terminalState.shape != null)\n\t{\n\t\tvar bounds = this.view.getPerimeterBounds(terminalState);\n\t\tvar direction = terminalState.style[mxConstants.STYLE_DIRECTION];\n\t\t\n\t\tif (direction == mxConstants.DIRECTION_NORTH || direction == mxConstants.DIRECTION_SOUTH)\n\t\t{\n\t\t\tbounds.x += bounds.width / 2 - bounds.height / 2;\n\t\t\tbounds.y += bounds.height / 2 - bounds.width / 2;\n\t\t\tvar tmp = bounds.width;\n\t\t\tbounds.width = bounds.height;\n\t\t\tbounds.height = tmp;\n\t\t}\n\t\n\t\tvar alpha = mxUtils.toRadians(terminalState.shape.getShapeRotation());\n\t\t\n\t\tif (alpha != 0)\n\t\t{\n\t\t\tvar cos = Math.cos(-alpha);\n\t\t\tvar sin = Math.sin(-alpha);\n\t\n\t\t\tvar ct = new mxPoint(bounds.getCenterX(), bounds.getCenterY());\n\t\t\tpoint = mxUtils.getRotatedPoint(point, cos, sin, ct);\n\t\t}\n\n\t\tvar sx = 1;\n\t\tvar sy = 1;\n\t\tvar dx = 0;\n\t\tvar dy = 0;\n\t\t\n\t\t// LATER: Add flipping support for image shapes\n\t\tif (this.getModel().isVertex(terminalState.cell))\n\t\t{\n\t\t\tvar flipH = terminalState.style[mxConstants.STYLE_FLIPH];\n\t\t\tvar flipV = terminalState.style[mxConstants.STYLE_FLIPV];\n\t\t\t\n\t\t\t// Legacy support for stencilFlipH/V\n\t\t\tif (terminalState.shape != null && terminalState.shape.stencil != null)\n\t\t\t{\n\t\t\t\tflipH = mxUtils.getValue(terminalState.style, 'stencilFlipH', 0) == 1 || flipH;\n\t\t\t\tflipV = mxUtils.getValue(terminalState.style, 'stencilFlipV', 0) == 1 || flipV;\n\t\t\t}\n\t\t\t\n\t\t\tif (direction == mxConstants.DIRECTION_NORTH || direction == mxConstants.DIRECTION_SOUTH)\n\t\t\t{\n\t\t\t\tvar tmp = flipH;\n\t\t\t\tflipH = flipV;\n\t\t\t\tflipV = tmp;\n\t\t\t}\n\t\t\t\n\t\t\tif (flipH)\n\t\t\t{\n\t\t\t\tsx = -1;\n\t\t\t\tdx = -bounds.width;\n\t\t\t}\n\t\t\t\n\t\t\tif (flipV)\n\t\t\t{\n\t\t\t\tsy = -1;\n\t\t\t\tdy = -bounds.height ;\n\t\t\t}\n\t\t}\n\t\t\n\t\tpoint = new mxPoint((point.x - bounds.x) * sx - dx + bounds.x, (point.y - bounds.y) * sy - dy + bounds.y);\n\t\t\n\t\tvar x = (bounds.width == 0) ? 0 : Math.round((point.x - bounds.x) * 1000 / bounds.width) / 1000;\n\t\tvar y = (bounds.height == 0) ? 0 : Math.round((point.y - bounds.y) * 1000 / bounds.height) / 1000;\n\t\t\n\t\treturn new mxConnectionConstraint(new mxPoint(x, y), false);\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: getAllConnectionConstraints\n * \n * Returns an array of all <mxConnectionConstraints> for the given terminal. If\n * the shape of the given terminal is a <mxStencilShape> then the constraints\n * of the corresponding <mxStencil> are returned.\n * \n * Parameters:\n * \n * terminal - <mxCellState> that represents the terminal.\n * source - Boolean that specifies if the terminal is the source or target.\n */\nmxGraph.prototype.getAllConnectionConstraints = function(terminal, source)\n{\n\tif (terminal != null && terminal.shape != null && terminal.shape.stencil != null)\n\t{\n\t\treturn terminal.shape.stencil.constraints;\n\t}\n\n\treturn null;\n};\n\n/**\n * Function: getConnectionConstraint\n * \n * Returns an <mxConnectionConstraint> that describes the given connection\n * point. This result can then be passed to <getConnectionPoint>.\n * \n * Parameters:\n * \n * edge - <mxCellState> that represents the edge.\n * terminal - <mxCellState> that represents the terminal.\n * source - Boolean indicating if the terminal is the source or target.\n */\nmxGraph.prototype.getConnectionConstraint = function(edge, terminal, source)\n{\n\tvar point = null;\n\tvar x = edge.style[(source) ? mxConstants.STYLE_EXIT_X : mxConstants.STYLE_ENTRY_X];\n\n\tif (x != null)\n\t{\n\t\tvar y = edge.style[(source) ? mxConstants.STYLE_EXIT_Y : mxConstants.STYLE_ENTRY_Y];\n\t\t\n\t\tif (y != null)\n\t\t{\n\t\t\tpoint = new mxPoint(parseFloat(x), parseFloat(y));\n\t\t}\n\t}\n\t\n\tvar perimeter = false;\n\tvar dx = 0, dy = 0;\n\t\n\tif (point != null)\n\t{\n\t\tperimeter = mxUtils.getValue(edge.style, (source) ? mxConstants.STYLE_EXIT_PERIMETER :\n\t\t\tmxConstants.STYLE_ENTRY_PERIMETER, true);\n\n\t\t//Add entry/exit offset\n\t\tdx = parseFloat(edge.style[(source) ? mxConstants.STYLE_EXIT_DX : mxConstants.STYLE_ENTRY_DX]);\n\t\tdy = parseFloat(edge.style[(source) ? mxConstants.STYLE_EXIT_DY : mxConstants.STYLE_ENTRY_DY]);\n\t\t\n\t\tdx = isFinite(dx)? dx : 0;\n\t\tdy = isFinite(dy)? dy : 0;\n\t}\n\n\treturn new mxConnectionConstraint(point, perimeter, null, dx, dy);\n};\n\n/**\n * Function: setConnectionConstraint\n * \n * Sets the <mxConnectionConstraint> that describes the given connection point.\n * If no constraint is given then nothing is changed. To remove an existing\n * constraint from the given edge, use an empty constraint instead.\n * \n * Parameters:\n * \n * edge - <mxCell> that represents the edge.\n * terminal - <mxCell> that represents the terminal.\n * source - Boolean indicating if the terminal is the source or target.\n * constraint - Optional <mxConnectionConstraint> to be used for this\n * connection.\n */\nmxGraph.prototype.setConnectionConstraint = function(edge, terminal, source, constraint)\n{\n\tif (constraint != null)\n\t{\n\t\tthis.model.beginUpdate();\n\t\t\n\t\ttry\n\t\t{\n\t\t\tif (constraint == null || constraint.point == null)\n\t\t\t{\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_X :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_X, null, [edge]);\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_Y :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_Y, null, [edge]);\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_DX :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_DX, null, [edge]);\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_DY :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_DY, null, [edge]);\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_PERIMETER :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_PERIMETER, null, [edge]);\n\t\t\t}\n\t\t\telse if (constraint.point != null)\n\t\t\t{\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_X :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_X, constraint.point.x, [edge]);\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_Y :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_Y, constraint.point.y, [edge]);\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_DX :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_DX, constraint.dx, [edge]);\n\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_DY :\n\t\t\t\t\tmxConstants.STYLE_ENTRY_DY, constraint.dy, [edge]);\n\t\t\t\t\n\t\t\t\t// Only writes 0 since 1 is default\n\t\t\t\tif (!constraint.perimeter)\n\t\t\t\t{\n\t\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_PERIMETER :\n\t\t\t\t\t\tmxConstants.STYLE_ENTRY_PERIMETER, '0', [edge]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setCellStyles((source) ? mxConstants.STYLE_EXIT_PERIMETER :\n\t\t\t\t\t\tmxConstants.STYLE_ENTRY_PERIMETER, null, [edge]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: getConnectionPoint\n *\n * Returns the nearest point in the list of absolute points or the center\n * of the opposite terminal.\n * \n * Parameters:\n * \n * vertex - <mxCellState> that represents the vertex.\n * constraint - <mxConnectionConstraint> that represents the connection point\n * constraint as returned by <getConnectionConstraint>.\n */\nmxGraph.prototype.getConnectionPoint = function(vertex, constraint, round)\n{\n\tround = (round != null) ? round : true;\n\tvar point = null;\n\t\n\tif (vertex != null && constraint.point != null)\n\t{\n\t\tvar bounds = this.view.getPerimeterBounds(vertex);\n        var cx = new mxPoint(bounds.getCenterX(), bounds.getCenterY());\n\t\tvar direction = vertex.style[mxConstants.STYLE_DIRECTION];\n\t\tvar r1 = 0;\n\t\t\n\t\t// Bounds need to be rotated by 90 degrees for further computation\n\t\tif (direction != null && mxUtils.getValue(vertex.style,\n\t\t\tmxConstants.STYLE_ANCHOR_POINT_DIRECTION, 1) == 1)\n\t\t{\n\t\t\tif (direction == mxConstants.DIRECTION_NORTH)\n\t\t\t{\n\t\t\t\tr1 += 270;\n\t\t\t}\n\t\t\telse if (direction == mxConstants.DIRECTION_WEST)\n\t\t\t{\n\t\t\t\tr1 += 180;\n\t\t\t}\n\t\t\telse if (direction == mxConstants.DIRECTION_SOUTH)\n\t\t\t{\n\t\t\t\tr1 += 90;\n\t\t\t}\n\n\t\t\t// Bounds need to be rotated by 90 degrees for further computation\n\t\t\tif (direction == mxConstants.DIRECTION_NORTH ||\n\t\t\t\tdirection == mxConstants.DIRECTION_SOUTH)\n\t\t\t{\n\t\t\t\tbounds.rotate90();\n\t\t\t}\n\t\t}\n\n\t\tvar scale = this.view.scale;\n\t\tpoint = new mxPoint(bounds.x + constraint.point.x * bounds.width + constraint.dx * scale,\n\t\t\t\tbounds.y + constraint.point.y * bounds.height + constraint.dy * scale);\n\t\t\n\t\t// Rotation for direction before projection on perimeter\n\t\tvar r2 = vertex.style[mxConstants.STYLE_ROTATION] || 0;\n\t\t\n\t\tif (constraint.perimeter)\n\t\t{\n\t\t\tif (r1 != 0)\n\t\t\t{\n\t\t\t\t// Only 90 degrees steps possible here so no trig needed\n\t\t\t\tvar cos = 0;\n\t\t\t\tvar sin = 0;\n\t\t\t\t\n\t\t\t\tif (r1 == 90)\n\t\t\t\t{\n\t\t\t\t\tsin = 1;\n\t\t\t\t}\n\t\t\t\telse if (r1 == 180)\n\t\t\t\t{\n\t\t\t\t\tcos = -1;\n\t\t\t\t}\n\t\t\t\telse if (r1 == 270)\n\t\t\t\t{\n\t\t\t\t\tsin = -1;\n\t\t\t\t}\n\t\t\t\t\n\t\t        point = mxUtils.getRotatedPoint(point, cos, sin, cx);\n\t\t\t}\n\t\n\t\t\tpoint = this.view.getPerimeterPoint(vertex, point, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tr2 += r1;\n\t\t\t\n\t\t\tif (this.getModel().isVertex(vertex.cell))\n\t\t\t{\n\t\t\t\tvar flipH = vertex.style[mxConstants.STYLE_FLIPH] == 1;\n\t\t\t\tvar flipV = vertex.style[mxConstants.STYLE_FLIPV] == 1;\n\t\t\t\t\n\t\t\t\t// Legacy support for stencilFlipH/V\n\t\t\t\tif (vertex.shape != null && vertex.shape.stencil != null)\n\t\t\t\t{\n\t\t\t\t\tflipH = (mxUtils.getValue(vertex.style, 'stencilFlipH', 0) == 1) || flipH;\n\t\t\t\t\tflipV = (mxUtils.getValue(vertex.style, 'stencilFlipV', 0) == 1) || flipV;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (direction == mxConstants.DIRECTION_NORTH ||\n\t\t\t\t\tdirection == mxConstants.DIRECTION_SOUTH)\n\t\t\t\t{\n\t\t\t\t\tvar temp = flipH;\n\t\t\t\t\tflipH = flipV\n\t\t\t\t\tflipV = temp;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (flipH)\n\t\t\t\t{\n\t\t\t\t\tpoint.x = 2 * bounds.getCenterX() - point.x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (flipV)\n\t\t\t\t{\n\t\t\t\t\tpoint.y = 2 * bounds.getCenterY() - point.y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Generic rotation after projection on perimeter\n\t\tif (r2 != 0 && point != null)\n\t\t{\n\t        var rad = mxUtils.toRadians(r2);\n\t        var cos = Math.cos(rad);\n\t        var sin = Math.sin(rad);\n\t        \n\t        point = mxUtils.getRotatedPoint(point, cos, sin, cx);\n\t\t}\n\t}\n\t\n\tif (round && point != null)\n\t{\n\t\tpoint.x = Math.round(point.x);\n\t\tpoint.y = Math.round(point.y);\n\t}\n\n\treturn point;\n};\n\n/**\n * Function: connectCell\n * \n * Connects the specified end of the given edge to the given terminal\n * using <cellConnected> and fires <mxEvent.CONNECT_CELL> while the\n * transaction is in progress. Returns the updated edge.\n * \n * Parameters:\n * \n * edge - <mxCell> whose terminal should be updated.\n * terminal - <mxCell> that represents the new terminal to be used.\n * source - Boolean indicating if the new terminal is the source or target.\n * constraint - Optional <mxConnectionConstraint> to be used for this\n * connection.\n */\nmxGraph.prototype.connectCell = function(edge, terminal, source, constraint)\n{\n\tthis.model.beginUpdate();\n\ttry\n\t{\n\t\tvar previous = this.model.getTerminal(edge, source);\n\t\tthis.cellConnected(edge, terminal, source, constraint);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,\n\t\t\t'edge', edge, 'terminal', terminal, 'source', source,\n\t\t\t'previous', previous));\n\t}\n\tfinally\n\t{\n\t\tthis.model.endUpdate();\n\t}\n\n\treturn edge;\n};\n\n/**\n * Function: cellConnected\n * \n * Sets the new terminal for the given edge and resets the edge points if\n * <resetEdgesOnConnect> is true. This method fires\n * <mxEvent.CELL_CONNECTED> while the transaction is in progress.\n * \n * Parameters:\n * \n * edge - <mxCell> whose terminal should be updated.\n * terminal - <mxCell> that represents the new terminal to be used.\n * source - Boolean indicating if the new terminal is the source or target.\n * constraint - <mxConnectionConstraint> to be used for this connection.\n */\nmxGraph.prototype.cellConnected = function(edge, terminal, source, constraint)\n{\n\tif (edge != null)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tvar previous = this.model.getTerminal(edge, source);\n\n\t\t\t// Updates the constraint\n\t\t\tthis.setConnectionConstraint(edge, terminal, source, constraint);\n\t\t\t\n\t\t\t// Checks if the new terminal is a port, uses the ID of the port in the\n\t\t\t// style and the parent of the port as the actual terminal of the edge.\n\t\t\tif (this.isPortsEnabled())\n\t\t\t{\n\t\t\t\tvar id = null;\n\t\n\t\t\t\tif (this.isPort(terminal))\n\t\t\t\t{\n\t\t\t\t\tid = terminal.getId();\n\t\t\t\t\tterminal = this.getTerminalForPort(terminal, source);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Sets or resets all previous information for connecting to a child port\n\t\t\t\tvar key = (source) ? mxConstants.STYLE_SOURCE_PORT :\n\t\t\t\t\tmxConstants.STYLE_TARGET_PORT;\n\t\t\t\tthis.setCellStyles(key, id, [edge]);\n\t\t\t}\n\t\t\t\n\t\t\tthis.model.setTerminal(edge, terminal, source);\n\t\t\t\n\t\t\tif (this.resetEdgesOnConnect)\n\t\t\t{\n\t\t\t\tthis.resetEdge(edge);\n\t\t\t}\n\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,\n\t\t\t\t'edge', edge, 'terminal', terminal, 'source', source,\n\t\t\t\t'previous', previous));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: disconnectGraph\n * \n * Disconnects the given edges from the terminals which are not in the\n * given array.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be disconnected.\n */\nmxGraph.prototype.disconnectGraph = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\tthis.model.beginUpdate();\n\t\ttry\n\t\t{\t\t\t\t\t\t\t\n\t\t\tvar scale = this.view.scale;\n\t\t\tvar tr = this.view.translate;\n\t\t\t\n\t\t\t// Fast lookup for finding cells in array\n\t\t\tvar dict = new mxDictionary();\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tdict.put(cells[i], true);\n\t\t\t}\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tif (this.model.isEdge(cells[i]))\n\t\t\t\t{\n\t\t\t\t\tvar geo = this.model.getGeometry(cells[i]);\n\t\t\t\t\t\n\t\t\t\t\tif (geo != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar state = this.view.getState(cells[i]);\n\t\t\t\t\t\tvar pstate = this.view.getState(\n\t\t\t\t\t\t\tthis.model.getParent(cells[i]));\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (state != null &&\n\t\t\t\t\t\t\tpstate != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar dx = -pstate.origin.x;\n\t\t\t\t\t\t\tvar dy = -pstate.origin.y;\n\t\t\t\t\t\t\tvar pts = state.absolutePoints;\n\n\t\t\t\t\t\t\tvar src = this.model.getTerminal(cells[i], true);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (src != null && this.isCellDisconnectable(cells[i], src, true))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\twhile (src != null && !dict.get(src))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsrc = this.model.getParent(src);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (src == null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tgeo.setTerminalPoint(\n\t\t\t\t\t\t\t\t\t\tnew mxPoint(pts[0].x / scale - tr.x + dx,\n\t\t\t\t\t\t\t\t\t\t\tpts[0].y / scale - tr.y + dy), true);\n\t\t\t\t\t\t\t\t\tthis.model.setTerminal(cells[i], null, true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar trg = this.model.getTerminal(cells[i], false);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (trg != null && this.isCellDisconnectable(cells[i], trg, false))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\twhile (trg != null && !dict.get(trg))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttrg = this.model.getParent(trg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (trg == null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar n = pts.length - 1;\n\t\t\t\t\t\t\t\t\tgeo.setTerminalPoint(\n\t\t\t\t\t\t\t\t\t\tnew mxPoint(pts[n].x / scale - tr.x + dx,\n\t\t\t\t\t\t\t\t\t\t\tpts[n].y / scale - tr.y + dy), false);\n\t\t\t\t\t\t\t\t\tthis.model.setTerminal(cells[i], null, false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.model.setGeometry(cells[i], geo);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.model.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Group: Drilldown\n */\n\n/**\n * Function: getCurrentRoot\n * \n * Returns the current root of the displayed cell hierarchy. This is a\n * shortcut to <mxGraphView.currentRoot> in <view>.\n */\nmxGraph.prototype.getCurrentRoot = function()\n{\n\treturn this.view.currentRoot;\n};\n \n/**\n * Function: getTranslateForRoot\n * \n * Returns the translation to be used if the given cell is the root cell as\n * an <mxPoint>. This implementation returns null.\n * \n * Example:\n * \n * To keep the children at their absolute position while stepping into groups,\n * this function can be overridden as follows.\n * \n * (code)\n * var offset = new mxPoint(0, 0);\n * \n * while (cell != null)\n * {\n *   var geo = this.model.getGeometry(cell);\n * \n *   if (geo != null)\n *   {\n *     offset.x -= geo.x;\n *     offset.y -= geo.y;\n *   }\n * \n *   cell = this.model.getParent(cell);\n * }\n * \n * return offset;\n * (end)\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the root.\n */\nmxGraph.prototype.getTranslateForRoot = function(cell)\n{\n\treturn null;\n};\n\n/**\n * Function: isPort\n * \n * Returns true if the given cell is a \"port\", that is, when connecting to\n * it, the cell returned by getTerminalForPort should be used as the\n * terminal and the port should be referenced by the ID in either the\n * mxConstants.STYLE_SOURCE_PORT or the or the\n * mxConstants.STYLE_TARGET_PORT. Note that a port should not be movable.\n * This implementation always returns false.\n * \n * A typical implementation is the following:\n * \n * (code)\n * graph.isPort = function(cell)\n * {\n *   var geo = this.getCellGeometry(cell);\n *   \n *   return (geo != null) ? geo.relative : false;\n * };\n * (end)\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the port.\n */\nmxGraph.prototype.isPort = function(cell)\n{\n\treturn false;\n};\n\n/**\n * Function: getTerminalForPort\n * \n * Returns the terminal to be used for a given port. This implementation\n * always returns the parent cell.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the port.\n * source - If the cell is the source or target port.\n */\nmxGraph.prototype.getTerminalForPort = function(cell, source)\n{\n\treturn this.model.getParent(cell);\n};\n\n/**\n * Function: getChildOffsetForCell\n * \n * Returns the offset to be used for the cells inside the given cell. The\n * root and layer cells may be identified using <mxGraphModel.isRoot> and\n * <mxGraphModel.isLayer>. For all other current roots, the\n * <mxGraphView.currentRoot> field points to the respective cell, so that\n * the following holds: cell == this.view.currentRoot. This implementation\n * returns null.\n * \n * Parameters:\n * \n * cell - <mxCell> whose offset should be returned.\n */\nmxGraph.prototype.getChildOffsetForCell = function(cell)\n{\n\treturn null;\n};\n\n/**\n * Function: enterGroup\n * \n * Uses the given cell as the root of the displayed cell hierarchy. If no\n * cell is specified then the selection cell is used. The cell is only used\n * if <isValidRoot> returns true.\n * \n * Parameters:\n * \n * cell - Optional <mxCell> to be used as the new root. Default is the\n * selection cell.\n */\nmxGraph.prototype.enterGroup = function(cell)\n{\n\tcell = cell || this.getSelectionCell();\n\t\n\tif (cell != null && this.isValidRoot(cell))\n\t{\n\t\tthis.view.setCurrentRoot(cell);\n\t\tthis.clearSelection();\n\t}\n};\n\n/**\n * Function: exitGroup\n * \n * Changes the current root to the next valid root in the displayed cell\n * hierarchy.\n */\nmxGraph.prototype.exitGroup = function()\n{\n\tvar root = this.model.getRoot();\n\tvar current = this.getCurrentRoot();\n\t\n\tif (current != null)\n\t{\n\t\tvar next = this.model.getParent(current);\n\t\t\n\t\t// Finds the next valid root in the hierarchy\n\t\twhile (next != root && !this.isValidRoot(next) &&\n\t\t\t\tthis.model.getParent(next) != root)\n\t\t{\n\t\t\tnext = this.model.getParent(next);\n\t\t}\n\t\t\n\t\t// Clears the current root if the new root is\n\t\t// the model's root or one of the layers.\n\t\tif (next == root || this.model.getParent(next) == root)\n\t\t{\n\t\t\tthis.view.setCurrentRoot(null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.view.setCurrentRoot(next);\n\t\t}\n\t\t\n\t\tvar state = this.view.getState(current);\n\t\t\n\t\t// Selects the previous root in the graph\n\t\tif (state != null)\n\t\t{\n\t\t\tthis.setSelectionCell(current);\n\t\t}\n\t}\n};\n\n/**\n * Function: home\n * \n * Uses the root of the model as the root of the displayed cell hierarchy\n * and selects the previous root.\n */\nmxGraph.prototype.home = function()\n{\n\tvar current = this.getCurrentRoot();\n\t\n\tif (current != null)\n\t{\n\t\tthis.view.setCurrentRoot(null);\n\t\tvar state = this.view.getState(current);\n\t\t\n\t\tif (state != null)\n\t\t{\n\t\t\tthis.setSelectionCell(current);\n\t\t}\n\t}\n};\n\n/**\n * Function: isValidRoot\n * \n * Returns true if the given cell is a valid root for the cell display\n * hierarchy. This implementation returns true for all non-null values.\n * \n * Parameters:\n * \n * cell - <mxCell> which should be checked as a possible root.\n */\nmxGraph.prototype.isValidRoot = function(cell)\n{\n\treturn (cell != null);\n};\n\n/**\n * Group: Graph display\n */\n \n/**\n * Function: getGraphBounds\n * \n * Returns the bounds of the visible graph. Shortcut to\n * <mxGraphView.getGraphBounds>. See also: <getBoundingBoxFromGeometry>.\n */\n mxGraph.prototype.getGraphBounds = function()\n {\n \treturn this.view.getGraphBounds();\n };\n\n/**\n * Function: getCellBounds\n * \n * Returns the scaled, translated bounds for the given cell. See\n * <mxGraphView.getBounds> for arrays.\n * \n * Parameters:\n * \n * cell - <mxCell> whose bounds should be returned.\n * includeEdge - Optional boolean that specifies if the bounds of\n * the connected edges should be included. Default is false.\n * includeDescendants - Optional boolean that specifies if the bounds\n * of all descendants should be included. Default is false.\n */\nmxGraph.prototype.getCellBounds = function(cell, includeEdges, includeDescendants)\n{\n\tvar cells = [cell];\n\t\n\t// Includes all connected edges\n\tif (includeEdges)\n\t{\n\t\tcells = cells.concat(this.model.getEdges(cell));\n\t}\n\t\n\tvar result = this.view.getBounds(cells);\n\t\n\t// Recursively includes the bounds of the children\n\tif (includeDescendants)\n\t{\n\t\tvar childCount = this.model.getChildCount(cell);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar tmp = this.getCellBounds(this.model.getChildAt(cell, i),\n\t\t\t\tincludeEdges, true);\n\n\t\t\tif (result != null)\n\t\t\t{\n\t\t\t\tresult.add(tmp);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = tmp;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getBoundingBoxFromGeometry\n * \n * Returns the bounding box for the geometries of the vertices in the\n * given array of cells. This can be used to find the graph bounds during\n * a layout operation (ie. before the last endUpdate) as follows:\n * \n * (code)\n * var cells = graph.getChildCells(graph.getDefaultParent(), true, true);\n * var bounds = graph.getBoundingBoxFromGeometry(cells, true);\n * (end)\n * \n * This can then be used to move cells to the origin:\n * \n * (code)\n * if (bounds.x < 0 || bounds.y < 0)\n * {\n *   graph.moveCells(cells, -Math.min(bounds.x, 0), -Math.min(bounds.y, 0))\n * }\n * (end)\n * \n * Or to translate the graph view:\n * \n * (code)\n * if (bounds.x < 0 || bounds.y < 0)\n * {\n *   graph.view.setTranslate(-Math.min(bounds.x, 0), -Math.min(bounds.y, 0));\n * }\n * (end)\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose bounds should be returned.\n * includeEdges - Specifies if edge bounds should be included by computing\n * the bounding box for all points in geometry. Default is false.\n */\nmxGraph.prototype.getBoundingBoxFromGeometry = function(cells, includeEdges)\n{\n\tincludeEdges = (includeEdges != null) ? includeEdges : false;\n\tvar result = null;\n\t\n\tif (cells != null)\n\t{\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (includeEdges || this.model.isVertex(cells[i]))\n\t\t\t{\n\t\t\t\t// Computes the bounding box for the points in the geometry\n\t\t\t\tvar geo = this.getCellGeometry(cells[i]);\n\t\t\t\t\n\t\t\t\tif (geo != null)\n\t\t\t\t{\n\t\t\t\t\tvar bbox = null;\n\t\t\t\t\t\n\t\t\t\t\tif (this.model.isEdge(cells[i]))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar addPoint = function(pt)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (pt != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (tmp == null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttmp = new mxRectangle(pt.x, pt.y, 0, 0);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttmp.add(new mxRectangle(pt.x, pt.y, 0, 0));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (this.model.getTerminal(cells[i], true) == null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taddPoint(geo.getTerminalPoint(true));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (this.model.getTerminal(cells[i], false) == null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taddPoint(geo.getTerminalPoint(false));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tvar pts = geo.points;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (pts != null && pts.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar tmp = new mxRectangle(pts[0].x, pts[0].y, 0, 0);\n\n\t\t\t\t\t\t\tfor (var j = 1; j < pts.length; j++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taddPoint(pts[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tbbox = tmp;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar parent = this.model.getParent(cells[i]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (geo.relative)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this.model.isVertex(parent) && parent != this.view.currentRoot)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar tmp = this.getBoundingBoxFromGeometry([parent], false);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (tmp != null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbbox = new mxRectangle(geo.x * tmp.width, geo.y * tmp.height, geo.width, geo.height);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (mxUtils.indexOf(cells, parent) >= 0)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tbbox.x += tmp.x;\n\t\t\t\t\t\t\t\t\t\tbbox.y += tmp.y;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbbox = mxRectangle.fromRectangle(geo);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (this.model.isVertex(parent) && mxUtils.indexOf(cells, parent) >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar tmp = this.getBoundingBoxFromGeometry([parent], false);\n\n\t\t\t\t\t\t\t\tif (tmp != null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbbox.x += tmp.x;\n\t\t\t\t\t\t\t\t\tbbox.y += tmp.y;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (bbox != null && geo.offset != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbbox.x += geo.offset.x;\n\t\t\t\t\t\t\tbbox.y += geo.offset.y;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar style = this.getCurrentCellStyle(cells[i]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (bbox != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar angle = mxUtils.getValue(style, mxConstants.STYLE_ROTATION, 0);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (angle != 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbbox = mxUtils.getBoundingBox(bbox, angle);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (bbox != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (result == null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult = mxRectangle.fromRectangle(bbox);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.add(bbox);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: refresh\n * \n * Clears all cell states or the states for the hierarchy starting at the\n * given cell and validates the graph. This fires a refresh event as the\n * last step.\n * \n * Parameters:\n * \n * cell - Optional <mxCell> for which the cell states should be cleared.\n */\nmxGraph.prototype.refresh = function(cell)\n{\n\tthis.view.clear(cell, cell == null);\n\tthis.view.validate();\n\tthis.sizeDidChange();\n\tthis.fireEvent(new mxEventObject(mxEvent.REFRESH));\n};\n\n/**\n * Function: snap\n * \n * Snaps the given numeric value to the grid if <gridEnabled> is true.\n * \n * Parameters:\n * \n * value - Numeric value to be snapped to the grid.\n */\nmxGraph.prototype.snap = function(value)\n{\n\tif (this.gridEnabled)\n\t{\n\t\tvalue = Math.round(value / this.gridSize ) * this.gridSize;\n\t}\n\t\n\treturn value;\n};\n\n/**\n * Function: snapDelta\n * \n * Snaps the given delta with the given scaled bounds.\n */\nmxGraph.prototype.snapDelta = function(delta, bounds, ignoreGrid, ignoreHorizontal, ignoreVertical)\n{\n\tvar t = this.view.translate;\n\tvar s = this.view.scale;\n\t\n\tif (!ignoreGrid && this.gridEnabled)\n\t{\n\t\tvar tol = this.gridSize * s * 0.5;\n\t\t\n\t\tif (!ignoreHorizontal)\n\t\t{\n\t\t\tvar tx = bounds.x - (this.snap(bounds.x / s - t.x) + t.x) * s;\n\t\t\t\n\t\t\tif (Math.abs(delta.x- tx) < tol)\n\t\t\t{\n\t\t\t\tdelta.x = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdelta.x = this.snap(delta.x / s) * s - tx;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!ignoreVertical)\n\t\t{\n\t\t\tvar ty = bounds.y - (this.snap(bounds.y / s - t.y) + t.y) * s;\n\t\t\t\t\n\t\t\tif (Math.abs(delta.y - ty) < tol)\n\t\t\t{\n\t\t\t\tdelta.y = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdelta.y = this.snap(delta.y / s) * s - ty;\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tvar tol = 0.5 * s;\n\t\t\n\t\tif (!ignoreHorizontal)\n\t\t{\n\t\t\tvar tx = bounds.x - (Math.round(bounds.x / s - t.x) + t.x) * s;\n\t\t\t\n\t\t\tif (Math.abs(delta.x - tx) < tol)\n\t\t\t{\n\t\t\t\tdelta.x = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdelta.x = Math.round(delta.x / s) * s - tx;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!ignoreVertical)\n\t\t{\t\t\n\t\t\tvar ty = bounds.y - (Math.round(bounds.y / s - t.y) + t.y) * s;\n\t\t\t\n\t\t\tif (Math.abs(delta.y - ty) < tol)\n\t\t\t{\n\t\t\t\tdelta.y = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdelta.y = Math.round(delta.y / s) * s - ty;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn delta;\n};\n\n/**\n * Function: panGraph\n * \n * Shifts the graph display by the given amount. This is used to preview\n * panning operations, use <mxGraphView.setTranslate> to set a persistent\n * translation of the view. Fires <mxEvent.PAN>.\n * \n * Parameters:\n * \n * dx - Amount to shift the graph along the x-axis.\n * dy - Amount to shift the graph along the y-axis.\n */\nmxGraph.prototype.panGraph = function(dx, dy)\n{\n\tif (this.useScrollbarsForPanning && mxUtils.hasScrollbars(this.container))\n\t{\n\t\tthis.container.scrollLeft = -dx;\n\t\tthis.container.scrollTop = -dy;\n\t}\n\telse\n\t{\n\t\tvar canvas = this.view.getCanvas();\n\t\t\n\t\tif (this.dialect == mxConstants.DIALECT_SVG)\n\t\t{\n\t\t\t// Puts everything inside the container in a DIV so that it\n\t\t\t// can be moved without changing the state of the container\n\t\t\tif (dx == 0 && dy == 0)\n\t\t\t{\n\t\t\t\t// Workaround for ignored removeAttribute on SVG element in IE9 standards\n\t\t\t\tif (mxClient.IS_IE)\n\t\t\t\t{\n\t\t\t\t\tcanvas.setAttribute('transform', 'translate(' + dx + ',' + dy + ')');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcanvas.removeAttribute('transform');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.shiftPreview1 != null)\n\t\t\t\t{\n\t\t\t\t\tvar child = this.shiftPreview1.firstChild;\n\t\t\t\t\t\n\t\t\t\t\twhile (child != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar next = child.nextSibling;\n\t\t\t\t\t\tthis.container.appendChild(child);\n\t\t\t\t\t\tchild = next;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.shiftPreview1.parentNode != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.shiftPreview1.parentNode.removeChild(this.shiftPreview1);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.shiftPreview1 = null;\n\t\t\t\t\t\n\t\t\t\t\tthis.container.appendChild(canvas.parentNode);\n\t\t\t\t\t\n\t\t\t\t\tchild = this.shiftPreview2.firstChild;\n\t\t\t\t\t\n\t\t\t\t\twhile (child != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar next = child.nextSibling;\n\t\t\t\t\t\tthis.container.appendChild(child);\n\t\t\t\t\t\tchild = next;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.shiftPreview2.parentNode != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.shiftPreview2.parentNode.removeChild(this.shiftPreview2);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.shiftPreview2 = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcanvas.setAttribute('transform', 'translate(' + dx + ',' + dy + ')');\n\t\t\t\t\n\t\t\t\tif (this.shiftPreview1 == null)\n\t\t\t\t{\n\t\t\t\t\t// Needs two divs for stuff before and after the SVG element\n\t\t\t\t\tthis.shiftPreview1 = document.createElement('div');\n\t\t\t\t\tthis.shiftPreview1.style.position = 'absolute';\n\t\t\t\t\tthis.shiftPreview1.style.overflow = 'visible';\n\t\t\t\t\t\n\t\t\t\t\tthis.shiftPreview2 = document.createElement('div');\n\t\t\t\t\tthis.shiftPreview2.style.position = 'absolute';\n\t\t\t\t\tthis.shiftPreview2.style.overflow = 'visible';\n\n\t\t\t\t\tvar current = this.shiftPreview1;\n\t\t\t\t\tvar child = this.container.firstChild;\n\t\t\t\t\t\n\t\t\t\t\twhile (child != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar next = child.nextSibling;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// SVG element is moved via transform attribute\n\t\t\t\t\t\tif (child != canvas.parentNode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrent.appendChild(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrent = this.shiftPreview2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tchild = next;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Inserts elements only if not empty\n\t\t\t\t\tif (this.shiftPreview1.firstChild != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.container.insertBefore(this.shiftPreview1, canvas.parentNode);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.shiftPreview2.firstChild != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.container.appendChild(this.shiftPreview2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.shiftPreview1.style.left = dx + 'px';\n\t\t\t\tthis.shiftPreview1.style.top = dy + 'px';\n\t\t\t\tthis.shiftPreview2.style.left = dx + 'px';\n\t\t\t\tthis.shiftPreview2.style.top = dy + 'px';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcanvas.style.left = dx + 'px';\n\t\t\tcanvas.style.top = dy + 'px';\n\t\t}\n\t\t\n\t\tthis.panDx = dx;\n\t\tthis.panDy = dy;\n\n\t\tthis.fireEvent(new mxEventObject(mxEvent.PAN));\n\t}\n};\n\n/**\n * Function: zoomIn\n * \n * Zooms into the graph by <zoomFactor>.\n */\nmxGraph.prototype.zoomIn = function()\n{\n\tthis.zoom(this.zoomFactor);\n};\n\n/**\n * Function: zoomOut\n * \n * Zooms out of the graph by <zoomFactor>.\n */\nmxGraph.prototype.zoomOut = function()\n{\n\tthis.zoom(1 / this.zoomFactor);\n};\n\n/**\n * Function: zoomActual\n * \n * Resets the zoom and panning in the view.\n */\nmxGraph.prototype.zoomActual = function()\n{\n\tif (this.view.scale == 1)\n\t{\n\t\tthis.view.setTranslate(0, 0);\n\t}\n\telse\n\t{\n\t\tthis.view.translate.x = 0;\n\t\tthis.view.translate.y = 0;\n\n\t\tthis.view.setScale(1);\n\t}\n};\n\n/**\n * Function: zoomTo\n * \n * Zooms the graph to the given scale with an optional boolean center\n * argument, which is passd to <zoom>.\n */\nmxGraph.prototype.zoomTo = function(scale, center)\n{\n\tthis.zoom(scale / this.view.scale, center);\n};\n\n/**\n * Function: center\n * \n * Centers the graph in the container.\n * \n * Parameters:\n * \n * horizontal - Optional boolean that specifies if the graph should be centered\n * horizontally. Default is true.\n * vertical - Optional boolean that specifies if the graph should be centered\n * vertically. Default is true.\n * cx - Optional float that specifies the horizontal center. Default is 0.5.\n * cy - Optional float that specifies the vertical center. Default is 0.5.\n */\nmxGraph.prototype.center = function(horizontal, vertical, cx, cy)\n{\n\thorizontal = (horizontal != null) ? horizontal : true;\n\tvertical = (vertical != null) ? vertical : true;\n\tcx = (cx != null) ? cx : 0.5;\n\tcy = (cy != null) ? cy : 0.5;\n\t\n\tvar hasScrollbars = mxUtils.hasScrollbars(this.container);\n\tvar padding = 2 * this.getBorder();\n\tvar cw = this.container.clientWidth - padding;\n\tvar ch = this.container.clientHeight - padding;\n\tvar bounds = this.getGraphBounds();\n\n\tvar t = this.view.translate;\n\tvar s = this.view.scale;\n\n\tvar dx = (horizontal) ? cw - bounds.width : 0;\n\tvar dy = (vertical) ? ch - bounds.height : 0;\n\t\n\tif (!hasScrollbars)\n\t{\n\t\tthis.view.setTranslate((horizontal) ? Math.floor(t.x - bounds.x * s + dx * cx / s) : t.x,\n\t\t\t(vertical) ? Math.floor(t.y - bounds.y * s + dy * cy / s) : t.y);\n\t}\n\telse\n\t{\n\t\tbounds.x -= t.x;\n\t\tbounds.y -= t.y;\n\t\n\t\tvar sw = this.container.scrollWidth;\n\t\tvar sh = this.container.scrollHeight;\n\t\t\n\t\tif (sw > cw)\n\t\t{\n\t\t\tdx = 0;\n\t\t}\n\t\t\n\t\tif (sh > ch)\n\t\t{\n\t\t\tdy = 0;\n\t\t}\n\n\t\tthis.view.setTranslate(Math.floor(dx / 2 - bounds.x), Math.floor(dy / 2 - bounds.y));\n\t\tthis.container.scrollLeft = (sw - cw) / 2;\n\t\tthis.container.scrollTop = (sh - ch) / 2;\n\t}\n};\n\n/**\n * Function: zoom\n * \n * Zooms the graph using the given factor. Center is an optional boolean\n * argument that keeps the graph scrolled to the center. If the center argument\n * is omitted, then <centerZoom> will be used as its value.\n */\nmxGraph.prototype.zoom = function(factor, center)\n{\n\tcenter = (center != null) ? center : this.centerZoom;\n\tvar scale = Math.round(this.view.scale * factor * 100) / 100;\n\tvar state = this.view.getState(this.getSelectionCell());\n\tfactor = scale / this.view.scale;\n\t\n\tif (this.keepSelectionVisibleOnZoom && state != null)\n\t{\n\t\tvar rect = new mxRectangle(state.x * factor, state.y * factor,\n\t\t\tstate.width * factor, state.height * factor);\n\t\t\n\t\t// Refreshes the display only once if a scroll is carried out\n\t\tthis.view.scale = scale;\n\t\t\n\t\tif (!this.scrollRectToVisible(rect))\n\t\t{\n\t\t\tthis.view.revalidate();\n\t\t\t\n\t\t\t// Forces an event to be fired but does not revalidate again\n\t\t\tthis.view.setScale(scale);\n\t\t}\n\t}\n\telse\n\t{\n\t\tvar hasScrollbars = mxUtils.hasScrollbars(this.container);\n\t\t\n\t\tif (center && !hasScrollbars)\n\t\t{\n\t\t\tvar dx = this.container.offsetWidth;\n\t\t\tvar dy = this.container.offsetHeight;\n\t\t\t\n\t\t\tif (factor > 1)\n\t\t\t{\n\t\t\t\tvar f = (factor - 1) / (scale * 2);\n\t\t\t\tdx *= -f;\n\t\t\t\tdy *= -f;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar f = (1 / factor - 1) / (this.view.scale * 2);\n\t\t\t\tdx *= f;\n\t\t\t\tdy *= f;\n\t\t\t}\n\n\t\t\tthis.view.scaleAndTranslate(scale,\n\t\t\t\tthis.view.translate.x + dx,\n\t\t\t\tthis.view.translate.y + dy);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Allows for changes of translate and scrollbars during setscale\n\t\t\tvar tx = this.view.translate.x;\n\t\t\tvar ty = this.view.translate.y;\n\t\t\tvar sl = this.container.scrollLeft;\n\t\t\tvar st = this.container.scrollTop;\n\t\t\t\n\t\t\tthis.view.setScale(scale);\n\t\t\t\n\t\t\tif (hasScrollbars)\n\t\t\t{\n\t\t\t\tvar dx = 0;\n\t\t\t\tvar dy = 0;\n\t\t\t\t\n\t\t\t\tif (center)\n\t\t\t\t{\n\t\t\t\t\tdx = this.container.offsetWidth * (factor - 1) / 2;\n\t\t\t\t\tdy = this.container.offsetHeight * (factor - 1) / 2;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.container.scrollLeft = (this.view.translate.x - tx) * this.view.scale + Math.round(sl * factor + dx);\n\t\t\t\tthis.container.scrollTop = (this.view.translate.y - ty) * this.view.scale + Math.round(st * factor + dy);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: zoomToRect\n * \n * Zooms the graph to the specified rectangle. If the rectangle does not have same aspect\n * ratio as the display container, it is increased in the smaller relative dimension only\n * until the aspect match. The original rectangle is centralised within this expanded one.\n * \n * Note that the input rectangular must be un-scaled and un-translated.\n * \n * Parameters:\n * \n * rect - The un-scaled and un-translated rectangluar region that should be just visible \n * after the operation\n */\nmxGraph.prototype.zoomToRect = function(rect)\n{\n\tvar scaleX = this.container.clientWidth / rect.width;\n\tvar scaleY = this.container.clientHeight / rect.height;\n\tvar aspectFactor = scaleX / scaleY;\n\n\t// Remove any overlap of the rect outside the client area\n\trect.x = Math.max(0, rect.x);\n\trect.y = Math.max(0, rect.y);\n\tvar rectRight = Math.min(this.container.scrollWidth, rect.x + rect.width);\n\tvar rectBottom = Math.min(this.container.scrollHeight, rect.y + rect.height);\n\trect.width = rectRight - rect.x;\n\trect.height = rectBottom - rect.y;\n\n\t// The selection area has to be increased to the same aspect\n\t// ratio as the container, centred around the centre point of the \n\t// original rect passed in.\n\tif (aspectFactor < 1.0)\n\t{\n\t\t// Height needs increasing\n\t\tvar newHeight = rect.height / aspectFactor;\n\t\tvar deltaHeightBuffer = (newHeight - rect.height) / 2.0;\n\t\trect.height = newHeight;\n\t\t\n\t\t// Assign up to half the buffer to the upper part of the rect, not crossing 0\n\t\t// put the rest on the bottom\n\t\tvar upperBuffer = Math.min(rect.y , deltaHeightBuffer);\n\t\trect.y = rect.y - upperBuffer;\n\t\t\n\t\t// Check if the bottom has extended too far\n\t\trectBottom = Math.min(this.container.scrollHeight, rect.y + rect.height);\n\t\trect.height = rectBottom - rect.y;\n\t}\n\telse\n\t{\n\t\t// Width needs increasing\n\t\tvar newWidth = rect.width * aspectFactor;\n\t\tvar deltaWidthBuffer = (newWidth - rect.width) / 2.0;\n\t\trect.width = newWidth;\n\t\t\n\t\t// Assign up to half the buffer to the upper part of the rect, not crossing 0\n\t\t// put the rest on the bottom\n\t\tvar leftBuffer = Math.min(rect.x , deltaWidthBuffer);\n\t\trect.x = rect.x - leftBuffer;\n\t\t\n\t\t// Check if the right hand side has extended too far\n\t\trectRight = Math.min(this.container.scrollWidth, rect.x + rect.width);\n\t\trect.width = rectRight - rect.x;\n\t}\n\n\tvar scale = this.container.clientWidth / rect.width;\n\tvar newScale = this.view.scale * scale;\n\n\tif (!mxUtils.hasScrollbars(this.container))\n\t{\n\t\tthis.view.scaleAndTranslate(newScale, (this.view.translate.x - rect.x / this.view.scale), (this.view.translate.y - rect.y / this.view.scale));\n\t}\n\telse\n\t{\n\t\tthis.view.setScale(newScale);\n\t\tthis.container.scrollLeft = Math.round(rect.x * scale);\n\t\tthis.container.scrollTop = Math.round(rect.y * scale);\n\t}\n};\n\n/**\n * Function: scrollCellToVisible\n * \n * Pans the graph so that it shows the given cell. Optionally the cell may\n * be centered in the container.\n * \n * To center a given graph if the <container> has no scrollbars, use the following code.\n * \n * [code]\n * var bounds = graph.getGraphBounds();\n * graph.view.setTranslate(-bounds.x - (bounds.width - container.clientWidth) / 2,\n * \t\t\t\t\t\t   -bounds.y - (bounds.height - container.clientHeight) / 2);\n * [/code]\n * \n * Parameters:\n * \n * cell - <mxCell> to be made visible.\n * center - Optional boolean flag. Default is false.\n */\nmxGraph.prototype.scrollCellToVisible = function(cell, center)\n{\n\tvar x = -this.view.translate.x;\n\tvar y = -this.view.translate.y;\n\n\tvar state = this.view.getState(cell);\n\n\tif (state != null)\n\t{\n\t\tvar bounds = new mxRectangle(x + state.x, y + state.y, state.width,\n\t\t\tstate.height);\n\n\t\tif (center && this.container != null)\n\t\t{\n\t\t\tvar w = this.container.clientWidth;\n\t\t\tvar h = this.container.clientHeight;\n\n\t\t\tbounds.x = bounds.getCenterX() - w / 2;\n\t\t\tbounds.width = w;\n\t\t\tbounds.y = bounds.getCenterY() - h / 2;\n\t\t\tbounds.height = h;\n\t\t}\n\t\t\n\t\tvar tr = new mxPoint(this.view.translate.x, this.view.translate.y);\n\n\t\tif (this.scrollRectToVisible(bounds))\n\t\t{\n\t\t\t// Triggers an update via the view's event source\n\t\t\tvar tr2 = new mxPoint(this.view.translate.x, this.view.translate.y);\n\t\t\tthis.view.translate.x = tr.x;\n\t\t\tthis.view.translate.y = tr.y;\n\t\t\tthis.view.setTranslate(tr2.x, tr2.y);\n\t\t}\n\t}\n};\n\n/**\n * Function: scrollRectToVisible\n * \n * Pans the graph so that it shows the given rectangle.\n * \n * Parameters:\n * \n * rect - <mxRectangle> to be made visible.\n */\nmxGraph.prototype.scrollRectToVisible = function(rect)\n{\n\tvar isChanged = false;\n\t\n\tif (rect != null)\n\t{\n\t\tvar w = this.container.offsetWidth;\n\t\tvar h = this.container.offsetHeight;\n\n        var widthLimit = Math.min(w, rect.width);\n        var heightLimit = Math.min(h, rect.height);\n\n\t\tif (mxUtils.hasScrollbars(this.container))\n\t\t{\n\t\t\tvar c = this.container;\n\t\t\trect.x += this.view.translate.x;\n\t\t\trect.y += this.view.translate.y;\n\t\t\tvar dx = c.scrollLeft - rect.x;\n\t\t\tvar ddx = Math.max(dx - c.scrollLeft, 0);\n\n\t\t\tif (dx > 0)\n\t\t\t{\n\t\t\t\tc.scrollLeft -= dx + 2;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdx = rect.x + widthLimit - c.scrollLeft - c.clientWidth;\n\n\t\t\t\tif (dx > 0)\n\t\t\t\t{\n\t\t\t\t\tc.scrollLeft += dx + 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar dy = c.scrollTop - rect.y;\n\t\t\tvar ddy = Math.max(0, dy - c.scrollTop);\n\n\t\t\tif (dy > 0)\n\t\t\t{\n\t\t\t\tc.scrollTop -= dy + 2;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdy = rect.y + heightLimit - c.scrollTop - c.clientHeight;\n\n\t\t\t\tif (dy > 0)\n\t\t\t\t{\n\t\t\t\t\tc.scrollTop += dy + 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.useScrollbarsForPanning && (ddx != 0 || ddy != 0))\n\t\t\t{\n\t\t\t\tthis.view.setTranslate(ddx, ddy);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar x = -this.view.translate.x;\n\t\t\tvar y = -this.view.translate.y;\n\n\t\t\tvar s = this.view.scale;\n\n\t\t\tif (rect.x + widthLimit > x + w)\n\t\t\t{\n\t\t\t\tthis.view.translate.x -= (rect.x + widthLimit - w - x) / s;\n\t\t\t\tisChanged = true;\n\t\t\t}\n\n\t\t\tif (rect.y + heightLimit > y + h)\n\t\t\t{\n\t\t\t\tthis.view.translate.y -= (rect.y + heightLimit - h - y) / s;\n\t\t\t\tisChanged = true;\n\t\t\t}\n\n\t\t\tif (rect.x < x)\n\t\t\t{\n\t\t\t\tthis.view.translate.x += (x - rect.x) / s;\n\t\t\t\tisChanged = true;\n\t\t\t}\n\n\t\t\tif (rect.y  < y)\n\t\t\t{\n\t\t\t\tthis.view.translate.y += (y - rect.y) / s;\n\t\t\t\tisChanged = true;\n\t\t\t}\n\n\t\t\tif (isChanged)\n\t\t\t{\n\t\t\t\tthis.view.refresh();\n\t\t\t\t\n\t\t\t\t// Repaints selection marker (ticket 18)\n\t\t\t\tif (this.selectionCellsHandler != null)\n\t\t\t\t{\n\t\t\t\t\tthis.selectionCellsHandler.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn isChanged;\n};\n\n/**\n * Function: getCellGeometry\n * \n * Returns the <mxGeometry> for the given cell. This implementation uses\n * <mxGraphModel.getGeometry>. Subclasses can override this to implement\n * specific geometries for cells in only one graph, that is, it can return\n * geometries that depend on the current state of the view.\n * \n * Parameters:\n * \n * cell - <mxCell> whose geometry should be returned.\n */\nmxGraph.prototype.getCellGeometry = function(cell)\n{\n\treturn this.model.getGeometry(cell);\n};\n\n/**\n * Function: isCellVisible\n * \n * Returns true if the given cell is visible in this graph. This\n * implementation uses <mxGraphModel.isVisible>. Subclassers can override\n * this to implement specific visibility for cells in only one graph, that\n * is, without affecting the visible state of the cell.\n * \n * When using dynamic filter expressions for cell visibility, then the\n * graph should be revalidated after the filter expression has changed.\n * \n * Parameters:\n * \n * cell - <mxCell> whose visible state should be returned.\n */\nmxGraph.prototype.isCellVisible = function(cell)\n{\n\treturn this.model.isVisible(cell);\n};\n\n/**\n * Function: isCellCollapsed\n * \n * Returns true if the given cell is collapsed in this graph. This\n * implementation uses <mxGraphModel.isCollapsed>. Subclassers can override\n * this to implement specific collapsed states for cells in only one graph,\n * that is, without affecting the collapsed state of the cell.\n * \n * When using dynamic filter expressions for the collapsed state, then the\n * graph should be revalidated after the filter expression has changed.\n * \n * Parameters:\n * \n * cell - <mxCell> whose collapsed state should be returned.\n */\nmxGraph.prototype.isCellCollapsed = function(cell)\n{\n\treturn this.model.isCollapsed(cell);\n};\n\n/**\n * Function: isCellConnectable\n * \n * Returns true if the given cell is connectable in this graph. This\n * implementation uses <mxGraphModel.isConnectable>. Subclassers can override\n * this to implement specific connectable states for cells in only one graph,\n * that is, without affecting the connectable state of the cell in the model.\n * \n * Parameters:\n * \n * cell - <mxCell> whose connectable state should be returned.\n */\nmxGraph.prototype.isCellConnectable = function(cell)\n{\n\treturn this.model.isConnectable(cell);\n};\n\n/**\n * Function: isOrthogonal\n * \n * Returns true if perimeter points should be computed such that the\n * resulting edge has only horizontal or vertical segments.\n * \n * Parameters:\n * \n * edge - <mxCellState> that represents the edge.\n */\nmxGraph.prototype.isOrthogonal = function(edge)\n{\n\tvar orthogonal = edge.style[mxConstants.STYLE_ORTHOGONAL];\n\t\n\tif (orthogonal != null)\n\t{\n\t\treturn orthogonal;\n\t}\n\t\n\tvar tmp = this.view.getEdgeStyle(edge);\n\t\n\treturn tmp == mxEdgeStyle.SegmentConnector ||\n\t\ttmp == mxEdgeStyle.ElbowConnector ||\n\t\ttmp == mxEdgeStyle.SideToSide ||\n\t\ttmp == mxEdgeStyle.TopToBottom ||\n\t\ttmp == mxEdgeStyle.EntityRelation ||\n\t\ttmp == mxEdgeStyle.OrthConnector;\n};\n\n/**\n * Function: isLoop\n * \n * Returns true if the given cell state is a loop.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents a potential loop.\n */\nmxGraph.prototype.isLoop = function(state)\n{\n\tvar src = state.getVisibleTerminalState(true);\n\tvar trg = state.getVisibleTerminalState(false);\n\t\n\treturn (src != null && src == trg);\n};\n\n/**\n * Function: isCloneEvent\n * \n * Returns true if the given event is a clone event. This implementation\n * returns true if control is pressed.\n */\nmxGraph.prototype.isCloneEvent = function(evt)\n{\n\treturn mxEvent.isControlDown(evt);\n};\n\n/**\n * Function: isTransparentClickEvent\n * \n * Hook for implementing click-through behaviour on selected cells. If this\n * returns true the cell behind the selected cell will be selected. This\n * implementation returns false;\n */\nmxGraph.prototype.isTransparentClickEvent = function(evt)\n{\n\treturn false;\n};\n\n/**\n * Function: isToggleEvent\n * \n * Returns true if the given event is a toggle event. This implementation\n * returns true if the meta key (Cmd) is pressed on Macs or if control is\n * pressed on any other platform.\n */\nmxGraph.prototype.isToggleEvent = function(evt)\n{\n\treturn (mxClient.IS_MAC) ? mxEvent.isMetaDown(evt) : mxEvent.isControlDown(evt);\n};\n\n/**\n * Function: isGridEnabledEvent\n * \n * Returns true if the given mouse event should be aligned to the grid.\n */\nmxGraph.prototype.isGridEnabledEvent = function(evt)\n{\n\treturn evt != null && !mxEvent.isAltDown(evt);\n};\n\n/**\n * Function: isConstrainedEvent\n * \n * Returns true if the given mouse event should be aligned to the grid.\n */\nmxGraph.prototype.isConstrainedEvent = function(evt)\n{\n\treturn mxEvent.isShiftDown(evt);\n};\n\n/**\n * Function: isIgnoreTerminalEvent\n * \n * Returns true if the given mouse event should not allow any connections to be\n * made. This implementation returns false.\n */\nmxGraph.prototype.isIgnoreTerminalEvent = function(evt)\n{\n\treturn false;\n};\n\n/**\n * Group: Validation\n */\n\n/**\n * Function: validationAlert\n * \n * Displays the given validation error in a dialog. This implementation uses\n * mxUtils.alert.\n */\nmxGraph.prototype.validationAlert = function(message)\n{\n\tmxUtils.alert(message);\n};\n\n/**\n * Function: isEdgeValid\n * \n * Checks if the return value of <getEdgeValidationError> for the given\n * arguments is null.\n *  \n * Parameters:\n * \n * edge - <mxCell> that represents the edge to validate.\n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n */\nmxGraph.prototype.isEdgeValid = function(edge, source, target)\n{\n\treturn this.getEdgeValidationError(edge, source, target) == null;\n};\n\n/**\n * Function: getEdgeValidationError\n * \n * Returns the validation error message to be displayed when inserting or\n * changing an edges' connectivity. A return value of null means the edge\n * is valid, a return value of '' means it's not valid, but do not display\n * an error message. Any other (non-empty) string returned from this method\n * is displayed as an error message when trying to connect an edge to a\n * source and target. This implementation uses the <multiplicities>, and\n * checks <multigraph>, <allowDanglingEdges> and <allowLoops> to generate\n * validation errors.\n * \n * For extending this method with specific checks for source/target cells,\n * the method can be extended as follows. Returning an empty string means\n * the edge is invalid with no error message, a non-null string specifies\n * the error message, and null means the edge is valid.\n * \n * (code)\n * graph.getEdgeValidationError = function(edge, source, target)\n * {\n *   if (source != null && target != null &&\n *     this.model.getValue(source) != null &&\n *     this.model.getValue(target) != null)\n *   {\n *     if (target is not valid for source)\n *     {\n *       return 'Invalid Target';\n *     }\n *   }\n *   \n *   // \"Supercall\"\n *   return mxGraph.prototype.getEdgeValidationError.apply(this, arguments);\n * }\n * (end)\n *  \n * Parameters:\n * \n * edge - <mxCell> that represents the edge to validate.\n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n */\nmxGraph.prototype.getEdgeValidationError = function(edge, source, target)\n{\n\tif (edge != null && !this.isAllowDanglingEdges() && (source == null || target == null))\n\t{\n\t\treturn '';\n\t}\n\t\n\tif (edge != null && this.model.getTerminal(edge, true) == null &&\n\t\tthis.model.getTerminal(edge, false) == null)\t\n\t{\n\t\treturn null;\n\t}\n\t\n\t// Checks if we're dealing with a loop\n\tif (!this.allowLoops && source == target && source != null)\n\t{\n\t\treturn '';\n\t}\n\t\n\t// Checks if the connection is generally allowed\n\tif (!this.isValidConnection(source, target))\n\t{\n\t\treturn '';\n\t}\n\n\tif (source != null && target != null)\n\t{\n\t\tvar error = '';\n\n\t\t// Checks if the cells are already connected\n\t\t// and adds an error message if required\t\t\t\n\t\tif (!this.multigraph)\n\t\t{\n\t\t\tvar tmp = this.model.getEdgesBetween(source, target, true);\n\t\t\t\n\t\t\t// Checks if the source and target are not connected by another edge\n\t\t\tif (tmp.length > 1 || (tmp.length == 1 && tmp[0] != edge))\n\t\t\t{\n\t\t\t\terror += (mxResources.get(this.alreadyConnectedResource) ||\n\t\t\t\t\tthis.alreadyConnectedResource)+'\\n';\n\t\t\t}\n\t\t}\n\n\t\t// Gets the number of outgoing edges from the source\n\t\t// and the number of incoming edges from the target\n\t\t// without counting the edge being currently changed.\n\t\tvar sourceOut = this.model.getDirectedEdgeCount(source, true, edge);\n\t\tvar targetIn = this.model.getDirectedEdgeCount(target, false, edge);\n\n\t\t// Checks the change against each multiplicity rule\n\t\tif (this.multiplicities != null)\n\t\t{\n\t\t\tfor (var i = 0; i < this.multiplicities.length; i++)\n\t\t\t{\n\t\t\t\tvar err = this.multiplicities[i].check(this, edge, source,\n\t\t\t\t\ttarget, sourceOut, targetIn);\n\t\t\t\t\n\t\t\t\tif (err != null)\n\t\t\t\t{\n\t\t\t\t\terror += err;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Validates the source and target terminals independently\n\t\tvar err = this.validateEdge(edge, source, target);\n\t\t\n\t\tif (err != null)\n\t\t{\n\t\t\terror += err;\n\t\t}\n\t\t\n\t\treturn (error.length > 0) ? error : null;\n\t}\n\t\n\treturn (this.allowDanglingEdges) ? null : '';\n};\n\n/**\n * Function: validateEdge\n * \n * Hook method for subclassers to return an error message for the given\n * edge and terminals. This implementation returns null.\n * \n * Parameters:\n * \n * edge - <mxCell> that represents the edge to validate.\n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n */\nmxGraph.prototype.validateEdge = function(edge, source, target)\n{\n\treturn null;\n};\n\n/**\n * Function: validateGraph\n * \n * Validates the graph by validating each descendant of the given cell or\n * the root of the model. Context is an object that contains the validation\n * state for the complete validation run. The validation errors are\n * attached to their cells using <setCellWarning>. Returns null in the case of\n * successful validation or an array of strings (warnings) in the case of\n * failed validations.\n * \n * Paramters:\n * \n * cell - Optional <mxCell> to start the validation recursion. Default is\n * the graph root.\n * context - Object that represents the global validation state.\n */\nmxGraph.prototype.validateGraph = function(cell, context)\n{\n\tcell = (cell != null) ? cell : this.model.getRoot();\n\tcontext = (context != null) ? context : new Object();\n\t\n\tvar isValid = true;\n\tvar childCount = this.model.getChildCount(cell);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar tmp = this.model.getChildAt(cell, i);\n\t\tvar ctx = context;\n\t\t\n\t\tif (this.isValidRoot(tmp))\n\t\t{\n\t\t\tctx = new Object();\n\t\t}\n\t\t\n\t\tvar warn = this.validateGraph(tmp, ctx);\n\t\t\n\t\tif (warn != null)\n\t\t{\n\t\t\tthis.setCellWarning(tmp, warn.replace(/\\n/g, '<br>'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setCellWarning(tmp, null);\n\t\t}\n\t\t\n\t\tisValid = isValid && warn == null;\n\t}\n\t\n\tvar warning = '';\n\t\n\t// Adds error for invalid children if collapsed (children invisible)\n\tif (this.isCellCollapsed(cell) && !isValid)\n\t{\n\t\twarning += (mxResources.get(this.containsValidationErrorsResource) ||\n\t\t\tthis.containsValidationErrorsResource) + '\\n';\n\t}\n\t\n\t// Checks edges and cells using the defined multiplicities\n\tif (this.model.isEdge(cell))\n\t{\n\t\twarning += this.getEdgeValidationError(cell,\n\t\tthis.model.getTerminal(cell, true),\n\t\tthis.model.getTerminal(cell, false)) || '';\n\t}\n\telse\n\t{\n\t\twarning += this.getCellValidationError(cell) || '';\n\t}\n\t\n\t// Checks custom validation rules\n\tvar err = this.validateCell(cell, context);\n\t\n\tif (err != null)\n\t{\n\t\twarning += err;\n\t}\n\t\n\t// Updates the display with the warning icons\n\t// before any potential alerts are displayed.\n\t// LATER: Move this into addCellOverlay. Redraw\n\t// should check if overlay was added or removed.\n\tif (this.model.getParent(cell) == null)\n\t{\n\t\tthis.view.validate();\n\t}\n\n\treturn (warning.length > 0 || !isValid) ? warning : null;\n};\n\n/**\n * Function: getCellValidationError\n * \n * Checks all <multiplicities> that cannot be enforced while the graph is\n * being modified, namely, all multiplicities that require a minimum of\n * 1 edge.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the multiplicities should be checked.\n */\nmxGraph.prototype.getCellValidationError = function(cell)\n{\n\tvar outCount = this.model.getDirectedEdgeCount(cell, true);\n\tvar inCount = this.model.getDirectedEdgeCount(cell, false);\n\tvar value = this.model.getValue(cell);\n\tvar error = '';\n\n\tif (this.multiplicities != null)\n\t{\n\t\tfor (var i = 0; i < this.multiplicities.length; i++)\n\t\t{\n\t\t\tvar rule = this.multiplicities[i];\n\t\t\t\n\t\t\tif (rule.source && mxUtils.isNode(value, rule.type,\n\t\t\t\trule.attr, rule.value) && (outCount > rule.max ||\n\t\t\t\toutCount < rule.min))\n\t\t\t{\n\t\t\t\terror += rule.countError + '\\n';\n\t\t\t}\n\t\t\telse if (!rule.source && mxUtils.isNode(value, rule.type,\n\t\t\t\t\trule.attr, rule.value) && (inCount > rule.max ||\n\t\t\t\t\tinCount < rule.min))\n\t\t\t{\n\t\t\t\terror += rule.countError + '\\n';\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (error.length > 0) ? error : null;\n};\n\n/**\n * Function: validateCell\n * \n * Hook method for subclassers to return an error message for the given\n * cell and validation context. This implementation returns null. Any HTML\n * breaks will be converted to linefeeds in the calling method.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the cell to validate.\n * context - Object that represents the global validation state.\n */\nmxGraph.prototype.validateCell = function(cell, context)\n{\n\treturn null;\n};\n\n/**\n * Group: Graph appearance\n */\n\n/**\n * Function: getBackgroundImage\n * \n * Returns the <backgroundImage> as an <mxImage>.\n */\nmxGraph.prototype.getBackgroundImage = function()\n{\n\treturn this.backgroundImage;\n};\n\n/**\n * Function: setBackgroundImage\n * \n * Sets the new <backgroundImage>.\n * \n * Parameters:\n * \n * image - New <mxImage> to be used for the background.\n */\nmxGraph.prototype.setBackgroundImage = function(image)\n{\n\tthis.backgroundImage = image;\n};\n\n/**\n * Function: getFoldingImage\n * \n * Returns the <mxImage> used to display the collapsed state of\n * the specified cell state. This returns null for all edges.\n */\nmxGraph.prototype.getFoldingImage = function(state)\n{\n\tif (state != null && this.foldingEnabled && !this.getModel().isEdge(state.cell))\n\t{\n\t\tvar tmp = this.isCellCollapsed(state.cell);\n\t\t\n\t\tif (this.isCellFoldable(state.cell, !tmp))\n\t\t{\n\t\t\treturn (tmp) ? this.collapsedImage : this.expandedImage;\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: convertValueToString\n * \n * Returns the textual representation for the given cell. This\n * implementation returns the nodename or string-representation of the user\n * object.\n *\n * Example:\n * \n * The following returns the label attribute from the cells user\n * object if it is an XML node.\n * \n * (code)\n * graph.convertValueToString = function(cell)\n * {\n * \treturn cell.getAttribute('label');\n * }\n * (end)\n * \n * See also: <cellLabelChanged>.\n * \n * Parameters:\n * \n * cell - <mxCell> whose textual representation should be returned.\n */\nmxGraph.prototype.convertValueToString = function(cell)\n{\n\tvar value = this.model.getValue(cell);\n\t\n\tif (value != null)\n\t{\n\t\tif (mxUtils.isNode(value))\n\t\t{\n\t\t\treturn value.nodeName;\n\t\t}\n\t\telse if (typeof(value.toString) == 'function')\n\t\t{\n\t\t\treturn value.toString();\n\t\t}\n\t}\n\t\n\treturn '';\n};\n\n/**\n * Function: getLabel\n * \n * Returns a string or DOM node that represents the label for the given\n * cell. This implementation uses <convertValueToString> if <labelsVisible>\n * is true. Otherwise it returns an empty string.\n * \n * To truncate a label to match the size of the cell, the following code\n * can be used.\n * \n * (code)\n * graph.getLabel = function(cell)\n * {\n *   var label = mxGraph.prototype.getLabel.apply(this, arguments);\n * \n *   if (label != null && this.model.isVertex(cell))\n *   {\n *     var geo = this.getCellGeometry(cell);\n * \n *     if (geo != null)\n *     {\n *       var max = parseInt(geo.width / 8);\n * \n *       if (label.length > max)\n *       {\n *         label = label.substring(0, max)+'...';\n *       }\n *     }\n *   } \n *   return mxUtils.htmlEntities(label);\n * }\n * (end)\n * \n * A resize listener is needed in the graph to force a repaint of the label\n * after a resize.\n * \n * (code)\n * graph.addListener(mxEvent.RESIZE_CELLS, function(sender, evt)\n * {\n *   var cells = evt.getProperty('cells');\n * \n *   for (var i = 0; i < cells.length; i++)\n *   {\n *     this.view.removeState(cells[i]);\n *   }\n * });\n * (end)\n * \n * Parameters:\n * \n * cell - <mxCell> whose label should be returned.\n */\nmxGraph.prototype.getLabel = function(cell)\n{\n\tvar result = '';\n\t\n\tif (this.labelsVisible && cell != null)\n\t{\n\t\tvar style = this.getCurrentCellStyle(cell);\n\t\t\n\t\tif (!mxUtils.getValue(style, mxConstants.STYLE_NOLABEL, false))\n\t\t{\n\t\t\tresult = this.convertValueToString(cell);\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: isHtmlLabel\n * \n * Returns true if the label must be rendered as HTML markup. The default\n * implementation returns <htmlLabels>.\n * \n * Parameters:\n * \n * cell - <mxCell> whose label should be displayed as HTML markup.\n */\nmxGraph.prototype.isHtmlLabel = function(cell)\n{\n\treturn this.isHtmlLabels();\n};\n \n/**\n * Function: isHtmlLabels\n * \n * Returns <htmlLabels>.\n */\nmxGraph.prototype.isHtmlLabels = function()\n{\n\treturn this.htmlLabels;\n};\n \n/**\n * Function: setHtmlLabels\n * \n * Sets <htmlLabels>.\n */\nmxGraph.prototype.setHtmlLabels = function(value)\n{\n\tthis.htmlLabels = value;\n};\n\n/**\n * Function: isWrapping\n * \n * This enables wrapping for HTML labels.\n * \n * Returns true if no white-space CSS style directive should be used for\n * displaying the given cells label. This implementation returns true if\n * <mxConstants.STYLE_WHITE_SPACE> in the style of the given cell is 'wrap'.\n * \n * This is used as a workaround for IE ignoring the white-space directive\n * of child elements if the directive appears in a parent element. It\n * should be overridden to return true if a white-space directive is used\n * in the HTML markup that represents the given cells label. In order for\n * HTML markup to work in labels, <isHtmlLabel> must also return true\n * for the given cell.\n * \n * Example:\n * \n * (code)\n * graph.getLabel = function(cell)\n * {\n *   var tmp = mxGraph.prototype.getLabel.apply(this, arguments); // \"supercall\"\n *   \n *   if (this.model.isEdge(cell))\n *   {\n *     tmp = '<div style=\"width: 150px; white-space:normal;\">'+tmp+'</div>';\n *   }\n *   \n *   return tmp;\n * }\n * \n * graph.isWrapping = function(state)\n * {\n * \t return this.model.isEdge(state.cell);\n * }\n * (end)\n * \n * Makes sure no edge label is wider than 150 pixels, otherwise the content\n * is wrapped. Note: No width must be specified for wrapped vertex labels as\n * the vertex defines the width in its geometry.\n * \n * Parameters:\n * \n * state - <mxCell> whose label should be wrapped.\n */\nmxGraph.prototype.isWrapping = function(cell)\n{\n\treturn this.getCurrentCellStyle(cell)[mxConstants.STYLE_WHITE_SPACE] == 'wrap';\n};\n\n/**\n * Function: isLabelClipped\n * \n * Returns true if the overflow portion of labels should be hidden. If this\n * returns true then vertex labels will be clipped to the size of the vertices.\n * This implementation returns true if <mxConstants.STYLE_OVERFLOW> in the\n * style of the given cell is 'hidden'.\n * \n * Parameters:\n * \n * state - <mxCell> whose label should be clipped.\n */\nmxGraph.prototype.isLabelClipped = function(cell)\n{\n\treturn this.getCurrentCellStyle(cell)[mxConstants.STYLE_OVERFLOW] == 'hidden';\n};\n\n/**\n * Function: getTooltip\n * \n * Returns the string or DOM node that represents the tooltip for the given\n * state, node and coordinate pair. This implementation checks if the given\n * node is a folding icon or overlay and returns the respective tooltip. If\n * this does not result in a tooltip, the handler for the cell is retrieved\n * from <selectionCellsHandler> and the optional getTooltipForNode method is\n * called. If no special tooltip exists here then <getTooltipForCell> is used\n * with the cell in the given state as the argument to return a tooltip for the\n * given state.\n * \n * Parameters:\n * \n * state - <mxCellState> whose tooltip should be returned.\n * node - DOM node that is currently under the mouse.\n * x - X-coordinate of the mouse.\n * y - Y-coordinate of the mouse.\n */\nmxGraph.prototype.getTooltip = function(state, node, x, y)\n{\n\tvar tip = null;\n\t\n\tif (state != null)\n\t{\n\t\t// Checks if the mouse is over the folding icon\n\t\tif (state.control != null && (node == state.control.node ||\n\t\t\tnode.parentNode == state.control.node))\n\t\t{\n\t\t\ttip = this.collapseExpandResource;\n\t\t\ttip = mxUtils.htmlEntities(mxResources.get(tip) || tip).replace(/\\\\n/g, '<br>');\n\t\t}\n\n\t\tif (tip == null && state.overlays != null)\n\t\t{\n\t\t\tstate.overlays.visit(function(id, shape)\n\t\t\t{\n\t\t\t\t// LATER: Exit loop if tip is not null\n\t\t\t\tif (tip == null && (node == shape.node || node.parentNode == shape.node))\n\t\t\t\t{\n\t\t\t\t\ttip = shape.overlay.toString();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (tip == null)\n\t\t{\n\t\t\tvar handler = this.selectionCellsHandler.getHandler(state.cell);\n\t\t\t\n\t\t\tif (handler != null && typeof(handler.getTooltipForNode) == 'function')\n\t\t\t{\n\t\t\t\ttip = handler.getTooltipForNode(node);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (tip == null)\n\t\t{\n\t\t\ttip = this.getTooltipForCell(state.cell);\n\t\t}\n\t}\n\t\n\treturn tip;\n};\n\n/**\n * Function: getTooltipForCell\n * \n * Returns the string or DOM node to be used as the tooltip for the given\n * cell. This implementation uses the cells getTooltip function if it\n * exists, or else it returns <convertValueToString> for the cell.\n * \n * Example:\n * \n * (code)\n * graph.getTooltipForCell = function(cell)\n * {\n *   return 'Hello, World!';\n * }\n * (end)\n * \n * Replaces all tooltips with the string Hello, World!\n * \n * Parameters:\n * \n * cell - <mxCell> whose tooltip should be returned.\n */\nmxGraph.prototype.getTooltipForCell = function(cell)\n{\n\tvar tip = null;\n\t\n\tif (cell != null && cell.getTooltip != null)\n\t{\n\t\ttip = cell.getTooltip();\n\t}\n\telse\n\t{\n\t\ttip = this.convertValueToString(cell);\n\t}\n\t\n\treturn tip;\n};\n\n/**\n * Function: getLinkForCell\n * \n * Returns the string to be used as the link for the given cell. This\n * implementation returns null.\n * \n * Parameters:\n * \n * cell - <mxCell> whose tooltip should be returned.\n */\nmxGraph.prototype.getLinkForCell = function(cell)\n{\n\treturn null;\n};\n\n/**\n * Function: getCursorForMouseEvent\n * \n * Returns the cursor value to be used for the CSS of the shape for the\n * given event. This implementation calls <getCursorForCell>.\n * \n * Parameters:\n * \n * me - <mxMouseEvent> whose cursor should be returned.\n */\nmxGraph.prototype.getCursorForMouseEvent = function(me)\n{\n\treturn this.getCursorForCell(me.getCell());\n};\n\n/**\n * Function: getCursorForCell\n * \n * Returns the cursor value to be used for the CSS of the shape for the\n * given cell. This implementation returns null.\n * \n * Parameters:\n * \n * cell - <mxCell> whose cursor should be returned.\n */\nmxGraph.prototype.getCursorForCell = function(cell)\n{\n\treturn null;\n};\n\n/**\n * Function: getStartSize\n * \n * Returns the start size of the given swimlane, that is, the width or\n * height of the part that contains the title, depending on the\n * horizontal style. The return value is an <mxRectangle> with either\n * width or height set as appropriate.\n * \n * Parameters:\n * \n * swimlane - <mxCell> whose start size should be returned.\n * ignoreState - Optional boolean that specifies if cell state should be ignored.\n */\nmxGraph.prototype.getStartSize = function(swimlane, ignoreState)\n{\n\tvar result = new mxRectangle();\n\tvar style = this.getCurrentCellStyle(swimlane, ignoreState);\n\tvar size = parseInt(mxUtils.getValue(style,\n\t\tmxConstants.STYLE_STARTSIZE, mxConstants.DEFAULT_STARTSIZE));\n\t\n\tif (mxUtils.getValue(style, mxConstants.STYLE_HORIZONTAL, true))\n\t{\n\t\tresult.height = size;\n\t}\n\telse\n\t{\n\t\tresult.width = size;\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getSwimlaneDirection\n * \n * Returns the direction for the given swimlane style.\n */\nmxGraph.prototype.getSwimlaneDirection = function(style)\n{\n\tvar dir = mxUtils.getValue(style, mxConstants.STYLE_DIRECTION, mxConstants.DIRECTION_EAST);\n\tvar flipH = mxUtils.getValue(style, mxConstants.STYLE_FLIPH, 0) == 1;\n\tvar flipV = mxUtils.getValue(style, mxConstants.STYLE_FLIPV, 0) == 1;\n\tvar h = mxUtils.getValue(style, mxConstants.STYLE_HORIZONTAL, true);\n\tvar n = (h) ? 0 : 3;\n\t\n\tif (dir == mxConstants.DIRECTION_NORTH)\n\t{\n\t\tn--;\n\t}\n\telse if (dir == mxConstants.DIRECTION_WEST)\n\t{\n\t\tn += 2;\n\t}\n\telse if (dir == mxConstants.DIRECTION_SOUTH)\n\t{\n\t\tn += 1;\n\t}\n\t\n\tvar mod = mxUtils.mod(n, 2);\n\t\n\tif (flipH && mod == 1)\n\t{\n\t\tn += 2;\n\t}\n\t\n\tif (flipV && mod == 0)\n\t{\n\t\tn += 2;\n\t}\n\t\n\treturn [mxConstants.DIRECTION_NORTH, mxConstants.DIRECTION_EAST,\n\t\tmxConstants.DIRECTION_SOUTH, mxConstants.DIRECTION_WEST]\n\t\t[mxUtils.mod(n, 4)];\n};\n\n/**\n * Function: getActualStartSize\n * \n * Returns the actual start size of the given swimlane taking into account\n * direction and horizontal and vertial flip styles. The start size is\n * returned as an <mxRectangle> where top, left, bottom, right start sizes\n * are returned as x, y, height and width, respectively.\n * \n * Parameters:\n * \n * swimlane - <mxCell> whose start size should be returned.\n * ignoreState - Optional boolean that specifies if cell state should be ignored.\n */\nmxGraph.prototype.getActualStartSize = function(swimlane, ignoreState)\n{\n\tvar result = new mxRectangle();\n\t\n\tif (this.isSwimlane(swimlane, ignoreState))\n\t{\n\t\tvar style = this.getCurrentCellStyle(swimlane, ignoreState);\n\t\tvar size = parseInt(mxUtils.getValue(style, mxConstants.STYLE_STARTSIZE,\n\t\t\tmxConstants.DEFAULT_STARTSIZE));\n\t\tvar dir = this.getSwimlaneDirection(style);\n\t\t\n\t\tif (dir == mxConstants.DIRECTION_NORTH)\n\t\t{\n\t\t\tresult.y = size;\n\t\t}\n\t\telse if (dir == mxConstants.DIRECTION_WEST)\n\t\t{\n\t\t\tresult.x = size;\n\t\t}\n\t\telse if (dir == mxConstants.DIRECTION_SOUTH)\n\t\t{\n\t\t\tresult.height = size;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult.width = size;\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getImage\n * \n * Returns the image URL for the given cell state. This implementation\n * returns the value stored under <mxConstants.STYLE_IMAGE> in the cell\n * style.\n * \n * Parameters:\n * \n * state - <mxCellState> whose image URL should be returned.\n */\nmxGraph.prototype.getImage = function(state)\n{\n\treturn (state != null && state.style != null) ? state.style[mxConstants.STYLE_IMAGE] : null;\n};\n\n/**\n * Function: isTransparentState\n * \n * Returns true if the given state has no stroke- or fillcolor and no image.\n * \n * Parameters:\n * \n * state - <mxCellState> to check.\n */\nmxGraph.prototype.isTransparentState = function(state)\n{\n\tvar result = false;\n\t\n\tif (state != null)\n\t{\n\t\tvar stroke = mxUtils.getValue(state.style, mxConstants.STYLE_STROKECOLOR, mxConstants.NONE);\n\t\tvar fill = mxUtils.getValue(state.style, mxConstants.STYLE_FILLCOLOR, mxConstants.NONE);\n\t\t\n\t\tresult = stroke == mxConstants.NONE && fill == mxConstants.NONE && this.getImage(state) == null;\n\t\t\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getVerticalAlign\n * \n * Returns the vertical alignment for the given cell state. This\n * implementation returns the value stored under\n * <mxConstants.STYLE_VERTICAL_ALIGN> in the cell style.\n * \n * Parameters:\n * \n * state - <mxCellState> whose vertical alignment should be\n * returned.\n */\nmxGraph.prototype.getVerticalAlign = function(state)\n{\n\treturn (state != null && state.style != null) ?\n\t\t(state.style[mxConstants.STYLE_VERTICAL_ALIGN] ||\n\t\tmxConstants.ALIGN_MIDDLE) : null;\n};\n\n/**\n * Function: getIndicatorColor\n * \n * Returns the indicator color for the given cell state. This\n * implementation returns the value stored under\n * <mxConstants.STYLE_INDICATOR_COLOR> in the cell style.\n * \n * Parameters:\n * \n * state - <mxCellState> whose indicator color should be\n * returned.\n */\nmxGraph.prototype.getIndicatorColor = function(state)\n{\n\treturn (state != null && state.style != null) ? state.style[mxConstants.STYLE_INDICATOR_COLOR] : null;\n};\n\n/**\n * Function: getIndicatorGradientColor\n * \n * Returns the indicator gradient color for the given cell state. This\n * implementation returns the value stored under\n * <mxConstants.STYLE_INDICATOR_GRADIENTCOLOR> in the cell style.\n * \n * Parameters:\n * \n * state - <mxCellState> whose indicator gradient color should be\n * returned.\n */\nmxGraph.prototype.getIndicatorGradientColor = function(state)\n{\n\treturn (state != null && state.style != null) ? state.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR] : null;\n};\n\n/**\n * Function: getIndicatorShape\n * \n * Returns the indicator shape for the given cell state. This\n * implementation returns the value stored under\n * <mxConstants.STYLE_INDICATOR_SHAPE> in the cell style.\n * \n * Parameters:\n * \n * state - <mxCellState> whose indicator shape should be returned.\n */\nmxGraph.prototype.getIndicatorShape = function(state)\n{\n\treturn (state != null && state.style != null) ? state.style[mxConstants.STYLE_INDICATOR_SHAPE] : null;\n};\n\n/**\n * Function: getIndicatorImage\n * \n * Returns the indicator image for the given cell state. This\n * implementation returns the value stored under\n * <mxConstants.STYLE_INDICATOR_IMAGE> in the cell style.\n * \n * Parameters:\n * \n * state - <mxCellState> whose indicator image should be returned.\n */\nmxGraph.prototype.getIndicatorImage = function(state)\n{\n\treturn (state != null && state.style != null) ? state.style[mxConstants.STYLE_INDICATOR_IMAGE] : null;\n};\n\n/**\n * Function: getBorder\n * \n * Returns the value of <border>.\n */\nmxGraph.prototype.getBorder = function()\n{\n\treturn this.border;\n};\n\n/**\n * Function: setBorder\n * \n * Sets the value of <border>.\n * \n * Parameters:\n * \n * value - Positive integer that represents the border to be used.\n */\nmxGraph.prototype.setBorder = function(value)\n{\n\tthis.border = value;\n};\n\n/**\n * Function: isSwimlane\n * \n * Returns true if the given cell is a swimlane in the graph. A swimlane is\n * a container cell with some specific behaviour. This implementation\n * checks if the shape associated with the given cell is a <mxSwimlane>.\n * \n * Parameters:\n * \n * cell - <mxCell> to be checked.\n * ignoreState - Optional boolean that specifies if the cell state should be ignored.\n */\nmxGraph.prototype.isSwimlane = function(cell, ignoreState)\n{\n\tif (cell != null && this.model.getParent(cell) != this.model.getRoot() &&\n\t\t!this.model.isEdge(cell))\n\t{\n\t\treturn this.getCurrentCellStyle(cell, ignoreState)\n\t\t\t[mxConstants.STYLE_SHAPE] == mxConstants.SHAPE_SWIMLANE;\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Group: Graph behaviour\n */\n\n/**\n * Function: isResizeContainer\n * \n * Returns <resizeContainer>.\n */\nmxGraph.prototype.isResizeContainer = function()\n{\n\treturn this.resizeContainer;\n};\n\n/**\n * Function: setResizeContainer\n * \n * Sets <resizeContainer>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the container should be resized.\n */\nmxGraph.prototype.setResizeContainer = function(value)\n{\n\tthis.resizeContainer = value;\n};\n\n/**\n * Function: isEnabled\n * \n * Returns true if the graph is <enabled>.\n */\nmxGraph.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Specifies if the graph should allow any interactions. This\n * implementation updates <enabled>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph should be enabled.\n */\nmxGraph.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: isEscapeEnabled\n * \n * Returns <escapeEnabled>.\n */\nmxGraph.prototype.isEscapeEnabled = function()\n{\n\treturn this.escapeEnabled;\n};\n\n/**\n * Function: setEscapeEnabled\n * \n * Sets <escapeEnabled>.\n * \n * Parameters:\n * \n * enabled - Boolean indicating if escape should be enabled.\n */\nmxGraph.prototype.setEscapeEnabled = function(value)\n{\n\tthis.escapeEnabled = value;\n};\n\n/**\n * Function: isInvokesStopCellEditing\n * \n * Returns <invokesStopCellEditing>.\n */\nmxGraph.prototype.isInvokesStopCellEditing = function()\n{\n\treturn this.invokesStopCellEditing;\n};\n\n/**\n * Function: setInvokesStopCellEditing\n * \n * Sets <invokesStopCellEditing>.\n */\nmxGraph.prototype.setInvokesStopCellEditing = function(value)\n{\n\tthis.invokesStopCellEditing = value;\n};\n\n/**\n * Function: isEnterStopsCellEditing\n * \n * Returns <enterStopsCellEditing>.\n */\nmxGraph.prototype.isEnterStopsCellEditing = function()\n{\n\treturn this.enterStopsCellEditing;\n};\n\n/**\n * Function: setEnterStopsCellEditing\n * \n * Sets <enterStopsCellEditing>.\n */\nmxGraph.prototype.setEnterStopsCellEditing = function(value)\n{\n\tthis.enterStopsCellEditing = value;\n};\n\n/**\n * Function: isCellLocked\n * \n * Returns true if the given cell may not be moved, sized, bended,\n * disconnected, edited or selected. This implementation returns true for\n * all vertices with a relative geometry if <locked> is false.\n * \n * Parameters:\n * \n * cell - <mxCell> whose locked state should be returned.\n */\nmxGraph.prototype.isCellLocked = function(cell)\n{\n\tvar geometry = this.model.getGeometry(cell);\n\t\n\treturn this.isCellsLocked() || (geometry != null && this.model.isVertex(cell) && geometry.relative);\n};\n\n/**\n * Function: isCellsLocked\n * \n * Returns true if the given cell may not be moved, sized, bended,\n * disconnected, edited or selected. This implementation returns true for\n * all vertices with a relative geometry if <locked> is false.\n * \n * Parameters:\n * \n * cell - <mxCell> whose locked state should be returned.\n */\nmxGraph.prototype.isCellsLocked = function()\n{\n\treturn this.cellsLocked;\n};\n\n/**\n * Function: setCellsLocked\n * \n * Sets if any cell may be moved, sized, bended, disconnected, edited or\n * selected.\n * \n * Parameters:\n * \n * value - Boolean that defines the new value for <cellsLocked>.\n */\nmxGraph.prototype.setCellsLocked = function(value)\n{\n\tthis.cellsLocked = value;\n};\n\n/**\n * Function: getCloneableCells\n * \n * Returns the cells which may be exported in the given array of cells.\n */\nmxGraph.prototype.getCloneableCells = function(cells)\n{\n\treturn this.model.filterCells(cells, mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.isCellCloneable(cell);\n\t}));\n};\n\n/**\n * Function: isCellCloneable\n * \n * Returns true if the given cell is cloneable. This implementation returns\n * <isCellsCloneable> for all cells unless a cell style specifies\n * <mxConstants.STYLE_CLONEABLE> to be 0. \n * \n * Parameters:\n * \n * cell - Optional <mxCell> whose cloneable state should be returned.\n */\nmxGraph.prototype.isCellCloneable = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\n\treturn this.isCellsCloneable() && style[mxConstants.STYLE_CLONEABLE] != 0;\n};\n\n/**\n * Function: isCellsCloneable\n * \n * Returns <cellsCloneable>, that is, if the graph allows cloning of cells\n * by using control-drag.\n */\nmxGraph.prototype.isCellsCloneable = function()\n{\n\treturn this.cellsCloneable;\n};\n\n/**\n * Function: setCellsCloneable\n * \n * Specifies if the graph should allow cloning of cells by holding down the\n * control key while cells are being moved. This implementation updates\n * <cellsCloneable>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph should be cloneable.\n */\nmxGraph.prototype.setCellsCloneable = function(value)\n{\n\tthis.cellsCloneable = value;\n};\n\n/**\n * Function: getExportableCells\n * \n * Returns the cells which may be exported in the given array of cells.\n */\nmxGraph.prototype.getExportableCells = function(cells)\n{\n\treturn this.model.filterCells(cells, mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.canExportCell(cell);\n\t}));\n};\n\n/**\n * Function: canExportCell\n * \n * Returns true if the given cell may be exported to the clipboard. This\n * implementation returns <exportEnabled> for all cells.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the cell to be exported.\n */\nmxGraph.prototype.canExportCell = function(cell)\n{\n\treturn this.exportEnabled;\n};\n\n/**\n * Function: getImportableCells\n * \n * Returns the cells which may be imported in the given array of cells.\n */\nmxGraph.prototype.getImportableCells = function(cells)\n{\n\treturn this.model.filterCells(cells, mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.canImportCell(cell);\n\t}));\n};\n\n/**\n * Function: canImportCell\n * \n * Returns true if the given cell may be imported from the clipboard.\n * This implementation returns <importEnabled> for all cells.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the cell to be imported.\n */\nmxGraph.prototype.canImportCell = function(cell)\n{\n\treturn this.importEnabled;\n};\n\n/**\n * Function: isCellSelectable\n *\n * Returns true if the given cell is selectable. This implementation\n * returns <cellsSelectable>.\n * \n * To add a new style for making cells (un)selectable, use the following code.\n * \n * (code)\n * mxGraph.prototype.isCellSelectable = function(cell)\n * {\n *   var style = this.getCurrentCellStyle(cell);\n *   \n *   return this.isCellsSelectable() && !this.isCellLocked(cell) && style['selectable'] != 0;\n * };\n * (end)\n * \n * You can then use the new style as shown in this example.\n * \n * (code)\n * graph.insertVertex(parent, null, 'Hello,', 20, 20, 80, 30, 'selectable=0');\n * (end)\n * \n * Parameters:\n * \n * cell - <mxCell> whose selectable state should be returned.\n */\nmxGraph.prototype.isCellSelectable = function(cell)\n{\n\treturn this.isCellsSelectable();\n};\n\n/**\n * Function: isCellsSelectable\n *\n * Returns <cellsSelectable>.\n */\nmxGraph.prototype.isCellsSelectable = function()\n{\n\treturn this.cellsSelectable;\n};\n\n/**\n * Function: setCellsSelectable\n *\n * Sets <cellsSelectable>.\n */\nmxGraph.prototype.setCellsSelectable = function(value)\n{\n\tthis.cellsSelectable = value;\n};\n\n/**\n * Function: getDeletableCells\n * \n * Returns the cells which may be exported in the given array of cells.\n */\nmxGraph.prototype.getDeletableCells = function(cells)\n{\n\treturn this.model.filterCells(cells, mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.isCellDeletable(cell);\n\t}));\n};\n\n/**\n * Function: isCellDeletable\n *\n * Returns true if the given cell is moveable. This returns\n * <cellsDeletable> for all given cells if a cells style does not specify\n * <mxConstants.STYLE_DELETABLE> to be 0.\n * \n * Parameters:\n * \n * cell - <mxCell> whose deletable state should be returned.\n */\nmxGraph.prototype.isCellDeletable = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\t\n\treturn this.isCellsDeletable() && style[mxConstants.STYLE_DELETABLE] != 0;\n};\n\n/**\n * Function: isCellsDeletable\n *\n * Returns <cellsDeletable>.\n */\nmxGraph.prototype.isCellsDeletable = function()\n{\n\treturn this.cellsDeletable;\n};\n\n/**\n * Function: setCellsDeletable\n * \n * Sets <cellsDeletable>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph should allow deletion of cells.\n */\nmxGraph.prototype.setCellsDeletable = function(value)\n{\n\tthis.cellsDeletable = value;\n};\n\n/**\n * Function: isLabelMovable\n *\n * Returns true if the given edges's label is moveable. This returns\n * <movable> for all given cells if <isLocked> does not return true\n * for the given cell.\n * \n * Parameters:\n * \n * cell - <mxCell> whose label should be moved.\n */\nmxGraph.prototype.isLabelMovable = function(cell)\n{\n\treturn !this.isCellLocked(cell) &&\n\t\t((this.model.isEdge(cell) && this.edgeLabelsMovable) ||\n\t\t(this.model.isVertex(cell) && this.vertexLabelsMovable));\n};\n\n/**\n * Function: isCellRotatable\n *\n * Returns true if the given cell is rotatable. This returns true for the given\n * cell if its style does not specify <mxConstants.STYLE_ROTATABLE> to be 0.\n * \n * Parameters:\n * \n * cell - <mxCell> whose rotatable state should be returned.\n */\nmxGraph.prototype.isCellRotatable = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\t\n\treturn style[mxConstants.STYLE_ROTATABLE] != 0;\n};\n\n/**\n * Function: getMovableCells\n * \n * Returns the cells which are movable in the given array of cells.\n */\nmxGraph.prototype.getMovableCells = function(cells)\n{\n\treturn this.model.filterCells(cells, mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.isCellMovable(cell);\n\t}));\n};\n\n/**\n * Function: isCellMovable\n *\n * Returns true if the given cell is moveable. This returns <cellsMovable>\n * for all given cells if <isCellLocked> does not return true for the given\n * cell and its style does not specify <mxConstants.STYLE_MOVABLE> to be 0.\n * \n * Parameters:\n * \n * cell - <mxCell> whose movable state should be returned.\n */\nmxGraph.prototype.isCellMovable = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\t\n\treturn this.isCellsMovable() && !this.isCellLocked(cell) && style[mxConstants.STYLE_MOVABLE] != 0;\n};\n\n/**\n * Function: isCellsMovable\n *\n * Returns <cellsMovable>.\n */\nmxGraph.prototype.isCellsMovable = function()\n{\n\treturn this.cellsMovable;\n};\n\n/**\n * Function: setCellsMovable\n * \n * Specifies if the graph should allow moving of cells. This implementation\n * updates <cellsMsovable>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph should allow moving of cells.\n */\nmxGraph.prototype.setCellsMovable = function(value)\n{\n\tthis.cellsMovable = value;\n};\n\n/**\n * Function: isGridEnabled\n *\n * Returns <gridEnabled> as a boolean.\n */\nmxGraph.prototype.isGridEnabled = function()\n{\n\treturn this.gridEnabled;\n};\n\n/**\n * Function: setGridEnabled\n * \n * Specifies if the grid should be enabled.\n * \n * Parameters:\n * \n * value - Boolean indicating if the grid should be enabled.\n */\nmxGraph.prototype.setGridEnabled = function(value)\n{\n\tthis.gridEnabled = value;\n};\n\n/**\n * Function: isPortsEnabled\n *\n * Returns <portsEnabled> as a boolean.\n */\nmxGraph.prototype.isPortsEnabled = function()\n{\n\treturn this.portsEnabled;\n};\n\n/**\n * Function: setPortsEnabled\n * \n * Specifies if the ports should be enabled.\n * \n * Parameters:\n * \n * value - Boolean indicating if the ports should be enabled.\n */\nmxGraph.prototype.setPortsEnabled = function(value)\n{\n\tthis.portsEnabled = value;\n};\n\n/**\n * Function: getGridSize\n *\n * Returns <gridSize>.\n */\nmxGraph.prototype.getGridSize = function()\n{\n\treturn this.gridSize;\n};\n\n/**\n * Function: setGridSize\n * \n * Sets <gridSize>.\n */\nmxGraph.prototype.setGridSize = function(value)\n{\n\tthis.gridSize = value;\n};\n\n/**\n * Function: getTolerance\n *\n * Returns <tolerance>.\n */\nmxGraph.prototype.getTolerance = function()\n{\n\treturn this.tolerance;\n};\n\n/**\n * Function: setTolerance\n * \n * Sets <tolerance>.\n */\nmxGraph.prototype.setTolerance = function(value)\n{\n\tthis.tolerance = value;\n};\n\n/**\n * Function: isVertexLabelsMovable\n *\n * Returns <vertexLabelsMovable>.\n */\nmxGraph.prototype.isVertexLabelsMovable = function()\n{\n\treturn this.vertexLabelsMovable;\n};\n\n/**\n * Function: setVertexLabelsMovable\n * \n * Sets <vertexLabelsMovable>.\n */\nmxGraph.prototype.setVertexLabelsMovable = function(value)\n{\n\tthis.vertexLabelsMovable = value;\n};\n\n/**\n * Function: isEdgeLabelsMovable\n *\n * Returns <edgeLabelsMovable>.\n */\nmxGraph.prototype.isEdgeLabelsMovable = function()\n{\n\treturn this.edgeLabelsMovable;\n};\n\n/**\n * Function: isEdgeLabelsMovable\n * \n * Sets <edgeLabelsMovable>.\n */\nmxGraph.prototype.setEdgeLabelsMovable = function(value)\n{\n\tthis.edgeLabelsMovable = value;\n};\n\n/**\n * Function: isSwimlaneNesting\n *\n * Returns <swimlaneNesting> as a boolean.\n */\nmxGraph.prototype.isSwimlaneNesting = function()\n{\n\treturn this.swimlaneNesting;\n};\n\n/**\n * Function: setSwimlaneNesting\n * \n * Specifies if swimlanes can be nested by drag and drop. This is only\n * taken into account if dropEnabled is true.\n * \n * Parameters:\n * \n * value - Boolean indicating if swimlanes can be nested.\n */\nmxGraph.prototype.setSwimlaneNesting = function(value)\n{\n\tthis.swimlaneNesting = value;\n};\n\n/**\n * Function: isSwimlaneSelectionEnabled\n *\n * Returns <swimlaneSelectionEnabled> as a boolean.\n */\nmxGraph.prototype.isSwimlaneSelectionEnabled = function()\n{\n\treturn this.swimlaneSelectionEnabled;\n};\n\n/**\n * Function: setSwimlaneSelectionEnabled\n * \n * Specifies if swimlanes should be selected if the mouse is released\n * over their content area.\n * \n * Parameters:\n * \n * value - Boolean indicating if swimlanes content areas\n * should be selected when the mouse is released over them.\n */\nmxGraph.prototype.setSwimlaneSelectionEnabled = function(value)\n{\n\tthis.swimlaneSelectionEnabled = value;\n};\n\n/**\n * Function: isMultigraph\n *\n * Returns <multigraph> as a boolean.\n */\nmxGraph.prototype.isMultigraph = function()\n{\n\treturn this.multigraph;\n};\n\n/**\n * Function: setMultigraph\n * \n * Specifies if the graph should allow multiple connections between the\n * same pair of vertices.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph allows multiple connections\n * between the same pair of vertices.\n */\nmxGraph.prototype.setMultigraph = function(value)\n{\n\tthis.multigraph = value;\n};\n\n/**\n * Function: isAllowLoops\n *\n * Returns <allowLoops> as a boolean.\n */\nmxGraph.prototype.isAllowLoops = function()\n{\n\treturn this.allowLoops;\n};\n\n/**\n * Function: setAllowDanglingEdges\n * \n * Specifies if dangling edges are allowed, that is, if edges are allowed\n * that do not have a source and/or target terminal defined.\n * \n * Parameters:\n * \n * value - Boolean indicating if dangling edges are allowed.\n */\nmxGraph.prototype.setAllowDanglingEdges = function(value)\n{\n\tthis.allowDanglingEdges = value;\n};\n\n/**\n * Function: isAllowDanglingEdges\n *\n * Returns <allowDanglingEdges> as a boolean.\n */\nmxGraph.prototype.isAllowDanglingEdges = function()\n{\n\treturn this.allowDanglingEdges;\n};\n\n/**\n * Function: setConnectableEdges\n * \n * Specifies if edges should be connectable.\n * \n * Parameters:\n * \n * value - Boolean indicating if edges should be connectable.\n */\nmxGraph.prototype.setConnectableEdges = function(value)\n{\n\tthis.connectableEdges = value;\n};\n\n/**\n * Function: isConnectableEdges\n *\n * Returns <connectableEdges> as a boolean.\n */\nmxGraph.prototype.isConnectableEdges = function()\n{\n\treturn this.connectableEdges;\n};\n\n/**\n * Function: setCloneInvalidEdges\n * \n * Specifies if edges should be inserted when cloned but not valid wrt.\n * <getEdgeValidationError>. If false such edges will be silently ignored.\n * \n * Parameters:\n * \n * value - Boolean indicating if cloned invalid edges should be\n * inserted into the graph or ignored.\n */\nmxGraph.prototype.setCloneInvalidEdges = function(value)\n{\n\tthis.cloneInvalidEdges = value;\n};\n\n/**\n * Function: isCloneInvalidEdges\n *\n * Returns <cloneInvalidEdges> as a boolean.\n */\nmxGraph.prototype.isCloneInvalidEdges = function()\n{\n\treturn this.cloneInvalidEdges;\n};\n\n/**\n * Function: setAllowLoops\n * \n * Specifies if loops are allowed.\n * \n * Parameters:\n * \n * value - Boolean indicating if loops are allowed.\n */\nmxGraph.prototype.setAllowLoops = function(value)\n{\n\tthis.allowLoops = value;\n};\n\n/**\n * Function: isDisconnectOnMove\n *\n * Returns <disconnectOnMove> as a boolean.\n */\nmxGraph.prototype.isDisconnectOnMove = function()\n{\n\treturn this.disconnectOnMove;\n};\n\n/**\n * Function: setDisconnectOnMove\n * \n * Specifies if edges should be disconnected when moved. (Note: Cloned\n * edges are always disconnected.)\n * \n * Parameters:\n * \n * value - Boolean indicating if edges should be disconnected\n * when moved.\n */\nmxGraph.prototype.setDisconnectOnMove = function(value)\n{\n\tthis.disconnectOnMove = value;\n};\n\n/**\n * Function: isDropEnabled\n *\n * Returns <dropEnabled> as a boolean.\n */\nmxGraph.prototype.isDropEnabled = function()\n{\n\treturn this.dropEnabled;\n};\n\n/**\n * Function: setDropEnabled\n * \n * Specifies if the graph should allow dropping of cells onto or into other\n * cells.\n * \n * Parameters:\n * \n * dropEnabled - Boolean indicating if the graph should allow dropping\n * of cells into other cells.\n */\nmxGraph.prototype.setDropEnabled = function(value)\n{\n\tthis.dropEnabled = value;\n};\n\n/**\n * Function: isSplitEnabled\n *\n * Returns <splitEnabled> as a boolean.\n */\nmxGraph.prototype.isSplitEnabled = function()\n{\n\treturn this.splitEnabled;\n};\n\n/**\n * Function: setSplitEnabled\n * \n * Specifies if the graph should allow dropping of cells onto or into other\n * cells.\n * \n * Parameters:\n * \n * dropEnabled - Boolean indicating if the graph should allow dropping\n * of cells into other cells.\n */\nmxGraph.prototype.setSplitEnabled = function(value)\n{\n\tthis.splitEnabled = value;\n};\n\n/**\n * Function: isCellResizable\n *\n * Returns true if the given cell is resizable. This returns\n * <cellsResizable> for all given cells if <isCellLocked> does not return\n * true for the given cell and its style does not specify\n * <mxConstants.STYLE_RESIZABLE> to be 0.\n * \n * Parameters:\n * \n * cell - <mxCell> whose resizable state should be returned.\n */\nmxGraph.prototype.isCellResizable = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\n\treturn this.isCellsResizable() && !this.isCellLocked(cell) &&\n\t\tmxUtils.getValue(style, mxConstants.STYLE_RESIZABLE, '1') != '0';\n};\n\n/**\n * Function: isCellsResizable\n *\n * Returns <cellsResizable>.\n */\nmxGraph.prototype.isCellsResizable = function()\n{\n\treturn this.cellsResizable;\n};\n\n/**\n * Function: setCellsResizable\n * \n * Specifies if the graph should allow resizing of cells. This\n * implementation updates <cellsResizable>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph should allow resizing of\n * cells.\n */\nmxGraph.prototype.setCellsResizable = function(value)\n{\n\tthis.cellsResizable = value;\n};\n\n/**\n * Function: isTerminalPointMovable\n *\n * Returns true if the given terminal point is movable. This is independent\n * from <isCellConnectable> and <isCellDisconnectable> and controls if terminal\n * points can be moved in the graph if the edge is not connected. Note that it\n * is required for this to return true to connect unconnected edges. This\n * implementation returns true.\n * \n * Parameters:\n * \n * cell - <mxCell> whose terminal point should be moved.\n * source - Boolean indicating if the source or target terminal should be moved.\n */\nmxGraph.prototype.isTerminalPointMovable = function(cell, source)\n{\n\treturn true;\n};\n\n/**\n * Function: isCellBendable\n *\n * Returns true if the given cell is bendable. This returns <cellsBendable>\n * for all given cells if <isLocked> does not return true for the given\n * cell and its style does not specify <mxConstants.STYLE_BENDABLE> to be 0.\n * \n * Parameters:\n * \n * cell - <mxCell> whose bendable state should be returned.\n */\nmxGraph.prototype.isCellBendable = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\t\n\treturn this.isCellsBendable() && !this.isCellLocked(cell) && style[mxConstants.STYLE_BENDABLE] != 0;\n};\n\n/**\n * Function: isCellsBendable\n *\n * Returns <cellsBenadable>.\n */\nmxGraph.prototype.isCellsBendable = function()\n{\n\treturn this.cellsBendable;\n};\n\n/**\n * Function: setCellsBendable\n * \n * Specifies if the graph should allow bending of edges. This\n * implementation updates <bendable>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph should allow bending of\n * edges.\n */\nmxGraph.prototype.setCellsBendable = function(value)\n{\n\tthis.cellsBendable = value;\n};\n\n/**\n * Function: isCellEditable\n *\n * Returns true if the given cell is editable. This returns <cellsEditable> for\n * all given cells if <isCellLocked> does not return true for the given cell\n * and its style does not specify <mxConstants.STYLE_EDITABLE> to be 0.\n * \n * Parameters:\n * \n * cell - <mxCell> whose editable state should be returned.\n */\nmxGraph.prototype.isCellEditable = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\t\n\treturn this.isCellsEditable() && !this.isCellLocked(cell) && style[mxConstants.STYLE_EDITABLE] != 0;\n};\n\n/**\n * Function: isCellsEditable\n *\n * Returns <cellsEditable>.\n */\nmxGraph.prototype.isCellsEditable = function()\n{\n\treturn this.cellsEditable;\n};\n\n/**\n * Function: setCellsEditable\n * \n * Specifies if the graph should allow in-place editing for cell labels.\n * This implementation updates <cellsEditable>.\n * \n * Parameters:\n * \n * value - Boolean indicating if the graph should allow in-place\n * editing.\n */\nmxGraph.prototype.setCellsEditable = function(value)\n{\n\tthis.cellsEditable = value;\n};\n\n/**\n * Function: isCellDisconnectable\n *\n * Returns true if the given cell is disconnectable from the source or\n * target terminal. This returns <isCellsDisconnectable> for all given\n * cells if <isCellLocked> does not return true for the given cell.\n * \n * Parameters:\n * \n * cell - <mxCell> whose disconnectable state should be returned.\n * terminal - <mxCell> that represents the source or target terminal.\n * source - Boolean indicating if the source or target terminal is to be\n * disconnected.\n */\nmxGraph.prototype.isCellDisconnectable = function(cell, terminal, source)\n{\n\treturn this.isCellsDisconnectable() && !this.isCellLocked(cell);\n};\n\n/**\n * Function: isCellsDisconnectable\n *\n * Returns <cellsDisconnectable>.\n */\nmxGraph.prototype.isCellsDisconnectable = function()\n{\n\treturn this.cellsDisconnectable;\n};\n\n/**\n * Function: setCellsDisconnectable\n *\n * Sets <cellsDisconnectable>.\n */\nmxGraph.prototype.setCellsDisconnectable = function(value)\n{\n\tthis.cellsDisconnectable = value;\n};\n\n/**\n * Function: isValidSource\n * \n * Returns true if the given cell is a valid source for new connections.\n * This implementation returns true for all non-null values and is\n * called by is called by <isValidConnection>.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents a possible source or null.\n */\nmxGraph.prototype.isValidSource = function(cell)\n{\n\treturn (cell == null && this.allowDanglingEdges) ||\n\t\t(cell != null && (!this.model.isEdge(cell) ||\n\t\tthis.connectableEdges) && this.isCellConnectable(cell));\n};\n\t\n/**\n * Function: isValidTarget\n * \n * Returns <isValidSource> for the given cell. This is called by\n * <isValidConnection>.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents a possible target or null.\n */\nmxGraph.prototype.isValidTarget = function(cell)\n{\n\treturn this.isValidSource(cell);\n};\n\n/**\n * Function: isValidConnection\n * \n * Returns true if the given target cell is a valid target for source.\n * This is a boolean implementation for not allowing connections between\n * certain pairs of vertices and is called by <getEdgeValidationError>.\n * This implementation returns true if <isValidSource> returns true for\n * the source and <isValidTarget> returns true for the target.\n * \n * Parameters:\n * \n * source - <mxCell> that represents the source cell.\n * target - <mxCell> that represents the target cell.\n */\nmxGraph.prototype.isValidConnection = function(source, target)\n{\n\treturn this.isValidSource(source) && this.isValidTarget(target);\n};\n\n/**\n * Function: setConnectable\n * \n * Specifies if the graph should allow new connections. This implementation\n * updates <mxConnectionHandler.enabled> in <connectionHandler>.\n * \n * Parameters:\n * \n * connectable - Boolean indicating if new connections should be allowed.\n */\nmxGraph.prototype.setConnectable = function(connectable)\n{\n\tthis.connectionHandler.setEnabled(connectable);\n};\n\t\n/**\n * Function: isConnectable\n * \n * Returns true if the <connectionHandler> is enabled.\n */\nmxGraph.prototype.isConnectable = function()\n{\n\treturn this.connectionHandler.isEnabled();\n};\n\n/**\n * Function: setTooltips\n * \n * Specifies if tooltips should be enabled. This implementation updates\n * <mxTooltipHandler.enabled> in <tooltipHandler>.\n * \n * Parameters:\n * \n * enabled - Boolean indicating if tooltips should be enabled.\n */\nmxGraph.prototype.setTooltips = function (enabled)\n{\n\tthis.tooltipHandler.setEnabled(enabled);\n};\n\n/**\n * Function: setPanning\n * \n * Specifies if panning should be enabled. This implementation updates\n * <mxPanningHandler.panningEnabled> in <panningHandler>.\n * \n * Parameters:\n * \n * enabled - Boolean indicating if panning should be enabled.\n */\nmxGraph.prototype.setPanning = function(enabled)\n{\n\tthis.panningHandler.panningEnabled = enabled;\n};\n\n/**\n * Function: isEditing\n * \n * Returns true if the given cell is currently being edited.\n * If no cell is specified then this returns true if any\n * cell is currently being edited.\n *\n * Parameters:\n * \n * cell - <mxCell> that should be checked.\n */\nmxGraph.prototype.isEditing = function(cell)\n{\n\tif (this.cellEditor != null)\n\t{\n\t\tvar editingCell = this.cellEditor.getEditingCell();\n\t\t\n\t\treturn (cell == null) ? editingCell != null : cell == editingCell;\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: isAutoSizeCell\n * \n * Returns true if the size of the given cell should automatically be\n * updated after a change of the label. This implementation returns\n * <autoSizeCells> or checks if the cell style does specify\n * <mxConstants.STYLE_AUTOSIZE> to be 1.\n * \n * Parameters:\n * \n * cell - <mxCell> that should be resized.\n */\nmxGraph.prototype.isAutoSizeCell = function(cell)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\t\n\treturn this.isAutoSizeCells() || style[mxConstants.STYLE_AUTOSIZE] == 1;\n};\n\n/**\n * Function: isAutoSizeCells\n * \n * Returns <autoSizeCells>.\n */\nmxGraph.prototype.isAutoSizeCells = function()\n{\n\treturn this.autoSizeCells;\n};\n\n/**\n * Function: setAutoSizeCells\n * \n * Specifies if cell sizes should be automatically updated after a label\n * change. This implementation sets <autoSizeCells> to the given parameter.\n * To update the size of cells when the cells are added, set\n * <autoSizeCellsOnAdd> to true.\n * \n * Parameters:\n * \n * value - Boolean indicating if cells should be resized\n * automatically.\n */\nmxGraph.prototype.setAutoSizeCells = function(value)\n{\n\tthis.autoSizeCells = value;\n};\n\n/**\n * Function: isExtendParent\n * \n * Returns true if the parent of the given cell should be extended if the\n * child has been resized so that it overlaps the parent. This\n * implementation returns <isExtendParents> if the cell is not an edge.\n * \n * Parameters:\n * \n * cell - <mxCell> that has been resized.\n */\nmxGraph.prototype.isExtendParent = function(cell)\n{\n\treturn !this.getModel().isEdge(cell) && this.isExtendParents();\n};\n\n/**\n * Function: isExtendParents\n * \n * Returns <extendParents>.\n */\nmxGraph.prototype.isExtendParents = function()\n{\n\treturn this.extendParents;\n};\n\n/**\n * Function: setExtendParents\n * \n * Sets <extendParents>.\n * \n * Parameters:\n * \n * value - New boolean value for <extendParents>.\n */\nmxGraph.prototype.setExtendParents = function(value)\n{\n\tthis.extendParents = value;\n};\n\n/**\n * Function: isExtendParentsOnAdd\n * \n * Returns <extendParentsOnAdd>.\n */\nmxGraph.prototype.isExtendParentsOnAdd = function(cell)\n{\n\treturn this.extendParentsOnAdd;\n};\n\n/**\n * Function: setExtendParentsOnAdd\n * \n * Sets <extendParentsOnAdd>.\n * \n * Parameters:\n * \n * value - New boolean value for <extendParentsOnAdd>.\n */\nmxGraph.prototype.setExtendParentsOnAdd = function(value)\n{\n\tthis.extendParentsOnAdd = value;\n};\n\n/**\n * Function: isExtendParentsOnMove\n * \n * Returns <extendParentsOnMove>.\n */\nmxGraph.prototype.isExtendParentsOnMove = function()\n{\n\treturn this.extendParentsOnMove;\n};\n\n/**\n * Function: setExtendParentsOnMove\n * \n * Sets <extendParentsOnMove>.\n * \n * Parameters:\n * \n * value - New boolean value for <extendParentsOnAdd>.\n */\nmxGraph.prototype.setExtendParentsOnMove = function(value)\n{\n\tthis.extendParentsOnMove = value;\n};\n\n/**\n * Function: isRecursiveResize\n * \n * Returns <recursiveResize>.\n * \n * Parameters:\n * \n * state - <mxCellState> that is being resized.\n */\nmxGraph.prototype.isRecursiveResize = function(state)\n{\n\treturn this.recursiveResize;\n};\n\n/**\n * Function: setRecursiveResize\n * \n * Sets <recursiveResize>.\n * \n * Parameters:\n * \n * value - New boolean value for <recursiveResize>.\n */\nmxGraph.prototype.setRecursiveResize = function(value)\n{\n\tthis.recursiveResize = value;\n};\n\n/**\n * Function: isConstrainChild\n * \n * Returns true if the given cell should be kept inside the bounds of its\n * parent according to the rules defined by <getOverlap> and\n * <isAllowOverlapParent>. This implementation returns false for all children\n * of edges and <isConstrainChildren> otherwise.\n * \n * Parameters:\n * \n * cell - <mxCell> that should be constrained.\n */\nmxGraph.prototype.isConstrainChild = function(cell)\n{\n\treturn this.isConstrainChildren() && !this.getModel().isEdge(this.getModel().getParent(cell));\n};\n\n/**\n * Function: isConstrainChildren\n * \n * Returns <constrainChildren>.\n */\nmxGraph.prototype.isConstrainChildren = function()\n{\n\treturn this.constrainChildren;\n};\n\n/**\n * Function: setConstrainChildren\n * \n * Sets <constrainChildren>.\n */\nmxGraph.prototype.setConstrainChildren = function(value)\n{\n\tthis.constrainChildren = value;\n};\n\n/**\n * Function: isConstrainRelativeChildren\n * \n * Returns <constrainRelativeChildren>.\n */\nmxGraph.prototype.isConstrainRelativeChildren = function()\n{\n\treturn this.constrainRelativeChildren;\n};\n\n/**\n * Function: setConstrainRelativeChildren\n * \n * Sets <constrainRelativeChildren>.\n */\nmxGraph.prototype.setConstrainRelativeChildren = function(value)\n{\n\tthis.constrainRelativeChildren = value;\n};\n\n/**\n * Function: isConstrainChildren\n * \n * Returns <allowNegativeCoordinates>.\n */\nmxGraph.prototype.isAllowNegativeCoordinates = function()\n{\n\treturn this.allowNegativeCoordinates;\n};\n\n/**\n * Function: setConstrainChildren\n * \n * Sets <allowNegativeCoordinates>.\n */\nmxGraph.prototype.setAllowNegativeCoordinates = function(value)\n{\n\tthis.allowNegativeCoordinates = value;\n};\n\n/**\n * Function: getOverlap\n * \n * Returns a decimal number representing the amount of the width and height\n * of the given cell that is allowed to overlap its parent. A value of 0\n * means all children must stay inside the parent, 1 means the child is\n * allowed to be placed outside of the parent such that it touches one of\n * the parents sides. If <isAllowOverlapParent> returns false for the given\n * cell, then this method returns 0.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the overlap ratio should be returned.\n */\nmxGraph.prototype.getOverlap = function(cell)\n{\n\treturn (this.isAllowOverlapParent(cell)) ? this.defaultOverlap : 0;\n};\n\t\n/**\n * Function: isAllowOverlapParent\n * \n * Returns true if the given cell is allowed to be placed outside of the\n * parents area.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the child to be checked.\n */\nmxGraph.prototype.isAllowOverlapParent = function(cell)\n{\n\treturn false;\n};\n\n/**\n * Function: getFoldableCells\n * \n * Returns the cells which are movable in the given array of cells.\n */\nmxGraph.prototype.getFoldableCells = function(cells, collapse)\n{\n\treturn this.model.filterCells(cells, mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.isCellFoldable(cell, collapse);\n\t}));\n};\n\n/**\n * Function: isCellFoldable\n * \n * Returns true if the given cell is foldable. This implementation\n * returns true if the cell has at least one child and its style\n * does not specify <mxConstants.STYLE_FOLDABLE> to be 0.\n * \n * Parameters:\n * \n * cell - <mxCell> whose foldable state should be returned.\n */\nmxGraph.prototype.isCellFoldable = function(cell, collapse)\n{\n\tvar style = this.getCurrentCellStyle(cell);\n\t\n\treturn this.model.getChildCount(cell) > 0 && style[mxConstants.STYLE_FOLDABLE] != 0;\n};\n\n/**\n * Function: isValidDropTarget\n *\n * Returns true if the given cell is a valid drop target for the specified\n * cells. If <splitEnabled> is true then this returns <isSplitTarget> for\n * the given arguments else it returns true if the cell is not collapsed\n * and its child count is greater than 0.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the possible drop target.\n * cells - <mxCells> that should be dropped into the target.\n * evt - Mouseevent that triggered the invocation.\n */\nmxGraph.prototype.isValidDropTarget = function(cell, cells, evt)\n{\n\treturn cell != null && ((this.isSplitEnabled() &&\n\t\tthis.isSplitTarget(cell, cells, evt)) || (!this.model.isEdge(cell) &&\n\t\t(this.isSwimlane(cell) || (this.model.getChildCount(cell) > 0 &&\n\t\t!this.isCellCollapsed(cell)))));\n};\n\n/**\n * Function: isSplitTarget\n *\n * Returns true if the given edge may be splitted into two edges with the\n * given cell as a new terminal between the two.\n * \n * Parameters:\n * \n * target - <mxCell> that represents the edge to be splitted.\n * cells - <mxCells> that should split the edge.\n * evt - Mouseevent that triggered the invocation.\n */\nmxGraph.prototype.isSplitTarget = function(target, cells, evt)\n{\n\tif (this.model.isEdge(target) && cells != null && cells.length == 1 &&\n\t\tthis.isCellConnectable(cells[0]) && this.getEdgeValidationError(target,\n\t\t\tthis.model.getTerminal(target, true), cells[0]) == null)\n\t{\n\t\tvar src = this.model.getTerminal(target, true);\n\t\tvar trg = this.model.getTerminal(target, false);\n\n\t\treturn (!this.model.isAncestor(cells[0], src) &&\n\t\t\t\t!this.model.isAncestor(cells[0], trg));\n\t}\n\n\treturn false;\n};\n\n/**\n * Function: getDropTarget\n * \n * Returns the given cell if it is a drop target for the given cells or the\n * nearest ancestor that may be used as a drop target for the given cells.\n * If the given array contains a swimlane and <swimlaneNesting> is false\n * then this always returns null. If no cell is given, then the bottommost\n * swimlane at the location of the given event is returned.\n * \n * This function should only be used if <isDropEnabled> returns true.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> which are to be dropped onto the target.\n * evt - Mouseevent for the drag and drop.\n * cell - <mxCell> that is under the mousepointer.\n * clone - Optional boolean to indicate of cells will be cloned.\n */\nmxGraph.prototype.getDropTarget = function(cells, evt, cell, clone)\n{\n\tif (!this.isSwimlaneNesting())\n\t{\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (this.isSwimlane(cells[i]))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar pt = mxUtils.convertPoint(this.container,\n\t\tmxEvent.getClientX(evt), mxEvent.getClientY(evt));\n\tpt.x -= this.panDx;\n\tpt.y -= this.panDy;\n\tvar swimlane = this.getSwimlaneAt(pt.x, pt.y);\n\t\n\tif (cell == null)\n\t{\n\t\tcell = swimlane;\n\t}\n\telse if (swimlane != null)\n\t{\n\t\t// Checks if the cell is an ancestor of the swimlane\n\t\t// under the mouse and uses the swimlane in that case\n\t\tvar tmp = this.model.getParent(swimlane);\n\t\t\n\t\twhile (tmp != null && this.isSwimlane(tmp) && tmp != cell)\n\t\t{\n\t\t\ttmp = this.model.getParent(tmp);\n\t\t}\n\t\t\n\t\tif (tmp == cell)\n\t\t{\n\t\t\tcell = swimlane;\n\t\t}\n\t}\n\t\n\twhile (cell != null && !this.isValidDropTarget(cell, cells, evt) &&\n\t\t!this.model.isLayer(cell))\n\t{\n\t\tcell = this.model.getParent(cell);\n\t}\n\t\n\t// Checks if parent is dropped into child if not cloning\n\tif (clone == null || !clone)\n\t{\n\t\tvar parent = cell;\n\t\t\n\t\twhile (parent != null && mxUtils.indexOf(cells, parent) < 0)\n\t\t{\n\t\t\tparent = this.model.getParent(parent);\n\t\t}\n\t}\n\n\treturn (!this.model.isLayer(cell) && parent == null) ? cell : null;\n};\n\n/**\n * Group: Cell retrieval\n */\n\n/**\n * Function: getDefaultParent\n * \n * Returns <defaultParent> or <mxGraphView.currentRoot> or the first child\n * child of <mxGraphModel.root> if both are null. The value returned by\n * this function should be used as the parent for new cells (aka default\n * layer).\n */\nmxGraph.prototype.getDefaultParent = function()\n{\n\tvar parent = this.getCurrentRoot();\n\t\n\tif (parent == null)\n\t{\n\t\tparent = this.defaultParent;\n\t\t\n\t\tif (parent == null)\n\t\t{\n\t\t\tvar root = this.model.getRoot();\n\t\t\tparent = this.model.getChildAt(root, 0);\n\t\t}\n\t}\n\t\n\treturn parent;\n};\n\n/**\n * Function: setDefaultParent\n * \n * Sets the <defaultParent> to the given cell. Set this to null to return\n * the first child of the root in getDefaultParent.\n */\nmxGraph.prototype.setDefaultParent = function(cell)\n{\n\tthis.defaultParent = cell;\n};\n\n/**\n * Function: getSwimlane\n * \n * Returns the nearest ancestor of the given cell which is a swimlane, or\n * the given cell, if it is itself a swimlane.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the ancestor swimlane should be returned.\n */\nmxGraph.prototype.getSwimlane = function(cell)\n{\n\twhile (cell != null && !this.isSwimlane(cell))\n\t{\n\t\tcell = this.model.getParent(cell);\n\t}\n\t\n\treturn cell;\n};\n\n/**\n * Function: getSwimlaneAt\n * \n * Returns the bottom-most swimlane that intersects the given point (x, y)\n * in the cell hierarchy that starts at the given parent.\n * \n * Parameters:\n * \n * x - X-coordinate of the location to be checked.\n * y - Y-coordinate of the location to be checked.\n * parent - <mxCell> that should be used as the root of the recursion.\n * Default is <defaultParent>.\n */\nmxGraph.prototype.getSwimlaneAt = function (x, y, parent)\n{\n\tif (parent == null)\n\t{\n\t\tparent = this.getCurrentRoot();\n\t\t\n\t\tif (parent == null)\n\t\t{\n\t\t\tparent = this.model.getRoot();\n\t\t}\n\t}\n\t\n\tif (parent != null)\n\t{\n\t\tvar childCount = this.model.getChildCount(parent);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar child = this.model.getChildAt(parent, i);\n\t\t\t\n\t\t\tif (child != null)\n\t\t\t{\n\t\t\t\tvar result = this.getSwimlaneAt(x, y, child);\n\t\t\t\t\n\t\t\t\tif (result != null)\n\t\t\t\t{\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\telse if (this.isCellVisible(child) && this.isSwimlane(child))\n\t\t\t\t{\n\t\t\t\t\tvar state = this.view.getState(child);\n\t\t\t\t\t\n\t\t\t\t\tif (this.intersects(state, x, y))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: getCellAt\n * \n * Returns the bottom-most cell that intersects the given point (x, y) in\n * the cell hierarchy starting at the given parent. This will also return\n * swimlanes if the given location intersects the content area of the\n * swimlane. If this is not desired, then the <hitsSwimlaneContent> may be\n * used if the returned cell is a swimlane to determine if the location\n * is inside the content area or on the actual title of the swimlane.\n * \n * Parameters:\n * \n * x - X-coordinate of the location to be checked.\n * y - Y-coordinate of the location to be checked.\n * parent - <mxCell> that should be used as the root of the recursion.\n * Default is current root of the view or the root of the model.\n * vertices - Optional boolean indicating if vertices should be returned.\n * Default is true.\n * edges - Optional boolean indicating if edges should be returned. Default\n * is true.\n * ignoreFn - Optional function that returns true if cell should be ignored.\n * The function is passed the cell state and the x and y parameter.\n */\nmxGraph.prototype.getCellAt = function(x, y, parent, vertices, edges, ignoreFn)\n{\n\tvertices = (vertices != null) ? vertices : true;\n\tedges = (edges != null) ? edges : true;\n\n\tif (parent == null)\n\t{\n\t\tparent = this.getCurrentRoot();\n\t\t\n\t\tif (parent == null)\n\t\t{\n\t\t\tparent = this.getModel().getRoot();\n\t\t}\n\t}\n\n\tif (parent != null)\n\t{\n\t\tvar childCount = this.model.getChildCount(parent);\n\t\t\n\t\tfor (var i = childCount - 1; i >= 0; i--)\n\t\t{\n\t\t\tvar cell = this.model.getChildAt(parent, i);\n\t\t\tvar result = this.getCellAt(x, y, cell, vertices, edges, ignoreFn);\n\t\t\t\n\t\t\tif (result != null)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse if (this.isCellVisible(cell) && (edges && this.model.isEdge(cell) ||\n\t\t\t\tvertices && this.model.isVertex(cell)))\n\t\t\t{\n\t\t\t\tvar state = this.view.getState(cell);\n\n\t\t\t\tif (state != null && (ignoreFn == null || !ignoreFn(state, x, y)) &&\n\t\t\t\t\tthis.intersects(state, x, y))\n\t\t\t\t{\n\t\t\t\t\treturn cell;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: intersects\n * \n * Returns the bottom-most cell that intersects the given point (x, y) in\n * the cell hierarchy that starts at the given parent.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the cell state.\n * x - X-coordinate of the location to be checked.\n * y - Y-coordinate of the location to be checked.\n */\nmxGraph.prototype.intersects = function(state, x, y)\n{\n\tif (state != null)\n\t{\n\t\tvar pts = state.absolutePoints;\n\n\t\tif (pts != null)\n\t\t{\n\t\t\tvar t2 = this.tolerance * this.tolerance;\n\t\t\tvar pt = pts[0];\n\t\t\t\n\t\t\tfor (var i = 1; i < pts.length; i++)\n\t\t\t{\n\t\t\t\tvar next = pts[i];\n\t\t\t\tvar dist = mxUtils.ptSegDistSq(pt.x, pt.y, next.x, next.y, x, y);\n\t\t\t\t\n\t\t\t\tif (dist <= t2)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tpt = next;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar alpha = mxUtils.toRadians(mxUtils.getValue(state.style, mxConstants.STYLE_ROTATION) || 0);\n\t\t\t\n\t\t\tif (alpha != 0)\n\t\t\t{\n\t\t\t\tvar cos = Math.cos(-alpha);\n\t\t\t\tvar sin = Math.sin(-alpha);\n\t\t\t\tvar cx = new mxPoint(state.getCenterX(), state.getCenterY());\n\t\t\t\tvar pt = mxUtils.getRotatedPoint(new mxPoint(x, y), cos, sin, cx);\n\t\t\t\tx = pt.x;\n\t\t\t\ty = pt.y;\n\t\t\t}\n\t\t\t\n\t\t\tif (mxUtils.contains(state, x, y))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: hitsSwimlaneContent\n * \n * Returns true if the given coordinate pair is inside the content\n * are of the given swimlane.\n * \n * Parameters:\n * \n * swimlane - <mxCell> that specifies the swimlane.\n * x - X-coordinate of the mouse event.\n * y - Y-coordinate of the mouse event.\n */\nmxGraph.prototype.hitsSwimlaneContent = function(swimlane, x, y)\n{\n\tvar state = this.getView().getState(swimlane);\n\tvar size = this.getStartSize(swimlane);\n\t\n\tif (state != null)\n\t{\n\t\tvar scale = this.getView().getScale();\n\t\tx -= state.x;\n\t\ty -= state.y;\n\t\t\n\t\tif (size.width > 0 && x > 0 && x > size.width * scale)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse if (size.height > 0 && y > 0 && y > size.height * scale)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: getChildVertices\n * \n * Returns the visible child vertices of the given parent.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be returned.\n */\nmxGraph.prototype.getChildVertices = function(parent)\n{\n\treturn this.getChildCells(parent, true, false);\n};\n\t\n/**\n * Function: getChildEdges\n * \n * Returns the visible child edges of the given parent.\n * \n * Parameters:\n * \n * parent - <mxCell> whose child vertices should be returned.\n */\nmxGraph.prototype.getChildEdges = function(parent)\n{\n\treturn this.getChildCells(parent, false, true);\n};\n\n/**\n * Function: getChildCells\n * \n * Returns the visible child vertices or edges in the given parent. If\n * vertices and edges is false, then all children are returned.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be returned.\n * vertices - Optional boolean that specifies if child vertices should\n * be returned. Default is false.\n * edges - Optional boolean that specifies if child edges should\n * be returned. Default is false.\n */\nmxGraph.prototype.getChildCells = function(parent, vertices, edges)\n{\n\tparent = (parent != null) ? parent : this.getDefaultParent();\n\tvertices = (vertices != null) ? vertices : false;\n\tedges = (edges != null) ? edges : false;\n\n\tvar cells = this.model.getChildCells(parent, vertices, edges);\n\tvar result = [];\n\n\t// Filters out the non-visible child cells\n\tfor (var i = 0; i < cells.length; i++)\n\t{\n\t\tif (this.isCellVisible(cells[i]))\n\t\t{\n\t\t\tresult.push(cells[i]);\n\t\t}\n\t}\n\n\treturn result;\n};\n\t\n/**\n * Function: getConnections\n * \n * Returns all visible edges connected to the given cell without loops.\n * \n * Parameters:\n * \n * cell - <mxCell> whose connections should be returned.\n * parent - Optional parent of the opposite end for a connection to be\n * returned.\n */\nmxGraph.prototype.getConnections = function(cell, parent)\n{\n\treturn this.getEdges(cell, parent, true, true, false);\n};\n\t\n/**\n * Function: getIncomingEdges\n * \n * Returns the visible incoming edges for the given cell. If the optional\n * parent argument is specified, then only child edges of the given parent\n * are returned.\n * \n * Parameters:\n * \n * cell - <mxCell> whose incoming edges should be returned.\n * parent - Optional parent of the opposite end for an edge to be\n * returned.\n */\nmxGraph.prototype.getIncomingEdges = function(cell, parent)\n{\n\treturn this.getEdges(cell, parent, true, false, false);\n};\n\t\n/**\n * Function: getOutgoingEdges\n * \n * Returns the visible outgoing edges for the given cell. If the optional\n * parent argument is specified, then only child edges of the given parent\n * are returned.\n * \n * Parameters:\n * \n * cell - <mxCell> whose outgoing edges should be returned.\n * parent - Optional parent of the opposite end for an edge to be\n * returned.\n */\nmxGraph.prototype.getOutgoingEdges = function(cell, parent)\n{\n\treturn this.getEdges(cell, parent, false, true, false);\n};\n\t\n/**\n * Function: getEdges\n * \n * Returns the incoming and/or outgoing edges for the given cell.\n * If the optional parent argument is specified, then only edges are returned\n * where the opposite is in the given parent cell. If at least one of incoming\n * or outgoing is true, then loops are ignored, if both are false, then all\n * edges connected to the given cell are returned including loops.\n * \n * Parameters:\n * \n * cell - <mxCell> whose edges should be returned.\n * parent - Optional parent of the opposite end for an edge to be\n * returned.\n * incoming - Optional boolean that specifies if incoming edges should\n * be included in the result. Default is true.\n * outgoing - Optional boolean that specifies if outgoing edges should\n * be included in the result. Default is true.\n * includeLoops - Optional boolean that specifies if loops should be\n * included in the result. Default is true.\n * recurse - Optional boolean the specifies if the parent specified only \n * need be an ancestral parent, true, or the direct parent, false.\n * Default is false\n */\nmxGraph.prototype.getEdges = function(cell, parent, incoming, outgoing, includeLoops, recurse)\n{\n\tincoming = (incoming != null) ? incoming : true;\n\toutgoing = (outgoing != null) ? outgoing : true;\n\tincludeLoops = (includeLoops != null) ? includeLoops : true;\n\trecurse = (recurse != null) ? recurse : false;\n\t\n\tvar edges = [];\n\tvar isCollapsed = this.isCellCollapsed(cell);\n\tvar childCount = this.model.getChildCount(cell);\n\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = this.model.getChildAt(cell, i);\n\n\t\tif (isCollapsed || !this.isCellVisible(child))\n\t\t{\n\t\t\tedges = edges.concat(this.model.getEdges(child, incoming, outgoing));\n\t\t}\n\t}\n\n\tedges = edges.concat(this.model.getEdges(cell, incoming, outgoing));\n\tvar result = [];\n\t\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tvar state = this.view.getState(edges[i]);\n\t\t\n\t\tvar source = (state != null) ? state.getVisibleTerminal(true) : this.view.getVisibleTerminal(edges[i], true);\n\t\tvar target = (state != null) ? state.getVisibleTerminal(false) : this.view.getVisibleTerminal(edges[i], false);\n\n\t\tif ((includeLoops && source == target) || ((source != target) && ((incoming &&\n\t\t\ttarget == cell && (parent == null || this.isValidAncestor(source, parent, recurse))) ||\n\t\t\t(outgoing && source == cell && (parent == null ||\n\t\t\t\t\tthis.isValidAncestor(target, parent, recurse))))))\n\t\t{\n\t\t\tresult.push(edges[i]);\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: isValidAncestor\n * \n * Returns whether or not the specified parent is a valid\n * ancestor of the specified cell, either direct or indirectly\n * based on whether ancestor recursion is enabled.\n * \n * Parameters:\n * \n * cell - <mxCell> the possible child cell\n * parent - <mxCell> the possible parent cell\n * recurse - boolean whether or not to recurse the child ancestors\n */\nmxGraph.prototype.isValidAncestor = function(cell, parent, recurse)\n{\n\treturn (recurse ? this.model.isAncestor(parent, cell) : this.model\n\t\t\t.getParent(cell) == parent);\n};\n\n/**\n * Function: getOpposites\n * \n * Returns all distinct visible opposite cells for the specified terminal\n * on the given edges.\n * \n * Parameters:\n * \n * edges - Array of <mxCells> that contains the edges whose opposite\n * terminals should be returned.\n * terminal - Terminal that specifies the end whose opposite should be\n * returned.\n * sources - Optional boolean that specifies if source terminals should be\n * included in the result. Default is true.\n * targets - Optional boolean that specifies if targer terminals should be\n * included in the result. Default is true.\n */\nmxGraph.prototype.getOpposites = function(edges, terminal, sources, targets)\n{\n\tsources = (sources != null) ? sources : true;\n\ttargets = (targets != null) ? targets : true;\n\t\n\tvar terminals = [];\n\t\n\t// Fast lookup to avoid duplicates in terminals array\n\tvar dict = new mxDictionary();\n\t\n\tif (edges != null)\n\t{\n\t\tfor (var i = 0; i < edges.length; i++)\n\t\t{\n\t\t\tvar state = this.view.getState(edges[i]);\n\t\t\t\n\t\t\tvar source = (state != null) ? state.getVisibleTerminal(true) : this.view.getVisibleTerminal(edges[i], true);\n\t\t\tvar target = (state != null) ? state.getVisibleTerminal(false) : this.view.getVisibleTerminal(edges[i], false);\n\t\t\t\n\t\t\t// Checks if the terminal is the source of the edge and if the\n\t\t\t// target should be stored in the result\n\t\t\tif (source == terminal && target != null && target != terminal && targets)\n\t\t\t{\n\t\t\t\tif (!dict.get(target))\n\t\t\t\t{\n\t\t\t\t\tdict.put(target, true);\n\t\t\t\t\tterminals.push(target);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Checks if the terminal is the taget of the edge and if the\n\t\t\t// source should be stored in the result\n\t\t\telse if (target == terminal && source != null && source != terminal && sources)\n\t\t\t{\n\t\t\t\tif (!dict.get(source))\n\t\t\t\t{\n\t\t\t\t\tdict.put(source, true);\n\t\t\t\t\tterminals.push(source);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn terminals;\n};\n\n/**\n * Function: getEdgesBetween\n * \n * Returns the edges between the given source and target. This takes into\n * account collapsed and invisible cells and returns the connected edges\n * as displayed on the screen.\n * \n * Parameters:\n * \n * source -\n * target -\n * directed -\n */\nmxGraph.prototype.getEdgesBetween = function(source, target, directed)\n{\n\tdirected = (directed != null) ? directed : false;\n\tvar edges = this.getEdges(source);\n\tvar result = [];\n\n\t// Checks if the edge is connected to the correct\n\t// cell and returns the first match\n\tfor (var i = 0; i < edges.length; i++)\n\t{\n\t\tvar state = this.view.getState(edges[i]);\n\t\t\n\t\tvar src = (state != null) ? state.getVisibleTerminal(true) : this.view.getVisibleTerminal(edges[i], true);\n\t\tvar trg = (state != null) ? state.getVisibleTerminal(false) : this.view.getVisibleTerminal(edges[i], false);\n\n\t\tif ((src == source && trg == target) || (!directed && src == target && trg == source))\n\t\t{\n\t\t\tresult.push(edges[i]);\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: getPointForEvent\n * \n * Returns an <mxPoint> representing the given event in the unscaled,\n * non-translated coordinate space of <container> and applies the grid.\n * \n * Parameters:\n * \n * evt - Mousevent that contains the mouse pointer location.\n * addOffset - Optional boolean that specifies if the position should be\n * offset by half of the <gridSize>. Default is true.\n */\n mxGraph.prototype.getPointForEvent = function(evt, addOffset)\n {\n\tvar p = mxUtils.convertPoint(this.container,\n\t\tmxEvent.getClientX(evt), mxEvent.getClientY(evt));\n\t\n\tvar s = this.view.scale;\n\tvar tr = this.view.translate;\n\tvar off = (addOffset != false) ? this.gridSize / 2 : 0;\n\t\n\tp.x = this.snap(p.x / s - tr.x - off);\n\tp.y = this.snap(p.y / s - tr.y - off);\n\t\n\treturn p;\n};\n\n/**\n * Function: getCells\n * \n * Returns the child vertices and edges of the given parent that are contained\n * in the given rectangle. The result is added to the optional result array,\n * which is returned. If no result array is specified then a new array is\n * created and returned.\n * \n * Parameters:\n * \n * x - X-coordinate of the rectangle.\n * y - Y-coordinate of the rectangle.\n * width - Width of the rectangle.\n * height - Height of the rectangle.\n * parent - <mxCell> that should be used as the root of the recursion.\n * Default is current root of the view or the root of the model.\n * result - Optional array to store the result in.\n * intersection - Optional <mxRectangle> to check vertices for intersection.\n * ignoreFn - Optional function to check if a cell state is ignored.\n * includeDescendants - Optional boolean flag to add descendants to the result.\n * Default is false.\n */\nmxGraph.prototype.getCells = function(x, y, width, height, parent, result, intersection, ignoreFn, includeDescendants)\n{\n\tresult = (result != null) ? result : [];\n\t\n\tif (width > 0 || height > 0 || intersection != null)\n\t{\n\t\tvar model = this.getModel();\n\t\tvar right = x + width;\n\t\tvar bottom = y + height;\n\n\t\tif (parent == null)\n\t\t{\n\t\t\tparent = this.getCurrentRoot();\n\t\t\t\n\t\t\tif (parent == null)\n\t\t\t{\n\t\t\t\tparent = model.getRoot();\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (parent != null)\n\t\t{\n\t\t\tvar childCount = model.getChildCount(parent);\n\t\t\t\n\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t{\n\t\t\t\tvar cell = model.getChildAt(parent, i);\n\t\t\t\tvar state = this.view.getState(cell);\n\t\t\t\t\n\t\t\t\tif (state != null && this.isCellVisible(cell) &&\n\t\t\t\t\t(ignoreFn == null || !ignoreFn(state)))\n\t\t\t\t{\n\t\t\t\t\tvar deg = mxUtils.getValue(state.style, mxConstants.STYLE_ROTATION) || 0;\n\t\t\t\t\tvar box = state;\n\t\t\t\t\t\n\t\t\t\t\tif (deg != 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tbox = mxUtils.getBoundingBox(box, deg);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar hit = (intersection != null && model.isVertex(cell) && mxUtils.intersects(intersection, box)) ||\n\t\t\t\t\t\t(intersection == null && (model.isEdge(cell) || model.isVertex(cell)) &&\n\t\t\t\t\t\tbox.x >= x && box.y + box.height <= bottom &&\n\t\t\t\t\t\tbox.y >= y && box.x + box.width <= right);\n\t\t\t\t\t\n\t\t\t\t\tif (hit)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!hit || includeDescendants)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getCells(x, y, width, height, cell, result, intersection, ignoreFn, includeDescendants);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getCellsBeyond\n * \n * Returns the children of the given parent that are contained in the\n * halfpane from the given point (x0, y0) rightwards or downwards\n * depending on rightHalfpane and bottomHalfpane.\n * \n * Parameters:\n * \n * x0 - X-coordinate of the origin.\n * y0 - Y-coordinate of the origin.\n * parent - Optional <mxCell> whose children should be checked. Default is\n * <defaultParent>.\n * rightHalfpane - Boolean indicating if the cells in the right halfpane\n * from the origin should be returned.\n * bottomHalfpane - Boolean indicating if the cells in the bottom halfpane\n * from the origin should be returned.\n */\nmxGraph.prototype.getCellsBeyond = function(x0, y0, parent, rightHalfpane, bottomHalfpane)\n{\n\tvar result = [];\n\t\n\tif (rightHalfpane || bottomHalfpane)\n\t{\n\t\tif (parent == null)\n\t\t{\n\t\t\tparent = this.getDefaultParent();\n\t\t}\n\t\t\n\t\tif (parent != null)\n\t\t{\n\t\t\tvar childCount = this.model.getChildCount(parent);\n\t\t\t\n\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t{\n\t\t\t\tvar child = this.model.getChildAt(parent, i);\n\t\t\t\tvar state = this.view.getState(child);\n\t\t\t\t\n\t\t\t\tif (this.isCellVisible(child) && state != null)\n\t\t\t\t{\n\t\t\t\t\tif ((!rightHalfpane || state.x >= x0) &&\n\t\t\t\t\t\t(!bottomHalfpane || state.y >= y0))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: findTreeRoots\n * \n * Returns all children in the given parent which do not have incoming\n * edges. If the result is empty then the with the greatest difference\n * between incoming and outgoing edges is returned.\n * \n * Parameters:\n * \n * parent - <mxCell> whose children should be checked.\n * isolate - Optional boolean that specifies if edges should be ignored if\n * the opposite end is not a child of the given parent cell. Default is\n * false.\n * invert - Optional boolean that specifies if outgoing or incoming edges\n * should be counted for a tree root. If false then outgoing edges will be\n * counted. Default is false.\n */\nmxGraph.prototype.findTreeRoots = function(parent, isolate, invert)\n{\n\tisolate = (isolate != null) ? isolate : false;\n\tinvert = (invert != null) ? invert : false;\n\tvar roots = [];\n\t\n\tif (parent != null)\n\t{\n\t\tvar model = this.getModel();\n\t\tvar childCount = model.getChildCount(parent);\n\t\tvar best = null;\n\t\tvar maxDiff = 0;\n\t\t\n\t\tfor (var i=0; i<childCount; i++)\n\t\t{\n\t\t\tvar cell = model.getChildAt(parent, i);\n\t\t\t\n\t\t\tif (this.model.isVertex(cell) && this.isCellVisible(cell))\n\t\t\t{\n\t\t\t\tvar conns = this.getConnections(cell, (isolate) ? parent : null);\n\t\t\t\tvar fanOut = 0;\n\t\t\t\tvar fanIn = 0;\n\t\t\t\t\n\t\t\t\tfor (var j = 0; j < conns.length; j++)\n\t\t\t\t{\n\t\t\t\t\tvar src = this.view.getVisibleTerminal(conns[j], true);\n\n                    if (src == cell)\n                    {\n                        fanOut++;\n                    }\n                    else\n                    {\n                        fanIn++;\n                    }\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ((invert && fanOut == 0 && fanIn > 0) ||\n\t\t\t\t\t(!invert && fanIn == 0 && fanOut > 0))\n\t\t\t\t{\n\t\t\t\t\troots.push(cell);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar diff = (invert) ? fanIn - fanOut : fanOut - fanIn;\n\t\t\t\t\n\t\t\t\tif (diff > maxDiff)\n\t\t\t\t{\n\t\t\t\t\tmaxDiff = diff;\n\t\t\t\t\tbest = cell;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (roots.length == 0 && best != null)\n\t\t{\n\t\t\troots.push(best);\n\t\t}\n\t}\n\t\n\treturn roots;\n};\n\n/**\n * Function: traverse\n * \n * Traverses the (directed) graph invoking the given function for each\n * visited vertex and edge. The function is invoked with the current vertex\n * and the incoming edge as a parameter. This implementation makes sure\n * each vertex is only visited once. The function may return false if the\n * traversal should stop at the given vertex.\n * \n * Example:\n * \n * (code)\n * mxLog.show();\n * var cell = graph.getSelectionCell();\n * graph.traverse(cell, false, function(vertex, edge)\n * {\n *   mxLog.debug(graph.getLabel(vertex));\n * });\n * (end)\n * \n * Parameters:\n * \n * vertex - <mxCell> that represents the vertex where the traversal starts.\n * directed - Optional boolean indicating if edges should only be traversed\n * from source to target. Default is true.\n * func - Visitor function that takes the current vertex and the incoming\n * edge as arguments. The traversal stops if the function returns false.\n * edge - Optional <mxCell> that represents the incoming edge. This is\n * null for the first step of the traversal.\n * visited - Optional <mxDictionary> from cells to true for the visited cells.\n * inverse - Optional boolean to traverse in inverse direction. Default is false.\n * This is ignored if directed is false.\n */\nmxGraph.prototype.traverse = function(vertex, directed, func, edge, visited, inverse)\n{\n\tif (func != null && vertex != null)\n\t{\n\t\tdirected = (directed != null) ? directed : true;\n\t\tinverse = (inverse != null) ? inverse : false;\n\t\tvisited = visited || new mxDictionary();\n\t\t\n\t\tif (!visited.get(vertex))\n\t\t{\n\t\t\tvisited.put(vertex, true);\n\t\t\tvar result = func(vertex, edge);\n\t\t\t\n\t\t\tif (result == null || result)\n\t\t\t{\n\t\t\t\tvar edgeCount = this.model.getEdgeCount(vertex);\n\t\t\t\t\n\t\t\t\tif (edgeCount > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (var i = 0; i < edgeCount; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar e = this.model.getEdgeAt(vertex, i);\n\t\t\t\t\t\tvar isSource = this.model.getTerminal(e, true) == vertex;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (!directed || (!inverse == isSource))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar next = this.model.getTerminal(e, !isSource);\n\t\t\t\t\t\t\tthis.traverse(next, directed, func, e, visited, inverse);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Group: Selection\n */\n\n/**\n * Function: isCellSelected\n * \n * Returns true if the given cell is selected.\n * \n * Parameters:\n * \n * cell - <mxCell> for which the selection state should be returned.\n */\nmxGraph.prototype.isCellSelected = function(cell)\n{\n\treturn this.getSelectionModel().isSelected(cell);\n};\n\n/**\n * Function: isSelectionEmpty\n * \n * Returns true if the selection is empty.\n */\nmxGraph.prototype.isSelectionEmpty = function()\n{\n\treturn this.getSelectionModel().isEmpty();\n};\n\n/**\n * Function: clearSelection\n * \n * Clears the selection using <mxGraphSelectionModel.clear>.\n */\nmxGraph.prototype.clearSelection = function()\n{\n\treturn this.getSelectionModel().clear();\n};\n\n/**\n * Function: getSelectionCount\n * \n * Returns the number of selected cells.\n */\nmxGraph.prototype.getSelectionCount = function()\n{\n\treturn this.getSelectionModel().cells.length;\n};\n\t\n/**\n * Function: getSelectionCell\n * \n * Returns the first cell from the array of selected <mxCells>.\n */\nmxGraph.prototype.getSelectionCell = function()\n{\n\treturn this.getSelectionModel().cells[0];\n};\n\n/**\n * Function: getSelectionCells\n * \n * Returns the array of selected <mxCells>.\n */\nmxGraph.prototype.getSelectionCells = function()\n{\n\treturn this.getSelectionModel().cells.slice();\n};\n\n/**\n * Function: setSelectionCell\n * \n * Sets the selection cell.\n * \n * Parameters:\n * \n * cell - <mxCell> to be selected.\n */\nmxGraph.prototype.setSelectionCell = function(cell)\n{\n\tthis.getSelectionModel().setCell(cell);\n};\n\n/**\n * Function: setSelectionCells\n * \n * Sets the selection cell.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be selected.\n */\nmxGraph.prototype.setSelectionCells = function(cells)\n{\n\tthis.getSelectionModel().setCells(cells);\n};\n\n/**\n * Function: addSelectionCell\n * \n * Adds the given cell to the selection.\n * \n * Parameters:\n * \n * cell - <mxCell> to be add to the selection.\n */\nmxGraph.prototype.addSelectionCell = function(cell)\n{\n\tthis.getSelectionModel().addCell(cell);\n};\n\n/**\n * Function: addSelectionCells\n * \n * Adds the given cells to the selection.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be added to the selection.\n */\nmxGraph.prototype.addSelectionCells = function(cells)\n{\n\tthis.getSelectionModel().addCells(cells);\n};\n\n/**\n * Function: removeSelectionCell\n * \n * Removes the given cell from the selection.\n * \n * Parameters:\n * \n * cell - <mxCell> to be removed from the selection.\n */\nmxGraph.prototype.removeSelectionCell = function(cell)\n{\n\tthis.getSelectionModel().removeCell(cell);\n};\n\n/**\n * Function: removeSelectionCells\n * \n * Removes the given cells from the selection.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be removed from the selection.\n */\nmxGraph.prototype.removeSelectionCells = function(cells)\n{\n\tthis.getSelectionModel().removeCells(cells);\n};\n\n/**\n * Function: selectRegion\n * \n * Selects and returns the cells inside the given rectangle for the\n * specified event.\n * \n * Parameters:\n * \n * rect - <mxRectangle> that represents the region to be selected.\n * evt - Mouseevent that triggered the selection.\n */\nmxGraph.prototype.selectRegion = function(rect, evt)\n{\n\tvar cells = this.getCells(rect.x, rect.y, rect.width, rect.height);\n\tthis.selectCellsForEvent(cells, evt);\n\t\n\treturn cells;\n};\n\n/**\n * Function: selectNextCell\n * \n * Selects the next cell.\n */\nmxGraph.prototype.selectNextCell = function()\n{\n\tthis.selectCell(true);\n};\n\n/**\n * Function: selectPreviousCell\n * \n * Selects the previous cell.\n */\nmxGraph.prototype.selectPreviousCell = function()\n{\n\tthis.selectCell();\n};\n\n/**\n * Function: selectParentCell\n * \n * Selects the parent cell.\n */\nmxGraph.prototype.selectParentCell = function()\n{\n\tthis.selectCell(false, true);\n};\n\n/**\n * Function: selectChildCell\n * \n * Selects the first child cell.\n */\nmxGraph.prototype.selectChildCell = function()\n{\n\tthis.selectCell(false, false, true);\n};\n\n/**\n * Function: selectCell\n * \n * Selects the next, parent, first child or previous cell, if all arguments\n * are false.\n * \n * Parameters:\n * \n * isNext - Boolean indicating if the next cell should be selected.\n * isParent - Boolean indicating if the parent cell should be selected.\n * isChild - Boolean indicating if the first child cell should be selected.\n */\nmxGraph.prototype.selectCell = function(isNext, isParent, isChild)\n{\n\tvar sel = this.selectionModel;\n\tvar cell = (sel.cells.length > 0) ? sel.cells[0] : null;\n\t\n\tif (sel.cells.length > 1)\n\t{\n\t\tsel.clear();\n\t}\n\t\n\tvar parent = (cell != null) ?\n\t\tthis.model.getParent(cell) :\n\t\tthis.getDefaultParent();\n\t\n\tvar childCount = this.model.getChildCount(parent);\n\t\n\tif (cell == null && childCount > 0)\n\t{\n\t\tvar child = this.model.getChildAt(parent, 0);\n\t\tthis.setSelectionCell(child);\n\t}\n\telse if ((cell == null || isParent) &&\n\t\tthis.view.getState(parent) != null &&\n\t\tthis.model.getGeometry(parent) != null)\n\t{\n\t\tif (this.getCurrentRoot() != parent)\n\t\t{\n\t\t\tthis.setSelectionCell(parent);\n\t\t}\n\t}\n\telse if (cell != null && isChild)\n\t{\n\t\tvar tmp = this.model.getChildCount(cell);\n\t\t\n\t\tif (tmp > 0)\n\t\t{\n\t\t\tvar child = this.model.getChildAt(cell, 0);\n\t\t\tthis.setSelectionCell(child);\n\t\t}\n\t}\n\telse if (childCount > 0)\n\t{\n\t\tvar i = parent.getIndex(cell);\n\t\t\n\t\tif (isNext)\n\t\t{\n\t\t\ti++;\n\t\t\tvar child = this.model.getChildAt(parent, i % childCount);\n\t\t\tthis.setSelectionCell(child);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ti--;\n\t\t\tvar index =  (i < 0) ? childCount - 1 : i;\n\t\t\tvar child = this.model.getChildAt(parent, index);\n\t\t\tthis.setSelectionCell(child);\n\t\t}\n\t}\n};\n\n/**\n * Function: selectAll\n * \n * Selects all children of the given parent cell or the children of the\n * default parent if no parent is specified. To select leaf vertices and/or\n * edges use <selectCells>.\n * \n * Parameters:\n * \n * parent - Optional <mxCell> whose children should be selected.\n * Default is <defaultParent>.\n * descendants - Optional boolean specifying whether all descendants should be\n * selected. Default is false.\n */\nmxGraph.prototype.selectAll = function(parent, descendants)\n{\n\tparent = parent || this.getDefaultParent();\n\t\n\tvar cells = (descendants) ? this.model.filterDescendants(mxUtils.bind(this, function(cell)\n\t{\n\t\treturn cell != parent && this.view.getState(cell) != null;\n\t}), parent) : this.model.getChildren(parent);\n\t\n\tif (cells != null)\n\t{\n\t\tthis.setSelectionCells(cells);\n\t}\n};\n\n/**\n * Function: selectVertices\n * \n * Select all vertices inside the given parent or the default parent.\n */\nmxGraph.prototype.selectVertices = function(parent, selectGroups)\n{\n\tthis.selectCells(true, false, parent, selectGroups);\n};\n\n/**\n * Function: selectVertices\n * \n * Select all vertices inside the given parent or the default parent.\n */\nmxGraph.prototype.selectEdges = function(parent)\n{\n\tthis.selectCells(false, true, parent);\n};\n\n/**\n * Function: selectCells\n * \n * Selects all vertices and/or edges depending on the given boolean\n * arguments recursively, starting at the given parent or the default\n * parent if no parent is specified. Use <selectAll> to select all cells.\n * For vertices, only cells with no children are selected.\n * \n * Parameters:\n * \n * vertices - Boolean indicating if vertices should be selected.\n * edges - Boolean indicating if edges should be selected.\n * parent - Optional <mxCell> that acts as the root of the recursion.\n * Default is <defaultParent>.\n * selectGroups - Optional boolean that specifies if groups should be\n * selected. Default is false.\n */\nmxGraph.prototype.selectCells = function(vertices, edges, parent, selectGroups)\n{\n\tparent = parent || this.getDefaultParent();\n\t\n\tvar filter = mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.view.getState(cell) != null &&\n\t\t\t(((selectGroups || this.model.getChildCount(cell) == 0) &&\n\t\t\tthis.model.isVertex(cell) && vertices\n\t\t\t&& !this.model.isEdge(this.model.getParent(cell))) ||\n\t\t\t(this.model.isEdge(cell) && edges));\n\t});\n\t\n\tvar cells = this.model.filterDescendants(filter, parent);\n\t\n\tif (cells != null)\n\t{\n\t\tthis.setSelectionCells(cells);\n\t}\n};\n\n/**\n * Function: selectCellForEvent\n * \n * Selects the given cell by either adding it to the selection or\n * replacing the selection depending on whether the given mouse event is a\n * toggle event.\n * \n * Parameters:\n * \n * cell - <mxCell> to be selected.\n * evt - Optional mouseevent that triggered the selection.\n */\nmxGraph.prototype.selectCellForEvent = function(cell, evt)\n{\n\tvar isSelected = this.isCellSelected(cell);\n\t\n\tif (this.isToggleEvent(evt))\n\t{\n\t\tif (isSelected)\n\t\t{\n\t\t\tthis.removeSelectionCell(cell);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.addSelectionCell(cell);\n\t\t}\n\t}\n\telse if (!isSelected || this.getSelectionCount() != 1)\n\t{\n\t\tthis.setSelectionCell(cell);\n\t}\n};\n\n/**\n * Function: selectCellsForEvent\n * \n * Selects the given cells by either adding them to the selection or\n * replacing the selection depending on whether the given mouse event is a\n * toggle event.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> to be selected.\n * evt - Optional mouseevent that triggered the selection.\n */\nmxGraph.prototype.selectCellsForEvent = function(cells, evt)\n{\n\tif (this.isToggleEvent(evt))\n\t{\n\t\tthis.addSelectionCells(cells);\n\t}\n\telse\n\t{\n\t\tthis.setSelectionCells(cells);\n\t}\n};\n\n/**\n * Group: Selection state\n */\n\n/**\n * Function: createHandler\n * \n * Creates a new handler for the given cell state. This implementation\n * returns a new <mxEdgeHandler> of the corresponding cell is an edge,\n * otherwise it returns an <mxVertexHandler>.\n * \n * Parameters:\n * \n * state - <mxCellState> whose handler should be created.\n */\nmxGraph.prototype.createHandler = function(state)\n{\n\tvar result = null;\n\t\n\tif (state != null)\n\t{\n\t\tif (this.model.isEdge(state.cell))\n\t\t{\n\t\t\tvar source = state.getVisibleTerminalState(true);\n\t\t\tvar target = state.getVisibleTerminalState(false);\n\t\t\tvar geo = this.getCellGeometry(state.cell);\n\t\t\t\n\t\t\tvar edgeStyle = this.view.getEdgeStyle(state, (geo != null) ? geo.points : null, source, target);\n\t\t\tresult = this.createEdgeHandler(state, edgeStyle);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult = this.createVertexHandler(state);\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: createVertexHandler\n * \n * Hooks to create a new <mxVertexHandler> for the given <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> to create the handler for.\n */\nmxGraph.prototype.createVertexHandler = function(state)\n{\n\treturn new mxVertexHandler(state);\n};\n\n/**\n * Function: createEdgeHandler\n * \n * Hooks to create a new <mxEdgeHandler> for the given <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> to create the handler for.\n */\nmxGraph.prototype.createEdgeHandler = function(state, edgeStyle)\n{\n\tvar result = null;\n\t\n\tif (edgeStyle == mxEdgeStyle.Loop ||\n\t\tedgeStyle == mxEdgeStyle.ElbowConnector ||\n\t\tedgeStyle == mxEdgeStyle.SideToSide ||\n\t\tedgeStyle == mxEdgeStyle.TopToBottom)\n\t{\n\t\tresult = this.createElbowEdgeHandler(state);\n\t}\n\telse if (edgeStyle == mxEdgeStyle.SegmentConnector || \n\t\t\tedgeStyle == mxEdgeStyle.OrthConnector)\n\t{\n\t\tresult = this.createEdgeSegmentHandler(state);\n\t}\n\telse\n\t{\n\t\tresult = new mxEdgeHandler(state);\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: createEdgeSegmentHandler\n * \n * Hooks to create a new <mxEdgeSegmentHandler> for the given <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> to create the handler for.\n */\nmxGraph.prototype.createEdgeSegmentHandler = function(state)\n{\n\treturn new mxEdgeSegmentHandler(state);\n};\n\n/**\n * Function: createElbowEdgeHandler\n * \n * Hooks to create a new <mxElbowEdgeHandler> for the given <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> to create the handler for.\n */\nmxGraph.prototype.createElbowEdgeHandler = function(state)\n{\n\treturn new mxElbowEdgeHandler(state);\n};\n\n/**\n * Group: Graph events\n */\n\n/**\n * Function: addMouseListener\n * \n * Adds a listener to the graph event dispatch loop. The listener\n * must implement the mouseDown, mouseMove and mouseUp methods\n * as shown in the <mxMouseEvent> class.\n * \n * Parameters:\n * \n * listener - Listener to be added to the graph event listeners.\n */\nmxGraph.prototype.addMouseListener = function(listener)\n{\n\tif (this.mouseListeners == null)\n\t{\n\t\tthis.mouseListeners = [];\n\t}\n\t\n\tthis.mouseListeners.push(listener);\n};\n\n/**\n * Function: removeMouseListener\n * \n * Removes the specified graph listener.\n * \n * Parameters:\n * \n * listener - Listener to be removed from the graph event listeners.\n */\nmxGraph.prototype.removeMouseListener = function(listener)\n{\n\tif (this.mouseListeners != null)\n\t{\n\t\tfor (var i = 0; i < this.mouseListeners.length; i++)\n\t\t{\n\t\t\tif (this.mouseListeners[i] == listener)\n\t\t\t{\n\t\t\t\tthis.mouseListeners.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: updateMouseEvent\n * \n * Sets the graphX and graphY properties if the given <mxMouseEvent> if\n * required and returned the event.\n * \n * Parameters:\n * \n * me - <mxMouseEvent> to be updated.\n * evtName - Name of the mouse event.\n */\nmxGraph.prototype.updateMouseEvent = function(me, evtName)\n{\n\tif (me.graphX == null || me.graphY == null)\n\t{\n\t\tvar pt = mxUtils.convertPoint(this.container, me.getX(), me.getY());\n\t\t\n\t\tme.graphX = pt.x - this.panDx;\n\t\tme.graphY = pt.y - this.panDy;\n\t\t\n\t\t// Searches for rectangles using method if native hit detection is disabled on shape\n\t\tif (me.getCell() == null && this.isMouseDown && evtName == mxEvent.MOUSE_MOVE)\n\t\t{\n\t\t\tme.state = this.view.getState(this.getCellAt(pt.x, pt.y, null, null, null, function(state)\n\t\t\t{\n\t\t\t\treturn state.shape == null || state.shape.paintBackground != mxRectangleShape.prototype.paintBackground ||\n\t\t\t\t\tmxUtils.getValue(state.style, mxConstants.STYLE_POINTER_EVENTS, '1') == '1' ||\n\t\t\t\t\t(state.shape.fill != null && state.shape.fill != mxConstants.NONE);\n\t\t\t}));\n\t\t}\n\t}\n\t\n\treturn me;\n};\n\n/**\n * Function: getStateForEvent\n * \n * Returns the state for the given touch event.\n */\nmxGraph.prototype.getStateForTouchEvent = function(evt)\n{\n\tvar x = mxEvent.getClientX(evt);\n\tvar y = mxEvent.getClientY(evt);\n\t\n\t// Dispatches the drop event to the graph which\n\t// consumes and executes the source function\n\tvar pt = mxUtils.convertPoint(this.container, x, y);\n\n\treturn this.view.getState(this.getCellAt(pt.x, pt.y));\n};\n\n/**\n * Function: isEventIgnored\n * \n * Returns true if the event should be ignored in <fireMouseEvent>.\n */\nmxGraph.prototype.isEventIgnored = function(evtName, me, sender)\n{\n\tvar mouseEvent = mxEvent.isMouseEvent(me.getEvent());\n\tvar result = false;\n\n\t// Drops events that are fired more than once\n\tif (me.getEvent() == this.lastEvent)\n\t{\n\t\tresult = true;\n\t}\n\telse\n\t{\n\t\tthis.lastEvent = me.getEvent();\n\t}\n\n\t// Installs event listeners to capture the complete gesture from the event source\n\t// for non-MS touch events as a workaround for all events for the same geture being\n\t// fired from the event source even if that was removed from the DOM.\n\tif (this.eventSource != null && evtName != mxEvent.MOUSE_MOVE)\n\t{\n\t\tmxEvent.removeGestureListeners(this.eventSource, null, this.mouseMoveRedirect, this.mouseUpRedirect);\n\t\tthis.mouseMoveRedirect = null;\n\t\tthis.mouseUpRedirect = null;\n\t\tthis.eventSource = null;\n\t}\n\telse if (!mxClient.IS_GC && this.eventSource != null && me.getSource() != this.eventSource)\n\t{\n\t\tresult = true;\n\t}\n\telse if (mxClient.IS_TOUCH && evtName == mxEvent.MOUSE_DOWN &&\n\t\t\t!mouseEvent && !mxEvent.isPenEvent(me.getEvent()))\n\t{\n\t\tthis.eventSource = me.getSource();\n\n\t\tthis.mouseMoveRedirect = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt, this.getStateForTouchEvent(evt)));\n\t\t});\n\t\tthis.mouseUpRedirect = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt, this.getStateForTouchEvent(evt)));\n\t\t});\n\t\t\n\t\tmxEvent.addGestureListeners(this.eventSource, null, this.mouseMoveRedirect, this.mouseUpRedirect);\n\t}\n\n\t// Factored out the workarounds for FF to make it easier to override/remove\n\t// Note this method has side-effects!\n\tif (this.isSyntheticEventIgnored(evtName, me, sender))\n\t{\n\t\tresult = true;\n\t}\n\n\t// Never fires mouseUp/-Down for double clicks\n\tif (!mxEvent.isPopupTrigger(this.lastEvent) && evtName != mxEvent.MOUSE_MOVE && this.lastEvent.detail == 2)\n\t{\n\t\treturn true;\n\t}\n\t\n\t// Filters out of sequence events or mixed event types during a gesture\n\tif (evtName == mxEvent.MOUSE_UP && this.isMouseDown)\n\t{\n\t\tthis.isMouseDown = false;\n\t}\n\telse if (evtName == mxEvent.MOUSE_DOWN && !this.isMouseDown)\n\t{\n\t\tthis.isMouseDown = true;\n\t\tthis.isMouseTrigger = mouseEvent;\n\t}\n\t// Drops mouse events that are fired during touch gestures as a workaround for Webkit\n\t// and mouse events that are not in sync with the current internal button state\n\telse if (!result && (((!mxClient.IS_FF || evtName != mxEvent.MOUSE_MOVE) &&\n\t\tthis.isMouseDown && this.isMouseTrigger != mouseEvent) ||\n\t\t(evtName == mxEvent.MOUSE_DOWN && this.isMouseDown) ||\n\t\t(evtName == mxEvent.MOUSE_UP && !this.isMouseDown)))\n\t{\n\t\tresult = true;\n\t}\n\t\n\tif (!result && evtName == mxEvent.MOUSE_DOWN)\n\t{\n\t\tthis.lastMouseX = me.getX();\n\t\tthis.lastMouseY = me.getY();\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: isSyntheticEventIgnored\n * \n * Hook for ignoring synthetic mouse events after touchend in Firefox.\n */\nmxGraph.prototype.isSyntheticEventIgnored = function(evtName, me, sender)\n{\n\tvar result = false;\n\tvar mouseEvent = mxEvent.isMouseEvent(me.getEvent());\n\t\n\t// LATER: This does not cover all possible cases that can go wrong in FF\n\tif (this.ignoreMouseEvents && mouseEvent && evtName != mxEvent.MOUSE_MOVE)\n\t{\n\t\tthis.ignoreMouseEvents = evtName != mxEvent.MOUSE_UP;\n\t\tresult = true;\n\t}\n\telse if (mxClient.IS_FF && !mouseEvent && evtName == mxEvent.MOUSE_UP)\n\t{\n\t\tthis.ignoreMouseEvents = true;\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: isEventSourceIgnored\n * \n * Returns true if the event should be ignored in <fireMouseEvent>. This\n * implementation returns true for select, option and input (if not of type\n * checkbox, radio, button, submit or file) event sources if the event is not\n * a mouse event or a left mouse button press event.\n * \n * Parameters:\n * \n * evtName - The name of the event.\n * me - <mxMouseEvent> that should be ignored.\n */\nmxGraph.prototype.isEventSourceIgnored = function(evtName, me)\n{\n\tvar source = me.getSource();\n\tvar name = (source.nodeName != null) ? source.nodeName.toLowerCase() : '';\n\tvar candidate = !mxEvent.isMouseEvent(me.getEvent()) || mxEvent.isLeftMouseButton(me.getEvent());\n\t\n\treturn evtName == mxEvent.MOUSE_DOWN && candidate && (name == 'select' || name == 'option' ||\n\t\t(name == 'input' && source.type != 'checkbox' && source.type != 'radio' &&\n\t\tsource.type != 'button' && source.type != 'submit' && source.type != 'file'));\n};\n\n/**\n * Function: getEventState\n * \n * Returns the <mxCellState> to be used when firing the mouse event for the\n * given state. This implementation returns the given state.\n * \n * Parameters:\n * \n * <mxCellState> - State whose event source should be returned.\n */\nmxGraph.prototype.getEventState = function(state)\n{\n\treturn state;\n};\n\n/**\n * Function: fireMouseEvent\n * \n * Dispatches the given event in the graph event dispatch loop. Possible\n * event names are <mxEvent.MOUSE_DOWN>, <mxEvent.MOUSE_MOVE> and\n * <mxEvent.MOUSE_UP>. All listeners are invoked for all events regardless\n * of the consumed state of the event.\n * \n * Parameters:\n * \n * evtName - String that specifies the type of event to be dispatched.\n * me - <mxMouseEvent> to be fired.\n * sender - Optional sender argument. Default is this.\n */\nmxGraph.prototype.fireMouseEvent = function(evtName, me, sender)\n{\n\tif (this.isEventSourceIgnored(evtName, me))\n\t{\n\t\tif (this.tooltipHandler != null)\n\t\t{\n\t\t\tthis.tooltipHandler.hide();\n\t\t}\n\t\t\n\t\treturn;\n\t}\n\t\n\tif (sender == null)\n\t{\n\t\tsender = this;\n\t}\n\n\t// Updates the graph coordinates in the event\n\tme = this.updateMouseEvent(me, evtName);\n\n\t// Detects and processes double taps for touch-based devices which do not have native double click events\n\t// or where detection of double click is not always possible (quirks, IE10+). Note that this can only handle\n\t// double clicks on cells because the sequence of events in IE prevents detection on the background, it fires\n\t// two mouse ups, one of which without a cell but no mousedown for the second click which means we cannot\n\t// detect which mouseup(s) are part of the first click, ie we do not know when the first click ends.\n\tif ((!this.nativeDblClickEnabled && !mxEvent.isPopupTrigger(me.getEvent())) || (this.doubleTapEnabled &&\n\t\tmxClient.IS_TOUCH && (mxEvent.isTouchEvent(me.getEvent()) || mxEvent.isPenEvent(me.getEvent()))))\n\t{\n\t\tvar currentTime = new Date().getTime();\n\t\t\n\t\t// NOTE: Second mouseDown for double click missing in quirks mode\n\t\tif ((!mxClient.IS_QUIRKS && evtName == mxEvent.MOUSE_DOWN) || (mxClient.IS_QUIRKS && evtName == mxEvent.MOUSE_UP && !this.fireDoubleClick))\n\t\t{\n\t\t\tif (this.lastTouchEvent != null && this.lastTouchEvent != me.getEvent() &&\n\t\t\t\tcurrentTime - this.lastTouchTime < this.doubleTapTimeout &&\n\t\t\t\tMath.abs(this.lastTouchX - me.getX()) < this.doubleTapTolerance &&\n\t\t\t\tMath.abs(this.lastTouchY - me.getY()) < this.doubleTapTolerance &&\n\t\t\t\tthis.doubleClickCounter < 2)\n\t\t\t{\n\t\t\t\tthis.doubleClickCounter++;\n\t\t\t\tvar doubleClickFired = false;\n\t\t\t\t\n\t\t\t\tif (evtName == mxEvent.MOUSE_UP)\n\t\t\t\t{\n\t\t\t\t\tif (me.getCell() == this.lastTouchCell && this.lastTouchCell != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.lastTouchTime = 0;\n\t\t\t\t\t\tvar cell = this.lastTouchCell;\n\t\t\t\t\t\tthis.lastTouchCell = null;\n\n\t\t\t\t\t\t// Fires native dblclick event via event source\n\t\t\t\t\t\t// NOTE: This fires two double click events on edges in quirks mode. While\n\t\t\t\t\t\t// trying to fix this, we realized that nativeDoubleClick can be disabled for\n\t\t\t\t\t\t// quirks and IE10+ (or we didn't find the case mentioned above where it\n\t\t\t\t\t\t// would not work), ie. all double clicks seem to be working without this.\n\t\t\t\t\t\tif (mxClient.IS_QUIRKS)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tme.getSource().fireEvent('ondblclick');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.dblClick(me.getEvent(), cell);\n\t\t\t\t\t\tdoubleClickFired = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.fireDoubleClick = true;\n\t\t\t\t\tthis.lastTouchTime = 0;\n\t\t\t\t}\n\n\t\t\t\t// Do not ignore mouse up in quirks in this case\n\t\t\t\tif (!mxClient.IS_QUIRKS || doubleClickFired)\n\t\t\t\t{\n\t\t\t\t\tmxEvent.consume(me.getEvent());\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.lastTouchEvent == null || this.lastTouchEvent != me.getEvent())\n\t\t\t{\n\t\t\t\tthis.lastTouchCell = me.getCell();\n\t\t\t\tthis.lastTouchX = me.getX();\n\t\t\t\tthis.lastTouchY = me.getY();\n\t\t\t\tthis.lastTouchTime = currentTime;\n\t\t\t\tthis.lastTouchEvent = me.getEvent();\n\t\t\t\tthis.doubleClickCounter = 0;\n\t\t\t}\n\t\t}\n\t\telse if ((this.isMouseDown || evtName == mxEvent.MOUSE_UP) && this.fireDoubleClick)\n\t\t{\n\t\t\tthis.fireDoubleClick = false;\n\t\t\tvar cell = this.lastTouchCell;\n\t\t\tthis.lastTouchCell = null;\n\t\t\tthis.isMouseDown = false;\n\t\t\t\n\t\t\t// Workaround for Chrome/Safari not firing native double click events for double touch on background\n\t\t\tvar valid = (cell != null) || ((mxEvent.isTouchEvent(me.getEvent()) || mxEvent.isPenEvent(me.getEvent())) &&\n\t\t\t\t(mxClient.IS_GC || mxClient.IS_SF));\n\t\t\t\n\t\t\tif (valid && Math.abs(this.lastTouchX - me.getX()) < this.doubleTapTolerance &&\n\t\t\t\tMath.abs(this.lastTouchY - me.getY()) < this.doubleTapTolerance)\n\t\t\t{\n\t\t\t\tthis.dblClick(me.getEvent(), cell);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmxEvent.consume(me.getEvent());\n\t\t\t}\n\t\t\t\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!this.isEventIgnored(evtName, me, sender))\n\t{\n\t\t// Updates the event state via getEventState\n\t\tme.state = this.getEventState(me.getState());\n\t\tthis.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT, 'eventName', evtName, 'event', me));\n\t\t\n\t\tif ((mxClient.IS_OP || mxClient.IS_SF || mxClient.IS_GC || mxClient.IS_IE11 ||\n\t\t\t(mxClient.IS_IE && mxClient.IS_SVG) || me.getEvent().target != this.container))\n\t\t{\n\t\t\tif (evtName == mxEvent.MOUSE_MOVE && this.isMouseDown && this.autoScroll && !mxEvent.isMultiTouchEvent(me.getEvent))\n\t\t\t{\n\t\t\t\tthis.scrollPointToVisible(me.getGraphX(), me.getGraphY(), this.autoExtend);\n\t\t\t}\n\t\t\telse if (evtName == mxEvent.MOUSE_UP && this.ignoreScrollbars && this.translateToScrollPosition &&\n\t\t\t\t\t(this.container.scrollLeft != 0 || this.container.scrollTop != 0))\n\t\t\t{\n\t\t\t\tvar s = this.view.scale;\n\t\t\t\tvar tr = this.view.translate;\n\t\t\t\tthis.view.setTranslate(tr.x - this.container.scrollLeft / s, tr.y - this.container.scrollTop / s);\n\t\t\t\tthis.container.scrollLeft = 0;\n\t\t\t\tthis.container.scrollTop = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.mouseListeners != null)\n\t\t\t{\n\t\t\t\tvar args = [sender, me];\n\t\n\t\t\t\t// Does not change returnValue in Opera\n\t\t\t\tif (!me.getEvent().preventDefault)\n\t\t\t\t{\n\t\t\t\t\tme.getEvent().returnValue = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < this.mouseListeners.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar l = this.mouseListeners[i];\n\t\t\t\t\t\n\t\t\t\t\tif (evtName == mxEvent.MOUSE_DOWN)\n\t\t\t\t\t{\n\t\t\t\t\t\tl.mouseDown.apply(l, args);\n\t\t\t\t\t}\n\t\t\t\t\telse if (evtName == mxEvent.MOUSE_MOVE)\n\t\t\t\t\t{\n\t\t\t\t\t\tl.mouseMove.apply(l, args);\n\t\t\t\t\t}\n\t\t\t\t\telse if (evtName == mxEvent.MOUSE_UP)\n\t\t\t\t\t{\n\t\t\t\t\t\tl.mouseUp.apply(l, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Invokes the click handler\n\t\t\tif (evtName == mxEvent.MOUSE_UP)\n\t\t\t{\n\t\t\t\tthis.click(me);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Detects tapAndHold events using a timer\n\t\tif ((mxEvent.isTouchEvent(me.getEvent()) || mxEvent.isPenEvent(me.getEvent())) &&\n\t\t\tevtName == mxEvent.MOUSE_DOWN && this.tapAndHoldEnabled && !this.tapAndHoldInProgress)\n\t\t{\n\t\t\tthis.tapAndHoldInProgress = true;\n\t\t\tthis.initialTouchX = me.getGraphX();\n\t\t\tthis.initialTouchY = me.getGraphY();\n\t\t\t\n\t\t\tvar handler = function()\n\t\t\t{\n\t\t\t\tif (this.tapAndHoldValid)\n\t\t\t\t{\n\t\t\t\t\tthis.tapAndHold(me);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.tapAndHoldInProgress = false;\n\t\t\t\tthis.tapAndHoldValid = false;\n\t\t\t};\n\t\t\t\n\t\t\tif (this.tapAndHoldThread)\n\t\t\t{\n\t\t\t\twindow.clearTimeout(this.tapAndHoldThread);\n\t\t\t}\n\t\n\t\t\tthis.tapAndHoldThread = window.setTimeout(mxUtils.bind(this, handler), this.tapAndHoldDelay);\n\t\t\tthis.tapAndHoldValid = true;\n\t\t}\n\t\telse if (evtName == mxEvent.MOUSE_UP)\n\t\t{\n\t\t\tthis.tapAndHoldInProgress = false;\n\t\t\tthis.tapAndHoldValid = false;\n\t\t}\n\t\telse if (this.tapAndHoldValid)\n\t\t{\n\t\t\tthis.tapAndHoldValid =\n\t\t\t\tMath.abs(this.initialTouchX - me.getGraphX()) < this.tolerance &&\n\t\t\t\tMath.abs(this.initialTouchY - me.getGraphY()) < this.tolerance;\n\t\t}\n\n\t\t// Stops editing for all events other than from cellEditor\n\t\tif (evtName == mxEvent.MOUSE_DOWN && this.isEditing() && !this.cellEditor.isEventSource(me.getEvent()))\n\t\t{\n\t\t\tthis.stopEditing(!this.isInvokesStopCellEditing());\n\t\t}\n\n\t\tthis.consumeMouseEvent(evtName, me, sender);\n\t}\n};\n\n/**\n * Function: consumeMouseEvent\n * \n * Consumes the given <mxMouseEvent> if it's a touchStart event.\n */\nmxGraph.prototype.consumeMouseEvent = function(evtName, me, sender)\n{\n\t// Workaround for duplicate click in Windows 8 with Chrome/FF/Opera with touch\n\tif (evtName == mxEvent.MOUSE_DOWN && mxEvent.isTouchEvent(me.getEvent()))\n\t{\n\t\tme.consume(false);\n\t}\n};\n\n/**\n * Function: fireGestureEvent\n * \n * Dispatches a <mxEvent.GESTURE> event. The following example will resize the\n * cell under the mouse based on the scale property of the native touch event.\n * \n * (code)\n * graph.addListener(mxEvent.GESTURE, function(sender, eo)\n * {\n *   var evt = eo.getProperty('event');\n *   var state = graph.view.getState(eo.getProperty('cell'));\n *   \n *   if (graph.isEnabled() && graph.isCellResizable(state.cell) && Math.abs(1 - evt.scale) > 0.2)\n *   {\n *     var scale = graph.view.scale;\n *     var tr = graph.view.translate;\n *     \n *     var w = state.width * evt.scale;\n *     var h = state.height * evt.scale;\n *     var x = state.x - (w - state.width) / 2;\n *     var y = state.y - (h - state.height) / 2;\n *     \n *     var bounds = new mxRectangle(graph.snap(x / scale) - tr.x,\n *     \t\tgraph.snap(y / scale) - tr.y, graph.snap(w / scale), graph.snap(h / scale));\n *     graph.resizeCell(state.cell, bounds);\n *     eo.consume();\n *   }\n * });\n * (end)\n * \n * Parameters:\n * \n * evt - Gestureend event that represents the gesture.\n * cell - Optional <mxCell> associated with the gesture.\n */\nmxGraph.prototype.fireGestureEvent = function(evt, cell)\n{\n\t// Resets double tap event handling when gestures take place\n\tthis.lastTouchTime = 0;\n\tthis.fireEvent(new mxEventObject(mxEvent.GESTURE, 'event', evt, 'cell', cell));\n};\n\n/**\n * Function: destroy\n * \n * Destroys the graph and all its resources.\n */\nmxGraph.prototype.destroy = function()\n{\n\tif (!this.destroyed)\n\t{\n\t\tthis.destroyed = true;\n\t\t\n\t\tif (this.tooltipHandler != null)\n\t\t{\n\t\t\tthis.tooltipHandler.destroy();\n\t\t}\n\t\t\n\t\tif (this.selectionCellsHandler != null)\n\t\t{\n\t\t\tthis.selectionCellsHandler.destroy();\n\t\t}\n\n\t\tif (this.panningHandler != null)\n\t\t{\n\t\t\tthis.panningHandler.destroy();\n\t\t}\n\n\t\tif (this.popupMenuHandler != null)\n\t\t{\n\t\t\tthis.popupMenuHandler.destroy();\n\t\t}\n\t\t\n\t\tif (this.connectionHandler != null)\n\t\t{\n\t\t\tthis.connectionHandler.destroy();\n\t\t}\n\t\t\n\t\tif (this.graphHandler != null)\n\t\t{\n\t\t\tthis.graphHandler.destroy();\n\t\t}\n\t\t\n\t\tif (this.cellEditor != null)\n\t\t{\n\t\t\tthis.cellEditor.destroy();\n\t\t}\n\t\t\n\t\tif (this.view != null)\n\t\t{\n\t\t\tthis.view.destroy();\n\t\t}\n\n\t\tif (this.model != null && this.graphModelChangeListener != null)\n\t\t{\n\t\t\tthis.model.removeListener(this.graphModelChangeListener);\n\t\t\tthis.graphModelChangeListener = null;\n\t\t}\n\n\t\tthis.container = null;\n\t}\n};\n\n__mxOutput.mxGraph = typeof mxGraph !== 'undefined' ? mxGraph : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCellOverlay\n *\n * Extends <mxEventSource> to implement a graph overlay, represented by an icon\n * and a tooltip. Overlays can handle and fire <click> events and are added to\n * the graph using <mxGraph.addCellOverlay>, and removed using\n * <mxGraph.removeCellOverlay>, or <mxGraph.removeCellOverlays> to remove all overlays.\n * The <mxGraph.getCellOverlays> function returns the array of overlays for a given\n * cell in a graph. If multiple overlays exist for the same cell, then\n * <getBounds> should be overridden in at least one of the overlays.\n * \n * Overlays appear on top of all cells in a special layer. If this is not\n * desirable, then the image must be rendered as part of the shape or label of\n * the cell instead.\n *\n * Example:\n * \n * The following adds a new overlays for a given vertex and selects the cell\n * if the overlay is clicked.\n *\n * (code)\n * var overlay = new mxCellOverlay(img, html);\n * graph.addCellOverlay(vertex, overlay);\n * overlay.addListener(mxEvent.CLICK, function(sender, evt)\n * {\n *   var cell = evt.getProperty('cell');\n *   graph.setSelectionCell(cell);\n * });\n * (end)\n * \n * For cell overlays to be printed use <mxPrintPreview.printOverlays>.\n *\n * Event: mxEvent.CLICK\n *\n * Fires when the user clicks on the overlay. The <code>event</code> property\n * contains the corresponding mouse event and the <code>cell</code> property\n * contains the cell. For touch devices this is fired if the element receives\n * a touchend event.\n * \n * Constructor: mxCellOverlay\n *\n * Constructs a new overlay using the given image and tooltip.\n * \n * Parameters:\n * \n * image - <mxImage> that represents the icon to be displayed.\n * tooltip - Optional string that specifies the tooltip.\n * align - Optional horizontal alignment for the overlay. Possible\n * values are <ALIGN_LEFT>, <ALIGN_CENTER> and <ALIGN_RIGHT>\n * (default).\n * verticalAlign - Vertical alignment for the overlay. Possible\n * values are <ALIGN_TOP>, <ALIGN_MIDDLE> and <ALIGN_BOTTOM>\n * (default).\n */\nfunction mxCellOverlay(image, tooltip, align, verticalAlign, offset, cursor)\n{\n\tthis.image = image;\n\tthis.tooltip = tooltip;\n\tthis.align = (align != null) ? align : this.align;\n\tthis.verticalAlign = (verticalAlign != null) ? verticalAlign : this.verticalAlign;\n\tthis.offset = (offset != null) ? offset : new mxPoint();\n\tthis.cursor = (cursor != null) ? cursor : 'help';\n};\n\n/**\n * Extends mxEventSource.\n */\nmxCellOverlay.prototype = new mxEventSource();\nmxCellOverlay.prototype.constructor = mxCellOverlay;\n\n/**\n * Variable: image\n *\n * Holds the <mxImage> to be used as the icon.\n */\nmxCellOverlay.prototype.image = null;\n\n/**\n * Variable: tooltip\n * \n * Holds the optional string to be used as the tooltip.\n */\nmxCellOverlay.prototype.tooltip = null;\n\n/**\n * Variable: align\n * \n * Holds the horizontal alignment for the overlay. Default is\n * <mxConstants.ALIGN_RIGHT>. For edges, the overlay always appears in the\n * center of the edge.\n */\nmxCellOverlay.prototype.align = mxConstants.ALIGN_RIGHT;\n\n/**\n * Variable: verticalAlign\n * \n * Holds the vertical alignment for the overlay. Default is\n * <mxConstants.ALIGN_BOTTOM>. For edges, the overlay always appears in the\n * center of the edge.\n */\nmxCellOverlay.prototype.verticalAlign = mxConstants.ALIGN_BOTTOM;\n\n/**\n * Variable: offset\n * \n * Holds the offset as an <mxPoint>. The offset will be scaled according to the\n * current scale.\n */\nmxCellOverlay.prototype.offset = null;\n\n/**\n * Variable: cursor\n * \n * Holds the cursor for the overlay. Default is 'help'.\n */\nmxCellOverlay.prototype.cursor = null;\n\n/**\n * Variable: defaultOverlap\n * \n * Defines the overlapping for the overlay, that is, the proportional distance\n * from the origin to the point defined by the alignment. Default is 0.5.\n */\nmxCellOverlay.prototype.defaultOverlap = 0.5;\n\n/**\n * Function: getBounds\n * \n * Returns the bounds of the overlay for the given <mxCellState> as an\n * <mxRectangle>. This should be overridden when using multiple overlays\n * per cell so that the overlays do not overlap.\n * \n * The following example will place the overlay along an edge (where\n * x=[-1..1] from the start to the end of the edge and y is the\n * orthogonal offset in px).\n * \n * (code)\n * overlay.getBounds = function(state)\n * {\n *   var bounds = mxCellOverlay.prototype.getBounds.apply(this, arguments);\n *   \n *   if (state.view.graph.getModel().isEdge(state.cell))\n *   {\n *     var pt = state.view.getPoint(state, {x: 0, y: 0, relative: true});\n *     \n *     bounds.x = pt.x - bounds.width / 2;\n *     bounds.y = pt.y - bounds.height / 2;\n *   }\n *   \n *   return bounds;\n * };\n * (end)\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the current state of the\n * associated cell.\n */\nmxCellOverlay.prototype.getBounds = function(state)\n{\n\tvar isEdge = state.view.graph.getModel().isEdge(state.cell);\n\tvar s = state.view.scale;\n\tvar pt = null;\n\n\tvar w = this.image.width;\n\tvar h = this.image.height;\n\t\n\tif (isEdge)\n\t{\n\t\tvar pts = state.absolutePoints;\n\t\t\n\t\tif (pts.length % 2 == 1)\n\t\t{\n\t\t\tpt = pts[Math.floor(pts.length / 2)];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar idx = pts.length / 2;\n\t\t\tvar p0 = pts[idx-1];\n\t\t\tvar p1 = pts[idx];\n\t\t\tpt = new mxPoint(p0.x + (p1.x - p0.x) / 2,\n\t\t\t\tp0.y + (p1.y - p0.y) / 2);\n\t\t}\n\t}\n\telse\n\t{\n\t\tpt = new mxPoint();\n\t\t\n\t\tif (this.align == mxConstants.ALIGN_LEFT)\n\t\t{\n\t\t\tpt.x = state.x;\n\t\t}\n\t\telse if (this.align == mxConstants.ALIGN_CENTER)\n\t\t{\n\t\t\tpt.x = state.x + state.width / 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpt.x = state.x + state.width;\n\t\t}\n\t\t\n\t\tif (this.verticalAlign == mxConstants.ALIGN_TOP)\n\t\t{\n\t\t\tpt.y = state.y;\n\t\t}\n\t\telse if (this.verticalAlign == mxConstants.ALIGN_MIDDLE)\n\t\t{\n\t\t\tpt.y = state.y + state.height / 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpt.y = state.y + state.height;\n\t\t}\n\t}\n\n\treturn new mxRectangle(Math.round(pt.x - (w * this.defaultOverlap - this.offset.x) * s),\n\t\tMath.round(pt.y - (h * this.defaultOverlap - this.offset.y) * s), w * s, h * s);\n};\n\n/**\n * Function: toString\n * \n * Returns the textual representation of the overlay to be used as the\n * tooltip. This implementation returns <tooltip>.\n */\nmxCellOverlay.prototype.toString = function()\n{\n\treturn this.tooltip;\n};\n\n__mxOutput.mxCellOverlay = typeof mxCellOverlay !== 'undefined' ? mxCellOverlay : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxOutline\n *\n * Implements an outline (aka overview) for a graph. Set <updateOnPan> to true\n * to enable updates while the source graph is panning.\n * \n * Example:\n * \n * (code)\n * var outline = new mxOutline(graph, div);\n * (end)\n * \n * If an outline is used in an <mxWindow> in IE8 standards mode, the following\n * code makes sure that the shadow filter is not inherited and that any\n * transparent elements in the graph do not show the page background, but the\n * background of the graph container.\n * \n * (code)\n * if (document.documentMode == 8)\n * {\n *   container.style.filter = 'progid:DXImageTransform.Microsoft.alpha(opacity=100)';\n * }\n * (end)\n * \n * To move the graph to the top, left corner the following code can be used.\n * \n * (code)\n * var scale = graph.view.scale;\n * var bounds = graph.getGraphBounds();\n * graph.view.setTranslate(-bounds.x / scale, -bounds.y / scale);\n * (end)\n * \n * To toggle the suspended mode, the following can be used.\n * \n * (code)\n * outline.suspended = !outln.suspended;\n * if (!outline.suspended)\n * {\n *   outline.update(true);\n * }\n * (end)\n * \n * Constructor: mxOutline\n *\n * Constructs a new outline for the specified graph inside the given\n * container.\n * \n * Parameters:\n * \n * source - <mxGraph> to create the outline for.\n * container - DOM node that will contain the outline.\n */\nfunction mxOutline(source, container)\n{\n\tthis.source = source;\n\n\tif (container != null)\n\t{\n\t\tthis.init(container);\n\t}\n};\n\n/**\n * Function: source\n * \n * Reference to the source <mxGraph>.\n */\nmxOutline.prototype.source = null;\n\n/**\n * Function: outline\n * \n * Reference to the <mxGraph> that renders the outline.\n */\nmxOutline.prototype.outline = null;\n\n/**\n * Function: graphRenderHint\n * \n * Renderhint to be used for the outline graph. Default is faster.\n */\nmxOutline.prototype.graphRenderHint = mxConstants.RENDERING_HINT_FASTER;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxOutline.prototype.enabled = true;\n\n/**\n * Variable: showViewport\n * \n * Specifies a viewport rectangle should be shown. Default is true.\n */\nmxOutline.prototype.showViewport = true;\n\n/**\n * Variable: border\n * \n * Border to be added at the bottom and right. Default is 10.\n */\nmxOutline.prototype.border = 10;\n\n/**\n * Variable: enabled\n * \n * Specifies the size of the sizer handler. Default is 8.\n */\nmxOutline.prototype.sizerSize = 8;\n\n/**\n * Variable: labelsVisible\n * \n * Specifies if labels should be visible in the outline. Default is false.\n */\nmxOutline.prototype.labelsVisible = false;\n\n/**\n * Variable: updateOnPan\n * \n * Specifies if <update> should be called for <mxEvent.PAN> in the source\n * graph. Default is false.\n */\nmxOutline.prototype.updateOnPan = false;\n\n/**\n * Variable: sizerImage\n * \n * Optional <mxImage> to be used for the sizer. Default is null.\n */\nmxOutline.prototype.sizerImage = null;\n\n/**\n * Variable: minScale\n * \n * Minimum scale to be used. Default is 0.0001.\n */\nmxOutline.prototype.minScale = 0.0001;\n\n/**\n * Variable: suspended\n * \n * Optional boolean flag to suspend updates. Default is false. This flag will\n * also suspend repaints of the outline. To toggle this switch, use the\n * following code.\n * \n * (code)\n * nav.suspended = !nav.suspended;\n * \n * if (!nav.suspended)\n * {\n *   nav.update(true);\n * }\n * (end)\n */\nmxOutline.prototype.suspended = false;\n\n/**\n * Variable: forceVmlHandles\n * \n * Specifies if VML should be used to render the handles in this control. This\n * is true for IE8 standards mode and false for all other browsers and modes.\n * This is a workaround for rendering issues of HTML elements over elements\n * with filters in IE 8 standards mode.\n */\nmxOutline.prototype.forceVmlHandles = document.documentMode == 8;\n\n/**\n * Function: createGraph\n * \n * Creates the <mxGraph> used in the outline.\n */\nmxOutline.prototype.createGraph = function(container)\n{\n\tvar graph = new mxGraph(container, this.source.getModel(), this.graphRenderHint, this.source.getStylesheet());\n\tgraph.foldingEnabled = false;\n\tgraph.autoScroll = false;\n\t\n\treturn graph;\n};\n\n/**\n * Function: init\n * \n * Initializes the outline inside the given container.\n */\nmxOutline.prototype.init = function(container)\n{\n\tthis.outline = this.createGraph(container);\n\t\n\t// Do not repaint when suspended\n\tvar outlineGraphModelChanged = this.outline.graphModelChanged;\n\tthis.outline.graphModelChanged = mxUtils.bind(this, function(changes)\n\t{\n\t\tif (!this.suspended && this.outline != null)\n\t\t{\n\t\t\toutlineGraphModelChanged.apply(this.outline, arguments);\n\t\t}\n\t});\n\n\t// Enables faster painting in SVG\n\tif (mxClient.IS_SVG)\n\t{\n\t\tvar node = this.outline.getView().getCanvas().parentNode;\n\t\tnode.setAttribute('shape-rendering', 'optimizeSpeed');\n\t\tnode.setAttribute('image-rendering', 'optimizeSpeed');\n\t}\n\t\n\t// Hides cursors and labels\n\tthis.outline.labelsVisible = this.labelsVisible;\n\tthis.outline.setEnabled(false);\n\t\n\tthis.updateHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (!this.suspended && !this.active)\n\t\t{\n\t\t\tthis.update();\n\t\t}\n\t});\n\t\n\t// Updates the scale of the outline after a change of the main graph\n\tthis.source.getModel().addListener(mxEvent.CHANGE, this.updateHandler);\n\tthis.outline.addMouseListener(this);\n\t\n\t// Adds listeners to keep the outline in sync with the source graph\n\tvar view = this.source.getView();\n\tview.addListener(mxEvent.SCALE, this.updateHandler);\n\tview.addListener(mxEvent.TRANSLATE, this.updateHandler);\n\tview.addListener(mxEvent.SCALE_AND_TRANSLATE, this.updateHandler);\n\tview.addListener(mxEvent.DOWN, this.updateHandler);\n\tview.addListener(mxEvent.UP, this.updateHandler);\n\n\t// Updates blue rectangle on scroll\n\tmxEvent.addListener(this.source.container, 'scroll', this.updateHandler);\n\t\n\tthis.panHandler = mxUtils.bind(this, function(sender)\n\t{\n\t\tif (this.updateOnPan)\n\t\t{\n\t\t\tthis.updateHandler.apply(this, arguments);\n\t\t}\n\t});\n\tthis.source.addListener(mxEvent.PAN, this.panHandler);\n\t\n\t// Refreshes the graph in the outline after a refresh of the main graph\n\tthis.refreshHandler = mxUtils.bind(this, function(sender)\n\t{\n\t\tthis.outline.setStylesheet(this.source.getStylesheet());\n\t\tthis.outline.refresh();\n\t});\n\tthis.source.addListener(mxEvent.REFRESH, this.refreshHandler);\n\n\t// Creates the blue rectangle for the viewport\n\tthis.bounds = new mxRectangle(0, 0, 0, 0);\n\tthis.selectionBorder = new mxRectangleShape(this.bounds, null,\n\t\tmxConstants.OUTLINE_COLOR, mxConstants.OUTLINE_STROKEWIDTH);\n\tthis.selectionBorder.dialect = this.outline.dialect;\n\n\tif (this.forceVmlHandles)\n\t{\n\t\tthis.selectionBorder.isHtmlAllowed = function()\n\t\t{\n\t\t\treturn false;\n\t\t};\n\t}\n\t\n\tthis.selectionBorder.init(this.outline.getView().getOverlayPane());\n\n\t// Handles event by catching the initial pointer start and then listening to the\n\t// complete gesture on the event target. This is needed because all the events\n\t// are routed via the initial element even if that element is removed from the\n\t// DOM, which happens when we repaint the selection border and zoom handles.\n\tvar handler = mxUtils.bind(this, function(evt)\n\t{\n\t\tvar t = mxEvent.getSource(evt);\n\t\t\n\t\tvar redirect = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.outline.fireMouseEvent(mxEvent.MOUSE_MOVE, new mxMouseEvent(evt));\n\t\t});\n\t\t\n\t\tvar redirect2 = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tmxEvent.removeGestureListeners(t, null, redirect, redirect2);\n\t\t\tthis.outline.fireMouseEvent(mxEvent.MOUSE_UP, new mxMouseEvent(evt));\n\t\t});\n\t\t\n\t\tmxEvent.addGestureListeners(t, null, redirect, redirect2);\n\t\tthis.outline.fireMouseEvent(mxEvent.MOUSE_DOWN, new mxMouseEvent(evt));\n\t});\n\t\n\tmxEvent.addGestureListeners(this.selectionBorder.node, handler);\n\n\t// Creates a small blue rectangle for sizing (sizer handle)\n\tthis.sizer = this.createSizer();\n\t\n\tif (this.forceVmlHandles)\n\t{\n\t\tthis.sizer.isHtmlAllowed = function()\n\t\t{\n\t\t\treturn false;\n\t\t};\n\t}\n\t\n\tthis.sizer.init(this.outline.getView().getOverlayPane());\n\t\n\tif (this.enabled)\n\t{\n\t\tthis.sizer.node.style.cursor = 'nwse-resize';\n\t}\n\t\n\tmxEvent.addGestureListeners(this.sizer.node, handler);\n\n\tthis.selectionBorder.node.style.display = (this.showViewport) ? '' : 'none';\n\tthis.sizer.node.style.display = this.selectionBorder.node.style.display;\n\tthis.selectionBorder.node.style.cursor = 'move';\n\n\tthis.update(false);\n};\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxOutline.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n * \n * Parameters:\n * \n * value - Boolean that specifies the new enabled state.\n */\nmxOutline.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: setZoomEnabled\n * \n * Enables or disables the zoom handling by showing or hiding the respective\n * handle.\n * \n * Parameters:\n * \n * value - Boolean that specifies the new enabled state.\n */\nmxOutline.prototype.setZoomEnabled = function(value)\n{\n\tthis.sizer.node.style.visibility = (value) ? 'visible' : 'hidden';\n};\n\n/**\n * Function: refresh\n * \n * Invokes <update> and revalidate the outline. This method is deprecated.\n */\nmxOutline.prototype.refresh = function()\n{\n\tthis.update(true);\n};\n\n/**\n * Function: createSizer\n * \n * Creates the shape used as the sizer.\n */\nmxOutline.prototype.createSizer = function()\n{\n\tif (this.sizerImage != null)\n\t{\n\t\tvar sizer = new mxImageShape(new mxRectangle(0, 0, this.sizerImage.width, this.sizerImage.height), this.sizerImage.src);\n\t\tsizer.dialect = this.outline.dialect;\n\t\t\n\t\treturn sizer;\n\t}\n\telse\n\t{\n\t\tvar sizer = new mxRectangleShape(new mxRectangle(0, 0, this.sizerSize, this.sizerSize),\n\t\t\tmxConstants.OUTLINE_HANDLE_FILLCOLOR, mxConstants.OUTLINE_HANDLE_STROKECOLOR);\n\t\tsizer.dialect = this.outline.dialect;\n\t\n\t\treturn sizer;\n\t}\n};\n\n/**\n * Function: getSourceContainerSize\n * \n * Returns the size of the source container.\n */\nmxOutline.prototype.getSourceContainerSize = function()\n{\n\treturn new mxRectangle(0, 0, this.source.container.scrollWidth, this.source.container.scrollHeight);\n};\n\n/**\n * Function: getOutlineOffset\n * \n * Returns the offset for drawing the outline graph.\n */\nmxOutline.prototype.getOutlineOffset = function(scale)\n{\n\treturn null;\n};\n\n/**\n * Function: getSourceGraphBounds\n * \n * Returns the graph bound boxing of the source.\n */\nmxOutline.prototype.getSourceGraphBounds = function()\n{\n\treturn this.source.getGraphBounds();\n};\n\n/**\n * Function: update\n * \n * Updates the outline.\n */\nmxOutline.prototype.update = function(revalidate)\n{\n\tif (this.source != null && this.source.container != null &&\n\t\tthis.outline != null && this.outline.container != null)\n\t{\n\t\tvar sourceScale = this.source.view.scale;\n\t\tvar scaledGraphBounds = this.getSourceGraphBounds();\n\t\tvar unscaledGraphBounds = new mxRectangle(scaledGraphBounds.x / sourceScale + this.source.panDx,\n\t\t\t\tscaledGraphBounds.y / sourceScale + this.source.panDy, scaledGraphBounds.width / sourceScale,\n\t\t\t\tscaledGraphBounds.height / sourceScale);\n\n\t\tvar unscaledFinderBounds = new mxRectangle(0, 0,\n\t\t\tthis.source.container.clientWidth / sourceScale,\n\t\t\tthis.source.container.clientHeight / sourceScale);\n\t\t\n\t\tvar union = unscaledGraphBounds.clone();\n\t\tunion.add(unscaledFinderBounds);\n\t\n\t\t// Zooms to the scrollable area if that is bigger than the graph\n\t\tvar size = this.getSourceContainerSize();\n\t\tvar completeWidth = Math.max(size.width / sourceScale, union.width);\n\t\tvar completeHeight = Math.max(size.height / sourceScale, union.height);\n\t\n\t\tvar availableWidth = Math.max(0, this.outline.container.clientWidth - this.border);\n\t\tvar availableHeight = Math.max(0, this.outline.container.clientHeight - this.border);\n\t\t\n\t\tvar outlineScale = Math.min(availableWidth / completeWidth, availableHeight / completeHeight);\n\t\tvar scale = (isNaN(outlineScale)) ? this.minScale : Math.max(this.minScale, outlineScale);\n\n\t\tif (scale > 0)\n\t\t{\n\t\t\tif (this.outline.getView().scale != scale)\n\t\t\t{\n\t\t\t\tthis.outline.getView().scale = scale;\n\t\t\t\trevalidate = true;\n\t\t\t}\n\t\t\n\t\t\tvar navView = this.outline.getView();\n\t\t\t\n\t\t\tif (navView.currentRoot != this.source.getView().currentRoot)\n\t\t\t{\n\t\t\t\tnavView.setCurrentRoot(this.source.getView().currentRoot);\n\t\t\t}\n\n\t\t\tvar t = this.source.view.translate;\n\t\t\tvar tx = t.x + this.source.panDx;\n\t\t\tvar ty = t.y + this.source.panDy;\n\t\t\t\n\t\t\tvar off = this.getOutlineOffset(scale);\n\t\t\t\n\t\t\tif (off != null)\n\t\t\t{\n\t\t\t\ttx += off.x;\n\t\t\t\tty += off.y;\n\t\t\t}\n\t\t\t\n\t\t\tif (unscaledGraphBounds.x < 0)\n\t\t\t{\n\t\t\t\ttx = tx - unscaledGraphBounds.x;\n\t\t\t}\n\t\t\tif (unscaledGraphBounds.y < 0)\n\t\t\t{\n\t\t\t\tty = ty - unscaledGraphBounds.y;\n\t\t\t}\n\t\t\t\n\t\t\tif (navView.translate.x != tx || navView.translate.y != ty)\n\t\t\t{\n\t\t\t\tnavView.translate.x = tx;\n\t\t\t\tnavView.translate.y = ty;\n\t\t\t\trevalidate = true;\n\t\t\t}\n\t\t\n\t\t\t// Prepares local variables for computations\n\t\t\tvar t2 = navView.translate;\n\t\t\tscale = this.source.getView().scale;\n\t\t\tvar scale2 = scale / navView.scale;\n\t\t\tvar scale3 = 1.0 / navView.scale;\n\t\t\tvar container = this.source.container;\n\t\t\t\n\t\t\t// Updates the bounds of the viewrect in the navigation\n\t\t\tthis.bounds = new mxRectangle(\n\t\t\t\t(t2.x - t.x - this.source.panDx) / scale3,\n\t\t\t\t(t2.y - t.y - this.source.panDy) / scale3,\n\t\t\t\t(container.clientWidth / scale2),\n\t\t\t\t(container.clientHeight / scale2));\n\t\t\t\n\t\t\t// Adds the scrollbar offset to the finder\n\t\t\tthis.bounds.x += this.source.container.scrollLeft * navView.scale / scale;\n\t\t\tthis.bounds.y += this.source.container.scrollTop * navView.scale / scale;\n\t\t\t\n\t\t\tvar b = this.selectionBorder.bounds;\n\t\t\t\n\t\t\tif (b.x != this.bounds.x || b.y != this.bounds.y || b.width != this.bounds.width || b.height != this.bounds.height)\n\t\t\t{\n\t\t\t\tthis.selectionBorder.bounds = this.bounds;\n\t\t\t\tthis.selectionBorder.redraw();\n\t\t\t}\n\t\t\n\t\t\t// Updates the bounds of the zoom handle at the bottom right\n\t\t\tvar b = this.sizer.bounds;\n\t\t\tvar b2 = new mxRectangle(this.bounds.x + this.bounds.width - b.width / 2,\n\t\t\t\t\tthis.bounds.y + this.bounds.height - b.height / 2, b.width, b.height);\n\n\t\t\tif (b.x != b2.x || b.y != b2.y || b.width != b2.width || b.height != b2.height)\n\t\t\t{\n\t\t\t\tthis.sizer.bounds = b2;\n\t\t\t\t\n\t\t\t\t// Avoids update of visibility in redraw for VML\n\t\t\t\tif (this.sizer.node.style.visibility != 'hidden')\n\t\t\t\t{\n\t\t\t\t\tthis.sizer.redraw();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (revalidate)\n\t\t\t{\n\t\t\t\tthis.outline.view.revalidate();\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by starting a translation or zoom.\n */\nmxOutline.prototype.mouseDown = function(sender, me)\n{\n\tif (this.enabled && this.showViewport)\n\t{\n\t\tvar tol = (!mxEvent.isMouseEvent(me.getEvent())) ? this.source.tolerance : 0;\n\t\tvar hit = (this.source.allowHandleBoundsCheck && (mxClient.IS_IE || tol > 0)) ?\n\t\t\t\tnew mxRectangle(me.getGraphX() - tol, me.getGraphY() - tol, 2 * tol, 2 * tol) : null;\n\t\tthis.zoom = me.isSource(this.sizer) || (hit != null && mxUtils.intersects(shape.bounds, hit));\n\t\tthis.startX = me.getX();\n\t\tthis.startY = me.getY();\n\t\tthis.active = true;\n\n\t\tif (this.source.useScrollbarsForPanning && mxUtils.hasScrollbars(this.source.container))\n\t\t{\n\t\t\tthis.dx0 = this.source.container.scrollLeft;\n\t\t\tthis.dy0 = this.source.container.scrollTop;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.dx0 = 0;\n\t\t\tthis.dy0 = 0;\n\t\t}\n\t}\n\n\tme.consume();\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by previewing the viewrect in <graph> and updating the\n * rectangle that represents the viewrect in the outline.\n */\nmxOutline.prototype.mouseMove = function(sender, me)\n{\n\tif (this.active)\n\t{\n\t\tthis.selectionBorder.node.style.display = (this.showViewport) ? '' : 'none';\n\t\tthis.sizer.node.style.display = this.selectionBorder.node.style.display; \n\n\t\tvar delta = this.getTranslateForEvent(me);\n\t\tvar dx = delta.x;\n\t\tvar dy = delta.y;\n\t\tvar bounds = null;\n\t\t\n\t\tif (!this.zoom)\n\t\t{\n\t\t\t// Previews the panning on the source graph\n\t\t\tvar scale = this.outline.getView().scale;\n\t\t\tbounds = new mxRectangle(this.bounds.x + dx,\n\t\t\t\tthis.bounds.y + dy, this.bounds.width, this.bounds.height);\n\t\t\tthis.selectionBorder.bounds = bounds;\n\t\t\tthis.selectionBorder.redraw();\n\t\t\tdx /= scale;\n\t\t\tdx *= this.source.getView().scale;\n\t\t\tdy /= scale;\n\t\t\tdy *= this.source.getView().scale;\n\t\t\tthis.source.panGraph(-dx - this.dx0, -dy - this.dy0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Does *not* preview zooming on the source graph\n\t\t\tvar container = this.source.container;\n\t\t\tvar viewRatio = container.clientWidth / container.clientHeight;\n\t\t\tdy = dx / viewRatio;\n\t\t\tbounds = new mxRectangle(this.bounds.x,\n\t\t\t\tthis.bounds.y,\n\t\t\t\tMath.max(1, this.bounds.width + dx),\n\t\t\t\tMath.max(1, this.bounds.height + dy));\n\t\t\tthis.selectionBorder.bounds = bounds;\n\t\t\tthis.selectionBorder.redraw();\n\t\t}\n\t\t\n\t\t// Updates the zoom handle\n\t\tvar b = this.sizer.bounds;\n\t\tthis.sizer.bounds = new mxRectangle(\n\t\t\tbounds.x + bounds.width - b.width / 2,\n\t\t\tbounds.y + bounds.height - b.height / 2,\n\t\t\tb.width, b.height);\n\t\t\n\t\t// Avoids update of visibility in redraw for VML\n\t\tif (this.sizer.node.style.visibility != 'hidden')\n\t\t{\n\t\t\tthis.sizer.redraw();\n\t\t}\n\t\t\n\t\tme.consume();\n\t}\n};\n\n/**\n * Function: getTranslateForEvent\n * \n * Gets the translate for the given mouse event. Here is an example to limit\n * the outline to stay within positive coordinates:\n * \n * (code)\n * outline.getTranslateForEvent = function(me)\n * {\n *   var pt = new mxPoint(me.getX() - this.startX, me.getY() - this.startY);\n *   \n *   if (!this.zoom)\n *   {\n *     var tr = this.source.view.translate;\n *     pt.x = Math.max(tr.x * this.outline.view.scale, pt.x);\n *     pt.y = Math.max(tr.y * this.outline.view.scale, pt.y);\n *   }\n *   \n *   return pt;\n * };\n * (end)\n */\nmxOutline.prototype.getTranslateForEvent = function(me)\n{\n\treturn new mxPoint(me.getX() - this.startX, me.getY() - this.startY);\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by applying the translation or zoom to <graph>.\n */\nmxOutline.prototype.mouseUp = function(sender, me)\n{\n\tif (this.active)\n\t{\n\t\tvar delta = this.getTranslateForEvent(me);\n\t\tvar dx = delta.x;\n\t\tvar dy = delta.y;\n\t\t\n\t\tif (Math.abs(dx) > 0 || Math.abs(dy) > 0)\n\t\t{\n\t\t\tif (!this.zoom)\n\t\t\t{\n\t\t\t\t// Applies the new translation if the source\n\t\t\t\t// has no scrollbars\n\t\t\t\tif (!this.source.useScrollbarsForPanning ||\n\t\t\t\t\t!mxUtils.hasScrollbars(this.source.container))\n\t\t\t\t{\n\t\t\t\t\tthis.source.panGraph(0, 0);\n\t\t\t\t\tdx /= this.outline.getView().scale;\n\t\t\t\t\tdy /= this.outline.getView().scale;\n\t\t\t\t\tvar t = this.source.getView().translate;\n\t\t\t\t\tthis.source.getView().setTranslate(t.x - dx, t.y - dy);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Applies the new zoom\n\t\t\t\tvar w = this.selectionBorder.bounds.width;\n\t\t\t\tvar scale = this.source.getView().scale;\n\t\t\t\tthis.source.zoomTo(Math.max(this.minScale, scale - (dx * scale) / w), false);\n\t\t\t}\n\n\t\t\tthis.update();\n\t\t\tme.consume();\n\t\t}\n\t\t\t\n\t\t// Resets the state of the handler\n\t\tthis.index = null;\n\t\tthis.active = false;\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroy this outline and removes all listeners from <source>.\n */\nmxOutline.prototype.destroy = function()\n{\n\tif (this.source != null)\n\t{\n\t\tthis.source.removeListener(this.panHandler);\n\t\tthis.source.removeListener(this.refreshHandler);\n\t\tthis.source.getModel().removeListener(this.updateHandler);\n\t\tthis.source.getView().removeListener(this.updateHandler);\n\t\tmxEvent.removeListener(this.source.container, 'scroll', this.updateHandler);\n\t\tthis.source = null;\n\t}\n\t\n\tif (this.outline != null)\n\t{\n\t\tthis.outline.removeMouseListener(this);\n\t\tthis.outline.destroy();\n\t\tthis.outline = null;\n\t}\n\n\tif (this.selectionBorder != null)\n\t{\n\t\tthis.selectionBorder.destroy();\n\t\tthis.selectionBorder = null;\n\t}\n\t\n\tif (this.sizer != null)\n\t{\n\t\tthis.sizer.destroy();\n\t\tthis.sizer = null;\n\t}\n};\n\n__mxOutput.mxOutline = typeof mxOutline !== 'undefined' ? mxOutline : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxMultiplicity\n * \n * Defines invalid connections along with the error messages that they produce.\n * To add or remove rules on a graph, you must add/remove instances of this\n * class to <mxGraph.multiplicities>.\n * \n * Example:\n * \n * (code)\n * graph.multiplicities.push(new mxMultiplicity(\n *   true, 'rectangle', null, null, 0, 2, ['circle'],\n *   'Only 2 targets allowed',\n *   'Only circle targets allowed'));\n * (end)\n * \n * Defines a rule where each rectangle must be connected to no more than 2\n * circles and no other types of targets are allowed.\n * \n * Constructor: mxMultiplicity\n * \n * Instantiate class mxMultiplicity in order to describe allowed\n * connections in a graph. Not all constraints can be enforced while\n * editing, some must be checked at validation time. The <countError> and\n * <typeError> are treated as resource keys in <mxResources>.\n * \n * Parameters:\n * \n * source - Boolean indicating if this rule applies to the source or target\n * terminal.\n * type - Type of the source or target terminal that this rule applies to.\n * See <type> for more information.\n * attr - Optional attribute name to match the source or target terminal.\n * value - Optional attribute value to match the source or target terminal.\n * min - Minimum number of edges for this rule. Default is 1.\n * max - Maximum number of edges for this rule. n means infinite. Default\n * is n.\n * validNeighbors - Array of types of the opposite terminal for which this\n * rule applies.\n * countError - Error to be displayed for invalid number of edges.\n * typeError - Error to be displayed for invalid opposite terminals.\n * validNeighborsAllowed - Optional boolean indicating if the array of\n * opposite types should be valid or invalid.\n */\nfunction mxMultiplicity(source, type, attr, value, min, max,\n\tvalidNeighbors, countError, typeError, validNeighborsAllowed)\n{\n\tthis.source = source;\n\tthis.type = type;\n\tthis.attr = attr;\n\tthis.value = value;\n\tthis.min = (min != null) ? min : 0;\n\tthis.max = (max != null) ? max : 'n';\n\tthis.validNeighbors = validNeighbors;\n\tthis.countError = mxResources.get(countError) || countError;\n\tthis.typeError = mxResources.get(typeError) || typeError;\n\tthis.validNeighborsAllowed = (validNeighborsAllowed != null) ?\n\t\tvalidNeighborsAllowed : true;\n};\n\n/**\n * Variable: type\n * \n * Defines the type of the source or target terminal. The type is a string\n * passed to <mxUtils.isNode> together with the source or target vertex\n * value as the first argument.\n */\nmxMultiplicity.prototype.type = null;\n\n/**\n * Variable: attr\n * \n * Optional string that specifies the attributename to be passed to\n * <mxUtils.isNode> to check if the rule applies to a cell.\n */\nmxMultiplicity.prototype.attr = null;\n\n/**\n * Variable: value\n * \n * Optional string that specifies the value of the attribute to be passed\n * to <mxUtils.isNode> to check if the rule applies to a cell.\n */\nmxMultiplicity.prototype.value = null;\n\n/**\n * Variable: source\n * \n * Boolean that specifies if the rule is applied to the source or target\n * terminal of an edge.\n */\nmxMultiplicity.prototype.source = null;\n\n/**\n * Variable: min\n * \n * Defines the minimum number of connections for which this rule applies.\n * Default is 0.\n */\nmxMultiplicity.prototype.min = null;\n\n/**\n * Variable: max\n * \n * Defines the maximum number of connections for which this rule applies.\n * A value of 'n' means unlimited times. Default is 'n'. \n */\nmxMultiplicity.prototype.max = null;\n\n/**\n * Variable: validNeighbors\n * \n * Holds an array of strings that specify the type of neighbor for which\n * this rule applies. The strings are used in <mxCell.is> on the opposite\n * terminal to check if the rule applies to the connection.\n */\nmxMultiplicity.prototype.validNeighbors = null;\n\n/**\n * Variable: validNeighborsAllowed\n * \n * Boolean indicating if the list of validNeighbors are those that are allowed\n * for this rule or those that are not allowed for this rule.\n */\nmxMultiplicity.prototype.validNeighborsAllowed = true;\n\n/**\n * Variable: countError\n * \n * Holds the localized error message to be displayed if the number of\n * connections for which the rule applies is smaller than <min> or greater\n * than <max>.\n */\nmxMultiplicity.prototype.countError = null;\n\n/**\n * Variable: typeError\n * \n * Holds the localized error message to be displayed if the type of the\n * neighbor for a connection does not match the rule.\n */\nmxMultiplicity.prototype.typeError = null;\n\n/**\n * Function: check\n * \n * Checks the multiplicity for the given arguments and returns the error\n * for the given connection or null if the multiplicity does not apply.\n *  \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph> instance.\n * edge - <mxCell> that represents the edge to validate.\n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n * sourceOut - Number of outgoing edges from the source terminal.\n * targetIn - Number of incoming edges for the target terminal.\n */\nmxMultiplicity.prototype.check = function(graph, edge, source, target, sourceOut, targetIn)\n{\n\tvar error = '';\n\n\tif ((this.source && this.checkTerminal(graph, source, edge)) ||\n\t\t(!this.source && this.checkTerminal(graph, target, edge)))\n\t{\n\t\tif (this.countError != null && \n\t\t\t((this.source && (this.max == 0 || (sourceOut >= this.max))) ||\n\t\t\t(!this.source && (this.max == 0 || (targetIn >= this.max)))))\n\t\t{\n\t\t\terror += this.countError + '\\n';\n\t\t}\n\n\t\tif (this.validNeighbors != null && this.typeError != null && this.validNeighbors.length > 0)\n\t\t{\n\t\t\tvar isValid = this.checkNeighbors(graph, edge, source, target);\n\n\t\t\tif (!isValid)\n\t\t\t{\n\t\t\t\terror += this.typeError + '\\n';\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn (error.length > 0) ? error : null;\n};\n\n/**\n * Function: checkNeighbors\n * \n * Checks if there are any valid neighbours in <validNeighbors>. This is only\n * called if <validNeighbors> is a non-empty array.\n */\nmxMultiplicity.prototype.checkNeighbors = function(graph, edge, source, target)\n{\n\tvar sourceValue = graph.model.getValue(source);\n\tvar targetValue = graph.model.getValue(target);\n\tvar isValid = !this.validNeighborsAllowed;\n\tvar valid = this.validNeighbors;\n\t\n\tfor (var j = 0; j < valid.length; j++)\n\t{\n\t\tif (this.source &&\n\t\t\tthis.checkType(graph, targetValue, valid[j]))\n\t\t{\n\t\t\tisValid = this.validNeighborsAllowed;\n\t\t\tbreak;\n\t\t}\n\t\telse if (!this.source && \n\t\t\tthis.checkType(graph, sourceValue, valid[j]))\n\t\t{\n\t\t\tisValid = this.validNeighborsAllowed;\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\treturn isValid;\n};\n\n/**\n * Function: checkTerminal\n * \n * Checks the given terminal cell and returns true if this rule applies. The\n * given cell is the source or target of the given edge, depending on\n * <source>. This implementation uses <checkType> on the terminal's value.\n */\nmxMultiplicity.prototype.checkTerminal = function(graph, terminal, edge)\n{\n\tvar value = graph.model.getValue(terminal);\n\t\n\treturn this.checkType(graph, value, this.type, this.attr, this.value);\n};\n\n/**\n * Function: checkType\n * \n * Checks the type of the given value.\n */\nmxMultiplicity.prototype.checkType = function(graph, value, type, attr, attrValue)\n{\n\tif (value != null)\n\t{\n\t\tif (!isNaN(value.nodeType)) // Checks if value is a DOM node\n\t\t{\n\t\t\treturn mxUtils.isNode(value, type, attr, attrValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn value == type;\n\t\t}\n\t}\n\t\n\treturn false;\n};\n\n__mxOutput.mxMultiplicity = typeof mxMultiplicity !== 'undefined' ? mxMultiplicity : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxLayoutManager\n * \n * Implements a layout manager that runs a given layout after any changes to the graph:\n * \n * Example:\n * \n * (code)\n * var layoutMgr = new mxLayoutManager(graph);\n * layoutMgr.getLayout = function(cell, eventName)\n * {\n *   return layout;\n * };\n * (end)\n * \n * See <getLayout> for a description of the possible eventNames.\n * \n * Event: mxEvent.LAYOUT_CELLS\n * \n * Fires between begin- and endUpdate after all cells have been layouted in\n * <layoutCells>. The <code>cells</code> property contains all cells that have\n * been passed to <layoutCells>.\n * \n * Constructor: mxLayoutManager\n *\n * Constructs a new automatic layout for the given graph.\n *\n * Arguments:\n * \n * graph - Reference to the enclosing graph. \n */\nfunction mxLayoutManager(graph)\n{\n\t// Executes the layout before the changes are dispatched\n\tthis.undoHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.beforeUndo(evt.getProperty('edit'));\n\t\t}\n\t});\n\t\n\t// Notifies the layout of a move operation inside a parent\n\tthis.moveHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.cellsMoved(evt.getProperty('cells'), evt.getProperty('event'));\n\t\t}\n\t});\n\t\t\n\t// Notifies the layout of a move operation inside a parent\n\tthis.resizeHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.cellsResized(evt.getProperty('cells'), evt.getProperty('bounds'),\n\t\t\t\tevt.getProperty('previous'));\n\t\t}\n\t});\n\t\n\tthis.setGraph(graph);\n};\n\n/**\n * Extends mxEventSource.\n */\nmxLayoutManager.prototype = new mxEventSource();\nmxLayoutManager.prototype.constructor = mxLayoutManager;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxLayoutManager.prototype.graph = null;\n\n/**\n * Variable: bubbling\n * \n * Specifies if the layout should bubble along\n * the cell hierarchy. Default is true.\n */\nmxLayoutManager.prototype.bubbling = true;\n\n/**\n * Variable: enabled\n * \n * Specifies if event handling is enabled. Default is true.\n */\nmxLayoutManager.prototype.enabled = true;\n\n/**\n * Variable: undoHandler\n * \n * Holds the function that handles the endUpdate event.\n */\nmxLayoutManager.prototype.undoHandler = null;\n\n/**\n * Variable: moveHandler\n * \n * Holds the function that handles the move event.\n */\nmxLayoutManager.prototype.moveHandler = null;\n\n/**\n * Variable: resizeHandler\n * \n * Holds the function that handles the resize event.\n */\nmxLayoutManager.prototype.resizeHandler = null;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxLayoutManager.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n * \n * Parameters:\n * \n * enabled - Boolean that specifies the new enabled state.\n */\nmxLayoutManager.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isBubbling\n * \n * Returns true if a layout should bubble, that is, if the parent layout\n * should be executed whenever a cell layout (layout of the children of\n * a cell) has been executed. This implementation returns <bubbling>.\n */\nmxLayoutManager.prototype.isBubbling = function()\n{\n\treturn this.bubbling;\n};\n\n/**\n * Function: setBubbling\n * \n * Sets <bubbling>.\n */\nmxLayoutManager.prototype.setBubbling = function(value)\n{\n\tthis.bubbling = value;\n};\n\n/**\n * Function: getGraph\n * \n * Returns the graph that this layout operates on.\n */\nmxLayoutManager.prototype.getGraph = function()\n{\n\treturn this.graph;\n};\n\n/**\n * Function: setGraph\n * \n * Sets the graph that the layouts operate on.\n */\nmxLayoutManager.prototype.setGraph = function(graph)\n{\n\tif (this.graph != null)\n\t{\n\t\tvar model = this.graph.getModel();\t\t\n\t\tmodel.removeListener(this.undoHandler);\n\t\tthis.graph.removeListener(this.moveHandler);\n\t\tthis.graph.removeListener(this.resizeHandler);\n\t}\n\t\n\tthis.graph = graph;\n\t\n\tif (this.graph != null)\n\t{\n\t\tvar model = this.graph.getModel();\t\n\t\tmodel.addListener(mxEvent.BEFORE_UNDO, this.undoHandler);\n\t\tthis.graph.addListener(mxEvent.MOVE_CELLS, this.moveHandler);\n\t\tthis.graph.addListener(mxEvent.RESIZE_CELLS, this.resizeHandler);\n\t}\n};\n\n/**\n * Function: hasLayout\n * \n * Returns true if the given cell has a layout. This implementation invokes\n * <getLayout> with <mxEvent.LAYOUT_CELLS> as the eventName. Override this\n * if creating layouts in <getLayout> is expensive and return true if\n * <getLayout> will return a layout for the given cell for\n * <mxEvent.BEGIN_UPDATE> or <mxEvent.END_UPDATE>.\n */\nmxLayoutManager.prototype.hasLayout = function(cell)\n{\n\treturn this.getLayout(cell, mxEvent.LAYOUT_CELLS);\n};\n\n/**\n * Function: getLayout\n * \n * Returns the layout for the given cell and eventName. Possible\n * event names are <mxEvent.MOVE_CELLS> and <mxEvent.RESIZE_CELLS>\n * when cells are moved or resized and <mxEvent.BEGIN_UPDATE> or\n * <mxEvent.END_UPDATE> for the bottom up and top down phases after\n * changes to the graph model. <mxEvent.LAYOUT_CELLS> is used to\n * check if a layout exists for the given cell. This is called\n * from <hasLayout>.\n */\nmxLayoutManager.prototype.getLayout = function(cell, eventName)\n{\n\treturn null;\n};\n\n/**\n * Function: beforeUndo\n * \n * Called from <undoHandler>.\n *\n * Parameters:\n * \n * cell - Array of <mxCells> that have been moved.\n * evt - Mouse event that represents the mousedown.\n */\nmxLayoutManager.prototype.beforeUndo = function(undoableEdit)\n{\n\tthis.executeLayoutForCells(this.getCellsForChanges(undoableEdit.changes));\n};\n\n/**\n * Function: cellsMoved\n * \n * Called from <moveHandler>.\n *\n * Parameters:\n * \n * cell - Array of <mxCells> that have been moved.\n * evt - Mouse event that represents the mousedown.\n */\nmxLayoutManager.prototype.cellsMoved = function(cells, evt)\n{\n\tif (cells != null && evt != null)\n\t{\n\t\tvar point = mxUtils.convertPoint(this.getGraph().container,\n\t\t\tmxEvent.getClientX(evt), mxEvent.getClientY(evt));\n\t\tvar model = this.getGraph().getModel();\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tvar layout = this.getLayout(model.getParent(cells[i]), mxEvent.MOVE_CELLS);\n\n\t\t\tif (layout != null)\n\t\t\t{\n\t\t\t\tlayout.moveCell(cells[i], point.x, point.y);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: cellsResized\n * \n * Called from <resizeHandler>.\n *\n * Parameters:\n * \n * cell - Array of <mxCells> that have been resized.\n * bounds - <mxRectangle> taht represents the new bounds.\n */\nmxLayoutManager.prototype.cellsResized = function(cells, bounds, prev)\n{\n\tif (cells != null && bounds != null)\n\t{\n\t\tvar model = this.getGraph().getModel();\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tvar layout = this.getLayout(model.getParent(cells[i]), mxEvent.RESIZE_CELLS);\n\n\t\t\tif (layout != null)\n\t\t\t{\n\t\t\t\tlayout.resizeCell(cells[i], bounds[i], prev[i]);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: getCellsForChanges\n * \n * Returns the cells for which a layout should be executed.\n */\nmxLayoutManager.prototype.getCellsForChanges = function(changes)\n{\n\tvar result = [];\n\t\n\tfor (var i = 0; i < changes.length; i++)\n\t{\n\t\tvar change = changes[i];\n\t\t\n\t\tif (change instanceof mxRootChange)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult = result.concat(this.getCellsForChange(change));\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getCellsForChange\n * \n * Executes all layouts which have been scheduled during the\n * changes.\n */\nmxLayoutManager.prototype.getCellsForChange = function(change)\n{\n\tif (change instanceof mxChildChange)\n\t{\n\t\treturn this.addCellsWithLayout(change.child,\n\t\t\tthis.addCellsWithLayout(change.previous));\n\t}\n\telse if (change instanceof mxTerminalChange ||\n\t\tchange instanceof mxGeometryChange)\n\t{\n\t\treturn this.addCellsWithLayout(change.cell);\n\t}\n\telse if (change instanceof mxVisibleChange ||\n\t\tchange instanceof mxStyleChange)\n\t{\n\t\treturn this.addCellsWithLayout(change.cell);\n\t}\n\t\n\treturn [];\n};\n\n/**\n * Function: addCellsWithLayout\n * \n * Adds all ancestors of the given cell that have a layout.\n */\nmxLayoutManager.prototype.addCellsWithLayout = function(cell, result)\n{\n\treturn this.addDescendantsWithLayout(cell,\n\t\tthis.addAncestorsWithLayout(cell, result));\n};\n\n/**\n * Function: addAncestorsWithLayout\n * \n * Adds all ancestors of the given cell that have a layout.\n */\nmxLayoutManager.prototype.addAncestorsWithLayout = function(cell, result)\n{\n\tresult = (result != null) ? result : [];\n\t\n\tif (cell != null)\n\t{\n\t\tvar layout = this.hasLayout(cell);\n\t\t\n\t\tif (layout != null)\n\t\t{\n\t\t\tresult.push(cell);\n\t\t}\n\t\t\n\t\tif (this.isBubbling())\n\t\t{\n\t\t\tvar model = this.getGraph().getModel();\n\t\t\tthis.addAncestorsWithLayout(\n\t\t\t\tmodel.getParent(cell), result);\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: addDescendantsWithLayout\n * \n * Adds all descendants of the given cell that have a layout.\n */\nmxLayoutManager.prototype.addDescendantsWithLayout = function(cell, result)\n{\n\tresult = (result != null) ? result : [];\n\t\n\tif (cell != null && this.hasLayout(cell))\n\t{\n\t\tvar model = this.getGraph().getModel();\n\t\t\n\t\tfor (var i = 0; i < model.getChildCount(cell); i++)\n\t\t{\n\t\t\tvar child = model.getChildAt(cell, i);\n\t\t\t\n\t\t\tif (this.hasLayout(child))\n\t\t\t{\n\t\t\t\tresult.push(child);\n\t\t\t\tthis.addDescendantsWithLayout(child, result);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: executeLayoutForCells\n * \n * Executes all layouts for the given cells in two phases: In the first phase\n * layouts for child cells are executed before layouts for parent cells with\n * <mxEvent.BEGIN_UPDATE>, in the second phase layouts for parent cells are\n * executed before layouts for child cells with <mxEvent.END_UPDATE>.\n */\nmxLayoutManager.prototype.executeLayoutForCells = function(cells)\n{\n\tvar sorted = mxUtils.sortCells(cells, false);\n\tthis.layoutCells(sorted, true);\n\tthis.layoutCells(sorted.reverse(), false);\n};\n\n/**\n * Function: layoutCells\n * \n * Executes all layouts which have been scheduled during the changes.\n */\nmxLayoutManager.prototype.layoutCells = function(cells, bubble)\n{\n\tif (cells.length > 0)\n\t{\n\t\t// Invokes the layouts while removing duplicates\n\t\tvar model = this.getGraph().getModel();\n\t\t\n\t\tmodel.beginUpdate();\n\t\ttry \n\t\t{\n\t\t\tvar last = null;\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tif (cells[i] != model.getRoot() && cells[i] != last)\n\t\t\t\t{\n\t\t\t\t\tthis.executeLayout(cells[i], bubble);\n\t\t\t\t\tlast = cells[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS, 'cells', cells));\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tmodel.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: executeLayout\n * \n * Executes the given layout on the given parent.\n */\nmxLayoutManager.prototype.executeLayout = function(cell, bubble)\n{\n\tvar layout = this.getLayout(cell, (bubble) ?\n\t\tmxEvent.BEGIN_UPDATE : mxEvent.END_UPDATE);\n\n\tif (layout != null)\n\t{\n\t\tlayout.execute(cell);\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Removes all handlers from the <graph> and deletes the reference to it.\n */\nmxLayoutManager.prototype.destroy = function()\n{\n\tthis.setGraph(null);\n};\n\n__mxOutput.mxLayoutManager = typeof mxLayoutManager !== 'undefined' ? mxLayoutManager : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxSwimlaneManager\n * \n * Manager for swimlanes and nested swimlanes that sets the size of newly added\n * swimlanes to that of their siblings, and propagates changes to the size of a\n * swimlane to its siblings, if <siblings> is true, and its ancestors, if\n * <bubbling> is true.\n * \n * Constructor: mxSwimlaneManager\n *\n * Constructs a new swimlane manager for the given graph.\n *\n * Arguments:\n * \n * graph - Reference to the enclosing graph. \n */\nfunction mxSwimlaneManager(graph, horizontal, addEnabled, resizeEnabled)\n{\n\tthis.horizontal = (horizontal != null) ? horizontal : true;\n\tthis.addEnabled = (addEnabled != null) ? addEnabled : true;\n\tthis.resizeEnabled = (resizeEnabled != null) ? resizeEnabled : true;\n\n\tthis.addHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.isEnabled() && this.isAddEnabled())\n\t\t{\n\t\t\tthis.cellsAdded(evt.getProperty('cells'));\n\t\t}\n\t});\n\t\n\tthis.resizeHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.isEnabled() && this.isResizeEnabled())\n\t\t{\n\t\t\tthis.cellsResized(evt.getProperty('cells'));\n\t\t}\n\t});\n\t\n\tthis.setGraph(graph);\n};\n\n/**\n * Extends mxEventSource.\n */\nmxSwimlaneManager.prototype = new mxEventSource();\nmxSwimlaneManager.prototype.constructor = mxSwimlaneManager;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxSwimlaneManager.prototype.graph = null;\n\n/**\n * Variable: enabled\n * \n * Specifies if event handling is enabled. Default is true.\n */\nmxSwimlaneManager.prototype.enabled = true;\n\n/**\n * Variable: horizontal\n * \n * Specifies the orientation of the swimlanes. Default is true.\n */\nmxSwimlaneManager.prototype.horizontal = true;\n\n/**\n * Variable: addEnabled\n * \n * Specifies if newly added cells should be resized to match the size of their\n * existing siblings. Default is true.\n */\nmxSwimlaneManager.prototype.addEnabled = true;\n\n/**\n * Variable: resizeEnabled\n * \n * Specifies if resizing of swimlanes should be handled. Default is true.\n */\nmxSwimlaneManager.prototype.resizeEnabled = true;\n\n/**\n * Variable: moveHandler\n * \n * Holds the function that handles the move event.\n */\nmxSwimlaneManager.prototype.addHandler = null;\n\n/**\n * Variable: moveHandler\n * \n * Holds the function that handles the move event.\n */\nmxSwimlaneManager.prototype.resizeHandler = null;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxSwimlaneManager.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n * \n * Parameters:\n * \n * enabled - Boolean that specifies the new enabled state.\n */\nmxSwimlaneManager.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: isHorizontal\n * \n * Returns <horizontal>.\n */\nmxSwimlaneManager.prototype.isHorizontal = function()\n{\n\treturn this.horizontal;\n};\n\n/**\n * Function: setHorizontal\n * \n * Sets <horizontal>.\n */\nmxSwimlaneManager.prototype.setHorizontal = function(value)\n{\n\tthis.horizontal = value;\n};\n\n/**\n * Function: isAddEnabled\n * \n * Returns <addEnabled>.\n */\nmxSwimlaneManager.prototype.isAddEnabled = function()\n{\n\treturn this.addEnabled;\n};\n\n/**\n * Function: setAddEnabled\n * \n * Sets <addEnabled>.\n */\nmxSwimlaneManager.prototype.setAddEnabled = function(value)\n{\n\tthis.addEnabled = value;\n};\n\n/**\n * Function: isResizeEnabled\n * \n * Returns <resizeEnabled>.\n */\nmxSwimlaneManager.prototype.isResizeEnabled = function()\n{\n\treturn this.resizeEnabled;\n};\n\n/**\n * Function: setResizeEnabled\n * \n * Sets <resizeEnabled>.\n */\nmxSwimlaneManager.prototype.setResizeEnabled = function(value)\n{\n\tthis.resizeEnabled = value;\n};\n\n/**\n * Function: getGraph\n * \n * Returns the graph that this manager operates on.\n */\nmxSwimlaneManager.prototype.getGraph = function()\n{\n\treturn this.graph;\n};\n\n/**\n * Function: setGraph\n * \n * Sets the graph that the manager operates on.\n */\nmxSwimlaneManager.prototype.setGraph = function(graph)\n{\n\tif (this.graph != null)\n\t{\n\t\tthis.graph.removeListener(this.addHandler);\n\t\tthis.graph.removeListener(this.resizeHandler);\n\t}\n\t\n\tthis.graph = graph;\n\t\n\tif (this.graph != null)\n\t{\n\t\tthis.graph.addListener(mxEvent.ADD_CELLS, this.addHandler);\n\t\tthis.graph.addListener(mxEvent.CELLS_RESIZED, this.resizeHandler);\n\t}\n};\n\n/**\n * Function: isSwimlaneIgnored\n * \n * Returns true if the given swimlane should be ignored.\n */\nmxSwimlaneManager.prototype.isSwimlaneIgnored = function(swimlane)\n{\n\treturn !this.getGraph().isSwimlane(swimlane);\n};\n\n/**\n * Function: isCellHorizontal\n * \n * Returns true if the given cell is horizontal. If the given cell is not a\n * swimlane, then the global orientation is returned.\n */\nmxSwimlaneManager.prototype.isCellHorizontal = function(cell)\n{\n\tif (this.graph.isSwimlane(cell))\n\t{\n\t\tvar style = this.graph.getCellStyle(cell);\n\t\t\n\t\treturn mxUtils.getValue(style, mxConstants.STYLE_HORIZONTAL, 1) == 1;\n\t}\n\t\n\treturn !this.isHorizontal();\n};\n\n/**\n * Function: cellsAdded\n * \n * Called if any cells have been added.\n * \n * Parameters:\n * \n * cell - Array of <mxCells> that have been added.\n */\nmxSwimlaneManager.prototype.cellsAdded = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\tvar model = this.getGraph().getModel();\n\n\t\tmodel.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tif (!this.isSwimlaneIgnored(cells[i]))\n\t\t\t\t{\n\t\t\t\t\tthis.swimlaneAdded(cells[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tmodel.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: swimlaneAdded\n * \n * Updates the size of the given swimlane to match that of any existing\n * siblings swimlanes.\n * \n * Parameters:\n * \n * swimlane - <mxCell> that represents the new swimlane.\n */\nmxSwimlaneManager.prototype.swimlaneAdded = function(swimlane)\n{\n\tvar model = this.getGraph().getModel();\n\tvar parent = model.getParent(swimlane);\n\tvar childCount = model.getChildCount(parent);\n\tvar geo = null;\n\t\n\t// Finds the first valid sibling swimlane as reference\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = model.getChildAt(parent, i);\n\t\t\n\t\tif (child != swimlane && !this.isSwimlaneIgnored(child))\n\t\t{\n\t\t\tgeo = model.getGeometry(child);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Applies the size of the refernece to the newly added swimlane\n\tif (geo != null)\n\t{\n\t\tvar parentHorizontal = (parent != null) ? this.isCellHorizontal(parent) : this.horizontal;\n\t\tthis.resizeSwimlane(swimlane, geo.width, geo.height, parentHorizontal);\n\t}\n};\n\n/**\n * Function: cellsResized\n * \n * Called if any cells have been resizes. Calls <swimlaneResized> for all\n * swimlanes where <isSwimlaneIgnored> returns false.\n * \n * Parameters:\n * \n * cells - Array of <mxCells> whose size was changed.\n */\nmxSwimlaneManager.prototype.cellsResized = function(cells)\n{\n\tif (cells != null)\n\t{\n\t\tvar model = this.getGraph().getModel();\n\t\t\n\t\tmodel.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\t// Finds the top-level swimlanes and adds offsets\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tif (!this.isSwimlaneIgnored(cells[i]))\n\t\t\t\t{\n\t\t\t\t\tvar geo = model.getGeometry(cells[i]);\n\n\t\t\t\t\tif (geo != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar size = new mxRectangle(0, 0, geo.width, geo.height);\n\t\t\t\t\t\tvar top = cells[i];\n\t\t\t\t\t\tvar current = top;\n\t\t\t\t\t\t\n\t\t\t\t\t\twhile (current != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttop = current;\n\t\t\t\t\t\t\tcurrent = model.getParent(current);\n\t\t\t\t\t\t\tvar tmp = (this.graph.isSwimlane(current)) ?\n\t\t\t\t\t\t\t\t\tthis.graph.getStartSize(current) :\n\t\t\t\t\t\t\t\t\tnew mxRectangle();\n\t\t\t\t\t\t\tsize.width += tmp.width;\n\t\t\t\t\t\t\tsize.height += tmp.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar parentHorizontal = (current != null) ? this.isCellHorizontal(current) : this.horizontal;\n\t\t\t\t\t\tthis.resizeSwimlane(top, size.width, size.height, parentHorizontal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tmodel.endUpdate();\n\t\t}\n\t}\n};\n\n/**\n * Function: resizeSwimlane\n * \n * Called from <cellsResized> for all swimlanes that are not ignored to update\n * the size of the siblings and the size of the parent swimlanes, recursively,\n * if <bubbling> is true.\n * \n * Parameters:\n * \n * swimlane - <mxCell> whose size has changed.\n */\nmxSwimlaneManager.prototype.resizeSwimlane = function(swimlane, w, h, parentHorizontal)\n{\n\tvar model = this.getGraph().getModel();\n\t\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tvar horizontal = this.isCellHorizontal(swimlane);\n\t\t\n\t\tif (!this.isSwimlaneIgnored(swimlane))\n\t\t{\n\t\t\tvar geo = model.getGeometry(swimlane);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tif ((parentHorizontal && geo.height != h) || (!parentHorizontal && geo.width != w))\n\t\t\t\t{\n\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\n\t\t\t\t\tif (parentHorizontal)\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.height = h;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tgeo.width = w;\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.setGeometry(swimlane, geo);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar tmp = (this.graph.isSwimlane(swimlane)) ?\n\t\t\t\tthis.graph.getStartSize(swimlane) :\n\t\t\t\tnew mxRectangle();\n\t\tw -= tmp.width;\n\t\th -= tmp.height;\n\t\t\n\t\tvar childCount = model.getChildCount(swimlane);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tvar child = model.getChildAt(swimlane, i);\n\t\t\tthis.resizeSwimlane(child, w, h, horizontal);\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Removes all handlers from the <graph> and deletes the reference to it.\n */\nmxSwimlaneManager.prototype.destroy = function()\n{\n\tthis.setGraph(null);\n};\n\n__mxOutput.mxSwimlaneManager = typeof mxSwimlaneManager !== 'undefined' ? mxSwimlaneManager : undefined;\n\n/**\n * Copyright (c) 2006-2017, JGraph Ltd\n * Copyright (c) 2006-2017, Gaudenz Alder\n */\n/**\n * Class: mxTemporaryCellStates\n * \n * Creates a temporary set of cell states.\n */\nfunction mxTemporaryCellStates(view, scale, cells, isCellVisibleFn, getLinkForCellState)\n{\n\tscale = (scale != null) ? scale : 1;\n\tthis.view = view;\n\t\n\t// Stores the previous state\n\tthis.oldValidateCellState = view.validateCellState;\n\tthis.oldBounds = view.getGraphBounds();\n\tthis.oldStates = view.getStates();\n\tthis.oldScale = view.getScale();\n\tthis.oldDoRedrawShape = view.graph.cellRenderer.doRedrawShape;\n\n\tvar self = this;\n\n\t// Overrides doRedrawShape and paint shape to add links on shapes\n\tif (getLinkForCellState != null)\n\t{\n\t\tview.graph.cellRenderer.doRedrawShape = function(state)\n\t\t{\n\t\t\tvar oldPaint = state.shape.paint;\n\t\t\t\n\t\t\tstate.shape.paint = function(c)\n\t\t\t{\n\t\t\t\tvar link = getLinkForCellState(state);\n\t\t\t\t\n\t\t\t\tif (link != null)\n\t\t\t\t{\n\t\t\t\t\tc.setLink(link);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toldPaint.apply(this, arguments);\n\t\t\t\t\n\t\t\t\tif (link != null)\n\t\t\t\t{\n\t\t\t\t\tc.setLink(null);\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tself.oldDoRedrawShape.apply(view.graph.cellRenderer, arguments);\n\t\t\tstate.shape.paint = oldPaint;\n\t\t};\n\t}\n\n\t// Overrides validateCellState to ignore invisible cells\n\tview.validateCellState = function(cell, resurse)\n\t{\n\t\tif (cell == null || isCellVisibleFn == null || isCellVisibleFn(cell))\n\t\t{\n\t\t\treturn self.oldValidateCellState.apply(view, arguments);\n\t\t}\n\t\t\n\t\treturn null;\n\t};\n\t\n\t// Creates space for new states\n\tview.setStates(new mxDictionary());\n\tview.setScale(scale);\n\t\n\tif (cells != null)\n\t{\n\t\tview.resetValidationState();\n\t\tvar bbox = null;\n\n\t\t// Validates the vertices and edges without adding them to\n\t\t// the model so that the original cells are not modified\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tvar bounds = view.getBoundingBox(view.validateCellState(view.validateCell(cells[i])));\n\t\t\t\n\t\t\tif (bbox == null)\n\t\t\t{\n\t\t\t\tbbox = bounds;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbbox.add(bounds);\n\t\t\t}\n\t\t}\n\n\t\tview.setGraphBounds(bbox || new mxRectangle());\n\t}\n};\n\n/**\n * Variable: view\n *\n * Holds the width of the rectangle. Default is 0.\n */\nmxTemporaryCellStates.prototype.view = null;\n\n/**\n * Variable: oldStates\n *\n * Holds the height of the rectangle. Default is 0.\n */\nmxTemporaryCellStates.prototype.oldStates = null;\n\n/**\n * Variable: oldBounds\n *\n * Holds the height of the rectangle. Default is 0.\n */\nmxTemporaryCellStates.prototype.oldBounds = null;\n\n/**\n * Variable: oldScale\n *\n * Holds the height of the rectangle. Default is 0.\n */\nmxTemporaryCellStates.prototype.oldScale = null;\n\n/**\n * Function: destroy\n * \n * Returns the top, left corner as a new <mxPoint>.\n */\nmxTemporaryCellStates.prototype.destroy = function()\n{\n\tthis.view.setScale(this.oldScale);\n\tthis.view.setStates(this.oldStates);\n\tthis.view.setGraphBounds(this.oldBounds);\n\tthis.view.validateCellState = this.oldValidateCellState;\n\tthis.view.graph.cellRenderer.doRedrawShape = this.oldDoRedrawShape;\n};\n\n__mxOutput.mxTemporaryCellStates = typeof mxTemporaryCellStates !== 'undefined' ? mxTemporaryCellStates : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n *\n * Class: mxCellStatePreview\n * \n * Implements a live preview for moving cells.\n * \n * Constructor: mxCellStatePreview\n * \n * Constructs a move preview for the given graph.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n */\nfunction mxCellStatePreview(graph)\n{\n\tthis.deltas = new mxDictionary();\n\tthis.graph = graph;\n};\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxCellStatePreview.prototype.graph = null;\n\n/**\n * Variable: deltas\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxCellStatePreview.prototype.deltas = null;\n\n/**\n * Variable: count\n * \n * Contains the number of entries in the map.\n */\nmxCellStatePreview.prototype.count = 0;\n\n/**\n * Function: isEmpty\n * \n * Returns true if this contains no entries.\n */\nmxCellStatePreview.prototype.isEmpty = function()\n{\n\treturn this.count == 0;\n};\n\n/**\n * Function: moveState\n */\nmxCellStatePreview.prototype.moveState = function(state, dx, dy, add, includeEdges)\n{\n\tadd = (add != null) ? add : true;\n\tincludeEdges = (includeEdges != null) ? includeEdges : true;\n\t\n\tvar delta = this.deltas.get(state.cell);\n\n\tif (delta == null)\n\t{\n\t\t// Note: Deltas stores the point and the state since the key is a string.\n\t\tdelta = {point: new mxPoint(dx, dy), state: state};\n\t\tthis.deltas.put(state.cell, delta);\n\t\tthis.count++;\n\t}\n\telse if (add)\n\t{\n\t\tdelta.point.x += dx;\n\t\tdelta.point.y += dy;\n\t}\n\telse\n\t{\n\t\tdelta.point.x = dx;\n\t\tdelta.point.y = dy;\n\t}\n\t\n\tif (includeEdges)\n\t{\n\t\tthis.addEdges(state);\n\t}\n\t\n\treturn delta.point;\n};\n\n/**\n * Function: show\n */\nmxCellStatePreview.prototype.show = function(visitor)\n{\n\tthis.deltas.visit(mxUtils.bind(this, function(key, delta)\n\t{\n\t\tthis.translateState(delta.state, delta.point.x, delta.point.y);\n\t}));\n\t\n\tthis.deltas.visit(mxUtils.bind(this, function(key, delta)\n\t{\n\t\tthis.revalidateState(delta.state, delta.point.x, delta.point.y, visitor);\n\t}));\n};\n\n/**\n * Function: translateState\n */\nmxCellStatePreview.prototype.translateState = function(state, dx, dy)\n{\n\tif (state != null)\n\t{\n\t\tvar model = this.graph.getModel();\n\t\t\n\t\tif (model.isVertex(state.cell))\n\t\t{\n\t\t\tstate.view.updateCellState(state);\n\t\t\tvar geo = model.getGeometry(state.cell);\n\t\t\t\n\t\t\t// Moves selection cells and non-relative vertices in\n\t\t\t// the first phase so that edge terminal points will\n\t\t\t// be updated in the second phase\n\t\t\tif ((dx != 0 || dy != 0) && geo != null && (!geo.relative || this.deltas.get(state.cell) != null))\n\t\t\t{\n\t\t\t\tstate.x += dx;\n\t\t\t\tstate.y += dy;\n\t\t\t}\n\t\t}\n\t    \n\t    var childCount = model.getChildCount(state.cell);\n\t    \n\t    for (var i = 0; i < childCount; i++)\n\t    {\n\t    \tthis.translateState(state.view.getState(model.getChildAt(state.cell, i)), dx, dy);\n\t    }\n\t}\n};\n\n/**\n * Function: revalidateState\n */\nmxCellStatePreview.prototype.revalidateState = function(state, dx, dy, visitor)\n{\n\tif (state != null)\n\t{\n\t\tvar model = this.graph.getModel();\n\t\t\n\t\t// Updates the edge terminal points and restores the\n\t\t// (relative) positions of any (relative) children\n\t\tif (model.isEdge(state.cell))\n\t\t{\n\t\t\tstate.view.updateCellState(state);\n\t\t}\n\n\t\tvar geo = this.graph.getCellGeometry(state.cell);\n\t\tvar pState = state.view.getState(model.getParent(state.cell));\n\t\t\n\t\t// Moves selection vertices which are relative\n\t\tif ((dx != 0 || dy != 0) && geo != null && geo.relative &&\n\t\t\tmodel.isVertex(state.cell) && (pState == null ||\n\t\t\tmodel.isVertex(pState.cell) || this.deltas.get(state.cell) != null))\n\t\t{\n\t\t\tstate.x += dx;\n\t\t\tstate.y += dy;\n\t\t}\n\t\t\n\t\tthis.graph.cellRenderer.redraw(state);\n\t\n\t\t// Invokes the visitor on the given state\n\t\tif (visitor != null)\n\t\t{\n\t\t\tvisitor(state);\n\t\t}\n\t\t\t\t\t\t\n\t    var childCount = model.getChildCount(state.cell);\n\t    \n\t    for (var i = 0; i < childCount; i++)\n\t    {\n\t    \tthis.revalidateState(this.graph.view.getState(model.getChildAt(state.cell, i)), dx, dy, visitor);\n\t    }\n\t}\n};\n\n/**\n * Function: addEdges\n */\nmxCellStatePreview.prototype.addEdges = function(state)\n{\n\tvar model = this.graph.getModel();\n\tvar edgeCount = model.getEdgeCount(state.cell);\n\n\tfor (var i = 0; i < edgeCount; i++)\n\t{\n\t\tvar s = state.view.getState(model.getEdgeAt(state.cell, i));\n\n\t\tif (s != null)\n\t\t{\n\t\t\tthis.moveState(s, 0, 0);\n\t\t}\n\t}\n};\n\n__mxOutput.mxCellStatePreview = typeof mxCellStatePreview !== 'undefined' ? mxCellStatePreview : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxConnectionConstraint\n * \n * Defines an object that contains the constraints about how to connect one\n * side of an edge to its terminal.\n * \n * Constructor: mxConnectionConstraint\n * \n * Constructs a new connection constraint for the given point and boolean\n * arguments.\n * \n * Parameters:\n * \n * point - Optional <mxPoint> that specifies the fixed location of the point\n * in relative coordinates. Default is null.\n * perimeter - Optional boolean that specifies if the fixed point should be\n * projected onto the perimeter of the terminal. Default is true.\n */\nfunction mxConnectionConstraint(point, perimeter, name, dx, dy)\n{\n\tthis.point = point;\n\tthis.perimeter = (perimeter != null) ? perimeter : true;\n\tthis.name = name;\n\tthis.dx = dx? dx : 0;\n\tthis.dy = dy? dy : 0;\n};\n\n/**\n * Variable: point\n * \n * <mxPoint> that specifies the fixed location of the connection point.\n */\nmxConnectionConstraint.prototype.point = null;\n\n/**\n * Variable: perimeter\n * \n * Boolean that specifies if the point should be projected onto the perimeter\n * of the terminal.\n */\nmxConnectionConstraint.prototype.perimeter = null;\n\n/**\n * Variable: name\n * \n * Optional string that specifies the name of the constraint.\n */\nmxConnectionConstraint.prototype.name = null;\n\n/**\n * Variable: dx\n * \n * Optional float that specifies the horizontal offset of the constraint.\n */\nmxConnectionConstraint.prototype.dx = null;\n\n/**\n * Variable: dy\n * \n * Optional float that specifies the vertical offset of the constraint.\n */\nmxConnectionConstraint.prototype.dy = null;\n\n\n__mxOutput.mxConnectionConstraint = typeof mxConnectionConstraint !== 'undefined' ? mxConnectionConstraint : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGraphHandler\n * \n * Graph event handler that handles selection. Individual cells are handled\n * separately using <mxVertexHandler> or one of the edge handlers. These\n * handlers are created using <mxGraph.createHandler> in\n * <mxGraphSelectionModel.cellAdded>.\n * \n * To avoid the container to scroll a moved cell into view, set\n * <scrollAfterMove> to false.\n * \n * Constructor: mxGraphHandler\n * \n * Constructs an event handler that creates handles for the\n * selection cells.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n */\nfunction mxGraphHandler(graph)\n{\n\tthis.graph = graph;\n\tthis.graph.addMouseListener(this);\n\t\n\t// Repaints the handler after autoscroll\n\tthis.panHandler = mxUtils.bind(this, function()\n\t{\n\t\tif (!this.suspended)\n\t\t{\n\t\t\tthis.updatePreview();\n\t\t\tthis.updateHint();\n\t\t}\n\t});\n\t\n\tthis.graph.addListener(mxEvent.PAN, this.panHandler);\n\t\n\t// Handles escape keystrokes\n\tthis.escapeHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tthis.reset();\n\t});\n\t\n\tthis.graph.addListener(mxEvent.ESCAPE, this.escapeHandler);\n\t\n\t// Updates the preview box for remote changes\n\tthis.refreshHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\t// Merges multiple pending calls\n\t\tif (this.refreshThread)\n\t\t{\n\t\t\twindow.clearTimeout(this.refreshThread);\n\t\t}\n\n\t\t// Waits for the states and handlers to be updated\n\t\tthis.refreshThread = window.setTimeout(mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.refreshThread = null;\n\t\t\t\n\t\t\tif (this.first != null && !this.suspended)\n\t\t\t{\n\t\t\t\t// Updates preview with no translate to compute bounding box\n\t\t\t\tvar dx = this.currentDx;\n\t\t\t\tvar dy = this.currentDy;\n\t\t\t\tthis.currentDx = 0;\n\t\t\t\tthis.currentDy = 0;\n\t\t\t\tthis.updatePreview();\n\t\t\t\tthis.bounds = this.graph.getView().getBounds(this.cells);\n\t\t\t\tthis.pBounds = this.getPreviewBounds(this.cells);\n\n\t\t\t\tif (this.pBounds == null && !this.livePreviewUsed)\n\t\t\t\t{\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Restores translate and updates preview\n\t\t\t\t\tthis.currentDx = dx;\n\t\t\t\t\tthis.currentDy = dy;\n\t\t\t\t\tthis.updatePreview();\n\t\t\t\t\tthis.updateHint();\n\n\t\t\t\t\tif (this.livePreviewUsed)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Forces update to ignore last visible state\n\t\t\t\t\t\tthis.setHandlesVisibleForCells(\n\t\t\t\t\t\t\tthis.graph.selectionCellsHandler.\n\t\t\t\t\t\t\tgetHandledSelectionCells(), false, true);\n\t\t\t\t\t\tthis.updatePreview();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}), 0);\n\t});\n\t\n\tthis.graph.getModel().addListener(mxEvent.CHANGE, this.refreshHandler);\n\tthis.graph.addListener(mxEvent.REFRESH, this.refreshHandler);\n\t\n\tthis.keyHandler = mxUtils.bind(this, function(e)\n\t{\n\t\tif (this.graph.container != null && this.graph.container.style.visibility != 'hidden' &&\n\t\t\tthis.first != null && !this.suspended)\n\t\t{\n\t\t\tvar clone = this.graph.isCloneEvent(e) &&\n\t\t\t\tthis.graph.isCellsCloneable() &&\n\t\t\t\tthis.isCloneEnabled();\n\t\t\t\n\t\t\tif (clone != this.cloning)\n\t\t\t{\n\t\t\t\tthis.cloning = clone;\n\t\t\t\tthis.checkPreview();\n\t\t\t\tthis.updatePreview();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tmxEvent.addListener(document, 'keydown', this.keyHandler);\n\tmxEvent.addListener(document, 'keyup', this.keyHandler);\n};\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxGraphHandler.prototype.graph = null;\n\n/**\n * Variable: maxCells\n * \n * Defines the maximum number of cells to paint subhandles\n * for. Default is 50 for Firefox and 20 for IE. Set this\n * to 0 if you want an unlimited number of handles to be\n * displayed. This is only recommended if the number of\n * cells in the graph is limited to a small number, eg.\n * 500.\n */\nmxGraphHandler.prototype.maxCells = (mxClient.IS_IE) ? 20 : 50;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxGraphHandler.prototype.enabled = true;\n\n/**\n * Variable: highlightEnabled\n * \n * Specifies if drop targets under the mouse should be enabled. Default is\n * true.\n */\nmxGraphHandler.prototype.highlightEnabled = true;\n\n/**\n * Variable: cloneEnabled\n * \n * Specifies if cloning by control-drag is enabled. Default is true.\n */\nmxGraphHandler.prototype.cloneEnabled = true;\n\n/**\n * Variable: moveEnabled\n * \n * Specifies if moving is enabled. Default is true.\n */\nmxGraphHandler.prototype.moveEnabled = true;\n\n/**\n * Variable: guidesEnabled\n * \n * Specifies if other cells should be used for snapping the right, center or\n * left side of the current selection. Default is false.\n */\nmxGraphHandler.prototype.guidesEnabled = false;\n\n/**\n * Variable: handlesVisible\n * \n * Whether the handles of the selection are currently visible.\n */\nmxGraphHandler.prototype.handlesVisible = true;\n\n/**\n * Variable: guide\n * \n * Holds the <mxGuide> instance that is used for alignment.\n */\nmxGraphHandler.prototype.guide = null;\n\n/**\n * Variable: currentDx\n * \n * Stores the x-coordinate of the current mouse move.\n */\nmxGraphHandler.prototype.currentDx = null;\n\n/**\n * Variable: currentDy\n * \n * Stores the y-coordinate of the current mouse move.\n */\nmxGraphHandler.prototype.currentDy = null;\n\n/**\n * Variable: updateCursor\n * \n * Specifies if a move cursor should be shown if the mouse is over a movable\n * cell. Default is true.\n */\nmxGraphHandler.prototype.updateCursor = true;\n\n/**\n * Variable: selectEnabled\n * \n * Specifies if selecting is enabled. Default is true.\n */\nmxGraphHandler.prototype.selectEnabled = true;\n\n/**\n * Variable: removeCellsFromParent\n * \n * Specifies if cells may be moved out of their parents. Default is true.\n */\nmxGraphHandler.prototype.removeCellsFromParent = true;\n\n/**\n * Variable: removeEmptyParents\n * \n * If empty parents should be removed from the model after all child cells\n * have been moved out. Default is true.\n */\nmxGraphHandler.prototype.removeEmptyParents = false;\n\n/**\n * Variable: connectOnDrop\n * \n * Specifies if drop events are interpreted as new connections if no other\n * drop action is defined. Default is false.\n */\nmxGraphHandler.prototype.connectOnDrop = false;\n\n/**\n * Variable: scrollOnMove\n * \n * Specifies if the view should be scrolled so that a moved cell is\n * visible. Default is true.\n */\nmxGraphHandler.prototype.scrollOnMove = true;\n\n/**\n * Variable: minimumSize\n * \n * Specifies the minimum number of pixels for the width and height of a\n * selection border. Default is 6.\n */\nmxGraphHandler.prototype.minimumSize = 6;\n\n/**\n * Variable: previewColor\n * \n * Specifies the color of the preview shape. Default is black.\n */\nmxGraphHandler.prototype.previewColor = 'black';\n\n/**\n * Variable: htmlPreview\n * \n * Specifies if the graph container should be used for preview. If this is used\n * then drop target detection relies entirely on <mxGraph.getCellAt> because\n * the HTML preview does not \"let events through\". Default is false.\n */\nmxGraphHandler.prototype.htmlPreview = false;\n\n/**\n * Variable: shape\n * \n * Reference to the <mxShape> that represents the preview.\n */\nmxGraphHandler.prototype.shape = null;\n\n/**\n * Variable: scaleGrid\n * \n * Specifies if the grid should be scaled. Default is false.\n */\nmxGraphHandler.prototype.scaleGrid = false;\n\n/**\n * Variable: rotationEnabled\n * \n * Specifies if the bounding box should allow for rotation. Default is true.\n */\nmxGraphHandler.prototype.rotationEnabled = true;\n\n/**\n * Variable: maxLivePreview\n * \n * Maximum number of cells for which live preview should be used. Default is 0\n * which means no live preview.\n */\nmxGraphHandler.prototype.maxLivePreview = 0;\n\n/**\n * Variable: allowLivePreview\n * \n * If live preview is allowed on this system. Default is true for systems with\n * SVG support.\n */\nmxGraphHandler.prototype.allowLivePreview = mxClient.IS_SVG;\n\n/**\n * Function: isEnabled\n * \n * Returns <enabled>.\n */\nmxGraphHandler.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Sets <enabled>.\n */\nmxGraphHandler.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: isCloneEnabled\n * \n * Returns <cloneEnabled>.\n */\nmxGraphHandler.prototype.isCloneEnabled = function()\n{\n\treturn this.cloneEnabled;\n};\n\n/**\n * Function: setCloneEnabled\n * \n * Sets <cloneEnabled>.\n * \n * Parameters:\n * \n * value - Boolean that specifies the new clone enabled state.\n */\nmxGraphHandler.prototype.setCloneEnabled = function(value)\n{\n\tthis.cloneEnabled = value;\n};\n\n/**\n * Function: isMoveEnabled\n * \n * Returns <moveEnabled>.\n */\nmxGraphHandler.prototype.isMoveEnabled = function()\n{\n\treturn this.moveEnabled;\n};\n\n/**\n * Function: setMoveEnabled\n * \n * Sets <moveEnabled>.\n */\nmxGraphHandler.prototype.setMoveEnabled = function(value)\n{\n\tthis.moveEnabled = value;\n};\n\n/**\n * Function: isSelectEnabled\n * \n * Returns <selectEnabled>.\n */\nmxGraphHandler.prototype.isSelectEnabled = function()\n{\n\treturn this.selectEnabled;\n};\n\n/**\n * Function: setSelectEnabled\n * \n * Sets <selectEnabled>.\n */\nmxGraphHandler.prototype.setSelectEnabled = function(value)\n{\n\tthis.selectEnabled = value;\n};\n\n/**\n * Function: isRemoveCellsFromParent\n * \n * Returns <removeCellsFromParent>.\n */\nmxGraphHandler.prototype.isRemoveCellsFromParent = function()\n{\n\treturn this.removeCellsFromParent;\n};\n\n/**\n * Function: setRemoveCellsFromParent\n * \n * Sets <removeCellsFromParent>.\n */\nmxGraphHandler.prototype.setRemoveCellsFromParent = function(value)\n{\n\tthis.removeCellsFromParent = value;\n};\n\n/**\n * Function: isPropagateSelectionCell\n * \n * Returns true if the given cell and parent should propagate\n * selection state to the parent.\n */\nmxGraphHandler.prototype.isPropagateSelectionCell = function(cell, immediate, me)\n{\n\tvar parent = this.graph.model.getParent(cell);\n\n\tif (immediate)\n\t{\n\t\tvar geo = (this.graph.model.isEdge(cell)) ? null :\n\t\t\tthis.graph.getCellGeometry(cell);\n\t\t\n\t\treturn !this.graph.isSiblingSelected(cell) &&\n\t\t\t((geo != null && geo.relative) ||\n\t\t\t!this.graph.isSwimlane(parent));\n\t}\n\telse\n\t{\n\t\treturn (!this.graph.isToggleEvent(me.getEvent()) ||\n\t\t\t(!this.graph.isSiblingSelected(cell) &&\n\t\t\t!this.graph.isCellSelected(cell) &&\n\t\t\t(!this.graph.isSwimlane(parent)) ||\n\t\t\tthis.graph.isCellSelected(parent))) &&\n\t\t\t(this.graph.isToggleEvent(me.getEvent()) ||\n\t\t\t!this.graph.isCellSelected(parent));\n\t}\n};\n\n/**\n * Function: getInitialCellForEvent\n * \n * Hook to return initial cell for the given event. This returns\n * the topmost cell that is not a swimlane or is selected.\n */\nmxGraphHandler.prototype.getInitialCellForEvent = function(me)\n{\n\tvar state = me.getState();\n\t\n\tif ((!this.graph.isToggleEvent(me.getEvent()) || !mxEvent.isAltDown(me.getEvent())) &&\n\t\tstate != null && !this.graph.isCellSelected(state.cell))\n\t{\n\t\tvar model = this.graph.model;\n\t\tvar next = this.graph.view.getState(model.getParent(state.cell));\n\n\t\twhile (next != null && !this.graph.isCellSelected(next.cell) &&\n\t\t\t(model.isVertex(next.cell) || model.isEdge(next.cell)) &&\n\t\t\tthis.isPropagateSelectionCell(state.cell, true, me))\n\t\t{\n\t\t\tstate = next;\n\t\t\tnext = this.graph.view.getState(this.graph.getModel().getParent(state.cell));\n\t\t}\n\t}\n\t\n\treturn (state != null) ? state.cell : null;\n};\n\n/**\n * Function: isDelayedSelection\n * \n * Returns true if the cell or one of its ancestors is selected.\n */\nmxGraphHandler.prototype.isDelayedSelection = function(cell, me)\n{\n\tif (!this.graph.isToggleEvent(me.getEvent()) || !mxEvent.isAltDown(me.getEvent()))\n\t{\n\t\twhile (cell != null)\n\t\t{\n\t\t\tif (this.graph.selectionCellsHandler.isHandled(cell))\n\t\t\t{\n\t\t\t\treturn this.graph.cellEditor.getEditingCell() != cell;\n\t\t\t}\n\t\t\t\n\t\t\tcell = this.graph.model.getParent(cell);\n\t\t}\n\t}\n\t\n\treturn this.graph.isToggleEvent(me.getEvent()) && !mxEvent.isAltDown(me.getEvent());\n};\n\n/**\n * Function: selectDelayed\n * \n * Implements the delayed selection for the given mouse event.\n */\nmxGraphHandler.prototype.selectDelayed = function(me)\n{\n\tif (!this.graph.popupMenuHandler.isPopupTrigger(me))\n\t{\n\t\tvar cell = me.getCell();\n\t\t\n\t\tif (cell == null)\n\t\t{\n\t\t\tcell = this.cell;\n\t\t}\n\t\t\n\t\tthis.selectCellForEvent(cell, me);\n\t}\n};\n\n/**\n * Function: selectCellForEvent\n * \n * Selects the given cell for the given <mxMouseEvent>.\n */\nmxGraphHandler.prototype.selectCellForEvent = function(cell, me)\n{\n\tvar state = this.graph.view.getState(cell);\n\t\n\tif (state != null)\n\t{\n\t\tif (me.isSource(state.control))\n\t\t{\n\t\t\tthis.graph.selectCellForEvent(cell, me.getEvent());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!this.graph.isToggleEvent(me.getEvent()) ||\n\t\t\t\t!mxEvent.isAltDown(me.getEvent()))\n\t\t\t{\n\t\t\t\tvar model = this.graph.getModel();\n\t\t\t\tvar parent = model.getParent(cell);\n\t\t\t\t\n\t\t\t\twhile (this.graph.view.getState(parent) != null &&\n\t\t\t\t\t(model.isVertex(parent) || model.isEdge(parent)) &&\n\t\t\t\t\tthis.isPropagateSelectionCell(cell, false, me))\n\t\t\t\t{\n\t\t\t\t\tcell = parent;\n\t\t\t\t\tparent = model.getParent(cell);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.graph.selectCellForEvent(cell, me.getEvent());\n\t\t}\n\t}\n\t\n\treturn cell;\n};\n\n/**\n * Function: consumeMouseEvent\n * \n * Consumes the given mouse event. NOTE: This may be used to enable click\n * events for links in labels on iOS as follows as consuming the initial\n * touchStart disables firing the subsequent click event on the link.\n * \n * <code>\n * mxGraphHandler.prototype.consumeMouseEvent = function(evtName, me)\n * {\n *   var source = mxEvent.getSource(me.getEvent());\n *   \n *   if (!mxEvent.isTouchEvent(me.getEvent()) || source.nodeName != 'A')\n *   {\n *     me.consume();\n *   }\n * }\n * </code>\n */\nmxGraphHandler.prototype.consumeMouseEvent = function(evtName, me)\n{\n\tme.consume();\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by selecing the given cell and creating a handle for\n * it. By consuming the event all subsequent events of the gesture are\n * redirected to this handler.\n */\nmxGraphHandler.prototype.mouseDown = function(sender, me)\n{\n\tif (!me.isConsumed() && this.isEnabled() && this.graph.isEnabled() &&\n\t\tme.getState() != null && !mxEvent.isMultiTouchEvent(me.getEvent()))\n\t{\n\t\tvar cell = this.getInitialCellForEvent(me);\n\t\tthis.delayedSelection = this.isDelayedSelection(cell, me);\n\t\tthis.cell = null;\n\t\t\n\t\tif (this.isSelectEnabled() && !this.delayedSelection)\n\t\t{\n\t\t\tthis.graph.selectCellForEvent(cell, me.getEvent());\n\t\t}\n\n\t\tif (this.isMoveEnabled())\n\t\t{\n\t\t\tvar model = this.graph.model;\n\t\t\tvar geo = model.getGeometry(cell);\n\n\t\t\tif (this.graph.isCellMovable(cell) && ((!model.isEdge(cell) || this.graph.getSelectionCount() > 1 ||\n\t\t\t\t(geo.points != null && geo.points.length > 0) || model.getTerminal(cell, true) == null ||\n\t\t\t\tmodel.getTerminal(cell, false) == null) || this.graph.allowDanglingEdges || \n\t\t\t\t(this.graph.isCloneEvent(me.getEvent()) && this.graph.isCellsCloneable())))\n\t\t\t{\n\t\t\t\tthis.start(cell, me.getX(), me.getY());\n\t\t\t}\n\t\t\telse if (this.delayedSelection)\n\t\t\t{\n\t\t\t\tthis.cell = cell;\n\t\t\t}\n\n\t\t\tthis.cellWasClicked = true;\n\t\t\tthis.consumeMouseEvent(mxEvent.MOUSE_DOWN, me);\n\t\t}\n\t}\n};\n\n/**\n * Function: getGuideStates\n * \n * Creates an array of cell states which should be used as guides.\n */\nmxGraphHandler.prototype.getGuideStates = function()\n{\n\tvar parent = this.graph.getDefaultParent();\n\tvar model = this.graph.getModel();\n\t\n\tvar filter = mxUtils.bind(this, function(cell)\n\t{\n\t\treturn this.graph.view.getState(cell) != null &&\n\t\t\tmodel.isVertex(cell) &&\n\t\t\tmodel.getGeometry(cell) != null &&\n\t\t\t!model.getGeometry(cell).relative;\n\t});\n\t\n\treturn this.graph.view.getCellStates(model.filterDescendants(filter, parent));\n};\n\n/**\n * Function: getCells\n * \n * Returns the cells to be modified by this handler. This implementation\n * returns all selection cells that are movable, or the given initial cell if\n * the given cell is not selected and movable. This handles the case of moving\n * unselectable or unselected cells.\n * \n * Parameters:\n * \n * initialCell - <mxCell> that triggered this handler.\n */\nmxGraphHandler.prototype.getCells = function(initialCell)\n{\n\tif (!this.delayedSelection && this.graph.isCellMovable(initialCell))\n\t{\n\t\treturn [initialCell];\n\t}\n\telse\n\t{\n\t\treturn this.graph.getMovableCells(this.graph.getSelectionCells());\n\t}\n};\n\n/**\n * Function: getPreviewBounds\n * \n * Returns the <mxRectangle> used as the preview bounds for\n * moving the given cells.\n */\nmxGraphHandler.prototype.getPreviewBounds = function(cells)\n{\n\tvar bounds = this.getBoundingBox(cells);\n\t\n\tif (bounds != null)\n\t{\n\t\t// Corrects width and height\n\t\tbounds.width = Math.max(0, bounds.width - 1);\n\t\tbounds.height = Math.max(0, bounds.height - 1);\n\t\t\n\t\tif (bounds.width < this.minimumSize)\n\t\t{\n\t\t\tvar dx = this.minimumSize - bounds.width;\n\t\t\tbounds.x -= dx / 2;\n\t\t\tbounds.width = this.minimumSize;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbounds.x = Math.round(bounds.x);\n\t\t\tbounds.width = Math.ceil(bounds.width);\n\t\t}\n\t\t\n\t\tvar tr = this.graph.view.translate;\n\t\tvar s = this.graph.view.scale;\n\t\t\n\t\tif (bounds.height < this.minimumSize)\n\t\t{\n\t\t\tvar dy = this.minimumSize - bounds.height;\n\t\t\tbounds.y -= dy / 2;\n\t\t\tbounds.height = this.minimumSize;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbounds.y = Math.round(bounds.y);\n\t\t\tbounds.height = Math.ceil(bounds.height);\n\t\t}\n\t}\n\t\n\treturn bounds;\n};\n\n/**\n * Function: getBoundingBox\n * \n * Returns the union of the <mxCellStates> for the given array of <mxCells>.\n * For vertices, this method uses the bounding box of the corresponding shape\n * if one exists. The bounding box of the corresponding text label and all\n * controls and overlays are ignored. See also: <mxGraphView.getBounds> and\n * <mxGraph.getBoundingBox>.\n *\n * Parameters:\n *\n * cells - Array of <mxCells> whose bounding box should be returned.\n */\nmxGraphHandler.prototype.getBoundingBox = function(cells)\n{\n\tvar result = null;\n\t\n\tif (cells != null && cells.length > 0)\n\t{\n\t\tvar model = this.graph.getModel();\n\t\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tif (model.isVertex(cells[i]) || model.isEdge(cells[i]))\n\t\t\t{\n\t\t\t\tvar state = this.graph.view.getState(cells[i]);\n\t\t\t\n\t\t\t\tif (state != null)\n\t\t\t\t{\n\t\t\t\t\tvar bbox = state;\n\t\t\t\t\t\n\t\t\t\t\tif (model.isVertex(cells[i]) && state.shape != null && state.shape.boundingBox != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tbbox = state.shape.boundingBox;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (result == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = mxRectangle.fromRectangle(bbox);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.add(bbox);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: createPreviewShape\n * \n * Creates the shape used to draw the preview for the given bounds.\n */\nmxGraphHandler.prototype.createPreviewShape = function(bounds)\n{\n\tvar shape = new mxRectangleShape(bounds, null, this.previewColor);\n\tshape.isDashed = true;\n\t\n\tif (this.htmlPreview)\n\t{\n\t\tshape.dialect = mxConstants.DIALECT_STRICTHTML;\n\t\tshape.init(this.graph.container);\n\t}\n\telse\n\t{\n\t\t// Makes sure to use either VML or SVG shapes in order to implement\n\t\t// event-transparency on the background area of the rectangle since\n\t\t// HTML shapes do not let mouseevents through even when transparent\n\t\tshape.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\tmxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\t\tshape.init(this.graph.getView().getOverlayPane());\n\t\tshape.pointerEvents = false;\n\t\t\n\t\t// Workaround for artifacts on iOS\n\t\tif (mxClient.IS_IOS)\n\t\t{\n\t\t\tshape.getSvgScreenOffset = function()\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t};\n\t\t}\n\t}\n\t\n\treturn shape;\n};\n\n/**\n * Function: start\n * \n * Starts the handling of the mouse gesture.\n */\nmxGraphHandler.prototype.start = function(cell, x, y, cells)\n{\n\tthis.cell = cell;\n\tthis.first = mxUtils.convertPoint(this.graph.container, x, y);\n\tthis.cells = (cells != null) ? cells : this.getCells(this.cell);\n\tthis.bounds = this.graph.getView().getBounds(this.cells);\n\tthis.pBounds = this.getPreviewBounds(this.cells);\n\tthis.allCells = new mxDictionary();\n\tthis.cloning = false;\n\tthis.cellCount = 0;\n\t\n\tfor (var i = 0; i < this.cells.length; i++)\n\t{\n\t\tthis.cellCount += this.addStates(this.cells[i], this.allCells);\n\t}\n\t\n\tif (this.guidesEnabled)\n\t{\n\t\tthis.guide = new mxGuide(this.graph, this.getGuideStates());\n\t\tvar parent = this.graph.model.getParent(cell);\n\t\tvar ignore = this.graph.model.getChildCount(parent) < 2;\n\t\t\n\t\t// Uses connected states as guides\n\t\tvar connected = new mxDictionary();\n\t\tvar opps = this.graph.getOpposites(this.graph.getEdges(this.cell), this.cell);\n\t\t\n\t\tfor (var i = 0; i < opps.length; i++)\n\t\t{\n\t\t\tvar state = this.graph.view.getState(opps[i]);\n\t\t\t\n\t\t\tif (state != null && !connected.get(state))\n\t\t\t{\n\t\t\t\tconnected.put(state, true);\n\t\t\t}\n\t\t}\n\n\t\tthis.guide.isStateIgnored = mxUtils.bind(this, function(state)\n\t\t{\n\t\t\tvar p = this.graph.model.getParent(state.cell);\n\t\t\t\n\t\t\treturn state.cell != null && ((!this.cloning &&\n\t\t\t\tthis.isCellMoving(state.cell)) ||\n\t\t\t\t(state.cell != (this.target || parent) && !ignore &&\n\t\t\t\t!connected.get(state) &&\n\t\t\t\t(this.target == null || this.graph.model.getChildCount(\n\t\t\t\tthis.target) >= 2) && p != (this.target || parent)));  \n\t\t});\n\t}\n};\n\n/**\n * Function: addStates\n * \n * Adds the states for the given cell recursively to the given dictionary.\n */\nmxGraphHandler.prototype.addStates = function(cell, dict)\n{\n\tvar state = this.graph.view.getState(cell);\n\tvar count = 0;\n\t\n\tif (state != null && dict.get(cell) == null)\n\t{\n\t\tdict.put(cell, state);\n\t\tcount++;\n\t\t\n\t\tvar childCount = this.graph.model.getChildCount(cell);\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tcount += this.addStates(this.graph.model.getChildAt(cell, i), dict);\n\t\t}\n\t}\n\t\n\treturn count;\n};\n\n/**\n * Function: isCellMoving\n * \n * Returns true if the given cell is currently being moved.\n */\nmxGraphHandler.prototype.isCellMoving = function(cell)\n{\n\treturn this.allCells.get(cell) != null;\n};\n\n/**\n * Function: useGuidesForEvent\n * \n * Returns true if the guides should be used for the given <mxMouseEvent>.\n * This implementation returns <mxGuide.isEnabledForEvent>.\n */\nmxGraphHandler.prototype.useGuidesForEvent = function(me)\n{\n\treturn (this.guide != null) ? this.guide.isEnabledForEvent(me.getEvent()) &&\n\t\t!this.graph.isConstrainedEvent(me.getEvent()) : true;\n};\n\n\n/**\n * Function: snap\n * \n * Snaps the given vector to the grid and returns the given mxPoint instance.\n */\nmxGraphHandler.prototype.snap = function(vector)\n{\n\tvar scale = (this.scaleGrid) ? this.graph.view.scale : 1;\n\t\n\tvector.x = this.graph.snap(vector.x / scale) * scale;\n\tvector.y = this.graph.snap(vector.y / scale) * scale;\n\t\n\treturn vector;\n};\n\n/**\n * Function: getDelta\n * \n * Returns an <mxPoint> that represents the vector for moving the cells\n * for the given <mxMouseEvent>.\n */\nmxGraphHandler.prototype.getDelta = function(me)\n{\n\tvar point = mxUtils.convertPoint(this.graph.container, me.getX(), me.getY());\n\t\n\treturn new mxPoint(point.x - this.first.x - this.graph.panDx,\n\t\tpoint.y - this.first.y - this.graph.panDy);\n};\n\n/**\n * Function: updateHint\n * \n * Hook for subclassers do show details while the handler is active.\n */\nmxGraphHandler.prototype.updateHint = function(me) { };\n\n/**\n * Function: removeHint\n * \n * Hooks for subclassers to hide details when the handler gets inactive.\n */\nmxGraphHandler.prototype.removeHint = function() { };\n\n/**\n * Function: roundLength\n * \n * Hook for rounding the unscaled vector. Allows for half steps in the raster so\n * numbers coming in should be rounded if no half steps are allowed (ie for non\n * aligned standard moving where pixel steps should be preferred).\n */\nmxGraphHandler.prototype.roundLength = function(length)\n{\n\treturn Math.round(length * 100) / 100;\n};\n\n/**\n * Function: isValidDropTarget\n * \n * Returns true if the given cell is a valid drop target.\n */\nmxGraphHandler.prototype.isValidDropTarget = function(target, me)\n{\n\treturn this.graph.model.getParent(this.cell) != target;\n};\n\n/**\n * Function: checkPreview\n * \n * Updates the preview if cloning state has changed.\n */\nmxGraphHandler.prototype.checkPreview = function()\n{\n\tif (this.livePreviewActive && this.cloning)\n\t{\n\t\tthis.resetLivePreview();\n\t\tthis.livePreviewActive = false;\n\t}\n\telse if (this.maxLivePreview >= this.cellCount && !this.livePreviewActive && this.allowLivePreview)\n\t{\n\t\tif (!this.cloning || !this.livePreviewActive)\n\t\t{\n\t\t\tthis.livePreviewActive = true;\n\t\t\tthis.livePreviewUsed = true;\n\t\t}\n\t}\n\telse if (!this.livePreviewUsed && this.shape == null)\n\t{\n\t\tthis.shape = this.createPreviewShape(this.bounds);\n\t}\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by highlighting possible drop targets and updating the\n * preview.\n */\nmxGraphHandler.prototype.mouseMove = function(sender, me)\n{\n\tvar graph = this.graph;\n\n\tif (!me.isConsumed() && graph.isMouseDown && this.cell != null &&\n\t\tthis.first != null && this.bounds != null && !this.suspended)\n\t{\n\t\t// Stops moving if a multi touch event is received\n\t\tif (mxEvent.isMultiTouchEvent(me.getEvent()))\n\t\t{\n\t\t\tthis.reset();\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar delta = this.getDelta(me);\n\t\tvar tol = graph.tolerance;\n\n\t\tif (this.shape != null || this.livePreviewActive || Math.abs(delta.x) > tol || Math.abs(delta.y) > tol)\n\t\t{\n\t\t\t// Highlight is used for highlighting drop targets\n\t\t\tif (this.highlight == null)\n\t\t\t{\n\t\t\t\tthis.highlight = new mxCellHighlight(this.graph,\n\t\t\t\t\tmxConstants.DROP_TARGET_COLOR, 3);\n\t\t\t}\n\n\t\t\tvar clone = graph.isCloneEvent(me.getEvent()) && graph.isCellsCloneable() && this.isCloneEnabled();\n\t\t\tvar gridEnabled = graph.isGridEnabledEvent(me.getEvent());\n\t\t\tvar cell = me.getCell();\n\t\t\tvar hideGuide = true;\n\t\t\tvar target = null;\n\t\t\tthis.cloning = clone;\n\t\t\t\n\t\t\tif (graph.isDropEnabled() && this.highlightEnabled)\n\t\t\t{\n\t\t\t\t// Contains a call to getCellAt to find the cell under the mouse\n\t\t\t\ttarget = graph.getDropTarget(this.cells, me.getEvent(), cell, clone);\n\t\t\t}\n\n\t\t\tvar state = graph.getView().getState(target);\n\t\t\tvar highlight = false;\n\t\t\t\n\t\t\tif (state != null && (clone || this.isValidDropTarget(target, me)))\n\t\t\t{\n\t\t\t    if (this.target != target)\n\t\t\t    {\n\t\t\t\t    this.target = target;\n\t\t\t\t    this.setHighlightColor(mxConstants.DROP_TARGET_COLOR);\n\t\t\t\t}\n\t\t\t    \n\t\t\t    highlight = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.target = null;\n\n\t\t\t\tif (this.connectOnDrop && cell != null && this.cells.length == 1 &&\n\t\t\t\t\tgraph.getModel().isVertex(cell) && graph.isCellConnectable(cell))\n\t\t\t\t{\n\t\t\t\t\tstate = graph.getView().getState(cell);\n\t\t\t\t\t\n\t\t\t\t\tif (state != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar error = graph.getEdgeValidationError(null, this.cell, cell);\n\t\t\t\t\t\tvar color = (error == null) ?\n\t\t\t\t\t\t\tmxConstants.VALID_COLOR :\n\t\t\t\t\t\t\tmxConstants.INVALID_CONNECT_TARGET_COLOR;\n\t\t\t\t\t\tthis.setHighlightColor(color);\n\t\t\t\t\t\thighlight = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (state != null && highlight)\n\t\t\t{\n\t\t\t\tthis.highlight.highlight(state);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.highlight.hide();\n\t\t\t}\n\n\t\t\tif (this.guide != null && this.useGuidesForEvent(me))\n\t\t\t{\n\t\t\t\tdelta = this.guide.move(this.bounds, delta, gridEnabled, clone);\n\t\t\t\thideGuide = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdelta = this.graph.snapDelta(delta, this.bounds, !gridEnabled, false, false);\n\t\t\t}\n\t\t\t\n\t\t\tif (this.guide != null && hideGuide)\n\t\t\t{\n\t\t\t\tthis.guide.hide();\n\t\t\t}\n\n\t\t\t// Constrained movement if shift key is pressed\n\t\t\tif (graph.isConstrainedEvent(me.getEvent()))\n\t\t\t{\n\t\t\t\tif (Math.abs(delta.x) > Math.abs(delta.y))\n\t\t\t\t{\n\t\t\t\t\tdelta.y = 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelta.x = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.checkPreview();\n\t\t\t\n\t\t\tif (this.currentDx != delta.x || this.currentDy != delta.y)\n\t\t\t{\n\t\t\t\tthis.currentDx = delta.x;\n\t\t\t\tthis.currentDy = delta.y;\n\t\t\t\tthis.updatePreview();\n\t\t\t}\n\t\t}\n\n\t\tthis.updateHint(me);\n\t\tthis.consumeMouseEvent(mxEvent.MOUSE_MOVE, me);\n\t\t\n\t\t// Cancels the bubbling of events to the container so\n\t\t// that the droptarget is not reset due to an mouseMove\n\t\t// fired on the container with no associated state.\n\t\tmxEvent.consume(me.getEvent());\n\t}\n\telse if ((this.isMoveEnabled() || this.isCloneEnabled()) && this.updateCursor && !me.isConsumed() &&\n\t\t\t(me.getState() != null || me.sourceState != null) && !graph.isMouseDown)\n\t{\n\t\tvar cursor = graph.getCursorForMouseEvent(me);\n\t\t\n\t\tif (cursor == null && graph.isEnabled() && graph.isCellMovable(me.getCell()))\n\t\t{\n\t\t\tif (graph.getModel().isEdge(me.getCell()))\n\t\t\t{\n\t\t\t\tcursor = mxConstants.CURSOR_MOVABLE_EDGE;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcursor = mxConstants.CURSOR_MOVABLE_VERTEX;\n\t\t\t}\n\t\t}\n\n\t\t// Sets the cursor on the original source state under the mouse\n\t\t// instead of the event source state which can be the parent\n\t\tif (cursor != null && me.sourceState != null)\n\t\t{\n\t\t\tme.sourceState.setCursor(cursor);\n\t\t}\n\t}\n};\n\n/**\n * Function: updatePreview\n * \n * Updates the bounds of the preview shape.\n */\nmxGraphHandler.prototype.updatePreview = function(remote)\n{\n\tif (this.livePreviewUsed && !remote)\n\t{\n\t\tif (this.cells != null)\n\t\t{\n\t\t\tthis.setHandlesVisibleForCells(\n\t\t\t\tthis.graph.selectionCellsHandler.\n\t\t\t\tgetHandledSelectionCells(), false);\n\t\t\tthis.updateLivePreview(this.currentDx, this.currentDy);\n\t\t}\n\t}\n\telse\n\t{\n\t\tthis.updatePreviewShape();\n\t}\n};\n\n/**\n * Function: updatePreviewShape\n * \n * Updates the bounds of the preview shape.\n */\nmxGraphHandler.prototype.updatePreviewShape = function()\n{\n\tif (this.shape != null && this.pBounds != null)\n\t{\n\t\tthis.shape.bounds = new mxRectangle(Math.round(this.pBounds.x + this.currentDx),\n\t\t\t\tMath.round(this.pBounds.y + this.currentDy), this.pBounds.width, this.pBounds.height);\n\t\tthis.shape.redraw();\n\t}\n};\n\n/**\n * Function: updateLivePreview\n * \n * Updates the bounds of the preview shape.\n */\nmxGraphHandler.prototype.updateLivePreview = function(dx, dy)\n{\n\tif (!this.suspended)\n\t{\n\t\tvar states = [];\n\t\t\n\t\tif (this.allCells != null)\n\t\t{\n\t\t\tthis.allCells.visit(mxUtils.bind(this, function(key, state)\n\t\t\t{\n\t\t\t\tvar realState = this.graph.view.getState(state.cell);\n\t\t\t\t\n\t\t\t\t// Checks if cell was removed or replaced\n\t\t\t\tif (realState != state)\n\t\t\t\t{\n\t\t\t\t\tstate.destroy();\n\t\t\t\t\t\n\t\t\t\t\tif (realState != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.allCells.put(state.cell, realState);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.allCells.remove(state.cell);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tstate = realState;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (state != null)\n\t\t\t\t{\n\t\t\t\t\t// Saves current state\n\t\t\t\t\tvar tempState = state.clone();\n\t\t\t\t\tstates.push([state, tempState]);\n\t\t\n\t\t\t\t\t// Makes transparent for events to detect drop targets\n\t\t\t\t\tif (state.shape != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (state.shape.originalPointerEvents == null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.shape.originalPointerEvents = state.shape.pointerEvents;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tstate.shape.pointerEvents = false;\n\t\t\n\t\t\t\t\t\tif (state.text != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (state.text.originalPointerEvents == null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.text.originalPointerEvents = state.text.pointerEvents;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tstate.text.pointerEvents = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t// Temporarily changes position\n\t\t\t\t\tif (this.graph.model.isVertex(state.cell))\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.x += dx;\n\t\t\t\t\t\tstate.y += dy;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Draws the live preview\n\t\t\t\t\t\tif (!this.cloning)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.view.graph.cellRenderer.redraw(state, true);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Forces redraw of connected edges after all states\n\t\t\t\t\t\t\t// have been updated but avoids update of state\n\t\t\t\t\t\t\tstate.view.invalidate(state.cell);\n\t\t\t\t\t\t\tstate.invalid = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Hides folding icon\n\t\t\t\t\t\t\tif (state.control != null && state.control.node != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.control.node.style.visibility = 'hidden';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Clone live preview may use text bounds\n\t\t\t\t\t\telse if (state.text != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.text.updateBoundingBox();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Fixes preview box for edge labels\n\t\t\t\t\t\t\tif (state.text.boundingBox != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.text.boundingBox.x += dx;\n\t\t\t\t\t\t\t\tstate.text.boundingBox.y += dy;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (state.text.unrotatedBoundingBox != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.text.unrotatedBoundingBox.x += dx;\n\t\t\t\t\t\t\t\tstate.text.unrotatedBoundingBox.y += dy;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\t\n\t\t// Resets the handler if everything was removed\n\t\tif (states.length == 0)\n\t\t{\n\t\t\tthis.reset();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Redraws connected edges\n\t\t\tvar s = this.graph.view.scale;\n\t\t\t\n\t\t\tfor (var i = 0; i < states.length; i++)\n\t\t\t{\n\t\t\t\tvar state = states[i][0];\n\t\t\t\t\n\t\t\t\tif (this.graph.model.isEdge(state.cell))\n\t\t\t\t{\n\t\t\t\t\tvar geometry = this.graph.getCellGeometry(state.cell);\n\t\t\t\t\tvar points = [];\n\t\t\t\t\t\n\t\t\t\t\tif (geometry != null && geometry.points != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (var j = 0; j < geometry.points.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (geometry.points[j] != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpoints.push(new mxPoint(\n\t\t\t\t\t\t\t\t\tgeometry.points[j].x + dx / s,\n\t\t\t\t\t\t\t\t\tgeometry.points[j].y + dy / s));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tvar source = state.visibleSourceState;\n\t\t\t\t\tvar target = state.visibleTargetState;\n\t\t\t\t\tvar pts = states[i][1].absolutePoints;\n\t\t\t\t\t\n\t\t\t\t\tif (source == null || !this.isCellMoving(source.cell))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar pt0 = pts[0];\n\t\t\t\t\t\tstate.setAbsoluteTerminalPoint(new mxPoint(pt0.x + dx, pt0.y + dy), true);\n\t\t\t\t\t\tsource = null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.view.updateFixedTerminalPoint(state, source, true,\n\t\t\t\t\t\t\tthis.graph.getConnectionConstraint(state, source, true));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (target == null || !this.isCellMoving(target.cell))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar ptn = pts[pts.length - 1];\n\t\t\t\t\t\tstate.setAbsoluteTerminalPoint(new mxPoint(ptn.x + dx, ptn.y + dy), false);\n\t\t\t\t\t\ttarget = null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.view.updateFixedTerminalPoint(state, target, false,\n\t\t\t\t\t\t\tthis.graph.getConnectionConstraint(state, target, false));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tstate.view.updatePoints(state, points, source, target);\n\t\t\t\t\tstate.view.updateFloatingTerminalPoints(state, source, target);\n\t\t\t\t\tstate.view.updateEdgeLabelOffset(state);\n\t\t\t\t\tstate.invalid = false;\n\t\n\t\t\t\t\t// Draws the live preview but avoids update of state\n\t\t\t\t\tif (!this.cloning)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.view.graph.cellRenderer.redraw(state, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\tthis.graph.view.validate();\n\t\t\tthis.redrawHandles(states);\n\t\t\tthis.resetPreviewStates(states);\n\t\t}\n\t}\n};\n\n/**\n * Function: redrawHandles\n * \n * Redraws the preview shape for the given states array.\n */\nmxGraphHandler.prototype.redrawHandles = function(states)\n{\n\tfor (var i = 0; i < states.length; i++)\n\t{\n\t\tvar handler = this.graph.selectionCellsHandler.getHandler(states[i][0].cell);\n\t\t\n\t\tif (handler != null)\n\t\t{\n\t\t\thandler.redraw(true);\n\t\t}\n\t}\n};\n\n/**\n * Function: resetPreviewStates\n * \n * Resets the given preview states array.\n */\nmxGraphHandler.prototype.resetPreviewStates = function(states)\n{\n\tfor (var i = 0; i < states.length; i++)\n\t{\n\t\tstates[i][0].setState(states[i][1]);\n\t}\n};\n\n/**\n * Function: suspend\n * \n * Suspends the livew preview.\n */\nmxGraphHandler.prototype.suspend = function()\n{\n\tif (!this.suspended)\n\t{\n\t\tif (this.livePreviewUsed)\n\t\t{\n\t\t\tthis.updateLivePreview(0, 0);\n\t\t}\n\t\t\n\t\tif (this.shape != null)\n\t\t{\n\t\t\tthis.shape.node.style.visibility = 'hidden';\n\t\t} \n\t\n\t\tif (this.guide != null)\n\t\t{\n\t\t\tthis.guide.setVisible(false);\n\t\t}\n\t\t\n\t\tthis.suspended = true;\n\t}\n};\n\n/**\n * Function: resume\n * \n * Suspends the livew preview.\n */\nmxGraphHandler.prototype.resume = function()\n{\n\tif (this.suspended)\n\t{\n\t\tthis.suspended = null;\n\t\t\n\t\tif (this.livePreviewUsed)\n\t\t{\n\t\t\tthis.livePreviewActive = true;\n\t\t}\n\t\t\n\t\tif (this.shape != null)\n\t\t{\n\t\t\tthis.shape.node.style.visibility = 'visible';\n\t\t}\n\t\t\n\t\tif (this.guide != null)\n\t\t{\n\t\t\tthis.guide.setVisible(true);\n\t\t}\n\t}\n};\n\n/**\n * Function: resetLivePreview\n * \n * Resets the livew preview.\n */\nmxGraphHandler.prototype.resetLivePreview = function()\n{\n\tif (this.allCells != null)\n\t{\n\t\tthis.allCells.visit(mxUtils.bind(this, function(key, state)\n\t\t{\n\t\t\t// Restores event handling\n\t\t\tif (state.shape != null && state.shape.originalPointerEvents != null)\n\t\t\t{\n\t\t\t\tstate.shape.pointerEvents = state.shape.originalPointerEvents;\n\t\t\t\tstate.shape.originalPointerEvents = null;\n\t\t\t\t\n\t\t\t\t// Forces repaint even if not moved to update pointer events\n\t\t\t\tstate.shape.bounds = null;\n\t\t\t\t\n\t\t\t\tif (state.text != null)\n\t\t\t\t{\n\t\t\t\t\tstate.text.pointerEvents = state.text.originalPointerEvents;\n\t\t\t\t\tstate.text.originalPointerEvents = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Shows folding icon\n\t\t\tif (state.control != null && state.control.node != null &&\n\t\t\t\tstate.control.node.style.visibility == 'hidden')\n\t\t\t{\n\t\t\t\tstate.control.node.style.visibility = '';\n\t\t\t}\n\t\t\t\n\t\t\t// Fixes preview box for edge labels\n\t\t\tif (!this.cloning)\n\t\t\t{\n\t\t\t\tif (state.text != null)\n\t\t\t\t{\n\t\t\t\t\tstate.text.updateBoundingBox();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Forces repaint of connected edges\n\t\t\tstate.view.invalidate(state.cell);\n\t\t}));\n\n\t\t// Repaints all invalid states\n\t\tthis.graph.view.validate();\n\t}\n};\n\n/**\n * Function: setHandlesVisibleForCells\n * \n * Sets wether the handles attached to the given cells are visible.\n * \n * Parameters:\n * \n * cells - Array of <mxCells>.\n * visible - Boolean that specifies if the handles should be visible.\n * force - Forces an update of the handler regardless of the last used value.\n */\nmxGraphHandler.prototype.setHandlesVisibleForCells = function(cells, visible, force)\n{\n\tif (force || this.handlesVisible != visible)\n\t{\n\t\tthis.handlesVisible = visible;\n\t\n\t\tfor (var i = 0; i < cells.length; i++)\n\t\t{\n\t\t\tvar handler = this.graph.selectionCellsHandler.getHandler(cells[i]);\n\t\t\t\n\t\t\tif (handler != null)\n\t\t\t{\n\t\t\t\thandler.setHandlesVisible(visible);\n\t\t\t\t\n\t\t\t\tif (visible)\n\t\t\t\t{\n\t\t\t\t\thandler.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: setHighlightColor\n * \n * Sets the color of the rectangle used to highlight drop targets.\n * \n * Parameters:\n * \n * color - String that represents the new highlight color.\n */\nmxGraphHandler.prototype.setHighlightColor = function(color)\n{\n\tif (this.highlight != null)\n\t{\n\t\tthis.highlight.setHighlightColor(color);\n\t}\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by applying the changes to the selection cells.\n */\nmxGraphHandler.prototype.mouseUp = function(sender, me)\n{\n\tif (!me.isConsumed())\n\t{\n\t\tif (this.livePreviewUsed)\n\t\t{\n\t\t\tthis.resetLivePreview();\n\t\t}\n\t\t\n\t\tif (this.cell != null && this.first != null && (this.shape != null || this.livePreviewUsed) &&\n\t\t\tthis.currentDx != null && this.currentDy != null)\n\t\t{\n\t\t\tvar graph = this.graph;\n\t\t\tvar cell = me.getCell();\n\t\t\t\n\t\t\tif (this.connectOnDrop && this.target == null && cell != null && graph.getModel().isVertex(cell) &&\n\t\t\t\tgraph.isCellConnectable(cell) && graph.isEdgeValid(null, this.cell, cell))\n\t\t\t{\n\t\t\t\tgraph.connectionHandler.connect(this.cell, cell, me.getEvent());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar clone = graph.isCloneEvent(me.getEvent()) && graph.isCellsCloneable() && this.isCloneEnabled();\n\t\t\t\tvar scale = graph.getView().scale;\n\t\t\t\tvar dx = this.roundLength(this.currentDx / scale);\n\t\t\t\tvar dy = this.roundLength(this.currentDy / scale);\n\t\t\t\tvar target = this.target;\n\t\t\t\t\n\t\t\t\tif (graph.isSplitEnabled() && graph.isSplitTarget(target, this.cells, me.getEvent()))\n\t\t\t\t{\n\t\t\t\t\tgraph.splitEdge(target, this.cells, null, dx, dy,\n\t\t\t\t\t\tme.getGraphX(), me.getGraphY());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.moveCells(this.cells, dx, dy, clone, this.target, me.getEvent());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.isSelectEnabled() && this.delayedSelection && this.cell != null)\n\t\t{\n\t\t\tthis.selectDelayed(me);\n\t\t}\n\t}\n\n\t// Consumes the event if a cell was initially clicked\n\tif (this.cellWasClicked)\n\t{\n\t\tthis.consumeMouseEvent(mxEvent.MOUSE_UP, me);\n\t}\n\n\tthis.reset();\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this handler.\n */\nmxGraphHandler.prototype.reset = function()\n{\n\tif (this.livePreviewUsed)\n\t{\n\t\tthis.resetLivePreview();\n\t\tthis.setHandlesVisibleForCells(\n\t\t\tthis.graph.selectionCellsHandler.\n\t\t\tgetHandledSelectionCells(), true);\n\t}\n\t\n\tthis.destroyShapes();\n\tthis.removeHint();\n\n\tthis.delayedSelection = false;\n\tthis.livePreviewActive = null;\n\tthis.livePreviewUsed = null;\n\tthis.cellWasClicked = false;\n\tthis.suspended = null;\n\tthis.currentDx = null;\n\tthis.currentDy = null;\n\tthis.cellCount = null;\n\tthis.cloning = false;\n\tthis.allCells = null;\n\tthis.pBounds = null;\n\tthis.guides = null;\n\tthis.target = null;\n\tthis.first = null;\n\tthis.cells = null;\n\tthis.cell = null;\n};\n\n/**\n * Function: shouldRemoveCellsFromParent\n * \n * Returns true if the given cells should be removed from the parent for the specified\n * mousereleased event.\n */\nmxGraphHandler.prototype.shouldRemoveCellsFromParent = function(parent, cells, evt)\n{\n\tif (this.graph.getModel().isVertex(parent))\n\t{\n\t\tvar pState = this.graph.getView().getState(parent);\n\t\t\n\t\tif (pState != null)\n\t\t{\n\t\t\tvar pt = mxUtils.convertPoint(this.graph.container,\n\t\t\t\tmxEvent.getClientX(evt), mxEvent.getClientY(evt));\n\t\t\tvar alpha = mxUtils.toRadians(mxUtils.getValue(pState.style, mxConstants.STYLE_ROTATION) || 0);\n\t\t\t\n\t\t\tif (alpha != 0)\n\t\t\t{\n\t\t\t\tvar cos = Math.cos(-alpha);\n\t\t\t\tvar sin = Math.sin(-alpha);\n\t\t\t\tvar cx = new mxPoint(pState.getCenterX(), pState.getCenterY());\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, cx);\n\t\t\t}\n\t\t\n\t\t\treturn !mxUtils.contains(pState, pt.x, pt.y);\n\t\t}\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: moveCells\n * \n * Moves the given cells by the specified amount.\n */\nmxGraphHandler.prototype.moveCells = function(cells, dx, dy, clone, target, evt)\n{\n\tif (clone)\n\t{\n\t\tcells = this.graph.getCloneableCells(cells);\n\t}\n\t\n\t// Removes cells from parent\n\tvar parent = this.graph.getModel().getParent(this.cell);\n\t\n\tif (target == null && this.isRemoveCellsFromParent() &&\n\t\tthis.shouldRemoveCellsFromParent(parent, cells, evt))\n\t{\n\t\ttarget = this.graph.getDefaultParent();\n\t}\n\t\n\t// Cloning into locked cells is not allowed\n\tclone = clone && !this.graph.isCellLocked(target || this.graph.getDefaultParent());\n\n\tthis.graph.getModel().beginUpdate();\n\ttry\n\t{\n\t\tvar parents = [];\n\t\t\n\t\t// Removes parent if all child cells are removed\n\t\tif (!clone && target != null && this.removeEmptyParents)\n\t\t{\n\t\t\t// Collects all non-selected parents\n\t\t\tvar dict = new mxDictionary();\n\t\t\t\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tdict.put(cells[i], true);\n\t\t\t}\n\t\t\t\n\t\t\t// LATER: Recurse up the cell hierarchy\n\t\t\tfor (var i = 0; i < cells.length; i++)\n\t\t\t{\n\t\t\t\tvar par = this.graph.model.getParent(cells[i]);\n\n\t\t\t\tif (par != null && !dict.get(par))\n\t\t\t\t{\n\t\t\t\t\tdict.put(par, true);\n\t\t\t\t\tparents.push(par);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Passes all selected cells in order to correctly clone or move into\n\t\t// the target cell. The method checks for each cell if its movable.\n\t\tcells = this.graph.moveCells(cells, dx, dy, clone, target, evt);\n\n\t\t// Removes parent if all child cells are removed\n\t\tvar temp = [];\n\t\t\n\t\tfor (var i = 0; i < parents.length; i++)\n\t\t{\n\t\t\tif (this.shouldRemoveParent(parents[i]))\n\t\t\t{\n\t\t\t\ttemp.push(parents[i]);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.graph.removeCells(temp, false);\n\t}\n\tfinally\n\t{\n\t\tthis.graph.getModel().endUpdate();\n\t}\n\n\t// Selects the new cells if cells have been cloned\n\tif (clone)\n\t{\n\t\tthis.graph.setSelectionCells(cells);\n\t}\n\n\tif (this.isSelectEnabled() && this.scrollOnMove)\n\t{\n\t\tthis.graph.scrollCellToVisible(cells[0]);\n\t}\n};\n\n/**\n * Function: shouldRemoveParent\n * \n * Returns true if the given parent should be removed after removal of child cells.\n */\nmxGraphHandler.prototype.shouldRemoveParent = function(parent)\n{\n\tvar state = this.graph.view.getState(parent);\n\t\n\treturn state != null && (this.graph.model.isEdge(state.cell) || this.graph.model.isVertex(state.cell)) &&\n\t\tthis.graph.isCellDeletable(state.cell) && this.graph.model.getChildCount(state.cell) == 0 &&\n\t\tthis.graph.isTransparentState(state);\n};\n\n/**\n * Function: destroyShapes\n * \n * Destroy the preview and highlight shapes.\n */\nmxGraphHandler.prototype.destroyShapes = function()\n{\n\t// Destroys the preview dashed rectangle\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.destroy();\n\t\tthis.shape = null;\n\t}\n\t\n\tif (this.guide != null)\n\t{\n\t\tthis.guide.destroy();\n\t\tthis.guide = null;\n\t}\n\t\n\t// Destroys the drop target highlight\n\tif (this.highlight != null)\n\t{\n\t\tthis.highlight.destroy();\n\t\tthis.highlight = null;\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxGraphHandler.prototype.destroy = function()\n{\n\tthis.graph.removeMouseListener(this);\n\tthis.graph.removeListener(this.panHandler);\n\t\n\tif (this.escapeHandler != null)\n\t{\n\t\tthis.graph.removeListener(this.escapeHandler);\n\t\tthis.escapeHandler = null;\n\t}\n\t\n\tif (this.refreshHandler != null)\n\t{\n\t\tthis.graph.getModel().removeListener(this.refreshHandler);\n\t\tthis.graph.removeListener(this.refreshHandler);\n\t\tthis.refreshHandler = null;\n\t}\n\t\n\tmxEvent.removeListener(document, 'keydown', this.keyHandler);\n\tmxEvent.removeListener(document, 'keyup', this.keyHandler);\n\t\n\tthis.destroyShapes();\n\tthis.removeHint();\n};\n\n__mxOutput.mxGraphHandler = typeof mxGraphHandler !== 'undefined' ? mxGraphHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPanningHandler\n * \n * Event handler that pans and creates popupmenus. To use the left\n * mousebutton for panning without interfering with cell moving and\n * resizing, use <isUseLeftButton> and <isIgnoreCell>. For grid size\n * steps while panning, use <useGrid>. This handler is built-into\n * <mxGraph.panningHandler> and enabled using <mxGraph.setPanning>.\n * \n * Constructor: mxPanningHandler\n * \n * Constructs an event handler that creates a <mxPopupMenu>\n * and pans the graph.\n *\n * Event: mxEvent.PAN_START\n *\n * Fires when the panning handler changes its <active> state to true. The\n * <code>event</code> property contains the corresponding <mxMouseEvent>.\n *\n * Event: mxEvent.PAN\n *\n * Fires while handle is processing events. The <code>event</code> property contains\n * the corresponding <mxMouseEvent>.\n *\n * Event: mxEvent.PAN_END\n *\n * Fires when the panning handler changes its <active> state to false. The\n * <code>event</code> property contains the corresponding <mxMouseEvent>.\n */\nfunction mxPanningHandler(graph)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.graph.addMouseListener(this);\n\n\t\t// Handles force panning event\n\t\tthis.forcePanningHandler = mxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tvar evtName = evt.getProperty('eventName');\n\t\t\tvar me = evt.getProperty('event');\n\t\t\t\n\t\t\tif (evtName == mxEvent.MOUSE_DOWN && this.isForcePanningEvent(me))\n\t\t\t{\n\t\t\t\tthis.start(me);\n\t\t\t\tthis.active = true;\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.PAN_START, 'event', me));\n\t\t\t\tme.consume();\n\t\t\t}\n\t\t});\n\n\t\tthis.graph.addListener(mxEvent.FIRE_MOUSE_EVENT, this.forcePanningHandler);\n\t\t\n\t\t// Handles pinch gestures\n\t\tthis.gestureHandler = mxUtils.bind(this, function(sender, eo)\n\t\t{\n\t\t\tif (this.isPinchEnabled())\n\t\t\t{\n\t\t\t\tvar evt = eo.getProperty('event');\n\t\t\t\t\n\t\t\t\tif (!mxEvent.isConsumed(evt) && evt.type == 'gesturestart')\n\t\t\t\t{\n\t\t\t\t\tthis.initialScale = this.graph.view.scale;\n\t\t\t\t\n\t\t\t\t\t// Forces start of panning when pinch gesture starts\n\t\t\t\t\tif (!this.active && this.mouseDownEvent != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.start(this.mouseDownEvent);\n\t\t\t\t\t\tthis.mouseDownEvent = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (evt.type == 'gestureend' && this.initialScale != null)\n\t\t\t\t{\n\t\t\t\t\tthis.initialScale = null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.initialScale != null)\n\t\t\t\t{\n\t\t\t\t\tthis.zoomGraph(evt);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.GESTURE, this.gestureHandler);\n\t\t\n\t\tthis.mouseUpListener = mxUtils.bind(this, function()\n\t\t{\n\t    \tif (this.active)\n\t    \t{\n\t    \t\tthis.reset();\n\t    \t}\n\t\t});\n\t\t\n\t\t// Stops scrolling on every mouseup anywhere in the document\n\t\tmxEvent.addListener(document, 'mouseup', this.mouseUpListener);\n\t}\n};\n\n/**\n * Extends mxEventSource.\n */\nmxPanningHandler.prototype = new mxEventSource();\nmxPanningHandler.prototype.constructor = mxPanningHandler;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxPanningHandler.prototype.graph = null;\n\n/**\n * Variable: useLeftButtonForPanning\n * \n * Specifies if panning should be active for the left mouse button.\n * Setting this to true may conflict with <mxRubberband>. Default is false.\n */\nmxPanningHandler.prototype.useLeftButtonForPanning = false;\n\n/**\n * Variable: usePopupTrigger\n * \n * Specifies if <mxEvent.isPopupTrigger> should also be used for panning.\n */\nmxPanningHandler.prototype.usePopupTrigger = true;\n\n/**\n * Variable: ignoreCell\n * \n * Specifies if panning should be active even if there is a cell under the\n * mousepointer. Default is false.\n */\nmxPanningHandler.prototype.ignoreCell = false;\n\n/**\n * Variable: previewEnabled\n * \n * Specifies if the panning should be previewed. Default is true.\n */\nmxPanningHandler.prototype.previewEnabled = true;\n\n/**\n * Variable: useGrid\n * \n * Specifies if the panning steps should be aligned to the grid size.\n * Default is false.\n */\nmxPanningHandler.prototype.useGrid = false;\n\n/**\n * Variable: panningEnabled\n * \n * Specifies if panning should be enabled. Default is true.\n */\nmxPanningHandler.prototype.panningEnabled = true;\n\n/**\n * Variable: pinchEnabled\n * \n * Specifies if pinch gestures should be handled as zoom. Default is true.\n */\nmxPanningHandler.prototype.pinchEnabled = true;\n\n/**\n * Variable: maxScale\n * \n * Specifies the maximum scale. Default is 8.\n */\nmxPanningHandler.prototype.maxScale = 8;\n\n/**\n * Variable: minScale\n * \n * Specifies the minimum scale. Default is 0.01.\n */\nmxPanningHandler.prototype.minScale = 0.01;\n\n/**\n * Variable: dx\n * \n * Holds the current horizontal offset.\n */\nmxPanningHandler.prototype.dx = null;\n\n/**\n * Variable: dy\n * \n * Holds the current vertical offset.\n */\nmxPanningHandler.prototype.dy = null;\n\n/**\n * Variable: startX\n * \n * Holds the x-coordinate of the start point.\n */\nmxPanningHandler.prototype.startX = 0;\n\n/**\n * Variable: startY\n * \n * Holds the y-coordinate of the start point.\n */\nmxPanningHandler.prototype.startY = 0;\n\n/**\n * Function: isActive\n * \n * Returns true if the handler is currently active.\n */\nmxPanningHandler.prototype.isActive = function()\n{\n\treturn this.active || this.initialScale != null;\n};\n\n/**\n * Function: isPanningEnabled\n * \n * Returns <panningEnabled>.\n */\nmxPanningHandler.prototype.isPanningEnabled = function()\n{\n\treturn this.panningEnabled;\n};\n\n/**\n * Function: setPanningEnabled\n * \n * Sets <panningEnabled>.\n */\nmxPanningHandler.prototype.setPanningEnabled = function(value)\n{\n\tthis.panningEnabled = value;\n};\n\n/**\n * Function: isPinchEnabled\n * \n * Returns <pinchEnabled>.\n */\nmxPanningHandler.prototype.isPinchEnabled = function()\n{\n\treturn this.pinchEnabled;\n};\n\n/**\n * Function: setPinchEnabled\n * \n * Sets <pinchEnabled>.\n */\nmxPanningHandler.prototype.setPinchEnabled = function(value)\n{\n\tthis.pinchEnabled = value;\n};\n\n/**\n * Function: isPanningTrigger\n * \n * Returns true if the given event is a panning trigger for the optional\n * given cell. This returns true if control-shift is pressed or if\n * <usePopupTrigger> is true and the event is a popup trigger.\n */\nmxPanningHandler.prototype.isPanningTrigger = function(me)\n{\n\tvar evt = me.getEvent();\n\t\n\treturn (this.useLeftButtonForPanning && me.getState() == null &&\n\t\t\tmxEvent.isLeftMouseButton(evt)) || (mxEvent.isControlDown(evt) &&\n\t\t\tmxEvent.isShiftDown(evt)) || (this.usePopupTrigger && mxEvent.isPopupTrigger(evt));\n};\n\n/**\n * Function: isForcePanningEvent\n * \n * Returns true if the given <mxMouseEvent> should start panning. This\n * implementation always returns true if <ignoreCell> is true or for\n * multi touch events.\n */\nmxPanningHandler.prototype.isForcePanningEvent = function(me)\n{\n\treturn this.ignoreCell || mxEvent.isMultiTouchEvent(me.getEvent());\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by initiating the panning. By consuming the event all\n * subsequent events of the gesture are redirected to this handler.\n */\nmxPanningHandler.prototype.mouseDown = function(sender, me)\n{\n\tthis.mouseDownEvent = me;\n\t\n\tif (!me.isConsumed() && this.isPanningEnabled() && !this.active && this.isPanningTrigger(me))\n\t{\n\t\tthis.start(me);\n\t\tthis.consumePanningTrigger(me);\n\t}\n};\n\n/**\n * Function: start\n * \n * Starts panning at the given event.\n */\nmxPanningHandler.prototype.start = function(me)\n{\n\tthis.dx0 = -this.graph.container.scrollLeft;\n\tthis.dy0 = -this.graph.container.scrollTop;\n\n\t// Stores the location of the trigger event\n\tthis.startX = me.getX();\n\tthis.startY = me.getY();\n\tthis.dx = null;\n\tthis.dy = null;\n\t\n\tthis.panningTrigger = true;\n};\n\n/**\n * Function: consumePanningTrigger\n * \n * Consumes the given <mxMouseEvent> if it was a panning trigger in\n * <mouseDown>. The default is to invoke <mxMouseEvent.consume>. Note that this\n * will block any further event processing. If you haven't disabled built-in\n * context menus and require immediate selection of the cell on mouseDown in\n * Safari and/or on the Mac, then use the following code:\n * \n * (code)\n * mxPanningHandler.prototype.consumePanningTrigger = function(me)\n * {\n *   if (me.evt.preventDefault)\n *   {\n *     me.evt.preventDefault();\n *   }\n *   \n *   // Stops event processing in IE\n *   me.evt.returnValue = false;\n *   \n *   // Sets local consumed state\n *   if (!mxClient.IS_SF && !mxClient.IS_MAC)\n *   {\n *     me.consumed = true;\n *   }\n * };\n * (end)\n */\nmxPanningHandler.prototype.consumePanningTrigger = function(me)\n{\n\tme.consume();\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating the panning on the graph.\n */\nmxPanningHandler.prototype.mouseMove = function(sender, me)\n{\n\tthis.dx = me.getX() - this.startX;\n\tthis.dy = me.getY() - this.startY;\n\t\n\tif (this.active)\n\t{\n\t\tif (this.previewEnabled)\n\t\t{\n\t\t\t// Applies the grid to the panning steps\n\t\t\tif (this.useGrid)\n\t\t\t{\n\t\t\t\tthis.dx = this.graph.snap(this.dx);\n\t\t\t\tthis.dy = this.graph.snap(this.dy);\n\t\t\t}\n\t\t\t\n\t\t\tthis.graph.panGraph(this.dx + this.dx0, this.dy + this.dy0);\n\t\t}\n\n\t\tthis.fireEvent(new mxEventObject(mxEvent.PAN, 'event', me));\n\t}\n\telse if (this.panningTrigger)\n\t{\n\t\tvar tmp = this.active;\n\n\t\t// Panning is activated only if the mouse is moved\n\t\t// beyond the graph tolerance\n\t\tthis.active = Math.abs(this.dx) > this.graph.tolerance || Math.abs(this.dy) > this.graph.tolerance;\n\n\t\tif (!tmp && this.active)\n\t\t{\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.PAN_START, 'event', me));\n\t\t}\n\t}\n\t\n\tif (this.active || this.panningTrigger)\n\t{\n\t\tme.consume();\n\t}\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by setting the translation on the view or showing the\n * popupmenu.\n */\nmxPanningHandler.prototype.mouseUp = function(sender, me)\n{\n\tif (this.active)\n\t{\n\t\tif (this.dx != null && this.dy != null)\n\t\t{\n\t\t\t// Ignores if scrollbars have been used for panning\n\t\t\tif (!this.graph.useScrollbarsForPanning || !mxUtils.hasScrollbars(this.graph.container))\n\t\t\t{\n\t\t\t\tvar scale = this.graph.getView().scale;\n\t\t\t\tvar t = this.graph.getView().translate;\n\t\t\t\tthis.graph.panGraph(0, 0);\n\t\t\t\tthis.panGraph(t.x + this.dx / scale, t.y + this.dy / scale);\n\t\t\t}\n\t\t\t\n\t\t\tme.consume();\n\t\t}\n\t\t\n\t\tthis.fireEvent(new mxEventObject(mxEvent.PAN_END, 'event', me));\n\t}\n\t\n\tthis.reset();\n};\n\n/**\n * Function: zoomGraph\n * \n * Zooms the graph to the given value and consumed the event if needed.\n */\nmxPanningHandler.prototype.zoomGraph = function(evt)\n{\n\tvar value = Math.round(this.initialScale * evt.scale * 100) / 100;\n\t\n\tif (this.minScale != null)\n\t{\n\t\tvalue = Math.max(this.minScale, value);\n\t}\n\t\n\tif (this.maxScale != null)\n\t{\n\t\tvalue = Math.min(this.maxScale, value);\n\t}\n\n\tif (this.graph.view.scale != value)\n\t{\n\t\tthis.graph.zoomTo(value);\n\t\tmxEvent.consume(evt);\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this handler.\n */\nmxPanningHandler.prototype.reset = function()\n{\n\tthis.panningTrigger = false;\n\tthis.mouseDownEvent = null;\n\tthis.active = false;\n\tthis.dx = null;\n\tthis.dy = null;\n};\n\n/**\n * Function: panGraph\n * \n * Pans <graph> by the given amount.\n */\nmxPanningHandler.prototype.panGraph = function(dx, dy)\n{\n\tthis.graph.getView().setTranslate(dx, dy);\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxPanningHandler.prototype.destroy = function()\n{\n\tthis.graph.removeMouseListener(this);\n\tthis.graph.removeListener(this.forcePanningHandler);\n\tthis.graph.removeListener(this.gestureHandler);\n\tmxEvent.removeListener(document, 'mouseup', this.mouseUpListener);\n};\n\n__mxOutput.mxPanningHandler = typeof mxPanningHandler !== 'undefined' ? mxPanningHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPopupMenuHandler\n * \n * Event handler that creates popupmenus.\n * \n * Constructor: mxPopupMenuHandler\n * \n * Constructs an event handler that creates a <mxPopupMenu>.\n */\nfunction mxPopupMenuHandler(graph, factoryMethod)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.factoryMethod = factoryMethod;\n\t\tthis.graph.addMouseListener(this);\n\t\t\n\t\t// Does not show menu if any touch gestures take place after the trigger\n\t\tthis.gestureHandler = mxUtils.bind(this, function(sender, eo)\n\t\t{\n\t\t\tthis.inTolerance = false;\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.GESTURE, this.gestureHandler);\n\t\t\n\t\tthis.init();\n\t}\n};\n\n/**\n * Extends mxPopupMenu.\n */\nmxPopupMenuHandler.prototype = new mxPopupMenu();\nmxPopupMenuHandler.prototype.constructor = mxPopupMenuHandler;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxPopupMenuHandler.prototype.graph = null;\n\n/**\n * Variable: selectOnPopup\n * \n * Specifies if cells should be selected if a popupmenu is displayed for\n * them. Default is true.\n */\nmxPopupMenuHandler.prototype.selectOnPopup = true;\n\n/**\n * Variable: clearSelectionOnBackground\n * \n * Specifies if cells should be deselected if a popupmenu is displayed for\n * the diagram background. Default is true.\n */\nmxPopupMenuHandler.prototype.clearSelectionOnBackground = true;\n\n/**\n * Variable: triggerX\n * \n * X-coordinate of the mouse down event.\n */\nmxPopupMenuHandler.prototype.triggerX = null;\n\n/**\n * Variable: triggerY\n * \n * Y-coordinate of the mouse down event.\n */\nmxPopupMenuHandler.prototype.triggerY = null;\n\n/**\n * Variable: screenX\n * \n * Screen X-coordinate of the mouse down event.\n */\nmxPopupMenuHandler.prototype.screenX = null;\n\n/**\n * Variable: screenY\n * \n * Screen Y-coordinate of the mouse down event.\n */\nmxPopupMenuHandler.prototype.screenY = null;\n\n/**\n * Function: init\n * \n * Initializes the shapes required for this vertex handler.\n */\nmxPopupMenuHandler.prototype.init = function()\n{\n\t// Supercall\n\tmxPopupMenu.prototype.init.apply(this);\n\n\t// Hides the tooltip if the mouse is over\n\t// the context menu\n\tmxEvent.addGestureListeners(this.div, mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.graph.tooltipHandler.hide();\n\t}));\n};\n\n/**\n * Function: isSelectOnPopup\n * \n * Hook for returning if a cell should be selected for a given <mxMouseEvent>.\n * This implementation returns <selectOnPopup>.\n */\nmxPopupMenuHandler.prototype.isSelectOnPopup = function(me)\n{\n\treturn this.selectOnPopup;\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by initiating the panning. By consuming the event all\n * subsequent events of the gesture are redirected to this handler.\n */\nmxPopupMenuHandler.prototype.mouseDown = function(sender, me)\n{\n\tif (this.isEnabled() && !mxEvent.isMultiTouchEvent(me.getEvent()))\n\t{\n\t\t// Hides the popupmenu if is is being displayed\n\t\tthis.hideMenu();\n\t\tthis.triggerX = me.getGraphX();\n\t\tthis.triggerY = me.getGraphY();\n\t\tthis.screenX = mxEvent.getMainEvent(me.getEvent()).screenX;\n\t\tthis.screenY = mxEvent.getMainEvent(me.getEvent()).screenY;\n\t\tthis.popupTrigger = this.isPopupTrigger(me);\n\t\tthis.inTolerance = true;\n\t}\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating the panning on the graph.\n */\nmxPopupMenuHandler.prototype.mouseMove = function(sender, me)\n{\n\t// Popup trigger may change on mouseUp so ignore it\n\tif (this.inTolerance && this.screenX != null && this.screenY != null)\n\t{\n\t\tif (Math.abs(mxEvent.getMainEvent(me.getEvent()).screenX - this.screenX) > this.graph.tolerance ||\n\t\t\tMath.abs(mxEvent.getMainEvent(me.getEvent()).screenY - this.screenY) > this.graph.tolerance)\n\t\t{\n\t\t\tthis.inTolerance = false;\n\t\t}\n\t}\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by setting the translation on the view or showing the\n * popupmenu.\n */\nmxPopupMenuHandler.prototype.mouseUp = function(sender, me)\n{\n\tif (this.popupTrigger && this.inTolerance && this.triggerX != null && this.triggerY != null)\n\t{\n\t\tvar cell = this.getCellForPopupEvent(me);\n\n\t\t// Selects the cell for which the context menu is being displayed\n\t\tif (this.graph.isEnabled() && this.isSelectOnPopup(me) &&\n\t\t\tcell != null && !this.graph.isCellSelected(cell))\n\t\t{\n\t\t\tthis.graph.setSelectionCell(cell);\n\t\t}\n\t\telse if (this.clearSelectionOnBackground && cell == null)\n\t\t{\n\t\t\tthis.graph.clearSelection();\n\t\t}\n\t\t\n\t\t// Hides the tooltip if there is one\n\t\tthis.graph.tooltipHandler.hide();\n\n\t\t// Menu is shifted by 1 pixel so that the mouse up event\n\t\t// is routed via the underlying shape instead of the DIV\n\t\tvar origin = mxUtils.getScrollOrigin();\n\t\tthis.popup(me.getX() + origin.x + 1, me.getY() + origin.y + 1, cell, me.getEvent());\n\t\tme.consume();\n\t}\n\t\n\tthis.popupTrigger = false;\n\tthis.inTolerance = false;\n};\n\n/**\n * Function: getCellForPopupEvent\n * \n * Hook to return the cell for the mouse up popup trigger handling.\n */\nmxPopupMenuHandler.prototype.getCellForPopupEvent = function(me)\n{\n\treturn me.getCell();\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxPopupMenuHandler.prototype.destroy = function()\n{\n\tthis.graph.removeMouseListener(this);\n\tthis.graph.removeListener(this.gestureHandler);\n\t\n\t// Supercall\n\tmxPopupMenu.prototype.destroy.apply(this);\n};\n\n__mxOutput.mxPopupMenuHandler = typeof mxPopupMenuHandler !== 'undefined' ? mxPopupMenuHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCellMarker\n * \n * A helper class to process mouse locations and highlight cells.\n * \n * Helper class to highlight cells. To add a cell marker to an existing graph\n * for highlighting all cells, the following code is used:\n * \n * (code)\n * var marker = new mxCellMarker(graph);\n * graph.addMouseListener({\n *   mouseDown: function() {},\n *   mouseMove: function(sender, me)\n *   {\n *     marker.process(me);\n *   },\n *   mouseUp: function() {}\n * });\n * (end)\n *\n * Event: mxEvent.MARK\n * \n * Fires after a cell has been marked or unmarked. The <code>state</code>\n * property contains the marked <mxCellState> or null if no state is marked.\n * \n * Constructor: mxCellMarker\n * \n * Constructs a new cell marker.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * validColor - Optional marker color for valid states. Default is\n * <mxConstants.DEFAULT_VALID_COLOR>.\n * invalidColor - Optional marker color for invalid states. Default is\n * <mxConstants.DEFAULT_INVALID_COLOR>.\n * hotspot - Portion of the width and hight where a state intersects a\n * given coordinate pair. A value of 0 means always highlight. Default is\n * <mxConstants.DEFAULT_HOTSPOT>.\n */\nfunction mxCellMarker(graph, validColor, invalidColor, hotspot)\n{\n\tmxEventSource.call(this);\n\t\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.validColor = (validColor != null) ? validColor : mxConstants.DEFAULT_VALID_COLOR;\n\t\tthis.invalidColor = (invalidColor != null) ? invalidColor : mxConstants.DEFAULT_INVALID_COLOR;\n\t\tthis.hotspot = (hotspot != null) ? hotspot : mxConstants.DEFAULT_HOTSPOT;\n\t\t\n\t\tthis.highlight = new mxCellHighlight(graph);\n\t}\n};\n\n/**\n * Extends mxEventSource.\n */\nmxUtils.extend(mxCellMarker, mxEventSource);\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxCellMarker.prototype.graph = null;\n\n/**\n * Variable: enabled\n * \n * Specifies if the marker is enabled. Default is true.\n */\nmxCellMarker.prototype.enabled = true;\n\n/**\n * Variable: hotspot\n * \n * Specifies the portion of the width and height that should trigger\n * a highlight. The area around the center of the cell to be marked is used\n * as the hotspot. Possible values are between 0 and 1. Default is\n * mxConstants.DEFAULT_HOTSPOT.\n */\nmxCellMarker.prototype.hotspot = mxConstants.DEFAULT_HOTSPOT; \n\n/**\n * Variable: hotspotEnabled\n * \n * Specifies if the hotspot is enabled. Default is false.\n */\nmxCellMarker.prototype.hotspotEnabled = false;\n\n/**\n * Variable: validColor\n * \n * Holds the valid marker color.\n */\nmxCellMarker.prototype.validColor = null;\n\n/**\n * Variable: invalidColor\n * \n * Holds the invalid marker color.\n */\nmxCellMarker.prototype.invalidColor = null;\n\n/**\n * Variable: currentColor\n * \n * Holds the current marker color.\n */\nmxCellMarker.prototype.currentColor = null;\n\n/**\n * Variable: validState\n * \n * Holds the marked <mxCellState> if it is valid.\n */\nmxCellMarker.prototype.validState = null; \n\n/**\n * Variable: markedState\n * \n * Holds the marked <mxCellState>.\n */\nmxCellMarker.prototype.markedState = null;\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n * \n * Parameters:\n * \n * enabled - Boolean that specifies the new enabled state.\n */\nmxCellMarker.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxCellMarker.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setHotspot\n * \n * Sets the <hotspot>.\n */\nmxCellMarker.prototype.setHotspot = function(hotspot)\n{\n\tthis.hotspot = hotspot;\n};\n\n/**\n * Function: getHotspot\n * \n * Returns the <hotspot>.\n */\nmxCellMarker.prototype.getHotspot = function()\n{\n\treturn this.hotspot;\n};\n\n/**\n * Function: setHotspotEnabled\n * \n * Specifies whether the hotspot should be used in <intersects>.\n */\nmxCellMarker.prototype.setHotspotEnabled = function(enabled)\n{\n\tthis.hotspotEnabled = enabled;\n};\n\n/**\n * Function: isHotspotEnabled\n * \n * Returns true if hotspot is used in <intersects>.\n */\nmxCellMarker.prototype.isHotspotEnabled = function()\n{\n\treturn this.hotspotEnabled;\n};\n\n/**\n * Function: hasValidState\n * \n * Returns true if <validState> is not null.\n */\nmxCellMarker.prototype.hasValidState = function()\n{\n\treturn this.validState != null;\n};\n\n/**\n * Function: getValidState\n * \n * Returns the <validState>.\n */\nmxCellMarker.prototype.getValidState = function()\n{\n\treturn this.validState;\n};\n\n/**\n * Function: getMarkedState\n * \n * Returns the <markedState>.\n */\nmxCellMarker.prototype.getMarkedState = function()\n{\n\treturn this.markedState;\n};\n\n/**\n * Function: reset\n * \n * Resets the state of the cell marker.\n */\nmxCellMarker.prototype.reset = function()\n{\n\tthis.validState = null;\n\t\n\tif (this.markedState != null)\n\t{\n\t\tthis.markedState = null;\n\t\tthis.unmark();\n\t}\n};\n\n/**\n * Function: process\n * \n * Processes the given event and cell and marks the state returned by\n * <getState> with the color returned by <getMarkerColor>. If the\n * markerColor is not null, then the state is stored in <markedState>. If\n * <isValidState> returns true, then the state is stored in <validState>\n * regardless of the marker color. The state is returned regardless of the\n * marker color and valid state. \n */\nmxCellMarker.prototype.process = function(me)\n{\n\tvar state = null;\n\t\n\tif (this.isEnabled())\n\t{\n\t\tstate = this.getState(me);\n\t\tthis.setCurrentState(state, me);\n\t}\n\t\n\treturn state;\n};\n\n/**\n * Function: setCurrentState\n * \n * Sets and marks the current valid state.\n */\nmxCellMarker.prototype.setCurrentState = function(state, me, color)\n{\n\tvar isValid = (state != null) ? this.isValidState(state) : false;\n\tcolor = (color != null) ? color : this.getMarkerColor(me.getEvent(), state, isValid);\n\t\n\tif (isValid)\n\t{\n\t\tthis.validState = state;\n\t}\n\telse\n\t{\n\t\tthis.validState = null;\n\t}\n\t\n\tif (state != this.markedState || color != this.currentColor)\n\t{\n\t\tthis.currentColor = color;\n\t\t\n\t\tif (state != null && this.currentColor != null)\n\t\t{\n\t\t\tthis.markedState = state;\n\t\t\tthis.mark();\t\t\n\t\t}\n\t\telse if (this.markedState != null)\n\t\t{\n\t\t\tthis.markedState = null;\n\t\t\tthis.unmark();\n\t\t}\n\t}\n};\n\n/**\n * Function: markCell\n * \n * Marks the given cell using the given color, or <validColor> if no color is specified.\n */\nmxCellMarker.prototype.markCell = function(cell, color)\n{\n\tvar state = this.graph.getView().getState(cell);\n\t\n\tif (state != null)\n\t{\n\t\tthis.currentColor = (color != null) ? color : this.validColor;\n\t\tthis.markedState = state;\n\t\tthis.mark();\n\t}\n};\n\n/**\n * Function: mark\n * \n * Marks the <markedState> and fires a <mark> event.\n */\nmxCellMarker.prototype.mark = function()\n{\n\tthis.highlight.setHighlightColor(this.currentColor);\n\tthis.highlight.highlight(this.markedState);\n\tthis.fireEvent(new mxEventObject(mxEvent.MARK, 'state', this.markedState));\n};\n\n/**\n * Function: unmark\n * \n * Hides the marker and fires a <mark> event.\n */\nmxCellMarker.prototype.unmark = function()\n{\n\tthis.mark();\n};\n\n/**\n * Function: isValidState\n * \n * Returns true if the given <mxCellState> is a valid state. If this\n * returns true, then the state is stored in <validState>. The return value\n * of this method is used as the argument for <getMarkerColor>.\n */\nmxCellMarker.prototype.isValidState = function(state)\n{\n\treturn true;\n};\n\n/**\n * Function: getMarkerColor\n * \n * Returns the valid- or invalidColor depending on the value of isValid.\n * The given <mxCellState> is ignored by this implementation.\n */\nmxCellMarker.prototype.getMarkerColor = function(evt, state, isValid)\n{\n\treturn (isValid) ? this.validColor : this.invalidColor;\n};\n\n/**\n * Function: getState\n * \n * Uses <getCell>, <getStateToMark> and <intersects> to return the\n * <mxCellState> for the given <mxMouseEvent>.\n */\nmxCellMarker.prototype.getState = function(me)\n{\n\tvar view = this.graph.getView();\n\tvar cell = this.getCell(me);\n\tvar state = this.getStateToMark(view.getState(cell));\n\n\treturn (state != null && this.intersects(state, me)) ? state : null;\n};\n\n/**\n * Function: getCell\n * \n * Returns the <mxCell> for the given event and cell. This returns the\n * given cell.\n */\nmxCellMarker.prototype.getCell = function(me)\n{\n\treturn me.getCell();\n};\n\n/**\n * Function: getStateToMark\n * \n * Returns the <mxCellState> to be marked for the given <mxCellState> under\n * the mouse. This returns the given state.\n */\nmxCellMarker.prototype.getStateToMark = function(state)\n{\n\treturn state;\n};\n\n/**\n * Function: intersects\n * \n * Returns true if the given coordinate pair intersects the given state.\n * This returns true if the <hotspot> is 0 or the coordinates are inside\n * the hotspot for the given cell state.\n */\nmxCellMarker.prototype.intersects = function(state, me)\n{\n\tif (this.hotspotEnabled)\n\t{\n\t\treturn mxUtils.intersectsHotspot(state, me.getGraphX(), me.getGraphY(),\n\t\t\tthis.hotspot, mxConstants.MIN_HOTSPOT_SIZE,\n\t\t\tmxConstants.MAX_HOTSPOT_SIZE);\n\t}\n\t\n\treturn true;\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxCellMarker.prototype.destroy = function()\n{\n\tthis.graph.getView().removeListener(this.resetHandler);\n\tthis.graph.getModel().removeListener(this.resetHandler);\n\tthis.highlight.destroy();\n};\n\n__mxOutput.mxCellMarker = typeof mxCellMarker !== 'undefined' ? mxCellMarker : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxSelectionCellsHandler\n * \n * An event handler that manages cell handlers and invokes their mouse event\n * processing functions.\n * \n * Group: Events\n * \n * Event: mxEvent.ADD\n * \n * Fires if a cell has been added to the selection. The <code>state</code>\n * property contains the <mxCellState> that has been added.\n * \n * Event: mxEvent.REMOVE\n * \n * Fires if a cell has been remove from the selection. The <code>state</code>\n * property contains the <mxCellState> that has been removed.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n */\nfunction mxSelectionCellsHandler(graph)\n{\n\tmxEventSource.call(this);\n\t\n\tthis.graph = graph;\n\tthis.handlers = new mxDictionary();\n\tthis.graph.addMouseListener(this);\n\t\n\tthis.refreshHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.refresh();\n\t\t}\n\t});\n\t\n\tthis.graph.getSelectionModel().addListener(mxEvent.CHANGE, this.refreshHandler);\n\tthis.graph.getModel().addListener(mxEvent.CHANGE, this.refreshHandler);\n\tthis.graph.getView().addListener(mxEvent.SCALE, this.refreshHandler);\n\tthis.graph.getView().addListener(mxEvent.TRANSLATE, this.refreshHandler);\n\tthis.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE, this.refreshHandler);\n\tthis.graph.getView().addListener(mxEvent.DOWN, this.refreshHandler);\n\tthis.graph.getView().addListener(mxEvent.UP, this.refreshHandler);\n};\n\n/**\n * Extends mxEventSource.\n */\nmxUtils.extend(mxSelectionCellsHandler, mxEventSource);\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxSelectionCellsHandler.prototype.graph = null;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxSelectionCellsHandler.prototype.enabled = true;\n\n/**\n * Variable: refreshHandler\n * \n * Keeps a reference to an event listener for later removal.\n */\nmxSelectionCellsHandler.prototype.refreshHandler = null;\n\n/**\n * Variable: maxHandlers\n * \n * Defines the maximum number of handlers to paint individually. Default is 100.\n */\nmxSelectionCellsHandler.prototype.maxHandlers = 100;\n\n/**\n * Variable: handlers\n * \n * <mxDictionary> that maps from cells to handlers.\n */\nmxSelectionCellsHandler.prototype.handlers = null;\n\n/**\n * Function: isEnabled\n * \n * Returns <enabled>.\n */\nmxSelectionCellsHandler.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Sets <enabled>.\n */\nmxSelectionCellsHandler.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: getHandler\n * \n * Returns the handler for the given cell.\n */\nmxSelectionCellsHandler.prototype.getHandler = function(cell)\n{\n\treturn this.handlers.get(cell);\n};\n\n/**\n * Function: isHandled\n * \n * Returns true if the given cell has a handler.\n */\nmxSelectionCellsHandler.prototype.isHandled = function(cell)\n{\n\treturn this.getHandler(cell) != null;\n};\n\n/**\n * Function: reset\n * \n * Resets all handlers.\n */\nmxSelectionCellsHandler.prototype.reset = function()\n{\n\tthis.handlers.visit(function(key, handler)\n\t{\n\t\thandler.reset.apply(handler);\n\t});\n};\n\n/**\n * Function: getHandledSelectionCells\n * \n * Reloads or updates all handlers.\n */\nmxSelectionCellsHandler.prototype.getHandledSelectionCells = function()\n{\n\treturn this.graph.getSelectionCells();\n};\n\n/**\n * Function: refresh\n * \n * Reloads or updates all handlers.\n */\nmxSelectionCellsHandler.prototype.refresh = function()\n{\n\t// Removes all existing handlers\n\tvar oldHandlers = this.handlers;\n\tthis.handlers = new mxDictionary();\n\t\n\t// Creates handles for all selection cells\n\tvar tmp = mxUtils.sortCells(this.getHandledSelectionCells(), false);\n\n\t// Destroys or updates old handlers\n\tfor (var i = 0; i < tmp.length; i++)\n\t{\n\t\tvar state = this.graph.view.getState(tmp[i]);\n\n\t\tif (state != null)\n\t\t{\n\t\t\tvar handler = oldHandlers.remove(tmp[i]);\n\n\t\t\tif (handler != null)\n\t\t\t{\n\t\t\t\tif (handler.state != state)\n\t\t\t\t{\n\t\t\t\t\thandler.destroy();\n\t\t\t\t\thandler = null;\n\t\t\t\t}\n\t\t\t\telse if (!this.isHandlerActive(handler))\n\t\t\t\t{\n\t\t\t\t\tif (handler.refresh != null)\n\t\t\t\t\t{\n\t\t\t\t\t\thandler.refresh();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\thandler.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (handler != null)\n\t\t\t{\n\t\t\t\tthis.handlers.put(tmp[i], handler);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Destroys unused handlers\n\toldHandlers.visit(mxUtils.bind(this, function(key, handler)\n\t{\n\t\tthis.fireEvent(new mxEventObject(mxEvent.REMOVE, 'state', handler.state));\n\t\thandler.destroy();\n\t}));\n\t\n\t// Creates new handlers and updates parent highlight on existing handlers\n\tfor (var i = 0; i < tmp.length; i++)\n\t{\n\t\tvar state = this.graph.view.getState(tmp[i]);\n\n\t\tif (state != null)\n\t\t{\n\t\t\tvar handler = this.handlers.get(tmp[i]);\n\n\t\t\tif (handler == null)\n\t\t\t{\n\t\t\t\thandler = this.graph.createHandler(state);\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.ADD, 'state', state));\n\t\t\t\tthis.handlers.put(tmp[i], handler);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thandler.updateParentHighlight();\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: isHandlerActive\n * \n * Returns true if the given handler is active and should not be redrawn.\n */\nmxSelectionCellsHandler.prototype.isHandlerActive = function(handler)\n{\n\treturn handler.index != null;\n};\n\n/**\n * Function: updateHandler\n * \n * Updates the handler for the given shape if one exists.\n */\nmxSelectionCellsHandler.prototype.updateHandler = function(state)\n{\n\tvar handler = this.handlers.remove(state.cell);\n\t\n\tif (handler != null)\n\t{\n\t\t// Transfers the current state to the new handler\n\t\tvar index = handler.index;\n\t\tvar x = handler.startX;\n\t\tvar y = handler.startY;\n\t\t\n\t\thandler.destroy();\n\t\thandler = this.graph.createHandler(state);\n\n\t\tif (handler != null)\n\t\t{\n\t\t\tthis.handlers.put(state.cell, handler);\n\t\t\t\n\t\t\tif (index != null && x != null && y != null)\n\t\t\t{\n\t\t\t\thandler.start(x, y, index);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: mouseDown\n * \n * Redirects the given event to the handlers.\n */\nmxSelectionCellsHandler.prototype.mouseDown = function(sender, me)\n{\n\tif (this.graph.isEnabled() && this.isEnabled())\n\t{\n\t\tvar args = [sender, me];\n\n\t\tthis.handlers.visit(function(key, handler)\n\t\t{\n\t\t\thandler.mouseDown.apply(handler, args);\n\t\t});\n\t}\n};\n\n/**\n * Function: mouseMove\n * \n * Redirects the given event to the handlers.\n */\nmxSelectionCellsHandler.prototype.mouseMove = function(sender, me)\n{\n\tif (this.graph.isEnabled() && this.isEnabled())\n\t{\n\t\tvar args = [sender, me];\n\n\t\tthis.handlers.visit(function(key, handler)\n\t\t{\n\t\t\thandler.mouseMove.apply(handler, args);\n\t\t});\n\t}\n};\n\n/**\n * Function: mouseUp\n * \n * Redirects the given event to the handlers.\n */\nmxSelectionCellsHandler.prototype.mouseUp = function(sender, me)\n{\n\tif (this.graph.isEnabled() && this.isEnabled())\n\t{\n\t\tvar args = [sender, me];\n\n\t\tthis.handlers.visit(function(key, handler)\n\t\t{\n\t\t\thandler.mouseUp.apply(handler, args);\n\t\t});\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxSelectionCellsHandler.prototype.destroy = function()\n{\n\tthis.graph.removeMouseListener(this);\n\t\n\tif (this.refreshHandler != null)\n\t{\n\t\tthis.graph.getSelectionModel().removeListener(this.refreshHandler);\n\t\tthis.graph.getModel().removeListener(this.refreshHandler);\n\t\tthis.graph.getView().removeListener(this.refreshHandler);\n\t\tthis.refreshHandler = null;\n\t}\n};\n\n__mxOutput.mxSelectionCellsHandler = typeof mxSelectionCellsHandler !== 'undefined' ? mxSelectionCellsHandler : undefined;\n\n/**\n * Copyright (c) 2006-2016, JGraph Ltd\n * Copyright (c) 2006-2016, Gaudenz Alder\n */\n/**\n * Class: mxConnectionHandler\n *\n * Graph event handler that creates new connections. Uses <mxTerminalMarker>\n * for finding and highlighting the source and target vertices and\n * <factoryMethod> to create the edge instance. This handler is built-into\n * <mxGraph.connectionHandler> and enabled using <mxGraph.setConnectable>.\n *\n * Example:\n * \n * (code)\n * new mxConnectionHandler(graph, function(source, target, style)\n * {\n *   edge = new mxCell('', new mxGeometry());\n *   edge.setEdge(true);\n *   edge.setStyle(style);\n *   edge.geometry.relative = true;\n *   return edge;\n * });\n * (end)\n * \n * Here is an alternative solution that just sets a specific user object for\n * new edges by overriding <insertEdge>.\n *\n * (code)\n * mxConnectionHandlerInsertEdge = mxConnectionHandler.prototype.insertEdge;\n * mxConnectionHandler.prototype.insertEdge = function(parent, id, value, source, target, style)\n * {\n *   value = 'Test';\n * \n *   return mxConnectionHandlerInsertEdge.apply(this, arguments);\n * };\n * (end)\n * \n * Using images to trigger connections:\n * \n * This handler uses mxTerminalMarker to find the source and target cell for\n * the new connection and creates a new edge using <connect>. The new edge is\n * created using <createEdge> which in turn uses <factoryMethod> or creates a\n * new default edge.\n * \n * The handler uses a \"highlight-paradigm\" for indicating if a cell is being\n * used as a source or target terminal, as seen in other diagramming products.\n * In order to allow both, moving and connecting cells at the same time,\n * <mxConstants.DEFAULT_HOTSPOT> is used in the handler to determine the hotspot\n * of a cell, that is, the region of the cell which is used to trigger a new\n * connection. The constant is a value between 0 and 1 that specifies the\n * amount of the width and height around the center to be used for the hotspot\n * of a cell and its default value is 0.5. In addition,\n * <mxConstants.MIN_HOTSPOT_SIZE> defines the minimum number of pixels for the\n * width and height of the hotspot.\n * \n * This solution, while standards compliant, may be somewhat confusing because\n * there is no visual indicator for the hotspot and the highlight is seen to\n * switch on and off while the mouse is being moved in and out. Furthermore,\n * this paradigm does not allow to create different connections depending on\n * the highlighted hotspot as there is only one hotspot per cell and it\n * normally does not allow cells to be moved and connected at the same time as\n * there is no clear indication of the connectable area of the cell.\n * \n * To come across these issues, the handle has an additional <createIcons> hook\n * with a default implementation that allows to create one icon to be used to\n * trigger new connections. If this icon is specified, then new connections can\n * only be created if the image is clicked while the cell is being highlighted.\n * The <createIcons> hook may be overridden to create more than one\n * <mxImageShape> for creating new connections, but the default implementation\n * supports one image and is used as follows:\n * \n * In order to display the \"connect image\" whenever the mouse is over the cell,\n * an DEFAULT_HOTSPOT of 1 should be used:\n * \n * (code)\n * mxConstants.DEFAULT_HOTSPOT = 1;\n * (end)\n * \n * In order to avoid confusion with the highlighting, the highlight color\n * should not be used with a connect image:\n * \n * (code)\n * mxConstants.HIGHLIGHT_COLOR = null;\n * (end)\n * \n * To install the image, the connectImage field of the mxConnectionHandler must\n * be assigned a new <mxImage> instance:\n * \n * (code)\n * mxConnectionHandler.prototype.connectImage = new mxImage('images/green-dot.gif', 14, 14);\n * (end)\n * \n * This will use the green-dot.gif with a width and height of 14 pixels as the\n * image to trigger new connections. In createIcons the icon field of the\n * handler will be set in order to remember the icon that has been clicked for\n * creating the new connection. This field will be available under selectedIcon\n * in the connect method, which may be overridden to take the icon that\n * triggered the new connection into account. This is useful if more than one\n * icon may be used to create a connection.\n *\n * Group: Events\n * \n * Event: mxEvent.START\n * \n * Fires when a new connection is being created by the user. The <code>state</code>\n * property contains the state of the source cell.\n * \n * Event: mxEvent.CONNECT\n * \n * Fires between begin- and endUpdate in <connect>. The <code>cell</code>\n * property contains the inserted edge, the <code>event</code> and <code>target</code> \n * properties contain the respective arguments that were passed to <connect> (where\n * target corresponds to the dropTarget argument). Finally, the <code>terminal</code>\n * property corresponds to the target argument in <connect> or the clone of the source\n * terminal if <createTarget> is enabled.\n * \n * Note that the target is the cell under the mouse where the mouse button was released.\n * Depending on the logic in the handler, this doesn't necessarily have to be the target\n * of the inserted edge. To print the source, target or any optional ports IDs that the\n * edge is connected to, the following code can be used. To get more details about the\n * actual connection point, <mxGraph.getConnectionConstraint> can be used. To resolve\n * the port IDs, use <mxGraphModel.getCell>.\n * \n * (code)\n * graph.connectionHandler.addListener(mxEvent.CONNECT, function(sender, evt)\n * {\n *   var edge = evt.getProperty('cell');\n *   var source = graph.getModel().getTerminal(edge, true);\n *   var target = graph.getModel().getTerminal(edge, false);\n *   \n *   var style = graph.getCellStyle(edge);\n *   var sourcePortId = style[mxConstants.STYLE_SOURCE_PORT];\n *   var targetPortId = style[mxConstants.STYLE_TARGET_PORT];\n *   \n *   mxLog.show();\n *   mxLog.debug('connect', edge, source.id, target.id, sourcePortId, targetPortId);\n * });\n * (end)\n *\n * Event: mxEvent.RESET\n * \n * Fires when the <reset> method is invoked.\n *\n * Constructor: mxConnectionHandler\n *\n * Constructs an event handler that connects vertices using the specified\n * factory method to create the new edges. Modify\n * <mxConstants.ACTIVE_REGION> to setup the region on a cell which triggers\n * the creation of a new connection or use connect icons as explained\n * above.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * factoryMethod - Optional function to create the edge. The function takes\n * the source and target <mxCell> as the first and second argument and an\n * optional cell style from the preview as the third argument. It returns\n * the <mxCell> that represents the new edge.\n */\nfunction mxConnectionHandler(graph, factoryMethod)\n{\n\tmxEventSource.call(this);\n\t\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.factoryMethod = factoryMethod;\n\t\tthis.init();\n\t\t\n\t\t// Handles escape keystrokes\n\t\tthis.escapeHandler = mxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tthis.reset();\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.ESCAPE, this.escapeHandler);\n\t}\n};\n\n/**\n * Extends mxEventSource.\n */\nmxUtils.extend(mxConnectionHandler, mxEventSource);\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxConnectionHandler.prototype.graph = null;\n\n/**\n * Variable: factoryMethod\n * \n * Function that is used for creating new edges. The function takes the\n * source and target <mxCell> as the first and second argument and returns\n * a new <mxCell> that represents the edge. This is used in <createEdge>.\n */\nmxConnectionHandler.prototype.factoryMethod = true;\n\n/**\n * Variable: moveIconFront\n * \n * Specifies if icons should be displayed inside the graph container instead\n * of the overlay pane. This is used for HTML labels on vertices which hide\n * the connect icon. This has precendence over <moveIconBack> when set\n * to true. Default is false.\n */\nmxConnectionHandler.prototype.moveIconFront = false;\n\n/**\n * Variable: moveIconBack\n * \n * Specifies if icons should be moved to the back of the overlay pane. This can\n * be set to true if the icons of the connection handler conflict with other\n * handles, such as the vertex label move handle. Default is false.\n */\nmxConnectionHandler.prototype.moveIconBack = false;\n\n/**\n * Variable: connectImage\n * \n * <mxImage> that is used to trigger the creation of a new connection. This\n * is used in <createIcons>. Default is null.\n */\nmxConnectionHandler.prototype.connectImage = null;\n\n/**\n * Variable: targetConnectImage\n * \n * Specifies if the connect icon should be centered on the target state\n * while connections are being previewed. Default is false.\n */\nmxConnectionHandler.prototype.targetConnectImage = false;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxConnectionHandler.prototype.enabled = true;\n\n/**\n * Variable: select\n * \n * Specifies if new edges should be selected. Default is true.\n */\nmxConnectionHandler.prototype.select = true;\n\n/**\n * Variable: createTarget\n * \n * Specifies if <createTargetVertex> should be called if no target was under the\n * mouse for the new connection. Setting this to true means the connection\n * will be drawn as valid if no target is under the mouse, and\n * <createTargetVertex> will be called before the connection is created between\n * the source cell and the newly created vertex in <createTargetVertex>, which\n * can be overridden to create a new target. Default is false.\n */\nmxConnectionHandler.prototype.createTarget = false;\n\n/**\n * Variable: marker\n * \n * Holds the <mxTerminalMarker> used for finding source and target cells.\n */\nmxConnectionHandler.prototype.marker = null;\n\n/**\n * Variable: constraintHandler\n * \n * Holds the <mxConstraintHandler> used for drawing and highlighting\n * constraints.\n */\nmxConnectionHandler.prototype.constraintHandler = null;\n\n/**\n * Variable: error\n * \n * Holds the current validation error while connections are being created.\n */\nmxConnectionHandler.prototype.error = null;\n\n/**\n * Variable: waypointsEnabled\n * \n * Specifies if single clicks should add waypoints on the new edge. Default is\n * false.\n */\nmxConnectionHandler.prototype.waypointsEnabled = false;\n\n/**\n * Variable: ignoreMouseDown\n * \n * Specifies if the connection handler should ignore the state of the mouse\n * button when highlighting the source. Default is false, that is, the\n * handler only highlights the source if no button is being pressed.\n */\nmxConnectionHandler.prototype.ignoreMouseDown = false;\n\n/**\n * Variable: first\n * \n * Holds the <mxPoint> where the mouseDown took place while the handler is\n * active.\n */\nmxConnectionHandler.prototype.first = null;\n\n/**\n * Variable: connectIconOffset\n * \n * Holds the offset for connect icons during connection preview.\n * Default is mxPoint(0, <mxConstants.TOOLTIP_VERTICAL_OFFSET>).\n * Note that placing the icon under the mouse pointer with an\n * offset of (0,0) will affect hit detection.\n */\nmxConnectionHandler.prototype.connectIconOffset = new mxPoint(0, mxConstants.TOOLTIP_VERTICAL_OFFSET);\n\n/**\n * Variable: edgeState\n * \n * Optional <mxCellState> that represents the preview edge while the\n * handler is active. This is created in <createEdgeState>.\n */\nmxConnectionHandler.prototype.edgeState = null;\n\n/**\n * Variable: changeHandler\n * \n * Holds the change event listener for later removal.\n */\nmxConnectionHandler.prototype.changeHandler = null;\n\n/**\n * Variable: drillHandler\n * \n * Holds the drill event listener for later removal.\n */\nmxConnectionHandler.prototype.drillHandler = null;\n\n/**\n * Variable: mouseDownCounter\n * \n * Counts the number of mouseDown events since the start. The initial mouse\n * down event counts as 1.\n */\nmxConnectionHandler.prototype.mouseDownCounter = 0;\n\n/**\n * Variable: movePreviewAway\n * \n * Switch to enable moving the preview away from the mousepointer. This is required in browsers\n * where the preview cannot be made transparent to events and if the built-in hit detection on\n * the HTML elements in the page should be used. Default is the value of <mxClient.IS_VML>.\n */\nmxConnectionHandler.prototype.movePreviewAway = mxClient.IS_VML;\n\n/**\n * Variable: outlineConnect\n * \n * Specifies if connections to the outline of a highlighted target should be\n * enabled. This will allow to place the connection point along the outline of\n * the highlighted target. Default is false.\n */\nmxConnectionHandler.prototype.outlineConnect = false;\n\n/**\n * Variable: livePreview\n * \n * Specifies if the actual shape of the edge state should be used for the preview.\n * Default is false. (Ignored if no edge state is created in <createEdgeState>.)\n */\nmxConnectionHandler.prototype.livePreview = false;\n\n/**\n * Variable: cursor\n * \n * Specifies the cursor to be used while the handler is active. Default is null.\n */\nmxConnectionHandler.prototype.cursor = null;\n\n/**\n * Variable: insertBeforeSource\n * \n * Specifies if new edges should be inserted before the source vertex in the\n * cell hierarchy. Default is false for backwards compatibility.\n */\nmxConnectionHandler.prototype.insertBeforeSource = false;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxConnectionHandler.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\t\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n * \n * Parameters:\n * \n * enabled - Boolean that specifies the new enabled state.\n */\nmxConnectionHandler.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isInsertBefore\n * \n * Returns <insertBeforeSource> for non-loops and false for loops.\n *\n * Parameters:\n * \n * edge - <mxCell> that represents the edge to be inserted.\n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n * evt - Mousedown event of the connect gesture.\n * dropTarget - <mxCell> that represents the cell under the mouse when it was\n * released.\n */\nmxConnectionHandler.prototype.isInsertBefore = function(edge, source, target, evt, dropTarget)\n{\n\treturn this.insertBeforeSource && source != target;\n};\n\n/**\n * Function: isCreateTarget\n * \n * Returns <createTarget>.\n *\n * Parameters:\n *\n * evt - Current active native pointer event.\n */\nmxConnectionHandler.prototype.isCreateTarget = function(evt)\n{\n\treturn this.createTarget;\n};\n\n/**\n * Function: setCreateTarget\n * \n * Sets <createTarget>.\n */\nmxConnectionHandler.prototype.setCreateTarget = function(value)\n{\n\tthis.createTarget = value;\n};\n\n/**\n * Function: createShape\n * \n * Creates the preview shape for new connections.\n */\nmxConnectionHandler.prototype.createShape = function()\n{\n\t// Creates the edge preview\n\tvar shape = (this.livePreview && this.edgeState != null) ?\n\t\tthis.graph.cellRenderer.createShape(this.edgeState) :\n\t\tnew mxPolyline([], mxConstants.INVALID_COLOR);\n\tshape.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\tmxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\tshape.scale = this.graph.view.scale;\n\tshape.pointerEvents = false;\n\tshape.isDashed = true;\n\tshape.init(this.graph.getView().getOverlayPane());\n\tmxEvent.redirectMouseEvents(shape.node, this.graph, null);\n\n\treturn shape;\n};\n\n/**\n * Function: init\n * \n * Initializes the shapes required for this connection handler. This should\n * be invoked if <mxGraph.container> is assigned after the connection\n * handler has been created.\n */\nmxConnectionHandler.prototype.init = function()\n{\n\tthis.graph.addMouseListener(this);\n\tthis.marker = this.createMarker();\n\tthis.constraintHandler = new mxConstraintHandler(this.graph);\n\n\t// Redraws the icons if the graph changes\n\tthis.changeHandler = mxUtils.bind(this, function(sender)\n\t{\n\t\tif (this.iconState != null)\n\t\t{\n\t\t\tthis.iconState = this.graph.getView().getState(this.iconState.cell);\n\t\t}\n\t\t\n\t\tif (this.iconState != null)\n\t\t{\n\t\t\tthis.redrawIcons(this.icons, this.iconState);\n\t\t\tthis.constraintHandler.reset();\n\t\t}\n\t\telse if (this.previous != null && this.graph.view.getState(this.previous.cell) == null)\n\t\t{\n\t\t\tthis.reset();\n\t\t}\n\t});\n\t\n\tthis.graph.getModel().addListener(mxEvent.CHANGE, this.changeHandler);\n\tthis.graph.getView().addListener(mxEvent.SCALE, this.changeHandler);\n\tthis.graph.getView().addListener(mxEvent.TRANSLATE, this.changeHandler);\n\tthis.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE, this.changeHandler);\n\t\n\t// Removes the icon if we step into/up or start editing\n\tthis.drillHandler = mxUtils.bind(this, function(sender)\n\t{\n\t\tthis.reset();\n\t});\n\t\n\tthis.graph.addListener(mxEvent.START_EDITING, this.drillHandler);\n\tthis.graph.getView().addListener(mxEvent.DOWN, this.drillHandler);\n\tthis.graph.getView().addListener(mxEvent.UP, this.drillHandler);\n};\n\n/**\n * Function: isConnectableCell\n * \n * Returns true if the given cell is connectable. This is a hook to\n * disable floating connections. This implementation returns true.\n */\nmxConnectionHandler.prototype.isConnectableCell = function(cell)\n{\n\treturn true;\n};\n\n/**\n * Function: createMarker\n * \n * Creates and returns the <mxCellMarker> used in <marker>.\n */\nmxConnectionHandler.prototype.createMarker = function()\n{\n\tvar marker = new mxCellMarker(this.graph);\n\tmarker.hotspotEnabled = true;\n\n\t// Overrides to return cell at location only if valid (so that\n\t// there is no highlight for invalid cells)\n\tmarker.getCell = mxUtils.bind(this, function(me)\n\t{\n\t\tvar cell = mxCellMarker.prototype.getCell.apply(marker, arguments);\n\t\tthis.error = null;\n\t\t\n\t\t// Checks for cell at preview point (with grid)\n\t\tif (cell == null && this.currentPoint != null)\n\t\t{\n\t\t\tcell = this.graph.getCellAt(this.currentPoint.x, this.currentPoint.y);\n\t\t}\n\t\t\n\t\t// Uses connectable parent vertex if one exists\n\t\tif (cell != null && !this.graph.isCellConnectable(cell))\n\t\t{\n\t\t\tvar parent = this.graph.getModel().getParent(cell);\n\t\t\t\n\t\t\tif (this.graph.getModel().isVertex(parent) && this.graph.isCellConnectable(parent))\n\t\t\t{\n\t\t\t\tcell = parent;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif ((this.graph.isSwimlane(cell) && this.currentPoint != null &&\n\t\t\tthis.graph.hitsSwimlaneContent(cell, this.currentPoint.x, this.currentPoint.y)) ||\n\t\t\t!this.isConnectableCell(cell))\n\t\t{\n\t\t\tcell = null;\n\t\t}\n\t\t\n\t\tif (cell != null)\n\t\t{\n\t\t\tif (this.isConnecting())\n\t\t\t{\n\t\t\t\tif (this.previous != null)\n\t\t\t\t{\n\t\t\t\t\tthis.error = this.validateConnection(this.previous.cell, cell);\n\t\t\t\t\t\n\t\t\t\t\tif (this.error != null && this.error.length == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcell = null;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Enables create target inside groups\n\t\t\t\t\t\tif (this.isCreateTarget(me.getEvent()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.error = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!this.isValidSource(cell, me))\n\t\t\t{\n\t\t\t\tcell = null;\n\t\t\t}\n\t\t}\n\t\telse if (this.isConnecting() && !this.isCreateTarget(me.getEvent()) &&\n\t\t\t\t!this.graph.allowDanglingEdges)\n\t\t{\n\t\t\tthis.error = '';\n\t\t}\n\n\t\treturn cell;\n\t});\n\n\t// Sets the highlight color according to validateConnection\n\tmarker.isValidState = mxUtils.bind(this, function(state)\n\t{\n\t\tif (this.isConnecting())\n\t\t{\n\t\t\treturn this.error == null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn mxCellMarker.prototype.isValidState.apply(marker, arguments);\n\t\t}\n\t});\n\n\t// Overrides to use marker color only in highlight mode or for\n\t// target selection\n\tmarker.getMarkerColor = mxUtils.bind(this, function(evt, state, isValid)\n\t{\n\t\treturn (this.connectImage == null || this.isConnecting()) ?\n\t\t\tmxCellMarker.prototype.getMarkerColor.apply(marker, arguments) :\n\t\t\tnull;\n\t});\n\n\t// Overrides to use hotspot only for source selection otherwise\n\t// intersects always returns true when over a cell\n\tmarker.intersects = mxUtils.bind(this, function(state, evt)\n\t{\n\t\tif (this.connectImage != null || this.isConnecting())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\treturn mxCellMarker.prototype.intersects.apply(marker, arguments);\n\t});\n\n\treturn marker;\n};\n\n/**\n * Function: start\n * \n * Starts a new connection for the given state and coordinates.\n */\nmxConnectionHandler.prototype.start = function(state, x, y, edgeState)\n{\n\tthis.previous = state;\n\tthis.first = new mxPoint(x, y);\n\tthis.edgeState = (edgeState != null) ? edgeState : this.createEdgeState(null);\n\t\n\t// Marks the source state\n\tthis.marker.currentColor = this.marker.validColor;\n\tthis.marker.markedState = state;\n\tthis.marker.mark();\n\n\tthis.fireEvent(new mxEventObject(mxEvent.START, 'state', this.previous));\n};\n\n/**\n * Function: isConnecting\n * \n * Returns true if the source terminal has been clicked and a new\n * connection is currently being previewed.\n */\nmxConnectionHandler.prototype.isConnecting = function()\n{\n\treturn this.first != null && this.shape != null;\n};\n\n/**\n * Function: isValidSource\n * \n * Returns <mxGraph.isValidSource> for the given source terminal.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the source terminal.\n * me - <mxMouseEvent> that is associated with this call.\n */\nmxConnectionHandler.prototype.isValidSource = function(cell, me)\n{\n\treturn this.graph.isValidSource(cell);\n};\n\n/**\n * Function: isValidTarget\n * \n * Returns true. The call to <mxGraph.isValidTarget> is implicit by calling\n * <mxGraph.getEdgeValidationError> in <validateConnection>. This is an\n * additional hook for disabling certain targets in this specific handler.\n * \n * Parameters:\n * \n * cell - <mxCell> that represents the target terminal.\n */\nmxConnectionHandler.prototype.isValidTarget = function(cell)\n{\n\treturn true;\n};\n\n/**\n * Function: validateConnection\n * \n * Returns the error message or an empty string if the connection for the\n * given source target pair is not valid. Otherwise it returns null. This\n * implementation uses <mxGraph.getEdgeValidationError>.\n * \n * Parameters:\n * \n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n */\nmxConnectionHandler.prototype.validateConnection = function(source, target)\n{\n\tif (!this.isValidTarget(target))\n\t{\n\t\treturn '';\n\t}\n\t\n\treturn this.graph.getEdgeValidationError(null, source, target);\n};\n\n/**\n * Function: getConnectImage\n * \n * Hook to return the <mxImage> used for the connection icon of the given\n * <mxCellState>. This implementation returns <connectImage>.\n * \n * Parameters:\n * \n * state - <mxCellState> whose connect image should be returned.\n */\nmxConnectionHandler.prototype.getConnectImage = function(state)\n{\n\treturn this.connectImage;\n};\n\n/**\n * Function: isMoveIconToFrontForState\n * \n * Returns true if the state has a HTML label in the graph's container, otherwise\n * it returns <moveIconFront>.\n * \n * Parameters:\n * \n * state - <mxCellState> whose connect icons should be returned.\n */\nmxConnectionHandler.prototype.isMoveIconToFrontForState = function(state)\n{\n\tif (state.text != null && state.text.node.parentNode == this.graph.container)\n\t{\n\t\treturn true;\n\t}\n\t\n\treturn this.moveIconFront;\n};\n\n/**\n * Function: createIcons\n * \n * Creates the array <mxImageShapes> that represent the connect icons for\n * the given <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> whose connect icons should be returned.\n */\nmxConnectionHandler.prototype.createIcons = function(state)\n{\n\tvar image = this.getConnectImage(state);\n\t\n\tif (image != null && state != null)\n\t{\n\t\tthis.iconState = state;\n\t\tvar icons = [];\n\n\t\t// Cannot use HTML for the connect icons because the icon receives all\n\t\t// mouse move events in IE, must use VML and SVG instead even if the\n\t\t// connect-icon appears behind the selection border and the selection\n\t\t// border consumes the events before the icon gets a chance\n\t\tvar bounds = new mxRectangle(0, 0, image.width, image.height);\n\t\tvar icon = new mxImageShape(bounds, image.src, null, null, 0);\n\t\ticon.preserveImageAspect = false;\n\t\t\n\t\tif (this.isMoveIconToFrontForState(state))\n\t\t{\n\t\t\ticon.dialect = mxConstants.DIALECT_STRICTHTML;\n\t\t\ticon.init(this.graph.container);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ticon.dialect = (this.graph.dialect == mxConstants.DIALECT_SVG) ?\n\t\t\t\tmxConstants.DIALECT_SVG : mxConstants.DIALECT_VML;\n\t\t\ticon.init(this.graph.getView().getOverlayPane());\n\n\t\t\t// Move the icon back in the overlay pane\n\t\t\tif (this.moveIconBack && icon.node.previousSibling != null)\n\t\t\t{\n\t\t\t\ticon.node.parentNode.insertBefore(icon.node, icon.node.parentNode.firstChild);\n\t\t\t}\n\t\t}\n\n\t\ticon.node.style.cursor = mxConstants.CURSOR_CONNECT;\n\n\t\t// Events transparency\n\t\tvar getState = mxUtils.bind(this, function()\n\t\t{\n\t\t\treturn (this.currentState != null) ? this.currentState : state;\n\t\t});\n\t\t\n\t\t// Updates the local icon before firing the mouse down event.\n\t\tvar mouseDown = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tif (!mxEvent.isConsumed(evt))\n\t\t\t{\n\t\t\t\tthis.icon = icon;\n\t\t\t\tthis.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,\n\t\t\t\t\tnew mxMouseEvent(evt, getState()));\n\t\t\t}\n\t\t});\n\n\t\tmxEvent.redirectMouseEvents(icon.node, this.graph, getState, mouseDown);\n\t\t\n\t\ticons.push(icon);\n\t\tthis.redrawIcons(icons, this.iconState);\n\t\t\n\t\treturn icons;\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: redrawIcons\n * \n * Redraws the given array of <mxImageShapes>.\n * \n * Parameters:\n * \n * icons - Optional array of <mxImageShapes> to be redrawn.\n */\nmxConnectionHandler.prototype.redrawIcons = function(icons, state)\n{\n\tif (icons != null && icons[0] != null && state != null)\n\t{\n\t\tvar pos = this.getIconPosition(icons[0], state);\n\t\ticons[0].bounds.x = pos.x;\n\t\ticons[0].bounds.y = pos.y;\n\t\ticons[0].redraw();\n\t}\n};\n\n/**\n * Function: getIconPosition\n * \n * Returns the center position of the given icon.\n * \n * Parameters:\n * \n * icon - The connect icon of <mxImageShape> with the mouse.\n * state - <mxCellState> under the mouse.\n */\nmxConnectionHandler.prototype.getIconPosition = function(icon, state)\n{\n\tvar scale = this.graph.getView().scale;\n\tvar cx = state.getCenterX();\n\tvar cy = state.getCenterY();\n\t\n\tif (this.graph.isSwimlane(state.cell))\n\t{\n\t\tvar size = this.graph.getStartSize(state.cell);\n\t\t\n\t\tcx = (size.width != 0) ? state.x + size.width * scale / 2 : cx;\n\t\tcy = (size.height != 0) ? state.y + size.height * scale / 2 : cy;\n\t\t\n\t\tvar alpha = mxUtils.toRadians(mxUtils.getValue(state.style, mxConstants.STYLE_ROTATION) || 0);\n\t\t\n\t\tif (alpha != 0)\n\t\t{\n\t\t\tvar cos = Math.cos(alpha);\n\t\t\tvar sin = Math.sin(alpha);\n\t\t\tvar ct = new mxPoint(state.getCenterX(), state.getCenterY());\n\t\t\tvar pt = mxUtils.getRotatedPoint(new mxPoint(cx, cy), cos, sin, ct);\n\t\t\tcx = pt.x;\n\t\t\tcy = pt.y;\n\t\t}\n\t}\n\n\treturn new mxPoint(cx - icon.bounds.width / 2,\n\t\t\tcy - icon.bounds.height / 2);\n};\n\n/**\n * Function: destroyIcons\n * \n * Destroys the connect icons and resets the respective state.\n */\nmxConnectionHandler.prototype.destroyIcons = function()\n{\n\tif (this.icons != null)\n\t{\n\t\tfor (var i = 0; i < this.icons.length; i++)\n\t\t{\n\t\t\tthis.icons[i].destroy();\n\t\t}\n\t\t\n\t\tthis.icons = null;\n\t\tthis.icon = null;\n\t\tthis.selectedIcon = null;\n\t\tthis.iconState = null;\n\t}\n};\n\n/**\n * Function: isStartEvent\n * \n * Returns true if the given mouse down event should start this handler. The\n * This implementation returns true if the event does not force marquee\n * selection, and the currentConstraint and currentFocus of the\n * <constraintHandler> are not null, or <previous> and <error> are not null and\n * <icons> is null or <icons> and <icon> are not null.\n */\nmxConnectionHandler.prototype.isStartEvent = function(me)\n{\n\treturn ((this.constraintHandler.currentFocus != null && this.constraintHandler.currentConstraint != null) ||\n\t\t(this.previous != null && this.error == null && (this.icons == null || (this.icons != null &&\n\t\tthis.icon != null))));\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by initiating a new connection.\n */\nmxConnectionHandler.prototype.mouseDown = function(sender, me)\n{\n\tthis.mouseDownCounter++;\n\t\n\tif (this.isEnabled() && this.graph.isEnabled() && !me.isConsumed() &&\n\t\t!this.isConnecting() && this.isStartEvent(me))\n\t{\n\t\tif (this.constraintHandler.currentConstraint != null &&\n\t\t\tthis.constraintHandler.currentFocus != null &&\n\t\t\tthis.constraintHandler.currentPoint != null)\n\t\t{\n\t\t\tthis.sourceConstraint = this.constraintHandler.currentConstraint;\n\t\t\tthis.previous = this.constraintHandler.currentFocus;\n\t\t\tthis.first = this.constraintHandler.currentPoint.clone();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Stores the location of the initial mousedown\n\t\t\tthis.first = new mxPoint(me.getGraphX(), me.getGraphY());\n\t\t}\n\t\n\t\tthis.edgeState = this.createEdgeState(me);\n\t\tthis.mouseDownCounter = 1;\n\t\t\n\t\tif (this.waypointsEnabled && this.shape == null)\n\t\t{\n\t\t\tthis.waypoints = null;\n\t\t\tthis.shape = this.createShape();\n\t\t\t\n\t\t\tif (this.edgeState != null)\n\t\t\t{\n\t\t\t\tthis.shape.apply(this.edgeState);\n\t\t\t}\n\t\t}\n\n\t\t// Stores the starting point in the geometry of the preview\n\t\tif (this.previous == null && this.edgeState != null)\n\t\t{\n\t\t\tvar pt = this.graph.getPointForEvent(me.getEvent());\n\t\t\tthis.edgeState.cell.geometry.setTerminalPoint(pt, true);\n\t\t}\n\t\t\n\t\tthis.fireEvent(new mxEventObject(mxEvent.START, 'state', this.previous));\n\n\t\tme.consume();\n\t}\n\n\tthis.selectedIcon = this.icon;\n\tthis.icon = null;\n};\n\n/**\n * Function: isImmediateConnectSource\n * \n * Returns true if a tap on the given source state should immediately start\n * connecting. This implementation returns true if the state is not movable\n * in the graph. \n */\nmxConnectionHandler.prototype.isImmediateConnectSource = function(state)\n{\n\treturn !this.graph.isCellMovable(state.cell);\n};\n\n/**\n * Function: createEdgeState\n * \n * Hook to return an <mxCellState> which may be used during the preview.\n * This implementation returns null.\n * \n * Use the following code to create a preview for an existing edge style:\n * \n * (code)\n * graph.connectionHandler.createEdgeState = function(me)\n * {\n *   var edge = graph.createEdge(null, null, null, null, null, 'edgeStyle=elbowEdgeStyle');\n *   \n *   return new mxCellState(this.graph.view, edge, this.graph.getCellStyle(edge));\n * };\n * (end)\n */\nmxConnectionHandler.prototype.createEdgeState = function(me)\n{\n\treturn null;\n};\n\n/**\n * Function: isOutlineConnectEvent\n * \n * Returns true if <outlineConnect> is true and the source of the event is the outline shape\n * or shift is pressed.\n */\nmxConnectionHandler.prototype.isOutlineConnectEvent = function(me)\n{\n\tvar offset = mxUtils.getOffset(this.graph.container);\n\tvar evt = me.getEvent();\n\t\n\tvar clientX = mxEvent.getClientX(evt);\n\tvar clientY = mxEvent.getClientY(evt);\n\t\n\tvar doc = document.documentElement;\n\tvar left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n\tvar top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\n\t\n\tvar gridX = this.currentPoint.x - this.graph.container.scrollLeft + offset.x - left;\n\tvar gridY = this.currentPoint.y - this.graph.container.scrollTop + offset.y - top;\n\n\treturn this.outlineConnect && !mxEvent.isShiftDown(me.getEvent()) &&\n\t\t(me.isSource(this.marker.highlight.shape) ||\n\t\t(mxEvent.isAltDown(me.getEvent()) && me.getState() != null) ||\n\t\tthis.marker.highlight.isHighlightAt(clientX, clientY) ||\n\t\t((gridX != clientX || gridY != clientY) && me.getState() == null &&\n\t\tthis.marker.highlight.isHighlightAt(gridX, gridY)));\n};\n\n/**\n * Function: updateCurrentState\n * \n * Updates the current state for a given mouse move event by using\n * the <marker>.\n */\nmxConnectionHandler.prototype.updateCurrentState = function(me, point)\n{\n\tthis.constraintHandler.update(me, this.first == null, false, (this.first == null ||\n\t\tme.isSource(this.marker.highlight.shape)) ? null : point);\n\t\n\tif (this.constraintHandler.currentFocus != null && this.constraintHandler.currentConstraint != null)\n\t{\n\t\t// Handles special case where grid is large and connection point is at actual point in which\n\t\t// case the outline is not followed as long as we're < gridSize / 2 away from that point\n\t\tif (this.marker.highlight != null && this.marker.highlight.state != null &&\n\t\t\tthis.marker.highlight.state.cell == this.constraintHandler.currentFocus.cell)\n\t\t{\n\t\t\t// Direct repaint needed if cell already highlighted\n\t\t\tif (this.marker.highlight.shape.stroke != 'transparent')\n\t\t\t{\n\t\t\t\tthis.marker.highlight.shape.stroke = 'transparent';\n\t\t\t\tthis.marker.highlight.repaint();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.marker.markCell(this.constraintHandler.currentFocus.cell, 'transparent');\n\t\t}\n\n\t\t// Updates validation state\n\t\tif (this.previous != null)\n\t\t{\n\t\t\tthis.error = this.validateConnection(this.previous.cell, this.constraintHandler.currentFocus.cell);\n\t\t\t\n\t\t\tif (this.error == null)\n\t\t\t{\n\t\t\t\tthis.currentState = this.constraintHandler.currentFocus;\n\t\t\t}\n\t\t\t\t\t\n\t\t\tif (this.error != null || (this.currentState != null &&\n\t\t\t\t!this.isCellEnabled(this.currentState.cell)))\n\t\t\t{\n\t\t\t\tthis.constraintHandler.reset();\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tif (this.graph.isIgnoreTerminalEvent(me.getEvent()))\n\t\t{\n\t\t\tthis.marker.reset();\n\t\t\tthis.currentState = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.marker.process(me);\n\t\t\tthis.currentState = this.marker.getValidState();\n\t\t}\n\t\t\t\n\t\tif (this.currentState != null && !this.isCellEnabled(this.currentState.cell))\n\t\t{\n\t\t\tthis.constraintHandler.reset();\n\t\t\tthis.marker.reset();\n\t\t\tthis.currentState = null;\n\t\t}\n\n\t\tvar outline = this.isOutlineConnectEvent(me);\n\t\t\n\t\tif (this.currentState != null && outline)\n\t\t{\n\t\t\t// Handles special case where mouse is on outline away from actual end point\n\t\t\t// in which case the grid is ignored and mouse point is used instead\n\t\t\tif (me.isSource(this.marker.highlight.shape))\n\t\t\t{\n\t\t\t\tpoint = new mxPoint(me.getGraphX(), me.getGraphY());\n\t\t\t}\n\t\t\t\n\t\t\tvar constraint = this.graph.getOutlineConstraint(point, this.currentState, me);\n\t\t\tthis.constraintHandler.setFocus(me, this.currentState, false);\n\t\t\tthis.constraintHandler.currentConstraint = constraint;\n\t\t\tthis.constraintHandler.currentPoint = point;\n\t\t}\n\n\t\tif (this.outlineConnect)\n\t\t{\n\t\t\tif (this.marker.highlight != null && this.marker.highlight.shape != null)\n\t\t\t{\n\t\t\t\tvar s = this.graph.view.scale;\n\t\t\t\t\n\t\t\t\tif (this.constraintHandler.currentConstraint != null &&\n\t\t\t\t\tthis.constraintHandler.currentFocus != null)\n\t\t\t\t{\n\t\t\t\t\tthis.marker.highlight.shape.stroke = mxConstants.OUTLINE_HIGHLIGHT_COLOR;\n\t\t\t\t\tthis.marker.highlight.shape.strokewidth = mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH / s / s;\n\t\t\t\t\tthis.marker.highlight.repaint();\n\t\t\t\t} \n\t\t\t\telse if (this.marker.hasValidState())\n\t\t\t\t{\n\t\t\t\t\t// Handles special case where actual end point of edge and current mouse point\n\t\t\t\t\t// are not equal (due to grid snapping) and there is no hit on shape or highlight\n\t\t\t\t\t// but ignores cases where parent is used for non-connectable child cells\n\t\t\t\t\tif (this.graph.isCellConnectable(me.getCell()) &&\n\t\t\t\t\t\tthis.marker.getValidState() != me.getState())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.marker.highlight.shape.stroke = 'transparent';\n\t\t\t\t\t\tthis.currentState = null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.marker.highlight.shape.stroke = mxConstants.DEFAULT_VALID_COLOR;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tthis.marker.highlight.shape.strokewidth = mxConstants.HIGHLIGHT_STROKEWIDTH / s / s;\n\t\t\t\t\tthis.marker.highlight.repaint();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: isCellEnabled\n * \n * Returns true if the given cell allows new connections to be created. This implementation\n * always returns true.\n */\nmxConnectionHandler.prototype.isCellEnabled = function(cell)\n{\n\treturn true;\n};\n\n/**\n * Function: convertWaypoint\n * \n * Converts the given point from screen coordinates to model coordinates.\n */\nmxConnectionHandler.prototype.convertWaypoint = function(point)\n{\n\tvar scale = this.graph.getView().getScale();\n\tvar tr = this.graph.getView().getTranslate();\n\t\n\tpoint.x = point.x / scale - tr.x;\n\tpoint.y = point.y / scale - tr.y;\n};\n\n/**\n * Function: snapToPreview\n * \n * Called to snap the given point to the current preview. This snaps to the\n * first point of the preview if alt is not pressed.\n */\nmxConnectionHandler.prototype.snapToPreview = function(me, point)\n{\n\tif (!mxEvent.isAltDown(me.getEvent()) && this.previous != null)\n\t{\n\t\tvar tol = this.graph.gridSize * this.graph.view.scale / 2;\t\n\t\tvar tmp = (this.sourceConstraint != null) ? this.first :\n\t\t\tnew mxPoint(this.previous.getCenterX(), this.previous.getCenterY());\n\n\t\tif (Math.abs(tmp.x - me.getGraphX()) < tol)\n\t\t{\n\t\t\tpoint.x = tmp.x;\n\t\t}\n\t\t\n\t\tif (Math.abs(tmp.y - me.getGraphY()) < tol)\n\t\t{\n\t\t\tpoint.y = tmp.y;\n\t\t}\n\t}\t\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating the preview edge or by highlighting\n * a possible source or target terminal.\n */\nmxConnectionHandler.prototype.mouseMove = function(sender, me)\n{\n\tif (!me.isConsumed() && (this.ignoreMouseDown || this.first != null || !this.graph.isMouseDown))\n\t{\n\t\t// Handles special case when handler is disabled during highlight\n\t\tif (!this.isEnabled() && this.currentState != null)\n\t\t{\n\t\t\tthis.destroyIcons();\n\t\t\tthis.currentState = null;\n\t\t}\n\n\t\tvar view = this.graph.getView();\n\t\tvar scale = view.scale;\n\t\tvar tr = view.translate;\n\t\tvar point = new mxPoint(me.getGraphX(), me.getGraphY());\n\t\tthis.error = null;\n\n\t\tif (this.graph.isGridEnabledEvent(me.getEvent()))\n\t\t{\n\t\t\tpoint = new mxPoint((this.graph.snap(point.x / scale - tr.x) + tr.x) * scale,\n\t\t\t\t(this.graph.snap(point.y / scale - tr.y) + tr.y) * scale);\n\t\t}\n\t\t\n\t\tthis.snapToPreview(me, point);\n\t\tthis.currentPoint = point;\n\t\t\n\t\tif ((this.first != null || (this.isEnabled() && this.graph.isEnabled())) &&\n\t\t\t(this.shape != null || this.first == null ||\n\t\t\tMath.abs(me.getGraphX() - this.first.x) > this.graph.tolerance ||\n\t\t\tMath.abs(me.getGraphY() - this.first.y) > this.graph.tolerance))\n\t\t{\n\t\t\tthis.updateCurrentState(me, point);\n\t\t}\n\n\t\tif (this.first != null)\n\t\t{\n\t\t\tvar constraint = null;\n\t\t\tvar current = point;\n\t\t\t\n\t\t\t// Uses the current point from the constraint handler if available\n\t\t\tif (this.constraintHandler.currentConstraint != null &&\n\t\t\t\tthis.constraintHandler.currentFocus != null &&\n\t\t\t\tthis.constraintHandler.currentPoint != null)\n\t\t\t{\n\t\t\t\tconstraint = this.constraintHandler.currentConstraint;\n\t\t\t\tcurrent = this.constraintHandler.currentPoint.clone();\n\t\t\t}\n\t\t\telse if (this.previous != null && !this.graph.isIgnoreTerminalEvent(me.getEvent()) &&\n\t\t\t\tmxEvent.isShiftDown(me.getEvent()))\n\t\t\t{\n\t\t\t\tif (Math.abs(this.previous.getCenterX() - point.x) <\n\t\t\t\t\tMath.abs(this.previous.getCenterY() - point.y))\n\t\t\t\t{\n\t\t\t\t\tpoint.x = this.previous.getCenterX();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpoint.y = this.previous.getCenterY();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar pt2 = this.first;\n\t\t\t\n\t\t\t// Moves the connect icon with the mouse\n\t\t\tif (this.selectedIcon != null)\n\t\t\t{\n\t\t\t\tvar w = this.selectedIcon.bounds.width;\n\t\t\t\tvar h = this.selectedIcon.bounds.height;\n\t\t\t\t\n\t\t\t\tif (this.currentState != null && this.targetConnectImage)\n\t\t\t\t{\n\t\t\t\t\tvar pos = this.getIconPosition(this.selectedIcon, this.currentState);\n\t\t\t\t\tthis.selectedIcon.bounds.x = pos.x;\n\t\t\t\t\tthis.selectedIcon.bounds.y = pos.y;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar bounds = new mxRectangle(me.getGraphX() + this.connectIconOffset.x,\n\t\t\t\t\t\tme.getGraphY() + this.connectIconOffset.y, w, h);\n\t\t\t\t\tthis.selectedIcon.bounds = bounds;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedIcon.redraw();\n\t\t\t}\n\n\t\t\t// Uses edge state to compute the terminal points\n\t\t\tif (this.edgeState != null)\n\t\t\t{\n\t\t\t\tthis.updateEdgeState(current, constraint);\n\t\t\t\tcurrent = this.edgeState.absolutePoints[this.edgeState.absolutePoints.length - 1];\n\t\t\t\tpt2 = this.edgeState.absolutePoints[0];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.currentState != null)\n\t\t\t\t{\n\t\t\t\t\tif (this.constraintHandler.currentConstraint == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tmp = this.getTargetPerimeterPoint(this.currentState, me);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (tmp != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrent = tmp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Computes the source perimeter point\n\t\t\t\tif (this.sourceConstraint == null && this.previous != null)\n\t\t\t\t{\n\t\t\t\t\tvar next = (this.waypoints != null && this.waypoints.length > 0) ?\n\t\t\t\t\t\t\tthis.waypoints[0] : current;\n\t\t\t\t\tvar tmp = this.getSourcePerimeterPoint(this.previous, next, me);\n\t\t\t\t\t\n\t\t\t\t\tif (tmp != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tpt2 = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Makes sure the cell under the mousepointer can be detected\n\t\t\t// by moving the preview shape away from the mouse. This\n\t\t\t// makes sure the preview shape does not prevent the detection\n\t\t\t// of the cell under the mousepointer even for slow gestures.\n\t\t\tif (this.currentState == null && this.movePreviewAway)\n\t\t\t{\n\t\t\t\tvar tmp = pt2; \n\t\t\t\t\n\t\t\t\tif (this.edgeState != null && this.edgeState.absolutePoints.length >= 2)\n\t\t\t\t{\n\t\t\t\t\tvar tmp2 = this.edgeState.absolutePoints[this.edgeState.absolutePoints.length - 2];\n\t\t\t\t\t\n\t\t\t\t\tif (tmp2 != null)\n\t\t\t\t\t{\n\t\t\t\t\t\ttmp = tmp2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar dx = current.x - tmp.x;\n\t\t\t\tvar dy = current.y - tmp.y;\n\t\t\t\t\n\t\t\t\tvar len = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\t\n\t\t\t\tif (len == 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Stores old point to reuse when creating edge\n\t\t\t\tthis.originalPoint = current.clone();\n\t\t\t\tcurrent.x -= dx * 4 / len;\n\t\t\t\tcurrent.y -= dy * 4 / len;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.originalPoint = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Creates the preview shape (lazy)\n\t\t\tif (this.shape == null)\n\t\t\t{\n\t\t\t\tvar dx = Math.abs(me.getGraphX() - this.first.x);\n\t\t\t\tvar dy = Math.abs(me.getGraphY() - this.first.y);\n\n\t\t\t\tif (dx > this.graph.tolerance || dy > this.graph.tolerance)\n\t\t\t\t{\n\t\t\t\t\tthis.shape = this.createShape();\n\n\t\t\t\t\tif (this.edgeState != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.shape.apply(this.edgeState);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Revalidates current connection\n\t\t\t\t\tthis.updateCurrentState(me, point);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Updates the points in the preview edge\n\t\t\tif (this.shape != null)\n\t\t\t{\n\t\t\t\tif (this.edgeState != null)\n\t\t\t\t{\n\t\t\t\t\tthis.shape.points = this.edgeState.absolutePoints;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar pts = [pt2];\n\t\t\t\t\t\n\t\t\t\t\tif (this.waypoints != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tpts = pts.concat(this.waypoints);\n\t\t\t\t\t}\n\n\t\t\t\t\tpts.push(current);\n\t\t\t\t\tthis.shape.points = pts;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.drawPreview();\n\t\t\t}\n\t\t\t\n\t\t\t// Makes sure endpoint of edge is visible during connect\n\t\t\tif (this.cursor != null)\n\t\t\t{\n\t\t\t\tthis.graph.container.style.cursor = this.cursor;\n\t\t\t}\n\t\t\t\n\t\t\tmxEvent.consume(me.getEvent());\n\t\t\tme.consume();\n\t\t}\n\t\telse if (!this.isEnabled() || !this.graph.isEnabled())\n\t\t{\n\t\t\tthis.constraintHandler.reset();\n\t\t}\n\t\telse if (this.previous != this.currentState && this.edgeState == null)\n\t\t{\n\t\t\tthis.destroyIcons();\n\t\t\t\n\t\t\t// Sets the cursor on the current shape\t\t\t\t\n\t\t\tif (this.currentState != null && this.error == null && this.constraintHandler.currentConstraint == null)\n\t\t\t{\n\t\t\t\tthis.icons = this.createIcons(this.currentState);\n\n\t\t\t\tif (this.icons == null)\n\t\t\t\t{\n\t\t\t\t\tthis.currentState.setCursor(mxConstants.CURSOR_CONNECT);\n\t\t\t\t\tme.consume();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.previous = this.currentState;\n\t\t}\n\t\telse if (this.previous == this.currentState && this.currentState != null && this.icons == null &&\n\t\t\t!this.graph.isMouseDown)\n\t\t{\n\t\t\t// Makes sure that no cursors are changed\n\t\t\tme.consume();\n\t\t}\n\n\t\tif (!this.graph.isMouseDown && this.currentState != null && this.icons != null)\n\t\t{\n\t\t\tvar hitsIcon = false;\n\t\t\tvar target = me.getSource();\n\t\t\t\n\t\t\tfor (var i = 0; i < this.icons.length && !hitsIcon; i++)\n\t\t\t{\n\t\t\t\thitsIcon = target == this.icons[i].node || target.parentNode == this.icons[i].node;\n\t\t\t}\n\n\t\t\tif (!hitsIcon)\n\t\t\t{\n\t\t\t\tthis.updateIcons(this.currentState, this.icons, me);\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tthis.constraintHandler.reset();\n\t}\n};\n\n/**\n * Function: updateEdgeState\n * \n * Updates <edgeState>.\n */\nmxConnectionHandler.prototype.updateEdgeState = function(current, constraint)\n{\n\t// TODO: Use generic method for writing constraint to style\n\tif (this.sourceConstraint != null && this.sourceConstraint.point != null)\n\t{\n\t\tthis.edgeState.style[mxConstants.STYLE_EXIT_X] = this.sourceConstraint.point.x;\n\t\tthis.edgeState.style[mxConstants.STYLE_EXIT_Y] = this.sourceConstraint.point.y;\n\t}\n\n\tif (constraint != null && constraint.point != null)\n\t{\n\t\tthis.edgeState.style[mxConstants.STYLE_ENTRY_X] = constraint.point.x;\n\t\tthis.edgeState.style[mxConstants.STYLE_ENTRY_Y] = constraint.point.y;\n\t}\n\telse\n\t{\n\t\tdelete this.edgeState.style[mxConstants.STYLE_ENTRY_X];\n\t\tdelete this.edgeState.style[mxConstants.STYLE_ENTRY_Y];\n\t}\n\t\n\tthis.edgeState.absolutePoints = [null, (this.currentState != null) ? null : current];\n\tthis.graph.view.updateFixedTerminalPoint(this.edgeState, this.previous, true, this.sourceConstraint);\n\t\n\tif (this.currentState != null)\n\t{\n\t\tif (constraint == null)\n\t\t{\n\t\t\tconstraint = this.graph.getConnectionConstraint(this.edgeState, this.previous, false);\n\t\t}\n\t\t\n\t\tthis.edgeState.setAbsoluteTerminalPoint(null, false);\n\t\tthis.graph.view.updateFixedTerminalPoint(this.edgeState, this.currentState, false, constraint);\n\t}\n\t\n\t// Scales and translates the waypoints to the model\n\tvar realPoints = null;\n\t\n\tif (this.waypoints != null)\n\t{\n\t\trealPoints = [];\n\t\t\n\t\tfor (var i = 0; i < this.waypoints.length; i++)\n\t\t{\n\t\t\tvar pt = this.waypoints[i].clone();\n\t\t\tthis.convertWaypoint(pt);\n\t\t\trealPoints[i] = pt;\n\t\t}\n\t}\n\t\n\tthis.graph.view.updatePoints(this.edgeState, realPoints, this.previous, this.currentState);\n\tthis.graph.view.updateFloatingTerminalPoints(this.edgeState, this.previous, this.currentState);\n};\n\n/**\n * Function: getTargetPerimeterPoint\n * \n * Returns the perimeter point for the given target state.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the target cell state.\n * me - <mxMouseEvent> that represents the mouse move.\n */\nmxConnectionHandler.prototype.getTargetPerimeterPoint = function(state, me)\n{\n\tvar result = null;\n\tvar view = state.view;\n\tvar targetPerimeter = view.getPerimeterFunction(state);\n\t\n\tif (targetPerimeter != null)\n\t{\n\t\tvar next = (this.waypoints != null && this.waypoints.length > 0) ?\n\t\t\t\tthis.waypoints[this.waypoints.length - 1] :\n\t\t\t\tnew mxPoint(this.previous.getCenterX(), this.previous.getCenterY());\n\t\tvar tmp = targetPerimeter(view.getPerimeterBounds(state),\n\t\t\tthis.edgeState, next, false);\n\t\t\t\n\t\tif (tmp != null)\n\t\t{\n\t\t\tresult = tmp;\n\t\t}\n\t}\n\telse\n\t{\n\t\tresult = new mxPoint(state.getCenterX(), state.getCenterY());\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getSourcePerimeterPoint\n * \n * Hook to update the icon position(s) based on a mouseOver event. This is\n * an empty implementation.\n * \n * Parameters:\n * \n * state - <mxCellState> that represents the target cell state.\n * next - <mxPoint> that represents the next point along the previewed edge.\n * me - <mxMouseEvent> that represents the mouse move.\n */\nmxConnectionHandler.prototype.getSourcePerimeterPoint = function(state, next, me)\n{\n\tvar result = null;\n\tvar view = state.view;\n\tvar sourcePerimeter = view.getPerimeterFunction(state);\n\tvar c = new mxPoint(state.getCenterX(), state.getCenterY());\n\t\n\tif (sourcePerimeter != null)\n\t{\n\t\tvar theta = mxUtils.getValue(state.style, mxConstants.STYLE_ROTATION, 0);\n\t\tvar rad = -theta * (Math.PI / 180);\n\t\t\n\t\tif (theta != 0)\n\t\t{\n\t\t\tnext = mxUtils.getRotatedPoint(new mxPoint(next.x, next.y), Math.cos(rad), Math.sin(rad), c);\n\t\t}\n\t\t\n\t\tvar tmp = sourcePerimeter(view.getPerimeterBounds(state), state, next, false);\n\t\t\t\n\t\tif (tmp != null)\n\t\t{\n\t\t\tif (theta != 0)\n\t\t\t{\n\t\t\t\ttmp = mxUtils.getRotatedPoint(new mxPoint(tmp.x, tmp.y), Math.cos(-rad), Math.sin(-rad), c);\n\t\t\t}\n\t\t\t\n\t\t\tresult = tmp;\n\t\t}\n\t}\n\telse\n\t{\n\t\tresult = c;\n\t}\n\t\n\treturn result;\n};\n\n\n/**\n * Function: updateIcons\n * \n * Hook to update the icon position(s) based on a mouseOver event. This is\n * an empty implementation.\n * \n * Parameters:\n * \n * state - <mxCellState> under the mouse.\n * icons - Array of currently displayed icons.\n * me - <mxMouseEvent> that contains the mouse event.\n */\nmxConnectionHandler.prototype.updateIcons = function(state, icons, me)\n{\n\t// empty\n};\n\n/**\n * Function: isStopEvent\n * \n * Returns true if the given mouse up event should stop this handler. The\n * connection will be created if <error> is null. Note that this is only\n * called if <waypointsEnabled> is true. This implemtation returns true\n * if there is a cell state in the given event.\n */\nmxConnectionHandler.prototype.isStopEvent = function(me)\n{\n\treturn me.getState() != null;\n};\n\n/**\n * Function: addWaypoint\n * \n * Adds the waypoint for the given event to <waypoints>.\n */\nmxConnectionHandler.prototype.addWaypointForEvent = function(me)\n{\n\tvar point = mxUtils.convertPoint(this.graph.container, me.getX(), me.getY());\n\tvar dx = Math.abs(point.x - this.first.x);\n\tvar dy = Math.abs(point.y - this.first.y);\n\tvar addPoint = this.waypoints != null || (this.mouseDownCounter > 1 &&\n\t\t\t(dx > this.graph.tolerance || dy > this.graph.tolerance));\n\n\tif (addPoint)\n\t{\n\t\tif (this.waypoints == null)\n\t\t{\n\t\t\tthis.waypoints = [];\n\t\t}\n\t\t\n\t\tvar scale = this.graph.view.scale;\n\t\tvar point = new mxPoint(this.graph.snap(me.getGraphX() / scale) * scale,\n\t\t\t\tthis.graph.snap(me.getGraphY() / scale) * scale);\n\t\tthis.waypoints.push(point);\n\t}\n};\n\n/**\n * Function: checkConstraints\n * \n * Returns true if the connection for the given constraints is valid. This\n * implementation returns true if the constraints are not pointing to the\n * same fixed connection point.\n */\nmxConnectionHandler.prototype.checkConstraints = function(c1, c2)\n{\n\treturn (c1 == null || c2 == null || c1.point == null || c2.point == null ||\n\t\t!c1.point.equals(c2.point) || c1.dx != c2.dx || c1.dy != c2.dy ||\n\t\tc1.perimeter != c2.perimeter);\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by inserting the new connection.\n */\nmxConnectionHandler.prototype.mouseUp = function(sender, me)\n{\n\tif (!me.isConsumed() && this.isConnecting())\n\t{\n\t\tif (this.waypointsEnabled && !this.isStopEvent(me))\n\t\t{\n\t\t\tthis.addWaypointForEvent(me);\n\t\t\tme.consume();\n\t\t\t\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar c1 = this.sourceConstraint;\n\t\tvar c2 = this.constraintHandler.currentConstraint;\n\n\t\tvar source = (this.previous != null) ? this.previous.cell : null;\n\t\tvar target = null;\n\t\t\n\t\tif (this.constraintHandler.currentConstraint != null &&\n\t\t\tthis.constraintHandler.currentFocus != null)\n\t\t{\n\t\t\ttarget = this.constraintHandler.currentFocus.cell;\n\t\t}\n\t\t\n\t\tif (target == null && this.currentState != null)\n\t\t{\n\t\t\ttarget = this.currentState.cell;\n\t\t}\n\t\t\n\t\t// Inserts the edge if no validation error exists and if constraints differ\n\t\tif (this.error == null && (source == null || target == null ||\n\t\t\tsource != target || this.checkConstraints(c1, c2)))\n\t\t{\n\t\t\tthis.connect(source, target, me.getEvent(), me.getCell());\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Selects the source terminal for self-references\n\t\t\tif (this.previous != null && this.marker.validState != null &&\n\t\t\t\tthis.previous.cell == this.marker.validState.cell)\n\t\t\t{\n\t\t\t\tthis.graph.selectCellForEvent(this.marker.source, me.getEvent());\n\t\t\t}\n\t\t\t\n\t\t\t// Displays the error message if it is not an empty string,\n\t\t\t// for empty error messages, the event is silently dropped\n\t\t\tif (this.error != null && this.error.length > 0)\n\t\t\t{\n\t\t\t\tthis.graph.validationAlert(this.error);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Redraws the connect icons and resets the handler state\n\t\tthis.destroyIcons();\n\t\tme.consume();\n\t}\n\n\tif (this.first != null)\n\t{\n\t\tthis.reset();\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this handler.\n */\nmxConnectionHandler.prototype.reset = function()\n{\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.destroy();\n\t\tthis.shape = null;\n\t}\n\t\n\t// Resets the cursor on the container\n\tif (this.cursor != null && this.graph.container != null)\n\t{\n\t\tthis.graph.container.style.cursor = '';\n\t}\n\t\n\tthis.destroyIcons();\n\tthis.marker.reset();\n\tthis.constraintHandler.reset();\n\tthis.originalPoint = null;\n\tthis.currentPoint = null;\n\tthis.edgeState = null;\n\tthis.previous = null;\n\tthis.error = null;\n\tthis.sourceConstraint = null;\n\tthis.mouseDownCounter = 0;\n\tthis.first = null;\n\n\tthis.fireEvent(new mxEventObject(mxEvent.RESET));\n};\n\n/**\n * Function: drawPreview\n * \n * Redraws the preview edge using the color and width returned by\n * <getEdgeColor> and <getEdgeWidth>.\n */\nmxConnectionHandler.prototype.drawPreview = function()\n{\n\tthis.updatePreview(this.error == null);\n\tthis.shape.redraw();\n};\n\n/**\n * Function: getEdgeColor\n * \n * Returns the color used to draw the preview edge. This returns green if\n * there is no edge validation error and red otherwise.\n * \n * Parameters:\n * \n * valid - Boolean indicating if the color for a valid edge should be\n * returned.\n */\nmxConnectionHandler.prototype.updatePreview = function(valid)\n{\n\tthis.shape.strokewidth = this.getEdgeWidth(valid);\n\tthis.shape.stroke = this.getEdgeColor(valid);\n};\n\n/**\n * Function: getEdgeColor\n * \n * Returns the color used to draw the preview edge. This returns green if\n * there is no edge validation error and red otherwise.\n * \n * Parameters:\n * \n * valid - Boolean indicating if the color for a valid edge should be\n * returned.\n */\nmxConnectionHandler.prototype.getEdgeColor = function(valid)\n{\n\treturn (valid) ? mxConstants.VALID_COLOR : mxConstants.INVALID_COLOR;\n};\n\t\n/**\n * Function: getEdgeWidth\n * \n * Returns the width used to draw the preview edge. This returns 3 if\n * there is no edge validation error and 1 otherwise.\n * \n * Parameters:\n * \n * valid - Boolean indicating if the width for a valid edge should be\n * returned.\n */\nmxConnectionHandler.prototype.getEdgeWidth = function(valid)\n{\n\treturn (valid) ? 3 : 1;\n};\n\n/**\n * Function: connect\n * \n * Connects the given source and target using a new edge. This\n * implementation uses <createEdge> to create the edge.\n * \n * Parameters:\n * \n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n * evt - Mousedown event of the connect gesture.\n * dropTarget - <mxCell> that represents the cell under the mouse when it was\n * released.\n */\nmxConnectionHandler.prototype.connect = function(source, target, evt, dropTarget)\n{\n\tif (target != null || this.isCreateTarget(evt) || this.graph.allowDanglingEdges)\n\t{\n\t\t// Uses the common parent of source and target or\n\t\t// the default parent to insert the edge\n\t\tvar model = this.graph.getModel();\n\t\tvar terminalInserted = false;\n\t\tvar edge = null;\n\n\t\tmodel.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tif (source != null && target == null && !this.graph.isIgnoreTerminalEvent(evt) && this.isCreateTarget(evt))\n\t\t\t{\n\t\t\t\ttarget = this.createTargetVertex(evt, source);\n\t\t\t\t\n\t\t\t\tif (target != null)\n\t\t\t\t{\n\t\t\t\t\tdropTarget = this.graph.getDropTarget([target], evt, dropTarget);\n\t\t\t\t\tterminalInserted = true;\n\t\t\t\t\t\n\t\t\t\t\t// Disables edges as drop targets if the target cell was created\n\t\t\t\t\t// FIXME: Should not shift if vertex was aligned (same in Java)\n\t\t\t\t\tif (dropTarget == null || !this.graph.getModel().isEdge(dropTarget))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar pstate = this.graph.getView().getState(dropTarget);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (pstate != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar tmp = model.getGeometry(target);\n\t\t\t\t\t\t\ttmp.x -= pstate.origin.x;\n\t\t\t\t\t\t\ttmp.y -= pstate.origin.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdropTarget = this.graph.getDefaultParent();\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tthis.graph.addCell(target, dropTarget);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar parent = this.graph.getDefaultParent();\n\n\t\t\tif (source != null && target != null &&\n\t\t\t\tmodel.getParent(source) == model.getParent(target) &&\n\t\t\t\tmodel.getParent(model.getParent(source)) != model.getRoot())\n\t\t\t{\n\t\t\t\tparent = model.getParent(source);\n\n\t\t\t\tif ((source.geometry != null && source.geometry.relative) &&\n\t\t\t\t\t(target.geometry != null && target.geometry.relative))\n\t\t\t\t{\n\t\t\t\t\tparent = model.getParent(parent);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Uses the value of the preview edge state for inserting\n\t\t\t// the new edge into the graph\n\t\t\tvar value = null;\n\t\t\tvar style = null;\n\t\t\t\n\t\t\tif (this.edgeState != null)\n\t\t\t{\n\t\t\t\tvalue = this.edgeState.cell.value;\n\t\t\t\tstyle = this.edgeState.cell.style;\n\t\t\t}\n\n\t\t\tedge = this.insertEdge(parent, null, value, source, target, style);\n\t\t\t\n\t\t\tif (edge != null)\n\t\t\t{\n\t\t\t\t// Updates the connection constraints\n\t\t\t\tthis.graph.setConnectionConstraint(edge, source, true, this.sourceConstraint);\n\t\t\t\tthis.graph.setConnectionConstraint(edge, target, false, this.constraintHandler.currentConstraint);\n\t\t\t\t\n\t\t\t\t// Uses geometry of the preview edge state\n\t\t\t\tif (this.edgeState != null)\n\t\t\t\t{\n\t\t\t\t\tmodel.setGeometry(edge, this.edgeState.cell.geometry);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar parent = model.getParent(source);\n\t\t\t\t\n\t\t\t\t// Inserts edge before source\n\t\t\t\tif (this.isInsertBefore(edge, source, target, evt, dropTarget))\n\t\t\t\t{\n\t\t\t\t\tvar index = null;\n\t\t\t\t\tvar tmp = source;\n\n\t\t\t\t\twhile (tmp.parent != null && tmp.geometry != null &&\n\t\t\t\t\t\ttmp.geometry.relative && tmp.parent != edge.parent)\n\t\t\t\t\t{\n\t\t\t\t\t\ttmp = this.graph.model.getParent(tmp);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (tmp != null && tmp.parent != null && tmp.parent == edge.parent)\n\t\t\t\t\t{\n\t\t\t\t\t\tmodel.add(parent, edge, tmp.parent.getIndex(tmp));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Makes sure the edge has a non-null, relative geometry\n\t\t\t\tvar geo = model.getGeometry(edge);\n\n\t\t\t\tif (geo == null)\n\t\t\t\t{\n\t\t\t\t\tgeo = new mxGeometry();\n\t\t\t\t\tgeo.relative = true;\n\t\t\t\t\t\n\t\t\t\t\tmodel.setGeometry(edge, geo);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Uses scaled waypoints in geometry\n\t\t\t\tif (this.waypoints != null && this.waypoints.length > 0)\n\t\t\t\t{\n\t\t\t\t\tvar s = this.graph.view.scale;\n\t\t\t\t\tvar tr = this.graph.view.translate;\n\t\t\t\t\tgeo.points = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (var i = 0; i < this.waypoints.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar pt = this.waypoints[i];\n\t\t\t\t\t\tgeo.points.push(new mxPoint(pt.x / s - tr.x, pt.y / s - tr.y));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (target == null)\n\t\t\t\t{\n\t\t\t\t\tvar t = this.graph.view.translate;\n\t\t\t\t\tvar s = this.graph.view.scale;\n\t\t\t\t\tvar pt = (this.originalPoint != null) ?\n\t\t\t\t\t\t\tnew mxPoint(this.originalPoint.x / s - t.x, this.originalPoint.y / s - t.y) :\n\t\t\t\t\t\tnew mxPoint(this.currentPoint.x / s - t.x, this.currentPoint.y / s - t.y);\n\t\t\t\t\tpt.x -= this.graph.panDx / this.graph.view.scale;\n\t\t\t\t\tpt.y -= this.graph.panDy / this.graph.view.scale;\n\t\t\t\t\tgeo.setTerminalPoint(pt, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.CONNECT, 'cell', edge, 'terminal', target,\n\t\t\t\t\t'event', evt, 'target', dropTarget, 'terminalInserted', terminalInserted));\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tmxLog.show();\n\t\t\tmxLog.debug(e.message);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tmodel.endUpdate();\n\t\t}\n\t\t\n\t\tif (this.select)\n\t\t{\n\t\t\tthis.selectCells(edge, (terminalInserted) ? target : null);\n\t\t}\n\t}\n};\n\n/**\n * Function: selectCells\n * \n * Selects the given edge after adding a new connection. The target argument\n * contains the target vertex if one has been inserted.\n */\nmxConnectionHandler.prototype.selectCells = function(edge, target)\n{\n\tthis.graph.setSelectionCell(edge);\n};\n\n/**\n * Function: insertEdge\n * \n * Creates, inserts and returns the new edge for the given parameters. This\n * implementation does only use <createEdge> if <factoryMethod> is defined,\n * otherwise <mxGraph.insertEdge> will be used.\n */\nmxConnectionHandler.prototype.insertEdge = function(parent, id, value, source, target, style)\n{\n\tif (this.factoryMethod == null)\n\t{\n\t\treturn this.graph.insertEdge(parent, id, value, source, target, style);\n\t}\n\telse\n\t{\n\t\tvar edge = this.createEdge(value, source, target, style);\n\t\tedge = this.graph.addEdge(edge, parent, source, target);\n\t\t\n\t\treturn edge;\n\t}\n};\n\n/**\n * Function: createTargetVertex\n * \n * Hook method for creating new vertices on the fly if no target was\n * under the mouse. This is only called if <createTarget> is true and\n * returns null.\n * \n * Parameters:\n * \n * evt - Mousedown event of the connect gesture.\n * source - <mxCell> that represents the source terminal.\n */\nmxConnectionHandler.prototype.createTargetVertex = function(evt, source)\n{\n\t// Uses the first non-relative source\n\tvar geo = this.graph.getCellGeometry(source);\n\t\n\twhile (geo != null && geo.relative)\n\t{\n\t\tsource = this.graph.getModel().getParent(source);\n\t\tgeo = this.graph.getCellGeometry(source);\n\t}\n\t\n\tvar clone = this.graph.cloneCell(source);\n\tvar geo = this.graph.getModel().getGeometry(clone);\n\t\n\tif (geo != null)\n\t{\n\t\tvar t = this.graph.view.translate;\n\t\tvar s = this.graph.view.scale;\n\t\tvar point = new mxPoint(this.currentPoint.x / s - t.x, this.currentPoint.y / s - t.y);\n\t\tgeo.x = Math.round(point.x - geo.width / 2 - this.graph.panDx / s);\n\t\tgeo.y = Math.round(point.y - geo.height / 2 - this.graph.panDy / s);\n\n\t\t// Aligns with source if within certain tolerance\n\t\tvar tol = this.getAlignmentTolerance();\n\t\t\n\t\tif (tol > 0)\n\t\t{\n\t\t\tvar sourceState = this.graph.view.getState(source);\n\t\t\t\n\t\t\tif (sourceState != null)\n\t\t\t{\n\t\t\t\tvar x = sourceState.x / s - t.x;\n\t\t\t\tvar y = sourceState.y / s - t.y;\n\t\t\t\t\n\t\t\t\tif (Math.abs(x - geo.x) <= tol)\n\t\t\t\t{\n\t\t\t\t\tgeo.x = Math.round(x);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (Math.abs(y - geo.y) <= tol)\n\t\t\t\t{\n\t\t\t\t\tgeo.y = Math.round(y);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn clone;\t\t\n};\n\n/**\n * Function: getAlignmentTolerance\n * \n * Returns the tolerance for aligning new targets to sources. This returns the grid size / 2.\n */\nmxConnectionHandler.prototype.getAlignmentTolerance = function(evt)\n{\n\treturn (this.graph.isGridEnabled()) ? this.graph.gridSize / 2 : this.graph.tolerance;\n};\n\n/**\n * Function: createEdge\n * \n * Creates and returns a new edge using <factoryMethod> if one exists. If\n * no factory method is defined, then a new default edge is returned. The\n * source and target arguments are informal, the actual connection is\n * setup later by the caller of this function.\n * \n * Parameters:\n * \n * value - Value to be used for creating the edge.\n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n * style - Optional style from the preview edge.\n */\nmxConnectionHandler.prototype.createEdge = function(value, source, target, style)\n{\n\tvar edge = null;\n\t\n\t// Creates a new edge using the factoryMethod\n\tif (this.factoryMethod != null)\n\t{\n\t\tedge = this.factoryMethod(source, target, style);\n\t}\n\t\n\tif (edge == null)\n\t{\n\t\tedge = new mxCell(value || '');\n\t\tedge.setEdge(true);\n\t\tedge.setStyle(style);\n\t\t\n\t\tvar geo = new mxGeometry();\n\t\tgeo.relative = true;\n\t\tedge.setGeometry(geo);\n\t}\n\n\treturn edge;\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes. This should be\n * called on all instances. It is called automatically for the built-in\n * instance created for each <mxGraph>.\n */\nmxConnectionHandler.prototype.destroy = function()\n{\n\tthis.graph.removeMouseListener(this);\n\t\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.destroy();\n\t\tthis.shape = null;\n\t}\n\t\n\tif (this.marker != null)\n\t{\n\t\tthis.marker.destroy();\n\t\tthis.marker = null;\n\t}\n\n\tif (this.constraintHandler != null)\n\t{\n\t\tthis.constraintHandler.destroy();\n\t\tthis.constraintHandler = null;\n\t}\n\n\tif (this.changeHandler != null)\n\t{\n\t\tthis.graph.getModel().removeListener(this.changeHandler);\n\t\tthis.graph.getView().removeListener(this.changeHandler);\n\t\tthis.changeHandler = null;\n\t}\n\t\n\tif (this.drillHandler != null)\n\t{\n\t\tthis.graph.removeListener(this.drillHandler);\n\t\tthis.graph.getView().removeListener(this.drillHandler);\n\t\tthis.drillHandler = null;\n\t}\n\t\n\tif (this.escapeHandler != null)\n\t{\n\t\tthis.graph.removeListener(this.escapeHandler);\n\t\tthis.escapeHandler = null;\n\t}\n};\n\n__mxOutput.mxConnectionHandler = typeof mxConnectionHandler !== 'undefined' ? mxConnectionHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxConstraintHandler\n *\n * Handles constraints on connection targets. This class is in charge of\n * showing fixed points when the mouse is over a vertex and handles constraints\n * to establish new connections.\n *\n * Constructor: mxConstraintHandler\n *\n * Constructs an new constraint handler.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * factoryMethod - Optional function to create the edge. The function takes\n * the source and target <mxCell> as the first and second argument and\n * returns the <mxCell> that represents the new edge.\n */\nfunction mxConstraintHandler(graph)\n{\n\tthis.graph = graph;\n\t\n\t// Adds a graph model listener to update the current focus on changes\n\tthis.resetHandler = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tif (this.currentFocus != null && this.graph.view.getState(this.currentFocus.cell) == null)\n\t\t{\n\t\t\tthis.reset();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.redraw();\n\t\t}\n\t});\n\t\n\tthis.graph.model.addListener(mxEvent.CHANGE, this.resetHandler);\n\tthis.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE, this.resetHandler);\n\tthis.graph.view.addListener(mxEvent.TRANSLATE, this.resetHandler);\n\tthis.graph.view.addListener(mxEvent.SCALE, this.resetHandler);\n\tthis.graph.addListener(mxEvent.ROOT, this.resetHandler);\n};\n\n/**\n * Variable: pointImage\n * \n * <mxImage> to be used as the image for fixed connection points.\n */\nmxConstraintHandler.prototype.pointImage = new mxImage(mxClient.imageBasePath + '/point.gif', 5, 5);\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxConstraintHandler.prototype.graph = null;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxConstraintHandler.prototype.enabled = true;\n\n/**\n * Variable: highlightColor\n * \n * Specifies the color for the highlight. Default is <mxConstants.DEFAULT_VALID_COLOR>.\n */\nmxConstraintHandler.prototype.highlightColor = mxConstants.DEFAULT_VALID_COLOR;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxConstraintHandler.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\t\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n * \n * Parameters:\n * \n * enabled - Boolean that specifies the new enabled state.\n */\nmxConstraintHandler.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this handler.\n */\nmxConstraintHandler.prototype.reset = function()\n{\n\tif (this.focusIcons != null)\n\t{\n\t\tfor (var i = 0; i < this.focusIcons.length; i++)\n\t\t{\n\t\t\tthis.focusIcons[i].destroy();\n\t\t}\n\t\t\n\t\tthis.focusIcons = null;\n\t}\n\t\n\tif (this.focusHighlight != null)\n\t{\n\t\tthis.focusHighlight.destroy();\n\t\tthis.focusHighlight = null;\n\t}\n\t\n\tthis.currentConstraint = null;\n\tthis.currentFocusArea = null;\n\tthis.currentPoint = null;\n\tthis.currentFocus = null;\n\tthis.focusPoints = null;\n};\n\n/**\n * Function: getTolerance\n * \n * Returns the tolerance to be used for intersecting connection points. This\n * implementation returns <mxGraph.tolerance>.\n * \n * Parameters:\n * \n * me - <mxMouseEvent> whose tolerance should be returned.\n */\nmxConstraintHandler.prototype.getTolerance = function(me)\n{\n\treturn this.graph.getTolerance();\n};\n\n/**\n * Function: getImageForConstraint\n * \n * Returns the tolerance to be used for intersecting connection points.\n */\nmxConstraintHandler.prototype.getImageForConstraint = function(state, constraint, point)\n{\n\treturn this.pointImage;\n};\n\n/**\n * Function: isEventIgnored\n * \n * Returns true if the given <mxMouseEvent> should be ignored in <update>. This\n * implementation always returns false.\n */\nmxConstraintHandler.prototype.isEventIgnored = function(me, source)\n{\n\treturn false;\n};\n\n/**\n * Function: isStateIgnored\n * \n * Returns true if the given state should be ignored. This always returns false.\n */\nmxConstraintHandler.prototype.isStateIgnored = function(state, source)\n{\n\treturn false;\n};\n\n/**\n * Function: destroyIcons\n * \n * Destroys the <focusIcons> if they exist.\n */\nmxConstraintHandler.prototype.destroyIcons = function()\n{\n\tif (this.focusIcons != null)\n\t{\n\t\tfor (var i = 0; i < this.focusIcons.length; i++)\n\t\t{\n\t\t\tthis.focusIcons[i].destroy();\n\t\t}\n\t\t\n\t\tthis.focusIcons = null;\n\t\tthis.focusPoints = null;\n\t}\n};\n\n/**\n * Function: destroyFocusHighlight\n * \n * Destroys the <focusHighlight> if one exists.\n */\nmxConstraintHandler.prototype.destroyFocusHighlight = function()\n{\n\tif (this.focusHighlight != null)\n\t{\n\t\tthis.focusHighlight.destroy();\n\t\tthis.focusHighlight = null;\n\t}\n};\n\n/**\n * Function: isKeepFocusEvent\n * \n * Returns true if the current focused state should not be changed for the given event.\n * This returns true if shift and alt are pressed.\n */\nmxConstraintHandler.prototype.isKeepFocusEvent = function(me)\n{\n\treturn mxEvent.isShiftDown(me.getEvent());\n};\n\n/**\n * Function: getCellForEvent\n * \n * Returns the cell for the given event.\n */\nmxConstraintHandler.prototype.getCellForEvent = function(me, point)\n{\n\tvar cell = me.getCell();\n\t\n\t// Gets cell under actual point if different from event location\n\tif (cell == null && point != null && (me.getGraphX() != point.x || me.getGraphY() != point.y))\n\t{\n\t\tcell = this.graph.getCellAt(point.x, point.y);\n\t}\n\t\n\t// Uses connectable parent vertex if one exists\n\tif (cell != null && !this.graph.isCellConnectable(cell))\n\t{\n\t\tvar parent = this.graph.getModel().getParent(cell);\n\t\t\n\t\tif (this.graph.getModel().isVertex(parent) && this.graph.isCellConnectable(parent))\n\t\t{\n\t\t\tcell = parent;\n\t\t}\n\t}\n\t\n\treturn (this.graph.isCellLocked(cell)) ? null : cell;\n};\n\n/**\n * Function: update\n * \n * Updates the state of this handler based on the given <mxMouseEvent>.\n * Source is a boolean indicating if the cell is a source or target.\n */\nmxConstraintHandler.prototype.update = function(me, source, existingEdge, point)\n{\n\tif (this.isEnabled() && !this.isEventIgnored(me))\n\t{\n\t\t// Lazy installation of mouseleave handler\n\t\tif (this.mouseleaveHandler == null && this.graph.container != null)\n\t\t{\n\t\t\tthis.mouseleaveHandler = mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tthis.reset();\n\t\t\t});\n\n\t\t\tmxEvent.addListener(this.graph.container, 'mouseleave', this.resetHandler);\t\n\t\t}\n\t\t\n\t\tvar tol = this.getTolerance(me);\n\t\tvar x = (point != null) ? point.x : me.getGraphX();\n\t\tvar y = (point != null) ? point.y : me.getGraphY();\n\t\tvar grid = new mxRectangle(x - tol, y - tol, 2 * tol, 2 * tol);\n\t\tvar mouse = new mxRectangle(me.getGraphX() - tol, me.getGraphY() - tol, 2 * tol, 2 * tol);\n\t\tvar state = this.graph.view.getState(this.getCellForEvent(me, point));\n\n\t\t// Keeps focus icons visible while over vertex bounds and no other cell under mouse or shift is pressed\n\t\tif (!this.isKeepFocusEvent(me) && (this.currentFocusArea == null || this.currentFocus == null ||\n\t\t\t(state != null) || !this.graph.getModel().isVertex(this.currentFocus.cell) ||\n\t\t\t!mxUtils.intersects(this.currentFocusArea, mouse)) && (state != this.currentFocus))\n\t\t{\n\t\t\tthis.currentFocusArea = null;\n\t\t\tthis.currentFocus = null;\n\t\t\tthis.setFocus(me, state, source);\n\t\t}\n\n\t\tthis.currentConstraint = null;\n\t\tthis.currentPoint = null;\n\t\tvar minDistSq = null;\n\t\t\n\t\tif (this.focusIcons != null && this.constraints != null &&\n\t\t\t(state == null || this.currentFocus == state))\n\t\t{\n\t\t\tvar cx = mouse.getCenterX();\n\t\t\tvar cy = mouse.getCenterY();\n\t\t\t\n\t\t\tfor (var i = 0; i < this.focusIcons.length; i++)\n\t\t\t{\n\t\t\t\tvar dx = cx - this.focusIcons[i].bounds.getCenterX();\n\t\t\t\tvar dy = cy - this.focusIcons[i].bounds.getCenterY();\n\t\t\t\tvar tmp = dx * dx + dy * dy;\n\t\t\t\t\n\t\t\t\tif ((this.intersects(this.focusIcons[i], mouse, source, existingEdge) || (point != null &&\n\t\t\t\t\tthis.intersects(this.focusIcons[i], grid, source, existingEdge))) &&\n\t\t\t\t\t(minDistSq == null || tmp < minDistSq))\n\t\t\t\t{\n\t\t\t\t\tthis.currentConstraint = this.constraints[i];\n\t\t\t\t\tthis.currentPoint = this.focusPoints[i];\n\t\t\t\t\tminDistSq = tmp;\n\t\t\t\t\t\n\t\t\t\t\tvar tmp = this.focusIcons[i].bounds.clone();\n\t\t\t\t\ttmp.grow(mxConstants.HIGHLIGHT_SIZE + 1);\n\t\t\t\t\ttmp.width -= 1;\n\t\t\t\t\ttmp.height -= 1;\n\t\t\t\t\t\n\t\t\t\t\tif (this.focusHighlight == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar hl = this.createHighlightShape();\n\t\t\t\t\t\thl.dialect = (this.graph.dialect == mxConstants.DIALECT_SVG) ?\n\t\t\t\t\t\t\t\tmxConstants.DIALECT_SVG : mxConstants.DIALECT_VML;\n\t\t\t\t\t\thl.pointerEvents = false;\n\n\t\t\t\t\t\thl.init(this.graph.getView().getOverlayPane());\n\t\t\t\t\t\tthis.focusHighlight = hl;\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar getState = mxUtils.bind(this, function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (this.currentFocus != null) ? this.currentFocus : state;\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tmxEvent.redirectMouseEvents(hl.node, this.graph, getState);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.focusHighlight.bounds = tmp;\n\t\t\t\t\tthis.focusHighlight.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.currentConstraint == null)\n\t\t{\n\t\t\tthis.destroyFocusHighlight();\n\t\t}\n\t}\n\telse\n\t{\n\t\tthis.currentConstraint = null;\n\t\tthis.currentFocus = null;\n\t\tthis.currentPoint = null;\n\t}\n};\n\n/**\n * Function: redraw\n * \n * Transfers the focus to the given state as a source or target terminal. If\n * the handler is not enabled then the outline is painted, but the constraints\n * are ignored.\n */\nmxConstraintHandler.prototype.redraw = function()\n{\n\tif (this.currentFocus != null && this.constraints != null && this.focusIcons != null)\n\t{\n\t\tvar state = this.graph.view.getState(this.currentFocus.cell);\n\t\tthis.currentFocus = state;\n\t\tthis.currentFocusArea = new mxRectangle(state.x, state.y, state.width, state.height);\n\t\t\n\t\tfor (var i = 0; i < this.constraints.length; i++)\n\t\t{\n\t\t\tvar cp = this.graph.getConnectionPoint(state, this.constraints[i]);\n\t\t\tvar img = this.getImageForConstraint(state, this.constraints[i], cp);\n\n\t\t\tvar bounds = new mxRectangle(Math.round(cp.x - img.width / 2),\n\t\t\t\tMath.round(cp.y - img.height / 2), img.width, img.height);\n\t\t\tthis.focusIcons[i].bounds = bounds;\n\t\t\tthis.focusIcons[i].redraw();\n\t\t\tthis.currentFocusArea.add(this.focusIcons[i].bounds);\n\t\t\tthis.focusPoints[i] = cp;\n\t\t}\n\t}\t\n};\n\n/**\n * Function: setFocus\n * \n * Transfers the focus to the given state as a source or target terminal. If\n * the handler is not enabled then the outline is painted, but the constraints\n * are ignored.\n */\nmxConstraintHandler.prototype.setFocus = function(me, state, source)\n{\n\tthis.constraints = (state != null && !this.isStateIgnored(state, source) &&\n\t\tthis.graph.isCellConnectable(state.cell)) ? ((this.isEnabled()) ?\n\t\t(this.graph.getAllConnectionConstraints(state, source) || []) : []) : null;\n\n\t// Only uses cells which have constraints\n\tif (this.constraints != null)\n\t{\n\t\tthis.currentFocus = state;\n\t\tthis.currentFocusArea = new mxRectangle(state.x, state.y, state.width, state.height);\n\t\t\n\t\tif (this.focusIcons != null)\n\t\t{\n\t\t\tfor (var i = 0; i < this.focusIcons.length; i++)\n\t\t\t{\n\t\t\t\tthis.focusIcons[i].destroy();\n\t\t\t}\n\t\t\t\n\t\t\tthis.focusIcons = null;\n\t\t\tthis.focusPoints = null;\n\t\t}\n\t\t\n\t\tthis.focusPoints = [];\n\t\tthis.focusIcons = [];\n\t\t\n\t\tfor (var i = 0; i < this.constraints.length; i++)\n\t\t{\n\t\t\tvar cp = this.graph.getConnectionPoint(state, this.constraints[i]);\n\t\t\tvar img = this.getImageForConstraint(state, this.constraints[i], cp);\n\n\t\t\tvar src = img.src;\n\t\t\tvar bounds = new mxRectangle(Math.round(cp.x - img.width / 2),\n\t\t\t\tMath.round(cp.y - img.height / 2), img.width, img.height);\n\t\t\tvar icon = new mxImageShape(bounds, src);\n\t\t\ticon.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\t\t\tmxConstants.DIALECT_MIXEDHTML : mxConstants.DIALECT_SVG;\n\t\t\ticon.preserveImageAspect = false;\n\t\t\ticon.init(this.graph.getView().getDecoratorPane());\n\t\t\t\n\t\t\t// Fixes lost event tracking for images in quirks / IE8 standards\n\t\t\tif (mxClient.IS_QUIRKS || document.documentMode == 8)\n\t\t\t{\n\t\t\t\tmxEvent.addListener(icon.node, 'dragstart', function(evt)\n\t\t\t\t{\n\t\t\t\t\tmxEvent.consume(evt);\n\t\t\t\t\t\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// Move the icon behind all other overlays\n\t\t\tif (icon.node.previousSibling != null)\n\t\t\t{\n\t\t\t\ticon.node.parentNode.insertBefore(icon.node, icon.node.parentNode.firstChild);\n\t\t\t}\n\n\t\t\tvar getState = mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\treturn (this.currentFocus != null) ? this.currentFocus : state;\n\t\t\t});\n\t\t\t\n\t\t\ticon.redraw();\n\n\t\t\tmxEvent.redirectMouseEvents(icon.node, this.graph, getState);\n\t\t\tthis.currentFocusArea.add(icon.bounds);\n\t\t\tthis.focusIcons.push(icon);\n\t\t\tthis.focusPoints.push(cp);\n\t\t}\n\t\t\n\t\tthis.currentFocusArea.grow(this.getTolerance(me));\n\t}\n\telse\n\t{\n\t\tthis.destroyIcons();\n\t\tthis.destroyFocusHighlight();\n\t}\n};\n\n/**\n * Function: createHighlightShape\n * \n * Create the shape used to paint the highlight.\n * \n * Returns true if the given icon intersects the given point.\n */\nmxConstraintHandler.prototype.createHighlightShape = function()\n{\n\tvar hl = new mxRectangleShape(null, this.highlightColor, this.highlightColor, mxConstants.HIGHLIGHT_STROKEWIDTH);\n\thl.opacity = mxConstants.HIGHLIGHT_OPACITY;\n\t\n\treturn hl;\n};\n\n/**\n * Function: intersects\n * \n * Returns true if the given icon intersects the given rectangle.\n */\nmxConstraintHandler.prototype.intersects = function(icon, mouse, source, existingEdge)\n{\n\treturn mxUtils.intersects(icon.bounds, mouse);\n};\n\n/**\n * Function: destroy\n * \n * Destroy this handler.\n */\nmxConstraintHandler.prototype.destroy = function()\n{\n\tthis.reset();\n\t\n\tif (this.resetHandler != null)\n\t{\n\t\tthis.graph.model.removeListener(this.resetHandler);\n\t\tthis.graph.view.removeListener(this.resetHandler);\n\t\tthis.graph.removeListener(this.resetHandler);\n\t\tthis.resetHandler = null;\n\t}\n\t\n\tif (this.mouseleaveHandler != null && this.graph.container != null)\n\t{\n\t\tmxEvent.removeListener(this.graph.container, 'mouseleave', this.mouseleaveHandler);\n\t\tthis.mouseleaveHandler = null;\n\t}\n};\n\n__mxOutput.mxConstraintHandler = typeof mxConstraintHandler !== 'undefined' ? mxConstraintHandler : undefined;\n\n/**\n * Copyright (c) 2006-2016, JGraph Ltd\n * Copyright (c) 2006-2016, Gaudenz Alder\n */\n/**\n * Class: mxRubberband\n * \n * Event handler that selects rectangular regions. This is not built-into\n * <mxGraph>. To enable rubberband selection in a graph, use the following code.\n * \n * Example:\n * \n * (code)\n * var rubberband = new mxRubberband(graph);\n * (end)\n * \n * Constructor: mxRubberband\n * \n * Constructs an event handler that selects rectangular regions in the graph\n * using rubberband selection.\n */\nfunction mxRubberband(graph)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.graph.addMouseListener(this);\n\n\t\t// Handles force rubberband event\n\t\tthis.forceRubberbandHandler = mxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tvar evtName = evt.getProperty('eventName');\n\t\t\tvar me = evt.getProperty('event');\n\t\t\t\n\t\t\tif (evtName == mxEvent.MOUSE_DOWN && this.isForceRubberbandEvent(me))\n\t\t\t{\n\t\t\t\tvar offset = mxUtils.getOffset(this.graph.container);\n\t\t\t\tvar origin = mxUtils.getScrollOrigin(this.graph.container);\n\t\t\t\torigin.x -= offset.x;\n\t\t\t\torigin.y -= offset.y;\n\t\t\t\tthis.start(me.getX() + origin.x, me.getY() + origin.y);\n\t\t\t\tme.consume(false);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.FIRE_MOUSE_EVENT, this.forceRubberbandHandler);\n\t\t\n\t\t// Repaints the marquee after autoscroll\n\t\tthis.panHandler = mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.repaint();\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.PAN, this.panHandler);\n\t\t\n\t\t// Does not show menu if any touch gestures take place after the trigger\n\t\tthis.gestureHandler = mxUtils.bind(this, function(sender, eo)\n\t\t{\n\t\t\tif (this.first != null)\n\t\t\t{\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.GESTURE, this.gestureHandler);\n\t\t\n\t\t// Automatic deallocation of memory\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\tmxEvent.addListener(window, 'unload',\n\t\t\t\tmxUtils.bind(this, function()\n\t\t\t\t{\n\t\t\t\t\tthis.destroy();\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n * Variable: defaultOpacity\n * \n * Specifies the default opacity to be used for the rubberband div. Default\n * is 20.\n */\nmxRubberband.prototype.defaultOpacity = 20;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxRubberband.prototype.enabled = true;\n\n/**\n * Variable: div\n * \n * Holds the DIV element which is currently visible.\n */\nmxRubberband.prototype.div = null;\n\n/**\n * Variable: sharedDiv\n * \n * Holds the DIV element which is used to display the rubberband.\n */\nmxRubberband.prototype.sharedDiv = null;\n\n/**\n * Variable: currentX\n * \n * Holds the value of the x argument in the last call to <update>.\n */\nmxRubberband.prototype.currentX = 0;\n\n/**\n * Variable: currentY\n * \n * Holds the value of the y argument in the last call to <update>.\n */\nmxRubberband.prototype.currentY = 0;\n\n/**\n * Variable: fadeOut\n * \n * Optional fade out effect. Default is false.\n */\nmxRubberband.prototype.fadeOut = false;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation returns\n * <enabled>.\n */\nmxRubberband.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\t\t\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation updates\n * <enabled>.\n */\nmxRubberband.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isForceRubberbandEvent\n * \n * Returns true if the given <mxMouseEvent> should start rubberband selection.\n * This implementation returns true if the alt key is pressed.\n */\nmxRubberband.prototype.isForceRubberbandEvent = function(me)\n{\n\treturn mxEvent.isAltDown(me.getEvent());\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by initiating a rubberband selection. By consuming the\n * event all subsequent events of the gesture are redirected to this\n * handler.\n */\nmxRubberband.prototype.mouseDown = function(sender, me)\n{\n\tif (!me.isConsumed() && this.isEnabled() && this.graph.isEnabled() &&\n\t\tme.getState() == null && !mxEvent.isMultiTouchEvent(me.getEvent()))\n\t{\n\t\tvar offset = mxUtils.getOffset(this.graph.container);\n\t\tvar origin = mxUtils.getScrollOrigin(this.graph.container);\n\t\torigin.x -= offset.x;\n\t\torigin.y -= offset.y;\n\t\tthis.start(me.getX() + origin.x, me.getY() + origin.y);\n\n\t\t// Does not prevent the default for this event so that the\n\t\t// event processing chain is still executed even if we start\n\t\t// rubberbanding. This is required eg. in ExtJs to hide the\n\t\t// current context menu. In mouseMove we'll make sure we're\n\t\t// not selecting anything while we're rubberbanding.\n\t\tme.consume(false);\n\t}\n};\n\n/**\n * Function: start\n * \n * Sets the start point for the rubberband selection.\n */\nmxRubberband.prototype.start = function(x, y)\n{\n\tthis.first = new mxPoint(x, y);\n\n\tvar container = this.graph.container;\n\t\n\tfunction createMouseEvent(evt)\n\t{\n\t\tvar me = new mxMouseEvent(evt);\n\t\tvar pt = mxUtils.convertPoint(container, me.getX(), me.getY());\n\t\t\n\t\tme.graphX = pt.x;\n\t\tme.graphY = pt.y;\n\t\t\n\t\treturn me;\n\t};\n\n\tthis.dragHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.mouseMove(this.graph, createMouseEvent(evt));\n\t});\n\n\tthis.dropHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.mouseUp(this.graph, createMouseEvent(evt));\n\t});\n\n\t// Workaround for rubberband stopping if the mouse leaves the container in Firefox\n\tif (mxClient.IS_FF)\n\t{\n\t\tmxEvent.addGestureListeners(document, null, this.dragHandler, this.dropHandler);\n\t}\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating therubberband selection.\n */\nmxRubberband.prototype.mouseMove = function(sender, me)\n{\n\tif (!me.isConsumed() && this.first != null)\n\t{\n\t\tvar origin = mxUtils.getScrollOrigin(this.graph.container);\n\t\tvar offset = mxUtils.getOffset(this.graph.container);\n\t\torigin.x -= offset.x;\n\t\torigin.y -= offset.y;\n\t\tvar x = me.getX() + origin.x;\n\t\tvar y = me.getY() + origin.y;\n\t\tvar dx = this.first.x - x;\n\t\tvar dy = this.first.y - y;\n\t\tvar tol = this.graph.tolerance;\n\t\t\n\t\tif (this.div != null || Math.abs(dx) > tol ||  Math.abs(dy) > tol)\n\t\t{\n\t\t\tif (this.div == null)\n\t\t\t{\n\t\t\t\tthis.div = this.createShape();\n\t\t\t}\n\t\t\t\n\t\t\t// Clears selection while rubberbanding. This is required because\n\t\t\t// the event is not consumed in mouseDown.\n\t\t\tmxUtils.clearSelection();\n\t\t\t\n\t\t\tthis.update(x, y);\n\t\t\tme.consume();\n\t\t}\n\t}\n};\n\n/**\n * Function: createShape\n * \n * Creates the rubberband selection shape.\n */\nmxRubberband.prototype.createShape = function()\n{\n\tif (this.sharedDiv == null)\n\t{\n\t\tthis.sharedDiv = document.createElement('div');\n\t\tthis.sharedDiv.className = 'mxRubberband';\n\t\tmxUtils.setOpacity(this.sharedDiv, this.defaultOpacity);\n\t}\n\n\tthis.graph.container.appendChild(this.sharedDiv);\n\tvar result = this.sharedDiv;\n\t\n\tif (mxClient.IS_SVG && (!mxClient.IS_IE || document.documentMode >= 10) && this.fadeOut)\n\t{\n\t\tthis.sharedDiv = null;\n\t}\n\t\t\n\treturn result;\n};\n\n/**\n * Function: isActive\n * \n * Returns true if this handler is active.\n */\nmxRubberband.prototype.isActive = function(sender, me)\n{\n\treturn this.div != null && this.div.style.display != 'none';\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by selecting the region of the rubberband using\n * <mxGraph.selectRegion>.\n */\nmxRubberband.prototype.mouseUp = function(sender, me)\n{\n\tvar active = this.isActive();\n\tthis.reset();\n\t\n\tif (active)\n\t{\n\t\tthis.execute(me.getEvent());\n\t\tme.consume();\n\t}\n};\n\n/**\n * Function: execute\n * \n * Resets the state of this handler and selects the current region\n * for the given event.\n */\nmxRubberband.prototype.execute = function(evt)\n{\n\tvar rect = new mxRectangle(this.x, this.y, this.width, this.height);\n\tthis.graph.selectRegion(rect, evt);\n};\n\n/**\n * Function: reset\n * \n * Resets the state of the rubberband selection.\n */\nmxRubberband.prototype.reset = function()\n{\n\tif (this.div != null)\n\t{\n\t\tif (mxClient.IS_SVG && (!mxClient.IS_IE || document.documentMode >= 10) && this.fadeOut)\n\t\t{\n\t\t\tvar temp = this.div;\n\t\t\tmxUtils.setPrefixedStyle(temp.style, 'transition', 'all 0.2s linear');\n\t\t\ttemp.style.pointerEvents = 'none';\n\t\t\ttemp.style.opacity = 0;\n\t\t    \n\t\t    window.setTimeout(function()\n\t\t    \t{\n\t\t    \t\ttemp.parentNode.removeChild(temp);\n\t\t    \t}, 200);\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t}\n\n\tmxEvent.removeGestureListeners(document, null, this.dragHandler, this.dropHandler);\n\tthis.dragHandler = null;\n\tthis.dropHandler = null;\n\t\n\tthis.currentX = 0;\n\tthis.currentY = 0;\n\tthis.first = null;\n\tthis.div = null;\n};\n\n/**\n * Function: update\n * \n * Sets <currentX> and <currentY> and calls <repaint>.\n */\nmxRubberband.prototype.update = function(x, y)\n{\n\tthis.currentX = x;\n\tthis.currentY = y;\n\t\n\tthis.repaint();\n};\n\n/**\n * Function: repaint\n * \n * Computes the bounding box and updates the style of the <div>.\n */\nmxRubberband.prototype.repaint = function()\n{\n\tif (this.div != null)\n\t{\n\t\tvar x = this.currentX - this.graph.panDx;\n\t\tvar y = this.currentY - this.graph.panDy;\n\t\t\n\t\tthis.x = Math.min(this.first.x, x);\n\t\tthis.y = Math.min(this.first.y, y);\n\t\tthis.width = Math.max(this.first.x, x) - this.x;\n\t\tthis.height =  Math.max(this.first.y, y) - this.y;\n\n\t\tvar dx = (mxClient.IS_VML) ? this.graph.panDx : 0;\n\t\tvar dy = (mxClient.IS_VML) ? this.graph.panDy : 0;\n\t\t\n\t\tthis.div.style.left = (this.x + dx) + 'px';\n\t\tthis.div.style.top = (this.y + dy) + 'px';\n\t\tthis.div.style.width = Math.max(1, this.width) + 'px';\n\t\tthis.div.style.height = Math.max(1, this.height) + 'px';\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes. This does\n * normally not need to be called, it is called automatically when the\n * window unloads.\n */\nmxRubberband.prototype.destroy = function()\n{\n\tif (!this.destroyed)\n\t{\n\t\tthis.destroyed = true;\n\t\tthis.graph.removeMouseListener(this);\n\t\tthis.graph.removeListener(this.forceRubberbandHandler);\n\t\tthis.graph.removeListener(this.panHandler);\n\t\tthis.reset();\n\t\t\n\t\tif (this.sharedDiv != null)\n\t\t{\n\t\t\tthis.sharedDiv = null;\n\t\t}\n\t}\n};\n\n__mxOutput.mxRubberband = typeof mxRubberband !== 'undefined' ? mxRubberband : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxHandle\n * \n * Implements a single custom handle for vertices.\n * \n * Constructor: mxHandle\n * \n * Constructs a new handle for the given state.\n * \n * Parameters:\n * \n * state - <mxCellState> of the cell to be handled.\n */\nfunction mxHandle(state, cursor, image, shape)\n{\n\tthis.graph = state.view.graph;\n\tthis.state = state;\n\tthis.cursor = (cursor != null) ? cursor : this.cursor;\n\tthis.image = (image != null) ? image : this.image;\n\tthis.shape = (shape != null) ? shape : null;\n\tthis.init();\n};\n\n/**\n * Variable: cursor\n * \n * Specifies the cursor to be used for this handle. Default is 'default'.\n */\nmxHandle.prototype.cursor = 'default';\n\n/**\n * Variable: image\n * \n * Specifies the <mxImage> to be used to render the handle. Default is null.\n */\nmxHandle.prototype.image = null;\n\n/**\n * Variable: ignoreGrid\n * \n * Default is false.\n */\nmxHandle.prototype.ignoreGrid = false;\n\n/**\n * Function: getPosition\n * \n * Hook for subclassers to return the current position of the handle.\n */\nmxHandle.prototype.getPosition = function(bounds) { };\n\n/**\n * Function: setPosition\n * \n * Hooks for subclassers to update the style in the <state>.\n */\nmxHandle.prototype.setPosition = function(bounds, pt, me) { };\n\n/**\n * Function: execute\n * \n * Hook for subclassers to execute the handle.\n */\nmxHandle.prototype.execute = function(me) { };\n\n/**\n * Function: copyStyle\n * \n * Sets the cell style with the given name to the corresponding value in <state>.\n */\nmxHandle.prototype.copyStyle = function(key)\n{\n\tthis.graph.setCellStyles(key, this.state.style[key], [this.state.cell]);\n};\n\n/**\n * Function: processEvent\n * \n * Processes the given <mxMouseEvent> and invokes <setPosition>.\n */\nmxHandle.prototype.processEvent = function(me)\n{\n\tvar scale = this.graph.view.scale;\n\tvar tr = this.graph.view.translate;\n\tvar pt = new mxPoint(me.getGraphX() / scale - tr.x, me.getGraphY() / scale - tr.y);\n\t\n\t// Center shape on mouse cursor\n\tif (this.shape != null && this.shape.bounds != null)\n\t{\n\t\tpt.x -= this.shape.bounds.width / scale / 4;\n\t\tpt.y -= this.shape.bounds.height / scale / 4;\n\t}\n\n\t// Snaps to grid for the rotated position then applies the rotation for the direction after that\n\tvar alpha1 = -mxUtils.toRadians(this.getRotation());\n\tvar alpha2 = -mxUtils.toRadians(this.getTotalRotation()) - alpha1;\n\tpt = this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(pt, alpha1),\n\t\t\tthis.ignoreGrid || !this.graph.isGridEnabledEvent(me.getEvent())), alpha2));\n\tthis.setPosition(this.state.getPaintBounds(), pt, me);\n\tthis.redraw();\n};\n\n/**\n * Function: positionChanged\n * \n * Should be called after <setPosition> in <processEvent>.\n * This repaints the state using <mxCellRenderer>.\n */\nmxHandle.prototype.positionChanged = function()\n{\n\tif (this.state.text != null)\n\t{\n\t\tthis.state.text.apply(this.state);\n\t}\n\t\n\tif (this.state.shape != null)\n\t{\n\t\tthis.state.shape.apply(this.state);\n\t}\n\t\n\tthis.graph.cellRenderer.redraw(this.state, true);\n};\n\n/**\n * Function: getRotation\n * \n * Returns the rotation defined in the style of the cell.\n */\nmxHandle.prototype.getRotation = function()\n{\n\tif (this.state.shape != null)\n\t{\n\t\treturn this.state.shape.getRotation();\n\t}\n\t\n\treturn 0;\n};\n\n/**\n * Function: getTotalRotation\n * \n * Returns the rotation from the style and the rotation from the direction of\n * the cell.\n */\nmxHandle.prototype.getTotalRotation = function()\n{\n\tif (this.state.shape != null)\n\t{\n\t\treturn this.state.shape.getShapeRotation();\n\t}\n\t\n\treturn 0;\n};\n\n/**\n * Function: init\n * \n * Creates and initializes the shapes required for this handle.\n */\nmxHandle.prototype.init = function()\n{\n\tvar html = this.isHtmlRequired();\n\t\n\tif (this.image != null)\n\t{\n\t\tthis.shape = new mxImageShape(new mxRectangle(0, 0, this.image.width, this.image.height), this.image.src);\n\t\tthis.shape.preserveImageAspect = false;\n\t}\n\telse if (this.shape == null)\n\t{\n\t\tthis.shape = this.createShape(html);\n\t}\n\t\n\tthis.initShape(html);\n};\n\n/**\n * Function: createShape\n * \n * Creates and returns the shape for this handle.\n */\nmxHandle.prototype.createShape = function(html)\n{\n\tvar bounds = new mxRectangle(0, 0, mxConstants.HANDLE_SIZE, mxConstants.HANDLE_SIZE);\n\t\n\treturn new mxRectangleShape(bounds, mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);\n};\n\n/**\n * Function: initShape\n * \n * Initializes <shape> and sets its cursor.\n */\nmxHandle.prototype.initShape = function(html)\n{\n\tif (html && this.shape.isHtmlAllowed())\n\t{\n\t\tthis.shape.dialect = mxConstants.DIALECT_STRICTHTML;\n\t\tthis.shape.init(this.graph.container);\n\t}\n\telse\n\t{\n\t\tthis.shape.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\tmxConstants.DIALECT_MIXEDHTML : mxConstants.DIALECT_SVG;\n\t\t\n\t\tif (this.cursor != null)\n\t\t{\n\t\t\tthis.shape.init(this.graph.getView().getOverlayPane());\n\t\t}\n\t}\n\n\tmxEvent.redirectMouseEvents(this.shape.node, this.graph, this.state);\n\tthis.shape.node.style.cursor = this.cursor;\n};\n\n/**\n * Function: redraw\n * \n * Renders the shape for this handle.\n */\nmxHandle.prototype.redraw = function()\n{\n\tif (this.shape != null && this.state.shape != null)\n\t{\n\t\tvar pt = this.getPosition(this.state.getPaintBounds());\n\t\t\n\t\tif (pt != null)\n\t\t{\n\t\t\tvar alpha = mxUtils.toRadians(this.getTotalRotation());\n\t\t\tpt = this.rotatePoint(this.flipPoint(pt), alpha);\n\t\n\t\t\tvar scale = this.graph.view.scale;\n\t\t\tvar tr = this.graph.view.translate;\n\t\t\tthis.shape.bounds.x = Math.floor((pt.x + tr.x) * scale - this.shape.bounds.width / 2);\n\t\t\tthis.shape.bounds.y = Math.floor((pt.y + tr.y) * scale - this.shape.bounds.height / 2);\n\t\t\t\n\t\t\t// Needed to force update of text bounds\n\t\t\tthis.shape.redraw();\n\t\t}\n\t}\n};\n\n/**\n * Function: isHtmlRequired\n * \n * Returns true if this handle should be rendered in HTML. This returns true if\n * the text node is in the graph container.\n */\nmxHandle.prototype.isHtmlRequired = function()\n{\n\treturn this.state.text != null && this.state.text.node.parentNode == this.graph.container;\n};\n\n/**\n * Function: rotatePoint\n * \n * Rotates the point by the given angle.\n */\nmxHandle.prototype.rotatePoint = function(pt, alpha)\n{\n\tvar bounds = this.state.getCellBounds();\n\tvar cx = new mxPoint(bounds.getCenterX(), bounds.getCenterY());\n\tvar cos = Math.cos(alpha);\n\tvar sin = Math.sin(alpha); \n\n\treturn mxUtils.getRotatedPoint(pt, cos, sin, cx);\n};\n\n/**\n * Function: flipPoint\n * \n * Flips the given point vertically and/or horizontally.\n */\nmxHandle.prototype.flipPoint = function(pt)\n{\n\tif (this.state.shape != null)\n\t{\n\t\tvar bounds = this.state.getCellBounds();\n\t\t\n\t\tif (this.state.shape.flipH)\n\t\t{\n\t\t\tpt.x = 2 * bounds.x + bounds.width - pt.x;\n\t\t}\n\t\t\n\t\tif (this.state.shape.flipV)\n\t\t{\n\t\t\tpt.y = 2 * bounds.y + bounds.height - pt.y;\n\t\t}\n\t}\n\t\n\treturn pt;\n};\n\n/**\n * Function: snapPoint\n * \n * Snaps the given point to the grid if ignore is false. This modifies\n * the given point in-place and also returns it.\n */\nmxHandle.prototype.snapPoint = function(pt, ignore)\n{\n\tif (!ignore)\n\t{\n\t\tpt.x = this.graph.snap(pt.x);\n\t\tpt.y = this.graph.snap(pt.y);\n\t}\n\t\n\treturn pt;\n};\n\n/**\n * Function: setVisible\n * \n * Shows or hides this handle.\n */\nmxHandle.prototype.setVisible = function(visible)\n{\n\tif (this.shape != null && this.shape.node != null)\n\t{\n\t\tthis.shape.node.style.display = (visible) ? '' : 'none';\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this handle by setting its visibility to true.\n */\nmxHandle.prototype.reset = function()\n{\n\tthis.setVisible(true);\n\tthis.state.style = this.graph.getCellStyle(this.state.cell);\n\tthis.positionChanged();\n};\n\n/**\n * Function: destroy\n * \n * Destroys this handle.\n */\nmxHandle.prototype.destroy = function()\n{\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.destroy();\n\t\tthis.shape = null;\n\t}\n};\n\n__mxOutput.mxHandle = typeof mxHandle !== 'undefined' ? mxHandle : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxVertexHandler\n * \n * Event handler for resizing cells. This handler is automatically created in\n * <mxGraph.createHandler>.\n * \n * Constructor: mxVertexHandler\n * \n * Constructs an event handler that allows to resize vertices\n * and groups.\n * \n * Parameters:\n * \n * state - <mxCellState> of the cell to be resized.\n */\nfunction mxVertexHandler(state)\n{\n\tif (state != null)\n\t{\n\t\tthis.state = state;\n\t\tthis.init();\n\t\t\n\t\t// Handles escape keystrokes\n\t\tthis.escapeHandler = mxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tif (this.livePreview && this.index != null)\n\t\t\t{\n\t\t\t\t// Redraws the live preview\n\t\t\t\tthis.state.view.graph.cellRenderer.redraw(this.state, true);\n\t\t\t\t\n\t\t\t\t// Redraws connected edges\n\t\t\t\tthis.state.view.invalidate(this.state.cell);\n\t\t\t\tthis.state.invalid = false;\n\t\t\t\tthis.state.view.validate();\n\t\t\t}\n\t\t\t\n\t\t\tthis.reset();\n\t\t});\n\t\t\n\t\tthis.state.view.graph.addListener(mxEvent.ESCAPE, this.escapeHandler);\n\t}\n};\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxVertexHandler.prototype.graph = null;\n\n/**\n * Variable: state\n * \n * Reference to the <mxCellState> being modified.\n */\nmxVertexHandler.prototype.state = null;\n\n/**\n * Variable: singleSizer\n * \n * Specifies if only one sizer handle at the bottom, right corner should be\n * used. Default is false.\n */\nmxVertexHandler.prototype.singleSizer = false;\n\n/**\n * Variable: index\n * \n * Holds the index of the current handle.\n */\nmxVertexHandler.prototype.index = null;\n\n/**\n * Variable: allowHandleBoundsCheck\n * \n * Specifies if the bounds of handles should be used for hit-detection in IE or\n * if <tolerance> > 0. Default is true.\n */\nmxVertexHandler.prototype.allowHandleBoundsCheck = true;\n\n/**\n * Variable: handleImage\n * \n * Optional <mxImage> to be used as handles. Default is null.\n */\nmxVertexHandler.prototype.handleImage = null;\n\n/**\n * Variable: handlesVisible\n * \n * If handles are currently visible.\n */\nmxVertexHandler.prototype.handlesVisible = true;\n\n/**\n * Variable: tolerance\n * \n * Optional tolerance for hit-detection in <getHandleForEvent>. Default is 0.\n */\nmxVertexHandler.prototype.tolerance = 0;\n\n/**\n * Variable: rotationEnabled\n * \n * Specifies if a rotation handle should be visible. Default is false.\n */\nmxVertexHandler.prototype.rotationEnabled = false;\n\n/**\n * Variable: parentHighlightEnabled\n * \n * Specifies if the parent should be highlighted if a child cell is selected.\n * Default is false.\n */\nmxVertexHandler.prototype.parentHighlightEnabled = false;\n\n/**\n * Variable: rotationRaster\n * \n * Specifies if rotation steps should be \"rasterized\" depening on the distance\n * to the handle. Default is true.\n */\nmxVertexHandler.prototype.rotationRaster = true;\n\n/**\n * Variable: rotationCursor\n * \n * Specifies the cursor for the rotation handle. Default is 'crosshair'.\n */\nmxVertexHandler.prototype.rotationCursor = 'crosshair';\n\n/**\n * Variable: livePreview\n * \n * Specifies if resize should change the cell in-place. This is an experimental\n * feature for non-touch devices. Default is false.\n */\nmxVertexHandler.prototype.livePreview = false;\n\n/**\n * Variable: movePreviewToFront\n * \n * Specifies if the live preview should be moved to the front.\n */\nmxVertexHandler.prototype.movePreviewToFront = false;\n\n/**\n * Variable: manageSizers\n * \n * Specifies if sizers should be hidden and spaced if the vertex is small.\n * Default is false.\n */\nmxVertexHandler.prototype.manageSizers = false;\n\n/**\n * Variable: constrainGroupByChildren\n * \n * Specifies if the size of groups should be constrained by the children.\n * Default is false.\n */\nmxVertexHandler.prototype.constrainGroupByChildren = false;\n\n/**\n * Variable: rotationHandleVSpacing\n * \n * Vertical spacing for rotation icon. Default is -16.\n */\nmxVertexHandler.prototype.rotationHandleVSpacing = -16;\n\n/**\n * Variable: horizontalOffset\n * \n * The horizontal offset for the handles. This is updated in <redrawHandles>\n * if <manageSizers> is true and the sizers are offset horizontally.\n */\nmxVertexHandler.prototype.horizontalOffset = 0;\n\n/**\n * Variable: verticalOffset\n * \n * The horizontal offset for the handles. This is updated in <redrawHandles>\n * if <manageSizers> is true and the sizers are offset vertically.\n */\nmxVertexHandler.prototype.verticalOffset = 0;\n\n/**\n * Function: init\n * \n * Initializes the shapes required for this vertex handler.\n */\nmxVertexHandler.prototype.init = function()\n{\n\tthis.graph = this.state.view.graph;\n\tthis.selectionBounds = this.getSelectionBounds(this.state);\n\tthis.bounds = new mxRectangle(this.selectionBounds.x, this.selectionBounds.y, this.selectionBounds.width, this.selectionBounds.height);\n\tthis.selectionBorder = this.createSelectionShape(this.bounds);\n\t// VML dialect required here for event transparency in IE\n\tthis.selectionBorder.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ? mxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\tthis.selectionBorder.pointerEvents = false;\n\tthis.selectionBorder.rotation = Number(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\tthis.selectionBorder.init(this.graph.getView().getOverlayPane());\n\tmxEvent.redirectMouseEvents(this.selectionBorder.node, this.graph, this.state);\n\t\n\tif (this.graph.isCellMovable(this.state.cell))\n\t{\n\t\tthis.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX);\n\t}\n\n\t// Adds the sizer handles\n\tif (mxGraphHandler.prototype.maxCells <= 0 || this.graph.getSelectionCount() < mxGraphHandler.prototype.maxCells)\n\t{\n\t\tvar resizable = this.graph.isCellResizable(this.state.cell);\n\t\tthis.sizers = [];\n\n\t\tif (resizable || (this.graph.isLabelMovable(this.state.cell) &&\n\t\t\tthis.state.width >= 2 && this.state.height >= 2))\n\t\t{\n\t\t\tvar i = 0;\n\n\t\t\tif (resizable)\n\t\t\t{\n\t\t\t\tif (!this.singleSizer)\n\t\t\t\t{\n\t\t\t\t\tthis.sizers.push(this.createSizer('nw-resize', i++));\n\t\t\t\t\tthis.sizers.push(this.createSizer('n-resize', i++));\n\t\t\t\t\tthis.sizers.push(this.createSizer('ne-resize', i++));\n\t\t\t\t\tthis.sizers.push(this.createSizer('w-resize', i++));\n\t\t\t\t\tthis.sizers.push(this.createSizer('e-resize', i++));\n\t\t\t\t\tthis.sizers.push(this.createSizer('sw-resize', i++));\n\t\t\t\t\tthis.sizers.push(this.createSizer('s-resize', i++));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.sizers.push(this.createSizer('se-resize', i++));\n\t\t\t}\n\t\t\t\n\t\t\tvar geo = this.graph.model.getGeometry(this.state.cell);\n\t\t\t\n\t\t\tif (geo != null && !geo.relative && !this.graph.isSwimlane(this.state.cell) &&\n\t\t\t\tthis.graph.isLabelMovable(this.state.cell))\n\t\t\t{\n\t\t\t\t// Marks this as the label handle for getHandleForEvent\n\t\t\t\tthis.labelShape = this.createSizer(mxConstants.CURSOR_LABEL_HANDLE, mxEvent.LABEL_HANDLE,\n\t\t\t\t\tmxConstants.LABEL_HANDLE_SIZE, mxConstants.LABEL_HANDLE_FILLCOLOR);\n\t\t\t\tthis.sizers.push(this.labelShape);\n\t\t\t}\n\t\t}\n\t\telse if (this.graph.isCellMovable(this.state.cell) && !this.graph.isCellResizable(this.state.cell) &&\n\t\t\tthis.state.width < 2 && this.state.height < 2)\n\t\t{\n\t\t\tthis.labelShape = this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,\n\t\t\t\tmxEvent.LABEL_HANDLE, null, mxConstants.LABEL_HANDLE_FILLCOLOR);\n\t\t\tthis.sizers.push(this.labelShape);\n\t\t}\n\t}\n\t\n\t// Adds the rotation handler\n\tif (this.isRotationHandleVisible())\n\t{\n\t\tthis.rotationShape = this.createSizer(this.rotationCursor, mxEvent.ROTATION_HANDLE,\n\t\t\tmxConstants.HANDLE_SIZE + 3, mxConstants.HANDLE_FILLCOLOR);\n\t\tthis.sizers.push(this.rotationShape);\n\t}\n\n\tthis.customHandles = this.createCustomHandles();\n\tthis.redraw();\n\t\n\tif (this.constrainGroupByChildren)\n\t{\n\t\tthis.updateMinBounds();\n\t}\n};\n\n/**\n * Function: isRotationHandleVisible\n * \n * Returns true if the rotation handle should be showing.\n */\nmxVertexHandler.prototype.isRotationHandleVisible = function()\n{\n\treturn this.graph.isEnabled() && this.rotationEnabled && this.graph.isCellRotatable(this.state.cell) &&\n\t\t(mxGraphHandler.prototype.maxCells <= 0 || this.graph.getSelectionCount() < mxGraphHandler.prototype.maxCells);\n};\n\n/**\n * Function: isConstrainedEvent\n * \n * Returns true if the aspect ratio if the cell should be maintained.\n */\nmxVertexHandler.prototype.isConstrainedEvent = function(me)\n{\n\treturn mxEvent.isShiftDown(me.getEvent()) || this.state.style[mxConstants.STYLE_ASPECT] == 'fixed';\n};\n\n/**\n * Function: isCenteredEvent\n * \n * Returns true if the center of the vertex should be maintained during the resize.\n */\nmxVertexHandler.prototype.isCenteredEvent = function(state, me)\n{\n\treturn false;\n};\n\n/**\n * Function: createCustomHandles\n * \n * Returns an array of custom handles. This implementation returns null.\n */\nmxVertexHandler.prototype.createCustomHandles = function()\n{\n\treturn null;\n};\n\n/**\n * Function: updateMinBounds\n * \n * Initializes the shapes required for this vertex handler.\n */\nmxVertexHandler.prototype.updateMinBounds = function()\n{\n\tvar children = this.graph.getChildCells(this.state.cell);\n\t\n\tif (children.length > 0)\n\t{\n\t\tthis.minBounds = this.graph.view.getBounds(children);\n\t\t\n\t\tif (this.minBounds != null)\n\t\t{\n\t\t\tvar s = this.state.view.scale;\n\t\t\tvar t = this.state.view.translate;\n\n\t\t\tthis.minBounds.x -= this.state.x;\n\t\t\tthis.minBounds.y -= this.state.y;\n\t\t\tthis.minBounds.x /= s;\n\t\t\tthis.minBounds.y /= s;\n\t\t\tthis.minBounds.width /= s;\n\t\t\tthis.minBounds.height /= s;\n\t\t\tthis.x0 = this.state.x / s - t.x;\n\t\t\tthis.y0 = this.state.y / s - t.y;\n\t\t}\n\t}\n};\n\n/**\n * Function: getSelectionBounds\n * \n * Returns the mxRectangle that defines the bounds of the selection\n * border.\n */\nmxVertexHandler.prototype.getSelectionBounds = function(state)\n{\n\treturn new mxRectangle(Math.round(state.x), Math.round(state.y), Math.round(state.width), Math.round(state.height));\n};\n\n/**\n * Function: createParentHighlightShape\n * \n * Creates the shape used to draw the selection border.\n */\nmxVertexHandler.prototype.createParentHighlightShape = function(bounds)\n{\n\treturn this.createSelectionShape(bounds);\n};\n\n/**\n * Function: createSelectionShape\n * \n * Creates the shape used to draw the selection border.\n */\nmxVertexHandler.prototype.createSelectionShape = function(bounds)\n{\n\tvar shape = new mxRectangleShape(\n\t\tmxRectangle.fromRectangle(bounds),\n\t\tnull, this.getSelectionColor());\n\tshape.strokewidth = this.getSelectionStrokeWidth();\n\tshape.isDashed = this.isSelectionDashed();\n\t\n\treturn shape;\n};\n\n/**\n * Function: getSelectionColor\n * \n * Returns <mxConstants.VERTEX_SELECTION_COLOR>.\n */\nmxVertexHandler.prototype.getSelectionColor = function()\n{\n\treturn mxConstants.VERTEX_SELECTION_COLOR;\n};\n\n/**\n * Function: getSelectionStrokeWidth\n * \n * Returns <mxConstants.VERTEX_SELECTION_STROKEWIDTH>.\n */\nmxVertexHandler.prototype.getSelectionStrokeWidth = function()\n{\n\treturn mxConstants.VERTEX_SELECTION_STROKEWIDTH;\n};\n\n/**\n * Function: isSelectionDashed\n * \n * Returns <mxConstants.VERTEX_SELECTION_DASHED>.\n */\nmxVertexHandler.prototype.isSelectionDashed = function()\n{\n\treturn mxConstants.VERTEX_SELECTION_DASHED;\n};\n\n/**\n * Function: createSizer\n * \n * Creates a sizer handle for the specified cursor and index and returns\n * the new <mxRectangleShape> that represents the handle.\n */\nmxVertexHandler.prototype.createSizer = function(cursor, index, size, fillColor)\n{\n\tsize = size || mxConstants.HANDLE_SIZE;\n\t\n\tvar bounds = new mxRectangle(0, 0, size, size);\n\tvar sizer = this.createSizerShape(bounds, index, fillColor);\n\n\tif (sizer.isHtmlAllowed() && this.state.text != null && this.state.text.node.parentNode == this.graph.container)\n\t{\n\t\tsizer.bounds.height -= 1;\n\t\tsizer.bounds.width -= 1;\n\t\tsizer.dialect = mxConstants.DIALECT_STRICTHTML;\n\t\tsizer.init(this.graph.container);\n\t}\n\telse\n\t{\n\t\tsizer.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\t\tmxConstants.DIALECT_MIXEDHTML : mxConstants.DIALECT_SVG;\n\t\tsizer.init(this.graph.getView().getOverlayPane());\n\t}\n\n\tmxEvent.redirectMouseEvents(sizer.node, this.graph, this.state);\n\t\n\tif (this.graph.isEnabled())\n\t{\n\t\tsizer.setCursor(cursor);\n\t}\n\t\n\tif (!this.isSizerVisible(index))\n\t{\n\t\tsizer.visible = false;\n\t}\n\t\n\treturn sizer;\n};\n\n/**\n * Function: isSizerVisible\n * \n * Returns true if the sizer for the given index is visible.\n * This returns true for all given indices.\n */\nmxVertexHandler.prototype.isSizerVisible = function(index)\n{\n\treturn true;\n};\n\n/**\n * Function: createSizerShape\n * \n * Creates the shape used for the sizer handle for the specified bounds an\n * index. Only images and rectangles should be returned if support for HTML\n * labels with not foreign objects is required.\n */\nmxVertexHandler.prototype.createSizerShape = function(bounds, index, fillColor)\n{\n\tif (this.handleImage != null)\n\t{\n\t\tbounds = new mxRectangle(bounds.x, bounds.y, this.handleImage.width, this.handleImage.height);\n\t\tvar shape = new mxImageShape(bounds, this.handleImage.src);\n\t\t\n\t\t// Allows HTML rendering of the images\n\t\tshape.preserveImageAspect = false;\n\n\t\treturn shape;\n\t}\n\telse if (index == mxEvent.ROTATION_HANDLE)\n\t{\n\t\treturn new mxEllipse(bounds, fillColor || mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);\n\t}\n\telse\n\t{\n\t\treturn new mxRectangleShape(bounds, fillColor || mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);\n\t}\n};\n\n/**\n * Function: createBounds\n * \n * Helper method to create an <mxRectangle> around the given centerpoint\n * with a width and height of 2*s or 6, if no s is given.\n */\nmxVertexHandler.prototype.moveSizerTo = function(shape, x, y)\n{\n\tif (shape != null)\n\t{\n\t\tshape.bounds.x = Math.floor(x - shape.bounds.width / 2);\n\t\tshape.bounds.y = Math.floor(y - shape.bounds.height / 2);\n\t\t\n\t\t// Fixes visible inactive handles in VML\n\t\tif (shape.node != null && shape.node.style.display != 'none')\n\t\t{\n\t\t\tshape.redraw();\n\t\t}\n\t}\n};\n\n/**\n * Function: getHandleForEvent\n * \n * Returns the index of the handle for the given event. This returns the index\n * of the sizer from where the event originated or <mxEvent.LABEL_INDEX>.\n */\nmxVertexHandler.prototype.getHandleForEvent = function(me)\n{\n\t// Connection highlight may consume events before they reach sizer handle\n\tvar tol = (!mxEvent.isMouseEvent(me.getEvent())) ? this.tolerance : 1;\n\tvar hit = (this.allowHandleBoundsCheck && (mxClient.IS_IE || tol > 0)) ?\n\t\tnew mxRectangle(me.getGraphX() - tol, me.getGraphY() - tol, 2 * tol, 2 * tol) : null;\n\n\tvar checkShape = mxUtils.bind(this, function(shape)\n\t{\n\t\tvar st = (shape != null && shape.constructor != mxImageShape &&\n\t\t\tthis.allowHandleBoundsCheck) ? shape.strokewidth + shape.svgStrokeTolerance : null;\n\t\tvar real = (st != null) ? new mxRectangle(me.getGraphX() - Math.floor(st / 2),\n\t\t\tme.getGraphY() - Math.floor(st / 2), st, st) : hit;\n\n\t\treturn shape != null && (me.isSource(shape) || (real != null && mxUtils.intersects(shape.bounds, real) &&\n\t\t\tshape.node.style.display != 'none' && shape.node.style.visibility != 'hidden'));\n\t});\n\t\n\tif (checkShape(this.rotationShape))\n\t{\n\t\treturn mxEvent.ROTATION_HANDLE;\n\t}\n\telse if (checkShape(this.labelShape))\n\t{\n\t\treturn mxEvent.LABEL_HANDLE;\n\t}\n\n\tif (this.sizers != null)\n\t{\n\t\tfor (var i = 0; i < this.sizers.length; i++)\n\t\t{\n\t\t\tif (checkShape(this.sizers[i]))\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.customHandles != null && this.isCustomHandleEvent(me))\n\t{\n\t\t// Inverse loop order to match display order\n\t\tfor (var i = this.customHandles.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tif (checkShape(this.customHandles[i].shape))\n\t\t\t{\n\t\t\t\t// LATER: Return reference to active shape\n\t\t\t\treturn mxEvent.CUSTOM_HANDLE - i;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n};\n\n/**\n * Function: isCustomHandleEvent\n * \n * Returns true if the given event allows custom handles to be changed. This\n * implementation returns true.\n */\nmxVertexHandler.prototype.isCustomHandleEvent = function(me)\n{\n\treturn true;\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event if a handle has been clicked. By consuming the\n * event all subsequent events of the gesture are redirected to this\n * handler.\n */\nmxVertexHandler.prototype.mouseDown = function(sender, me)\n{\n\tif (!me.isConsumed() && this.graph.isEnabled())\n\t{\n\t\tvar handle = this.getHandleForEvent(me);\n\n\t\tif (handle != null)\n\t\t{\n\t\t\tthis.start(me.getGraphX(), me.getGraphY(), handle);\n\t\t\tme.consume();\n\t\t}\n\t}\n};\n\n/**\n * Function: isLivePreviewBorder\n * \n * Called if <livePreview> is enabled to check if a border should be painted.\n * This implementation returns true if the shape is transparent.\n */\nmxVertexHandler.prototype.isLivePreviewBorder = function()\n{\n\treturn this.state.shape != null && this.state.shape.fill == null && this.state.shape.stroke == null;\n};\n\n/**\n * Function: start\n * \n * Starts the handling of the mouse gesture.\n */\nmxVertexHandler.prototype.start = function(x, y, index)\n{\n\tif (this.selectionBorder != null)\n\t{\n\t\tthis.livePreviewActive = this.livePreview && this.graph.model.getChildCount(this.state.cell) == 0;\n\t\tthis.inTolerance = true;\n\t\tthis.childOffsetX = 0;\n\t\tthis.childOffsetY = 0;\n\t\tthis.index = index;\n\t\tthis.startX = x;\n\t\tthis.startY = y;\n\t\t\n\t\tif (this.index <= mxEvent.CUSTOM_HANDLE && this.isGhostPreview())\n\t\t{\n\t\t\tthis.ghostPreview = this.createGhostPreview();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Saves reference to parent state\n\t\t\tvar model = this.state.view.graph.model;\n\t\t\tvar parent = model.getParent(this.state.cell);\n\t\t\t\n\t\t\tif (this.state.view.currentRoot != parent && (model.isVertex(parent) || model.isEdge(parent)))\n\t\t\t{\n\t\t\t\tthis.parentState = this.state.view.graph.view.getState(parent);\n\t\t\t}\n\t\t\t\n\t\t\t// Creates a preview that can be on top of any HTML label\n\t\t\tthis.selectionBorder.node.style.display = (index == mxEvent.ROTATION_HANDLE) ? 'inline' : 'none';\n\t\t\t\n\t\t\t// Creates the border that represents the new bounds\n\t\t\tif (!this.livePreviewActive || this.isLivePreviewBorder())\n\t\t\t{\n\t\t\t\tthis.preview = this.createSelectionShape(this.bounds);\n\t\t\t\t\n\t\t\t\tif (!(mxClient.IS_SVG && Number(this.state.style[mxConstants.STYLE_ROTATION] || '0') != 0) &&\n\t\t\t\t\tthis.state.text != null && this.state.text.node.parentNode == this.graph.container)\n\t\t\t\t{\n\t\t\t\t\tthis.preview.dialect = mxConstants.DIALECT_STRICTHTML;\n\t\t\t\t\tthis.preview.init(this.graph.container);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.preview.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\t\t\t\t\tmxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\t\t\t\t\tthis.preview.init(this.graph.view.getOverlayPane());\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (index == mxEvent.ROTATION_HANDLE)\n\t\t\t{\n\t\t\t\t// With the rotation handle in a corner, need the angle and distance\n\t\t\t\tvar pos = this.getRotationHandlePosition();\n\t\t\t\t\n\t\t\t\tvar dx = pos.x - this.state.getCenterX();\n\t\t\t\tvar dy = pos.y - this.state.getCenterY();\n\t\t\t\t\n\t\t\t\tthis.startAngle = (dx != 0) ? Math.atan(dy / dx) * 180 / Math.PI + 90 : 0;\n\t\t\t\tthis.startDist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t}\n\t\n\t\t\t// Prepares the handles for live preview\n\t\t\tif (this.livePreviewActive)\n\t\t\t{\n\t\t\t\tthis.hideSizers();\n\t\t\t\t\n\t\t\t\tif (index == mxEvent.ROTATION_HANDLE)\n\t\t\t\t{\n\t\t\t\t\tthis.rotationShape.node.style.display = '';\n\t\t\t\t}\n\t\t\t\telse if (index == mxEvent.LABEL_HANDLE)\n\t\t\t\t{\n\t\t\t\t\tthis.labelShape.node.style.display = '';\n\t\t\t\t}\n\t\t\t\telse if (this.sizers != null && this.sizers[index] != null)\n\t\t\t\t{\n\t\t\t\t\tthis.sizers[index].node.style.display = '';\n\t\t\t\t}\n\t\t\t\telse if (index <= mxEvent.CUSTOM_HANDLE && this.customHandles != null)\n\t\t\t\t{\n\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - index].setVisible(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Gets the array of connected edge handlers for redrawing\n\t\t\t\tvar edges = this.graph.getEdges(this.state.cell);\n\t\t\t\tthis.edgeHandlers = [];\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < edges.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar handler = this.graph.selectionCellsHandler.getHandler(edges[i]);\n\t\t\t\t\t\n\t\t\t\t\tif (handler != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.edgeHandlers.push(handler);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: createGhostPreview\n * \n * Starts the handling of the mouse gesture.\n */\nmxVertexHandler.prototype.createGhostPreview = function()\n{\n\tvar shape = this.graph.cellRenderer.createShape(this.state);\n\tshape.init(this.graph.view.getOverlayPane());\n\tshape.scale = this.state.view.scale;\n\tshape.bounds = this.bounds;\n\tshape.outline = true;\n\t\n\treturn shape;\n};\n\n/**\n * Function: hideHandles\n * \n * Shortcut to <hideSizers>.\n */\nmxVertexHandler.prototype.setHandlesVisible = function(visible)\n{\n\tthis.handlesVisible = visible;\n\t\n\tif (this.sizers != null)\n\t{\n\t\tfor (var i = 0; i < this.sizers.length; i++)\n\t\t{\n\t\t\tthis.sizers[i].node.style.display = (visible) ? '' : 'none';\n\t\t}\n\t}\n\n\tif (this.customHandles != null)\n\t{\n\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t{\n\t\t\tthis.customHandles[i].setVisible(visible);\n\t\t}\n\t}\n};\n\n/**\n * Function: hideSizers\n * \n * Hides all sizers except.\n * \n * Starts the handling of the mouse gesture.\n */\nmxVertexHandler.prototype.hideSizers = function()\n{\n\tthis.setHandlesVisible(false);\n};\n\n/**\n * Function: checkTolerance\n * \n * Checks if the coordinates for the given event are within the\n * <mxGraph.tolerance>. If the event is a mouse event then the tolerance is\n * ignored.\n */\nmxVertexHandler.prototype.checkTolerance = function(me)\n{\n\tif (this.inTolerance && this.startX != null && this.startY != null)\n\t{\n\t\tif (mxEvent.isMouseEvent(me.getEvent()) ||\n\t\t\tMath.abs(me.getGraphX() - this.startX) > this.graph.tolerance ||\n\t\t\tMath.abs(me.getGraphY() - this.startY) > this.graph.tolerance)\n\t\t{\n\t\t\tthis.inTolerance = false;\n\t\t}\n\t}\n};\n\n/**\n * Function: updateHint\n * \n * Hook for subclassers do show details while the handler is active.\n */\nmxVertexHandler.prototype.updateHint = function(me) { };\n\n/**\n * Function: removeHint\n * \n * Hooks for subclassers to hide details when the handler gets inactive.\n */\nmxVertexHandler.prototype.removeHint = function() { };\n\n/**\n * Function: roundAngle\n * \n * Hook for rounding the angle. This uses Math.round.\n */\nmxVertexHandler.prototype.roundAngle = function(angle)\n{\n\treturn Math.round(angle * 10) / 10;\n};\n\n/**\n * Function: roundLength\n * \n * Hook for rounding the unscaled width or height. This uses Math.round.\n */\nmxVertexHandler.prototype.roundLength = function(length)\n{\n\treturn Math.round(length * 100) / 100;\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating the preview.\n */\nmxVertexHandler.prototype.mouseMove = function(sender, me)\n{\n\tif (!me.isConsumed() && this.index != null)\n\t{\n\t\t// Checks tolerance for ignoring single clicks\n\t\tthis.checkTolerance(me);\n\n\t\tif (!this.inTolerance)\n\t\t{\n\t\t\tif (this.index <= mxEvent.CUSTOM_HANDLE)\n\t\t\t{\n\t\t\t\tif (this.customHandles != null)\n\t\t\t\t{\n\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - this.index].processEvent(me);\n\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - this.index].active = true;\n\t\t\t\t\t\n\t\t\t\t\tif (this.ghostPreview != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ghostPreview.apply(this.state);\n\t\t\t\t\t\tthis.ghostPreview.strokewidth = this.getSelectionStrokeWidth() /\n\t\t\t\t\t\t\tthis.ghostPreview.scale / this.ghostPreview.scale;\n\t\t\t\t\t\tthis.ghostPreview.isDashed = this.isSelectionDashed();\n\t\t\t\t\t\tthis.ghostPreview.stroke = this.getSelectionColor();\n\t\t\t\t\t\tthis.ghostPreview.redraw();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (this.selectionBounds != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.selectionBorder.node.style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.movePreviewToFront)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.moveToFront();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - this.index].positionChanged();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.index == mxEvent.LABEL_HANDLE)\n\t\t\t{\n\t\t\t\tthis.moveLabel(me);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.index == mxEvent.ROTATION_HANDLE)\n\t\t\t\t{\n\t\t\t\t\tthis.rotateVertex(me);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.resizeVertex(me);\n\t\t\t\t}\n\n\t\t\t\tthis.updateHint(me);\n\t\t\t}\n\t\t}\n\t\t\n\t\tme.consume();\n\t}\n\t// Workaround for disabling the connect highlight when over handle\n\telse if (!this.graph.isMouseDown && this.getHandleForEvent(me) != null)\n\t{\n\t\tme.consume(false);\n\t}\n};\n\n/**\n * Function: isGhostPreview\n * \n * Returns true if a ghost preview should be used for custom handles.\n */\nmxVertexHandler.prototype.isGhostPreview = function()\n{\n\treturn this.state.view.graph.model.getChildCount(this.state.cell) > 0;\n};\n\n/**\n * Function: moveLabel\n * \n * Moves the label.\n */\nmxVertexHandler.prototype.moveLabel = function(me)\n{\n\tvar point = new mxPoint(me.getGraphX(), me.getGraphY());\n\tvar tr = this.graph.view.translate;\n\tvar scale = this.graph.view.scale;\n\t\n\tif (this.graph.isGridEnabledEvent(me.getEvent()))\n\t{\n\t\tpoint.x = (this.graph.snap(point.x / scale - tr.x) + tr.x) * scale;\n\t\tpoint.y = (this.graph.snap(point.y / scale - tr.y) + tr.y) * scale;\n\t}\n\n\tvar index = (this.rotationShape != null) ? this.sizers.length - 2 : this.sizers.length - 1;\n\tthis.moveSizerTo(this.sizers[index], point.x, point.y);\n};\n\n/**\n * Function: rotateVertex\n * \n * Rotates the vertex.\n */\nmxVertexHandler.prototype.rotateVertex = function(me)\n{\n\tvar point = new mxPoint(me.getGraphX(), me.getGraphY());\n\tvar dx = this.state.x + this.state.width / 2 - point.x;\n\tvar dy = this.state.y + this.state.height / 2 - point.y;\n\tthis.currentAlpha = (dx != 0) ? Math.atan(dy / dx) * 180 / Math.PI + 90 : ((dy < 0) ? 180 : 0);\n\t\n\tif (dx > 0)\n\t{\n\t\tthis.currentAlpha -= 180;\n\t}\n\t\n\tthis.currentAlpha -= this.startAngle;\n\t\n\t// Rotation raster\n\tif (this.rotationRaster && this.graph.isGridEnabledEvent(me.getEvent()))\n\t{\n\t\tvar dx = point.x - this.state.getCenterX();\n\t\tvar dy = point.y - this.state.getCenterY();\n\t\tvar dist = Math.sqrt(dx * dx + dy * dy);\n\t\t\n\t\tif (dist - this.startDist < 2)\n\t\t{\n\t\t\traster = 15;\n\t\t}\n\t\telse if (dist - this.startDist < 25)\n\t\t{\n\t\t\traster = 5;\n\t\t}\n\t\telse\n\t\t{\n\t\t\traster = 1;\n\t\t}\n\t\t\n\t\tthis.currentAlpha = Math.round(this.currentAlpha / raster) * raster;\n\t}\n\telse\n\t{\n\t\tthis.currentAlpha = this.roundAngle(this.currentAlpha);\n\t}\n\n\tthis.selectionBorder.rotation = this.currentAlpha;\n\tthis.selectionBorder.redraw();\n\t\t\t\t\t\n\tif (this.livePreviewActive)\n\t{\n\t\tthis.redrawHandles();\n\t}\n};\n\n/**\n * Function: resizeVertex\n * \n * Risizes the vertex.\n */\nmxVertexHandler.prototype.resizeVertex = function(me)\n{\n\tvar ct = new mxPoint(this.state.getCenterX(), this.state.getCenterY());\n\tvar alpha = mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\tvar point = new mxPoint(me.getGraphX(), me.getGraphY());\n\tvar tr = this.graph.view.translate;\n\tvar scale = this.graph.view.scale;\n\tvar cos = Math.cos(-alpha);\n\tvar sin = Math.sin(-alpha);\n\t\n\tvar dx = point.x - this.startX;\n\tvar dy = point.y - this.startY;\n\n\t// Rotates vector for mouse gesture\n\tvar tx = cos * dx - sin * dy;\n\tvar ty = sin * dx + cos * dy;\n\t\n\tdx = tx;\n\tdy = ty;\n\n\tvar geo = this.graph.getCellGeometry(this.state.cell);\n\tthis.unscaledBounds = this.union(geo, dx / scale, dy / scale, this.index,\n\t\tthis.graph.isGridEnabledEvent(me.getEvent()), 1,\n\t\tnew mxPoint(0, 0), this.isConstrainedEvent(me),\n\t\tthis.isCenteredEvent(this.state, me));\n\t\n\t// Keeps vertex within maximum graph or parent bounds\n\tif (!geo.relative)\n\t{\n\t\tvar max = this.graph.getMaximumGraphBounds();\n\t\t\n\t\t// Handles child cells\n\t\tif (max != null && this.parentState != null)\n\t\t{\n\t\t\tmax = mxRectangle.fromRectangle(max);\n\t\t\t\n\t\t\tmax.x -= (this.parentState.x - tr.x * scale) / scale;\n\t\t\tmax.y -= (this.parentState.y - tr.y * scale) / scale;\n\t\t}\n\t\t\n\t\tif (this.graph.isConstrainChild(this.state.cell))\n\t\t{\n\t\t\tvar tmp = this.graph.getCellContainmentArea(this.state.cell);\n\t\t\t\n\t\t\tif (tmp != null)\n\t\t\t{\n\t\t\t\tvar overlap = this.graph.getOverlap(this.state.cell);\n\t\t\t\t\n\t\t\t\tif (overlap > 0)\n\t\t\t\t{\n\t\t\t\t\ttmp = mxRectangle.fromRectangle(tmp);\n\t\t\t\t\t\n\t\t\t\t\ttmp.x -= tmp.width * overlap;\n\t\t\t\t\ttmp.y -= tmp.height * overlap;\n\t\t\t\t\ttmp.width += 2 * tmp.width * overlap;\n\t\t\t\t\ttmp.height += 2 * tmp.height * overlap;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (max == null)\n\t\t\t\t{\n\t\t\t\t\tmax = tmp;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmax = mxRectangle.fromRectangle(max);\n\t\t\t\t\tmax.intersect(tmp);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tif (max != null)\n\t\t{\n\t\t\tif (this.unscaledBounds.x < max.x)\n\t\t\t{\n\t\t\t\tthis.unscaledBounds.width -= max.x - this.unscaledBounds.x;\n\t\t\t\tthis.unscaledBounds.x = max.x;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.unscaledBounds.y < max.y)\n\t\t\t{\n\t\t\t\tthis.unscaledBounds.height -= max.y - this.unscaledBounds.y;\n\t\t\t\tthis.unscaledBounds.y = max.y;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.unscaledBounds.x + this.unscaledBounds.width > max.x + max.width)\n\t\t\t{\n\t\t\t\tthis.unscaledBounds.width -= this.unscaledBounds.x +\n\t\t\t\t\tthis.unscaledBounds.width - max.x - max.width;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.unscaledBounds.y + this.unscaledBounds.height > max.y + max.height)\n\t\t\t{\n\t\t\t\tthis.unscaledBounds.height -= this.unscaledBounds.y +\n\t\t\t\t\tthis.unscaledBounds.height - max.y - max.height;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tvar old = this.bounds;\n\tthis.bounds = new mxRectangle(((this.parentState != null) ? this.parentState.x : tr.x * scale) +\n\t\t(this.unscaledBounds.x) * scale, ((this.parentState != null) ? this.parentState.y : tr.y * scale) +\n\t\t(this.unscaledBounds.y) * scale, this.unscaledBounds.width * scale, this.unscaledBounds.height * scale);\n\n\tif (geo.relative && this.parentState != null)\n\t{\n\t\tthis.bounds.x += this.state.x - this.parentState.x;\n\t\tthis.bounds.y += this.state.y - this.parentState.y;\n\t}\n\n\tcos = Math.cos(alpha);\n\tsin = Math.sin(alpha);\n\t\n\tvar c2 = new mxPoint(this.bounds.getCenterX(), this.bounds.getCenterY());\n\n\tvar dx = c2.x - ct.x;\n\tvar dy = c2.y - ct.y;\n\t\n\tvar dx2 = cos * dx - sin * dy;\n\tvar dy2 = sin * dx + cos * dy;\n\t\n\tvar dx3 = dx2 - dx;\n\tvar dy3 = dy2 - dy;\n\t\n\tvar dx4 = this.bounds.x - this.state.x;\n\tvar dy4 = this.bounds.y - this.state.y;\n\t\n\tvar dx5 = cos * dx4 - sin * dy4;\n\tvar dy5 = sin * dx4 + cos * dy4;\n\t\n\tthis.bounds.x += dx3;\n\tthis.bounds.y += dy3;\n\t\n\t// Rounds unscaled bounds to int\n\tthis.unscaledBounds.x = this.roundLength(this.unscaledBounds.x + dx3 / scale);\n\tthis.unscaledBounds.y = this.roundLength(this.unscaledBounds.y + dy3 / scale);\n\tthis.unscaledBounds.width = this.roundLength(this.unscaledBounds.width);\n\tthis.unscaledBounds.height = this.roundLength(this.unscaledBounds.height);\n\t\n\t// Shifts the children according to parent offset\n\tif (!this.graph.isCellCollapsed(this.state.cell) && (dx3 != 0 || dy3 != 0))\n\t{\n\t\tthis.childOffsetX = this.state.x - this.bounds.x + dx5;\n\t\tthis.childOffsetY = this.state.y - this.bounds.y + dy5;\n\t}\n\telse\n\t{\n\t\tthis.childOffsetX = 0;\n\t\tthis.childOffsetY = 0;\n\t}\n\t\t\t\n\tif (!old.equals(this.bounds))\n\t{\t\n\t\tif (this.livePreviewActive)\n\t\t{\n\t\t\tthis.updateLivePreview(me);\n\t\t}\n\t\t\n\t\tif (this.preview != null)\n\t\t{\n\t\t\tthis.drawPreview();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.updateParentHighlight();\n\t\t}\n\t}\n};\n\n/**\n * Function: updateLivePreview\n * \n * Repaints the live preview.\n */\nmxVertexHandler.prototype.updateLivePreview = function(me)\n{\n\t// TODO: Apply child offset to children in live preview\n\tvar scale = this.graph.view.scale;\n\tvar tr = this.graph.view.translate;\n\t\n\t// Saves current state\n\tvar tempState = this.state.clone();\n\n\t// Temporarily changes size and origin\n\tthis.state.x = this.bounds.x;\n\tthis.state.y = this.bounds.y;\n\tthis.state.origin = new mxPoint(this.state.x / scale - tr.x, this.state.y / scale - tr.y);\n\tthis.state.width = this.bounds.width;\n\tthis.state.height = this.bounds.height;\n\t\n\t// Redraws cell and handles\n\tvar off = this.state.absoluteOffset;\n\toff = new mxPoint(off.x, off.y);\n\n\t// Required to store and reset absolute offset for updating label position\n\tthis.state.absoluteOffset.x = 0;\n\tthis.state.absoluteOffset.y = 0;\n\tvar geo = this.graph.getCellGeometry(this.state.cell);\t\t\t\t\n\n\tif (geo != null)\n\t{\n\t\tvar offset = geo.offset || this.EMPTY_POINT;\n\n\t\tif (offset != null && !geo.relative)\n\t\t{\n\t\t\tthis.state.absoluteOffset.x = this.state.view.scale * offset.x;\n\t\t\tthis.state.absoluteOffset.y = this.state.view.scale * offset.y;\n\t\t}\n\t\t\n\t\tthis.state.view.updateVertexLabelOffset(this.state);\n\t}\n\t\n\t// Draws the live preview\n\tthis.state.view.graph.cellRenderer.redraw(this.state, true);\n\t\n\t// Redraws connected edges TODO: Include child edges\n\tthis.state.view.invalidate(this.state.cell);\n\tthis.state.invalid = false;\n\tthis.state.view.validate();\n\tthis.redrawHandles();\n\t\n\t// Moves live preview to front\n\tif (this.movePreviewToFront)\n\t{\n\t\tthis.moveToFront();\n\t}\n\t\n\t// Hides folding icon\n\tif (this.state.control != null && this.state.control.node != null)\n\t{\n\t\tthis.state.control.node.style.visibility = 'hidden';\n\t}\n\t\n\t// Restores current state\n\tthis.state.setState(tempState);\n};\n\n/**\n * Function: moveToFront\n * \n * Handles the event by applying the changes to the geometry.\n */\nmxVertexHandler.prototype.moveToFront = function()\n{\n\tif ((this.state.text != null && this.state.text.node != null &&\n\t\tthis.state.text.node.nextSibling != null) ||\n\t\t(this.state.shape != null && this.state.shape.node != null &&\n\t\tthis.state.shape.node.nextSibling != null && (this.state.text == null ||\n\t\tthis.state.shape.node.nextSibling != this.state.text.node)))\n\t{\n\t\tif (this.state.shape != null && this.state.shape.node != null)\n\t\t{\n\t\t\tthis.state.shape.node.parentNode.appendChild(this.state.shape.node);\n\t\t}\n\t\t\n\t\tif (this.state.text != null && this.state.text.node != null)\n\t\t{\n\t\t\tthis.state.text.node.parentNode.appendChild(this.state.text.node);\n\t\t}\n\t}\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by applying the changes to the geometry.\n */\nmxVertexHandler.prototype.mouseUp = function(sender, me)\n{\n\tif (this.index != null && this.state != null)\n\t{\n\t\tvar point = new mxPoint(me.getGraphX(), me.getGraphY());\n\t\tvar index = this.index;\n\t\tthis.index = null;\n\t\n\t\tif (this.ghostPreview == null)\n\t\t{\n\t\t\t// Required to restore order in case of no change\n\t\t\tthis.state.view.invalidate(this.state.cell, false, false);\n\t\t\tthis.state.view.validate();\n\t\t}\n\t\t\n\t\tthis.graph.getModel().beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tif (index <= mxEvent.CUSTOM_HANDLE)\n\t\t\t{\n\t\t\t\tif (this.customHandles != null)\n\t\t\t\t{\n\t\t\t\t\t// Creates style before changing cell state\n\t\t\t\t\tvar style = this.state.view.graph.getCellStyle(this.state.cell);\n\t\t\t\t\t\n\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - index].active = false;\n\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - index].execute(me);\n\t\t\t\t\t\n\t\t\t\t\t// Sets style and apply on shape to force repaint and\n\t\t\t\t\t// check if execute has removed custom handles\n\t\t\t\t\tif (this.customHandles != null &&\n\t\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - index] != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.style = style;\n\t\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - index].positionChanged();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (index == mxEvent.ROTATION_HANDLE)\n\t\t\t{\n\t\t\t\tif (this.currentAlpha != null)\n\t\t\t\t{\n\t\t\t\t\tvar delta = this.currentAlpha - (this.state.style[mxConstants.STYLE_ROTATION] || 0);\n\t\t\t\t\t\n\t\t\t\t\tif (delta != 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.rotateCell(this.state.cell, delta);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.rotateClick();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar gridEnabled = this.graph.isGridEnabledEvent(me.getEvent());\n\t\t\t\tvar alpha = mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\t\t\t\tvar cos = Math.cos(-alpha);\n\t\t\t\tvar sin = Math.sin(-alpha);\n\t\t\t\t\n\t\t\t\tvar dx = point.x - this.startX;\n\t\t\t\tvar dy = point.y - this.startY;\n\t\t\t\t\n\t\t\t\t// Rotates vector for mouse gesture\n\t\t\t\tvar tx = cos * dx - sin * dy;\n\t\t\t\tvar ty = sin * dx + cos * dy;\n\t\t\t\t\n\t\t\t\tdx = tx;\n\t\t\t\tdy = ty;\n\t\t\t\t\n\t\t\t\tvar s = this.graph.view.scale;\n\t\t\t\tvar recurse = this.isRecursiveResize(this.state, me);\n\t\t\t\tthis.resizeCell(this.state.cell, this.roundLength(dx / s), this.roundLength(dy / s),\n\t\t\t\t\tindex, gridEnabled, this.isConstrainedEvent(me), recurse);\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.graph.getModel().endUpdate();\n\t\t}\n\n\t\tme.consume();\n\t\tthis.reset();\n\t\tthis.redrawHandles();\n\t}\n};\n\n/**\n * Function: isRecursiveResize\n * \n * Returns the recursiveResize of the give state.\n * \n * Parameters:\n * \n * state - the given <mxCellState>. This implementation takes \n * the value of this state.\n * me - the mouse event.\n */\nmxVertexHandler.prototype.isRecursiveResize = function(state, me)\n{\n\treturn this.graph.isRecursiveResize(this.state);\n};\n\n/**\n * Function: rotateClick\n * \n * Hook for subclassers to implement a single click on the rotation handle.\n * This code is executed as part of the model transaction. This implementation\n * is empty.\n */\nmxVertexHandler.prototype.rotateClick = function() { };\n\n/**\n * Function: rotateCell\n * \n * Rotates the given cell and its children by the given angle in degrees.\n * \n * Parameters:\n * \n * cell - <mxCell> to be rotated.\n * angle - Angle in degrees.\n */\nmxVertexHandler.prototype.rotateCell = function(cell, angle, parent)\n{\n\tif (angle != 0)\n\t{\n\t\tvar model = this.graph.getModel();\n\n\t\tif (model.isVertex(cell) || model.isEdge(cell))\n\t\t{\n\t\t\tif (!model.isEdge(cell))\n\t\t\t{\n\t\t\t\tvar style = this.graph.getCurrentCellStyle(cell);\n\t\t\t\tvar total = (style[mxConstants.STYLE_ROTATION] || 0) + angle;\n\t\t\t\tthis.graph.setCellStyles(mxConstants.STYLE_ROTATION, total, [cell]);\n\t\t\t}\n\t\t\t\n\t\t\tvar geo = this.graph.getCellGeometry(cell);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tvar pgeo = this.graph.getCellGeometry(parent);\n\t\t\t\t\n\t\t\t\tif (pgeo != null && !model.isEdge(parent))\n\t\t\t\t{\n\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\tgeo.rotate(angle, new mxPoint(pgeo.width / 2, pgeo.height / 2));\n\t\t\t\t\tmodel.setGeometry(cell, geo);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ((model.isVertex(cell) && !geo.relative) || model.isEdge(cell))\n\t\t\t\t{\n\t\t\t\t\t// Recursive rotation\n\t\t\t\t\tvar childCount = model.getChildCount(cell);\n\t\t\t\t\t\n\t\t\t\t\tfor (var i = 0; i < childCount; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.rotateCell(model.getChildAt(cell, i), angle, cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this handler.\n */\nmxVertexHandler.prototype.reset = function()\n{\n\tif (this.sizers != null && this.index != null && this.sizers[this.index] != null &&\n\t\tthis.sizers[this.index].node.style.display == 'none')\n\t{\n\t\tthis.sizers[this.index].node.style.display = '';\n\t}\n\n\tthis.currentAlpha = null;\n\tthis.inTolerance = null;\n\tthis.index = null;\n\n\t// TODO: Reset and redraw cell states for live preview\n\tif (this.preview != null)\n\t{\n\t\tthis.preview.destroy();\n\t\tthis.preview = null;\n\t}\n\t\n\tif (this.ghostPreview != null)\n\t{\n\t\tthis.ghostPreview.destroy();\n\t\tthis.ghostPreview = null;\n\t}\n\n\tif (this.livePreviewActive && this.sizers != null)\n\t{\n\t\tfor (var i = 0; i < this.sizers.length; i++)\n\t\t{\n\t\t\tif (this.sizers[i] != null)\n\t\t\t{\n\t\t\t\tthis.sizers[i].node.style.display = '';\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Shows folding icon\n\t\tif (this.state.control != null && this.state.control.node != null)\n\t\t{\n\t\t\tthis.state.control.node.style.visibility = '';\n\t\t}\n\t}\n\n\tif (this.customHandles != null)\n\t{\n\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t{\n\t\t\tif (this.customHandles[i].active)\n\t\t\t{\n\t\t\t\tthis.customHandles[i].active = false;\n\t\t\t\tthis.customHandles[i].reset();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.customHandles[i].setVisible(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Checks if handler has been destroyed\n\tif (this.selectionBorder != null)\n\t{\n\t\tthis.selectionBorder.node.style.display = 'inline';\n\t\tthis.selectionBounds = this.getSelectionBounds(this.state);\n\t\tthis.bounds = new mxRectangle(this.selectionBounds.x, this.selectionBounds.y,\n\t\t\tthis.selectionBounds.width, this.selectionBounds.height);\n\t\tthis.drawPreview();\n\t}\n\n\tthis.removeHint();\n\tthis.redrawHandles();\n\tthis.edgeHandlers = null;\n\tthis.handlesVisible = true;\n\tthis.unscaledBounds = null;\n\tthis.livePreviewActive = null;\n};\n\n/**\n * Function: resizeCell\n * \n * Uses the given vector to change the bounds of the given cell\n * in the graph using <mxGraph.resizeCell>.\n */\nmxVertexHandler.prototype.resizeCell = function(cell, dx, dy, index, gridEnabled, constrained, recurse)\n{\n\tvar geo = this.graph.model.getGeometry(cell);\n\t\n\tif (geo != null)\n\t{\n\t\tif (index == mxEvent.LABEL_HANDLE)\n\t\t{\n\t\t\tvar alpha = -mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\t\t\tvar cos = Math.cos(alpha);\n\t\t\tvar sin = Math.sin(alpha);\n\t\t\tvar scale = this.graph.view.scale;\n\t\t\tvar pt = mxUtils.getRotatedPoint(new mxPoint(\n\t\t\t\tMath.round((this.labelShape.bounds.getCenterX() - this.startX) / scale),\n\t\t\t\tMath.round((this.labelShape.bounds.getCenterY() - this.startY) / scale)),\n\t\t\t\tcos, sin);\n\n\t\t\tgeo = geo.clone();\n\t\t\t\n\t\t\tif (geo.offset == null)\n\t\t\t{\n\t\t\t\tgeo.offset = pt;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgeo.offset.x += pt.x;\n\t\t\t\tgeo.offset.y += pt.y;\n\t\t\t}\n\t\t\t\n\t\t\tthis.graph.model.setGeometry(cell, geo);\n\t\t}\n\t\telse if (this.unscaledBounds != null)\n\t\t{\n\t\t\tvar scale = this.graph.view.scale;\n\n\t\t\tif (this.childOffsetX != 0 || this.childOffsetY != 0)\n\t\t\t{\n\t\t\t\tthis.moveChildren(cell, Math.round(this.childOffsetX / scale), Math.round(this.childOffsetY / scale));\n\t\t\t}\n\n\t\t\tthis.graph.resizeCell(cell, this.unscaledBounds, recurse);\n\t\t}\n\t}\n};\n\n/**\n * Function: moveChildren\n * \n * Moves the children of the given cell by the given vector.\n */\nmxVertexHandler.prototype.moveChildren = function(cell, dx, dy)\n{\n\tvar model = this.graph.getModel();\n\tvar childCount = model.getChildCount(cell);\n\t\n\tfor (var i = 0; i < childCount; i++)\n\t{\n\t\tvar child = model.getChildAt(cell, i);\n\t\tvar geo = this.graph.getCellGeometry(child);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tgeo = geo.clone();\n\t\t\tgeo.translate(dx, dy);\n\t\t\tmodel.setGeometry(child, geo);\n\t\t}\n\t}\n};\n/**\n * Function: union\n * \n * Returns the union of the given bounds and location for the specified\n * handle index.\n * \n * To override this to limit the size of vertex via a minWidth/-Height style,\n * the following code can be used.\n * \n * (code)\n * var vertexHandlerUnion = mxVertexHandler.prototype.union;\n * mxVertexHandler.prototype.union = function(bounds, dx, dy, index, gridEnabled, scale, tr, constrained)\n * {\n *   var result = vertexHandlerUnion.apply(this, arguments);\n *   \n *   result.width = Math.max(result.width, mxUtils.getNumber(this.state.style, 'minWidth', 0));\n *   result.height = Math.max(result.height, mxUtils.getNumber(this.state.style, 'minHeight', 0));\n *   \n *   return result;\n * };\n * (end)\n * \n * The minWidth/-Height style can then be used as follows:\n * \n * (code)\n * graph.insertVertex(parent, null, 'Hello,', 20, 20, 80, 30, 'minWidth=100;minHeight=100;');\n * (end)\n * \n * To override this to update the height for a wrapped text if the width of a vertex is\n * changed, the following can be used.\n * \n * (code)\n * var mxVertexHandlerUnion = mxVertexHandler.prototype.union;\n * mxVertexHandler.prototype.union = function(bounds, dx, dy, index, gridEnabled, scale, tr, constrained)\n * {\n *   var result = mxVertexHandlerUnion.apply(this, arguments);\n *   var s = this.state;\n *   \n *   if (this.graph.isHtmlLabel(s.cell) && (index == 3 || index == 4) &&\n *       s.text != null && s.style[mxConstants.STYLE_WHITE_SPACE] == 'wrap')\n *   {\n *     var label = this.graph.getLabel(s.cell);\n *     var fontSize = mxUtils.getNumber(s.style, mxConstants.STYLE_FONTSIZE, mxConstants.DEFAULT_FONTSIZE);\n *     var ww = result.width / s.view.scale - s.text.spacingRight - s.text.spacingLeft\n *     \n *     result.height = mxUtils.getSizeForString(label, fontSize, s.style[mxConstants.STYLE_FONTFAMILY], ww).height;\n *   }\n *   \n *   return result;\n * };\n * (end)\n */\nmxVertexHandler.prototype.union = function(bounds, dx, dy, index, gridEnabled, scale, tr, constrained, centered)\n{\n\tgridEnabled = (gridEnabled != null) ? gridEnabled && this.graph.gridEnabled : this.graph.gridEnabled;\n\t\n\tif (this.singleSizer)\n\t{\n\t\tvar x = bounds.x + bounds.width + dx;\n\t\tvar y = bounds.y + bounds.height + dy;\n\t\t\n\t\tif (gridEnabled)\n\t\t{\n\t\t\tx = this.graph.snap(x / scale) * scale;\n\t\t\ty = this.graph.snap(y / scale) * scale;\n\t\t}\n\t\t\n\t\tvar rect = new mxRectangle(bounds.x, bounds.y, 0, 0);\n\t\trect.add(new mxRectangle(x, y, 0, 0));\n\t\t\n\t\treturn rect;\n\t}\n\telse\n\t{\n\t\tvar w0 = bounds.width;\n\t\tvar h0 = bounds.height;\n\t\tvar left = bounds.x - tr.x * scale;\n\t\tvar right = left + w0;\n\t\tvar top = bounds.y - tr.y * scale;\n\t\tvar bottom = top + h0;\n\t\t\n\t\tvar cx = left + w0 / 2;\n\t\tvar cy = top + h0 / 2;\n\t\t\n\t\tif (index > 4 /* Bottom Row */)\n\t\t{\n\t\t\tbottom = bottom + dy;\n\t\t\t\n\t\t\tif (gridEnabled)\n\t\t\t{\n\t\t\t\tbottom = this.graph.snap(bottom / scale) * scale;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbottom = Math.round(bottom / scale) * scale;\n\t\t\t}\n\t\t}\n\t\telse if (index < 3 /* Top Row */)\n\t\t{\n\t\t\ttop = top + dy;\n\t\t\t\n\t\t\tif (gridEnabled)\n\t\t\t{\n\t\t\t\ttop = this.graph.snap(top / scale) * scale;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttop = Math.round(top / scale) * scale;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (index == 0 || index == 3 || index == 5 /* Left */)\n\t\t{\n\t\t\tleft += dx;\n\t\t\t\n\t\t\tif (gridEnabled)\n\t\t\t{\n\t\t\t\tleft = this.graph.snap(left / scale) * scale;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tleft = Math.round(left / scale) * scale;\n\t\t\t}\n\t\t}\n\t\telse if (index == 2 || index == 4 || index == 7 /* Right */)\n\t\t{\n\t\t\tright += dx;\n\t\t\t\n\t\t\tif (gridEnabled)\n\t\t\t{\n\t\t\t\tright = this.graph.snap(right / scale) * scale;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tright = Math.round(right / scale) * scale;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar width = right - left;\n\t\tvar height = bottom - top;\n\n\t\tif (constrained)\n\t\t{\n\t\t\tvar geo = this.graph.getCellGeometry(this.state.cell);\n\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tvar aspect = geo.width / geo.height;\n\t\t\t\t\n\t\t\t\tif (index== 1 || index== 2 || index == 7 || index == 6)\n\t\t\t\t{\n\t\t\t\t\twidth = height * aspect;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\theight = width / aspect;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (index == 0)\n\t\t\t\t{\n\t\t\t\t\tleft = right - width;\n\t\t\t\t\ttop = bottom - height;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (centered)\n\t\t{\n\t\t\twidth += (width - w0);\n\t\t\theight += (height - h0);\n\t\t\t\n\t\t\tvar cdx = cx - (left + width / 2);\n\t\t\tvar cdy = cy - (top + height / 2);\n\n\t\t\tleft += cdx;\n\t\t\ttop += cdy;\n\t\t\tright += cdx;\n\t\t\tbottom += cdy;\n\t\t}\n\n\t\t// Flips over left side\n\t\tif (width < 0)\n\t\t{\n\t\t\tleft += width;\n\t\t\twidth = Math.abs(width);\n\t\t}\n\t\t\n\t\t// Flips over top side\n\t\tif (height < 0)\n\t\t{\n\t\t\ttop += height;\n\t\t\theight = Math.abs(height);\n\t\t}\n\n\t\tvar result = new mxRectangle(left + tr.x * scale, top + tr.y * scale, width, height);\n\t\t\n\t\tif (this.minBounds != null)\n\t\t{\n\t\t\tresult.width = Math.max(result.width, this.minBounds.x * scale + this.minBounds.width * scale +\n\t\t\t\tMath.max(0, this.x0 * scale - result.x));\n\t\t\tresult.height = Math.max(result.height, this.minBounds.y * scale + this.minBounds.height * scale +\n\t\t\t\tMath.max(0, this.y0 * scale - result.y));\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n};\n\n/**\n * Function: redraw\n * \n * Redraws the handles and the preview.\n */\nmxVertexHandler.prototype.redraw = function(ignoreHandles)\n{\n\tthis.selectionBounds = this.getSelectionBounds(this.state);\n\tthis.bounds = new mxRectangle(this.selectionBounds.x, this.selectionBounds.y,\n\t\tthis.selectionBounds.width, this.selectionBounds.height);\n\tthis.drawPreview();\n\n\tif (!ignoreHandles)\n\t{\n\t\tthis.redrawHandles();\n\t}\n};\n\n/**\n * Returns the padding to be used for drawing handles for the current <bounds>.\n */\nmxVertexHandler.prototype.getHandlePadding = function()\n{\n\t// KNOWN: Tolerance depends on event type (eg. 0 for mouse events)\n\tvar result = new mxPoint(0, 0);\n\tvar tol = this.tolerance;\n\n\tif (this.sizers != null && this.sizers.length > 0 && this.sizers[0] != null &&\n\t\t(this.bounds.width < 2 * this.sizers[0].bounds.width + 2 * tol ||\n\t\tthis.bounds.height < 2 * this.sizers[0].bounds.height + 2 * tol))\n\t{\n\t\ttol /= 2;\n\t\t\n\t\tresult.x = this.sizers[0].bounds.width + tol;\n\t\tresult.y = this.sizers[0].bounds.height + tol;\n\t}\n\t\n\treturn result;\n};\n\n/**\n * Function: getSizerBounds\n * \n * Returns the bounds used to paint the resize handles.\n */\nmxVertexHandler.prototype.getSizerBounds = function()\n{\n\treturn this.bounds;\n};\n\n/**\n * Function: redrawHandles\n * \n * Redraws the handles. To hide certain handles the following code can be used.\n * \n * (code)\n * mxVertexHandler.prototype.redrawHandles = function()\n * {\n *   mxVertexHandlerRedrawHandles.apply(this, arguments);\n *   \n *   if (this.sizers != null && this.sizers.length > 7)\n *   {\n *     this.sizers[1].node.style.display = 'none';\n *     this.sizers[6].node.style.display = 'none';\n *   }\n * };\n * (end)\n */\nmxVertexHandler.prototype.redrawHandles = function()\n{\n\tvar s = this.getSizerBounds();\n\tvar tol = this.tolerance;\n\tthis.horizontalOffset = 0;\n\tthis.verticalOffset = 0;\n\t\n\tif (this.customHandles != null)\n\t{\n\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t{\n\t\t\tvar temp = this.customHandles[i].shape.node.style.display;\n\t\t\tthis.customHandles[i].redraw();\n\t\t\tthis.customHandles[i].shape.node.style.display = temp;\n\n\t\t\t// Hides custom handles during text editing\n\t\t\tthis.customHandles[i].shape.node.style.visibility =\n\t\t\t\t(this.handlesVisible && this.isCustomHandleVisible(\n\t\t\t\t\tthis.customHandles[i])) ? '' : 'hidden';\n\t\t}\n\t}\n\n\tif (this.sizers != null && this.sizers.length > 0 && this.sizers[0] != null)\n\t{\n\t\tif (this.index == null && this.manageSizers && this.sizers.length >= 8)\n\t\t{\n\t\t\t// KNOWN: Tolerance depends on event type (eg. 0 for mouse events)\n\t\t\tvar padding = this.getHandlePadding();\n\t\t\tthis.horizontalOffset = padding.x;\n\t\t\tthis.verticalOffset = padding.y;\n\t\t\t\n\t\t\tif (this.horizontalOffset != 0 || this.verticalOffset != 0)\n\t\t\t{\n\t\t\t\ts = new mxRectangle(s.x, s.y, s.width, s.height);\n\n\t\t\t\ts.x -= this.horizontalOffset / 2;\n\t\t\t\ts.width += this.horizontalOffset;\n\t\t\t\ts.y -= this.verticalOffset / 2;\n\t\t\t\ts.height += this.verticalOffset;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.sizers.length >= 8)\n\t\t\t{\n\t\t\t\tif ((s.width < 2 * this.sizers[0].bounds.width + 2 * tol) ||\n\t\t\t\t\t(s.height < 2 * this.sizers[0].bounds.height + 2 * tol))\n\t\t\t\t{\n\t\t\t\t\tthis.sizers[0].node.style.display = 'none';\n\t\t\t\t\tthis.sizers[2].node.style.display = 'none';\n\t\t\t\t\tthis.sizers[5].node.style.display = 'none';\n\t\t\t\t\tthis.sizers[7].node.style.display = 'none';\n\t\t\t\t}\n\t\t\t\telse if (this.handlesVisible)\n\t\t\t\t{\n\t\t\t\t\tthis.sizers[0].node.style.display = '';\n\t\t\t\t\tthis.sizers[2].node.style.display = '';\n\t\t\t\t\tthis.sizers[5].node.style.display = '';\n\t\t\t\t\tthis.sizers[7].node.style.display = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar r = s.x + s.width;\n\t\tvar b = s.y + s.height;\n\t\t\n\t\tif (this.singleSizer)\n\t\t{\n\t\t\tthis.moveSizerTo(this.sizers[0], r, b);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar cx = s.x + s.width / 2;\n\t\t\tvar cy = s.y + s.height / 2;\n\t\t\t\n\t\t\tif (this.sizers.length >= 8)\n\t\t\t{\n\t\t\t\tvar crs = ['nw-resize', 'n-resize', 'ne-resize', 'e-resize', 'se-resize', 's-resize', 'sw-resize', 'w-resize'];\n\t\t\t\t\n\t\t\t\tvar alpha = mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\t\t\t\tvar cos = Math.cos(alpha);\n\t\t\t\tvar sin = Math.sin(alpha);\n\t\t\t\t\n\t\t\t\tvar da = Math.round(alpha * 4 / Math.PI);\n\t\t\t\t\n\t\t\t\tvar ct = new mxPoint(s.getCenterX(), s.getCenterY());\n\t\t\t\tvar pt = mxUtils.getRotatedPoint(new mxPoint(s.x, s.y), cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[0], pt.x, pt.y);\n\t\t\t\tthis.sizers[0].setCursor(crs[mxUtils.mod(0 + da, crs.length)]);\n\t\t\t\t\n\t\t\t\tpt.x = cx;\n\t\t\t\tpt.y = s.y;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[1], pt.x, pt.y);\n\t\t\t\tthis.sizers[1].setCursor(crs[mxUtils.mod(1 + da, crs.length)]);\n\t\t\t\t\n\t\t\t\tpt.x = r;\n\t\t\t\tpt.y = s.y;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[2], pt.x, pt.y);\n\t\t\t\tthis.sizers[2].setCursor(crs[mxUtils.mod(2 + da, crs.length)]);\n\t\t\t\t\n\t\t\t\tpt.x = s.x;\n\t\t\t\tpt.y = cy;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[3], pt.x, pt.y);\n\t\t\t\tthis.sizers[3].setCursor(crs[mxUtils.mod(7 + da, crs.length)]);\n\n\t\t\t\tpt.x = r;\n\t\t\t\tpt.y = cy;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[4], pt.x, pt.y);\n\t\t\t\tthis.sizers[4].setCursor(crs[mxUtils.mod(3 + da, crs.length)]);\n\n\t\t\t\tpt.x = s.x;\n\t\t\t\tpt.y = b;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[5], pt.x, pt.y);\n\t\t\t\tthis.sizers[5].setCursor(crs[mxUtils.mod(6 + da, crs.length)]);\n\n\t\t\t\tpt.x = cx;\n\t\t\t\tpt.y = b;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[6], pt.x, pt.y);\n\t\t\t\tthis.sizers[6].setCursor(crs[mxUtils.mod(5 + da, crs.length)]);\n\n\t\t\t\tpt.x = r;\n\t\t\t\tpt.y = b;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\t\n\t\t\t\tthis.moveSizerTo(this.sizers[7], pt.x, pt.y);\n\t\t\t\tthis.sizers[7].setCursor(crs[mxUtils.mod(4 + da, crs.length)]);\n\t\t\t\t\n\t\t\t\tpt.x = cx + this.state.absoluteOffset.x;\n\t\t\t\tpt.y = cy + this.state.absoluteOffset.y;\n\t\t\t\tpt = mxUtils.getRotatedPoint(pt, cos, sin, ct);\n\t\t\t\tthis.moveSizerTo(this.sizers[8], pt.x, pt.y);\n\t\t\t}\n\t\t\telse if (this.state.width >= 2 && this.state.height >= 2)\n\t\t\t{\n\t\t\t\tthis.moveSizerTo(this.sizers[0], cx + this.state.absoluteOffset.x, cy + this.state.absoluteOffset.y);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.moveSizerTo(this.sizers[0], this.state.x, this.state.y);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.rotationShape != null)\n\t{\n\t\tvar alpha = mxUtils.toRadians((this.currentAlpha != null) ? this.currentAlpha : this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\t\tvar cos = Math.cos(alpha);\n\t\tvar sin = Math.sin(alpha);\n\t\t\n\t\tvar ct = new mxPoint(this.state.getCenterX(), this.state.getCenterY());\n\t\tvar pt = mxUtils.getRotatedPoint(this.getRotationHandlePosition(), cos, sin, ct);\n\n\t\tif (this.rotationShape.node != null)\n\t\t{\n\t\t\tthis.moveSizerTo(this.rotationShape, pt.x, pt.y);\n\n\t\t\t// Hides rotation handle during text editing\n\t\t\tthis.rotationShape.node.style.visibility = (this.state.view.graph.isEditing() ||\n\t\t\t\t!this.handlesVisible) ? 'hidden' : '';\n\t\t}\n\t}\n\t\n\tif (this.selectionBorder != null)\n\t{\n\t\tthis.selectionBorder.rotation = Number(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\t}\n\t\n\tif (this.edgeHandlers != null)\n\t{\t\t\n\t\tfor (var i = 0; i < this.edgeHandlers.length; i++)\n\t\t{\n\t\t\tthis.edgeHandlers[i].redraw();\n\t\t}\n\t}\n};\n\n/**\n * Function: isCustomHandleVisible\n * \n * Returns true if the given custom handle is visible.\n */\nmxVertexHandler.prototype.isCustomHandleVisible = function(handle)\n{\n\treturn !this.graph.isEditing() && this.state.view.graph.getSelectionCount() == 1;\n};\n\n/**\n * Function: getRotationHandlePosition\n * \n * Returns an <mxPoint> that defines the rotation handle position.\n */\nmxVertexHandler.prototype.getRotationHandlePosition = function()\n{\n\treturn new mxPoint(this.bounds.x + this.bounds.width / 2, this.bounds.y + this.rotationHandleVSpacing)\n};\n\n/**\n * Function: isParentHighlightVisible\n * \n * Returns true if the parent highlight should be visible. This implementation\n * always returns true.\n */\nmxVertexHandler.prototype.isParentHighlightVisible = function()\n{\n\treturn !this.graph.isCellSelected(this.graph.model.getParent(this.state.cell));\n};\n\n/**\n * Function: updateParentHighlight\n * \n * Updates the highlight of the parent if <parentHighlightEnabled> is true.\n */\nmxVertexHandler.prototype.updateParentHighlight = function()\n{\n\tif (!this.isDestroyed())\n\t{\n\t\tvar visible = this.isParentHighlightVisible();\n\t\tvar parent = this.graph.model.getParent(this.state.cell);\n\t\tvar pstate = this.graph.view.getState(parent);\n\n\t\tif (this.parentHighlight != null)\n\t\t{\n\t\t\tif (this.graph.model.isVertex(parent) && visible)\n\t\t\t{\n\t\t\t\tvar b = this.parentHighlight.bounds;\n\t\t\t\t\n\t\t\t\tif (pstate != null && (b.x != pstate.x || b.y != pstate.y ||\n\t\t\t\t\tb.width != pstate.width || b.height != pstate.height))\n\t\t\t\t{\n\t\t\t\t\tthis.parentHighlight.bounds = mxRectangle.fromRectangle(pstate);\n\t\t\t\t\tthis.parentHighlight.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (pstate != null && pstate.parentHighlight == this.parentHighlight)\n\t\t\t\t{\n\t\t\t\t\tpstate.parentHighlight = null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.parentHighlight.destroy();\n\t\t\t\tthis.parentHighlight = null;\n\t\t\t}\n\t\t}\n\t\telse if (this.parentHighlightEnabled && visible)\n\t\t{\n\t\t\tif (this.graph.model.isVertex(parent) && pstate != null &&\n\t\t\t\tpstate.parentHighlight == null)\n\t\t\t{\n\t\t\t\tthis.parentHighlight = this.createParentHighlightShape(pstate);\n\t\t\t\t// VML dialect required here for event transparency in IE\n\t\t\t\tthis.parentHighlight.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ? mxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\t\t\t\tthis.parentHighlight.pointerEvents = false;\n\t\t\t\tthis.parentHighlight.rotation = Number(pstate.style[mxConstants.STYLE_ROTATION] || '0');\n\t\t\t\tthis.parentHighlight.init(this.graph.getView().getOverlayPane());\n\t\t\t\tthis.parentHighlight.redraw();\n\t\t\t\t\n\t\t\t\t// Shows highlight once per parent\n\t\t\t\tpstate.parentHighlight = this.parentHighlight;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: drawPreview\n * \n * Redraws the preview.\n */\nmxVertexHandler.prototype.drawPreview = function()\n{\n\tif (this.preview != null)\n\t{\n\t\tthis.preview.bounds = this.bounds;\n\t\t\n\t\tif (this.preview.node.parentNode == this.graph.container)\n\t\t{\n\t\t\tthis.preview.bounds.width = Math.max(0, this.preview.bounds.width - 1);\n\t\t\tthis.preview.bounds.height = Math.max(0, this.preview.bounds.height - 1);\n\t\t}\n\t\n\t\tthis.preview.rotation = Number(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\t\tthis.preview.redraw();\n\t}\n\t\n\tthis.selectionBorder.bounds = this.getSelectionBorderBounds();\n\tthis.selectionBorder.redraw();\n\tthis.updateParentHighlight();\n};\n\n/**\n * Function: getSelectionBorderBounds\n * \n * Returns the bounds for the selection border.\n */\nmxVertexHandler.prototype.getSelectionBorderBounds = function()\n{\n\treturn this.bounds;\n};\n\n/**\n * Function: isDestroyed\n * \n * Returns true if this handler was destroyed or not initialized.\n */\nmxVertexHandler.prototype.isDestroyed = function()\n{\n\treturn this.selectionBorder == null;\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxVertexHandler.prototype.destroy = function()\n{\n\tif (this.escapeHandler != null)\n\t{\n\t\tthis.state.view.graph.removeListener(this.escapeHandler);\n\t\tthis.escapeHandler = null;\n\t}\n\t\n\tif (this.preview != null)\n\t{\n\t\tthis.preview.destroy();\n\t\tthis.preview = null;\n\t}\n\t\n\tif (this.parentHighlight != null)\n\t{\n\t\tvar parent = this.graph.model.getParent(this.state.cell);\n\t\tvar pstate = this.graph.view.getState(parent);\n\n\t\tif (pstate != null && pstate.parentHighlight == this.parentHighlight)\n\t\t{\n\t\t\tpstate.parentHighlight = null;\n\t\t}\n\t\t\n\t\tthis.parentHighlight.destroy();\n\t\tthis.parentHighlight = null;\n\t}\n\t\n\tif (this.ghostPreview != null)\n\t{\n\t\tthis.ghostPreview.destroy();\n\t\tthis.ghostPreview = null;\n\t}\n\n\tif (this.selectionBorder != null)\n\t{\n\t\tthis.selectionBorder.destroy();\n\t\tthis.selectionBorder = null;\n\t}\n\t\n\tthis.labelShape = null;\n\tthis.removeHint();\n\n\tif (this.sizers != null)\n\t{\n\t\tfor (var i = 0; i < this.sizers.length; i++)\n\t\t{\n\t\t\tthis.sizers[i].destroy();\n\t\t}\n\t\t\n\t\tthis.sizers = null;\n\t}\n\n\tif (this.customHandles != null)\n\t{\n\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t{\n\t\t\tthis.customHandles[i].destroy();\n\t\t}\n\t\t\n\t\tthis.customHandles = null;\n\t}\n};\n\n__mxOutput.mxVertexHandler = typeof mxVertexHandler !== 'undefined' ? mxVertexHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxEdgeHandler\n *\n * Graph event handler that reconnects edges and modifies control points and\n * the edge label location. Uses <mxTerminalMarker> for finding and\n * highlighting new source and target vertices. This handler is automatically\n * created in <mxGraph.createHandler> for each selected edge.\n * \n * To enable adding/removing control points, the following code can be used:\n * \n * (code)\n * mxEdgeHandler.prototype.addEnabled = true;\n * mxEdgeHandler.prototype.removeEnabled = true;\n * (end)\n * \n * Note: This experimental feature is not recommended for production use.\n * \n * Constructor: mxEdgeHandler\n *\n * Constructs an edge handler for the specified <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> of the cell to be handled.\n */\nfunction mxEdgeHandler(state)\n{\n\tif (state != null && state.shape != null)\n\t{\n\t\tthis.state = state;\n\t\tthis.init();\n\t\t\n\t\t// Handles escape keystrokes\n\t\tthis.escapeHandler = mxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tvar dirty = this.index != null;\n\t\t\tthis.reset();\n\t\t\t\n\t\t\tif (dirty)\n\t\t\t{\n\t\t\t\tthis.graph.cellRenderer.redraw(this.state, false, state.view.isRendering());\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.state.view.graph.addListener(mxEvent.ESCAPE, this.escapeHandler);\n\t}\n};\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxEdgeHandler.prototype.graph = null;\n\n/**\n * Variable: state\n * \n * Reference to the <mxCellState> being modified.\n */\nmxEdgeHandler.prototype.state = null;\n\n/**\n * Variable: marker\n * \n * Holds the <mxTerminalMarker> which is used for highlighting terminals.\n */\nmxEdgeHandler.prototype.marker = null;\n\n/**\n * Variable: constraintHandler\n * \n * Holds the <mxConstraintHandler> used for drawing and highlighting\n * constraints.\n */\nmxEdgeHandler.prototype.constraintHandler = null;\n\n/**\n * Variable: error\n * \n * Holds the current validation error while a connection is being changed.\n */\nmxEdgeHandler.prototype.error = null;\n\n/**\n * Variable: shape\n * \n * Holds the <mxShape> that represents the preview edge.\n */\nmxEdgeHandler.prototype.shape = null;\n\n/**\n * Variable: bends\n * \n * Holds the <mxShapes> that represent the points.\n */\nmxEdgeHandler.prototype.bends = null;\n\n/**\n * Variable: labelShape\n * \n * Holds the <mxShape> that represents the label position.\n */\nmxEdgeHandler.prototype.labelShape = null;\n\n/**\n * Variable: cloneEnabled\n * \n * Specifies if cloning by control-drag is enabled. Default is true.\n */\nmxEdgeHandler.prototype.cloneEnabled = true;\n\n/**\n * Variable: addEnabled\n * \n * Specifies if adding bends by shift-click is enabled. Default is false.\n * Note: This experimental feature is not recommended for production use.\n */\nmxEdgeHandler.prototype.addEnabled = false;\n\n/**\n * Variable: removeEnabled\n * \n * Specifies if removing bends by shift-click is enabled. Default is false.\n * Note: This experimental feature is not recommended for production use.\n */\nmxEdgeHandler.prototype.removeEnabled = false;\n\n/**\n * Variable: dblClickRemoveEnabled\n * \n * Specifies if removing bends by double click is enabled. Default is false.\n */\nmxEdgeHandler.prototype.dblClickRemoveEnabled = false;\n\n/**\n * Variable: mergeRemoveEnabled\n * \n * Specifies if removing bends by dropping them on other bends is enabled.\n * Default is false.\n */\nmxEdgeHandler.prototype.mergeRemoveEnabled = false;\n\n/**\n * Variable: straightRemoveEnabled\n * \n * Specifies if removing bends by creating straight segments should be enabled.\n * If enabled, this can be overridden by holding down the alt key while moving.\n * Default is false.\n */\nmxEdgeHandler.prototype.straightRemoveEnabled = false;\n\n/**\n * Variable: virtualBendsEnabled\n * \n * Specifies if virtual bends should be added in the center of each\n * segments. These bends can then be used to add new waypoints.\n * Default is false.\n */\nmxEdgeHandler.prototype.virtualBendsEnabled = false;\n\n/**\n * Variable: virtualBendOpacity\n * \n * Opacity to be used for virtual bends (see <virtualBendsEnabled>).\n * Default is 20.\n */\nmxEdgeHandler.prototype.virtualBendOpacity = 20;\n\n/**\n * Variable: parentHighlightEnabled\n * \n * Specifies if the parent should be highlighted if a child cell is selected.\n * Default is false.\n */\nmxEdgeHandler.prototype.parentHighlightEnabled = false;\n\n/**\n * Variable: preferHtml\n * \n * Specifies if bends should be added to the graph container. This is updated\n * in <init> based on whether the edge or one of its terminals has an HTML\n * label in the container.\n */\nmxEdgeHandler.prototype.preferHtml = false;\n\n/**\n * Variable: allowHandleBoundsCheck\n * \n * Specifies if the bounds of handles should be used for hit-detection in IE\n * Default is true.\n */\nmxEdgeHandler.prototype.allowHandleBoundsCheck = true;\n\n/**\n * Variable: snapToTerminals\n * \n * Specifies if waypoints should snap to the routing centers of terminals.\n * Default is false.\n */\nmxEdgeHandler.prototype.snapToTerminals = false;\n\n/**\n * Variable: handleImage\n * \n * Optional <mxImage> to be used as handles. Default is null.\n */\nmxEdgeHandler.prototype.handleImage = null;\n\n/**\n * Variable: tolerance\n * \n * Optional tolerance for hit-detection in <getHandleForEvent>. Default is 0.\n */\nmxEdgeHandler.prototype.tolerance = 0;\n\n/**\n * Variable: outlineConnect\n * \n * Specifies if connections to the outline of a highlighted target should be\n * enabled. This will allow to place the connection point along the outline of\n * the highlighted target. Default is false.\n */\nmxEdgeHandler.prototype.outlineConnect = false;\n\n/**\n * Variable: manageLabelHandle\n * \n * Specifies if the label handle should be moved if it intersects with another\n * handle. Uses <checkLabelHandle> for checking and moving. Default is false.\n */\nmxEdgeHandler.prototype.manageLabelHandle = false;\n\n/**\n * Function: init\n * \n * Initializes the shapes required for this edge handler.\n */\nmxEdgeHandler.prototype.init = function()\n{\n\tthis.graph = this.state.view.graph;\n\tthis.marker = this.createMarker();\n\tthis.constraintHandler = new mxConstraintHandler(this.graph);\n\t\n\t// Clones the original points from the cell\n\t// and makes sure at least one point exists\n\tthis.points = [];\n\t\n\t// Uses the absolute points of the state\n\t// for the initial configuration and preview\n\tthis.abspoints = this.getSelectionPoints(this.state);\n\tthis.shape = this.createSelectionShape(this.abspoints);\n\tthis.shape.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\tmxConstants.DIALECT_MIXEDHTML : mxConstants.DIALECT_SVG;\n\tthis.shape.init(this.graph.getView().getOverlayPane());\n\tthis.shape.pointerEvents = false;\n\tthis.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE);\n\tmxEvent.redirectMouseEvents(this.shape.node, this.graph, this.state);\n\n\t// Updates preferHtml\n\tthis.preferHtml = this.state.text != null &&\n\t\tthis.state.text.node.parentNode == this.graph.container;\n\t\n\tif (!this.preferHtml)\n\t{\n\t\t// Checks source terminal\n\t\tvar sourceState = this.state.getVisibleTerminalState(true);\n\t\t\n\t\tif (sourceState != null)\n\t\t{\n\t\t\tthis.preferHtml = sourceState.text != null &&\n\t\t\t\tsourceState.text.node.parentNode == this.graph.container;\n\t\t}\n\t\t\n\t\tif (!this.preferHtml)\n\t\t{\n\t\t\t// Checks target terminal\n\t\t\tvar targetState = this.state.getVisibleTerminalState(false);\n\t\t\t\n\t\t\tif (targetState != null)\n\t\t\t{\n\t\t\t\tthis.preferHtml = targetState.text != null &&\n\t\t\t\ttargetState.text.node.parentNode == this.graph.container;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Creates bends for the non-routed absolute points\n\t// or bends that don't correspond to points\n\tif (this.graph.getSelectionCount() < mxGraphHandler.prototype.maxCells ||\n\t\tmxGraphHandler.prototype.maxCells <= 0)\n\t{\n\t\tthis.bends = this.createBends();\n\n\t\tif (this.isVirtualBendsEnabled())\n\t\t{\n\t\t\tthis.virtualBends = this.createVirtualBends();\n\t\t}\n\t}\n\n\t// Adds a rectangular handle for the label position\n\tthis.label = new mxPoint(this.state.absoluteOffset.x, this.state.absoluteOffset.y);\n\tthis.labelShape = this.createLabelHandleShape();\n\tthis.initBend(this.labelShape);\n\tthis.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE);\n\t\n\tthis.customHandles = this.createCustomHandles();\n\t\n\tthis.updateParentHighlight();\n\tthis.redraw();\n};\n\n\n/**\n * Function: isParentHighlightVisible\n * \n * Returns true if the parent highlight should be visible. This implementation\n * always returns true.\n */\nmxEdgeHandler.prototype.isParentHighlightVisible = mxVertexHandler.prototype.isParentHighlightVisible;\n\n/**\n * Function: updateParentHighlight\n * \n * Updates the highlight of the parent if <parentHighlightEnabled> is true.\n */\nmxEdgeHandler.prototype.updateParentHighlight = mxVertexHandler.prototype.updateParentHighlight;\n\n/**\n * Function: createCustomHandles\n * \n * Returns an array of custom handles. This implementation returns null.\n */\nmxEdgeHandler.prototype.createCustomHandles = function()\n{\n\treturn null;\n};\n\n/**\n * Function: isVirtualBendsEnabled\n * \n * Returns true if virtual bends should be added. This returns true if\n * <virtualBendsEnabled> is true and the current style allows and\n * renders custom waypoints.\n */\nmxEdgeHandler.prototype.isVirtualBendsEnabled = function(evt)\n{\n\treturn this.virtualBendsEnabled && (this.state.style[mxConstants.STYLE_EDGE] == null ||\n\t\t\tthis.state.style[mxConstants.STYLE_EDGE] == mxConstants.NONE ||\n\t\t\tthis.state.style[mxConstants.STYLE_NOEDGESTYLE] == 1)  &&\n\t\t\tmxUtils.getValue(this.state.style, mxConstants.STYLE_SHAPE, null) != 'arrow';\n};\n\n/**\n * Function: isCellEnabled\n * \n * Returns true if the given cell allows new connections to be created. This implementation\n * always returns true.\n */\nmxEdgeHandler.prototype.isCellEnabled = function(cell)\n{\n\treturn true;\n};\n\n/**\n * Function: isAddPointEvent\n * \n * Returns true if the given event is a trigger to add a new point. This\n * implementation returns true if shift is pressed.\n */\nmxEdgeHandler.prototype.isAddPointEvent = function(evt)\n{\n\treturn mxEvent.isShiftDown(evt);\n};\n\n/**\n * Function: isRemovePointEvent\n * \n * Returns true if the given event is a trigger to remove a point. This\n * implementation returns true if shift is pressed.\n */\nmxEdgeHandler.prototype.isRemovePointEvent = function(evt)\n{\n\treturn mxEvent.isShiftDown(evt);\n};\n\n/**\n * Function: getSelectionPoints\n * \n * Returns the list of points that defines the selection stroke.\n */\nmxEdgeHandler.prototype.getSelectionPoints = function(state)\n{\n\treturn state.absolutePoints;\n};\n\n/**\n * Function: createParentHighlightShape\n * \n * Creates the shape used to draw the selection border.\n */\nmxEdgeHandler.prototype.createParentHighlightShape = function(bounds)\n{\n\tvar shape = new mxRectangleShape(mxRectangle.fromRectangle(bounds),\n\t\tnull, this.getSelectionColor());\n\tshape.strokewidth = this.getSelectionStrokeWidth();\n\tshape.isDashed = this.isSelectionDashed();\n\t\n\treturn shape;\n};\n\n/**\n * Function: createSelectionShape\n * \n * Creates the shape used to draw the selection border.\n */\nmxEdgeHandler.prototype.createSelectionShape = function(points)\n{\n\tvar shape = new this.state.shape.constructor();\n\tshape.outline = true;\n\tshape.apply(this.state);\n\t\n\tshape.isDashed = this.isSelectionDashed();\n\tshape.stroke = this.getSelectionColor();\n\tshape.isShadow = false;\n\t\n\treturn shape;\n};\n\n/**\n * Function: getSelectionColor\n * \n * Returns <mxConstants.EDGE_SELECTION_COLOR>.\n */\nmxEdgeHandler.prototype.getSelectionColor = function()\n{\n\treturn mxConstants.EDGE_SELECTION_COLOR;\n};\n\n/**\n * Function: getSelectionStrokeWidth\n * \n * Returns <mxConstants.EDGE_SELECTION_STROKEWIDTH>.\n */\nmxEdgeHandler.prototype.getSelectionStrokeWidth = function()\n{\n\treturn mxConstants.EDGE_SELECTION_STROKEWIDTH;\n};\n\n/**\n * Function: isSelectionDashed\n * \n * Returns <mxConstants.EDGE_SELECTION_DASHED>.\n */\nmxEdgeHandler.prototype.isSelectionDashed = function()\n{\n\treturn mxConstants.EDGE_SELECTION_DASHED;\n};\n\n/**\n * Function: isConnectableCell\n * \n * Returns true if the given cell is connectable. This is a hook to\n * disable floating connections. This implementation returns true.\n */\nmxEdgeHandler.prototype.isConnectableCell = function(cell)\n{\n\treturn true;\n};\n\n/**\n * Function: getCellAt\n * \n * Creates and returns the <mxCellMarker> used in <marker>.\n */\nmxEdgeHandler.prototype.getCellAt = function(x, y)\n{\n\treturn (!this.outlineConnect) ? this.graph.getCellAt(x, y) : null;\n};\n\n/**\n * Function: createMarker\n * \n * Creates and returns the <mxCellMarker> used in <marker>.\n */\nmxEdgeHandler.prototype.createMarker = function()\n{\n\tvar marker = new mxCellMarker(this.graph);\n\tvar self = this; // closure\n\n\t// Only returns edges if they are connectable and never returns\n\t// the edge that is currently being modified\n\tmarker.getCell = function(me)\n\t{\n\t\tvar cell = mxCellMarker.prototype.getCell.apply(this, arguments);\n\n\t\t// Checks for cell at preview point (with grid)\n\t\tif ((cell == self.state.cell || cell == null) && self.currentPoint != null)\n\t\t{\n\t\t\tcell = self.graph.getCellAt(self.currentPoint.x, self.currentPoint.y);\n\t\t}\n\t\t\n\t\t// Uses connectable parent vertex if one exists\n\t\tif (cell != null && !this.graph.isCellConnectable(cell))\n\t\t{\n\t\t\tvar parent = this.graph.getModel().getParent(cell);\n\t\t\t\n\t\t\tif (this.graph.getModel().isVertex(parent) && this.graph.isCellConnectable(parent))\n\t\t\t{\n\t\t\t\tcell = parent;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar model = self.graph.getModel();\n\t\t\n\t\tif ((this.graph.isSwimlane(cell) && self.currentPoint != null &&\n\t\t\tthis.graph.hitsSwimlaneContent(cell, self.currentPoint.x, self.currentPoint.y)) ||\n\t\t\t(!self.isConnectableCell(cell)) || (cell == self.state.cell ||\n\t\t\t(cell != null && !self.graph.connectableEdges && model.isEdge(cell))) ||\n\t\t\tmodel.isAncestor(self.state.cell, cell))\n\t\t{\n\t\t\tcell = null;\n\t\t}\n\t\t\n\t\tif (!this.graph.isCellConnectable(cell))\n\t\t{\n\t\t\tcell = null;\n\t\t}\n\t\t\n\t\treturn cell;\n\t};\n\n\t// Sets the highlight color according to validateConnection\n\tmarker.isValidState = function(state)\n\t{\n\t\tvar model = self.graph.getModel();\n\t\tvar other = self.graph.view.getTerminalPort(state,\n\t\t\tself.graph.view.getState(model.getTerminal(self.state.cell,\n\t\t\t!self.isSource)), !self.isSource);\n\t\tvar otherCell = (other != null) ? other.cell : null;\n\t\tvar source = (self.isSource) ? state.cell : otherCell;\n\t\tvar target = (self.isSource) ? otherCell : state.cell;\n\t\t\n\t\t// Updates the error message of the handler\n\t\tself.error = self.validateConnection(source, target);\n\n\t\treturn self.error == null;\n\t};\n\t\n\treturn marker;\n};\n\n/**\n * Function: validateConnection\n * \n * Returns the error message or an empty string if the connection for the\n * given source, target pair is not valid. Otherwise it returns null. This\n * implementation uses <mxGraph.getEdgeValidationError>.\n * \n * Parameters:\n * \n * source - <mxCell> that represents the source terminal.\n * target - <mxCell> that represents the target terminal.\n */\nmxEdgeHandler.prototype.validateConnection = function(source, target)\n{\n\treturn this.graph.getEdgeValidationError(this.state.cell, source, target);\n};\n\n/**\n * Function: createBends\n * \n * Creates and returns the bends used for modifying the edge. This is\n * typically an array of <mxRectangleShapes>.\n */\n mxEdgeHandler.prototype.createBends = function()\n {\n\tvar cell = this.state.cell;\n\tvar bends = [];\n\n\tfor (var i = 0; i < this.abspoints.length; i++)\n\t{\n\t\tif (this.isHandleVisible(i))\n\t\t{\n\t\t\tvar source = i == 0;\n\t\t\tvar target = i == this.abspoints.length - 1;\n\t\t\tvar terminal = source || target;\n\n\t\t\tif (terminal || this.graph.isCellBendable(cell))\n\t\t\t{\n\t\t\t\t(mxUtils.bind(this, function(index)\n\t\t\t\t{\n\t\t\t\t\tvar bend = this.createHandleShape(index);\n\t\t\t\t\tthis.initBend(bend, mxUtils.bind(this, mxUtils.bind(this, function()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.dblClickRemoveEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.removePoint(this.state, index);\n\t\t\t\t\t\t}\n\t\t\t\t\t})));\n\t\n\t\t\t\t\tif (this.isHandleEnabled(i))\n\t\t\t\t\t{\n\t\t\t\t\t\tbend.setCursor((terminal) ? mxConstants.CURSOR_TERMINAL_HANDLE : mxConstants.CURSOR_BEND_HANDLE);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tbends.push(bend);\n\t\t\t\t\n\t\t\t\t\tif (!terminal)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.points.push(new mxPoint(0,0));\n\t\t\t\t\t\tbend.node.style.visibility = 'hidden';\n\t\t\t\t\t}\n\t\t\t\t}))(i);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn bends;\n};\n\n/**\n * Function: createVirtualBends\n * \n * Creates and returns the bends used for modifying the edge. This is\n * typically an array of <mxRectangleShapes>.\n */\n mxEdgeHandler.prototype.createVirtualBends = function()\n {\n\tvar cell = this.state.cell;\n\tvar last = this.abspoints[0];\n\tvar bends = [];\n\n\tif (this.graph.isCellBendable(cell))\n\t{\n\t\tfor (var i = 1; i < this.abspoints.length; i++)\n\t\t{\n\t\t\t(mxUtils.bind(this, function(bend)\n\t\t\t{\n\t\t\t\tthis.initBend(bend);\n\t\t\t\tbend.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE);\n\t\t\t\tbends.push(bend);\n\t\t\t}))(this.createHandleShape());\n\t\t}\n\t}\n\n\treturn bends;\n};\n\n/**\n * Function: isHandleEnabled\n * \n * Creates the shape used to display the given bend.\n */\nmxEdgeHandler.prototype.isHandleEnabled = function(index)\n{\n\treturn true;\n};\n\n/**\n * Function: isHandleVisible\n * \n * Returns true if the handle at the given index is visible.\n */\nmxEdgeHandler.prototype.isHandleVisible = function(index)\n{\n\tvar source = this.state.getVisibleTerminalState(true);\n\tvar target = this.state.getVisibleTerminalState(false);\n\tvar geo = this.graph.getCellGeometry(this.state.cell);\n\tvar edgeStyle = (geo != null) ? this.graph.view.getEdgeStyle(this.state, geo.points, source, target) : null;\n\n\treturn edgeStyle != mxEdgeStyle.EntityRelation || index == 0 || index == this.abspoints.length - 1;\n};\n\n/**\n * Function: createHandleShape\n * \n * Creates the shape used to display the given bend. Note that the index may be\n * null for special cases, such as when called from\n * <mxElbowEdgeHandler.createVirtualBend>. Only images and rectangles should be\n * returned if support for HTML labels with not foreign objects is required.\n * Index if null for virtual handles.\n */\nmxEdgeHandler.prototype.createHandleShape = function(index)\n{\n\tif (this.handleImage != null)\n\t{\n\t\tvar shape = new mxImageShape(new mxRectangle(0, 0, this.handleImage.width, this.handleImage.height), this.handleImage.src);\n\t\t\n\t\t// Allows HTML rendering of the images\n\t\tshape.preserveImageAspect = false;\n\n\t\treturn shape;\n\t}\n\telse\n\t{\n\t\tvar s = mxConstants.HANDLE_SIZE;\n\t\t\n\t\tif (this.preferHtml)\n\t\t{\n\t\t\ts -= 1;\n\t\t}\n\t\t\n\t\treturn new mxRectangleShape(new mxRectangle(0, 0, s, s), mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);\n\t}\n};\n\n/**\n * Function: createLabelHandleShape\n * \n * Creates the shape used to display the the label handle.\n */\nmxEdgeHandler.prototype.createLabelHandleShape = function()\n{\n\tif (this.labelHandleImage != null)\n\t{\n\t\tvar shape = new mxImageShape(new mxRectangle(0, 0, this.labelHandleImage.width, this.labelHandleImage.height), this.labelHandleImage.src);\n\t\t\n\t\t// Allows HTML rendering of the images\n\t\tshape.preserveImageAspect = false;\n\n\t\treturn shape;\n\t}\n\telse\n\t{\n\t\tvar s = mxConstants.LABEL_HANDLE_SIZE;\n\t\treturn new mxRectangleShape(new mxRectangle(0, 0, s, s), mxConstants.LABEL_HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);\n\t}\n};\n\n/**\n * Function: initBend\n * \n * Helper method to initialize the given bend.\n * \n * Parameters:\n * \n * bend - <mxShape> that represents the bend to be initialized.\n */\nmxEdgeHandler.prototype.initBend = function(bend, dblClick)\n{\n\tif (this.preferHtml)\n\t{\n\t\tbend.dialect = mxConstants.DIALECT_STRICTHTML;\n\t\tbend.init(this.graph.container);\n\t}\n\telse\n\t{\n\t\tbend.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ?\n\t\t\tmxConstants.DIALECT_MIXEDHTML : mxConstants.DIALECT_SVG;\n\t\tbend.init(this.graph.getView().getOverlayPane());\n\t}\n\n\tmxEvent.redirectMouseEvents(bend.node, this.graph, this.state,\n\t\t\tnull, null, null, dblClick);\n\t\n\t// Fixes lost event tracking for images in quirks / IE8 standards\n\tif (mxClient.IS_QUIRKS || document.documentMode == 8)\n\t{\n\t\tmxEvent.addListener(bend.node, 'dragstart', function(evt)\n\t\t{\n\t\t\tmxEvent.consume(evt);\n\t\t\t\n\t\t\treturn false;\n\t\t});\n\t}\n\t\n\tif (mxClient.IS_TOUCH)\n\t{\n\t\tbend.node.setAttribute('pointer-events', 'none');\n\t}\n};\n\n/**\n * Function: getHandleForEvent\n * \n * Returns the index of the handle for the given event.\n */\nmxEdgeHandler.prototype.getHandleForEvent = function(me)\n{\n\tvar result = null;\n\t\n\tif (this.state != null)\n\t{\n\t\t// Connection highlight may consume events before they reach sizer handle\n\t\tvar tol = (!mxEvent.isMouseEvent(me.getEvent())) ? this.tolerance : 1;\n\t\tvar hit = (this.allowHandleBoundsCheck && (mxClient.IS_IE || tol > 0)) ?\n\t\t\tnew mxRectangle(me.getGraphX() - tol, me.getGraphY() - tol, 2 * tol, 2 * tol) : null;\n\t\tvar minDistSq = null;\n\t\n\t\tfunction checkShape(shape)\n\t\t{\n\t\t\tif (shape != null && shape.node != null && shape.node.style.display != 'none' &&\n\t\t\t\tshape.node.style.visibility != 'hidden' &&\n\t\t\t\t(me.isSource(shape) || (hit != null && mxUtils.intersects(shape.bounds, hit))))\n\t\t\t{\n\t\t\t\tvar dx = me.getGraphX() - shape.bounds.getCenterX();\n\t\t\t\tvar dy = me.getGraphY() - shape.bounds.getCenterY();\n\t\t\t\tvar tmp = dx * dx + dy * dy;\n\t\t\t\t\n\t\t\t\tif (minDistSq == null || tmp <= minDistSq)\n\t\t\t\t{\n\t\t\t\t\tminDistSq = tmp;\n\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif (this.customHandles != null && this.isCustomHandleEvent(me))\n\t\t{\n\t\t\t// Inverse loop order to match display order\n\t\t\tfor (var i = this.customHandles.length - 1; i >= 0; i--)\n\t\t\t{\n\t\t\t\tif (checkShape(this.customHandles[i].shape))\n\t\t\t\t{\n\t\t\t\t\t// LATER: Return reference to active shape\n\t\t\t\t\treturn mxEvent.CUSTOM_HANDLE - i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tif (me.isSource(this.state.text) || checkShape(this.labelShape))\n\t\t{\n\t\t\tresult = mxEvent.LABEL_HANDLE;\n\t\t}\n\t\t\n\t\tif (this.bends != null)\n\t\t{\n\t\t\tfor (var i = 0; i < this.bends.length; i++)\n\t\t\t{\n\t\t\t\tif (checkShape(this.bends[i]))\n\t\t\t\t{\n\t\t\t\t\tresult = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.virtualBends != null && this.isAddVirtualBendEvent(me))\n\t\t{\n\t\t\tfor (var i = 0; i < this.virtualBends.length; i++)\n\t\t\t{\n\t\t\t\tif (checkShape(this.virtualBends[i]))\n\t\t\t\t{\n\t\t\t\t\tresult = mxEvent.VIRTUAL_HANDLE - i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\n * Function: isAddVirtualBendEvent\n * \n * Returns true if the given event allows virtual bends to be added. This\n * implementation returns true.\n */\nmxEdgeHandler.prototype.isAddVirtualBendEvent = function(me)\n{\n\treturn true;\n};\n\n/**\n * Function: isCustomHandleEvent\n * \n * Returns true if the given event allows custom handles to be changed. This\n * implementation returns true.\n */\nmxEdgeHandler.prototype.isCustomHandleEvent = function(me)\n{\n\treturn true;\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by checking if a special element of the handler\n * was clicked, in which case the index parameter is non-null. The\n * indices may be one of <LABEL_HANDLE> or the number of the respective\n * control point. The source and target points are used for reconnecting\n * the edge.\n */\nmxEdgeHandler.prototype.mouseDown = function(sender, me)\n{\n\tvar handle = this.getHandleForEvent(me);\n\t\n\tif (this.bends != null && this.bends[handle] != null)\n\t{\n\t\tvar b = this.bends[handle].bounds;\n\t\tthis.snapPoint = new mxPoint(b.getCenterX(), b.getCenterY());\n\t}\n\t\n\tif (this.addEnabled && handle == null && this.isAddPointEvent(me.getEvent()))\n\t{\n\t\tthis.addPoint(this.state, me.getEvent());\n\t\tme.consume();\n\t}\n\telse if (handle != null && !me.isConsumed() && this.graph.isEnabled())\n\t{\n\t\tif (this.removeEnabled && this.isRemovePointEvent(me.getEvent()))\n\t\t{\n\t\t\tthis.removePoint(this.state, handle);\n\t\t}\n\t\telse if (handle != mxEvent.LABEL_HANDLE || this.graph.isLabelMovable(me.getCell()))\n\t\t{\n\t\t\tif (handle <= mxEvent.VIRTUAL_HANDLE)\n\t\t\t{\n\t\t\t\tmxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE - handle].node, 100);\n\t\t\t}\n\t\t\t\n\t\t\tthis.start(me.getX(), me.getY(), handle);\n\t\t}\n\t\t\n\t\tme.consume();\n\t}\n};\n\n/**\n * Function: start\n * \n * Starts the handling of the mouse gesture.\n */\nmxEdgeHandler.prototype.start = function(x, y, index)\n{\n\tthis.startX = x;\n\tthis.startY = y;\n\n\tthis.isSource = (this.bends == null) ? false : index == 0;\n\tthis.isTarget = (this.bends == null) ? false : index == this.bends.length - 1;\n\tthis.isLabel = index == mxEvent.LABEL_HANDLE;\n\n\tif (this.isSource || this.isTarget)\n\t{\n\t\tvar cell = this.state.cell;\n\t\tvar terminal = this.graph.model.getTerminal(cell, this.isSource);\n\n\t\tif ((terminal == null && this.graph.isTerminalPointMovable(cell, this.isSource)) ||\n\t\t\t(terminal != null && this.graph.isCellDisconnectable(cell, terminal, this.isSource)))\n\t\t{\n\t\t\tthis.index = index;\n\t\t}\n\t}\n\telse\n\t{\n\t\tthis.index = index;\n\t}\n\t\n\t// Hides other custom handles\n\tif (this.index <= mxEvent.CUSTOM_HANDLE && this.index > mxEvent.VIRTUAL_HANDLE)\n\t{\n\t\tif (this.customHandles != null)\n\t\t{\n\t\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t\t{\n\t\t\t\tif (i != mxEvent.CUSTOM_HANDLE - this.index)\n\t\t\t\t{\n\t\t\t\t\tthis.customHandles[i].setVisible(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: clonePreviewState\n * \n * Returns a clone of the current preview state for the given point and terminal.\n */\nmxEdgeHandler.prototype.clonePreviewState = function(point, terminal)\n{\n\treturn this.state.clone();\n};\n\n/**\n * Function: getSnapToTerminalTolerance\n * \n * Returns the tolerance for the guides. Default value is\n * gridSize * scale / 2.\n */\nmxEdgeHandler.prototype.getSnapToTerminalTolerance = function()\n{\n\treturn this.graph.gridSize * this.graph.view.scale / 2;\n};\n\n/**\n * Function: updateHint\n * \n * Hook for subclassers do show details while the handler is active.\n */\nmxEdgeHandler.prototype.updateHint = function(me, point) { };\n\n/**\n * Function: removeHint\n * \n * Hooks for subclassers to hide details when the handler gets inactive.\n */\nmxEdgeHandler.prototype.removeHint = function() { };\n\n/**\n * Function: roundLength\n * \n * Hook for rounding the unscaled width or height. This uses Math.round.\n */\nmxEdgeHandler.prototype.roundLength = function(length)\n{\n\treturn Math.round(length);\n};\n\n/**\n * Function: isSnapToTerminalsEvent\n * \n * Returns true if <snapToTerminals> is true and if alt is not pressed.\n */\nmxEdgeHandler.prototype.isSnapToTerminalsEvent = function(me)\n{\n\treturn this.snapToTerminals && !mxEvent.isAltDown(me.getEvent());\n};\n\n/**\n * Function: getPointForEvent\n * \n * Returns the point for the given event.\n */\nmxEdgeHandler.prototype.getPointForEvent = function(me)\n{\n\tvar view = this.graph.getView();\n\tvar scale = view.scale;\n\tvar point = new mxPoint(this.roundLength(me.getGraphX() / scale) * scale,\n\t\tthis.roundLength(me.getGraphY() / scale) * scale);\n\t\n\tvar tt = this.getSnapToTerminalTolerance();\n\tvar overrideX = false;\n\tvar overrideY = false;\t\t\n\t\n\tif (tt > 0 && this.isSnapToTerminalsEvent(me))\n\t{\n\t\tfunction snapToPoint(pt)\n\t\t{\n\t\t\tif (pt != null)\n\t\t\t{\n\t\t\t\tvar x = pt.x;\n\n\t\t\t\tif (Math.abs(point.x - x) < tt)\n\t\t\t\t{\n\t\t\t\t\tpoint.x = x;\n\t\t\t\t\toverrideX = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar y = pt.y;\n\n\t\t\t\tif (Math.abs(point.y - y) < tt)\n\t\t\t\t{\n\t\t\t\t\tpoint.y = y;\n\t\t\t\t\toverrideY = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Temporary function\n\t\tfunction snapToTerminal(terminal)\n\t\t{\n\t\t\tif (terminal != null)\n\t\t\t{\n\t\t\t\tsnapToPoint.call(this, new mxPoint(view.getRoutingCenterX(terminal),\n\t\t\t\t\t\tview.getRoutingCenterY(terminal)));\n\t\t\t}\n\t\t};\n\n\t\tsnapToTerminal.call(this, this.state.getVisibleTerminalState(true));\n\t\tsnapToTerminal.call(this, this.state.getVisibleTerminalState(false));\n\n\t\tif (this.state.absolutePoints != null)\n\t\t{\n\t\t\tfor (var i = 0; i < this.state.absolutePoints.length; i++)\n\t\t\t{\n\t\t\t\tsnapToPoint.call(this, this.state.absolutePoints[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.graph.isGridEnabledEvent(me.getEvent()))\n\t{\n\t\tvar tr = view.translate;\n\t\t\n\t\tif (!overrideX)\n\t\t{\n\t\t\tpoint.x = (this.graph.snap(point.x / scale - tr.x) + tr.x) * scale;\n\t\t}\n\t\t\n\t\tif (!overrideY)\n\t\t{\n\t\t\tpoint.y = (this.graph.snap(point.y / scale - tr.y) + tr.y) * scale;\n\t\t}\n\t}\n\t\n\treturn point;\n};\n\n/**\n * Function: getPreviewTerminalState\n * \n * Updates the given preview state taking into account the state of the constraint handler.\n */\nmxEdgeHandler.prototype.getPreviewTerminalState = function(me)\n{\n\tthis.constraintHandler.update(me, this.isSource, true, me.isSource(this.marker.highlight.shape) ? null : this.currentPoint);\n\t\n\tif (this.constraintHandler.currentFocus != null && this.constraintHandler.currentConstraint != null)\n\t{\n\t\t// Handles special case where grid is large and connection point is at actual point in which\n\t\t// case the outline is not followed as long as we're < gridSize / 2 away from that point\n\t\tif (this.marker.highlight != null && this.marker.highlight.state != null &&\n\t\t\tthis.marker.highlight.state.cell == this.constraintHandler.currentFocus.cell)\n\t\t{\n\t\t\t// Direct repaint needed if cell already highlighted\n\t\t\tif (this.marker.highlight.shape.stroke != 'transparent')\n\t\t\t{\n\t\t\t\tthis.marker.highlight.shape.stroke = 'transparent';\n\t\t\t\tthis.marker.highlight.repaint();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.marker.markCell(this.constraintHandler.currentFocus.cell, 'transparent');\n\t\t}\n\t\t\n\t\tvar model = this.graph.getModel();\n\t\tvar other = this.graph.view.getTerminalPort(this.state,\n\t\t\t\tthis.graph.view.getState(model.getTerminal(this.state.cell,\n\t\t\t!this.isSource)), !this.isSource);\n\t\tvar otherCell = (other != null) ? other.cell : null;\n\t\tvar source = (this.isSource) ? this.constraintHandler.currentFocus.cell : otherCell;\n\t\tvar target = (this.isSource) ? otherCell : this.constraintHandler.currentFocus.cell;\n\t\t\n\t\t// Updates the error message of the handler\n\t\tthis.error = this.validateConnection(source, target);\n\t\tvar result = null;\n\t\t\n\t\tif (this.error == null)\n\t\t{\n\t\t\tresult = this.constraintHandler.currentFocus;\n\t\t}\n\t\t\n\t\tif (this.error != null || (result != null &&\n\t\t\t!this.isCellEnabled(result.cell)))\n\t\t{\n\t\t\tthis.constraintHandler.reset();\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n\telse if (!this.graph.isIgnoreTerminalEvent(me.getEvent()))\n\t{\n\t\tthis.marker.process(me);\n\t\tvar state = this.marker.getValidState();\n\t\t\n\t\tif (state != null && !this.isCellEnabled(state.cell))\n\t\t{\n\t\t\tthis.constraintHandler.reset();\n\t\t\tthis.marker.reset();\n\t\t}\n\t\t\n\t\treturn this.marker.getValidState();\n\t}\n\telse\n\t{\n\t\tthis.marker.reset();\n\t\t\n\t\treturn null;\n\t}\n};\n\n/**\n * Function: getPreviewPoints\n * \n * Updates the given preview state taking into account the state of the constraint handler.\n * \n * Parameters:\n * \n * pt - <mxPoint> that contains the current pointer position.\n * me - Optional <mxMouseEvent> that contains the current event.\n */\nmxEdgeHandler.prototype.getPreviewPoints = function(pt, me)\n{\n\tvar geometry = this.graph.getCellGeometry(this.state.cell);\n\tvar points = (geometry.points != null) ? geometry.points.slice() : null;\n\tvar point = new mxPoint(pt.x, pt.y);\n\tvar result = null;\n\t\n\tif (!this.isSource && !this.isTarget)\n\t{\n\t\tthis.convertPoint(point, false);\n\t\t\n\t\tif (points == null)\n\t\t{\n\t\t\tpoints = [point];\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Adds point from virtual bend\n\t\t\tif (this.index <= mxEvent.VIRTUAL_HANDLE)\n\t\t\t{\n\t\t\t\tpoints.splice(mxEvent.VIRTUAL_HANDLE - this.index, 0, point);\n\t\t\t}\n\n\t\t\t// Removes point if dragged on terminal point\n\t\t\tif (!this.isSource && !this.isTarget)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < this.bends.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (i != this.index)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar bend = this.bends[i];\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (bend != null && mxUtils.contains(bend.bounds, pt.x, pt.y))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this.index <= mxEvent.VIRTUAL_HANDLE)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpoints.splice(mxEvent.VIRTUAL_HANDLE - this.index, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpoints.splice(this.index - 1, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tresult = points;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Removes point if user tries to straighten a segment\n\t\t\t\tif (result == null && this.straightRemoveEnabled && (me == null || !mxEvent.isAltDown(me.getEvent())))\n\t\t\t\t{\n\t\t\t\t\tvar tol = this.graph.tolerance * this.graph.tolerance;\n\t\t\t\t\tvar abs = this.state.absolutePoints.slice();\n\t\t\t\t\tabs[this.index] = pt;\n\t\t\t\t\t\n\t\t\t\t\t// Handes special case where removing waypoint affects tolerance (flickering)\n\t\t\t\t\tvar src = this.state.getVisibleTerminalState(true);\n\t\t\t\t\t\n\t\t\t\t\tif (src != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar c = this.graph.getConnectionConstraint(this.state, src, true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Checks if point is not fixed\n\t\t\t\t\t\tif (c == null || this.graph.getConnectionPoint(src, c) == null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tabs[0] = new mxPoint(src.view.getRoutingCenterX(src), src.view.getRoutingCenterY(src));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar trg = this.state.getVisibleTerminalState(false);\n\t\t\t\t\t\n\t\t\t\t\tif (trg != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar c = this.graph.getConnectionConstraint(this.state, trg, false);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Checks if point is not fixed\n\t\t\t\t\t\tif (c == null || this.graph.getConnectionPoint(trg, c) == null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tabs[abs.length - 1] = new mxPoint(trg.view.getRoutingCenterX(trg), trg.view.getRoutingCenterY(trg));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction checkRemove(idx, tmp)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (idx > 0 && idx < abs.length - 1 &&\n\t\t\t\t\t\t\tmxUtils.ptSegDistSq(abs[idx - 1].x, abs[idx - 1].y,\n\t\t\t\t\t\t\t\tabs[idx + 1].x, abs[idx + 1].y, tmp.x, tmp.y) < tol)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpoints.splice(idx - 1, 1);\n\t\t\t\t\t\t\tresult = points;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// LATER: Check if other points can be removed if a segment is made straight\n\t\t\t\t\tcheckRemove(this.index, pt);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Updates existing point\n\t\t\tif (result == null && this.index > mxEvent.VIRTUAL_HANDLE)\n\t\t\t{\n\t\t\t\tpoints[this.index - 1] = point;\n\t\t\t}\n\t\t}\n\t}\n\telse if (this.graph.resetEdgesOnConnect)\n\t{\n\t\tpoints = null;\n\t}\n\t\n\treturn (result != null) ? result : points;\n};\n\n/**\n * Function: isOutlineConnectEvent\n * \n * Returns true if <outlineConnect> is true and the source of the event is the outline shape\n * or shift is pressed.\n */\nmxEdgeHandler.prototype.isOutlineConnectEvent = function(me)\n{\n\tvar offset = mxUtils.getOffset(this.graph.container);\n\tvar evt = me.getEvent();\n\t\n\tvar clientX = mxEvent.getClientX(evt);\n\tvar clientY = mxEvent.getClientY(evt);\n\t\n\tvar doc = document.documentElement;\n\tvar left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n\tvar top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\n\t\n\tvar gridX = this.currentPoint.x - this.graph.container.scrollLeft + offset.x - left;\n\tvar gridY = this.currentPoint.y - this.graph.container.scrollTop + offset.y - top;\n\n\treturn this.outlineConnect && !mxEvent.isShiftDown(me.getEvent()) &&\n\t\t(me.isSource(this.marker.highlight.shape) ||\n\t\t(mxEvent.isAltDown(me.getEvent()) && me.getState() != null) ||\n\t\tthis.marker.highlight.isHighlightAt(clientX, clientY) ||\n\t\t((gridX != clientX || gridY != clientY) && me.getState() == null &&\n\t\tthis.marker.highlight.isHighlightAt(gridX, gridY)));\n};\n\n/**\n * Function: updatePreviewState\n * \n * Updates the given preview state taking into account the state of the constraint handler.\n */\nmxEdgeHandler.prototype.updatePreviewState = function(edge, point, terminalState, me, outline)\n{\n\t// Computes the points for the edge style and terminals\n\tvar sourceState = (this.isSource) ? terminalState : this.state.getVisibleTerminalState(true);\n\tvar targetState = (this.isTarget) ? terminalState : this.state.getVisibleTerminalState(false);\n\t\n\tvar sourceConstraint = this.graph.getConnectionConstraint(edge, sourceState, true);\n\tvar targetConstraint = this.graph.getConnectionConstraint(edge, targetState, false);\n\n\tvar constraint = this.constraintHandler.currentConstraint;\n\n\tif (constraint == null && outline)\n\t{\n\t\tif (terminalState != null)\n\t\t{\n\t\t\t// Handles special case where mouse is on outline away from actual end point\n\t\t\t// in which case the grid is ignored and mouse point is used instead\n\t\t\tif (me.isSource(this.marker.highlight.shape))\n\t\t\t{\n\t\t\t\tpoint = new mxPoint(me.getGraphX(), me.getGraphY());\n\t\t\t}\n\t\t\t\n\t\t\tconstraint = this.graph.getOutlineConstraint(point, terminalState, me);\n\t\t\tthis.constraintHandler.setFocus(me, terminalState, this.isSource);\n\t\t\tthis.constraintHandler.currentConstraint = constraint;\n\t\t\tthis.constraintHandler.currentPoint = point;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconstraint = new mxConnectionConstraint();\n\t\t}\n\t}\n\t\n\tif (this.outlineConnect && this.marker.highlight != null && this.marker.highlight.shape != null)\n\t{\n\t\tvar s = this.graph.view.scale;\n\t\t\n\t\tif (this.constraintHandler.currentConstraint != null &&\n\t\t\tthis.constraintHandler.currentFocus != null)\n\t\t{\n\t\t\tthis.marker.highlight.shape.stroke = (outline) ? mxConstants.OUTLINE_HIGHLIGHT_COLOR : 'transparent';\n\t\t\tthis.marker.highlight.shape.strokewidth = mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH / s / s;\n\t\t\tthis.marker.highlight.repaint();\n\t\t}\n\t\telse if (this.marker.hasValidState())\n\t\t{\n\t\t\tthis.marker.highlight.shape.stroke = (this.graph.isCellConnectable(me.getCell()) &&\n\t\t\t\tthis.marker.getValidState() != me.getState()) ?\n\t\t\t\t'transparent' : mxConstants.DEFAULT_VALID_COLOR;\n\t\t\tthis.marker.highlight.shape.strokewidth = mxConstants.HIGHLIGHT_STROKEWIDTH / s / s;\n\t\t\tthis.marker.highlight.repaint();\n\t\t}\n\t}\n\t\n\tif (this.isSource)\n\t{\n\t\tsourceConstraint = constraint;\n\t}\n\telse if (this.isTarget)\n\t{\n\t\ttargetConstraint = constraint;\n\t}\n\t\n\tif (this.isSource || this.isTarget)\n\t{\n\t\tif (constraint != null && constraint.point != null)\n\t\t{\n\t\t\tedge.style[(this.isSource) ? mxConstants.STYLE_EXIT_X : mxConstants.STYLE_ENTRY_X] = constraint.point.x;\n\t\t\tedge.style[(this.isSource) ? mxConstants.STYLE_EXIT_Y : mxConstants.STYLE_ENTRY_Y] = constraint.point.y;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdelete edge.style[(this.isSource) ? mxConstants.STYLE_EXIT_X : mxConstants.STYLE_ENTRY_X];\n\t\t\tdelete edge.style[(this.isSource) ? mxConstants.STYLE_EXIT_Y : mxConstants.STYLE_ENTRY_Y];\n\t\t}\n\t}\n\t\n\tedge.setVisibleTerminalState(sourceState, true);\n\tedge.setVisibleTerminalState(targetState, false);\n\t\n\tif (!this.isSource || sourceState != null)\n\t{\n\t\tedge.view.updateFixedTerminalPoint(edge, sourceState, true, sourceConstraint);\n\t}\n\t\n\tif (!this.isTarget || targetState != null)\n\t{\n\t\tedge.view.updateFixedTerminalPoint(edge, targetState, false, targetConstraint);\n\t}\n\t\n\tif ((this.isSource || this.isTarget) && terminalState == null)\n\t{\n\t\tedge.setAbsoluteTerminalPoint(point, this.isSource);\n\n\t\tif (this.marker.getMarkedState() == null)\n\t\t{\n\t\t\tthis.error = (this.graph.allowDanglingEdges) ? null : '';\n\t\t}\n\t}\n\t\n\tedge.view.updatePoints(edge, this.points, sourceState, targetState);\n\tedge.view.updateFloatingTerminalPoints(edge, sourceState, targetState);\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating the preview.\n */\nmxEdgeHandler.prototype.mouseMove = function(sender, me)\n{\n\tif (this.index != null && this.marker != null)\n\t{\n\t\tthis.currentPoint = this.getPointForEvent(me);\n\t\tthis.error = null;\n\t\t\n\t\t// Uses the current point from the constraint handler if available\n\t\tif (!this.graph.isIgnoreTerminalEvent(me.getEvent()) && mxEvent.isShiftDown(me.getEvent()) && this.snapPoint != null)\n\t\t{\n\t\t\tif (Math.abs(this.snapPoint.x - this.currentPoint.x) < Math.abs(this.snapPoint.y - this.currentPoint.y))\n\t\t\t{\n\t\t\t\tthis.currentPoint.x = this.snapPoint.x;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.currentPoint.y = this.snapPoint.y;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.index <= mxEvent.CUSTOM_HANDLE && this.index > mxEvent.VIRTUAL_HANDLE)\n\t\t{\n\t\t\tif (this.customHandles != null)\n\t\t\t{\n\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - this.index].processEvent(me);\n\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - this.index].positionChanged();\n\t\t\t\t\n\t\t\t\tif (this.shape != null && this.shape.node != null)\n\t\t\t\t{\n\t\t\t\t\tthis.shape.node.style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.isLabel)\n\t\t{\n\t\t\tthis.label.x = this.currentPoint.x;\n\t\t\tthis.label.y = this.currentPoint.y;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.points = this.getPreviewPoints(this.currentPoint, me);\n\t\t\tvar terminalState = (this.isSource || this.isTarget) ? this.getPreviewTerminalState(me) : null;\n\t\t\t\n\t\t\tif (this.constraintHandler.currentConstraint != null &&\n\t\t\t\tthis.constraintHandler.currentFocus != null &&\n\t\t\t\tthis.constraintHandler.currentPoint != null)\n\t\t\t{\n\t\t\t\tthis.currentPoint = this.constraintHandler.currentPoint.clone();\n\t\t\t}\n\t\t\telse if (this.outlineConnect)\n\t\t\t{\n\t\t\t\t// Need to check outline before cloning terminal state\n\t\t\t\tvar outline = (this.isSource || this.isTarget) ? this.isOutlineConnectEvent(me) : false\n\t\t\t\t\t\t\n\t\t\t\tif (outline)\n\t\t\t\t{\n\t\t\t\t\tterminalState = this.marker.highlight.state;\n\t\t\t\t}\n\t\t\t\telse if (terminalState != null && terminalState != me.getState() &&\n\t\t\t\t\tthis.graph.isCellConnectable(me.getCell()) &&\n\t\t\t\t\tthis.marker.highlight.shape != null)\n\t\t\t\t{\n\t\t\t\t\tthis.marker.highlight.shape.stroke = 'transparent';\n\t\t\t\t\tthis.marker.highlight.repaint();\n\t\t\t\t\tterminalState = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (terminalState != null && !this.isCellEnabled(terminalState.cell))\n\t\t\t{\n\t\t\t\tterminalState = null;\n\t\t\t\tthis.marker.reset();\n\t\t\t}\n\t\t\t\n\t\t\tvar clone = this.clonePreviewState(this.currentPoint, (terminalState != null) ? terminalState.cell : null);\n\t\t\tthis.updatePreviewState(clone, this.currentPoint, terminalState, me, outline);\n\n\t\t\t// Sets the color of the preview to valid or invalid, updates the\n\t\t\t// points of the preview and redraws\n\t\t\tvar color = (this.error == null) ? this.marker.validColor : this.marker.invalidColor;\n\t\t\tthis.setPreviewColor(color);\n\t\t\tthis.abspoints = clone.absolutePoints;\n\t\t\tthis.active = true;\n\t\t\tthis.updateHint(me, this.currentPoint);\n\t\t}\n\n\t\t// This should go before calling isOutlineConnectEvent above. As a workaround\n\t\t// we add an offset of gridSize to the hint to avoid problem with hit detection\n\t\t// in highlight.isHighlightAt (which uses comonentFromPoint)\n\t\tthis.drawPreview();\n\t\tmxEvent.consume(me.getEvent());\n\t\tme.consume();\n\t}\n\t// Workaround for disabling the connect highlight when over handle\n\telse if (mxClient.IS_IE && this.getHandleForEvent(me) != null)\n\t{\n\t\tme.consume(false);\n\t}\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event to applying the previewed changes on the edge by\n * using <moveLabel>, <connect> or <changePoints>.\n */\nmxEdgeHandler.prototype.mouseUp = function(sender, me)\n{\n\t// Workaround for wrong event source in Webkit\n\tif (this.index != null && this.marker != null)\n\t{\n\t\tif (this.shape != null && this.shape.node != null)\n\t\t{\n\t\t\tthis.shape.node.style.display = '';\n\t\t}\n\t\t\n\t\tvar edge = this.state.cell;\n\t\tvar index = this.index;\n\t\tthis.index = null;\n\n\t\t// Ignores event if mouse has not been moved\n\t\tif (me.getX() != this.startX || me.getY() != this.startY)\n\t\t{\n\t\t\tvar clone = !this.graph.isIgnoreTerminalEvent(me.getEvent()) && this.graph.isCloneEvent(me.getEvent()) &&\n\t\t\t\tthis.cloneEnabled && this.graph.isCellsCloneable();\n\t\t\t\n\t\t\t// Displays the reason for not carriying out the change\n\t\t\t// if there is an error message with non-zero length\n\t\t\tif (this.error != null)\n\t\t\t{\n\t\t\t\tif (this.error.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.graph.validationAlert(this.error);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (index <= mxEvent.CUSTOM_HANDLE && index > mxEvent.VIRTUAL_HANDLE)\n\t\t\t{\n\t\t\t\tif (this.customHandles != null)\n\t\t\t\t{\n\t\t\t\t\tvar model = this.graph.getModel();\n\t\t\t\t\t\n\t\t\t\t\tmodel.beginUpdate();\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.customHandles[mxEvent.CUSTOM_HANDLE - index].execute(me);\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tif (this.shape != null && this.shape.node != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.shape.apply(this.state);\n\t\t\t\t\t\t\tthis.shape.redraw();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfinally\n\t\t\t\t\t{\n\t\t\t\t\t\tmodel.endUpdate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.isLabel)\n\t\t\t{\n\t\t\t\tthis.moveLabel(this.state, this.label.x, this.label.y);\n\t\t\t}\n\t\t\telse if (this.isSource || this.isTarget)\n\t\t\t{\n\t\t\t\tvar terminal = null;\n\t\t\t\t\n\t\t\t\tif (this.constraintHandler.currentConstraint != null &&\n\t\t\t\t\tthis.constraintHandler.currentFocus != null)\n\t\t\t\t{\n\t\t\t\t\tterminal = this.constraintHandler.currentFocus.cell;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (terminal == null && this.marker.hasValidState() && this.marker.highlight != null &&\n\t\t\t\t\tthis.marker.highlight.shape != null &&\n\t\t\t\t\tthis.marker.highlight.shape.stroke != 'transparent' &&\n\t\t\t\t\tthis.marker.highlight.shape.stroke != 'white')\n\t\t\t\t{\n\t\t\t\t\tterminal = this.marker.validState.cell;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (terminal != null)\n\t\t\t\t{\n\t\t\t\t\tvar model = this.graph.getModel();\n\t\t\t\t\tvar parent = model.getParent(edge);\n\t\t\t\t\t\n\t\t\t\t\tmodel.beginUpdate();\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\t// Clones and adds the cell\n\t\t\t\t\t\tif (clone)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar geo = model.getGeometry(edge);\n\t\t\t\t\t\t\tvar clone = this.graph.cloneCell(edge);\n\t\t\t\t\t\t\tmodel.add(parent, clone, model.getChildCount(parent));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (geo != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgeo = geo.clone();\n\t\t\t\t\t\t\t\tmodel.setGeometry(clone, geo);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar other = model.getTerminal(edge, !this.isSource);\n\t\t\t\t\t\t\tthis.graph.connectCell(clone, other, !this.isSource);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tedge = clone;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tedge = this.connect(edge, terminal, this.isSource, clone, me);\n\t\t\t\t\t}\n\t\t\t\t\tfinally\n\t\t\t\t\t{\n\t\t\t\t\t\tmodel.endUpdate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this.graph.isAllowDanglingEdges())\n\t\t\t\t{\n\t\t\t\t\tvar pt = this.abspoints[(this.isSource) ? 0 : this.abspoints.length - 1];\n\t\t\t\t\tpt.x = this.roundLength(pt.x / this.graph.view.scale - this.graph.view.translate.x);\n\t\t\t\t\tpt.y = this.roundLength(pt.y / this.graph.view.scale - this.graph.view.translate.y);\n\n\t\t\t\t\tvar pstate = this.graph.getView().getState(\n\t\t\t\t\t\t\tthis.graph.getModel().getParent(edge));\n\t\t\t\t\t\t\t\n\t\t\t\t\tif (pstate != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tpt.x -= pstate.origin.x;\n\t\t\t\t\t\tpt.y -= pstate.origin.y;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tpt.x -= this.graph.panDx / this.graph.view.scale;\n\t\t\t\t\tpt.y -= this.graph.panDy / this.graph.view.scale;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t// Destroys and recreates this handler\n\t\t\t\t\tedge = this.changeTerminalPoint(edge, pt, this.isSource, clone);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.active)\n\t\t\t{\n\t\t\t\tedge = this.changePoints(edge, this.points, clone);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.graph.getView().invalidate(this.state.cell);\n\t\t\t\tthis.graph.getView().validate(this.state.cell);\t\t\t\t\t\t\n\t\t\t}\n\t\t}\n\t\telse if (this.graph.isToggleEvent(me.getEvent()))\n\t\t{\n\t\t\tthis.graph.selectCellForEvent(this.state.cell, me.getEvent());\n\t\t}\n\n\t\t// Resets the preview color the state of the handler if this\n\t\t// handler has not been recreated\n\t\tif (this.marker != null)\n\t\t{\n\t\t\tthis.reset();\n\n\t\t\t// Updates the selection if the edge has been cloned\n\t\t\tif (edge != this.state.cell)\n\t\t\t{\n\t\t\t\tthis.graph.setSelectionCell(edge);\n\t\t\t}\n\t\t}\n\n\t\tme.consume();\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets the state of this handler.\n */\nmxEdgeHandler.prototype.reset = function()\n{\n\tif (this.active)\n\t{\n\t\tthis.refresh();\n\t}\n\t\n\tthis.error = null;\n\tthis.index = null;\n\tthis.label = null;\n\tthis.points = null;\n\tthis.snapPoint = null;\n\tthis.isLabel = false;\n\tthis.isSource = false;\n\tthis.isTarget = false;\n\tthis.active = false;\n\t\n\tif (this.livePreview && this.sizers != null)\n\t{\n\t\tfor (var i = 0; i < this.sizers.length; i++)\n\t\t{\n\t\t\tif (this.sizers[i] != null)\n\t\t\t{\n\t\t\t\tthis.sizers[i].node.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.marker != null)\n\t{\n\t\tthis.marker.reset();\n\t}\n\t\n\tif (this.constraintHandler != null)\n\t{\n\t\tthis.constraintHandler.reset();\n\t}\n\t\n\tif (this.customHandles != null)\n\t{\n\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t{\n\t\t\tthis.customHandles[i].reset();\n\t\t}\n\t}\n\n\tthis.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR);\n\tthis.removeHint();\n\tthis.redraw();\n};\n\n/**\n * Function: setPreviewColor\n * \n * Sets the color of the preview to the given value.\n */\nmxEdgeHandler.prototype.setPreviewColor = function(color)\n{\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.stroke = color;\n\t}\n};\n\n\n/**\n * Function: convertPoint\n * \n * Converts the given point in-place from screen to unscaled, untranslated\n * graph coordinates and applies the grid. Returns the given, modified\n * point instance.\n * \n * Parameters:\n * \n * point - <mxPoint> to be converted.\n * gridEnabled - Boolean that specifies if the grid should be applied.\n */\nmxEdgeHandler.prototype.convertPoint = function(point, gridEnabled)\n{\n\tvar scale = this.graph.getView().getScale();\n\tvar tr = this.graph.getView().getTranslate();\n\t\t\n\tif (gridEnabled)\n\t{\n\t\tpoint.x = this.graph.snap(point.x);\n\t\tpoint.y = this.graph.snap(point.y);\n\t}\n\t\n\tpoint.x = Math.round(point.x / scale - tr.x);\n\tpoint.y = Math.round(point.y / scale - tr.y);\n\n\tvar pstate = this.graph.getView().getState(\n\t\tthis.graph.getModel().getParent(this.state.cell));\n\n\tif (pstate != null)\n\t{\n\t\tpoint.x -= pstate.origin.x;\n\t\tpoint.y -= pstate.origin.y;\n\t}\n\n\treturn point;\n};\n\n/**\n * Function: moveLabel\n * \n * Changes the coordinates for the label of the given edge.\n * \n * Parameters:\n * \n * edge - <mxCell> that represents the edge.\n * x - Integer that specifies the x-coordinate of the new location.\n * y - Integer that specifies the y-coordinate of the new location.\n */\nmxEdgeHandler.prototype.moveLabel = function(edgeState, x, y)\n{\n\tvar model = this.graph.getModel();\n\tvar geometry = model.getGeometry(edgeState.cell);\n\t\n\tif (geometry != null)\n\t{\n\t\tvar scale = this.graph.getView().scale;\n\t\tgeometry = geometry.clone();\n\t\t\n\t\tif (geometry.relative)\n\t\t{\n\t\t\t// Resets the relative location stored inside the geometry\n\t\t\tvar pt = this.graph.getView().getRelativePoint(edgeState, x, y);\n\t\t\tgeometry.x = Math.round(pt.x * 10000) / 10000;\n\t\t\tgeometry.y = Math.round(pt.y);\n\t\t\t\n\t\t\t// Resets the offset inside the geometry to find the offset\n\t\t\t// from the resulting point\n\t\t\tgeometry.offset = new mxPoint(0, 0);\n\t\t\tvar pt = this.graph.view.getPoint(edgeState, geometry);\n\t\t\tgeometry.offset = new mxPoint(Math.round((x - pt.x) / scale), Math.round((y - pt.y) / scale));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar points = edgeState.absolutePoints;\n\t\t\tvar p0 = points[0];\n\t\t\tvar pe = points[points.length - 1];\n\t\t\t\n\t\t\tif (p0 != null && pe != null)\n\t\t\t{\n\t\t\t\tvar cx = p0.x + (pe.x - p0.x) / 2;\n\t\t\t\tvar cy = p0.y + (pe.y - p0.y) / 2;\n\t\t\t\t\n\t\t\t\tgeometry.offset = new mxPoint(Math.round((x - cx) / scale), Math.round((y - cy) / scale));\n\t\t\t\tgeometry.x = 0;\n\t\t\t\tgeometry.y = 0;\n\t\t\t}\n\t\t}\n\n\t\tmodel.setGeometry(edgeState.cell, geometry);\n\t}\n};\n\n/**\n * Function: connect\n * \n * Changes the terminal or terminal point of the given edge in the graph\n * model.\n * \n * Parameters:\n * \n * edge - <mxCell> that represents the edge to be reconnected.\n * terminal - <mxCell> that represents the new terminal.\n * isSource - Boolean indicating if the new terminal is the source or\n * target terminal.\n * isClone - Boolean indicating if the new connection should be a clone of\n * the old edge.\n * me - <mxMouseEvent> that contains the mouse up event.\n */\nmxEdgeHandler.prototype.connect = function(edge, terminal, isSource, isClone, me)\n{\n\tvar model = this.graph.getModel();\n\tvar parent = model.getParent(edge);\n\t\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tvar constraint = this.constraintHandler.currentConstraint;\n\t\t\n\t\tif (constraint == null)\n\t\t{\n\t\t\tconstraint = new mxConnectionConstraint();\n\t\t}\n\n\t\tthis.graph.connectCell(edge, terminal, isSource, constraint);\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n\t\n\treturn edge;\n};\n\n/**\n * Function: changeTerminalPoint\n * \n * Changes the terminal point of the given edge.\n */\nmxEdgeHandler.prototype.changeTerminalPoint = function(edge, point, isSource, clone)\n{\n\tvar model = this.graph.getModel();\n\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tif (clone)\n\t\t{\n\t\t\tvar parent = model.getParent(edge);\n\t\t\tvar terminal = model.getTerminal(edge, !isSource);\n\t\t\tedge = this.graph.cloneCell(edge);\n\t\t\tmodel.add(parent, edge, model.getChildCount(parent));\n\t\t\tmodel.setTerminal(edge, terminal, !isSource);\n\t\t}\n\n\t\tvar geo = model.getGeometry(edge);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tgeo = geo.clone();\n\t\t\tgeo.setTerminalPoint(point, isSource);\n\t\t\tmodel.setGeometry(edge, geo);\n\t\t\tthis.graph.connectCell(edge, null, isSource, new mxConnectionConstraint());\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n\t\n\treturn edge;\n};\n\n/**\n * Function: changePoints\n * \n * Changes the control points of the given edge in the graph model.\n */\nmxEdgeHandler.prototype.changePoints = function(edge, points, clone)\n{\n\tvar model = this.graph.getModel();\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tif (clone)\n\t\t{\n\t\t\tvar parent = model.getParent(edge);\n\t\t\tvar source = model.getTerminal(edge, true);\n\t\t\tvar target = model.getTerminal(edge, false);\n\t\t\tedge = this.graph.cloneCell(edge);\n\t\t\tmodel.add(parent, edge, model.getChildCount(parent));\n\t\t\tmodel.setTerminal(edge, source, true);\n\t\t\tmodel.setTerminal(edge, target, false);\n\t\t}\n\t\t\n\t\tvar geo = model.getGeometry(edge);\n\t\t\n\t\tif (geo != null)\n\t\t{\n\t\t\tgeo = geo.clone();\n\t\t\tgeo.points = points;\n\t\t\t\n\t\t\tmodel.setGeometry(edge, geo);\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n\t\n\treturn edge;\n};\n\n/**\n * Function: addPoint\n * \n * Adds a control point for the given state and event.\n */\nmxEdgeHandler.prototype.addPoint = function(state, evt)\n{\n\tvar pt = mxUtils.convertPoint(this.graph.container, mxEvent.getClientX(evt),\n\t\t\tmxEvent.getClientY(evt));\n\tvar gridEnabled = this.graph.isGridEnabledEvent(evt);\n\tthis.convertPoint(pt, gridEnabled);\n\tthis.addPointAt(state, pt.x, pt.y);\n\tmxEvent.consume(evt);\n};\n\n/**\n * Function: addPointAt\n * \n * Adds a control point at the given point.\n */\nmxEdgeHandler.prototype.addPointAt = function(state, x, y)\n{\n\tvar geo = this.graph.getCellGeometry(state.cell);\n\tvar pt = new mxPoint(x, y);\n\t\n\tif (geo != null)\n\t{\n\t\tgeo = geo.clone();\n\t\tvar t = this.graph.view.translate;\n\t\tvar s = this.graph.view.scale;\n\t\tvar offset = new mxPoint(t.x * s, t.y * s);\n\t\t\n\t\tvar parent = this.graph.model.getParent(this.state.cell);\n\t\t\n\t\tif (this.graph.model.isVertex(parent))\n\t\t{\n\t\t\tvar pState = this.graph.view.getState(parent);\n\t\t\toffset = new mxPoint(pState.x, pState.y);\n\t\t}\n\t\t\n\t\tvar index = mxUtils.findNearestSegment(state, pt.x * s + offset.x, pt.y * s + offset.y);\n\n\t\tif (geo.points == null)\n\t\t{\n\t\t\tgeo.points = [pt];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgeo.points.splice(index, 0, pt);\n\t\t}\n\t\t\n\t\tthis.graph.getModel().setGeometry(state.cell, geo);\n\t\tthis.refresh();\t\n\t\tthis.redraw();\n\t}\n};\n\n/**\n * Function: removePoint\n * \n * Removes the control point at the given index from the given state.\n */\nmxEdgeHandler.prototype.removePoint = function(state, index)\n{\n\tif (index > 0 && index < this.abspoints.length - 1)\n\t{\n\t\tvar geo = this.graph.getCellGeometry(this.state.cell);\n\t\t\n\t\tif (geo != null && geo.points != null)\n\t\t{\n\t\t\tgeo = geo.clone();\n\t\t\tgeo.points.splice(index - 1, 1);\n\t\t\tthis.graph.getModel().setGeometry(state.cell, geo);\n\t\t\tthis.refresh();\n\t\t\tthis.redraw();\n\t\t}\n\t}\n};\n\n/**\n * Function: getHandleFillColor\n * \n * Returns the fillcolor for the handle at the given index.\n */\nmxEdgeHandler.prototype.getHandleFillColor = function(index)\n{\n\tvar isSource = index == 0;\n\tvar cell = this.state.cell;\n\tvar terminal = this.graph.getModel().getTerminal(cell, isSource);\n\tvar color = mxConstants.HANDLE_FILLCOLOR;\n\t\n\tif ((terminal != null && !this.graph.isCellDisconnectable(cell, terminal, isSource)) ||\n\t\t(terminal == null && !this.graph.isTerminalPointMovable(cell, isSource)))\n\t{\n\t\tcolor = mxConstants.LOCKED_HANDLE_FILLCOLOR;\n\t}\n\telse if (terminal != null && this.graph.isCellDisconnectable(cell, terminal, isSource))\n\t{\n\t\tcolor = mxConstants.CONNECT_HANDLE_FILLCOLOR;\n\t}\n\t\n\treturn color;\n};\n\n/**\n * Function: redraw\n * \n * Redraws the preview, and the bends- and label control points.\n */\nmxEdgeHandler.prototype.redraw = function(ignoreHandles)\n{\n\tif (this.state != null)\n\t{\n\t\tthis.abspoints = this.state.absolutePoints.slice();\n\t\tvar g = this.graph.getModel().getGeometry(this.state.cell);\n\t\t\n\t\tif (g != null)\n\t\t{\n\t\t\tvar pts = g.points;\n\t\t\n\t\t\tif (this.bends != null && this.bends.length > 0)\n\t\t\t{\n\t\t\t\tif (pts != null)\n\t\t\t\t{\n\t\t\t\t\tif (this.points == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.points = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfor (var i = 1; i < this.bends.length - 1; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.bends[i] != null && this.abspoints[i] != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.points[i - 1] = pts[i - 1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.drawPreview();\n\t\t\n\t\tif (!ignoreHandles)\n\t\t{\n\t\t\tthis.redrawHandles();\n\t\t}\n\t}\n};\n\n/**\n * Function: redrawHandles\n * \n * Redraws the handles.\n */\nmxEdgeHandler.prototype.redrawHandles = function()\n{\n\tvar cell = this.state.cell;\n\n\t// Updates the handle for the label position\n\tvar b = this.labelShape.bounds;\n\tthis.label = new mxPoint(this.state.absoluteOffset.x, this.state.absoluteOffset.y);\n\tthis.labelShape.bounds = new mxRectangle(Math.round(this.label.x - b.width / 2),\n\t\tMath.round(this.label.y - b.height / 2), b.width, b.height);\n\n\t// Shows or hides the label handle depending on the label\n\tvar lab = this.graph.getLabel(cell);\n\tthis.labelShape.visible = (lab != null && lab.length > 0 && this.graph.isLabelMovable(cell));\n\t\n\tif (this.bends != null && this.bends.length > 0)\n\t{\n\t\tvar n = this.abspoints.length - 1;\n\t\t\n\t\tvar p0 = this.abspoints[0];\n\t\tvar x0 = p0.x;\n\t\tvar y0 = p0.y;\n\t\t\n\t\tb = this.bends[0].bounds;\n\t\tthis.bends[0].bounds = new mxRectangle(Math.floor(x0 - b.width / 2),\n\t\t\t\tMath.floor(y0 - b.height / 2), b.width, b.height);\n\t\tthis.bends[0].fill = this.getHandleFillColor(0);\n\t\tthis.bends[0].redraw();\n\t\t\n\t\tif (this.manageLabelHandle)\n\t\t{\n\t\t\tthis.checkLabelHandle(this.bends[0].bounds);\n\t\t}\n\t\t\t\t\n\t\tvar pe = this.abspoints[n];\n\t\tvar xn = pe.x;\n\t\tvar yn = pe.y;\n\t\t\n\t\tvar bn = this.bends.length - 1;\n\t\tb = this.bends[bn].bounds;\n\t\tthis.bends[bn].bounds = new mxRectangle(Math.floor(xn - b.width / 2),\n\t\t\t\tMath.floor(yn - b.height / 2), b.width, b.height);\n\t\tthis.bends[bn].fill = this.getHandleFillColor(bn);\n\t\tthis.bends[bn].redraw();\n\t\t\t\t\n\t\tif (this.manageLabelHandle)\n\t\t{\n\t\t\tthis.checkLabelHandle(this.bends[bn].bounds);\n\t\t}\n\t\t\n\t\tthis.redrawInnerBends(p0, pe);\n\t}\n\n\tif (this.abspoints != null && this.virtualBends != null && this.virtualBends.length > 0)\n\t{\n\t\tvar last = this.abspoints[0];\n\t\t\n\t\tfor (var i = 0; i < this.virtualBends.length; i++)\n\t\t{\n\t\t\tif (this.virtualBends[i] != null && this.abspoints[i + 1] != null)\n\t\t\t{\n\t\t\t\tvar pt = this.abspoints[i + 1];\n\t\t\t\tvar b = this.virtualBends[i];\n\t\t\t\tvar x = last.x + (pt.x - last.x) / 2;\n\t\t\t\tvar y = last.y + (pt.y - last.y) / 2;\n\t\t\t\tb.bounds = new mxRectangle(Math.floor(x - b.bounds.width / 2),\n\t\t\t\t\t\tMath.floor(y - b.bounds.height / 2), b.bounds.width, b.bounds.height);\n\t\t\t\tb.redraw();\n\t\t\t\tmxUtils.setOpacity(b.node, this.virtualBendOpacity);\n\t\t\t\tlast = pt;\n\t\t\t\t\n\t\t\t\tif (this.manageLabelHandle)\n\t\t\t\t{\n\t\t\t\t\tthis.checkLabelHandle(b.bounds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif (this.labelShape != null)\n\t{\n\t\tthis.labelShape.redraw();\n\t}\n\t\n\tif (this.customHandles != null)\n\t{\n\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t{\n\t\t\tvar temp = this.customHandles[i].shape.node.style.display;\n\t\t\tthis.customHandles[i].redraw();\n\t\t\tthis.customHandles[i].shape.node.style.display = temp;\n\n\t\t\t// Hides custom handles during text editing\n\t\t\tthis.customHandles[i].shape.node.style.visibility =\n\t\t\t\t(this.isCustomHandleVisible(this.customHandles[i])) ?\n\t\t\t\t'' : 'hidden';\n\t\t}\n\t}\n};\n\n/**\n * Function: isCustomHandleVisible\n * \n * Returns true if the given custom handle is visible.\n */\nmxEdgeHandler.prototype.isCustomHandleVisible = function(handle)\n{\n\treturn !this.graph.isEditing() && this.state.view.graph.getSelectionCount() == 1;\n};\n\n/**\n * Function: hideHandles\n * \n * Shortcut to <hideSizers>.\n */\nmxEdgeHandler.prototype.setHandlesVisible = function(visible)\n{\n\tif (this.bends != null)\n\t{\n\t\tfor (var i = 0; i < this.bends.length; i++)\n\t\t{\n\t\t\tthis.bends[i].node.style.display = (visible) ? '' : 'none';\n\t\t}\n\t}\n\t\n\tif (this.virtualBends != null)\n\t{\n\t\tfor (var i = 0; i < this.virtualBends.length; i++)\n\t\t{\n\t\t\tthis.virtualBends[i].node.style.display = (visible) ? '' : 'none';\n\t\t}\n\t}\n\n\tif (this.labelShape != null)\n\t{\n\t\tthis.labelShape.node.style.display = (visible) ? '' : 'none';\n\t}\n\t\n\tif (this.customHandles != null)\n\t{\n\t\tfor (var i = 0; i < this.customHandles.length; i++)\n\t\t{\n\t\t\tthis.customHandles[i].setVisible(visible);\n\t\t}\n\t}\n};\n\n/**\n * Function: redrawInnerBends\n * \n * Updates and redraws the inner bends.\n * \n * Parameters:\n * \n * p0 - <mxPoint> that represents the location of the first point.\n * pe - <mxPoint> that represents the location of the last point.\n */\nmxEdgeHandler.prototype.redrawInnerBends = function(p0, pe)\n{\n\tfor (var i = 1; i < this.bends.length - 1; i++)\n\t{\n\t\tif (this.bends[i] != null)\n\t\t{\n\t\t\tif (this.abspoints[i] != null)\n\t\t\t{\n\t\t\t\tvar x = this.abspoints[i].x;\n\t\t\t\tvar y = this.abspoints[i].y;\n\t\t\t\t\n\t\t\t\tvar b = this.bends[i].bounds;\n\t\t\t\tthis.bends[i].node.style.visibility = 'visible';\n\t\t\t\tthis.bends[i].bounds = new mxRectangle(Math.round(x - b.width / 2),\n\t\t\t\t\t\tMath.round(y - b.height / 2), b.width, b.height);\n\t\t\t\t\n\t\t\t\tif (this.manageLabelHandle)\n\t\t\t\t{\n\t\t\t\t\tthis.checkLabelHandle(this.bends[i].bounds);\n\t\t\t\t}\n\t\t\t\telse if (this.handleImage == null && this.labelShape.visible && mxUtils.intersects(this.bends[i].bounds, this.labelShape.bounds))\n\t\t\t\t{\n\t\t\t\t\tw = mxConstants.HANDLE_SIZE + 3;\n\t\t\t\t\th = mxConstants.HANDLE_SIZE + 3;\n\t\t\t\t\tthis.bends[i].bounds = new mxRectangle(Math.round(x - w / 2), Math.round(y - h / 2), w, h);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.bends[i].redraw();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.bends[i].destroy();\n\t\t\t\tthis.bends[i] = null;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: checkLabelHandle\n * \n * Checks if the label handle intersects the given bounds and moves it if it\n * intersects.\n */\nmxEdgeHandler.prototype.checkLabelHandle = function(b)\n{\n\tif (this.labelShape != null)\n\t{\n\t\tvar b2 = this.labelShape.bounds;\n\t\t\n\t\tif (mxUtils.intersects(b, b2))\n\t\t{\n\t\t\tif (b.getCenterY() < b2.getCenterY())\n\t\t\t{\n\t\t\t\tb2.y = b.y + b.height;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tb2.y = b.y - b2.height;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: drawPreview\n * \n * Redraws the preview.\n */\nmxEdgeHandler.prototype.drawPreview = function()\n{\n\ttry\n\t{\n\t\tif (this.isLabel)\n\t\t{\n\t\t\tvar b = this.labelShape.bounds;\n\t\t\tvar bounds = new mxRectangle(Math.round(this.label.x - b.width / 2),\n\t\t\t\tMath.round(this.label.y - b.height / 2), b.width, b.height);\n\t\t\t\n\t\t\tif (!this.labelShape.bounds.equals(bounds))\n\t\t\t{\n\t\t\t\tthis.labelShape.bounds = bounds;\n\t\t\t\tthis.labelShape.redraw();\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.shape != null && !mxUtils.equalPoints(this.shape.points, this.abspoints))\n\t\t{\n\t\t\tthis.shape.apply(this.state);\n\t\t\tthis.shape.points = this.abspoints.slice();\n\t\t\tthis.shape.scale = this.state.view.scale;\n\t\t\tthis.shape.isDashed = this.isSelectionDashed();\n\t\t\tthis.shape.stroke = this.getSelectionColor();\n\t\t\tthis.shape.strokewidth = this.getSelectionStrokeWidth() / this.shape.scale / this.shape.scale;\n\t\t\tthis.shape.isShadow = false;\n\t\t\tthis.shape.redraw();\n\t\t}\n\t\t\n\t\tthis.updateParentHighlight();\n\t}\n\tcatch (e)\n\t{\n\t\t// ignore\n\t}\n};\n\n/**\n * Function: refresh\n * \n * Refreshes the bends of this handler.\n */\nmxEdgeHandler.prototype.refresh = function()\n{\n\tif (this.state != null)\n\t{\n\t\tthis.abspoints = this.getSelectionPoints(this.state);\n\t\tthis.points = [];\n\t\n\t\tif (this.bends != null)\n\t\t{\n\t\t\tthis.destroyBends(this.bends);\n\t\t\tthis.bends = this.createBends();\n\t\t}\n\t\t\n\t\tif (this.virtualBends != null)\n\t\t{\n\t\t\tthis.destroyBends(this.virtualBends);\n\t\t\tthis.virtualBends = this.createVirtualBends();\n\t\t}\n\t\t\n\t\tif (this.customHandles != null)\n\t\t{\n\t\t\tthis.destroyBends(this.customHandles);\n\t\t\tthis.customHandles = this.createCustomHandles();\n\t\t}\n\t\t\n\t\t// Puts label node on top of bends\n\t\tif (this.labelShape != null && this.labelShape.node != null && this.labelShape.node.parentNode != null)\n\t\t{\n\t\t\tthis.labelShape.node.parentNode.appendChild(this.labelShape.node);\n\t\t}\n\t}\n};\n\n/**\n * Function: isDestroyed\n * \n * Returns true if <destroy> was called.\n */\nmxEdgeHandler.prototype.isDestroyed = function()\n{\n\treturn this.shape == null;\n};\n\n/**\n * Function: destroyBends\n * \n * Destroys all elements in <bends>.\n */\nmxEdgeHandler.prototype.destroyBends = function(bends)\n{\n\tif (bends != null)\n\t{\n\t\tfor (var i = 0; i < bends.length; i++)\n\t\t{\n\t\t\tif (bends[i] != null)\n\t\t\t{\n\t\t\t\tbends[i].destroy();\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes. This does\n * normally not need to be called as handlers are destroyed automatically\n * when the corresponding cell is deselected.\n */\nmxEdgeHandler.prototype.destroy = function()\n{\n\tif (this.escapeHandler != null)\n\t{\n\t\tthis.state.view.graph.removeListener(this.escapeHandler);\n\t\tthis.escapeHandler = null;\n\t}\n\t\n\tif (this.marker != null)\n\t{\n\t\tthis.marker.destroy();\n\t\tthis.marker = null;\n\t}\n\t\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.destroy();\n\t\tthis.shape = null;\n\t}\n\t\n\tif (this.parentHighlight != null)\n\t{\n\t\tvar parent = this.graph.model.getParent(this.state.cell);\n\t\tvar pstate = this.graph.view.getState(parent);\n\n\t\tif (pstate != null && pstate.parentHighlight == this.parentHighlight)\n\t\t{\n\t\t\tpstate.parentHighlight = null;\n\t\t}\n\t\t\n\t\tthis.parentHighlight.destroy();\n\t\tthis.parentHighlight = null;\n\t}\n\t\n\tif (this.labelShape != null)\n\t{\n\t\tthis.labelShape.destroy();\n\t\tthis.labelShape = null;\n\t}\n\n\tif (this.constraintHandler != null)\n\t{\n\t\tthis.constraintHandler.destroy();\n\t\tthis.constraintHandler = null;\n\t}\n\t\n\tthis.destroyBends(this.virtualBends);\n\tthis.virtualBends = null;\n\t\n\tthis.destroyBends(this.customHandles);\n\tthis.customHandles = null;\n\n\tthis.destroyBends(this.bends);\n\tthis.bends = null;\n\t\n\tthis.removeHint();\n};\n\n__mxOutput.mxEdgeHandler = typeof mxEdgeHandler !== 'undefined' ? mxEdgeHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxElbowEdgeHandler\n *\n * Graph event handler that reconnects edges and modifies control points and\n * the edge label location. Uses <mxTerminalMarker> for finding and\n * highlighting new source and target vertices. This handler is automatically\n * created in <mxGraph.createHandler>. It extends <mxEdgeHandler>.\n * \n * Constructor: mxEdgeHandler\n *\n * Constructs an edge handler for the specified <mxCellState>.\n * \n * Parameters:\n * \n * state - <mxCellState> of the cell to be modified.\n */\nfunction mxElbowEdgeHandler(state)\n{\n\tmxEdgeHandler.call(this, state);\n};\n\n/**\n * Extends mxEdgeHandler.\n */\nmxUtils.extend(mxElbowEdgeHandler, mxEdgeHandler);\n\n/**\n * Specifies if a double click on the middle handle should call\n * <mxGraph.flipEdge>. Default is true.\n */\nmxElbowEdgeHandler.prototype.flipEnabled = true;\n\n/**\n * Variable: doubleClickOrientationResource\n * \n * Specifies the resource key for the tooltip to be displayed on the single\n * control point for routed edges. If the resource for this key does not\n * exist then the value is used as the error message. Default is\n * 'doubleClickOrientation'.\n */\nmxElbowEdgeHandler.prototype.doubleClickOrientationResource =\n\t(mxClient.language != 'none') ? 'doubleClickOrientation' : '';\n\n/**\n * Function: createBends\n * \n * Overrides <mxEdgeHandler.createBends> to create custom bends.\n */\n mxElbowEdgeHandler.prototype.createBends = function()\n {\n\tvar bends = [];\n\t\n\t// Source\n\tvar bend = this.createHandleShape(0);\n\tthis.initBend(bend);\n\tbend.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE);\n\tbends.push(bend);\n\n\t// Virtual\n\tbends.push(this.createVirtualBend(mxUtils.bind(this, function(evt)\n\t{\n\t\tif (!mxEvent.isConsumed(evt) && this.flipEnabled)\n\t\t{\n\t\t\tthis.graph.flipEdge(this.state.cell, evt);\n\t\t\tmxEvent.consume(evt);\n\t\t}\n\t})));\n\t\n\tthis.points.push(new mxPoint(0,0));\n\n\t// Target\n\tbend = this.createHandleShape(2);\n\tthis.initBend(bend);\n\tbend.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE);\n\tbends.push(bend);\n\t\n\treturn bends;\n };\n\n/**\n * Function: createVirtualBend\n * \n * Creates a virtual bend that supports double clicking and calls\n * <mxGraph.flipEdge>.\n */\nmxElbowEdgeHandler.prototype.createVirtualBend = function(dblClickHandler)\n{\n\tvar bend = this.createHandleShape();\n\tthis.initBend(bend, dblClickHandler);\n\n\tbend.setCursor(this.getCursorForBend());\n\n\tif (!this.graph.isCellBendable(this.state.cell))\n\t{\n\t\tbend.node.style.display = 'none';\n\t}\n\n\treturn bend;\n};\n\n/**\n * Function: getCursorForBend\n * \n * Returns the cursor to be used for the bend.\n */\nmxElbowEdgeHandler.prototype.getCursorForBend = function()\n{\n\treturn (this.state.style[mxConstants.STYLE_EDGE] == mxEdgeStyle.TopToBottom ||\n\t\tthis.state.style[mxConstants.STYLE_EDGE] == mxConstants.EDGESTYLE_TOPTOBOTTOM ||\n\t\t((this.state.style[mxConstants.STYLE_EDGE] == mxEdgeStyle.ElbowConnector ||\n\t\tthis.state.style[mxConstants.STYLE_EDGE] == mxConstants.EDGESTYLE_ELBOW)&&\n\t\tthis.state.style[mxConstants.STYLE_ELBOW] == mxConstants.ELBOW_VERTICAL)) ? \n\t\t'row-resize' : 'col-resize';\n};\n\n/**\n * Function: getTooltipForNode\n * \n * Returns the tooltip for the given node.\n */\nmxElbowEdgeHandler.prototype.getTooltipForNode = function(node)\n{\n\tvar tip = null;\n\t\n\tif (this.bends != null && this.bends[1] != null && (node == this.bends[1].node ||\n\t\tnode.parentNode == this.bends[1].node))\n\t{\n\t\ttip = this.doubleClickOrientationResource;\n\t\ttip = mxResources.get(tip) || tip; // translate\n\t}\n\n\treturn tip;\n};\n\n/**\n * Function: convertPoint\n * \n * Converts the given point in-place from screen to unscaled, untranslated\n * graph coordinates and applies the grid.\n * \n * Parameters:\n * \n * point - <mxPoint> to be converted.\n * gridEnabled - Boolean that specifies if the grid should be applied.\n */\nmxElbowEdgeHandler.prototype.convertPoint = function(point, gridEnabled)\n{\n\tvar scale = this.graph.getView().getScale();\n\tvar tr = this.graph.getView().getTranslate();\n\tvar origin = this.state.origin;\n\t\n\tif (gridEnabled)\n\t{\n\t\tpoint.x = this.graph.snap(point.x);\n\t\tpoint.y = this.graph.snap(point.y);\n\t}\n\t\n\tpoint.x = Math.round(point.x / scale - tr.x - origin.x);\n\tpoint.y = Math.round(point.y / scale - tr.y - origin.y);\n\t\n\treturn point;\n};\n\n/**\n * Function: redrawInnerBends\n * \n * Updates and redraws the inner bends.\n * \n * Parameters:\n * \n * p0 - <mxPoint> that represents the location of the first point.\n * pe - <mxPoint> that represents the location of the last point.\n */\nmxElbowEdgeHandler.prototype.redrawInnerBends = function(p0, pe)\n{\n\tvar g = this.graph.getModel().getGeometry(this.state.cell);\n\tvar pts = this.state.absolutePoints;\n\tvar pt = null;\n\n\t// Keeps the virtual bend on the edge shape\n\tif (pts.length > 1)\n\t{\n\t\tp0 = pts[1];\n\t\tpe = pts[pts.length - 2];\n\t}\n\telse if (g.points != null && g.points.length > 0)\n\t{\n\t\tpt = pts[0];\n\t}\n\t\n\tif (pt == null)\n\t{\n\t\tpt = new mxPoint(p0.x + (pe.x - p0.x) / 2, p0.y + (pe.y - p0.y) / 2);\n\t}\n\telse\n\t{\n\t\tpt = new mxPoint(this.graph.getView().scale * (pt.x + this.graph.getView().translate.x + this.state.origin.x),\n\t\t\t\tthis.graph.getView().scale * (pt.y + this.graph.getView().translate.y + this.state.origin.y));\n\t}\n\n\t// Makes handle slightly bigger if the yellow  label handle\n\t// exists and intersects this green handle\n\tvar b = this.bends[1].bounds;\n\tvar w = b.width;\n\tvar h = b.height;\n\tvar bounds = new mxRectangle(Math.round(pt.x - w / 2), Math.round(pt.y - h / 2), w, h);\n\n\tif (this.manageLabelHandle)\n\t{\n\t\tthis.checkLabelHandle(bounds);\n\t}\n\telse if (this.handleImage == null && this.labelShape.visible && mxUtils.intersects(bounds, this.labelShape.bounds))\n\t{\n\t\tw = mxConstants.HANDLE_SIZE + 3;\n\t\th = mxConstants.HANDLE_SIZE + 3;\n\t\tbounds = new mxRectangle(Math.floor(pt.x - w / 2), Math.floor(pt.y - h / 2), w, h);\n\t}\n\n\tthis.bends[1].bounds = bounds;\n\tthis.bends[1].redraw();\n\t\n\tif (this.manageLabelHandle)\n\t{\n\t\tthis.checkLabelHandle(this.bends[1].bounds);\n\t}\n};\n\n__mxOutput.mxElbowEdgeHandler = typeof mxElbowEdgeHandler !== 'undefined' ? mxElbowEdgeHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nfunction mxEdgeSegmentHandler(state)\n{\n\tmxEdgeHandler.call(this, state);\n};\n\n/**\n * Extends mxEdgeHandler.\n */\nmxUtils.extend(mxEdgeSegmentHandler, mxElbowEdgeHandler);\n\n/**\n * Function: getCurrentPoints\n * \n * Returns the current absolute points.\n */\nmxEdgeSegmentHandler.prototype.getCurrentPoints = function()\n{\n\tvar pts = this.state.absolutePoints;\n\t\n\tif (pts != null)\n\t{\n\t\t// Special case for straight edges where we add a virtual middle handle for moving the edge\n\t\tvar tol = Math.max(1, this.graph.view.scale);\n\t\t\n\t\tif (pts.length == 2 || (pts.length == 3 &&\n\t\t\t(Math.abs(pts[0].x - pts[1].x) < tol && Math.abs(pts[1].x - pts[2].x) < tol ||\n\t\t\tMath.abs(pts[0].y - pts[1].y) < tol && Math.abs(pts[1].y - pts[2].y) < tol)))\n\t\t{\n\t\t\tvar cx = pts[0].x + (pts[pts.length - 1].x - pts[0].x) / 2;\n\t\t\tvar cy = pts[0].y + (pts[pts.length - 1].y - pts[0].y) / 2;\n\t\t\t\n\t\t\tpts = [pts[0], new mxPoint(cx, cy), new mxPoint(cx, cy), pts[pts.length - 1]];\t\n\t\t}\n\t}\n\n\treturn pts;\n};\n\n/**\n * Function: getPreviewPoints\n * \n * Updates the given preview state taking into account the state of the constraint handler.\n */\nmxEdgeSegmentHandler.prototype.getPreviewPoints = function(point)\n{\n\tif (this.isSource || this.isTarget)\n\t{\n\t\treturn mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this, arguments);\n\t}\n\telse\n\t{\n\t\tvar pts = this.getCurrentPoints();\n\t\tvar last = this.convertPoint(pts[0].clone(), false);\n\t\tpoint = this.convertPoint(point.clone(), false);\n\t\tvar result = [];\n\n\t\tfor (var i = 1; i < pts.length; i++)\n\t\t{\n\t\t\tvar pt = this.convertPoint(pts[i].clone(), false);\n\t\t\t\n\t\t\tif (i == this.index)\n\t\t\t{\n\t\t\t\tif (Math.round(last.x - pt.x) == 0)\n\t\t \t\t{\n\t\t\t\t\tlast.x = point.x;\n\t\t\t\t\tpt.x = point.x;\n\t\t \t\t}\n\t\t \t\t\n\t\t\t\tif (Math.round(last.y - pt.y) == 0)\n\t\t \t\t{\n\t\t \t\t\tlast.y = point.y;\n\t\t \t\t\tpt.y = point.y;\n\t\t \t\t}\n\t\t\t}\n\n\t\t\tif (i < pts.length - 1)\n\t\t\t{\n\t\t\t\tresult.push(pt);\n\t\t\t}\n\n\t\t\tlast = pt;\n\t\t}\n\t\t\n\t\t// Replaces single point that intersects with source or target\n\t\tif (result.length == 1)\n\t\t{\n\t\t\tvar source = this.state.getVisibleTerminalState(true);\n\t\t\tvar target = this.state.getVisibleTerminalState(false);\n\t\t\tvar scale = this.state.view.getScale();\n\t\t\tvar tr = this.state.view.getTranslate();\n\t\t\t\n\t\t\tvar x = result[0].x * scale + tr.x;\n\t\t\tvar y = result[0].y * scale + tr.y;\n\t\t\t\n\t\t\tif ((source != null && mxUtils.contains(source, x, y)) ||\n\t\t\t\t(target != null && mxUtils.contains(target, x, y)))\n\t\t\t{\n\t\t\t\tresult = [point, point];\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\n/**\n * Function: updatePreviewState\n * \n * Overridden to perform optimization of the edge style result.\n */\nmxEdgeSegmentHandler.prototype.updatePreviewState = function(edge, point, terminalState, me)\n{\n\tmxEdgeHandler.prototype.updatePreviewState.apply(this, arguments);\n\n\t// Checks and corrects preview by running edge style again\n\tif (!this.isSource && !this.isTarget)\n\t{\n\t\tpoint = this.convertPoint(point.clone(), false);\n\t\tvar pts = edge.absolutePoints;\n\t\tvar pt0 = pts[0];\n\t\tvar pt1 = pts[1];\n\n\t\tvar result = [];\n\t\t\n\t\tfor (var i = 2; i < pts.length; i++)\n\t\t{\n\t\t\tvar pt2 = pts[i];\n\t\t\n\t\t\t// Merges adjacent segments only if more than 2 to allow for straight edges\n\t\t\tif ((Math.round(pt0.x - pt1.x) != 0 || Math.round(pt1.x - pt2.x) != 0) &&\n\t\t\t\t(Math.round(pt0.y - pt1.y) != 0 || Math.round(pt1.y - pt2.y) != 0))\n\t\t\t{\n\t\t\t\tresult.push(this.convertPoint(pt1.clone(), false));\n\t\t\t}\n\n\t\t\tpt0 = pt1;\n\t\t\tpt1 = pt2;\n\t\t}\n\t\t\n\t\tvar source = this.state.getVisibleTerminalState(true);\n\t\tvar target = this.state.getVisibleTerminalState(false);\n\t\tvar rpts = this.state.absolutePoints;\n\t\t\n\t\t// A straight line is represented by 3 handles\n\t\tif (result.length == 0 && (Math.round(pts[0].x - pts[pts.length - 1].x) == 0 ||\n\t\t\tMath.round(pts[0].y - pts[pts.length - 1].y) == 0))\n\t\t{\n\t\t\tresult = [point, point];\n\t\t}\n\t\t// Handles special case of transitions from straight vertical to routed\n\t\telse if (pts.length == 5 && result.length == 2 && source != null && target != null &&\n\t\t\t\trpts != null && Math.round(rpts[0].x - rpts[rpts.length - 1].x) == 0)\n\t\t{\n\t\t\tvar view = this.graph.getView();\n\t\t\tvar scale = view.getScale();\n\t\t\tvar tr = view.getTranslate();\n\t\t\t\n\t\t\tvar y0 = view.getRoutingCenterY(source) / scale - tr.y;\n\t\t\t\n\t\t\t// Use fixed connection point y-coordinate if one exists\n\t\t\tvar sc = this.graph.getConnectionConstraint(edge, source, true);\n\t\t\t\n\t\t\tif (sc != null)\n\t\t\t{\n\t\t\t\tvar pt = this.graph.getConnectionPoint(source, sc);\n\t\t\t\t\n\t\t\t\tif (pt != null)\n\t\t\t\t{\n\t\t\t\t\tthis.convertPoint(pt, false);\n\t\t\t\t\ty0 = pt.y;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar ye = view.getRoutingCenterY(target) / scale - tr.y;\n\t\t\t\n\t\t\t// Use fixed connection point y-coordinate if one exists\n\t\t\tvar tc = this.graph.getConnectionConstraint(edge, target, false);\n\t\t\t\n\t\t\tif (tc)\n\t\t\t{\n\t\t\t\tvar pt = this.graph.getConnectionPoint(target, tc);\n\t\t\t\t\n\t\t\t\tif (pt != null)\n\t\t\t\t{\n\t\t\t\t\tthis.convertPoint(pt, false);\n\t\t\t\t\tye = pt.y;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tresult = [new mxPoint(point.x, y0), new mxPoint(point.x, ye)];\n\t\t}\n\n\t\tthis.points = result;\n\n\t\t// LATER: Check if points and result are different\n\t\tedge.view.updateFixedTerminalPoints(edge, source, target);\n\t\tedge.view.updatePoints(edge, this.points, source, target);\n\t\tedge.view.updateFloatingTerminalPoints(edge, source, target);\n\t}\n};\n\n/**\n * Overriden to merge edge segments.\n */\nmxEdgeSegmentHandler.prototype.connect = function(edge, terminal, isSource, isClone, me)\n{\n\tvar model = this.graph.getModel();\n\tvar geo = model.getGeometry(edge);\n\tvar result = null;\n\t\n\t// Merges adjacent edge segments\n\tif (geo != null && geo.points != null && geo.points.length > 0)\n\t{\n\t\tvar pts = this.abspoints;\n\t\tvar pt0 = pts[0];\n\t\tvar pt1 = pts[1];\n\t\tresult = [];\n\t\t\n\t\tfor (var i = 2; i < pts.length; i++)\n\t\t{\n\t\t\tvar pt2 = pts[i];\n\t\t\n\t\t\t// Merges adjacent segments only if more than 2 to allow for straight edges\n\t\t\tif ((Math.round(pt0.x - pt1.x) != 0 || Math.round(pt1.x - pt2.x) != 0) &&\n\t\t\t\t(Math.round(pt0.y - pt1.y) != 0 || Math.round(pt1.y - pt2.y) != 0))\n\t\t\t{\n\t\t\t\tresult.push(this.convertPoint(pt1.clone(), false));\n\t\t\t}\n\t\n\t\t\tpt0 = pt1;\n\t\t\tpt1 = pt2;\n\t\t}\n\t}\n\t\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tif (result != null)\n\t\t{\n\t\t\tvar geo = model.getGeometry(edge);\n\t\t\t\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tgeo = geo.clone();\n\t\t\t\tgeo.points = result;\n\t\t\t\t\n\t\t\t\tmodel.setGeometry(edge, geo);\n\t\t\t}\n\t\t}\n\t\t\n\t\tedge = mxEdgeHandler.prototype.connect.apply(this, arguments);\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n\t\n\treturn edge;\n};\n\n/**\n * Function: getTooltipForNode\n * \n * Returns no tooltips.\n */\nmxEdgeSegmentHandler.prototype.getTooltipForNode = function(node)\n{\n\treturn null;\n};\n\n/**\n * Function: start\n * \n * Starts the handling of the mouse gesture.\n */\nmxEdgeSegmentHandler.prototype.start = function(x, y, index)\n{\n\tmxEdgeHandler.prototype.start.apply(this, arguments);\n\t\n\tif (this.bends != null && this.bends[index] != null &&\n\t\t!this.isSource && !this.isTarget)\n\t{\n\t\tmxUtils.setOpacity(this.bends[index].node, 100);\n\t}\n};\n\n/**\n * Function: createBends\n * \n * Adds custom bends for the center of each segment.\n */\nmxEdgeSegmentHandler.prototype.createBends = function()\n{\n\tvar bends = [];\n\t\n\t// Source\n\tvar bend = this.createHandleShape(0);\n\tthis.initBend(bend);\n\tbend.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE);\n\tbends.push(bend);\n\n\tvar pts = this.getCurrentPoints();\n\n\t// Waypoints (segment handles)\n\tif (this.graph.isCellBendable(this.state.cell))\n\t{\n\t\tif (this.points == null)\n\t\t{\n\t\t\tthis.points = [];\n\t\t}\n\n\t\tfor (var i = 0; i < pts.length - 1; i++)\n\t\t{\n\t\t\tbend = this.createVirtualBend();\n\t\t\tbends.push(bend);\n\t\t\tvar horizontal = Math.round(pts[i].x - pts[i + 1].x) == 0;\n\t\t\t\n\t\t\t// Special case where dy is 0 as well\n\t\t\tif (Math.round(pts[i].y - pts[i + 1].y) == 0 && i < pts.length - 2)\n\t\t\t{\n\t\t\t\thorizontal = Math.round(pts[i].x - pts[i + 2].x) == 0;\n\t\t\t}\n\t\t\t\n\t\t\tbend.setCursor((horizontal) ? 'col-resize' : 'row-resize');\n\t\t\tthis.points.push(new mxPoint(0,0));\n\t\t}\n\t}\n\n\t// Target\n\tvar bend = this.createHandleShape(pts.length);\n\tthis.initBend(bend);\n\tbend.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE);\n\tbends.push(bend);\n\n\treturn bends;\n};\n\n/**\n * Function: redraw\n * \n * Overridden to invoke <refresh> before the redraw.\n */\nmxEdgeSegmentHandler.prototype.redraw = function()\n{\n\tthis.refresh();\n\tmxEdgeHandler.prototype.redraw.apply(this, arguments);\n};\n\n/**\n * Function: redrawInnerBends\n * \n * Updates the position of the custom bends.\n */\nmxEdgeSegmentHandler.prototype.redrawInnerBends = function(p0, pe)\n{\n\tif (this.graph.isCellBendable(this.state.cell))\n\t{\n\t\tvar pts = this.getCurrentPoints();\n\t\t\n\t\tif (pts != null && pts.length > 1)\n\t\t{\n\t\t\tvar straight = false;\n\t\t\t\n\t\t\t// Puts handle in the center of straight edges\n\t\t\tif (pts.length == 4 && Math.round(pts[1].x - pts[2].x) == 0 && Math.round(pts[1].y - pts[2].y) == 0)\n\t\t\t{\n\t\t\t\tstraight = true;\n\t\t\t\t\n\t\t\t\tif (Math.round(pts[0].y - pts[pts.length - 1].y) == 0)\n\t\t\t\t{\n\t\t\t\t\tvar cx = pts[0].x + (pts[pts.length - 1].x - pts[0].x) / 2;\n\t\t\t\t\tpts[1] = new mxPoint(cx, pts[1].y);\n\t\t\t\t\tpts[2] = new mxPoint(cx, pts[2].y);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar cy = pts[0].y + (pts[pts.length - 1].y - pts[0].y) / 2;\n\t\t\t\t\tpts[1] = new mxPoint(pts[1].x, cy);\n\t\t\t\t\tpts[2] = new mxPoint(pts[2].x, cy);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor (var i = 0; i < pts.length - 1; i++)\n\t\t\t{\n\t\t\t\tif (this.bends[i + 1] != null)\n\t\t\t\t{\n\t\t \t\t\tvar p0 = pts[i];\n\t \t\t\t\tvar pe = pts[i + 1];\n\t\t\t \t\tvar pt = new mxPoint(p0.x + (pe.x - p0.x) / 2, p0.y + (pe.y - p0.y) / 2);\n\t\t\t \t\tvar b = this.bends[i + 1].bounds;\n\t\t\t \t\tthis.bends[i + 1].bounds = new mxRectangle(Math.floor(pt.x - b.width / 2),\n\t\t\t \t\t\t\tMath.floor(pt.y - b.height / 2), b.width, b.height);\n\t\t\t\t \tthis.bends[i + 1].redraw();\n\t\t\t\t \t\n\t\t\t\t \tif (this.manageLabelHandle)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.checkLabelHandle(this.bends[i + 1].bounds);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (straight)\n\t\t\t{\n\t\t\t\tmxUtils.setOpacity(this.bends[1].node, this.virtualBendOpacity);\n\t\t\t\tmxUtils.setOpacity(this.bends[3].node, this.virtualBendOpacity);\n\t\t\t}\n\t\t}\n\t}\n};\n\n__mxOutput.mxEdgeSegmentHandler = typeof mxEdgeSegmentHandler !== 'undefined' ? mxEdgeSegmentHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxKeyHandler\n *\n * Event handler that listens to keystroke events. This is not a singleton,\n * however, it is normally only required once if the target is the document\n * element (default).\n * \n * This handler installs a key event listener in the topmost DOM node and\n * processes all events that originate from descandants of <mxGraph.container>\n * or from the topmost DOM node. The latter means that all unhandled keystrokes\n * are handled by this object regardless of the focused state of the <graph>.\n * \n * Example:\n * \n * The following example creates a key handler that listens to the delete key\n * (46) and deletes the selection cells if the graph is enabled.\n * \n * (code)\n * var keyHandler = new mxKeyHandler(graph);\n * keyHandler.bindKey(46, function(evt)\n * {\n *   if (graph.isEnabled())\n *   {\n *     graph.removeCells();\n *   }\n * });\n * (end)\n * \n * Keycodes:\n * \n * See http://tinyurl.com/yp8jgl or http://tinyurl.com/229yqw for a list of\n * keycodes or install a key event listener into the document element and print\n * the key codes of the respective events to the console.\n * \n * To support the Command key and the Control key on the Mac, the following\n * code can be used.\n *\n * (code)\n * keyHandler.getFunction = function(evt)\n * {\n *   if (evt != null)\n *   {\n *     return (mxEvent.isControlDown(evt) || (mxClient.IS_MAC && evt.metaKey)) ? this.controlKeys[evt.keyCode] : this.normalKeys[evt.keyCode];\n *   }\n *   \n *   return null;\n * };\n * (end)\n * \n * Constructor: mxKeyHandler\n *\n * Constructs an event handler that executes functions bound to specific\n * keystrokes.\n * \n * Parameters:\n * \n * graph - Reference to the associated <mxGraph>.\n * target - Optional reference to the event target. If null, the document\n * element is used as the event target, that is, the object where the key\n * event listener is installed.\n */\nfunction mxKeyHandler(graph, target)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.target = target || document.documentElement;\n\t\t\n\t\t// Creates the arrays to map from keycodes to functions\n\t\tthis.normalKeys = [];\n\t\tthis.shiftKeys = [];\n\t\tthis.controlKeys = [];\n\t\tthis.controlShiftKeys = [];\n\t\t\n\t\tthis.keydownHandler = mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.keyDown(evt);\n\t\t});\n\n\t\t// Installs the keystroke listener in the target\n\t\tmxEvent.addListener(this.target, 'keydown', this.keydownHandler);\n\t\t\n\t\t// Automatically deallocates memory in IE\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\tmxEvent.addListener(window, 'unload',\n\t\t\t\tmxUtils.bind(this, function()\n\t\t\t\t{\n\t\t\t\t\tthis.destroy();\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n * Variable: graph\n * \n * Reference to the <mxGraph> associated with this handler.\n */\nmxKeyHandler.prototype.graph = null;\n\n/**\n * Variable: target\n * \n * Reference to the target DOM, that is, the DOM node where the key event\n * listeners are installed.\n */\nmxKeyHandler.prototype.target = null;\n\n/**\n * Variable: normalKeys\n * \n * Maps from keycodes to functions for non-pressed control keys.\n */\nmxKeyHandler.prototype.normalKeys = null;\n\n/**\n * Variable: shiftKeys\n * \n * Maps from keycodes to functions for pressed shift keys.\n */\nmxKeyHandler.prototype.shiftKeys = null;\n\n/**\n * Variable: controlKeys\n * \n * Maps from keycodes to functions for pressed control keys.\n */\nmxKeyHandler.prototype.controlKeys = null;\n\n/**\n * Variable: controlShiftKeys\n * \n * Maps from keycodes to functions for pressed control and shift keys.\n */\nmxKeyHandler.prototype.controlShiftKeys = null;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxKeyHandler.prototype.enabled = true;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation returns\n * <enabled>.\n */\nmxKeyHandler.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling by updating <enabled>.\n * \n * Parameters:\n * \n * enabled - Boolean that specifies the new enabled state.\n */\nmxKeyHandler.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: bindKey\n * \n * Binds the specified keycode to the given function. This binding is used\n * if the control key is not pressed.\n * \n * Parameters:\n *\n * code - Integer that specifies the keycode.\n * funct - JavaScript function that takes the key event as an argument.\n */\nmxKeyHandler.prototype.bindKey = function(code, funct)\n{\n\tthis.normalKeys[code] = funct;\n};\n\n/**\n * Function: bindShiftKey\n * \n * Binds the specified keycode to the given function. This binding is used\n * if the shift key is pressed.\n * \n * Parameters:\n *\n * code - Integer that specifies the keycode.\n * funct - JavaScript function that takes the key event as an argument.\n */\nmxKeyHandler.prototype.bindShiftKey = function(code, funct)\n{\n\tthis.shiftKeys[code] = funct;\n};\n\n/**\n * Function: bindControlKey\n * \n * Binds the specified keycode to the given function. This binding is used\n * if the control key is pressed.\n * \n * Parameters:\n *\n * code - Integer that specifies the keycode.\n * funct - JavaScript function that takes the key event as an argument.\n */\nmxKeyHandler.prototype.bindControlKey = function(code, funct)\n{\n\tthis.controlKeys[code] = funct;\n};\n\n/**\n * Function: bindControlShiftKey\n * \n * Binds the specified keycode to the given function. This binding is used\n * if the control and shift key are pressed.\n * \n * Parameters:\n *\n * code - Integer that specifies the keycode.\n * funct - JavaScript function that takes the key event as an argument.\n */\nmxKeyHandler.prototype.bindControlShiftKey = function(code, funct)\n{\n\tthis.controlShiftKeys[code] = funct;\n};\n\n/**\n * Function: isControlDown\n * \n * Returns true if the control key is pressed. This uses <mxEvent.isControlDown>.\n * \n * Parameters:\n * \n * evt - Key event whose control key pressed state should be returned.\n */\nmxKeyHandler.prototype.isControlDown = function(evt)\n{\n\treturn mxEvent.isControlDown(evt);\n};\n\n/**\n * Function: getFunction\n * \n * Returns the function associated with the given key event or null if no\n * function is associated with the given event.\n * \n * Parameters:\n * \n * evt - Key event whose associated function should be returned.\n */\nmxKeyHandler.prototype.getFunction = function(evt)\n{\n\tif (evt != null && !mxEvent.isAltDown(evt))\n\t{\n\t\tif (this.isControlDown(evt))\n\t\t{\n\t\t\tif (mxEvent.isShiftDown(evt))\n\t\t\t{\n\t\t\t\treturn this.controlShiftKeys[evt.keyCode];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.controlKeys[evt.keyCode];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (mxEvent.isShiftDown(evt))\n\t\t\t{\n\t\t\t\treturn this.shiftKeys[evt.keyCode];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.normalKeys[evt.keyCode];\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\t\n/**\n * Function: isGraphEvent\n * \n * Returns true if the event should be processed by this handler, that is,\n * if the event source is either the target, one of its direct children, a\n * descendant of the <mxGraph.container>, or the <mxGraph.cellEditor> of the\n * <graph>.\n * \n * Parameters:\n * \n * evt - Key event that represents the keystroke.\n */\nmxKeyHandler.prototype.isGraphEvent = function(evt)\n{\n\tvar source = mxEvent.getSource(evt);\n\t\n\t// Accepts events from the target object or\n\t// in-place editing inside graph\n\tif ((source == this.target || source.parentNode == this.target) ||\n\t\t(this.graph.cellEditor != null && this.graph.cellEditor.isEventSource(evt)))\n\t{\n\t\treturn true;\n\t}\n\t\n\t// Accepts events from inside the container\n\treturn mxUtils.isAncestorNode(this.graph.container, source);\n};\n\n/**\n * Function: keyDown\n * \n * Handles the event by invoking the function bound to the respective keystroke\n * if <isEnabledForEvent> returns true for the given event and if\n * <isEventIgnored> returns false, except for escape for which\n * <isEventIgnored> is not invoked.\n * \n * Parameters:\n * \n * evt - Key event that represents the keystroke.\n */\nmxKeyHandler.prototype.keyDown = function(evt)\n{\n\tif (this.isEnabledForEvent(evt))\n\t{\n\t\t// Cancels the editing if escape is pressed\n\t\tif (evt.keyCode == 27 /* Escape */)\n\t\t{\n\t\t\tthis.escape(evt);\n\t\t}\n\t\t\n\t\t// Invokes the function for the keystroke\n\t\telse if (!this.isEventIgnored(evt))\n\t\t{\n\t\t\tvar boundFunction = this.getFunction(evt);\n\t\t\t\n\t\t\tif (boundFunction != null)\n\t\t\t{\n\t\t\t\tboundFunction(evt);\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Function: isEnabledForEvent\n * \n * Returns true if the given event should be handled. <isEventIgnored> is\n * called later if the event is not an escape key stroke, in which case\n * <escape> is called. This implementation returns true if <isEnabled>\n * returns true for both, this handler and <graph>, if the event is not\n * consumed and if <isGraphEvent> returns true.\n * \n * Parameters:\n * \n * evt - Key event that represents the keystroke.\n */\nmxKeyHandler.prototype.isEnabledForEvent = function(evt)\n{\n\treturn (this.graph.isEnabled() && !mxEvent.isConsumed(evt) &&\n\t\tthis.isGraphEvent(evt) && this.isEnabled());\n};\n\n/**\n * Function: isEventIgnored\n * \n * Returns true if the given keystroke should be ignored. This returns\n * graph.isEditing().\n * \n * Parameters:\n * \n * evt - Key event that represents the keystroke.\n */\nmxKeyHandler.prototype.isEventIgnored = function(evt)\n{\n\treturn this.graph.isEditing();\n};\n\n/**\n * Function: escape\n * \n * Hook to process ESCAPE keystrokes. This implementation invokes\n * <mxGraph.stopEditing> to cancel the current editing, connecting\n * and/or other ongoing modifications.\n * \n * Parameters:\n * \n * evt - Key event that represents the keystroke. Possible keycode in this\n * case is 27 (ESCAPE).\n */\nmxKeyHandler.prototype.escape = function(evt)\n{\n\tif (this.graph.isEscapeEnabled())\n\t{\n\t\tthis.graph.escape(evt);\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its references into the DOM. This does\n * normally not need to be called, it is called automatically when the\n * window unloads (in IE).\n */\nmxKeyHandler.prototype.destroy = function()\n{\n\tif (this.target != null && this.keydownHandler != null)\n\t{\n\t\tmxEvent.removeListener(this.target, 'keydown', this.keydownHandler);\n\t\tthis.keydownHandler = null;\n\t}\n\t\n\tthis.target = null;\n};\n\n__mxOutput.mxKeyHandler = typeof mxKeyHandler !== 'undefined' ? mxKeyHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxTooltipHandler\n * \n * Graph event handler that displays tooltips. <mxGraph.getTooltip> is used to\n * get the tooltip for a cell or handle. This handler is built-into\n * <mxGraph.tooltipHandler> and enabled using <mxGraph.setTooltips>.\n *\n * Example:\n * \n * (code>\n * new mxTooltipHandler(graph);\n * (end)\n * \n * Constructor: mxTooltipHandler\n * \n * Constructs an event handler that displays tooltips with the specified\n * delay (in milliseconds). If no delay is specified then a default delay\n * of 500 ms (0.5 sec) is used.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * delay - Optional delay in milliseconds.\n */\nfunction mxTooltipHandler(graph, delay)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.delay = delay || 500;\n\t\tthis.graph.addMouseListener(this);\n\t}\n};\n\n/**\n * Variable: zIndex\n * \n * Specifies the zIndex for the tooltip and its shadow. Default is 10005.\n */\nmxTooltipHandler.prototype.zIndex = 10005;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxTooltipHandler.prototype.graph = null;\n\n/**\n * Variable: delay\n * \n * Delay to show the tooltip in milliseconds. Default is 500.\n */\nmxTooltipHandler.prototype.delay = null;\n\n/**\n * Variable: ignoreTouchEvents\n * \n * Specifies if touch and pen events should be ignored. Default is true.\n */\nmxTooltipHandler.prototype.ignoreTouchEvents = true;\n\n/**\n * Variable: hideOnHover\n * \n * Specifies if the tooltip should be hidden if the mouse is moved over the\n * current cell. Default is false.\n */\nmxTooltipHandler.prototype.hideOnHover = false;\n\n/**\n * Variable: destroyed\n * \n * True if this handler was destroyed using <destroy>.\n */\nmxTooltipHandler.prototype.destroyed = false;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxTooltipHandler.prototype.enabled = true;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxTooltipHandler.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n */\nmxTooltipHandler.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isHideOnHover\n * \n * Returns <hideOnHover>.\n */\nmxTooltipHandler.prototype.isHideOnHover = function()\n{\n\treturn this.hideOnHover;\n};\n\n/**\n * Function: setHideOnHover\n * \n * Sets <hideOnHover>.\n */\nmxTooltipHandler.prototype.setHideOnHover = function(value)\n{\n\tthis.hideOnHover = value;\n};\n\n/**\n * Function: init\n * \n * Initializes the DOM nodes required for this tooltip handler.\n */\nmxTooltipHandler.prototype.init = function()\n{\n\tif (document.body != null)\n\t{\n\t\tthis.div = document.createElement('div');\n\t\tthis.div.className = 'mxTooltip';\n\t\tthis.div.style.visibility = 'hidden';\n\n\t\tdocument.body.appendChild(this.div);\n\n\t\tmxEvent.addGestureListeners(this.div, mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tvar source = mxEvent.getSource(evt);\n\t\t\t\n\t\t\tif (source.nodeName != 'A')\n\t\t\t{\n\t\t\t\tthis.hideTooltip();\n\t\t\t}\n\t\t}));\n\t}\n};\n\n/**\n * Function: getStateForEvent\n * \n * Returns the <mxCellState> to be used for showing a tooltip for this event.\n */\nmxTooltipHandler.prototype.getStateForEvent = function(me)\n{\n\treturn me.getState();\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by initiating a rubberband selection. By consuming the\n * event all subsequent events of the gesture are redirected to this\n * handler.\n */\nmxTooltipHandler.prototype.mouseDown = function(sender, me)\n{\n\tthis.reset(me, false);\n\tthis.hideTooltip();\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating the rubberband selection.\n */\nmxTooltipHandler.prototype.mouseMove = function(sender, me)\n{\n\tif (me.getX() != this.lastX || me.getY() != this.lastY)\n\t{\n\t\tthis.reset(me, true);\n\t\tvar state = this.getStateForEvent(me);\n\t\t\n\t\tif (this.isHideOnHover() || state != this.state || (me.getSource() != this.node &&\n\t\t\t(!this.stateSource || (state != null && this.stateSource ==\n\t\t\t(me.isSource(state.shape) || !me.isSource(state.text))))))\n\t\t{\n\t\t\tthis.hideTooltip();\n\t\t}\n\t}\n\t\n\tthis.lastX = me.getX();\n\tthis.lastY = me.getY();\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by resetting the tooltip timer or hiding the existing\n * tooltip.\n */\nmxTooltipHandler.prototype.mouseUp = function(sender, me)\n{\n\tthis.reset(me, true);\n\tthis.hideTooltip();\n};\n\n\n/**\n * Function: resetTimer\n * \n * Resets the timer.\n */\nmxTooltipHandler.prototype.resetTimer = function()\n{\n\tif (this.thread != null)\n\t{\n\t\twindow.clearTimeout(this.thread);\n\t\tthis.thread = null;\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets and/or restarts the timer to trigger the display of the tooltip.\n */\nmxTooltipHandler.prototype.reset = function(me, restart, state)\n{\n\tif (!this.ignoreTouchEvents || mxEvent.isMouseEvent(me.getEvent()))\n\t{\n\t\tthis.resetTimer();\n\t\tstate = (state != null) ? state : this.getStateForEvent(me);\n\t\t\n\t\tif (restart && this.isEnabled() && state != null && (this.div == null ||\n\t\t\tthis.div.style.visibility == 'hidden'))\n\t\t{\n\t\t\tvar node = me.getSource();\n\t\t\tvar x = me.getX();\n\t\t\tvar y = me.getY();\n\t\t\tvar stateSource = me.isSource(state.shape) || me.isSource(state.text);\n\t\n\t\t\tthis.thread = window.setTimeout(mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tif (!this.graph.isEditing() && !this.graph.popupMenuHandler.isMenuShowing() && !this.graph.isMouseDown)\n\t\t\t\t{\n\t\t\t\t\t// Uses information from inside event cause using the event at\n\t\t\t\t\t// this (delayed) point in time is not possible in IE as it no\n\t\t\t\t\t// longer contains the required information (member not found)\n\t\t\t\t\tvar tip = this.graph.getTooltip(state, node, x, y);\n\t\t\t\t\tthis.show(tip, x, y);\n\t\t\t\t\tthis.state = state;\n\t\t\t\t\tthis.node = node;\n\t\t\t\t\tthis.stateSource = stateSource;\n\t\t\t\t}\n\t\t\t}), this.delay);\n\t\t}\n\t}\n};\n\n/**\n * Function: hide\n * \n * Hides the tooltip and resets the timer.\n */\nmxTooltipHandler.prototype.hide = function()\n{\n\tthis.resetTimer();\n\tthis.hideTooltip();\n};\n\n/**\n * Function: hideTooltip\n * \n * Hides the tooltip.\n */\nmxTooltipHandler.prototype.hideTooltip = function()\n{\n\tif (this.div != null)\n\t{\n\t\tthis.div.style.visibility = 'hidden';\n\t\tthis.div.innerHTML = '';\n\t}\n};\n\n/**\n * Function: show\n * \n * Shows the tooltip for the specified cell and optional index at the\n * specified location (with a vertical offset of 10 pixels).\n */\nmxTooltipHandler.prototype.show = function(tip, x, y)\n{\n\tif (!this.destroyed && tip != null && tip.length > 0)\n\t{\n\t\t// Initializes the DOM nodes if required\n\t\tif (this.div == null)\n\t\t{\n\t\t\tthis.init();\n\t\t}\n\t\t\n\t\tvar origin = mxUtils.getScrollOrigin();\n\n\t\tthis.div.style.zIndex = this.zIndex;\n\t\tthis.div.style.left = (x + origin.x) + 'px';\n\t\tthis.div.style.top = (y + mxConstants.TOOLTIP_VERTICAL_OFFSET +\n\t\t\torigin.y) + 'px';\n\n\t\tif (!mxUtils.isNode(tip))\n\t\t{\t\n\t\t\tthis.div.innerHTML = tip.replace(/\\n/g, '<br>');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.div.innerHTML = '';\n\t\t\tthis.div.appendChild(tip);\n\t\t}\n\t\t\n\t\tthis.div.style.visibility = '';\n\t\tmxUtils.fit(this.div);\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxTooltipHandler.prototype.destroy = function()\n{\n\tif (!this.destroyed)\n\t{\n\t\tthis.graph.removeMouseListener(this);\n\t\tmxEvent.release(this.div);\n\t\t\n\t\tif (this.div != null && this.div.parentNode != null)\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t\t\n\t\tthis.destroyed = true;\n\t\tthis.div = null;\n\t}\n};\n\n__mxOutput.mxTooltipHandler = typeof mxTooltipHandler !== 'undefined' ? mxTooltipHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCellTracker\n * \n * Event handler that highlights cells. Inherits from <mxCellMarker>.\n * \n * Example:\n * \n * (code)\n * new mxCellTracker(graph, '#00FF00');\n * (end)\n * \n * For detecting dragEnter, dragOver and dragLeave on cells, the following\n * code can be used:\n * \n * (code)\n * graph.addMouseListener(\n * {\n *   cell: null,\n *   mouseDown: function(sender, me) { },\n *   mouseMove: function(sender, me)\n *   {\n *     var tmp = me.getCell();\n *     \n *     if (tmp != this.cell)\n *     {\n *       if (this.cell != null)\n *       {\n *         this.dragLeave(me.getEvent(), this.cell);\n *       }\n *       \n *       this.cell = tmp;\n *       \n *       if (this.cell != null)\n *       {\n *         this.dragEnter(me.getEvent(), this.cell);\n *       }\n *     }\n *     \n *     if (this.cell != null)\n *     {\n *       this.dragOver(me.getEvent(), this.cell);\n *     }\n *   },\n *   mouseUp: function(sender, me) { },\n *   dragEnter: function(evt, cell)\n *   {\n *     mxLog.debug('dragEnter', cell.value);\n *   },\n *   dragOver: function(evt, cell)\n *   {\n *     mxLog.debug('dragOver', cell.value);\n *   },\n *   dragLeave: function(evt, cell)\n *   {\n *     mxLog.debug('dragLeave', cell.value);\n *   }\n * });\n * (end)\n * \n * Constructor: mxCellTracker\n * \n * Constructs an event handler that highlights cells.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * color - Color of the highlight. Default is blue.\n * funct - Optional JavaScript function that is used to override\n * <mxCellMarker.getCell>.\n */\nfunction mxCellTracker(graph, color, funct)\n{\n\tmxCellMarker.call(this, graph, color);\n\n\tthis.graph.addMouseListener(this);\n\t\n\tif (funct != null)\n\t{\n\t\tthis.getCell = funct;\n\t}\n\t\n\t// Automatic deallocation of memory\n\tif (mxClient.IS_IE)\n\t{\n\t\tmxEvent.addListener(window, 'unload', mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.destroy();\n\t\t}));\n\t}\n};\n\n/**\n * Extends mxCellMarker.\n */\nmxUtils.extend(mxCellTracker, mxCellMarker);\n\n/**\n * Function: mouseDown\n * \n * Ignores the event. The event is not consumed.\n */\nmxCellTracker.prototype.mouseDown = function(sender, me) { };\n\n/**\n * Function: mouseMove\n * \n * Handles the event by highlighting the cell under the mousepointer if it\n * is over the hotspot region of the cell.\n */\nmxCellTracker.prototype.mouseMove = function(sender, me)\n{\n\tif (this.isEnabled())\n\t{\n\t\tthis.process(me);\n\t}\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by reseting the highlight.\n */\nmxCellTracker.prototype.mouseUp = function(sender, me) { };\n\n/**\n * Function: destroy\n * \n * Destroys the object and all its resources and DOM nodes. This doesn't\n * normally need to be called. It is called automatically when the window\n * unloads.\n */\nmxCellTracker.prototype.destroy = function()\n{\n\tif (!this.destroyed)\n\t{\n\t\tthis.destroyed = true;\n\n\t\tthis.graph.removeMouseListener(this);\n\t\tmxCellMarker.prototype.destroy.apply(this);\n\t}\n};\n\n__mxOutput.mxCellTracker = typeof mxCellTracker !== 'undefined' ? mxCellTracker : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCellHighlight\n * \n * A helper class to highlight cells. Here is an example for a given cell.\n * \n * (code)\n * var highlight = new mxCellHighlight(graph, '#ff0000', 2);\n * highlight.highlight(graph.view.getState(cell)));\n * (end)\n * \n * Constructor: mxCellHighlight\n * \n * Constructs a cell highlight.\n */\nfunction mxCellHighlight(graph, highlightColor, strokeWidth, dashed)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.highlightColor = (highlightColor != null) ? highlightColor : mxConstants.DEFAULT_VALID_COLOR;\n\t\tthis.strokeWidth = (strokeWidth != null) ? strokeWidth : mxConstants.HIGHLIGHT_STROKEWIDTH;\n\t\tthis.dashed = (dashed != null) ? dashed : false;\n\t\tthis.opacity = mxConstants.HIGHLIGHT_OPACITY;\n\n\t\t// Updates the marker if the graph changes\n\t\tthis.repaintHandler = mxUtils.bind(this, function()\n\t\t{\n\t\t\t// Updates reference to state\n\t\t\tif (this.state != null)\n\t\t\t{\n\t\t\t\tvar tmp = this.graph.view.getState(this.state.cell);\n\t\t\t\t\n\t\t\t\tif (tmp == null)\n\t\t\t\t{\n\t\t\t\t\tthis.hide();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.state = tmp;\n\t\t\t\t\tthis.repaint();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.graph.getView().addListener(mxEvent.SCALE, this.repaintHandler);\n\t\tthis.graph.getView().addListener(mxEvent.TRANSLATE, this.repaintHandler);\n\t\tthis.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE, this.repaintHandler);\n\t\tthis.graph.getModel().addListener(mxEvent.CHANGE, this.repaintHandler);\n\t\t\n\t\t// Hides the marker if the current root changes\n\t\tthis.resetHandler = mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.hide();\n\t\t});\n\n\t\tthis.graph.getView().addListener(mxEvent.DOWN, this.resetHandler);\n\t\tthis.graph.getView().addListener(mxEvent.UP, this.resetHandler);\n\t}\n};\n\n/**\n * Variable: keepOnTop\n * \n * Specifies if the highlights should appear on top of everything\n * else in the overlay pane. Default is false.\n */\nmxCellHighlight.prototype.keepOnTop = false;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxCellHighlight.prototype.graph = null;\n\n/**\n * Variable: state\n * \n * Reference to the <mxCellState>.\n */\nmxCellHighlight.prototype.state = null;\n\n/**\n * Variable: spacing\n * \n * Specifies the spacing between the highlight for vertices and the vertex.\n * Default is 2.\n */\nmxCellHighlight.prototype.spacing = 2;\n\n/**\n * Variable: resetHandler\n * \n * Holds the handler that automatically invokes reset if the highlight\n * should be hidden.\n */\nmxCellHighlight.prototype.resetHandler = null;\n\n/**\n * Function: setHighlightColor\n * \n * Sets the color of the rectangle used to highlight drop targets.\n * \n * Parameters:\n * \n * color - String that represents the new highlight color.\n */\nmxCellHighlight.prototype.setHighlightColor = function(color)\n{\n\tthis.highlightColor = color;\n\t\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.stroke = color;\n\t}\n};\n\n/**\n * Function: drawHighlight\n * \n * Creates and returns the highlight shape for the given state.\n */\nmxCellHighlight.prototype.drawHighlight = function()\n{\n\tthis.shape = this.createShape();\n\tthis.repaint();\n\n\tif (!this.keepOnTop && this.shape.node.parentNode.firstChild != this.shape.node)\n\t{\n\t\tthis.shape.node.parentNode.insertBefore(this.shape.node, this.shape.node.parentNode.firstChild);\n\t}\n};\n\n/**\n * Function: createShape\n * \n * Creates and returns the highlight shape for the given state.\n */\nmxCellHighlight.prototype.createShape = function()\n{\n\tvar shape = this.graph.cellRenderer.createShape(this.state);\n\t\n\tshape.svgStrokeTolerance = this.graph.tolerance;\n\tshape.points = this.state.absolutePoints;\n\tshape.apply(this.state);\n\tshape.stroke = this.highlightColor;\n\tshape.opacity = this.opacity;\n\tshape.isDashed = this.dashed;\n\tshape.isShadow = false;\n\t\n\tshape.dialect = (this.graph.dialect != mxConstants.DIALECT_SVG) ? mxConstants.DIALECT_VML : mxConstants.DIALECT_SVG;\n\tshape.init(this.graph.getView().getOverlayPane());\n\tmxEvent.redirectMouseEvents(shape.node, this.graph, this.state);\n\t\n\tif (this.graph.dialect != mxConstants.DIALECT_SVG)\n\t{\n\t\tshape.pointerEvents = false;\n\t}\n\telse\n\t{\n\t\tshape.svgPointerEvents = 'stroke';\n\t}\n\t\n\treturn shape;\n};\n\n/**\n * Function: getStrokeWidth\n * \n * Returns the stroke width.\n */\nmxCellHighlight.prototype.getStrokeWidth = function(state)\n{\n\treturn this.strokeWidth;\n};\n\n/**\n * Function: repaint\n * \n * Updates the highlight after a change of the model or view.\n */\nmxCellHighlight.prototype.repaint = function()\n{\n\tif (this.state != null && this.shape != null)\n\t{\n\t\tthis.shape.scale = this.state.view.scale;\n\t\t\n\t\tif (this.graph.model.isEdge(this.state.cell))\n\t\t{\n\t\t\tthis.shape.strokewidth = this.getStrokeWidth();\n\t\t\tthis.shape.points = this.state.absolutePoints;\n\t\t\tthis.shape.outline = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.shape.bounds = new mxRectangle(this.state.x - this.spacing, this.state.y - this.spacing,\n\t\t\t\t\tthis.state.width + 2 * this.spacing, this.state.height + 2 * this.spacing);\n\t\t\tthis.shape.rotation = Number(this.state.style[mxConstants.STYLE_ROTATION] || '0');\n\t\t\tthis.shape.strokewidth = this.getStrokeWidth() / this.state.view.scale;\n\t\t\tthis.shape.outline = true;\n\t\t}\n\n\t\t// Uses cursor from shape in highlight\n\t\tif (this.state.shape != null)\n\t\t{\n\t\t\tthis.shape.setCursor(this.state.shape.getCursor());\n\t\t}\n\t\t\n\t\t// Workaround for event transparency in VML with transparent color\n\t\t// is to use a non-transparent color with near zero opacity\n\t\tif (mxClient.IS_QUIRKS || document.documentMode == 8)\n\t\t{\n\t\t\tif (this.shape.stroke == 'transparent')\n\t\t\t{\n\t\t\t\t// KNOWN: Quirks mode does not seem to catch events if\n\t\t\t\t// we do not force an update of the DOM via a change such\n\t\t\t\t// as mxLog.debug. Since IE6 is EOL we do not add a fix.\n\t\t\t\tthis.shape.stroke = 'white';\n\t\t\t\tthis.shape.opacity = 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.shape.opacity = this.opacity;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.shape.redraw();\n\t}\n};\n\n/**\n * Function: hide\n * \n * Resets the state of the cell marker.\n */\nmxCellHighlight.prototype.hide = function()\n{\n\tthis.highlight(null);\n};\n\n/**\n * Function: mark\n * \n * Marks the <markedState> and fires a <mark> event.\n */\nmxCellHighlight.prototype.highlight = function(state)\n{\n\tif (this.state != state)\n\t{\n\t\tif (this.shape != null)\n\t\t{\n\t\t\tthis.shape.destroy();\n\t\t\tthis.shape = null;\n\t\t}\n\n\t\tthis.state = state;\n\t\t\n\t\tif (this.state != null)\n\t\t{\n\t\t\tthis.drawHighlight();\n\t\t}\n\t}\n};\n\n/**\n * Function: isHighlightAt\n * \n * Returns true if this highlight is at the given position.\n */\nmxCellHighlight.prototype.isHighlightAt = function(x, y)\n{\n\tvar hit = false;\n\t\n\t// Quirks mode is currently not supported as it used a different coordinate system\n\tif (this.shape != null && document.elementFromPoint != null && !mxClient.IS_QUIRKS)\n\t{\n\t\tvar elt = document.elementFromPoint(x, y);\n\n\t\twhile (elt != null)\n\t\t{\n\t\t\tif (elt == this.shape.node)\n\t\t\t{\n\t\t\t\thit = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\telt = elt.parentNode;\n\t\t}\n\t}\n\t\n\treturn hit;\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxCellHighlight.prototype.destroy = function()\n{\n\tthis.graph.getView().removeListener(this.resetHandler);\n\tthis.graph.getView().removeListener(this.repaintHandler);\n\tthis.graph.getModel().removeListener(this.repaintHandler);\n\t\n\tif (this.shape != null)\n\t{\n\t\tthis.shape.destroy();\n\t\tthis.shape = null;\n\t}\n};\n\n__mxOutput.mxCellHighlight = typeof mxCellHighlight !== 'undefined' ? mxCellHighlight : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDefaultKeyHandler\n *\n * Binds keycodes to actionnames in an editor. This aggregates an internal\n * <handler> and extends the implementation of <mxKeyHandler.escape> to not\n * only cancel the editing, but also hide the properties dialog and fire an\n * <mxEditor.escape> event via <editor>. An instance of this class is created\n * by <mxEditor> and stored in <mxEditor.keyHandler>.\n * \n * Example:\n * \n * Bind the delete key to the delete action in an existing editor.\n * \n * (code)\n * var keyHandler = new mxDefaultKeyHandler(editor);\n * keyHandler.bindAction(46, 'delete');\n * (end)\n *\n * Codec:\n * \n * This class uses the <mxDefaultKeyHandlerCodec> to read configuration\n * data into an existing instance. See <mxDefaultKeyHandlerCodec> for a\n * description of the configuration format.\n * \n * Keycodes:\n * \n * See <mxKeyHandler>.\n * \n * An <mxEvent.ESCAPE> event is fired via the editor if the escape key is\n * pressed.\n * \n * Constructor: mxDefaultKeyHandler\n *\n * Constructs a new default key handler for the <mxEditor.graph> in the\n * given <mxEditor>. (The editor may be null if a prototypical instance for\n * a <mxDefaultKeyHandlerCodec> is created.)\n * \n * Parameters:\n * \n * editor - Reference to the enclosing <mxEditor>.\n */\nfunction mxDefaultKeyHandler(editor)\n{\n\tif (editor != null)\n\t{\n\t\tthis.editor = editor;\n\t\tthis.handler = new mxKeyHandler(editor.graph);\n\t\t\n\t\t// Extends the escape function of the internal key\n\t\t// handle to hide the properties dialog and fire\n\t\t// the escape event via the editor instance\n\t\tvar old = this.handler.escape;\n\t\t\n\t\tthis.handler.escape = function(evt)\n\t\t{\n\t\t\told.apply(this, arguments);\n\t\t\teditor.hideProperties();\n\t\t\teditor.fireEvent(new mxEventObject(mxEvent.ESCAPE, 'event', evt));\n\t\t};\n\t}\n};\n\t\n/**\n * Variable: editor\n *\n * Reference to the enclosing <mxEditor>.\n */\nmxDefaultKeyHandler.prototype.editor = null;\n\n/**\n * Variable: handler\n *\n * Holds the <mxKeyHandler> for key event handling.\n */\nmxDefaultKeyHandler.prototype.handler = null;\n\n/**\n * Function: bindAction\n *\n * Binds the specified keycode to the given action in <editor>. The\n * optional control flag specifies if the control key must be pressed\n * to trigger the action.\n *\n * Parameters:\n *\n * code - Integer that specifies the keycode.\n * action - Name of the action to execute in <editor>.\n * control - Optional boolean that specifies if control must be pressed.\n * Default is false.\n */\nmxDefaultKeyHandler.prototype.bindAction = function (code, action, control)\n{\n\tvar keyHandler = mxUtils.bind(this, function()\n\t{\n\t\tthis.editor.execute(action);\n\t});\n\n\t// Binds the function to control-down keycode\n\tif (control)\n\t{\n\t\tthis.handler.bindControlKey(code, keyHandler);\n\t}\n\n\t// Binds the function to the normal keycode\n\telse\n\t{\n\t\tthis.handler.bindKey(code, keyHandler);\t\t\t\t\n\t}\n};\n\n/**\n * Function: destroy\n *\n * Destroys the <handler> associated with this object. This does normally\n * not need to be called, the <handler> is destroyed automatically when the\n * window unloads (in IE) by <mxEditor>.\n */\nmxDefaultKeyHandler.prototype.destroy = function ()\n{\n\tthis.handler.destroy();\n\tthis.handler = null;\n};\n\n__mxOutput.mxDefaultKeyHandler = typeof mxDefaultKeyHandler !== 'undefined' ? mxDefaultKeyHandler : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDefaultPopupMenu\n *\n * Creates popupmenus for mouse events. This object holds an XML node\n * which is a description of the popup menu to be created. In\n * <createMenu>, the configuration is applied to the context and\n * the resulting menu items are added to the menu dynamically. See\n * <createMenu> for a description of the configuration format.\n * \n * This class does not create the DOM nodes required for the popup menu, it\n * only parses an XML description to invoke the respective methods on an\n * <mxPopupMenu> each time the menu is displayed.\n *\n * Codec:\n * \n * This class uses the <mxDefaultPopupMenuCodec> to read configuration\n * data into an existing instance, however, the actual parsing is done\n * by this class during program execution, so the format is described\n * below.\n * \n * Constructor: mxDefaultPopupMenu\n *\n * Constructs a new popupmenu-factory based on given configuration.\n *\n * Paramaters:\n *\n * config - XML node that contains the configuration data.\n */\nfunction mxDefaultPopupMenu(config)\n{\n\tthis.config = config;\n};\n\n/**\n * Variable: imageBasePath\n *\n * Base path for all icon attributes in the config. Default is null.\n */\nmxDefaultPopupMenu.prototype.imageBasePath = null;\n\n/**\n * Variable: config\n *\n * XML node used as the description of new menu items. This node is\n * used in <createMenu> to dynamically create the menu items if their\n * respective conditions evaluate to true for the given arguments.\n */\nmxDefaultPopupMenu.prototype.config = null;\n\n/**\n * Function: createMenu\n *\n * This function is called from <mxEditor> to add items to the\n * given menu based on <config>. The config is a sequence of\n * the following nodes and attributes.\n *\n * Child Nodes: \n *\n * add - Adds a new menu item. See below for attributes.\n * separator - Adds a separator. No attributes.\n * condition - Adds a custom condition. Name attribute.\n * \n * The add-node may have a child node that defines a function to be invoked\n * before the action is executed (or instead of an action to be executed).\n *\n * Attributes:\n *\n * as - Resource key for the label (needs entry in property file).\n * action - Name of the action to execute in enclosing editor.\n * icon - Optional icon (relative/absolute URL).\n * iconCls - Optional CSS class for the icon.\n * if - Optional name of condition that must be true (see below).\n * enabled-if - Optional name of condition that specifies if the menu item\n * should be enabled.\n * name - Name of custom condition. Only for condition nodes.\n *\n * Conditions:\n *\n * nocell - No cell under the mouse.\n * ncells - More than one cell selected.\n * notRoot - Drilling position is other than home.\n * cell - Cell under the mouse.\n * notEmpty - Exactly one cell with children under mouse.\n * expandable - Exactly one expandable cell under mouse.\n * collapsable - Exactly one collapsable cell under mouse.\n * validRoot - Exactly one cell which is a possible root under mouse.\n * swimlane - Exactly one cell which is a swimlane under mouse.\n *\n * Example:\n *\n * To add a new item for a given action to the popupmenu:\n * \n * (code)\n * <mxDefaultPopupMenu as=\"popupHandler\">\n *   <add as=\"delete\" action=\"delete\" icon=\"images/delete.gif\" if=\"cell\"/>\n * </mxDefaultPopupMenu>\n * (end)\n * \n * To add a new item for a custom function:\n * \n * (code)\n * <mxDefaultPopupMenu as=\"popupHandler\">\n *   <add as=\"action1\"><![CDATA[\n *\t\tfunction (editor, cell, evt)\n *\t\t{\n *\t\t\teditor.execute('action1', cell, 'myArg');\n *\t\t}\n *   ]]></add>\n * </mxDefaultPopupMenu>\n * (end)\n * \n * The above example invokes action1 with an additional third argument via\n * the editor instance. The third argument is passed to the function that\n * defines action1. If the add-node has no action-attribute, then only the\n * function defined in the text content is executed, otherwise first the\n * function and then the action defined in the action-attribute is\n * executed. The function in the text content has 3 arguments, namely the\n * <mxEditor> instance, the <mxCell> instance under the mouse, and the\n * native mouse event.\n *\n * Custom Conditions:\n *\n * To add a new condition for popupmenu items:\n *  \n * (code)\n * <condition name=\"condition1\"><![CDATA[\n *   function (editor, cell, evt)\n *   {\n *     return cell != null;\n *   }\n * ]]></condition>\n * (end)\n * \n * The new condition can then be used in any item as follows:\n * \n * (code)\n * <add as=\"action1\" action=\"action1\" icon=\"action1.gif\" if=\"condition1\"/>\n * (end)\n * \n * The order in which the items and conditions appear is not significant as\n * all connditions are evaluated before any items are created.\n * \n * Parameters:\n *\n * editor - Enclosing <mxEditor> instance.\n * menu - <mxPopupMenu> that is used for adding items and separators.\n * cell - Optional <mxCell> which is under the mousepointer.\n * evt - Optional mouse event which triggered the menu. \n */\nmxDefaultPopupMenu.prototype.createMenu = function(editor, menu, cell, evt)\n{\n\tif (this.config != null)\n\t{\n\t\tvar conditions = this.createConditions(editor, cell, evt);\n\t\tvar item = this.config.firstChild;\n\n\t\tthis.addItems(editor, menu, cell, evt, conditions, item, null);\n\t}\n};\n\n/**\n * Function: addItems\n * \n * Recursively adds the given items and all of its children into the given menu.\n * \n * Parameters:\n *\n * editor - Enclosing <mxEditor> instance.\n * menu - <mxPopupMenu> that is used for adding items and separators.\n * cell - Optional <mxCell> which is under the mousepointer.\n * evt - Optional mouse event which triggered the menu.\n * conditions - Array of names boolean conditions.\n * item - XML node that represents the current menu item.\n * parent - DOM node that represents the parent menu item.\n */\nmxDefaultPopupMenu.prototype.addItems = function(editor, menu, cell, evt, conditions, item, parent)\n{\n\tvar addSeparator = false;\n\t\n\twhile (item != null)\n\t{\n\t\tif (item.nodeName == 'add')\n\t\t{\n\t\t\tvar condition = item.getAttribute('if');\n\t\t\t\n\t\t\tif (condition == null || conditions[condition])\n\t\t\t{\n\t\t\t\tvar as = item.getAttribute('as');\n\t\t\t\tas = mxResources.get(as) || as;\n\t\t\t\tvar funct = mxUtils.eval(mxUtils.getTextContent(item));\n\t\t\t\tvar action = item.getAttribute('action');\n\t\t\t\tvar icon = item.getAttribute('icon');\n\t\t\t\tvar iconCls = item.getAttribute('iconCls');\n\t\t\t\tvar enabledCond = item.getAttribute('enabled-if');\n\t\t\t\tvar enabled = enabledCond == null || conditions[enabledCond];\n\t\t\t\t\n\t\t\t\tif (addSeparator)\n\t\t\t\t{\n\t\t\t\t\tmenu.addSeparator(parent);\n\t\t\t\t\taddSeparator = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (icon != null && this.imageBasePath)\n\t\t\t\t{\n\t\t\t\t\ticon = this.imageBasePath + icon;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar row = this.addAction(menu, editor, as, icon, funct, action, cell, parent, iconCls, enabled);\n\t\t\t\tthis.addItems(editor, menu, cell, evt, conditions, item.firstChild, row);\n\t\t\t}\n\t\t}\n\t\telse if (item.nodeName == 'separator')\n\t\t{\n\t\t\taddSeparator = true;\n\t\t}\n\t\t\n\t\titem = item.nextSibling;\n\t}\n};\n\n/**\n * Function: addAction\n *\n * Helper method to bind an action to a new menu item.\n * \n * Parameters:\n *\n * menu - <mxPopupMenu> that is used for adding items and separators.\n * editor - Enclosing <mxEditor> instance.\n * lab - String that represents the label of the menu item.\n * icon - Optional URL that represents the icon of the menu item.\n * action - Optional name of the action to execute in the given editor.\n * funct - Optional function to execute before the optional action. The\n * function takes an <mxEditor>, the <mxCell> under the mouse and the\n * mouse event that triggered the call.\n * cell - Optional <mxCell> to use as an argument for the action.\n * parent - DOM node that represents the parent menu item.\n * iconCls - Optional CSS class for the menu icon.\n * enabled - Optional boolean that specifies if the menu item is enabled.\n * Default is true.\n */\nmxDefaultPopupMenu.prototype.addAction = function(menu, editor, lab, icon, funct, action, cell, parent, iconCls, enabled)\n{\n\tvar clickHandler = function(evt)\n\t{\n\t\tif (typeof(funct) == 'function')\n\t\t{\n\t\t\tfunct.call(editor, editor, cell, evt);\n\t\t}\n\t\t\n\t\tif (action != null)\n\t\t{\n\t\t\teditor.execute(action, cell, evt);\n\t\t}\n\t};\n\t\n\treturn menu.addItem(lab, icon, clickHandler, parent, iconCls, enabled);\n};\n\n/**\n * Function: createConditions\n * \n * Evaluates the default conditions for the given context.\n */\nmxDefaultPopupMenu.prototype.createConditions = function(editor, cell, evt)\n{\n\t// Creates array with conditions\n\tvar model = editor.graph.getModel();\n\tvar childCount = model.getChildCount(cell);\n\t\n\t// Adds some frequently used conditions\n\tvar conditions = [];\n\tconditions['nocell'] = cell == null;\n\tconditions['ncells'] = editor.graph.getSelectionCount() > 1;\n\tconditions['notRoot'] = model.getRoot() !=\n\t\tmodel.getParent(editor.graph.getDefaultParent());\n\tconditions['cell'] = cell != null;\n\t\n\tvar isCell = cell != null && editor.graph.getSelectionCount() == 1;\n\tconditions['nonEmpty'] = isCell && childCount > 0;\n\tconditions['expandable'] = isCell && editor.graph.isCellFoldable(cell, false);\n\tconditions['collapsable'] = isCell && editor.graph.isCellFoldable(cell, true);\n\tconditions['validRoot'] = isCell && editor.graph.isValidRoot(cell);\n\tconditions['emptyValidRoot'] = conditions['validRoot'] && childCount == 0;\n\tconditions['swimlane'] = isCell && editor.graph.isSwimlane(cell);\n\n\t// Evaluates dynamic conditions from config file\n\tvar condNodes = this.config.getElementsByTagName('condition');\n\t\n\tfor (var i=0; i<condNodes.length; i++)\n\t{\n\t\tvar funct = mxUtils.eval(mxUtils.getTextContent(condNodes[i]));\n\t\tvar name = condNodes[i].getAttribute('name');\n\t\t\n\t\tif (name != null && typeof(funct) == 'function')\n\t\t{\n\t\t\tconditions[name] = funct(editor, cell, evt);\n\t\t}\n\t}\n\t\n\treturn conditions;\n};\n\n__mxOutput.mxDefaultPopupMenu = typeof mxDefaultPopupMenu !== 'undefined' ? mxDefaultPopupMenu : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDefaultToolbar\n *\n * Toolbar for the editor. This modifies the state of the graph\n * or inserts new cells upon mouse clicks.\n * \n * Example:\n * \n * Create a toolbar with a button to copy the selection into the clipboard,\n * and a combo box with one action to paste the selection from the clipboard\n * into the graph.\n * \n * (code)\n * var toolbar = new mxDefaultToolbar(container, editor);\n * toolbar.addItem('Copy', null, 'copy');\n * \n * var combo = toolbar.addActionCombo('More actions...');\n * toolbar.addActionOption(combo, 'Paste', 'paste');\n * (end) \n *\n * Codec:\n * \n * This class uses the <mxDefaultToolbarCodec> to read configuration\n * data into an existing instance. See <mxDefaultToolbarCodec> for a\n * description of the configuration format.\n * \n * Constructor: mxDefaultToolbar\n *\n * Constructs a new toolbar for the given container and editor. The\n * container and editor may be null if a prototypical instance for a\n * <mxDefaultKeyHandlerCodec> is created.\n *\n * Parameters:\n *\n * container - DOM node that contains the toolbar.\n * editor - Reference to the enclosing <mxEditor>. \n */\nfunction mxDefaultToolbar(container, editor)\n{\n\tthis.editor = editor;\n\n\tif (container != null && editor != null)\n\t{\n\t\tthis.init(container);\n\t}\n};\n\t\n/**\n * Variable: editor\n *\n * Reference to the enclosing <mxEditor>.\n */\nmxDefaultToolbar.prototype.editor = null;\n\n/**\n * Variable: toolbar\n *\n * Holds the internal <mxToolbar>.\n */\nmxDefaultToolbar.prototype.toolbar = null;\n\n/**\n * Variable: resetHandler\n *\n * Reference to the function used to reset the <toolbar>.\n */\nmxDefaultToolbar.prototype.resetHandler = null;\n\n/**\n * Variable: spacing\n *\n * Defines the spacing between existing and new vertices in\n * gridSize units when a new vertex is dropped on an existing\n * cell. Default is 4 (40 pixels).\n */\nmxDefaultToolbar.prototype.spacing = 4;\n\n/**\n * Variable: connectOnDrop\n * \n * Specifies if elements should be connected if new cells are dropped onto\n * connectable elements. Default is false.\n */\nmxDefaultToolbar.prototype.connectOnDrop = false;\n\n/**\n * Function: init\n * \n * Constructs the <toolbar> for the given container and installs a listener\n * that updates the <mxEditor.insertFunction> on <editor> if an item is\n * selected in the toolbar. This assumes that <editor> is not null.\n *\n * Parameters:\n *\n * container - DOM node that contains the toolbar.\n */\nmxDefaultToolbar.prototype.init = function(container)\n{\n\tif (container != null)\n\t{\n\t\tthis.toolbar = new mxToolbar(container);\n\t\t\n\t\t// Installs the insert function in the editor if an item is\n\t\t// selected in the toolbar\n\t\tthis.toolbar.addListener(mxEvent.SELECT, mxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tvar funct = evt.getProperty('function');\n\t\t\t\n\t\t\tif (funct != null)\n\t\t\t{\n\t\t\t\tthis.editor.insertFunction = mxUtils.bind(this, function()\n\t\t\t\t{\n\t\t\t\t\tfunct.apply(this, arguments);\n\t\t\t\t\tthis.toolbar.resetMode();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.editor.insertFunction = null;\n\t\t\t}\n\t\t}));\n\t\t\n\t\t// Resets the selected tool after a doubleclick or escape keystroke\n\t\tthis.resetHandler = mxUtils.bind(this, function()\n\t\t{\n\t\t\tif (this.toolbar != null)\n\t\t\t{\n\t\t\t\tthis.toolbar.resetMode(true);\n\t\t\t}\n\t\t});\n\n\t\tthis.editor.graph.addListener(mxEvent.DOUBLE_CLICK, this.resetHandler);\n\t\tthis.editor.addListener(mxEvent.ESCAPE, this.resetHandler);\n\t}\n};\n\n/**\n * Function: addItem\n *\n * Adds a new item that executes the given action in <editor>. The title,\n * icon and pressedIcon are used to display the toolbar item.\n * \n * Parameters:\n *\n * title - String that represents the title (tooltip) for the item.\n * icon - URL of the icon to be used for displaying the item.\n * action - Name of the action to execute when the item is clicked.\n * pressed - Optional URL of the icon for the pressed state.\n */\nmxDefaultToolbar.prototype.addItem = function(title, icon, action, pressed)\n{\n\tvar clickHandler = mxUtils.bind(this, function()\n\t{\n\t\tif (action != null && action.length > 0)\n\t\t{\n\t\t\tthis.editor.execute(action);\n\t\t}\n\t});\n\t\n\treturn this.toolbar.addItem(title, icon, clickHandler, pressed);\n};\n\n/**\n * Function: addSeparator\n *\n * Adds a vertical separator using the optional icon.\n * \n * Parameters:\n * \n * icon - Optional URL of the icon that represents the vertical separator.\n * Default is <mxClient.imageBasePath> + '/separator.gif'.\n */\nmxDefaultToolbar.prototype.addSeparator = function(icon)\n{\n\ticon = icon || mxClient.imageBasePath + '/separator.gif';\n\tthis.toolbar.addSeparator(icon);\n};\n\t\n/**\n * Function: addCombo\n *\n * Helper method to invoke <mxToolbar.addCombo> on <toolbar> and return the\n * resulting DOM node.\n */\nmxDefaultToolbar.prototype.addCombo = function()\n{\n\treturn this.toolbar.addCombo();\n};\n\t\t\n/**\n * Function: addActionCombo\n *\n * Helper method to invoke <mxToolbar.addActionCombo> on <toolbar> using\n * the given title and return the resulting DOM node.\n * \n * Parameters:\n * \n * title - String that represents the title of the combo.\n */\nmxDefaultToolbar.prototype.addActionCombo = function(title)\n{\n\treturn this.toolbar.addActionCombo(title);\n};\n\n/**\n * Function: addActionOption\n *\n * Binds the given action to a option with the specified label in the\n * given combo. Combo is an object returned from an earlier call to\n * <addCombo> or <addActionCombo>.\n * \n * Parameters:\n * \n * combo - DOM node that represents the combo box.\n * title - String that represents the title of the combo.\n * action - Name of the action to execute in <editor>.\n */\nmxDefaultToolbar.prototype.addActionOption = function(combo, title, action)\n{\n\tvar clickHandler = mxUtils.bind(this, function()\n\t{\n\t\tthis.editor.execute(action);\n\t});\n\t\n\tthis.addOption(combo, title, clickHandler);\n};\n\n/**\n * Function: addOption\n *\n * Helper method to invoke <mxToolbar.addOption> on <toolbar> and return\n * the resulting DOM node that represents the option.\n * \n * Parameters:\n * \n * combo - DOM node that represents the combo box.\n * title - String that represents the title of the combo.\n * value - Object that represents the value of the option.\n */\nmxDefaultToolbar.prototype.addOption = function(combo, title, value)\n{\n\treturn this.toolbar.addOption(combo, title, value);\n};\n\t\n/**\n * Function: addMode\n *\n * Creates an item for selecting the given mode in the <editor>'s graph.\n * Supported modenames are select, connect and pan.\n * \n * Parameters:\n * \n * title - String that represents the title of the item.\n * icon - URL of the icon that represents the item.\n * mode - String that represents the mode name to be used in\n * <mxEditor.setMode>.\n * pressed - Optional URL of the icon that represents the pressed state.\n * funct - Optional JavaScript function that takes the <mxEditor> as the\n * first and only argument that is executed after the mode has been\n * selected.\n */\nmxDefaultToolbar.prototype.addMode = function(title, icon, mode, pressed, funct)\n{\n\tvar clickHandler = mxUtils.bind(this, function()\n\t{\n\t\tthis.editor.setMode(mode);\n\t\t\n\t\tif (funct != null)\n\t\t{\n\t\t\tfunct(this.editor);\n\t\t}\n\t});\n\t\n\treturn this.toolbar.addSwitchMode(title, icon, clickHandler, pressed);\n};\n\n/**\n * Function: addPrototype\n *\n * Creates an item for inserting a clone of the specified prototype cell into\n * the <editor>'s graph. The ptype may either be a cell or a function that\n * returns a cell.\n * \n * Parameters:\n * \n * title - String that represents the title of the item.\n * icon - URL of the icon that represents the item.\n * ptype - Function or object that represents the prototype cell. If ptype\n * is a function then it is invoked with no arguments to create new\n * instances.\n * pressed - Optional URL of the icon that represents the pressed state.\n * insert - Optional JavaScript function that handles an insert of the new\n * cell. This function takes the <mxEditor>, new cell to be inserted, mouse\n * event and optional <mxCell> under the mouse pointer as arguments.\n * toggle - Optional boolean that specifies if the item can be toggled.\n * Default is true.\n */\nmxDefaultToolbar.prototype.addPrototype = function(title, icon, ptype, pressed, insert, toggle)\n{\n\t// Creates a wrapper function that is in charge of constructing\n\t// the new cell instance to be inserted into the graph\n\tvar factory = mxUtils.bind(this, function()\n\t{\n\t\tif (typeof(ptype) == 'function')\n\t\t{\n\t\t\treturn ptype();\n\t\t}\n\t\telse if (ptype != null)\n\t\t{\n\t\t\treturn this.editor.graph.cloneCell(ptype);\n\t\t}\n\t\t\n\t\treturn null;\n\t});\n\t\n\t// Defines the function for a click event on the graph\n\t// after this item has been selected in the toolbar\n\tvar clickHandler = mxUtils.bind(this, function(evt, cell)\n\t{\n\t\tif (typeof(insert) == 'function')\n\t\t{\n\t\t\tinsert(this.editor, factory(), evt, cell);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.drop(factory(), evt, cell);\n\t\t}\n\t\t\n\t\tthis.toolbar.resetMode();\n\t\tmxEvent.consume(evt);\n\t});\n\t\n\tvar img = this.toolbar.addMode(title, icon, clickHandler, pressed, null, toggle);\n\t\t\t\t\n\t// Creates a wrapper function that calls the click handler without\n\t// the graph argument\n\tvar dropHandler = function(graph, evt, cell)\n\t{\n\t\tclickHandler(evt, cell);\n\t};\n\t\n\tthis.installDropHandler(img, dropHandler);\n\t\n\treturn img;\n};\n\n/**\n * Function: drop\n * \n * Handles a drop from a toolbar item to the graph. The given vertex\n * represents the new cell to be inserted. This invokes <insert> or\n * <connect> depending on the given target cell.\n * \n * Parameters:\n * \n * vertex - <mxCell> to be inserted.\n * evt - Mouse event that represents the drop.\n * target - Optional <mxCell> that represents the drop target.\n */\nmxDefaultToolbar.prototype.drop = function(vertex, evt, target)\n{\n\tvar graph = this.editor.graph;\n\tvar model = graph.getModel();\n\t\n\tif (target == null ||\n\t\tmodel.isEdge(target) ||\n\t\t!this.connectOnDrop ||\n\t\t!graph.isCellConnectable(target))\n\t{\n\t\twhile (target != null &&\n\t\t\t!graph.isValidDropTarget(target, [vertex], evt))\n\t\t{\n\t\t\ttarget = model.getParent(target);\n\t\t}\n\t\t\n\t\tthis.insert(vertex, evt, target);\n\t}\n\telse\n\t{\n\t\tthis.connect(vertex, evt, target);\n\t}\n};\n\n/**\n * Function: insert\n *\n * Handles a drop by inserting the given vertex into the given parent cell\n * or the default parent if no parent is specified.\n * \n * Parameters:\n * \n * vertex - <mxCell> to be inserted.\n * evt - Mouse event that represents the drop.\n * parent - Optional <mxCell> that represents the parent.\n */\nmxDefaultToolbar.prototype.insert = function(vertex, evt, target)\n{\n\tvar graph = this.editor.graph;\n\t\n\tif (graph.canImportCell(vertex))\n\t{\n\t\tvar x = mxEvent.getClientX(evt);\n\t\tvar y = mxEvent.getClientY(evt);\n\t\tvar pt = mxUtils.convertPoint(graph.container, x, y);\n\t\t\n\t\t// Splits the target edge or inserts into target group\n\t\tif (graph.isSplitEnabled() &&\n\t\t\tgraph.isSplitTarget(target, [vertex], evt))\n\t\t{\n\t\t\treturn graph.splitEdge(target, [vertex], null, pt.x, pt.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.editor.addVertex(target, vertex, pt.x, pt.y);\n\t\t}\n\t}\n\t\n\treturn null;\n};\n\n/**\n * Function: connect\n * \n * Handles a drop by connecting the given vertex to the given source cell.\n * \n * vertex - <mxCell> to be inserted.\n * evt - Mouse event that represents the drop.\n * source - Optional <mxCell> that represents the source terminal.\n */\nmxDefaultToolbar.prototype.connect = function(vertex, evt, source)\n{\n\tvar graph = this.editor.graph;\n\tvar model = graph.getModel();\n\t\n\tif (source != null &&\n\t\tgraph.isCellConnectable(vertex) &&\n\t\tgraph.isEdgeValid(null, source, vertex))\n\t{\n\t\tvar edge = null;\n\n\t\tmodel.beginUpdate();\n\t\ttry\n\t\t{\n\t\t\tvar geo = model.getGeometry(source);\n\t\t\tvar g = model.getGeometry(vertex).clone();\n\t\t\t\n\t\t\t// Moves the vertex away from the drop target that will\n\t\t\t// be used as the source for the new connection\n\t\t\tg.x = geo.x + (geo.width - g.width) / 2;\n\t\t\tg.y = geo.y + (geo.height - g.height) / 2;\n\t\t\t\n\t\t\tvar step = this.spacing * graph.gridSize;\n\t\t\tvar dist = model.getDirectedEdgeCount(source, true) * 20;\n\t\t\t\n\t\t\tif (this.editor.horizontalFlow)\n\t\t\t{\n\t\t\t\tg.x += (g.width + geo.width) / 2 + step + dist;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tg.y += (g.height + geo.height) / 2 + step + dist;\n\t\t\t}\n\t\t\t\n\t\t\tvertex.setGeometry(g);\n\t\t\t\n\t\t\t// Fires two add-events with the code below - should be fixed\n\t\t\t// to only fire one add event for both inserts\n\t\t\tvar parent = model.getParent(source);\n\t\t\tgraph.addCell(vertex, parent);\n\t\t\tgraph.constrainChild(vertex);\n\n\t\t\t// Creates the edge using the editor instance and calls\n\t\t\t// the second function that fires an add event\n\t\t\tedge = this.editor.createEdge(source, vertex);\n\t\t\t\n\t\t\tif (model.getGeometry(edge) == null)\n\t\t\t{\n\t\t\t\tvar edgeGeometry = new mxGeometry();\n\t\t\t\tedgeGeometry.relative = true;\n\t\t\t\t\n\t\t\t\tmodel.setGeometry(edge, edgeGeometry);\n\t\t\t}\n\t\t\t\n\t\t\tgraph.addEdge(edge, parent, source, vertex);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tmodel.endUpdate();\n\t\t}\n\t\t\n\t\tgraph.setSelectionCells([vertex, edge]);\n\t\tgraph.scrollCellToVisible(vertex);\n\t}\n};\n\n/**\n * Function: installDropHandler\n * \n * Makes the given img draggable using the given function for handling a\n * drop event.\n * \n * Parameters:\n * \n * img - DOM node that represents the image.\n * dropHandler - Function that handles a drop of the image.\n */\nmxDefaultToolbar.prototype.installDropHandler = function (img, dropHandler)\n{\n\tvar sprite = document.createElement('img');\n\tsprite.setAttribute('src', img.getAttribute('src'));\n\n\t// Handles delayed loading of the images\n\tvar loader = mxUtils.bind(this, function(evt)\n\t{\n\t\t// Preview uses the image node with double size. Later this can be\n\t\t// changed to use a separate preview and guides, but for this the\n\t\t// dropHandler must use the additional x- and y-arguments and the\n\t\t// dragsource which makeDraggable returns much be configured to\n\t\t// use guides via mxDragSource.isGuidesEnabled.\n\t\tsprite.style.width = (2 * img.offsetWidth) + 'px';\n\t\tsprite.style.height = (2 * img.offsetHeight) + 'px';\n\n\t\tmxUtils.makeDraggable(img, this.editor.graph, dropHandler,\n\t\t\tsprite);\n\t\tmxEvent.removeListener(sprite, 'load', loader);\n\t});\n\n\tif (mxClient.IS_IE)\n\t{\n\t\tloader();\n\t}\n\telse\n\t{\n\t\tmxEvent.addListener(sprite, 'load', loader);\n\t}\t\n};\n\n/**\n * Function: destroy\n * \n * Destroys the <toolbar> associated with this object and removes all\n * installed listeners. This does normally not need to be called, the\n * <toolbar> is destroyed automatically when the window unloads (in IE) by\n * <mxEditor>.\n */\nmxDefaultToolbar.prototype.destroy = function ()\n{\n\tif (this.resetHandler != null)\n\t{\n\t\tthis.editor.graph.removeListener('dblclick', this.resetHandler);\n\t\tthis.editor.removeListener('escape', this.resetHandler);\n\t\tthis.resetHandler = null;\n\t}\n\t\n\tif (this.toolbar != null)\n\t{\n\t\tthis.toolbar.destroy();\n\t\tthis.toolbar = null;\n\t}\n};\n\n__mxOutput.mxDefaultToolbar = typeof mxDefaultToolbar !== 'undefined' ? mxDefaultToolbar : undefined;\n\n/**\n * Copyright (c) 2006-2019, JGraph Ltd\n * Copyright (c) 2006-2019, draw.io AG\n */\n/**\n * Class: mxEditor\n *\n * Extends <mxEventSource> to implement an application wrapper for a graph that\n * adds <actions>, I/O using <mxCodec>, auto-layout using <mxLayoutManager>,\n * command history using <undoManager>, and standard dialogs and widgets, eg.\n * properties, help, outline, toolbar, and popupmenu. It also adds <templates>\n * to be used as cells in toolbars, auto-validation using the <validation>\n * flag, attribute cycling using <cycleAttributeValues>, higher-level events\n * such as <root>, and backend integration using <urlPost> and <urlImage>.\n *\n * Actions:\n *\n * Actions are functions stored in the <actions> array under their names. The\n * functions take the <mxEditor> as the first, and an optional <mxCell> as the\n * second argument and are invoked using <execute>. Any additional arguments\n * passed to execute are passed on to the action as-is.\n *\n * A list of built-in actions is available in the <addActions> description.\n *\n * Read/write Diagrams:\n *\n * To read a diagram from an XML string, for example from a textfield within the\n * page, the following code is used:\n *\n * (code)\n * var doc = mxUtils.parseXML(xmlString);\n * var node = doc.documentElement;\n * editor.readGraphModel(node);\n * (end)\n *\n * For reading a diagram from a remote location, use the <open> method.\n *\n * To save diagrams in XML on a server, you can set the <urlPost> variable.\n * This variable will be used in <getUrlPost> to construct a URL for the post\n * request that is issued in the <save> method. The post request contains the\n * XML representation of the diagram as returned by <writeGraphModel> in the\n * xml parameter.\n *\n * On the server side, the post request is processed using standard\n * technologies such as Java Servlets, CGI, .NET or ASP.\n *\n * Here are some examples of processing a post request in various languages.\n *\n * - Java: URLDecoder.decode(request.getParameter(\"xml\"), \"UTF-8\").replace(\"\\n\", \"&#xa;\")\n *\n * Note that the linefeeds should only be replaced if the XML is\n * processed in Java, for example when creating an image, but not\n * if the XML is passed back to the client-side.\n *\n * - .NET: HttpUtility.UrlDecode(context.Request.Params[\"xml\"])\n * - PHP: urldecode($_POST[\"xml\"])\n *\n * Creating images:\n *\n * A backend (Java, PHP or C#) is required for creating images. The\n * distribution contains an example for each backend (ImageHandler.java,\n * ImageHandler.cs and graph.php). More information about using a backend\n * to create images can be found in the readme.html files. Note that the\n * preview is implemented using VML/SVG in the browser and does not require\n * a backend. The backend is only required to creates images (bitmaps).\n *\n * Special characters:\n *\n * Note There are five characters that should always appear in XML content as\n * escapes, so that they do not interact with the syntax of the markup. These\n * are part of the language for all documents based on XML and for HTML.\n *\n * - &lt; (<)\n * - &gt; (>)\n * - &amp; (&)\n * - &quot; (\")\n * - &apos; (')\n *\n * Although it is part of the XML language, &apos; is not defined in HTML.\n * For this reason the XHTML specification recommends instead the use of\n * &#39; if text may be passed to a HTML user agent.\n *\n * If you are having problems with special characters on the server-side then\n * you may want to try the <escapePostData> flag.\n *\n * For converting decimal escape sequences inside strings, a user has provided\n * us with the following function:\n *\n * (code)\n * function html2js(text)\n * {\n *   var entitySearch = /&#[0-9]+;/;\n *   var entity;\n *\n *   while (entity = entitySearch.exec(text))\n *   {\n *     var charCode = entity[0].substring(2, entity[0].length -1);\n *     text = text.substring(0, entity.index)\n *            + String.fromCharCode(charCode)\n *            + text.substring(entity.index + entity[0].length);\n *   }\n *\n *   return text;\n * }\n * (end)\n *\n * Otherwise try using hex escape sequences and the built-in unescape function\n * for converting such strings.\n *\n * Local Files:\n *\n * For saving and opening local files, no standardized method exists that\n * works across all browsers. The recommended way of dealing with local files\n * is to create a backend that streams the XML data back to the browser (echo)\n * as an attachment so that a Save-dialog is displayed on the client-side and\n * the file can be saved to the local disk.\n *\n * For example, in PHP the code that does this looks as follows.\n *\n * (code)\n * $xml = stripslashes($_POST[\"xml\"]);\n * header(\"Content-Disposition: attachment; filename=\\\"diagram.xml\\\"\");\n * echo($xml);\n * (end)\n *\n * To open a local file, the file should be uploaded via a form in the browser\n * and then opened from the server in the editor.\n *\n * Cell Properties:\n *\n * The properties displayed in the properties dialog are the attributes and\n * values of the cell's user object, which is an XML node. The XML node is\n * defined in the templates section of the config file.\n *\n * The templates are stored in <mxEditor.templates> and contain cells which\n * are cloned at insertion time to create new vertices by use of drag and\n * drop from the toolbar. Each entry in the toolbar for adding a new vertex\n * must refer to an existing template.\n *\n * In the following example, the task node is a business object and only the\n * mxCell node and its mxGeometry child contain graph information:\n *\n * (code)\n * <Task label=\"Task\" description=\"\">\n *   <mxCell vertex=\"true\">\n *     <mxGeometry as=\"geometry\" width=\"72\" height=\"32\"/>\n *   </mxCell>\n * </Task>\n * (end)\n *\n * The idea is that the XML representation is inverse from the in-memory\n * representation: The outer XML node is the user object and the inner node is\n * the cell. This means the user object of the cell is the Task node with no\n * children for the above example:\n *\n * (code)\n * <Task label=\"Task\" description=\"\"/>\n * (end)\n *\n * The Task node can have any tag name, attributes and child nodes. The\n * <mxCodec> will use the XML hierarchy as the user object, while removing the\n * \"known annotations\", such as the mxCell node. At save-time the cell data\n * will be \"merged\" back into the user object. The user object is only modified\n * via the properties dialog during the lifecycle of the cell.\n *\n * In the default implementation of <createProperties>, the user object's\n * attributes are put into a form for editing. Attributes are changed using\n * the <mxCellAttributeChange> action in the model. The dialog can be replaced\n * by overriding the <createProperties> hook or by replacing the showProperties\n * action in <actions>. Alternatively, the entry in the config file's popupmenu\n * section can be modified to invoke a different action.\n *\n * If you want to displey the properties dialog on a doubleclick, you can set\n * <mxEditor.dblClickAction> to showProperties as follows:\n *\n * (code)\n * editor.dblClickAction = 'showProperties';\n * (end)\n *\n * Popupmenu and Toolbar:\n *\n * The toolbar and popupmenu are typically configured using the respective\n * sections in the config file, that is, the popupmenu is defined as follows:\n *\n * (code)\n * <mxEditor>\n *   <mxDefaultPopupMenu as=\"popupHandler\">\n * \t\t<add as=\"cut\" action=\"cut\" icon=\"images/cut.gif\"/>\n *      ...\n * (end)\n *\n * New entries can be added to the toolbar by inserting an add-node into the\n * above configuration. Existing entries may be removed and changed by\n * modifying or removing the respective entries in the configuration.\n * The configuration is read by the <mxDefaultPopupMenuCodec>, the format of the\n * configuration is explained in <mxDefaultPopupMenu.decode>.\n *\n * The toolbar is defined in the mxDefaultToolbar section. Items can be added\n * and removed in this section.\n *\n * (code)\n * <mxEditor>\n *   <mxDefaultToolbar>\n *     <add as=\"save\" action=\"save\" icon=\"images/save.gif\"/>\n *     <add as=\"Swimlane\" template=\"swimlane\" icon=\"images/swimlane.gif\"/>\n *     ...\n * (end)\n *\n * The format of the configuration is described in\n * <mxDefaultToolbarCodec.decode>.\n *\n * Ids:\n *\n * For the IDs, there is an implicit behaviour in <mxCodec>: It moves the Id\n * from the cell to the user object at encoding time and vice versa at decoding\n * time. For example, if the Task node from above has an id attribute, then\n * the <mxCell.id> of the corresponding cell will have this value. If there\n * is no Id collision in the model, then the cell may be retrieved using this\n * Id with the <mxGraphModel.getCell> function. If there is a collision, a new\n * Id will be created for the cell using <mxGraphModel.createId>. At encoding\n * time, this new Id will replace the value previously stored under the id\n * attribute in the Task node.\n *\n * See <mxEditorCodec>, <mxDefaultToolbarCodec> and <mxDefaultPopupMenuCodec>\n * for information about configuring the editor and user interface.\n *\n * Programmatically inserting cells:\n *\n * For inserting a new cell, say, by clicking a button in the document,\n * the following code can be used. This requires an reference to the editor.\n *\n * (code)\n * var userObject = new Object();\n * var parent = editor.graph.getDefaultParent();\n * var model = editor.graph.model;\n * model.beginUpdate();\n * try\n * {\n *   editor.graph.insertVertex(parent, null, userObject, 20, 20, 80, 30);\n * }\n * finally\n * {\n *   model.endUpdate();\n * }\n * (end)\n *\n * If a template cell from the config file should be inserted, then a clone\n * of the template can be created as follows. The clone is then inserted using\n * the add function instead of addVertex.\n *\n * (code)\n * var template = editor.templates['task'];\n * var clone = editor.graph.model.cloneCell(template);\n * (end)\n *\n * Resources:\n *\n * resources/editor - Language resources for mxEditor\n *\n * Callback: onInit\n *\n * Called from within the constructor. In the callback,\n * \"this\" refers to the editor instance.\n *\n * Cookie: mxgraph=seen\n *\n * Set when the editor is started. Never expires. Use\n * <resetFirstTime> to reset this cookie. This cookie\n * only exists if <onInit> is implemented.\n *\n * Event: mxEvent.OPEN\n *\n * Fires after a file was opened in <open>. The <code>filename</code> property\n * contains the filename that was used. The same value is also available in\n * <filename>.\n *\n * Event: mxEvent.SAVE\n *\n * Fires after the current file was saved in <save>. The <code>url</code>\n * property contains the URL that was used for saving.\n *\n * Event: mxEvent.POST\n *\n * Fires if a successful response was received in <postDiagram>. The\n * <code>request</code> property contains the <mxXmlRequest>, the\n * <code>url</code> and <code>data</code> properties contain the URL and the\n * data that were used in the post request.\n *\n * Event: mxEvent.ROOT\n *\n * Fires when the current root has changed, or when the title of the current\n * root has changed. This event has no properties.\n *\n * Event: mxEvent.BEFORE_ADD_VERTEX\n *\n * Fires before a vertex is added in <addVertex>. The <code>vertex</code>\n * property contains the new vertex and the <code>parent</code> property\n * contains its parent.\n *\n * Event: mxEvent.ADD_VERTEX\n *\n * Fires between begin- and endUpdate in <addVertex>. The <code>vertex</code>\n * property contains the vertex that is being inserted.\n *\n * Event: mxEvent.AFTER_ADD_VERTEX\n *\n * Fires after a vertex was inserted and selected in <addVertex>. The\n * <code>vertex</code> property contains the new vertex.\n *\n * Example:\n *\n * For starting an in-place edit after a new vertex has been added to the\n * graph, the following code can be used.\n *\n * (code)\n * editor.addListener(mxEvent.AFTER_ADD_VERTEX, function(sender, evt)\n * {\n *   var vertex = evt.getProperty('vertex');\n *\n *   if (editor.graph.isCellEditable(vertex))\n *   {\n *   \teditor.graph.startEditingAtCell(vertex);\n *   }\n * });\n * (end)\n *\n * Event: mxEvent.ESCAPE\n *\n * Fires when the escape key is pressed. The <code>event</code> property\n * contains the key event.\n *\n * Constructor: mxEditor\n *\n * Constructs a new editor. This function invokes the <onInit> callback\n * upon completion.\n *\n * Example:\n *\n * (code)\n * var config = mxUtils.load('config/diagrameditor.xml').getDocumentElement();\n * var editor = new mxEditor(config);\n * (end)\n *\n * Parameters:\n *\n * config - Optional XML node that contains the configuration.\n */\nfunction mxEditor(config)\n{\n\tthis.actions = [];\n\tthis.addActions();\n\n\t// Executes the following only if a document has been instanciated.\n\t// That is, don't execute when the editorcodec is setup.\n\tif (document.body != null)\n\t{\n\t\t// Defines instance fields\n\t\tthis.cycleAttributeValues = [];\n\t\tthis.popupHandler = new mxDefaultPopupMenu();\n\t\tthis.undoManager = new mxUndoManager();\n\n\t\t// Creates the graph and toolbar without the containers\n\t\tthis.graph = this.createGraph();\n\t\tthis.toolbar = this.createToolbar();\n\n\t\t// Creates the global keyhandler (requires graph instance)\n\t\tthis.keyHandler = new mxDefaultKeyHandler(this);\n\n\t\t// Configures the editor using the URI\n\t\t// which was passed to the ctor\n\t\tthis.configure(config);\n\n\t\t// Assigns the swimlaneIndicatorColorAttribute on the graph\n\t\tthis.graph.swimlaneIndicatorColorAttribute = this.cycleAttributeName;\n\n\t\t// Checks if the <onInit> hook has been set\n\t\tif (this.onInit != null)\n\t\t{\n\t\t\t// Invokes the <onInit> hook\n\t\t\tthis.onInit();\n\t\t}\n\n\t\t// Automatic deallocation of memory\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\tmxEvent.addListener(window, 'unload', mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tthis.destroy();\n\t\t\t}));\n\t\t}\n\t}\n};\n\n/**\n * Installs the required language resources at class\n * loading time.\n */\nif (mxLoadResources)\n{\n\tmxResources.add(mxClient.basePath + '/resources/editor');\n}\nelse\n{\n\tmxClient.defaultBundles.push(mxClient.basePath + '/resources/editor');\n}\n\n/**\n * Extends mxEventSource.\n */\nmxEditor.prototype = new mxEventSource();\nmxEditor.prototype.constructor = mxEditor;\n\n/**\n * Group: Controls and Handlers\n */\n\n/**\n * Variable: askZoomResource\n *\n * Specifies the resource key for the zoom dialog. If the resource for this\n * key does not exist then the value is used as the error message. Default\n * is 'askZoom'.\n */\nmxEditor.prototype.askZoomResource = (mxClient.language != 'none') ? 'askZoom' : '';\n\n/**\n * Variable: lastSavedResource\n *\n * Specifies the resource key for the last saved info. If the resource for\n * this key does not exist then the value is used as the error message.\n * Default is 'lastSaved'.\n */\nmxEditor.prototype.lastSavedResource = (mxClient.language != 'none') ? 'lastSaved' : '';\n\n/**\n * Variable: currentFileResource\n *\n * Specifies the resource key for the current file info. If the resource for\n * this key does not exist then the value is used as the error message.\n * Default is 'currentFile'.\n */\nmxEditor.prototype.currentFileResource = (mxClient.language != 'none') ? 'currentFile' : '';\n\n/**\n * Variable: propertiesResource\n *\n * Specifies the resource key for the properties window title. If the\n * resource for this key does not exist then the value is used as the\n * error message. Default is 'properties'.\n */\nmxEditor.prototype.propertiesResource = (mxClient.language != 'none') ? 'properties' : '';\n\n/**\n * Variable: tasksResource\n *\n * Specifies the resource key for the tasks window title. If the\n * resource for this key does not exist then the value is used as the\n * error message. Default is 'tasks'.\n */\nmxEditor.prototype.tasksResource = (mxClient.language != 'none') ? 'tasks' : '';\n\n/**\n * Variable: helpResource\n *\n * Specifies the resource key for the help window title. If the\n * resource for this key does not exist then the value is used as the\n * error message. Default is 'help'.\n */\nmxEditor.prototype.helpResource = (mxClient.language != 'none') ? 'help' : '';\n\n/**\n * Variable: outlineResource\n *\n * Specifies the resource key for the outline window title. If the\n * resource for this key does not exist then the value is used as the\n * error message. Default is 'outline'.\n */\nmxEditor.prototype.outlineResource = (mxClient.language != 'none') ? 'outline' : '';\n\n/**\n * Variable: outline\n *\n * Reference to the <mxWindow> that contains the outline. The <mxOutline>\n * is stored in outline.outline.\n */\nmxEditor.prototype.outline = null;\n\n/**\n * Variable: graph\n *\n * Holds a <mxGraph> for displaying the diagram. The graph\n * is created in <setGraphContainer>.\n */\nmxEditor.prototype.graph = null;\n\n/**\n * Variable: graphRenderHint\n *\n * Holds the render hint used for creating the\n * graph in <setGraphContainer>. See <mxGraph>.\n * Default is null.\n */\nmxEditor.prototype.graphRenderHint = null;\n\n/**\n * Variable: toolbar\n *\n * Holds a <mxDefaultToolbar> for displaying the toolbar. The\n * toolbar is created in <setToolbarContainer>.\n */\nmxEditor.prototype.toolbar = null;\n\n/**\n * Variable: status\n *\n * DOM container that holds the statusbar. Default is null.\n * Use <setStatusContainer> to set this value.\n */\nmxEditor.prototype.status = null;\n\n/**\n * Variable: popupHandler\n *\n * Holds a <mxDefaultPopupMenu> for displaying\n * popupmenus.\n */\nmxEditor.prototype.popupHandler = null;\n\n/**\n * Variable: undoManager\n *\n * Holds an <mxUndoManager> for the command history.\n */\nmxEditor.prototype.undoManager = null;\n\n/**\n * Variable: keyHandler\n *\n * Holds a <mxDefaultKeyHandler> for handling keyboard events.\n * The handler is created in <setGraphContainer>.\n */\nmxEditor.prototype.keyHandler = null;\n\n/**\n * Group: Actions and Options\n */\n\n/**\n * Variable: actions\n *\n * Maps from actionnames to actions, which are functions taking\n * the editor and the cell as arguments. Use <addAction>\n * to add or replace an action and <execute> to execute an action\n * by name, passing the cell to be operated upon as the second\n * argument.\n */\nmxEditor.prototype.actions = null;\n\n/**\n * Variable: dblClickAction\n *\n * Specifies the name of the action to be executed\n * when a cell is double clicked. Default is 'edit'.\n *\n * To handle a singleclick, use the following code.\n *\n * (code)\n * editor.graph.addListener(mxEvent.CLICK, function(sender, evt)\n * {\n *   var e = evt.getProperty('event');\n *   var cell = evt.getProperty('cell');\n *\n *   if (cell != null && !e.isConsumed())\n *   {\n *     // Do something useful with cell...\n *     e.consume();\n *   }\n * });\n * (end)\n */\nmxEditor.prototype.dblClickAction = 'edit';\n\n/**\n * Variable: swimlaneRequired\n *\n * Specifies if new cells must be inserted\n * into an existing swimlane. Otherwise, cells\n * that are not swimlanes can be inserted as\n * top-level cells. Default is false.\n */\nmxEditor.prototype.swimlaneRequired = false;\n\n/**\n * Variable: disableContextMenu\n *\n * Specifies if the context menu should be disabled in the graph container.\n * Default is true.\n */\nmxEditor.prototype.disableContextMenu = true;\n\n/**\n * Group: Templates\n */\n\n/**\n * Variable: insertFunction\n *\n * Specifies the function to be used for inserting new\n * cells into the graph. This is assigned from the\n * <mxDefaultToolbar> if a vertex-tool is clicked.\n */\nmxEditor.prototype.insertFunction = null;\n\n/**\n * Variable: forcedInserting\n *\n * Specifies if a new cell should be inserted on a single\n * click even using <insertFunction> if there is a cell\n * under the mousepointer, otherwise the cell under the\n * mousepointer is selected. Default is false.\n */\nmxEditor.prototype.forcedInserting = false;\n\n/**\n * Variable: templates\n *\n * Maps from names to protoype cells to be used\n * in the toolbar for inserting new cells into\n * the diagram.\n */\nmxEditor.prototype.templates = null;\n\n/**\n * Variable: defaultEdge\n *\n * Prototype edge cell that is used for creating\n * new edges.\n */\nmxEditor.prototype.defaultEdge = null;\n\n/**\n * Variable: defaultEdgeStyle\n *\n * Specifies the edge style to be returned in <getEdgeStyle>.\n * Default is null.\n */\nmxEditor.prototype.defaultEdgeStyle = null;\n\n/**\n * Variable: defaultGroup\n *\n * Prototype group cell that is used for creating\n * new groups.\n */\nmxEditor.prototype.defaultGroup = null;\n\n/**\n * Variable: groupBorderSize\n *\n * Default size for the border of new groups. If null,\n * then then <mxGraph.gridSize> is used. Default is\n * null.\n */\nmxEditor.prototype.groupBorderSize = null;\n\n/**\n * Group: Backend Integration\n */\n\n/**\n * Variable: filename\n *\n * Contains the URL of the last opened file as a string.\n * Default is null.\n */\nmxEditor.prototype.filename = null;\n\n/**\n * Variable: lineFeed\n *\n * Character to be used for encoding linefeeds in <save>. Default is '&#xa;'.\n */\nmxEditor.prototype.linefeed = '&#xa;';\n\n/**\n * Variable: postParameterName\n *\n * Specifies if the name of the post parameter that contains the diagram\n * data in a post request to the server. Default is 'xml'.\n */\nmxEditor.prototype.postParameterName = 'xml';\n\n/**\n * Variable: escapePostData\n *\n * Specifies if the data in the post request for saving a diagram\n * should be converted using encodeURIComponent. Default is true.\n */\nmxEditor.prototype.escapePostData = true;\n\n/**\n * Variable: urlPost\n *\n * Specifies the URL to be used for posting the diagram\n * to a backend in <save>.\n */\nmxEditor.prototype.urlPost = null;\n\n/**\n * Variable: urlImage\n *\n * Specifies the URL to be used for creating a bitmap of\n * the graph in the image action.\n */\nmxEditor.prototype.urlImage = null;\n\n/**\n * Group: Autolayout\n */\n\n/**\n * Variable: horizontalFlow\n *\n * Specifies the direction of the flow\n * in the diagram. This is used in the\n * layout algorithms. Default is false,\n * ie. vertical flow.\n */\nmxEditor.prototype.horizontalFlow = false;\n\n/**\n * Variable: layoutDiagram\n *\n * Specifies if the top-level elements in the\n * diagram should be layed out using a vertical\n * or horizontal stack depending on the setting\n * of <horizontalFlow>. The spacing between the\n * swimlanes is specified by <swimlaneSpacing>.\n * Default is false.\n *\n * If the top-level elements are swimlanes, then\n * the intra-swimlane layout is activated by\n * the <layoutSwimlanes> switch.\n */\nmxEditor.prototype.layoutDiagram = false;\n\n/**\n * Variable: swimlaneSpacing\n *\n * Specifies the spacing between swimlanes if\n * automatic layout is turned on in\n * <layoutDiagram>. Default is 0.\n */\nmxEditor.prototype.swimlaneSpacing = 0;\n\n/**\n * Variable: maintainSwimlanes\n *\n * Specifies if the swimlanes should be kept at the same\n * width or height depending on the setting of\n * <horizontalFlow>.  Default is false.\n *\n * For horizontal flows, all swimlanes\n * have the same height and for vertical flows, all swimlanes\n * have the same width. Furthermore, the swimlanes are\n * automatically \"stacked\" if <layoutDiagram> is true.\n */\nmxEditor.prototype.maintainSwimlanes = false;\n\n/**\n * Variable: layoutSwimlanes\n *\n * Specifies if the children of swimlanes should\n * be layed out, either vertically or horizontally\n * depending on <horizontalFlow>.\n * Default is false.\n */\nmxEditor.prototype.layoutSwimlanes = false;\n\n/**\n * Group: Attribute Cycling\n */\n\n/**\n * Variable: cycleAttributeValues\n *\n * Specifies the attribute values to be cycled when\n * inserting new swimlanes. Default is an empty\n * array.\n */\nmxEditor.prototype.cycleAttributeValues = null;\n\n/**\n * Variable: cycleAttributeIndex\n *\n * Index of the last consumed attribute index. If a new\n * swimlane is inserted, then the <cycleAttributeValues>\n * at this index will be used as the value for\n * <cycleAttributeName>. Default is 0.\n */\nmxEditor.prototype.cycleAttributeIndex = 0;\n\n/**\n * Variable: cycleAttributeName\n *\n * Name of the attribute to be assigned a <cycleAttributeValues>\n * when inserting new swimlanes. Default is 'fillColor'.\n */\nmxEditor.prototype.cycleAttributeName = 'fillColor';\n\n/**\n * Group: Windows\n */\n\n/**\n * Variable: tasks\n *\n * Holds the <mxWindow> created in <showTasks>.\n */\nmxEditor.prototype.tasks = null;\n\n/**\n * Variable: tasksWindowImage\n *\n * Icon for the tasks window.\n */\nmxEditor.prototype.tasksWindowImage = null;\n\n/**\n * Variable: tasksTop\n *\n * Specifies the top coordinate of the tasks window in pixels.\n * Default is 20.\n */\nmxEditor.prototype.tasksTop = 20;\n\n/**\n * Variable: help\n *\n * Holds the <mxWindow> created in <showHelp>.\n */\nmxEditor.prototype.help = null;\n\n/**\n * Variable: helpWindowImage\n *\n * Icon for the help window.\n */\nmxEditor.prototype.helpWindowImage = null;\n\n/**\n * Variable: urlHelp\n *\n * Specifies the URL to be used for the contents of the\n * Online Help window. This is usually specified in the\n * resources file under urlHelp for language-specific\n * online help support.\n */\nmxEditor.prototype.urlHelp = null;\n\n/**\n * Variable: helpWidth\n *\n * Specifies the width of the help window in pixels.\n * Default is 300.\n */\nmxEditor.prototype.helpWidth = 300;\n\n/**\n * Variable: helpHeight\n *\n * Specifies the height of the help window in pixels.\n * Default is 260.\n */\nmxEditor.prototype.helpHeight = 260;\n\n/**\n * Variable: propertiesWidth\n *\n * Specifies the width of the properties window in pixels.\n * Default is 240.\n */\nmxEditor.prototype.propertiesWidth = 240;\n\n/**\n * Variable: propertiesHeight\n *\n * Specifies the height of the properties window in pixels.\n * If no height is specified then the window will be automatically\n * sized to fit its contents. Default is null.\n */\nmxEditor.prototype.propertiesHeight = null;\n\n/**\n * Variable: movePropertiesDialog\n *\n * Specifies if the properties dialog should be automatically\n * moved near the cell it is displayed for, otherwise the\n * dialog is not moved. This value is only taken into\n * account if the dialog is already visible. Default is false.\n */\nmxEditor.prototype.movePropertiesDialog = false;\n\n/**\n * Variable: validating\n *\n * Specifies if <mxGraph.validateGraph> should automatically be invoked after\n * each change. Default is false.\n */\nmxEditor.prototype.validating = false;\n\n/**\n * Variable: modified\n *\n * True if the graph has been modified since it was last saved.\n */\nmxEditor.prototype.modified = false;\n\n/**\n * Function: isModified\n *\n * Returns <modified>.\n */\nmxEditor.prototype.isModified = function ()\n{\n\treturn this.modified;\n};\n\n/**\n * Function: setModified\n *\n * Sets <modified> to the specified boolean value.\n */\nmxEditor.prototype.setModified = function (value)\n{\n\tthis.modified = value;\n};\n\n/**\n * Function: addActions\n *\n * Adds the built-in actions to the editor instance.\n *\n * save - Saves the graph using <urlPost>.\n * print - Shows the graph in a new print preview window.\n * show - Shows the graph in a new window.\n * exportImage - Shows the graph as a bitmap image using <getUrlImage>.\n * refresh - Refreshes the graph's display.\n * cut - Copies the current selection into the clipboard\n * and removes it from the graph.\n * copy - Copies the current selection into the clipboard.\n * paste - Pastes the clipboard into the graph.\n * delete - Removes the current selection from the graph.\n * group - Puts the current selection into a new group.\n * ungroup - Removes the selected groups and selects the children.\n * undo - Undoes the last change on the graph model.\n * redo - Redoes the last change on the graph model.\n * zoom - Sets the zoom via a dialog.\n * zoomIn - Zooms into the graph.\n * zoomOut - Zooms out of the graph\n * actualSize - Resets the scale and translation on the graph.\n * fit - Changes the scale so that the graph fits into the window.\n * showProperties - Shows the properties dialog.\n * selectAll - Selects all cells.\n * selectNone - Clears the selection.\n * selectVertices - Selects all vertices.\n * selectEdges = Selects all edges.\n * edit - Starts editing the current selection cell.\n * enterGroup - Drills down into the current selection cell.\n * exitGroup - Moves up in the drilling hierachy\n * home - Moves to the topmost parent in the drilling hierarchy\n * selectPrevious - Selects the previous cell.\n * selectNext - Selects the next cell.\n * selectParent - Selects the parent of the selection cell.\n * selectChild - Selects the first child of the selection cell.\n * collapse - Collapses the currently selected cells.\n * expand - Expands the currently selected cells.\n * bold - Toggle bold text style.\n * italic - Toggle italic text style.\n * underline - Toggle underline text style.\n * alignCellsLeft - Aligns the selection cells at the left.\n * alignCellsCenter - Aligns the selection cells in the center.\n * alignCellsRight - Aligns the selection cells at the right.\n * alignCellsTop - Aligns the selection cells at the top.\n * alignCellsMiddle - Aligns the selection cells in the middle.\n * alignCellsBottom - Aligns the selection cells at the bottom.\n * alignFontLeft - Sets the horizontal text alignment to left.\n * alignFontCenter - Sets the horizontal text alignment to center.\n * alignFontRight - Sets the horizontal text alignment to right.\n * alignFontTop - Sets the vertical text alignment to top.\n * alignFontMiddle - Sets the vertical text alignment to middle.\n * alignFontBottom - Sets the vertical text alignment to bottom.\n * toggleTasks - Shows or hides the tasks window.\n * toggleHelp - Shows or hides the help window.\n * toggleOutline - Shows or hides the outline window.\n * toggleConsole - Shows or hides the console window.\n */\nmxEditor.prototype.addActions = function ()\n{\n\tthis.addAction('save', function(editor)\n\t{\n\t\teditor.save();\n\t});\n\n\tthis.addAction('print', function(editor)\n\t{\n\t\tvar preview = new mxPrintPreview(editor.graph, 1);\n\t\tpreview.open();\n\t});\n\n\tthis.addAction('show', function(editor)\n\t{\n\t\tmxUtils.show(editor.graph, null, 10, 10);\n\t});\n\n\tthis.addAction('exportImage', function(editor)\n\t{\n\t\tvar url = editor.getUrlImage();\n\n\t\tif (url == null || mxClient.IS_LOCAL)\n\t\t{\n\t\t\teditor.execute('show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar node = mxUtils.getViewXml(editor.graph, 1);\n\t\t\tvar xml = mxUtils.getXml(node, '\\n');\n\n\t\t\tmxUtils.submit(url, editor.postParameterName + '=' +\n\t\t\t\tencodeURIComponent(xml), document, '_blank');\n\t\t}\n\t});\n\n\tthis.addAction('refresh', function(editor)\n\t{\n\t\teditor.graph.refresh();\n\t});\n\n\tthis.addAction('cut', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\tmxClipboard.cut(editor.graph);\n\t\t}\n\t});\n\n\tthis.addAction('copy', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\tmxClipboard.copy(editor.graph);\n\t\t}\n\t});\n\n\tthis.addAction('paste', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\tmxClipboard.paste(editor.graph);\n\t\t}\n\t});\n\n\tthis.addAction('delete', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.removeCells();\n\t\t}\n\t});\n\n\tthis.addAction('group', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.setSelectionCell(editor.groupCells());\n\t\t}\n\t});\n\n\tthis.addAction('ungroup', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.setSelectionCells(editor.graph.ungroupCells());\n\t\t}\n\t});\n\n\tthis.addAction('removeFromParent', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.removeCellsFromParent();\n\t\t}\n\t});\n\n\tthis.addAction('undo', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.undo();\n\t\t}\n\t});\n\n\tthis.addAction('redo', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.redo();\n\t\t}\n\t});\n\n\tthis.addAction('zoomIn', function(editor)\n\t{\n\t\teditor.graph.zoomIn();\n\t});\n\n\tthis.addAction('zoomOut', function(editor)\n\t{\n\t\teditor.graph.zoomOut();\n\t});\n\n\tthis.addAction('actualSize', function(editor)\n\t{\n\t\teditor.graph.zoomActual();\n\t});\n\n\tthis.addAction('fit', function(editor)\n\t{\n\t\teditor.graph.fit();\n\t});\n\n\tthis.addAction('showProperties', function(editor, cell)\n\t{\n\t\teditor.showProperties(cell);\n\t});\n\n\tthis.addAction('selectAll', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.selectAll();\n\t\t}\n\t});\n\n\tthis.addAction('selectNone', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.clearSelection();\n\t\t}\n\t});\n\n\tthis.addAction('selectVertices', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.selectVertices();\n\t\t}\n\t});\n\n\tthis.addAction('selectEdges', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.selectEdges();\n\t\t}\n\t});\n\n\tthis.addAction('edit', function(editor, cell)\n\t{\n\t\tif (editor.graph.isEnabled() &&\n\t\t\teditor.graph.isCellEditable(cell))\n\t\t{\n\t\t\teditor.graph.startEditingAtCell(cell);\n\t\t}\n\t});\n\n\tthis.addAction('toBack', function(editor, cell)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.orderCells(true);\n\t\t}\n\t});\n\n\tthis.addAction('toFront', function(editor, cell)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.orderCells(false);\n\t\t}\n\t});\n\n\tthis.addAction('enterGroup', function(editor, cell)\n\t{\n\t\teditor.graph.enterGroup(cell);\n\t});\n\n\tthis.addAction('exitGroup', function(editor)\n\t{\n\t\teditor.graph.exitGroup();\n\t});\n\n\tthis.addAction('home', function(editor)\n\t{\n\t\teditor.graph.home();\n\t});\n\n\tthis.addAction('selectPrevious', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.selectPreviousCell();\n\t\t}\n\t});\n\n\tthis.addAction('selectNext', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.selectNextCell();\n\t\t}\n\t});\n\n\tthis.addAction('selectParent', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.selectParentCell();\n\t\t}\n\t});\n\n\tthis.addAction('selectChild', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.selectChildCell();\n\t\t}\n\t});\n\n\tthis.addAction('collapse', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.foldCells(true);\n\t\t}\n\t});\n\n\tthis.addAction('collapseAll', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\tvar cells = editor.graph.getChildVertices();\n\t\t\teditor.graph.foldCells(true, false, cells);\n\t\t}\n\t});\n\n\tthis.addAction('expand', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.foldCells(false);\n\t\t}\n\t});\n\n\tthis.addAction('expandAll', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\tvar cells = editor.graph.getChildVertices();\n\t\t\teditor.graph.foldCells(false, false, cells);\n\t\t}\n\t});\n\n\tthis.addAction('bold', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.toggleCellStyleFlags(\n\t\t\t\tmxConstants.STYLE_FONTSTYLE,\n\t\t\t\tmxConstants.FONT_BOLD);\n\t\t}\n\t});\n\n\tthis.addAction('italic', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.toggleCellStyleFlags(\n\t\t\t\tmxConstants.STYLE_FONTSTYLE,\n\t\t\t\tmxConstants.FONT_ITALIC);\n\t\t}\n\t});\n\n\tthis.addAction('underline', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.toggleCellStyleFlags(\n\t\t\t\tmxConstants.STYLE_FONTSTYLE,\n\t\t\t\tmxConstants.FONT_UNDERLINE);\n\t\t}\n\t});\n\n\tthis.addAction('alignCellsLeft', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.alignCells(mxConstants.ALIGN_LEFT);\n\t\t}\n\t});\n\n\tthis.addAction('alignCellsCenter', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.alignCells(mxConstants.ALIGN_CENTER);\n\t\t}\n\t});\n\n\tthis.addAction('alignCellsRight', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.alignCells(mxConstants.ALIGN_RIGHT);\n\t\t}\n\t});\n\n\tthis.addAction('alignCellsTop', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.alignCells(mxConstants.ALIGN_TOP);\n\t\t}\n\t});\n\n\tthis.addAction('alignCellsMiddle', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.alignCells(mxConstants.ALIGN_MIDDLE);\n\t\t}\n\t});\n\n\tthis.addAction('alignCellsBottom', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.alignCells(mxConstants.ALIGN_BOTTOM);\n\t\t}\n\t});\n\n\tthis.addAction('alignFontLeft', function(editor)\n\t{\n\n\t\teditor.graph.setCellStyles(\n\t\t\tmxConstants.STYLE_ALIGN,\n\t\t\tmxConstants.ALIGN_LEFT);\n\t});\n\n\tthis.addAction('alignFontCenter', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.setCellStyles(\n\t\t\t\tmxConstants.STYLE_ALIGN,\n\t\t\t\tmxConstants.ALIGN_CENTER);\n\t\t}\n\t});\n\n\tthis.addAction('alignFontRight', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.setCellStyles(\n\t\t\t\tmxConstants.STYLE_ALIGN,\n\t\t\t\tmxConstants.ALIGN_RIGHT);\n\t\t}\n\t});\n\n\tthis.addAction('alignFontTop', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.setCellStyles(\n\t\t\t\tmxConstants.STYLE_VERTICAL_ALIGN,\n\t\t\t\tmxConstants.ALIGN_TOP);\n\t\t}\n\t});\n\n\tthis.addAction('alignFontMiddle', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.setCellStyles(\n\t\t\t\tmxConstants.STYLE_VERTICAL_ALIGN,\n\t\t\t\tmxConstants.ALIGN_MIDDLE);\n\t\t}\n\t});\n\n\tthis.addAction('alignFontBottom', function(editor)\n\t{\n\t\tif (editor.graph.isEnabled())\n\t\t{\n\t\t\teditor.graph.setCellStyles(\n\t\t\t\tmxConstants.STYLE_VERTICAL_ALIGN,\n\t\t\t\tmxConstants.ALIGN_BOTTOM);\n\t\t}\n\t});\n\n\tthis.addAction('zoom', function(editor)\n\t{\n\t\tvar current = editor.graph.getView().scale*100;\n\t\tvar scale = parseFloat(mxUtils.prompt(\n\t\t\tmxResources.get(editor.askZoomResource) ||\n\t\t\teditor.askZoomResource,\n\t\t\tcurrent))/100;\n\n\t\tif (!isNaN(scale))\n\t\t{\n\t\t\teditor.graph.getView().setScale(scale);\n\t\t}\n\t});\n\n\tthis.addAction('toggleTasks', function(editor)\n\t{\n\t\tif (editor.tasks != null)\n\t\t{\n\t\t\teditor.tasks.setVisible(!editor.tasks.isVisible());\n\t\t}\n\t\telse\n\t\t{\n\t\t\teditor.showTasks();\n\t\t}\n\t});\n\n\tthis.addAction('toggleHelp', function(editor)\n\t{\n\t\tif (editor.help != null)\n\t\t{\n\t\t\teditor.help.setVisible(!editor.help.isVisible());\n\t\t}\n\t\telse\n\t\t{\n\t\t\teditor.showHelp();\n\t\t}\n\t});\n\n\tthis.addAction('toggleOutline', function(editor)\n\t{\n\t\tif (editor.outline == null)\n\t\t{\n\t\t\teditor.showOutline();\n\t\t}\n\t\telse\n\t\t{\n\t\t\teditor.outline.setVisible(!editor.outline.isVisible());\n\t\t}\n\t});\n\n\tthis.addAction('toggleConsole', function(editor)\n\t{\n\t\tmxLog.setVisible(!mxLog.isVisible());\n\t});\n};\n\n/**\n * Function: configure\n *\n * Configures the editor using the specified node. To load the\n * configuration from a given URL the following code can be used to obtain\n * the XML node.\n *\n * (code)\n * var node = mxUtils.load(url).getDocumentElement();\n * (end)\n *\n * Parameters:\n *\n * node - XML node that contains the configuration.\n */\nmxEditor.prototype.configure = function (node)\n{\n\tif (node != null)\n\t{\n\t\t// Creates a decoder for the XML data\n\t\t// and uses it to configure the editor\n\t\tvar dec = new mxCodec(node.ownerDocument);\n\t\tdec.decode(node, this);\n\n\t\t// Resets the counters, modified state and\n\t\t// command history\n\t\tthis.resetHistory();\n\t}\n};\n\n/**\n * Function: resetFirstTime\n *\n * Resets the cookie that is used to remember if the editor has already\n * been used.\n */\nmxEditor.prototype.resetFirstTime = function ()\n{\n\tdocument.cookie =\n\t\t'mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/';\n};\n\n/**\n * Function: resetHistory\n *\n * Resets the command history, modified state and counters.\n */\nmxEditor.prototype.resetHistory = function ()\n{\n\tthis.lastSnapshot = new Date().getTime();\n\tthis.undoManager.clear();\n\tthis.ignoredChanges = 0;\n\tthis.setModified(false);\n};\n\n/**\n * Function: addAction\n *\n * Binds the specified actionname to the specified function.\n *\n * Parameters:\n *\n * actionname - String that specifies the name of the action\n * to be added.\n * funct - Function that implements the new action. The first\n * argument of the function is the editor it is used\n * with, the second argument is the cell it operates\n * upon.\n *\n * Example:\n * (code)\n * editor.addAction('test', function(editor, cell)\n * {\n * \t\tmxUtils.alert(\"test \"+cell);\n * });\n * (end)\n */\nmxEditor.prototype.addAction = function (actionname, funct)\n{\n\tthis.actions[actionname] = funct;\n};\n\n/**\n * Function: execute\n *\n * Executes the function with the given name in <actions> passing the\n * editor instance and given cell as the first and second argument. All\n * additional arguments are passed to the action as well. This method\n * contains a try-catch block and displays an error message if an action\n * causes an exception. The exception is re-thrown after the error\n * message was displayed.\n *\n * Example:\n *\n * (code)\n * editor.execute(\"showProperties\", cell);\n * (end)\n */\nmxEditor.prototype.execute = function (actionname, cell, evt)\n{\n\tvar action = this.actions[actionname];\n\n\tif (action != null)\n\t{\n\t\ttry\n\t\t{\n\t\t\t// Creates the array of arguments by replacing the actionname\n\t\t\t// with the editor instance in the args of this function\n\t\t\tvar args = arguments;\n\t\t\targs[0] = this;\n\n\t\t\t// Invokes the function on the editor using the args\n\t\t\taction.apply(this, args);\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tmxUtils.error('Cannot execute ' + actionname +\n\t\t\t\t': ' + e.message, 280, true);\n\n\t\t\tthrow e;\n\t\t}\n\t}\n\telse\n\t{\n\t\tmxUtils.error('Cannot find action '+actionname, 280, true);\n\t}\n};\n\n/**\n * Function: addTemplate\n *\n * Adds the specified template under the given name in <templates>.\n */\nmxEditor.prototype.addTemplate = function (name, template)\n{\n\tthis.templates[name] = template;\n};\n\n/**\n * Function: getTemplate\n *\n * Returns the template for the given name.\n */\nmxEditor.prototype.getTemplate = function (name)\n{\n\treturn this.templates[name];\n};\n\n/**\n * Function: createGraph\n *\n * Creates the <graph> for the editor. The graph is created with no\n * container and is initialized from <setGraphContainer>.\n */\nmxEditor.prototype.createGraph = function ()\n{\n\tvar graph = new mxGraph(null, null, this.graphRenderHint);\n\n\t// Enables rubberband, tooltips, panning\n\tgraph.setTooltips(true);\n\tgraph.setPanning(true);\n\n\t// Overrides the dblclick method on the graph to\n\t// invoke the dblClickAction for a cell and reset\n\t// the selection tool in the toolbar\n\tthis.installDblClickHandler(graph);\n\n\t// Installs the command history\n\tthis.installUndoHandler(graph);\n\n\t// Installs the handlers for the root event\n\tthis.installDrillHandler(graph);\n\n\t// Installs the handler for validation\n\tthis.installChangeHandler(graph);\n\n\t// Installs the handler for calling the\n\t// insert function and consume the\n\t// event if an insert function is defined\n\tthis.installInsertHandler(graph);\n\n\t// Redirects the function for creating the\n\t// popupmenu items\n\tgraph.popupMenuHandler.factoryMethod =\n\t\tmxUtils.bind(this, function(menu, cell, evt)\n\t\t{\n\t\t\treturn this.createPopupMenu(menu, cell, evt);\n\t\t});\n\n\t// Redirects the function for creating\n\t// new connections in the diagram\n\tgraph.connectionHandler.factoryMethod =\n\t\tmxUtils.bind(this, function(source, target)\n\t\t{\n\t\t\treturn this.createEdge(source, target);\n\t\t});\n\n\t// Maintains swimlanes and installs autolayout\n\tthis.createSwimlaneManager(graph);\n\tthis.createLayoutManager(graph);\n\n\treturn graph;\n};\n\n/**\n * Function: createSwimlaneManager\n *\n * Sets the graph's container using <mxGraph.init>.\n */\nmxEditor.prototype.createSwimlaneManager = function (graph)\n{\n\tvar swimlaneMgr = new mxSwimlaneManager(graph, false);\n\n\tswimlaneMgr.isHorizontal = mxUtils.bind(this, function()\n\t{\n\t\treturn this.horizontalFlow;\n\t});\n\n\tswimlaneMgr.isEnabled = mxUtils.bind(this, function()\n\t{\n\t\treturn this.maintainSwimlanes;\n\t});\n\n\treturn swimlaneMgr;\n};\n\n/**\n * Function: createLayoutManager\n *\n * Creates a layout manager for the swimlane and diagram layouts, that\n * is, the locally defined inter- and intraswimlane layouts.\n */\nmxEditor.prototype.createLayoutManager = function (graph)\n{\n\tvar layoutMgr = new mxLayoutManager(graph);\n\n\tvar self = this; // closure\n\tlayoutMgr.getLayout = function(cell)\n\t{\n\t\tvar layout = null;\n\t\tvar model = self.graph.getModel();\n\n\t\tif (model.getParent(cell) != null)\n\t\t{\n\t\t\t// Executes the swimlane layout if a child of\n\t\t\t// a swimlane has been changed. The layout is\n\t\t\t// lazy created in createSwimlaneLayout.\n\t\t\tif (self.layoutSwimlanes &&\n\t\t\t\tgraph.isSwimlane(cell))\n\t\t\t{\n\t\t\t\tif (self.swimlaneLayout == null)\n\t\t\t\t{\n\t\t\t\t\tself.swimlaneLayout = self.createSwimlaneLayout();\n\t\t\t\t}\n\n\t\t\t\tlayout = self.swimlaneLayout;\n\t\t\t}\n\n\t\t\t// Executes the diagram layout if the modified\n\t\t\t// cell is a top-level cell. The layout is\n\t\t\t// lazy created in createDiagramLayout.\n\t\t\telse if (self.layoutDiagram &&\n\t\t\t\t(graph.isValidRoot(cell) ||\n\t\t\t\tmodel.getParent(model.getParent(cell)) == null))\n\t\t\t{\n\t\t\t\tif (self.diagramLayout == null)\n\t\t\t\t{\n\t\t\t\t\tself.diagramLayout = self.createDiagramLayout();\n\t\t\t\t}\n\n\t\t\t\tlayout = self.diagramLayout;\n\t\t\t}\n\t\t}\n\n\t\treturn layout;\n\t};\n\n\treturn layoutMgr;\n};\n\n/**\n * Function: setGraphContainer\n *\n * Sets the graph's container using <mxGraph.init>.\n */\nmxEditor.prototype.setGraphContainer = function (container)\n{\n\tif (this.graph.container == null)\n\t{\n\t\t// Creates the graph instance inside the given container and render hint\n\t\t//this.graph = new mxGraph(container, null, this.graphRenderHint);\n\t\tthis.graph.init(container);\n\n\t\t// Install rubberband selection as the last\n\t\t// action handler in the chain\n\t\tthis.rubberband = new mxRubberband(this.graph);\n\n\t\t// Disables the context menu\n\t\tif (this.disableContextMenu)\n\t\t{\n\t\t\tmxEvent.disableContextMenu(container);\n\t\t}\n\n\t\t// Workaround for stylesheet directives in IE\n\t\tif (mxClient.IS_QUIRKS)\n\t\t{\n\t\t\tnew mxDivResizer(container);\n\t\t}\n\t}\n};\n\n/**\n * Function: installDblClickHandler\n *\n * Overrides <mxGraph.dblClick> to invoke <dblClickAction>\n * on a cell and reset the selection tool in the toolbar.\n */\nmxEditor.prototype.installDblClickHandler = function (graph)\n{\n\t// Installs a listener for double click events\n\tgraph.addListener(mxEvent.DOUBLE_CLICK,\n\t\tmxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tvar cell = evt.getProperty('cell');\n\n\t\t\tif (cell != null &&\n\t\t\t\tgraph.isEnabled() &&\n\t\t\t\tthis.dblClickAction != null)\n\t\t\t{\n\t\t\t\tthis.execute(this.dblClickAction, cell);\n\t\t\t\tevt.consume();\n\t\t\t}\n\t\t})\n\t);\n};\n\n/**\n * Function: installUndoHandler\n *\n * Adds the <undoManager> to the graph model and the view.\n */\nmxEditor.prototype.installUndoHandler = function (graph)\n{\n\tvar listener = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\tvar edit = evt.getProperty('edit');\n\t\tthis.undoManager.undoableEditHappened(edit);\n\t});\n\n\tgraph.getModel().addListener(mxEvent.UNDO, listener);\n\tgraph.getView().addListener(mxEvent.UNDO, listener);\n\n\t// Keeps the selection state in sync\n\tvar undoHandler = function(sender, evt)\n\t{\n\t\tvar changes = evt.getProperty('edit').changes;\n\t\tgraph.setSelectionCells(graph.getSelectionCellsForChanges(changes));\n\t};\n\n\tthis.undoManager.addListener(mxEvent.UNDO, undoHandler);\n\tthis.undoManager.addListener(mxEvent.REDO, undoHandler);\n};\n\n/**\n * Function: installDrillHandler\n *\n * Installs listeners for dispatching the <root> event.\n */\nmxEditor.prototype.installDrillHandler = function (graph)\n{\n\tvar listener = mxUtils.bind(this, function(sender)\n\t{\n\t\tthis.fireEvent(new mxEventObject(mxEvent.ROOT));\n\t});\n\n\tgraph.getView().addListener(mxEvent.DOWN, listener);\n\tgraph.getView().addListener(mxEvent.UP, listener);\n};\n\n/**\n * Function: installChangeHandler\n *\n * Installs the listeners required to automatically validate\n * the graph. On each change of the root, this implementation\n * fires a <root> event.\n */\nmxEditor.prototype.installChangeHandler = function (graph)\n{\n\tvar listener = mxUtils.bind(this, function(sender, evt)\n\t{\n\t\t// Updates the modified state\n\t\tthis.setModified(true);\n\n\t\t// Automatically validates the graph\n\t\t// after each change\n\t\tif (this.validating == true)\n\t\t{\n\t\t\tgraph.validateGraph();\n\t\t}\n\n\t\t// Checks if the root has been changed\n\t\tvar changes = evt.getProperty('edit').changes;\n\n\t\tfor (var i = 0; i < changes.length; i++)\n\t\t{\n\t\t\tvar change = changes[i];\n\n\t\t\tif (change instanceof mxRootChange ||\n\t\t\t\t(change instanceof mxValueChange &&\n\t\t\t\tchange.cell == this.graph.model.root) ||\n\t\t\t\t(change instanceof mxCellAttributeChange &&\n\t\t\t\tchange.cell == this.graph.model.root))\n\t\t\t{\n\t\t\t\tthis.fireEvent(new mxEventObject(mxEvent.ROOT));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\tgraph.getModel().addListener(mxEvent.CHANGE, listener);\n};\n\n/**\n * Function: installInsertHandler\n *\n * Installs the handler for invoking <insertFunction> if\n * one is defined.\n */\nmxEditor.prototype.installInsertHandler = function (graph)\n{\n\tvar self = this; // closure\n\tvar insertHandler =\n\t{\n\t\tmouseDown: function(sender, me)\n\t\t{\n\t\t\tif (self.insertFunction != null &&\n\t\t\t\t!me.isPopupTrigger() &&\n\t\t\t\t(self.forcedInserting ||\n\t\t\t\tme.getState() == null))\n\t\t\t{\n\t\t\t\tself.graph.clearSelection();\n\t\t\t\tself.insertFunction(me.getEvent(), me.getCell());\n\n\t\t\t\t// Consumes the rest of the events\n\t\t\t\t// for this gesture (down, move, up)\n\t\t\t\tthis.isActive = true;\n\t\t\t\tme.consume();\n\t\t\t}\n\t\t},\n\n\t\tmouseMove: function(sender, me)\n\t\t{\n\t\t\tif (this.isActive)\n\t\t\t{\n\t\t\t\tme.consume();\n\t\t\t}\n\t\t},\n\n\t\tmouseUp: function(sender, me)\n\t\t{\n\t\t\tif (this.isActive)\n\t\t\t{\n\t\t\t\tthis.isActive = false;\n\t\t\t\tme.consume();\n\t\t\t}\n\t\t}\n\t};\n\n\tgraph.addMouseListener(insertHandler);\n};\n\n/**\n * Function: createDiagramLayout\n *\n * Creates the layout instance used to layout the\n * swimlanes in the diagram.\n */\nmxEditor.prototype.createDiagramLayout = function ()\n{\n\tvar gs = this.graph.gridSize;\n\tvar layout = new mxStackLayout(this.graph, !this.horizontalFlow,\n\t\t this.swimlaneSpacing, 2*gs, 2*gs);\n\n\t// Overrides isIgnored to only take into account swimlanes\n\tlayout.isVertexIgnored = function(cell)\n\t{\n\t\treturn !layout.graph.isSwimlane(cell);\n\t};\n\n\treturn layout;\n};\n\n/**\n * Function: createSwimlaneLayout\n *\n * Creates the layout instance used to layout the\n * children of each swimlane.\n */\nmxEditor.prototype.createSwimlaneLayout = function ()\n{\n\treturn new mxCompactTreeLayout(this.graph, this.horizontalFlow);\n};\n\n/**\n * Function: createToolbar\n *\n * Creates the <toolbar> with no container.\n */\nmxEditor.prototype.createToolbar = function ()\n{\n\treturn new mxDefaultToolbar(null, this);\n};\n\n/**\n * Function: setToolbarContainer\n *\n * Initializes the toolbar for the given container.\n */\nmxEditor.prototype.setToolbarContainer = function (container)\n{\n\tthis.toolbar.init(container);\n\n\t// Workaround for stylesheet directives in IE\n\tif (mxClient.IS_QUIRKS)\n\t{\n\t\tnew mxDivResizer(container);\n\t}\n};\n\n/**\n * Function: setStatusContainer\n *\n * Creates the <status> using the specified container.\n *\n * This implementation adds listeners in the editor to\n * display the last saved time and the current filename\n * in the status bar.\n *\n * Parameters:\n *\n * container - DOM node that will contain the statusbar.\n */\nmxEditor.prototype.setStatusContainer = function (container)\n{\n\tif (this.status == null)\n\t{\n\t\tthis.status = container;\n\n\t\t// Prints the last saved time in the status bar\n\t\t// when files are saved\n\t\tthis.addListener(mxEvent.SAVE, mxUtils.bind(this, function()\n\t\t{\n\t\t\tvar tstamp = new Date().toLocaleString();\n\t\t\tthis.setStatus((mxResources.get(this.lastSavedResource) ||\n\t\t\t\tthis.lastSavedResource)+': '+tstamp);\n\t\t}));\n\n\t\t// Updates the statusbar to display the filename\n\t\t// when new files are opened\n\t\tthis.addListener(mxEvent.OPEN, mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.setStatus((mxResources.get(this.currentFileResource) ||\n\t\t\t\tthis.currentFileResource)+': '+this.filename);\n\t\t}));\n\n\t\t// Workaround for stylesheet directives in IE\n\t\tif (mxClient.IS_QUIRKS)\n\t\t{\n\t\t\tnew mxDivResizer(container);\n\t\t}\n\t}\n};\n\n/**\n * Function: setStatus\n *\n * Display the specified message in the status bar.\n *\n * Parameters:\n *\n * message - String the specified the message to\n * be displayed.\n */\nmxEditor.prototype.setStatus = function (message)\n{\n\tif (this.status != null && message != null)\n\t{\n\t\tthis.status.innerHTML = message;\n\t}\n};\n\n/**\n * Function: setTitleContainer\n *\n * Creates a listener to update the inner HTML of the\n * specified DOM node with the value of <getTitle>.\n *\n * Parameters:\n *\n * container - DOM node that will contain the title.\n */\nmxEditor.prototype.setTitleContainer = function (container)\n{\n\tthis.addListener(mxEvent.ROOT, mxUtils.bind(this, function(sender)\n\t{\n\t\tcontainer.innerHTML = this.getTitle();\n\t}));\n\n\t// Workaround for stylesheet directives in IE\n\tif (mxClient.IS_QUIRKS)\n\t{\n\t\tnew mxDivResizer(container);\n\t}\n};\n\n/**\n * Function: treeLayout\n *\n * Executes a vertical or horizontal compact tree layout\n * using the specified cell as an argument. The cell may\n * either be a group or the root of a tree.\n *\n * Parameters:\n *\n * cell - <mxCell> to use in the compact tree layout.\n * horizontal - Optional boolean to specify the tree's\n * orientation. Default is true.\n */\nmxEditor.prototype.treeLayout = function (cell, horizontal)\n{\n\tif (cell != null)\n\t{\n\t\tvar layout = new mxCompactTreeLayout(this.graph, horizontal);\n\t\tlayout.execute(cell);\n\t}\n};\n\n/**\n * Function: getTitle\n *\n * Returns the string value for the current root of the\n * diagram.\n */\nmxEditor.prototype.getTitle = function ()\n{\n\tvar title = '';\n\tvar graph = this.graph;\n\tvar cell = graph.getCurrentRoot();\n\n\twhile (cell != null &&\n\t\t   graph.getModel().getParent(\n\t\t\t\tgraph.getModel().getParent(cell)) != null)\n\t{\n\t\t// Append each label of a valid root\n\t\tif (graph.isValidRoot(cell))\n\t\t{\n\t\t\ttitle = ' > ' +\n\t\t\tgraph.convertValueToString(cell) + title;\n\t\t}\n\n\t\tcell = graph.getModel().getParent(cell);\n\t}\n\n\tvar prefix = this.getRootTitle();\n\n\treturn prefix + title;\n};\n\n/**\n * Function: getRootTitle\n *\n * Returns the string value of the root cell in\n * <mxGraph.model>.\n */\nmxEditor.prototype.getRootTitle = function ()\n{\n\tvar root = this.graph.getModel().getRoot();\n\treturn this.graph.convertValueToString(root);\n};\n\n/**\n * Function: undo\n *\n * Undo the last change in <graph>.\n */\nmxEditor.prototype.undo = function ()\n{\n\tthis.undoManager.undo();\n};\n\n/**\n * Function: redo\n *\n * Redo the last change in <graph>.\n */\nmxEditor.prototype.redo = function ()\n{\n\tthis.undoManager.redo();\n};\n\n/**\n * Function: groupCells\n *\n * Invokes <createGroup> to create a new group cell and the invokes\n * <mxGraph.groupCells>, using the grid size of the graph as the spacing\n * in the group's content area.\n */\nmxEditor.prototype.groupCells = function ()\n{\n\tvar border = (this.groupBorderSize != null) ?\n\t\tthis.groupBorderSize :\n\t\tthis.graph.gridSize;\n\treturn this.graph.groupCells(this.createGroup(), border);\n};\n\n/**\n * Function: createGroup\n *\n * Creates and returns a clone of <defaultGroup> to be used\n * as a new group cell in <group>.\n */\nmxEditor.prototype.createGroup = function ()\n{\n\tvar model = this.graph.getModel();\n\n\treturn model.cloneCell(this.defaultGroup);\n};\n\n/**\n * Function: open\n *\n * Opens the specified file synchronously and parses it using\n * <readGraphModel>. It updates <filename> and fires an <open>-event after\n * the file has been opened. Exceptions should be handled as follows:\n *\n * (code)\n * try\n * {\n *   editor.open(filename);\n * }\n * catch (e)\n * {\n *   mxUtils.error('Cannot open ' + filename +\n *     ': ' + e.message, 280, true);\n * }\n * (end)\n *\n * Parameters:\n *\n * filename - URL of the file to be opened.\n */\nmxEditor.prototype.open = function (filename)\n{\n\tif (filename != null)\n\t{\n\t\tvar xml = mxUtils.load(filename).getXml();\n\t\tthis.readGraphModel(xml.documentElement);\n\t\tthis.filename = filename;\n\n\t\tthis.fireEvent(new mxEventObject(mxEvent.OPEN, 'filename', filename));\n\t}\n};\n\n/**\n * Function: readGraphModel\n *\n * Reads the specified XML node into the existing graph model and resets\n * the command history and modified state.\n */\nmxEditor.prototype.readGraphModel = function (node)\n{\n\tvar dec = new mxCodec(node.ownerDocument);\n\tdec.decode(node, this.graph.getModel());\n\tthis.resetHistory();\n};\n\n/**\n * Function: save\n *\n * Posts the string returned by <writeGraphModel> to the given URL or the\n * URL returned by <getUrlPost>. The actual posting is carried out by\n * <postDiagram>. If the URL is null then the resulting XML will be\n * displayed using <mxUtils.popup>. Exceptions should be handled as\n * follows:\n *\n * (code)\n * try\n * {\n *   editor.save();\n * }\n * catch (e)\n * {\n *   mxUtils.error('Cannot save : ' + e.message, 280, true);\n * }\n * (end)\n */\nmxEditor.prototype.save = function (url, linefeed)\n{\n\t// Gets the URL to post the data to\n\turl = url || this.getUrlPost();\n\n\t// Posts the data if the URL is not empty\n\tif (url != null && url.length > 0)\n\t{\n\t\tvar data = this.writeGraphModel(linefeed);\n\t\tthis.postDiagram(url, data);\n\n\t\t// Resets the modified flag\n\t\tthis.setModified(false);\n\t}\n\n\t// Dispatches a save event\n\tthis.fireEvent(new mxEventObject(mxEvent.SAVE, 'url', url));\n};\n\n/**\n * Function: postDiagram\n *\n * Hook for subclassers to override the posting of a diagram\n * represented by the given node to the given URL. This fires\n * an asynchronous <post> event if the diagram has been posted.\n *\n * Example:\n *\n * To replace the diagram with the diagram in the response, use the\n * following code.\n *\n * (code)\n * editor.addListener(mxEvent.POST, function(sender, evt)\n * {\n *   // Process response (replace diagram)\n *   var req = evt.getProperty('request');\n *   var root = req.getDocumentElement();\n *   editor.graph.readGraphModel(root)\n * });\n * (end)\n */\nmxEditor.prototype.postDiagram = function (url, data)\n{\n\tif (this.escapePostData)\n\t{\n\t\tdata = encodeURIComponent(data);\n\t}\n\n\tmxUtils.post(url, this.postParameterName+'='+data,\n\t\tmxUtils.bind(this, function(req)\n\t\t{\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.POST,\n\t\t\t\t'request', req, 'url', url, 'data', data));\n\t\t})\n\t);\n};\n\n/**\n * Function: writeGraphModel\n *\n * Hook to create the string representation of the diagram. The default\n * implementation uses an <mxCodec> to encode the graph model as\n * follows:\n *\n * (code)\n * var enc = new mxCodec();\n * var node = enc.encode(this.graph.getModel());\n * return mxUtils.getXml(node, this.linefeed);\n * (end)\n *\n * Parameters:\n *\n * linefeed - Optional character to be used as the linefeed. Default is\n * <linefeed>.\n */\nmxEditor.prototype.writeGraphModel = function (linefeed)\n{\n\tlinefeed = (linefeed != null) ? linefeed : this.linefeed;\n\tvar enc = new mxCodec();\n\tvar node = enc.encode(this.graph.getModel());\n\n\treturn mxUtils.getXml(node, linefeed);\n};\n\n/**\n * Function: getUrlPost\n *\n * Returns the URL to post the diagram to. This is used\n * in <save>. The default implementation returns <urlPost>,\n * adding <code>?draft=true</code>.\n */\nmxEditor.prototype.getUrlPost = function ()\n{\n\treturn this.urlPost;\n};\n\n/**\n * Function: getUrlImage\n *\n * Returns the URL to create the image with. This is typically\n * the URL of a backend which accepts an XML representation\n * of a graph view to create an image. The function is used\n * in the image action to create an image. This implementation\n * returns <urlImage>.\n */\nmxEditor.prototype.getUrlImage = function ()\n{\n\treturn this.urlImage;\n};\n\n/**\n * Function: swapStyles\n *\n * Swaps the styles for the given names in the graph's\n * stylesheet and refreshes the graph.\n */\nmxEditor.prototype.swapStyles = function (first, second)\n{\n\tvar style = this.graph.getStylesheet().styles[second];\n\tthis.graph.getView().getStylesheet().putCellStyle(\n\t\tsecond, this.graph.getStylesheet().styles[first]);\n\tthis.graph.getStylesheet().putCellStyle(first, style);\n\tthis.graph.refresh();\n};\n\n/**\n * Function: showProperties\n *\n * Creates and shows the properties dialog for the given\n * cell. The content area of the dialog is created using\n * <createProperties>.\n */\nmxEditor.prototype.showProperties = function (cell)\n{\n\tcell = cell || this.graph.getSelectionCell();\n\n\t// Uses the root node for the properties dialog\n\t// if not cell was passed in and no cell is\n\t// selected\n\tif (cell == null)\n\t{\n\t\tcell = this.graph.getCurrentRoot();\n\n\t\tif (cell == null)\n\t\t{\n\t\t\tcell = this.graph.getModel().getRoot();\n\t\t}\n\t}\n\n\tif (cell != null)\n\t{\n\t\t// Makes sure there is no in-place editor in the\n\t\t// graph and computes the location of the dialog\n\t\tthis.graph.stopEditing(true);\n\n\t\tvar offset = mxUtils.getOffset(this.graph.container);\n\t\tvar x = offset.x+10;\n\t\tvar y = offset.y;\n\n\t\t// Avoids moving the dialog if it is alredy open\n\t\tif (this.properties != null && !this.movePropertiesDialog)\n\t\t{\n\t\t\tx = this.properties.getX();\n\t\t\ty = this.properties.getY();\n\t\t}\n\n\t\t// Places the dialog near the cell for which it\n\t\t// displays the properties\n\t\telse\n\t\t{\n\t\t\tvar bounds = this.graph.getCellBounds(cell);\n\n\t\t\tif (bounds != null)\n\t\t\t{\n\t\t\t\tx += bounds.x+Math.min(200, bounds.width);\n\t\t\t\ty += bounds.y;\n\t\t\t}\n\t\t}\n\n\t\t// Hides the existing properties dialog and creates a new one with the\n\t\t// contents created in the hook method\n\t\tthis.hideProperties();\n\t\tvar node = this.createProperties(cell);\n\n\t\tif (node != null)\n\t\t{\n\t\t\t// Displays the contents in a window and stores a reference to the\n\t\t\t// window for later hiding of the window\n\t\t\tthis.properties = new mxWindow(mxResources.get(this.propertiesResource) ||\n\t\t\t\tthis.propertiesResource, node, x, y, this.propertiesWidth, this.propertiesHeight, false);\n\t\t\tthis.properties.setVisible(true);\n\t\t}\n\t}\n};\n\n/**\n * Function: isPropertiesVisible\n *\n * Returns true if the properties dialog is currently visible.\n */\nmxEditor.prototype.isPropertiesVisible = function ()\n{\n\treturn this.properties != null;\n};\n\n/**\n * Function: createProperties\n *\n * Creates and returns the DOM node that represents the contents\n * of the properties dialog for the given cell. This implementation\n * works for user objects that are XML nodes and display all the\n * node attributes in a form.\n */\nmxEditor.prototype.createProperties = function (cell)\n{\n\tvar model = this.graph.getModel();\n\tvar value = model.getValue(cell);\n\n\tif (mxUtils.isNode(value))\n\t{\n\t\t// Creates a form for the user object inside\n\t\t// the cell\n\t\tvar form = new mxForm('properties');\n\n\t\t// Adds a readonly field for the cell id\n\t\tvar id = form.addText('ID', cell.getId());\n\t\tid.setAttribute('readonly', 'true');\n\n\t\tvar geo = null;\n\t\tvar yField = null;\n\t\tvar xField = null;\n\t\tvar widthField = null;\n\t\tvar heightField = null;\n\n\t\t// Adds fields for the location and size\n\t\tif (model.isVertex(cell))\n\t\t{\n\t\t\tgeo = model.getGeometry(cell);\n\n\t\t\tif (geo != null)\n\t\t\t{\n\t\t\t\tyField = form.addText('top', geo.y);\n\t\t\t\txField = form.addText('left', geo.x);\n\t\t\t\twidthField = form.addText('width', geo.width);\n\t\t\t\theightField = form.addText('height', geo.height);\n\t\t\t}\n\t\t}\n\n\t\t// Adds a field for the cell style\n\t\tvar tmp = model.getStyle(cell);\n\t\tvar style = form.addText('Style', tmp || '');\n\n\t\t// Creates textareas for each attribute of the\n\t\t// user object within the cell\n\t\tvar attrs = value.attributes;\n\t\tvar texts = [];\n\n\t\tfor (var i = 0; i < attrs.length; i++)\n\t\t{\n\t\t\t// Creates a textarea with more lines for\n\t\t\t// the cell label\n\t\t\tvar val = attrs[i].value;\n\t\t\ttexts[i] = form.addTextarea(attrs[i].nodeName, val,\n\t\t\t\t(attrs[i].nodeName == 'label') ? 4 : 2);\n\t\t}\n\n\t\t// Adds an OK and Cancel button to the dialog\n\t\t// contents and implements the respective\n\t\t// actions below\n\n\t\t// Defines the function to be executed when the\n\t\t// OK button is pressed in the dialog\n\t\tvar okFunction = mxUtils.bind(this, function()\n\t\t{\n\t\t\t// Hides the dialog\n\t\t\tthis.hideProperties();\n\n\t\t\t// Supports undo for the changes on the underlying\n\t\t\t// XML structure / XML node attribute changes.\n\t\t\tmodel.beginUpdate();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif (geo != null)\n\t\t\t\t{\n\t\t\t\t\tgeo = geo.clone();\n\n\t\t\t\t\tgeo.x = parseFloat(xField.value);\n\t\t\t\t\tgeo.y = parseFloat(yField.value);\n\t\t\t\t\tgeo.width = parseFloat(widthField.value);\n\t\t\t\t\tgeo.height = parseFloat(heightField.value);\n\n\t\t\t\t\tmodel.setGeometry(cell, geo);\n\t\t\t\t}\n\n\t\t\t\t// Applies the style\n\t\t\t\tif (style.value.length > 0)\n\t\t\t\t{\n\t\t\t\t\tmodel.setStyle(cell, style.value);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmodel.setStyle(cell, null);\n\t\t\t\t}\n\n\t\t\t\t// Creates an undoable change for each\n\t\t\t\t// attribute and executes it using the\n\t\t\t\t// model, which will also make the change\n\t\t\t\t// part of the current transaction\n\t\t\t\tfor (var i=0; i<attrs.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar edit = new mxCellAttributeChange(\n\t\t\t\t\t\tcell, attrs[i].nodeName,\n\t\t\t\t\t\ttexts[i].value);\n\t\t\t\t\tmodel.execute(edit);\n\t\t\t\t}\n\n\t\t\t\t// Checks if the graph wants cells to\n\t\t\t\t// be automatically sized and updates\n\t\t\t\t// the size as an undoable step if\n\t\t\t\t// the feature is enabled\n\t\t\t\tif (this.graph.isAutoSizeCell(cell))\n\t\t\t\t{\n\t\t\t\t\tthis.graph.updateCellSize(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tmodel.endUpdate();\n\t\t\t}\n\t\t});\n\n\t\t// Defines the function to be executed when the\n\t\t// Cancel button is pressed in the dialog\n\t\tvar cancelFunction = mxUtils.bind(this, function()\n\t\t{\n\t\t\t// Hides the dialog\n\t\t\tthis.hideProperties();\n\t\t});\n\n\t\tform.addButtons(okFunction, cancelFunction);\n\n\t\treturn form.table;\n\t}\n\n\treturn null;\n};\n\n/**\n * Function: hideProperties\n *\n * Hides the properties dialog.\n */\nmxEditor.prototype.hideProperties = function ()\n{\n\tif (this.properties != null)\n\t{\n\t\tthis.properties.destroy();\n\t\tthis.properties = null;\n\t}\n};\n\n/**\n * Function: showTasks\n *\n * Shows the tasks window. The tasks window is created using <createTasks>. The\n * default width of the window is 200 pixels, the y-coordinate of the location\n * can be specifies in <tasksTop> and the x-coordinate is right aligned with a\n * 20 pixel offset from the right border. To change the location of the tasks\n * window, the following code can be used:\n *\n * (code)\n * var oldShowTasks = mxEditor.prototype.showTasks;\n * mxEditor.prototype.showTasks = function()\n * {\n *   oldShowTasks.apply(this, arguments); // \"supercall\"\n *\n *   if (this.tasks != null)\n *   {\n *     this.tasks.setLocation(10, 10);\n *   }\n * };\n * (end)\n */\nmxEditor.prototype.showTasks = function ()\n{\n\tif (this.tasks == null)\n\t{\n\t\tvar div = document.createElement('div');\n\t\tdiv.style.padding = '4px';\n\t\tdiv.style.paddingLeft = '20px';\n\t\tvar w = document.body.clientWidth;\n\t\tvar wnd = new mxWindow(\n\t\t\tmxResources.get(this.tasksResource) ||\n\t\t\tthis.tasksResource,\n\t\t\tdiv, w - 220, this.tasksTop, 200);\n\t\twnd.setClosable(true);\n\t\twnd.destroyOnClose = false;\n\n\t\t// Installs a function to update the contents\n\t\t// of the tasks window on every change of the\n\t\t// model, selection or root.\n\t\tvar funct = mxUtils.bind(this, function(sender)\n\t\t{\n\t\t\tmxEvent.release(div);\n\t\t\tdiv.innerHTML = '';\n\t\t\tthis.createTasks(div);\n\t\t});\n\n\t\tthis.graph.getModel().addListener(mxEvent.CHANGE, funct);\n\t\tthis.graph.getSelectionModel().addListener(mxEvent.CHANGE, funct);\n\t\tthis.graph.addListener(mxEvent.ROOT, funct);\n\n\t\t// Assigns the icon to the tasks window\n\t\tif (this.tasksWindowImage != null)\n\t\t{\n\t\t\twnd.setImage(this.tasksWindowImage);\n\t\t}\n\n\t\tthis.tasks = wnd;\n\t\tthis.createTasks(div);\n\t}\n\n\tthis.tasks.setVisible(true);\n};\n\n/**\n * Function: refreshTasks\n *\n * Updates the contents of the tasks window using <createTasks>.\n */\nmxEditor.prototype.refreshTasks = function (div)\n{\n\tif (this.tasks != null)\n\t{\n\t\tvar div = this.tasks.content;\n\t\tmxEvent.release(div);\n\t\tdiv.innerHTML = '';\n\t\tthis.createTasks(div);\n\t}\n};\n\n/**\n * Function: createTasks\n *\n * Updates the contents of the given DOM node to\n * display the tasks associated with the current\n * editor state. This is invoked whenever there\n * is a possible change of state in the editor.\n * Default implementation is empty.\n */\nmxEditor.prototype.createTasks = function (div)\n{\n\t// override\n};\n\n/**\n * Function: showHelp\n *\n * Shows the help window. If the help window does not exist\n * then it is created using an iframe pointing to the resource\n * for the <code>urlHelp</code> key or <urlHelp> if the resource\n * is undefined.\n */\nmxEditor.prototype.showHelp = function (tasks)\n{\n\tif (this.help == null)\n\t{\n\t\tvar frame = document.createElement('iframe');\n\t\tframe.setAttribute('src', mxResources.get('urlHelp') || this.urlHelp);\n\t\tframe.setAttribute('height', '100%');\n\t\tframe.setAttribute('width', '100%');\n\t\tframe.setAttribute('frameBorder', '0');\n\t\tframe.style.backgroundColor = 'white';\n\n\t\tvar w = document.body.clientWidth;\n\t\tvar h = (document.body.clientHeight || document.documentElement.clientHeight);\n\n\t\tvar wnd = new mxWindow(mxResources.get(this.helpResource) || this.helpResource,\n\t\t\tframe, (w-this.helpWidth)/2, (h-this.helpHeight)/3, this.helpWidth, this.helpHeight);\n\t\twnd.setMaximizable(true);\n\t\twnd.setClosable(true);\n\t\twnd.destroyOnClose = false;\n\t\twnd.setResizable(true);\n\n\t\t// Assigns the icon to the help window\n\t\tif (this.helpWindowImage != null)\n\t\t{\n\t\t\twnd.setImage(this.helpWindowImage);\n\t\t}\n\n\t\t// Workaround for ignored iframe height 100% in FF\n\t\tif (mxClient.IS_NS)\n\t\t{\n\t\t\tvar handler = function(sender)\n\t\t\t{\n\t\t\t\tvar h = wnd.div.offsetHeight;\n\t\t\t\tframe.setAttribute('height', (h-26)+'px');\n\t\t\t};\n\n\t\t\twnd.addListener(mxEvent.RESIZE_END, handler);\n\t\t\twnd.addListener(mxEvent.MAXIMIZE, handler);\n\t\t\twnd.addListener(mxEvent.NORMALIZE, handler);\n\t\t\twnd.addListener(mxEvent.SHOW, handler);\n\t\t}\n\n\t\tthis.help = wnd;\n\t}\n\n\tthis.help.setVisible(true);\n};\n\n/**\n * Function: showOutline\n *\n * Shows the outline window. If the window does not exist, then it is\n * created using an <mxOutline>.\n */\nmxEditor.prototype.showOutline = function ()\n{\n\tvar create = this.outline == null;\n\n\tif (create)\n\t{\n\t\tvar div = document.createElement('div');\n\n\t\tdiv.style.overflow = 'hidden';\n\t\tdiv.style.position = 'relative';\n\t\tdiv.style.width = '100%';\n\t\tdiv.style.height = '100%';\n\t\tdiv.style.background = 'white';\n\t\tdiv.style.cursor = 'move';\n\n\t\tif (document.documentMode == 8)\n\t\t{\n\t\t\tdiv.style.filter = 'progid:DXImageTransform.Microsoft.alpha(opacity=100)';\n\t\t}\n\n\t\tvar wnd = new mxWindow(\n\t\t\tmxResources.get(this.outlineResource) ||\n\t\t\tthis.outlineResource,\n\t\t\tdiv, 600, 480, 200, 200, false);\n\n\t\t// Creates the outline in the specified div\n\t\t// and links it to the existing graph\n\t\tvar outline = new mxOutline(this.graph, div);\n\t\twnd.setClosable(true);\n\t\twnd.setResizable(true);\n\t\twnd.destroyOnClose = false;\n\n\t\twnd.addListener(mxEvent.RESIZE_END, function()\n\t\t{\n\t\t\toutline.update();\n\t\t});\n\n\t\tthis.outline = wnd;\n\t\tthis.outline.outline = outline;\n\t}\n\n\t// Finally shows the outline\n\tthis.outline.setVisible(true);\n\tthis.outline.outline.update(true);\n};\n\n/**\n * Function: setMode\n *\n * Puts the graph into the specified mode. The following modenames are\n * supported:\n *\n * select - Selects using the left mouse button, new connections\n * are disabled.\n * connect - Selects using the left mouse button or creates new\n * connections if mouse over cell hotspot. See <mxConnectionHandler>.\n * pan - Pans using the left mouse button, new connections are disabled.\n */\nmxEditor.prototype.setMode = function(modename)\n{\n\tif (modename == 'select')\n\t{\n\t\tthis.graph.panningHandler.useLeftButtonForPanning = false;\n\t\tthis.graph.setConnectable(false);\n\t}\n\telse if (modename == 'connect')\n\t{\n\t\tthis.graph.panningHandler.useLeftButtonForPanning = false;\n\t\tthis.graph.setConnectable(true);\n\t}\n\telse if (modename == 'pan')\n\t{\n\t\tthis.graph.panningHandler.useLeftButtonForPanning = true;\n\t\tthis.graph.setConnectable(false);\n\t}\n};\n\n/**\n * Function: createPopupMenu\n *\n * Uses <popupHandler> to create the menu in the graph's\n * panning handler. The redirection is setup in\n * <setToolbarContainer>.\n */\nmxEditor.prototype.createPopupMenu = function (menu, cell, evt)\n{\n\tthis.popupHandler.createMenu(this, menu, cell, evt);\n};\n\n/**\n * Function: createEdge\n *\n * Uses <defaultEdge> as the prototype for creating new edges\n * in the connection handler of the graph. The style of the\n * edge will be overridden with the value returned by\n * <getEdgeStyle>.\n */\nmxEditor.prototype.createEdge = function (source, target)\n{\n\t// Clones the defaultedge prototype\n\tvar e = null;\n\n\tif (this.defaultEdge != null)\n\t{\n\t\tvar model = this.graph.getModel();\n\t\te = model.cloneCell(this.defaultEdge);\n\t}\n\telse\n\t{\n\t\te = new mxCell('');\n\t\te.setEdge(true);\n\n\t\tvar geo = new mxGeometry();\n\t\tgeo.relative = true;\n\t\te.setGeometry(geo);\n\t}\n\n\t// Overrides the edge style\n\tvar style = this.getEdgeStyle();\n\n\tif (style != null)\n\t{\n\t\te.setStyle(style);\n\t}\n\n\treturn e;\n};\n\n/**\n * Function: getEdgeStyle\n *\n * Returns a string identifying the style of new edges.\n * The function is used in <createEdge> when new edges\n * are created in the graph.\n */\nmxEditor.prototype.getEdgeStyle = function ()\n{\n\treturn this.defaultEdgeStyle;\n};\n\n/**\n * Function: consumeCycleAttribute\n *\n * Returns the next attribute in <cycleAttributeValues>\n * or null, if not attribute should be used in the\n * specified cell.\n */\nmxEditor.prototype.consumeCycleAttribute = function (cell)\n{\n\treturn (this.cycleAttributeValues != null &&\n\t\tthis.cycleAttributeValues.length > 0 &&\n\t\tthis.graph.isSwimlane(cell)) ?\n\t\tthis.cycleAttributeValues[this.cycleAttributeIndex++ %\n\t\t\tthis.cycleAttributeValues.length] : null;\n};\n\n/**\n * Function: cycleAttribute\n *\n * Uses the returned value from <consumeCycleAttribute>\n * as the value for the <cycleAttributeName> key in\n * the given cell's style.\n */\nmxEditor.prototype.cycleAttribute = function (cell)\n{\n\tif (this.cycleAttributeName != null)\n\t{\n\t\tvar value = this.consumeCycleAttribute(cell);\n\n\t\tif (value != null)\n\t\t{\n\t\t\tcell.setStyle(cell.getStyle()+';'+\n\t\t\t\tthis.cycleAttributeName+'='+value);\n\t\t}\n\t}\n};\n\n/**\n * Function: addVertex\n *\n * Adds the given vertex as a child of parent at the specified\n * x and y coordinate and fires an <addVertex> event.\n */\nmxEditor.prototype.addVertex = function (parent, vertex, x, y)\n{\n\tvar model = this.graph.getModel();\n\n\twhile (parent != null && !this.graph.isValidDropTarget(parent))\n\t{\n\t\tparent = model.getParent(parent);\n\t}\n\n\tparent = (parent != null) ? parent : this.graph.getSwimlaneAt(x, y);\n\tvar scale = this.graph.getView().scale;\n\n\tvar geo = model.getGeometry(vertex);\n\tvar pgeo = model.getGeometry(parent);\n\n\tif (this.graph.isSwimlane(vertex) &&\n\t\t!this.graph.swimlaneNesting)\n\t{\n\t\tparent = null;\n\t}\n\telse if (parent == null && this.swimlaneRequired)\n\t{\n\t\treturn null;\n\t}\n\telse if (parent != null && pgeo != null)\n\t{\n\t\t// Keeps vertex inside parent\n\t\tvar state = this.graph.getView().getState(parent);\n\n\t\tif (state != null)\n\t\t{\n\t\t\tx -= state.origin.x * scale;\n\t\t\ty -= state.origin.y * scale;\n\n\t\t\tif (this.graph.isConstrainedMoving)\n\t\t\t{\n\t\t\t\tvar width = geo.width;\n\t\t\t\tvar height = geo.height;\n\t\t\t\tvar tmp = state.x+state.width;\n\n\t\t\t\tif (x+width > tmp)\n\t\t\t\t{\n\t\t\t\t\tx -= x+width - tmp;\n\t\t\t\t}\n\n\t\t\t\ttmp = state.y+state.height;\n\n\t\t\t\tif (y+height > tmp)\n\t\t\t\t{\n\t\t\t\t\ty -= y+height - tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (pgeo != null)\n\t\t{\n\t\t\tx -= pgeo.x*scale;\n\t\t\ty -= pgeo.y*scale;\n\t\t}\n\t}\n\n\tgeo = geo.clone();\n\tgeo.x = this.graph.snap(x / scale -\n\t\tthis.graph.getView().translate.x -\n\t\tthis.graph.gridSize/2);\n\tgeo.y = this.graph.snap(y / scale -\n\t\tthis.graph.getView().translate.y -\n\t\tthis.graph.gridSize/2);\n\tvertex.setGeometry(geo);\n\n\tif (parent == null)\n\t{\n\t\tparent = this.graph.getDefaultParent();\n\t}\n\n\tthis.cycleAttribute(vertex);\n\tthis.fireEvent(new mxEventObject(mxEvent.BEFORE_ADD_VERTEX,\n\t\t\t'vertex', vertex, 'parent', parent));\n\n\tmodel.beginUpdate();\n\ttry\n\t{\n\t\tvertex = this.graph.addCell(vertex, parent);\n\n\t\tif (vertex != null)\n\t\t{\n\t\t\tthis.graph.constrainChild(vertex);\n\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.ADD_VERTEX, 'vertex', vertex));\n\t\t}\n\t}\n\tfinally\n\t{\n\t\tmodel.endUpdate();\n\t}\n\n\tif (vertex != null)\n\t{\n\t\tthis.graph.setSelectionCell(vertex);\n\t\tthis.graph.scrollCellToVisible(vertex);\n\t\tthis.fireEvent(new mxEventObject(mxEvent.AFTER_ADD_VERTEX, 'vertex', vertex));\n\t}\n\n\treturn vertex;\n};\n\n/**\n * Function: destroy\n *\n * Removes the editor and all its associated resources. This does not\n * normally need to be called, it is called automatically when the window\n * unloads.\n */\nmxEditor.prototype.destroy = function ()\n{\n\tif (!this.destroyed)\n\t{\n\t\tthis.destroyed = true;\n\n\t\tif (this.tasks != null)\n\t\t{\n\t\t\tthis.tasks.destroy();\n\t\t}\n\n\t\tif (this.outline != null)\n\t\t{\n\t\t\tthis.outline.destroy();\n\t\t}\n\n\t\tif (this.properties != null)\n\t\t{\n\t\t\tthis.properties.destroy();\n\t\t}\n\n\t\tif (this.keyHandler != null)\n\t\t{\n\t\t\tthis.keyHandler.destroy();\n\t\t}\n\n\t\tif (this.rubberband != null)\n\t\t{\n\t\t\tthis.rubberband.destroy();\n\t\t}\n\n\t\tif (this.toolbar != null)\n\t\t{\n\t\t\tthis.toolbar.destroy();\n\t\t}\n\n\t\tif (this.graph != null)\n\t\t{\n\t\t\tthis.graph.destroy();\n\t\t}\n\n\t\tthis.status = null;\n\t\tthis.templates = null;\n\t}\n};\n\n__mxOutput.mxEditor = typeof mxEditor !== 'undefined' ? mxEditor : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nvar mxCodecRegistry =\n{\n\t/**\n\t * Class: mxCodecRegistry\n\t *\n\t * Singleton class that acts as a global registry for codecs.\n\t *\n\t * Adding an <mxCodec>:\n\t *\n\t * 1. Define a default codec with a new instance of the \n\t * object to be handled.\n\t *\n\t * (code)\n\t * var codec = new mxObjectCodec(new mxGraphModel());\n\t * (end)\n\t *\n\t * 2. Define the functions required for encoding and decoding\n\t * objects.\n\t *\n\t * (code)\n\t * codec.encode = function(enc, obj) { ... }\n\t * codec.decode = function(dec, node, into) { ... }\n\t * (end)\n\t *\n\t * 3. Register the codec in the <mxCodecRegistry>.\n\t *\n\t * (code)\n\t * mxCodecRegistry.register(codec);\n\t * (end)\n\t *\n\t * <mxObjectCodec.decode> may be used to either create a new \n\t * instance of an object or to configure an existing instance, \n\t * in which case the into argument points to the existing\n\t * object. In this case, we say the codec \"configures\" the\n\t * object.\n\t * \n\t * Variable: codecs\n\t *\n\t * Maps from constructor names to codecs.\n\t */\n\tcodecs: [],\n\t\n\t/**\n\t * Variable: aliases\n\t *\n\t * Maps from classnames to codecnames.\n\t */\n\taliases: [],\n\n\t/**\n\t * Function: register\n\t *\n\t * Registers a new codec and associates the name of the template\n\t * constructor in the codec with the codec object.\n\t *\n\t * Parameters:\n\t *\n\t * codec - <mxObjectCodec> to be registered.\n\t */\n\tregister: function(codec)\n\t{\n\t\tif (codec != null)\n\t\t{\n\t\t\tvar name = codec.getName();\n\t\t\tmxCodecRegistry.codecs[name] = codec;\n\t\t\t\n\t\t\tvar classname = mxUtils.getFunctionName(codec.template.constructor);\n\n\t\t\tif (classname != name)\n\t\t\t{\n\t\t\t\tmxCodecRegistry.addAlias(classname, name);\n\t\t\t}\n\t\t}\n\n\t\treturn codec;\n\t},\n\n\t/**\n\t * Function: addAlias\n\t *\n\t * Adds an alias for mapping a classname to a codecname.\n\t */\n\taddAlias: function(classname, codecname)\n\t{\n\t\tmxCodecRegistry.aliases[classname] = codecname;\n\t},\n\n\t/**\n\t * Function: getCodec\n\t *\n\t * Returns a codec that handles objects that are constructed\n\t * using the given constructor.\n\t *\n\t * Parameters:\n\t *\n\t * ctor - JavaScript constructor function. \n\t */\n\tgetCodec: function(ctor)\n\t{\n\t\tvar codec = null;\n\t\t\n\t\tif (ctor != null)\n\t\t{\n\t\t\tvar name = mxUtils.getFunctionName(ctor);\n\t\t\tvar tmp = mxCodecRegistry.aliases[name];\n\t\t\t\n\t\t\tif (tmp != null)\n\t\t\t{\n\t\t\t\tname = tmp;\n\t\t\t}\n\t\t\t\n\t\t\tcodec = mxCodecRegistry.codecs[name];\n\t\t\t\n\t\t\t// Registers a new default codec for the given constructor\n\t\t\t// if no codec has been previously defined.\n\t\t\tif (codec == null)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tcodec = new mxObjectCodec(new ctor());\n\t\t\t\t\tmxCodecRegistry.register(codec);\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\t// ignore\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn codec;\n\t}\n\n};\n\n__mxOutput.mxCodecRegistry = typeof mxCodecRegistry !== 'undefined' ? mxCodecRegistry : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxCodec\n *\n * XML codec for JavaScript object graphs. See <mxObjectCodec> for a\n * description of the general encoding/decoding scheme. This class uses the\n * codecs registered in <mxCodecRegistry> for encoding/decoding each object.\n * \n * References:\n * \n * In order to resolve references, especially forward references, the mxCodec\n * constructor must be given the document that contains the referenced\n * elements.\n *\n * Examples:\n *\n * The following code is used to encode a graph model.\n *\n * (code)\n * var encoder = new mxCodec();\n * var result = encoder.encode(graph.getModel());\n * var xml = mxUtils.getXml(result);\n * (end)\n * \n * Example:\n * \n * Using the code below, an XML document is decoded into an existing model. The\n * document may be obtained using one of the functions in mxUtils for loading\n * an XML file, eg. <mxUtils.get>, or using <mxUtils.parseXml> for parsing an\n * XML string.\n * \n * (code)\n * var doc = mxUtils.parseXml(xmlString);\n * var codec = new mxCodec(doc);\n * codec.decode(doc.documentElement, graph.getModel());\n * (end)\n * \n * Example:\n * \n * This example demonstrates parsing a list of isolated cells into an existing\n * graph model. Note that the cells do not have a parent reference so they can\n * be added anywhere in the cell hierarchy after parsing.\n * \n * (code)\n * var xml = '<root><mxCell id=\"2\" value=\"Hello,\" vertex=\"1\"><mxGeometry x=\"20\" y=\"20\" width=\"80\" height=\"30\" as=\"geometry\"/></mxCell><mxCell id=\"3\" value=\"World!\" vertex=\"1\"><mxGeometry x=\"200\" y=\"150\" width=\"80\" height=\"30\" as=\"geometry\"/></mxCell><mxCell id=\"4\" value=\"\" edge=\"1\" source=\"2\" target=\"3\"><mxGeometry relative=\"1\" as=\"geometry\"/></mxCell></root>';\n * var doc = mxUtils.parseXml(xml);\n * var codec = new mxCodec(doc);\n * var elt = doc.documentElement.firstChild;\n * var cells = [];\n * \n * while (elt != null)\n * {\n *   cells.push(codec.decode(elt));\n *   elt = elt.nextSibling;\n * }\n * \n * graph.addCells(cells);\n * (end)\n * \n * Example:\n * \n * Using the following code, the selection cells of a graph are encoded and the\n * output is displayed in a dialog box.\n * \n * (code)\n * var enc = new mxCodec();\n * var cells = graph.getSelectionCells();\n * mxUtils.alert(mxUtils.getPrettyXml(enc.encode(cells)));\n * (end)\n * \n * Newlines in the XML can be converted to <br>, in which case a '<br>' argument\n * must be passed to <mxUtils.getXml> as the second argument.\n * \n * Debugging:\n * \n * For debugging I/O you can use the following code to get the sequence of\n * encoded objects:\n * \n * (code)\n * var oldEncode = mxCodec.prototype.encode;\n * mxCodec.prototype.encode = function(obj)\n * {\n *   mxLog.show();\n *   mxLog.debug('mxCodec.encode: obj='+mxUtils.getFunctionName(obj.constructor));\n *   \n *   return oldEncode.apply(this, arguments);\n * };\n * (end)\n * \n * Note that the I/O system adds object codecs for new object automatically. For\n * decoding those objects, the constructor should be written as follows:\n * \n * (code)\n * var MyObj = function(name)\n * {\n *   // ...\n * };\n * (end)\n * \n * Constructor: mxCodec\n *\n * Constructs an XML encoder/decoder for the specified\n * owner document.\n *\n * Parameters:\n *\n * document - Optional XML document that contains the data.\n * If no document is specified then a new document is created\n * using <mxUtils.createXmlDocument>.\n */\nfunction mxCodec(document)\n{\n\tthis.document = document || mxUtils.createXmlDocument();\n\tthis.objects = [];\n};\n\n/**\n * Variable: document\n *\n * The owner document of the codec.\n */\nmxCodec.prototype.document = null;\n\n/**\n * Variable: objects\n *\n * Maps from IDs to objects.\n */\nmxCodec.prototype.objects = null;\n\n/**\n * Variable: elements\n * \n * Lookup table for resolving IDs to elements.\n */\nmxCodec.prototype.elements = null;\n\n/**\n * Variable: encodeDefaults\n *\n * Specifies if default values should be encoded. Default is false.\n */\nmxCodec.prototype.encodeDefaults = false;\n\n\n/**\n * Function: putObject\n * \n * Assoiates the given object with the given ID and returns the given object.\n * \n * Parameters\n * \n * id - ID for the object to be associated with.\n * obj - Object to be associated with the ID.\n */\nmxCodec.prototype.putObject = function(id, obj)\n{\n\tthis.objects[id] = obj;\n\t\n\treturn obj;\n};\n\n/**\n * Function: getObject\n *\n * Returns the decoded object for the element with the specified ID in\n * <document>. If the object is not known then <lookup> is used to find an\n * object. If no object is found, then the element with the respective ID\n * from the document is parsed using <decode>.\n */\nmxCodec.prototype.getObject = function(id)\n{\n\tvar obj = null;\n\n\tif (id != null)\n\t{\n\t\tobj = this.objects[id];\n\t\t\n\t\tif (obj == null)\n\t\t{\n\t\t\tobj = this.lookup(id);\n\t\t\t\n\t\t\tif (obj == null)\n\t\t\t{\n\t\t\t\tvar node = this.getElementById(id);\n\t\t\t\t\n\t\t\t\tif (node != null)\n\t\t\t\t{\n\t\t\t\t\tobj = this.decode(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn obj;\n};\n\n/**\n * Function: lookup\n *\n * Hook for subclassers to implement a custom lookup mechanism for cell IDs.\n * This implementation always returns null.\n *\n * Example:\n *\n * (code)\n * var codec = new mxCodec();\n * codec.lookup = function(id)\n * {\n *   return model.getCell(id);\n * };\n * (end)\n *\n * Parameters:\n *\n * id - ID of the object to be returned.\n */\nmxCodec.prototype.lookup = function(id)\n{\n\treturn null;\n};\n\n/**\n * Function: getElementById\n *\n * Returns the element with the given ID from <document>.\n *\n * Parameters:\n *\n * id - String that contains the ID.\n */\nmxCodec.prototype.getElementById = function(id)\n{\n\tthis.updateElements();\n\t\n\treturn this.elements[id];\n};\n\n/**\n * Function: updateElements\n *\n * Returns the element with the given ID from <document>.\n *\n * Parameters:\n *\n * id - String that contains the ID.\n */\nmxCodec.prototype.updateElements = function()\n{\n\tif (this.elements == null)\n\t{\n\t\tthis.elements = new Object();\n\t\t\n\t\tif (this.document.documentElement != null)\n\t\t{\n\t\t\tthis.addElement(this.document.documentElement);\n\t\t}\n\t}\n};\n\n/**\n * Function: addElement\n *\n * Adds the given element to <elements> if it has an ID.\n */\nmxCodec.prototype.addElement = function(node)\n{\n\tif (node.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t{\n\t\tvar id = node.getAttribute('id');\n\t\t\n\t\tif (id != null)\n\t\t{\n\t\t\tif (this.elements[id] == null)\n\t\t\t{\n\t\t\t\tthis.elements[id] = node;\n\t\t\t}\n\t\t\telse if (this.elements[id] != node)\n\t\t\t{\n\t\t\t\tthrow new Error(id + ': Duplicate ID');\n\t\t\t}\n\t\t}\n\t}\n\t\n\tnode = node.firstChild;\n\t\n\twhile (node != null)\n\t{\n\t\tthis.addElement(node);\n\t\tnode = node.nextSibling;\n\t}\n};\n\n/**\n * Function: getId\n *\n * Returns the ID of the specified object. This implementation\n * calls <reference> first and if that returns null handles\n * the object as an <mxCell> by returning their IDs using\n * <mxCell.getId>. If no ID exists for the given cell, then\n * an on-the-fly ID is generated using <mxCellPath.create>.\n *\n * Parameters:\n *\n * obj - Object to return the ID for.\n */\nmxCodec.prototype.getId = function(obj)\n{\n\tvar id = null;\n\t\n\tif (obj != null)\n\t{\n\t\tid = this.reference(obj);\n\t\t\n\t\tif (id == null && obj instanceof mxCell)\n\t\t{\n\t\t\tid = obj.getId();\n\t\t\t\n\t\t\tif (id == null)\n\t\t\t{\n\t\t\t\t// Uses an on-the-fly Id\n\t\t\t\tid = mxCellPath.create(obj);\n\t\t\t\t\n\t\t\t\tif (id.length == 0)\n\t\t\t\t{\n\t\t\t\t\tid = 'root';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn id;\n};\n\n/**\n * Function: reference\n *\n * Hook for subclassers to implement a custom method\n * for retrieving IDs from objects. This implementation\n * always returns null.\n *\n * Example:\n *\n * (code)\n * var codec = new mxCodec();\n * codec.reference = function(obj)\n * {\n *   return obj.getCustomId();\n * };\n * (end)\n *\n * Parameters:\n *\n * obj - Object whose ID should be returned.\n */\nmxCodec.prototype.reference = function(obj)\n{\n\treturn null;\n};\n\n/**\n * Function: encode\n *\n * Encodes the specified object and returns the resulting\n * XML node.\n *\n * Parameters:\n *\n * obj - Object to be encoded. \n */\nmxCodec.prototype.encode = function(obj)\n{\n\tvar node = null;\n\t\n\tif (obj != null && obj.constructor != null)\n\t{\n\t\tvar enc = mxCodecRegistry.getCodec(obj.constructor);\n\t\t\n\t\tif (enc != null)\n\t\t{\n\t\t\tnode = enc.encode(this, obj);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (mxUtils.isNode(obj))\n\t\t\t{\n\t\t\t\tnode = mxUtils.importNode(this.document, obj, true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t    \t\tmxLog.warn('mxCodec.encode: No codec for ' + mxUtils.getFunctionName(obj.constructor));\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn node;\n};\n\n/**\n * Function: decode\n *\n * Decodes the given XML node. The optional \"into\"\n * argument specifies an existing object to be\n * used. If no object is given, then a new instance\n * is created using the constructor from the codec.\n *\n * The function returns the passed in object or\n * the new instance if no object was given.\n *\n * Parameters:\n *\n * node - XML node to be decoded.\n * into - Optional object to be decodec into.\n */\nmxCodec.prototype.decode = function(node, into)\n{\n\tthis.updateElements();\n\tvar obj = null;\n\t\n\tif (node != null && node.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t{\n\t\tvar ctor = null;\n\t\t\n\t\ttry\n\t\t{\n\t\t\tctor = window[node.nodeName];\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\t// ignore\n\t\t}\n\t\t\n\t\tvar dec = mxCodecRegistry.getCodec(ctor);\n\t\t\n\t\tif (dec != null)\n\t\t{\n\t\t\tobj = dec.decode(this, node, into);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tobj = node.cloneNode(true);\n\t\t\tobj.removeAttribute('as');\n\t\t}\n\t}\n\t\n\treturn obj;\n};\n\n/**\n * Function: encodeCell\n *\n * Encoding of cell hierarchies is built-into the core, but\n * is a higher-level function that needs to be explicitely\n * used by the respective object encoders (eg. <mxModelCodec>,\n * <mxChildChangeCodec> and <mxRootChangeCodec>). This\n * implementation writes the given cell and its children as a\n * (flat) sequence into the given node. The children are not\n * encoded if the optional includeChildren is false. The\n * function is in charge of adding the result into the\n * given node and has no return value.\n *\n * Parameters:\n *\n * cell - <mxCell> to be encoded.\n * node - Parent XML node to add the encoded cell into.\n * includeChildren - Optional boolean indicating if the\n * function should include all descendents. Default is true. \n */\nmxCodec.prototype.encodeCell = function(cell, node, includeChildren)\n{\n\tnode.appendChild(this.encode(cell));\n\t\n\tif (includeChildren == null || includeChildren)\n\t{\n\t\tvar childCount = cell.getChildCount();\n\t\t\n\t\tfor (var i = 0; i < childCount; i++)\n\t\t{\n\t\t\tthis.encodeCell(cell.getChildAt(i), node);\n\t\t}\n\t}\n};\n\n/**\n * Function: isCellCodec\n * \n * Returns true if the given codec is a cell codec. This uses\n * <mxCellCodec.isCellCodec> to check if the codec is of the\n * given type.\n */\nmxCodec.prototype.isCellCodec = function(codec)\n{\n\tif (codec != null && typeof(codec.isCellCodec) == 'function')\n\t{\n\t\treturn codec.isCellCodec();\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: decodeCell\n *\n * Decodes cells that have been encoded using inversion, ie.\n * where the user object is the enclosing node in the XML,\n * and restores the group and graph structure in the cells.\n * Returns a new <mxCell> instance that represents the\n * given node.\n *\n * Parameters:\n *\n * node - XML node that contains the cell data.\n * restoreStructures - Optional boolean indicating whether\n * the graph structure should be restored by calling insert\n * and insertEdge on the parent and terminals, respectively.\n * Default is true.\n */\nmxCodec.prototype.decodeCell = function(node, restoreStructures)\n{\n\trestoreStructures = (restoreStructures != null) ? restoreStructures : true;\n\tvar cell = null;\n\t\n\tif (node != null && node.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t{\n\t\t// Tries to find a codec for the given node name. If that does\n\t\t// not return a codec then the node is the user object (an XML node\n\t\t// that contains the mxCell, aka inversion).\n\t\tvar decoder = mxCodecRegistry.getCodec(node.nodeName);\n\t\t\n\t\t// Tries to find the codec for the cell inside the user object.\n\t\t// This assumes all node names inside the user object are either\n\t\t// not registered or they correspond to a class for cells.\n\t\tif (!this.isCellCodec(decoder))\n\t\t{\n\t\t\tvar child = node.firstChild;\n\t\t\t\n\t\t\twhile (child != null && !this.isCellCodec(decoder))\n\t\t\t{\n\t\t\t\tdecoder = mxCodecRegistry.getCodec(child.nodeName);\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!this.isCellCodec(decoder))\n\t\t{\n\t\t\tdecoder = mxCodecRegistry.getCodec(mxCell);\n\t\t}\n\n\t\tcell = decoder.decode(this, node);\n\t\t\n\t\tif (restoreStructures)\n\t\t{\n\t\t\tthis.insertIntoGraph(cell);\n\t\t}\n\t}\n\t\n\treturn cell;\n};\n\n/**\n * Function: insertIntoGraph\n *\n * Inserts the given cell into its parent and terminal cells.\n */\nmxCodec.prototype.insertIntoGraph = function(cell)\n{\n\tvar parent = cell.parent;\n\tvar source = cell.getTerminal(true);\n\tvar target = cell.getTerminal(false);\n\n\t// Fixes possible inconsistencies during insert into graph\n\tcell.setTerminal(null, false);\n\tcell.setTerminal(null, true);\n\tcell.parent = null;\n\t\n\tif (parent != null)\n\t{\n\t\tif (parent == cell)\n\t\t{\n\t\t\tthrow new Error(parent.id + ': Self Reference');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparent.insert(cell);\n\t\t}\n\t}\n\n\tif (source != null)\n\t{\n\t\tsource.insertEdge(cell, true);\n\t}\n\n\tif (target != null)\n\t{\n\t\ttarget.insertEdge(cell, false);\n\t}\n};\n\n/**\n * Function: setAttribute\n *\n * Sets the attribute on the specified node to value. This is a\n * helper method that makes sure the attribute and value arguments\n * are not null.\n *\n * Parameters:\n *\n * node - XML node to set the attribute for.\n * attributes - Attributename to be set.\n * value - New value of the attribute.\n */\nmxCodec.prototype.setAttribute = function(node, attribute, value)\n{\n\tif (attribute != null && value != null)\n\t{\n\t\tnode.setAttribute(attribute, value);\n\t}\n};\n\n__mxOutput.mxCodec = typeof mxCodec !== 'undefined' ? mxCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxObjectCodec\n *\n * Generic codec for JavaScript objects that implements a mapping between\n * JavaScript objects and XML nodes that maps each field or element to an\n * attribute or child node, and vice versa.\n * \n * Atomic Values:\n * \n * Consider the following example.\n * \n * (code)\n * var obj = new Object();\n * obj.foo = \"Foo\";\n * obj.bar = \"Bar\";\n * (end)\n * \n * This object is encoded into an XML node using the following.\n * \n * (code)\n * var enc = new mxCodec();\n * var node = enc.encode(obj);\n * (end)\n * \n * The output of the encoding may be viewed using <mxLog> as follows.\n * \n * (code)\n * mxLog.show();\n * mxLog.debug(mxUtils.getPrettyXml(node));\n * (end)\n * \n * Finally, the result of the encoding looks as follows.\n * \n * (code)\n * <Object foo=\"Foo\" bar=\"Bar\"/>\n * (end)\n * \n * In the above output, the foo and bar fields have been mapped to attributes\n * with the same names, and the name of the constructor was used for the\n * nodename.\n * \n * Booleans:\n *\n * Since booleans are numbers in JavaScript, all boolean values are encoded\n * into 1 for true and 0 for false. The decoder also accepts the string true\n * and false for boolean values.\n * \n * Objects:\n * \n * The above scheme is applied to all atomic fields, that is, to all non-object\n * fields of an object. For object fields, a child node is created with a\n * special attribute that contains the fieldname. This special attribute is\n * called \"as\" and hence, as is a reserved word that should not be used for a\n * fieldname.\n * \n * Consider the following example where foo is an object and bar is an atomic\n * property of foo.\n * \n * (code)\n * var obj = {foo: {bar: \"Bar\"}};\n * (end)\n * \n * This will be mapped to the following XML structure by mxObjectCodec.\n * \n * (code)\n * <Object>\n *   <Object bar=\"Bar\" as=\"foo\"/>\n * </Object>\n * (end)\n * \n * In the above output, the inner Object node contains the as-attribute that\n * specifies the fieldname in the enclosing object. That is, the field foo was\n * mapped to a child node with an as-attribute that has the value foo.\n * \n * Arrays:\n * \n * Arrays are special objects that are either associative, in which case each\n * key, value pair is treated like a field where the key is the fieldname, or\n * they are a sequence of atomic values and objects, which is mapped to a\n * sequence of child nodes. For object elements, the above scheme is applied\n * without the use of the special as-attribute for creating each child. For\n * atomic elements, a special add-node is created with the value stored in the\n * value-attribute.\n * \n * For example, the following array contains one atomic value and one object\n * with a field called bar. Furthermore it contains two associative entries\n * called bar with an atomic value, and foo with an object value.\n * \n * (code)\n * var obj = [\"Bar\", {bar: \"Bar\"}];\n * obj[\"bar\"] = \"Bar\";\n * obj[\"foo\"] = {bar: \"Bar\"};\n * (end)\n * \n * This array is represented by the following XML nodes.\n * \n * (code)\n * <Array bar=\"Bar\">\n *   <add value=\"Bar\"/>\n *   <Object bar=\"Bar\"/>\n *   <Object bar=\"Bar\" as=\"foo\"/>\n * </Array>\n * (end)\n * \n * The Array node name is the name of the constructor. The additional\n * as-attribute in the last child contains the key of the associative entry,\n * whereas the second last child is part of the array sequence and does not\n * have an as-attribute.\n * \n * References:\n * \n * Objects may be represented as child nodes or attributes with ID values,\n * which are used to lookup the object in a table within <mxCodec>. The\n * <isReference> function is in charge of deciding if a specific field should\n * be encoded as a reference or not. Its default implementation returns true if\n * the fieldname is in <idrefs>, an array of strings that is used to configure\n * the <mxObjectCodec>.\n * \n * Using this approach, the mapping does not guarantee that the referenced\n * object itself exists in the document. The fields that are encoded as\n * references must be carefully chosen to make sure all referenced objects\n * exist in the document, or may be resolved by some other means if necessary.\n * \n * For example, in the case of the graph model all cells are stored in a tree\n * whose root is referenced by the model's root field. A tree is a structure\n * that is well suited for an XML representation, however, the additional edges\n * in the graph model have a reference to a source and target cell, which are\n * also contained in the tree. To handle this case, the source and target cell\n * of an edge are treated as references, whereas the children are treated as\n * objects. Since all cells are contained in the tree and no edge references a\n * source or target outside the tree, this setup makes sure all referenced\n * objects are contained in the document.\n * \n * In the case of a tree structure we must further avoid infinite recursion by\n * ignoring the parent reference of each child. This is done by returning true\n * in <isExcluded>, whose default implementation uses the array of excluded\n * fieldnames passed to the mxObjectCodec constructor.\n * \n * References are only used for cells in mxGraph. For defining other\n * referencable object types, the codec must be able to work out the ID of an\n * object. This is done by implementing <mxCodec.reference>. For decoding a\n * reference, the XML node with the respective id-attribute is fetched from the\n * document, decoded, and stored in a lookup table for later reference. For\n * looking up external objects, <mxCodec.lookup> may be implemented.\n * \n * Expressions:\n * \n * For decoding JavaScript expressions, the add-node may be used with a text\n * content that contains the JavaScript expression. For example, the following\n * creates a field called foo in the enclosing object and assigns it the value\n * of <mxConstants.ALIGN_LEFT>.\n * \n * (code)\n * <Object>\n *   <add as=\"foo\">mxConstants.ALIGN_LEFT</add>\n * </Object>\n * (end)\n * \n * The resulting object has a field called foo with the value \"left\". Its XML\n * representation looks as follows.\n * \n * (code)\n * <Object foo=\"left\"/>\n * (end)\n * \n * This means the expression is evaluated at decoding time and the result of\n * the evaluation is stored in the respective field. Valid expressions are all\n * JavaScript expressions, including function definitions, which are mapped to\n * functions on the resulting object.\n * \n * Expressions are only evaluated if <allowEval> is true.\n * \n * Constructor: mxObjectCodec\n *\n * Constructs a new codec for the specified template object.\n * The variables in the optional exclude array are ignored by\n * the codec. Variables in the optional idrefs array are\n * turned into references in the XML. The optional mapping\n * may be used to map from variable names to XML attributes.\n * The argument is created as follows:\n *\n * (code)\n * var mapping = new Object();\n * mapping['variableName'] = 'attribute-name';\n * (end)\n *\n * Parameters:\n *\n * template - Prototypical instance of the object to be\n * encoded/decoded.\n * exclude - Optional array of fieldnames to be ignored.\n * idrefs - Optional array of fieldnames to be converted to/from\n * references.\n * mapping - Optional mapping from field- to attributenames.\n */\nfunction mxObjectCodec(template, exclude, idrefs, mapping)\n{\n\tthis.template = template;\n\t\n\tthis.exclude = (exclude != null) ? exclude : [];\n\tthis.idrefs = (idrefs != null) ? idrefs : [];\n\tthis.mapping = (mapping != null) ? mapping : [];\n\t\n\tthis.reverse = new Object();\n\t\n\tfor (var i in this.mapping)\n\t{\n\t\tthis.reverse[this.mapping[i]] = i;\n\t}\n};\n\n/**\n * Variable: allowEval\n *\n * Static global switch that specifies if expressions in arrays are allowed.\n * Default is false. NOTE: Enabling this carries a possible security risk.\n */\nmxObjectCodec.allowEval = false;\n\n/**\n * Variable: template\n *\n * Holds the template object associated with this codec.\n */\nmxObjectCodec.prototype.template = null;\n\n/**\n * Variable: exclude\n *\n * Array containing the variable names that should be\n * ignored by the codec.\n */\nmxObjectCodec.prototype.exclude = null;\n\n/**\n * Variable: idrefs\n *\n * Array containing the variable names that should be\n * turned into or converted from references. See\n * <mxCodec.getId> and <mxCodec.getObject>.\n */\nmxObjectCodec.prototype.idrefs = null;\n\n/**\n * Variable: mapping\n *\n * Maps from from fieldnames to XML attribute names.\n */\nmxObjectCodec.prototype.mapping = null;\n\n/**\n * Variable: reverse\n *\n * Maps from from XML attribute names to fieldnames.\n */\nmxObjectCodec.prototype.reverse = null;\n\n/**\n * Function: getName\n * \n * Returns the name used for the nodenames and lookup of the codec when\n * classes are encoded and nodes are decoded. For classes to work with\n * this the codec registry automatically adds an alias for the classname\n * if that is different than what this returns. The default implementation\n * returns the classname of the template class.\n */\nmxObjectCodec.prototype.getName = function()\n{\n\treturn mxUtils.getFunctionName(this.template.constructor);\n};\n\n/**\n * Function: cloneTemplate\n * \n * Returns a new instance of the template for this codec.\n */\nmxObjectCodec.prototype.cloneTemplate = function()\n{\n\treturn new this.template.constructor();\n};\n\n/**\n * Function: getFieldName\n * \n * Returns the fieldname for the given attributename.\n * Looks up the value in the <reverse> mapping or returns\n * the input if there is no reverse mapping for the\n * given name.\n */\nmxObjectCodec.prototype.getFieldName = function(attributename)\n{\n\tif (attributename != null)\n\t{\n\t\tvar mapped = this.reverse[attributename];\n\t\t\n\t\tif (mapped != null)\n\t\t{\n\t\t\tattributename = mapped;\n\t\t}\n\t}\n\t\n\treturn attributename;\n};\n\n/**\n * Function: getAttributeName\n * \n * Returns the attributename for the given fieldname.\n * Looks up the value in the <mapping> or returns\n * the input if there is no mapping for the\n * given name.\n */\nmxObjectCodec.prototype.getAttributeName = function(fieldname)\n{\n\tif (fieldname != null)\n\t{\n\t\tvar mapped = this.mapping[fieldname];\n\t\t\n\t\tif (mapped != null)\n\t\t{\n\t\t\tfieldname = mapped;\n\t\t}\n\t}\n\t\n\treturn fieldname;\n};\n\n/**\n * Function: isExcluded\n *\n * Returns true if the given attribute is to be ignored by the codec. This\n * implementation returns true if the given fieldname is in <exclude> or\n * if the fieldname equals <mxObjectIdentity.FIELD_NAME>.\n *\n * Parameters:\n *\n * obj - Object instance that contains the field.\n * attr - Fieldname of the field.\n * value - Value of the field.\n * write - Boolean indicating if the field is being encoded or decoded.\n * Write is true if the field is being encoded, else it is being decoded.\n */\nmxObjectCodec.prototype.isExcluded = function(obj, attr, value, write)\n{\n\treturn attr == mxObjectIdentity.FIELD_NAME ||\n\t\tmxUtils.indexOf(this.exclude, attr) >= 0;\n};\n\n/**\n * Function: isReference\n *\n * Returns true if the given fieldname is to be treated\n * as a textual reference (ID). This implementation returns\n * true if the given fieldname is in <idrefs>.\n *\n * Parameters:\n *\n * obj - Object instance that contains the field.\n * attr - Fieldname of the field.\n * value - Value of the field. \n * write - Boolean indicating if the field is being encoded or decoded.\n * Write is true if the field is being encoded, else it is being decoded.\n */\nmxObjectCodec.prototype.isReference = function(obj, attr, value, write)\n{\n\treturn mxUtils.indexOf(this.idrefs, attr) >= 0;\n};\n\n/**\n * Function: encode\n *\n * Encodes the specified object and returns a node\n * representing then given object. Calls <beforeEncode>\n * after creating the node and <afterEncode> with the \n * resulting node after processing.\n *\n * Enc is a reference to the calling encoder. It is used\n * to encode complex objects and create references.\n *\n * This implementation encodes all variables of an\n * object according to the following rules:\n *\n * - If the variable name is in <exclude> then it is ignored.\n * - If the variable name is in <idrefs> then <mxCodec.getId>\n * is used to replace the object with its ID.\n * - The variable name is mapped using <mapping>.\n * - If obj is an array and the variable name is numeric\n * (ie. an index) then it is not encoded.\n * - If the value is an object, then the codec is used to\n * create a child node with the variable name encoded into\n * the \"as\" attribute.\n * - Else, if <encodeDefaults> is true or the value differs\n * from the template value, then ...\n * - ... if obj is not an array, then the value is mapped to\n * an attribute.\n * - ... else if obj is an array, the value is mapped to an\n * add child with a value attribute or a text child node,\n * if the value is a function.\n *\n * If no ID exists for a variable in <idrefs> or if an object\n * cannot be encoded, a warning is issued using <mxLog.warn>.\n *\n * Returns the resulting XML node that represents the given\n * object.\n *\n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * obj - Object to be encoded.\n */\nmxObjectCodec.prototype.encode = function(enc, obj)\n{\n\tvar node = enc.document.createElement(this.getName());\n\t\n\tobj = this.beforeEncode(enc, obj, node);\n\tthis.encodeObject(enc, obj, node);\n\t\n\treturn this.afterEncode(enc, obj, node);\n};\n\t\n/**\n * Function: encodeObject\n *\n * Encodes the value of each member in then given obj into the given node using\n * <encodeValue>.\n * \n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * obj - Object to be encoded.\n * node - XML node that contains the encoded object.\n */\nmxObjectCodec.prototype.encodeObject = function(enc, obj, node)\n{\n\tenc.setAttribute(node, 'id', enc.getId(obj));\n\t\n    for (var i in obj)\n    {\n\t\tvar name = i;\n\t\tvar value = obj[name];\n\t\t\n    \tif (value != null && !this.isExcluded(obj, name, value, true))\n    \t{\n    \t\tif (mxUtils.isInteger(name))\n    \t\t{\n    \t\t\tname = null;\n    \t\t}\n    \t\t\n    \t\tthis.encodeValue(enc, obj, name, value, node);\n    \t}\n    }\n};\n\n/**\n * Function: encodeValue\n * \n * Converts the given value according to the mappings\n * and id-refs in this codec and uses <writeAttribute>\n * to write the attribute into the given node.\n * \n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * obj - Object whose property is going to be encoded.\n * name - XML node that contains the encoded object.\n * value - Value of the property to be encoded.\n * node - XML node that contains the encoded object.\n */\nmxObjectCodec.prototype.encodeValue = function(enc, obj, name, value, node)\n{\n\tif (value != null)\n\t{\n\t\tif (this.isReference(obj, name, value, true))\n\t\t{\n\t\t\tvar tmp = enc.getId(value);\n\t\t\t\n\t\t\tif (tmp == null)\n\t\t\t{\n\t\t    \tmxLog.warn('mxObjectCodec.encode: No ID for ' +\n\t\t    \t\tthis.getName() + '.' + name + '=' + value);\n\t\t    \treturn; // exit\n\t\t    }\n\t\t    \n\t\t    value = tmp;\n\t\t}\n\n\t\tvar defaultValue = this.template[name];\n\t\t\n\t\t// Checks if the value is a default value and\n\t\t// the name is correct\n\t\tif (name == null || enc.encodeDefaults || defaultValue != value)\n\t\t{\n\t\t\tname = this.getAttributeName(name);\n\t\t\tthis.writeAttribute(enc, obj, name, value, node);\t\n\t\t}\n\t}\n};\n\n/**\n * Function: writeAttribute\n * \n * Writes the given value into node using <writePrimitiveAttribute>\n * or <writeComplexAttribute> depending on the type of the value.\n */\nmxObjectCodec.prototype.writeAttribute = function(enc, obj, name, value, node)\n{\n\tif (typeof(value) != 'object' /* primitive type */)\n\t{\n\t\tthis.writePrimitiveAttribute(enc, obj, name, value, node);\n\t}\n\telse /* complex type */\n\t{\n\t\tthis.writeComplexAttribute(enc, obj, name, value, node);\n\t}\n};\n\n/**\n * Function: writePrimitiveAttribute\n * \n * Writes the given value as an attribute of the given node.\n */\nmxObjectCodec.prototype.writePrimitiveAttribute = function(enc, obj, name, value, node)\n{\n\tvalue = this.convertAttributeToXml(enc, obj, name, value, node);\n\t\n\tif (name == null)\n\t{\n\t\tvar child = enc.document.createElement('add');\n\t\t\n\t\tif (typeof(value) == 'function')\n\t\t{\n    \t\tchild.appendChild(enc.document.createTextNode(value));\n    \t}\n    \telse\n    \t{\n    \t\tenc.setAttribute(child, 'value', value);\n    \t}\n    \t\n\t\tnode.appendChild(child);\n\t}\n\telse if (typeof(value) != 'function')\n\t{\n    \tenc.setAttribute(node, name, value);\n\t}\t\t\n};\n\t\n/**\n * Function: writeComplexAttribute\n * \n * Writes the given value as a child node of the given node.\n */\nmxObjectCodec.prototype.writeComplexAttribute = function(enc, obj, name, value, node)\n{\n\tvar child = enc.encode(value);\n\t\n\tif (child != null)\n\t{\n\t\tif (name != null)\n\t\t{\n    \t\tchild.setAttribute('as', name);\n    \t}\n    \t\n    \tnode.appendChild(child);\n\t}\n\telse\n\t{\n\t\tmxLog.warn('mxObjectCodec.encode: No node for ' + this.getName() + '.' + name + ': ' + value);\n\t}\n};\n\n/**\n * Function: convertAttributeToXml\n * \n * Converts true to \"1\" and false to \"0\" is <isBooleanAttribute> returns true.\n * All other values are not converted.\n * \n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * obj - Objec to convert the attribute for.\n * name - Name of the attribute to be converted.\n * value - Value to be converted.\n */\nmxObjectCodec.prototype.convertAttributeToXml = function(enc, obj, name, value)\n{\n\t// Makes sure to encode boolean values as numeric values\n\tif (this.isBooleanAttribute(enc, obj, name, value))\n\t{\t\n\t\t// Checks if the value is true (do not use the value as is, because\n\t\t// this would check if the value is not null, so 0 would be true)\n\t\tvalue = (value == true) ? '1' : '0';\n\t}\n\t\n\treturn value;\n};\n\n/**\n * Function: isBooleanAttribute\n * \n * Returns true if the given object attribute is a boolean value.\n * \n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * obj - Objec to convert the attribute for.\n * name - Name of the attribute to be converted.\n * value - Value of the attribute to be converted.\n */\nmxObjectCodec.prototype.isBooleanAttribute = function(enc, obj, name, value)\n{\n\treturn (typeof(value.length) == 'undefined' && (value == true || value == false));\n};\n\n/**\n * Function: convertAttributeFromXml\n * \n * Converts booleans and numeric values to the respective types. Values are\n * numeric if <isNumericAttribute> returns true.\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * attr - XML attribute to be converted.\n * obj - Objec to convert the attribute for.\n */\nmxObjectCodec.prototype.convertAttributeFromXml = function(dec, attr, obj)\n{\n\tvar value = attr.value;\n\t\n\tif (this.isNumericAttribute(dec, attr, obj))\n\t{\n\t\tvalue = parseFloat(value);\n\t\t\n\t\tif (isNaN(value) || !isFinite(value))\n\t\t{\n\t\t\tvalue = 0;\n\t\t}\n\t}\n\t\n\treturn value;\n};\n\n/**\n * Function: isNumericAttribute\n * \n * Returns true if the given XML attribute is or should be a numeric value.\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * attr - XML attribute to be converted.\n * obj - Objec to convert the attribute for.\n */\nmxObjectCodec.prototype.isNumericAttribute = function(dec, attr, obj)\n{\n\t// Handles known numeric attributes for generic objects\n\tvar result = (obj.constructor == mxGeometry &&\n\t\t(attr.name == 'x' || attr.name == 'y' ||\n\t\tattr.name == 'width' || attr.name == 'height')) ||\n\t\t(obj.constructor == mxPoint &&\n\t\t(attr.name == 'x' || attr.name == 'y')) ||\n\t\tmxUtils.isNumeric(attr.value);\n\t\n\treturn result;\n};\n\n/**\n * Function: beforeEncode\n *\n * Hook for subclassers to pre-process the object before\n * encoding. This returns the input object. The return\n * value of this function is used in <encode> to perform\n * the default encoding into the given node.\n *\n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * obj - Object to be encoded.\n * node - XML node to encode the object into.\n */\nmxObjectCodec.prototype.beforeEncode = function(enc, obj, node)\n{\n\treturn obj;\n};\n\n/**\n * Function: afterEncode\n *\n * Hook for subclassers to post-process the node\n * for the given object after encoding and return the\n * post-processed node. This implementation returns \n * the input node. The return value of this method\n * is returned to the encoder from <encode>.\n *\n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * obj - Object to be encoded.\n * node - XML node that represents the default encoding.\n */\nmxObjectCodec.prototype.afterEncode = function(enc, obj, node)\n{\n\treturn node;\n};\n\n/**\n * Function: decode\n *\n * Parses the given node into the object or returns a new object\n * representing the given node.\n *\n * Dec is a reference to the calling decoder. It is used to decode\n * complex objects and resolve references.\n *\n * If a node has an id attribute then the object cache is checked for the\n * object. If the object is not yet in the cache then it is constructed\n * using the constructor of <template> and cached in <mxCodec.objects>.\n *\n * This implementation decodes all attributes and childs of a node\n * according to the following rules:\n *\n * - If the variable name is in <exclude> or if the attribute name is \"id\"\n * or \"as\" then it is ignored.\n * - If the variable name is in <idrefs> then <mxCodec.getObject> is used\n * to replace the reference with an object.\n * - The variable name is mapped using a reverse <mapping>.\n * - If the value has a child node, then the codec is used to create a\n * child object with the variable name taken from the \"as\" attribute.\n * - If the object is an array and the variable name is empty then the\n * value or child object is appended to the array.\n * - If an add child has no value or the object is not an array then\n * the child text content is evaluated using <mxUtils.eval>.\n *\n * For add nodes where the object is not an array and the variable name\n * is defined, the default mechanism is used, allowing to override/add\n * methods as follows:\n *\n * (code)\n * <Object>\n *   <add as=\"hello\"><![CDATA[\n *     function(arg1) {\n *       mxUtils.alert('Hello '+arg1);\n *     }\n *   ]]></add>\n * </Object>\n * (end) \n *\n * If no object exists for an ID in <idrefs> a warning is issued\n * using <mxLog.warn>.\n *\n * Returns the resulting object that represents the given XML node\n * or the object given to the method as the into parameter.\n *\n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * node - XML node to be decoded.\n * into - Optional objec to encode the node into.\n */\nmxObjectCodec.prototype.decode = function(dec, node, into)\n{\n\tvar id = node.getAttribute('id');\n\tvar obj = dec.objects[id];\n\t\n\tif (obj == null)\n\t{\n\t\tobj = into || this.cloneTemplate();\n\t\t\n\t\tif (id != null)\n\t\t{\n\t\t\tdec.putObject(id, obj);\n\t\t}\n\t}\n\t\n\tnode = this.beforeDecode(dec, node, obj);\n\tthis.decodeNode(dec, node, obj);\n\t\n    return this.afterDecode(dec, node, obj);\n};\t\n\n/**\n * Function: decodeNode\n * \n * Calls <decodeAttributes> and <decodeChildren> for the given node.\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * node - XML node to be decoded.\n * obj - Objec to encode the node into.\n */\t\nmxObjectCodec.prototype.decodeNode = function(dec, node, obj)\n{\n\tif (node != null)\n\t{\n\t\tthis.decodeAttributes(dec, node, obj);\n\t\tthis.decodeChildren(dec, node, obj);\n\t}\n};\n\n/**\n * Function: decodeAttributes\n * \n * Decodes all attributes of the given node using <decodeAttribute>.\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * node - XML node to be decoded.\n * obj - Objec to encode the node into.\n */\t\nmxObjectCodec.prototype.decodeAttributes = function(dec, node, obj)\n{\n\tvar attrs = node.attributes;\n\t\n\tif (attrs != null)\n\t{\n\t\tfor (var i = 0; i < attrs.length; i++)\n\t\t{\n\t\t\tthis.decodeAttribute(dec, attrs[i], obj);\n\t\t}\n\t}\n};\n\n/**\n * Function: isIgnoredAttribute\n * \n * Returns true if the given attribute should be ignored. This implementation\n * returns true if the attribute name is \"as\" or \"id\".\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * attr - XML attribute to be decoded.\n * obj - Objec to encode the attribute into.\n */\t\nmxObjectCodec.prototype.isIgnoredAttribute = function(dec, attr, obj)\n{\n\treturn attr.nodeName == 'as' || attr.nodeName == 'id';\n};\n\n/**\n * Function: decodeAttribute\n * \n * Reads the given attribute into the specified object.\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * attr - XML attribute to be decoded.\n * obj - Objec to encode the attribute into.\n */\t\nmxObjectCodec.prototype.decodeAttribute = function(dec, attr, obj)\n{\n\tif (!this.isIgnoredAttribute(dec, attr, obj))\n\t{\n\t\tvar name = attr.nodeName;\n\t\t\n\t\t// Converts the string true and false to their boolean values.\n\t\t// This may require an additional check on the obj to see if\n\t\t// the existing field is a boolean value or uninitialized, in\n\t\t// which case we may want to convert true and false to a string.\n\t\tvar value = this.convertAttributeFromXml(dec, attr, obj);\n\t\tvar fieldname = this.getFieldName(name);\n\t\t\n\t\tif (this.isReference(obj, fieldname, value, false))\n\t\t{\n\t\t\tvar tmp = dec.getObject(value);\n\t\t\t\n\t\t\tif (tmp == null)\n\t\t\t{\n\t\t    \tmxLog.warn('mxObjectCodec.decode: No object for ' +\n\t\t    \t\tthis.getName() + '.' + name + '=' + value);\n\t\t    \treturn; // exit\n\t\t    }\n\t\t    \n\t\t    value = tmp;\n\t\t}\n\n\t\tif (!this.isExcluded(obj, name, value, false))\n\t\t{\n\t\t\t//mxLog.debug(mxUtils.getFunctionName(obj.constructor)+'.'+name+'='+value);\n\t\t\tobj[name] = value;\n\t\t}\n\t}\n};\n\n/**\n * Function: decodeChildren\n * \n * Decodes all children of the given node using <decodeChild>.\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * node - XML node to be decoded.\n * obj - Objec to encode the node into.\n */\t\nmxObjectCodec.prototype.decodeChildren = function(dec, node, obj)\n{\n\tvar child = node.firstChild;\n\t\n\twhile (child != null)\n\t{\n\t\tvar tmp = child.nextSibling;\n\t\t\n\t\tif (child.nodeType == mxConstants.NODETYPE_ELEMENT &&\n\t\t\t!this.processInclude(dec, child, obj))\n\t\t{\n\t\t\tthis.decodeChild(dec, child, obj);\n\t\t}\n\t\t\n\t\tchild = tmp;\n\t}\n};\n\n/**\n * Function: decodeChild\n * \n * Reads the specified child into the given object.\n * \n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * child - XML child element to be decoded.\n * obj - Objec to encode the node into.\n */\t\nmxObjectCodec.prototype.decodeChild = function(dec, child, obj)\n{\n\tvar fieldname = this.getFieldName(child.getAttribute('as'));\n\t\n\tif (fieldname == null || !this.isExcluded(obj, fieldname, child, false))\n\t{\n\t\tvar template = this.getFieldTemplate(obj, fieldname, child);\n\t\tvar value = null;\n\t\t\n\t\tif (child.nodeName == 'add')\n\t\t{\n\t\t\tvalue = child.getAttribute('value');\n\t\t\t\n\t\t\tif (value == null && mxObjectCodec.allowEval)\n\t\t\t{\n\t\t\t\tvalue = mxUtils.eval(mxUtils.getTextContent(child));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvalue = dec.decode(child, template);\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tthis.addObjectValue(obj, fieldname, value, template);\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tthrow new Error(e.message + ' for ' + child.nodeName);\n\t\t}\n\t}\n};\n\n/**\n * Function: getFieldTemplate\n * \n * Returns the template instance for the given field. This returns the\n * value of the field, null if the value is an array or an empty collection\n * if the value is a collection. The value is then used to populate the\n * field for a new instance. For strongly typed languages it may be\n * required to override this to return the correct collection instance\n * based on the encoded child.\n */\t\nmxObjectCodec.prototype.getFieldTemplate = function(obj, fieldname, child)\n{\n\tvar template = obj[fieldname];\n\t\n\t// Non-empty arrays are replaced completely\n    if (template instanceof Array && template.length > 0)\n    {\n        template = null;\n    }\n    \n    return template;\n};\n\n/**\n * Function: addObjectValue\n * \n * Sets the decoded child node as a value of the given object. If the\n * object is a map, then the value is added with the given fieldname as a\n * key. If the fieldname is not empty, then setFieldValue is called or\n * else, if the object is a collection, the value is added to the\n * collection. For strongly typed languages it may be required to\n * override this with the correct code to add an entry to an object.\n */\t\nmxObjectCodec.prototype.addObjectValue = function(obj, fieldname, value, template)\n{\n\tif (value != null && value != template)\n\t{\n\t\tif (fieldname != null && fieldname.length > 0)\n\t\t{\n\t\t\tobj[fieldname] = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tobj.push(value);\n\t\t}\n\t\t//mxLog.debug('Decoded '+mxUtils.getFunctionName(obj.constructor)+'.'+fieldname+': '+value);\n\t}\n};\n\n/**\n * Function: processInclude\n *\n * Returns true if the given node is an include directive and\n * executes the include by decoding the XML document. Returns\n * false if the given node is not an include directive.\n *\n * Parameters:\n *\n * dec - <mxCodec> that controls the encoding/decoding process.\n * node - XML node to be checked.\n * into - Optional object to pass-thru to the codec.\n */\nmxObjectCodec.prototype.processInclude = function(dec, node, into)\n{\n\tif (node.nodeName == 'include')\n\t{\n\t\tvar name = node.getAttribute('name');\n\t\t\n\t\tif (name != null)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tvar xml = mxUtils.load(name).getDocumentElement();\n\t\t\t\t\n\t\t\t\tif (xml != null)\n\t\t\t\t{\n\t\t\t\t\tdec.decode(xml, into);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\t// ignore\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\t\n\treturn false;\n};\n\n/**\n * Function: beforeDecode\n *\n * Hook for subclassers to pre-process the node for\n * the specified object and return the node to be\n * used for further processing by <decode>.\n * The object is created based on the template in the \n * calling method and is never null. This implementation\n * returns the input node. The return value of this\n * function is used in <decode> to perform\n * the default decoding into the given object.\n *\n * Parameters:\n *\n * dec - <mxCodec> that controls the decoding process.\n * node - XML node to be decoded.\n * obj - Object to encode the node into.\n */\nmxObjectCodec.prototype.beforeDecode = function(dec, node, obj)\n{\n\treturn node;\n};\n\n/**\n * Function: afterDecode\n *\n * Hook for subclassers to post-process the object after\n * decoding. This implementation returns the given object\n * without any changes. The return value of this method\n * is returned to the decoder from <decode>.\n *\n * Parameters:\n *\n * enc - <mxCodec> that controls the encoding process.\n * node - XML node to be decoded.\n * obj - Object that represents the default decoding.\n */\nmxObjectCodec.prototype.afterDecode = function(dec, node, obj)\n{\n\treturn obj;\n};\n\n__mxOutput.mxObjectCodec = typeof mxObjectCodec !== 'undefined' ? mxObjectCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxCellCodec\n\t *\n\t * Codec for <mxCell>s. This class is created and registered\n\t * dynamically at load time and used implicitly via <mxCodec>\n\t * and the <mxCodecRegistry>.\n\t *\n\t * Transient Fields:\n\t *\n\t * - children\n\t * - edges\n\t * - overlays\n\t * - mxTransient\n\t *\n\t * Reference Fields:\n\t *\n\t * - parent\n\t * - source\n\t * - target\n\t * \n\t * Transient fields can be added using the following code:\n\t * \n\t * mxCodecRegistry.getCodec(mxCell).exclude.push('name_of_field');\n\t * \n\t * To subclass <mxCell>, replace the template and add an alias as\n\t * follows.\n\t * \n\t * (code)\n\t * function CustomCell(value, geometry, style)\n\t * {\n\t *   mxCell.apply(this, arguments);\n\t * }\n\t * \n\t * mxUtils.extend(CustomCell, mxCell);\n\t * \n\t * mxCodecRegistry.getCodec(mxCell).template = new CustomCell();\n\t * mxCodecRegistry.addAlias('CustomCell', 'mxCell');\n\t * (end)\n\t */\n\tvar codec = new mxObjectCodec(new mxCell(),\n\t\t['children', 'edges', 'overlays', 'mxTransient'],\n\t\t['parent', 'source', 'target']);\n\n\t/**\n\t * Function: isCellCodec\n\t *\n\t * Returns true since this is a cell codec.\n\t */\n\tcodec.isCellCodec = function()\n\t{\n\t\treturn true;\n\t};\n\n\t/**\n\t * Overidden to disable conversion of value to number.\n\t */\n\tcodec.isNumericAttribute = function(dec, attr, obj)\n\t{\n\t\treturn attr.nodeName !== 'value' && mxObjectCodec.prototype.isNumericAttribute.apply(this, arguments);\n\t};\n\t\n\t/**\n\t * Function: isExcluded\n\t *\n\t * Excludes user objects that are XML nodes.\n\t */ \n\tcodec.isExcluded = function(obj, attr, value, isWrite)\n\t{\n\t\treturn mxObjectCodec.prototype.isExcluded.apply(this, arguments) ||\n\t\t\t(isWrite && attr == 'value' &&\n\t\t\tvalue.nodeType == mxConstants.NODETYPE_ELEMENT);\n\t};\n\t\n\t/**\n\t * Function: afterEncode\n\t *\n\t * Encodes an <mxCell> and wraps the XML up inside the\n\t * XML of the user object (inversion).\n\t */\n\tcodec.afterEncode = function(enc, obj, node)\n\t{\n\t\tif (obj.value != null && obj.value.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t{\n\t\t\t// Wraps the graphical annotation up in the user object (inversion)\n\t\t\t// by putting the result of the default encoding into a clone of the\n\t\t\t// user object (node type 1) and returning this cloned user object.\n\t\t\tvar tmp = node;\n\t\t\tnode = mxUtils.importNode(enc.document, obj.value, true);\n\t\t\tnode.appendChild(tmp);\n\t\t\t\n\t\t\t// Moves the id attribute to the outermost XML node, namely the\n\t\t\t// node which denotes the object boundaries in the file.\n\t\t\tvar id = tmp.getAttribute('id');\n\t\t\tnode.setAttribute('id', id);\n\t\t\ttmp.removeAttribute('id');\n\t\t}\n\n\t\treturn node;\n\t};\n\n\t/**\n\t * Function: beforeDecode\n\t *\n\t * Decodes an <mxCell> and uses the enclosing XML node as\n\t * the user object for the cell (inversion).\n\t */\n\tcodec.beforeDecode = function(dec, node, obj)\n\t{\n\t\tvar inner = node.cloneNode(true);\n\t\tvar classname = this.getName();\n\t\t\n\t\tif (node.nodeName != classname)\n\t\t{\n\t\t\t// Passes the inner graphical annotation node to the\n\t\t\t// object codec for further processing of the cell.\n\t\t\tvar tmp = node.getElementsByTagName(classname)[0];\n\t\t\t\n\t\t\tif (tmp != null && tmp.parentNode == node)\n\t\t\t{\n\t\t\t\tmxUtils.removeWhitespace(tmp, true);\n\t\t\t\tmxUtils.removeWhitespace(tmp, false);\n\t\t\t\ttmp.parentNode.removeChild(tmp);\n\t\t\t\tinner = tmp;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinner = null;\n\t\t\t}\n\t\t\t\n\t\t\t// Creates the user object out of the XML node\n\t\t\tobj.value = node.cloneNode(true);\n\t\t\tvar id = obj.value.getAttribute('id');\n\t\t\t\n\t\t\tif (id != null)\n\t\t\t{\n\t\t\t\tobj.setId(id);\n\t\t\t\tobj.value.removeAttribute('id');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Uses ID from XML file as ID for cell in model\n\t\t\tobj.setId(node.getAttribute('id'));\n\t\t}\n\t\t\t\n\t\t// Preprocesses and removes all Id-references in order to use the\n\t\t// correct encoder (this) for the known references to cells (all).\n\t\tif (inner != null)\n\t\t{\n\t\t\tfor (var i = 0; i < this.idrefs.length; i++)\n\t\t\t{\n\t\t\t\tvar attr = this.idrefs[i];\n\t\t\t\tvar ref = inner.getAttribute(attr);\n\t\t\t\t\n\t\t\t\tif (ref != null)\n\t\t\t\t{\n\t\t\t\t\tinner.removeAttribute(attr);\n\t\t\t\t\tvar object = dec.objects[ref] || dec.lookup(ref);\n\t\t\t\t\t\n\t\t\t\t\tif (object == null)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Needs to decode forward reference\n\t\t\t\t\t\tvar element = dec.getElementById(ref);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (element != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar decoder = mxCodecRegistry.codecs[element.nodeName] || this;\n\t\t\t\t\t\t\tobject = decoder.decode(dec, element);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tobj[attr] = object;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn inner;\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxCellCodec = typeof mxCellCodec !== 'undefined' ? mxCellCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxModelCodec\n\t *\n\t * Codec for <mxGraphModel>s. This class is created and registered\n\t * dynamically at load time and used implicitly via <mxCodec>\n\t * and the <mxCodecRegistry>.\n\t */\n\tvar codec = new mxObjectCodec(new mxGraphModel());\n\n\t/**\n\t * Function: encodeObject\n\t *\n\t * Encodes the given <mxGraphModel> by writing a (flat) XML sequence of\n\t * cell nodes as produced by the <mxCellCodec>. The sequence is\n\t * wrapped-up in a node with the name root.\n\t */\n\tcodec.encodeObject = function(enc, obj, node)\n\t{\n\t\tvar rootNode = enc.document.createElement('root');\n\t\tenc.encodeCell(obj.getRoot(), rootNode);\n\t\tnode.appendChild(rootNode);\n\t};\n\n\t/**\n\t * Function: decodeChild\n\t * \n\t * Overrides decode child to handle special child nodes.\n\t */\t\n\tcodec.decodeChild = function(dec, child, obj)\n\t{\n\t\tif (child.nodeName == 'root')\n\t\t{\n\t\t\tthis.decodeRoot(dec, child, obj);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmxObjectCodec.prototype.decodeChild.apply(this, arguments);\n\t\t}\n\t};\n\n\t/**\n\t * Function: decodeRoot\n\t *\n\t * Reads the cells into the graph model. All cells\n\t * are children of the root element in the node.\n\t */\n\tcodec.decodeRoot = function(dec, root, model)\n\t{\n\t\tvar rootCell = null;\n\t\tvar tmp = root.firstChild;\n\t\t\n\t\twhile (tmp != null)\n\t\t{\n\t\t\tvar cell = dec.decodeCell(tmp);\n\t\t\t\n\t\t\tif (cell != null && cell.getParent() == null)\n\t\t\t{\n\t\t\t\trootCell = cell;\n\t\t\t}\n\t\t\t\n\t\t\ttmp = tmp.nextSibling;\n\t\t}\n\n\t\t// Sets the root on the model if one has been decoded\n\t\tif (rootCell != null)\n\t\t{\n\t\t\tmodel.setRoot(rootCell);\n\t\t}\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxModelCodec = typeof mxModelCodec !== 'undefined' ? mxModelCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxRootChangeCodec\n\t *\n\t * Codec for <mxRootChange>s. This class is created and registered\n\t * dynamically at load time and used implicitly via <mxCodec> and\n\t * the <mxCodecRegistry>.\n\t *\n\t * Transient Fields:\n\t *\n\t * - model\n\t * - previous\n\t * - root\n\t */\n\tvar codec = new mxObjectCodec(new mxRootChange(),\n\t\t['model', 'previous', 'root']);\n\n\t/**\n\t * Function: onEncode\n\t *\n\t * Encodes the child recursively.\n\t */\n\tcodec.afterEncode = function(enc, obj, node)\n\t{\n\t\tenc.encodeCell(obj.root, node);\n\t\t\n\t\treturn node;\n\t};\n\n\t/**\n\t * Function: beforeDecode\n\t *\n\t * Decodes the optional children as cells\n\t * using the respective decoder.\n\t */\n\tcodec.beforeDecode = function(dec, node, obj)\n\t{\n\t\tif (node.firstChild != null &&\n\t\t\tnode.firstChild.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t{\n\t\t\t// Makes sure the original node isn't modified\n\t\t\tnode = node.cloneNode(true);\n\t\t\t\n\t\t\tvar tmp = node.firstChild;\n\t\t\tobj.root = dec.decodeCell(tmp, false);\n\n\t\t\tvar tmp2 = tmp.nextSibling;\n\t\t\ttmp.parentNode.removeChild(tmp);\n\t\t\ttmp = tmp2;\n\t\t\n\t\t\twhile (tmp != null)\n\t\t\t{\n\t\t\t\ttmp2 = tmp.nextSibling;\n\t\t\t\tdec.decodeCell(tmp);\n\t\t\t\ttmp.parentNode.removeChild(tmp);\n\t\t\t\ttmp = tmp2;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn node;\n\t};\n\t\n\t/**\n\t * Function: afterDecode\n\t *\n\t * Restores the state by assigning the previous value.\n\t */\n\tcodec.afterDecode = function(dec, node, obj)\n\t{\n\t\tobj.previous = obj.root;\n\t\t\n\t\treturn obj;\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxRootChangeCodec = typeof mxRootChangeCodec !== 'undefined' ? mxRootChangeCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxChildChangeCodec\n\t *\n\t * Codec for <mxChildChange>s. This class is created and registered\n\t * dynamically at load time and used implicitly via <mxCodec> and\n\t * the <mxCodecRegistry>.\n\t *\n\t * Transient Fields:\n\t *\n\t * - model\n\t * - previous\n\t * - previousIndex\n\t * - child\n\t *\n\t * Reference Fields:\n\t *\n\t * - parent\n\t */\n\tvar codec = new mxObjectCodec(new mxChildChange(),\n\t\t['model', 'child', 'previousIndex'],\n\t\t['parent', 'previous']);\n\n\t/**\n\t * Function: isReference\n\t *\n\t * Returns true for the child attribute if the child\n\t * cell had a previous parent or if we're reading the\n\t * child as an attribute rather than a child node, in\n\t * which case it's always a reference.\n\t */\n\tcodec.isReference = function(obj, attr, value, isWrite)\n\t{\n\t\tif (attr == 'child' && (!isWrite || obj.model.contains(obj.previous)))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\treturn mxUtils.indexOf(this.idrefs, attr) >= 0;\n\t};\n\n\t/**\n\t * Function: isExcluded\n\t *\n\t * Excludes references to parent or previous if not in the model.\n\t */\n  \tcodec.isExcluded = function(obj, attr, value, write)\n  \t{\n  \t\treturn mxObjectCodec.prototype.isExcluded.apply(this, arguments) ||\n  \t\t\t(write && value != null && (attr == 'previous' ||\n  \t\t\tattr == 'parent') && !obj.model.contains(value));\n  \t};\n  \t\n\t/**\n\t * Function: afterEncode\n\t *\n\t * Encodes the child recusively and adds the result\n\t * to the given node.\n\t */\n\tcodec.afterEncode = function(enc, obj, node)\n\t{\n\t\tif (this.isReference(obj, 'child', obj.child, true))\n\t\t{\n\t\t\t// Encodes as reference (id)\n\t\t\tnode.setAttribute('child', enc.getId(obj.child));\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// At this point, the encoder is no longer able to know which cells\n\t\t\t// are new, so we have to encode the complete cell hierarchy and\n\t\t\t// ignore the ones that are already there at decoding time. Note:\n\t\t\t// This can only be resolved by moving the notify event into the\n\t\t\t// execute of the edit.\n\t\t\tenc.encodeCell(obj.child, node);\n\t\t}\n\t\t\n\t\treturn node;\n\t};\n\n\t/**\n\t * Function: beforeDecode\n\t *\n\t * Decodes the any child nodes as using the respective\n\t * codec from the registry.\n\t */\n\tcodec.beforeDecode = function(dec, node, obj)\n\t{\n\t\tif (node.firstChild != null &&\n\t\t\tnode.firstChild.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t{\n\t\t\t// Makes sure the original node isn't modified\n\t\t\tnode = node.cloneNode(true);\n\t\t\t\n\t\t\tvar tmp = node.firstChild;\n\t\t\tobj.child = dec.decodeCell(tmp, false);\n\n\t\t\tvar tmp2 = tmp.nextSibling;\n\t\t\ttmp.parentNode.removeChild(tmp);\n\t\t\ttmp = tmp2;\n\t\t\t\n\t\t\twhile (tmp != null)\n\t\t\t{\n\t\t\t\ttmp2 = tmp.nextSibling;\n\t\t\t\t\n\t\t\t\tif (tmp.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t\t\t{\n\t\t\t\t\t// Ignores all existing cells because those do not need to\n\t\t\t\t\t// be re-inserted into the model. Since the encoded version\n\t\t\t\t\t// of these cells contains the new parent, this would leave\n\t\t\t\t\t// to an inconsistent state on the model (ie. a parent\n\t\t\t\t\t// change without a call to parentForCellChanged).\n\t\t\t\t\tvar id = tmp.getAttribute('id');\n\t\t\t\t\t\n\t\t\t\t\tif (dec.lookup(id) == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tdec.decodeCell(tmp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttmp.parentNode.removeChild(tmp);\n\t\t\t\ttmp = tmp2;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar childRef = node.getAttribute('child');\n\t\t\tobj.child = dec.getObject(childRef);\n\t\t}\n\t\t\n\t\treturn node;\n\t};\n\t\n\t/**\n\t * Function: afterDecode\n\t *\n\t * Restores object state in the child change.\n\t */\n\tcodec.afterDecode = function(dec, node, obj)\n\t{\n\t\t// Cells are decoded here after a complete transaction so the previous\n\t\t// parent must be restored on the cell for the case where the cell was\n\t\t// added. This is needed for the local model to identify the cell as a\n\t\t// new cell and register the ID.\n        if (obj.child != null)\n        {\n            if (obj.child.parent != null && obj.previous != null &&\n                obj.child.parent != obj.previous)\n            {\n                obj.previous = obj.child.parent;\n            }\n\n            obj.child.parent = obj.previous;\n            obj.previous = obj.parent;\n            obj.previousIndex = obj.index;\n        }\n\n\t\treturn obj;\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxChildChangeCodec = typeof mxChildChangeCodec !== 'undefined' ? mxChildChangeCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxTerminalChangeCodec\n\t *\n\t * Codec for <mxTerminalChange>s. This class is created and registered\n\t * dynamically at load time and used implicitly via <mxCodec> and\n\t * the <mxCodecRegistry>.\n\t *\n\t * Transient Fields:\n\t *\n\t * - model\n\t * - previous\n\t *\n\t * Reference Fields:\n\t *\n\t * - cell\n\t * - terminal\n\t */\n\tvar codec = new mxObjectCodec(new mxTerminalChange(),\n\t\t['model', 'previous'], ['cell', 'terminal']);\n\n\t/**\n\t * Function: afterDecode\n\t *\n\t * Restores the state by assigning the previous value.\n\t */\n\tcodec.afterDecode = function(dec, node, obj)\n\t{\n\t\tobj.previous = obj.terminal;\n\t\t\n\t\treturn obj;\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxTerminalChangeCodec = typeof mxTerminalChangeCodec !== 'undefined' ? mxTerminalChangeCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxGenericChangeCodec\n *\n * Codec for <mxValueChange>s, <mxStyleChange>s, <mxGeometryChange>s,\n * <mxCollapseChange>s and <mxVisibleChange>s. This class is created\n * and registered dynamically at load time and used implicitly\n * via <mxCodec> and the <mxCodecRegistry>.\n *\n * Transient Fields:\n *\n * - model\n * - previous\n *\n * Reference Fields:\n *\n * - cell\n * \n * Constructor: mxGenericChangeCodec\n *\n * Factory function that creates a <mxObjectCodec> for\n * the specified change and fieldname.\n *\n * Parameters:\n *\n * obj - An instance of the change object.\n * variable - The fieldname for the change data.\n */\nvar mxGenericChangeCodec = function(obj, variable)\n{\n\tvar codec = new mxObjectCodec(obj,  ['model', 'previous'], ['cell']);\n\n\t/**\n\t * Function: afterDecode\n\t *\n\t * Restores the state by assigning the previous value.\n\t */\n\tcodec.afterDecode = function(dec, node, obj)\n\t{\n\t\t// Allows forward references in sessions. This is a workaround\n\t\t// for the sequence of edits in mxGraph.moveCells and cellsAdded.\n\t\tif (mxUtils.isNode(obj.cell))\n\t\t{\n\t\t\tobj.cell = dec.decodeCell(obj.cell, false);\n\t\t}\n\n\t\tobj.previous = obj[variable];\n\n\t\treturn obj;\n\t};\n\t\n\treturn codec;\n};\n\n// Registers the codecs\nmxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange(), 'value'));\nmxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange(), 'style'));\nmxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange(), 'geometry'));\nmxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange(), 'collapsed'));\nmxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange(), 'visible'));\nmxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange(), 'value'));\n\n__mxOutput.mxGenericChangeCodec = typeof mxGenericChangeCodec !== 'undefined' ? mxGenericChangeCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxGraphCodec\n\t *\n\t * Codec for <mxGraph>s. This class is created and registered\n\t * dynamically at load time and used implicitly via <mxCodec>\n\t * and the <mxCodecRegistry>.\n\t *\n\t * Transient Fields:\n\t *\n\t * - graphListeners\n\t * - eventListeners\n\t * - view\n\t * - container\n\t * - cellRenderer\n\t * - editor\n\t * - selection\n\t */\n\treturn new mxObjectCodec(new mxGraph(),\n\t\t['graphListeners', 'eventListeners', 'view', 'container',\n\t\t'cellRenderer', 'editor', 'selection']);\n\n}());\n\n__mxOutput.mxGraphCodec = typeof mxGraphCodec !== 'undefined' ? mxGraphCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxGraphViewCodec\n\t *\n\t * Custom encoder for <mxGraphView>s. This class is created\n\t * and registered dynamically at load time and used implicitly via\n\t * <mxCodec> and the <mxCodecRegistry>. This codec only writes views\n\t * into a XML format that can be used to create an image for\n\t * the graph, that is, it contains absolute coordinates with\n\t * computed perimeters, edge styles and cell styles.\n\t */\n\tvar codec = new mxObjectCodec(new mxGraphView());\n\n\t/**\n\t * Function: encode\n\t *\n\t * Encodes the given <mxGraphView> using <encodeCell>\n\t * starting at the model's root. This returns the\n\t * top-level graph node of the recursive encoding.\n\t */\n\tcodec.encode = function(enc, view)\n\t{\n\t\treturn this.encodeCell(enc, view,\n\t\t\tview.graph.getModel().getRoot());\n\t};\n\n\t/**\n\t * Function: encodeCell\n\t *\n\t * Recursively encodes the specifed cell. Uses layer\n\t * as the default nodename. If the cell's parent is\n\t * null, then graph is used for the nodename. If\n\t * <mxGraphModel.isEdge> returns true for the cell,\n\t * then edge is used for the nodename, else if\n\t * <mxGraphModel.isVertex> returns true for the cell,\n\t * then vertex is used for the nodename.\n\t *\n\t * <mxGraph.getLabel> is used to create the label\n\t * attribute for the cell. For graph nodes and vertices\n\t * the bounds are encoded into x, y, width and height.\n\t * For edges the points are encoded into a points\n\t * attribute as a space-separated list of comma-separated\n\t * coordinate pairs (eg. x0,y0 x1,y1 ... xn,yn). All\n\t * values from the cell style are added as attribute\n\t * values to the node. \n\t */\n\tcodec.encodeCell = function(enc, view, cell)\n\t{\n\t\tvar model = view.graph.getModel();\n\t\tvar state = view.getState(cell);\n\t\tvar parent = model.getParent(cell);\n\t\t\n\t\tif (parent == null || state != null)\n\t\t{\n\t\t\tvar childCount = model.getChildCount(cell);\n\t\t\tvar geo = view.graph.getCellGeometry(cell);\n\t\t\tvar name = null;\n\t\t\t\n\t\t\tif (parent == model.getRoot())\n\t\t\t{\n\t\t\t\tname = 'layer';\n\t\t\t}\n\t\t\telse if (parent == null)\n\t\t\t{\n\t\t\t\tname = 'graph';\n\t\t\t}\n\t\t\telse if (model.isEdge(cell))\n\t\t\t{\n\t\t\t\tname = 'edge';\n\t\t\t}\n\t\t\telse if (childCount > 0 && geo != null)\n\t\t\t{\n\t\t\t\tname = 'group';\n\t\t\t}\n\t\t\telse if (model.isVertex(cell))\n\t\t\t{\n\t\t\t\tname = 'vertex';\n\t\t\t}\n\t\t\t\n\t\t\tif (name != null)\n\t\t\t{\n\t\t\t\tvar node = enc.document.createElement(name);\n\t\t\t\tvar lab = view.graph.getLabel(cell);\n\t\t\t\t\n\t\t\t\tif (lab != null)\n\t\t\t\t{\n\t\t\t\t\tnode.setAttribute('label', view.graph.getLabel(cell));\n\t\t\t\t\t\n\t\t\t\t\tif (view.graph.isHtmlLabel(cell))\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.setAttribute('html', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\tif (parent == null)\n\t\t\t\t{\n\t\t\t\t\tvar bounds = view.getGraphBounds();\n\t\t\t\t\t\n\t\t\t\t\tif (bounds != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.setAttribute('x', Math.round(bounds.x));\n\t\t\t\t\t\tnode.setAttribute('y', Math.round(bounds.y));\n\t\t\t\t\t\tnode.setAttribute('width', Math.round(bounds.width));\n\t\t\t\t\t\tnode.setAttribute('height', Math.round(bounds.height));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tnode.setAttribute('scale', view.scale);\n\t\t\t\t}\n\t\t\t\telse if (state != null && geo != null)\n\t\t\t\t{\n\t\t\t\t\t// Writes each key, value in the style pair to an attribute\n\t\t\t\t    for (var i in state.style)\n\t\t\t\t    {\n\t\t\t\t    \tvar value = state.style[i];\n\t\t\n\t\t\t\t    \t// Tries to turn objects and functions into strings\n\t\t\t\t\t    if (typeof(value) == 'function' &&\n\t\t\t\t\t\t\ttypeof(value) == 'object')\n\t\t\t\t\t\t{\n\t\t\t\t\t    \tvalue = mxStyleRegistry.getName(value);\n\t\t\t\t        }\n\t\t\t\t    \t\n\t\t\t\t    \tif (value != null &&\n\t\t\t\t    \t\ttypeof(value) != 'function' &&\n\t\t\t\t\t\t\ttypeof(value) != 'object')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnode.setAttribute(i, value);\n\t\t\t\t        }\n\t\t\t\t    }\n\t\t\t\t    \n\t\t\t\t\tvar abs = state.absolutePoints;\n\t\t\t\t\t\n\t\t\t\t\t// Writes the list of points into one attribute\n\t\t\t\t\tif (abs != null && abs.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar pts = Math.round(abs[0].x) + ',' + Math.round(abs[0].y);\n\t\t\n\t\t\t\t\t\tfor (var i=1; i<abs.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpts += ' ' + Math.round(abs[i].x) + ',' +\n\t\t\t\t\t\t\t\tMath.round(abs[i].y);\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\tnode.setAttribute('points', pts);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Writes the bounds into 4 attributes\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.setAttribute('x', Math.round(state.x));\n\t\t\t\t\t\tnode.setAttribute('y', Math.round(state.y));\n\t\t\t\t\t\tnode.setAttribute('width', Math.round(state.width));\n\t\t\t\t\t\tnode.setAttribute('height', Math.round(state.height));\t\t\t\t\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tvar offset = state.absoluteOffset;\n\t\t\t\t\t\n\t\t\t\t\t// Writes the offset into 2 attributes\n\t\t\t\t\tif (offset != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (offset.x != 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnode.setAttribute('dx', Math.round(offset.x));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (offset.y != 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnode.setAttribute('dy', Math.round(offset.y));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\tfor (var i=0; i<childCount; i++)\n\t\t\t\t{\n\t\t\t\t\tvar childNode = this.encodeCell(enc,\n\t\t\t\t\t\t\tview, model.getChildAt(cell, i));\n\t\t\t\t\t\n\t\t\t\t\tif (childNode != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.appendChild(childNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn node;\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxGraphViewCodec = typeof mxGraphViewCodec !== 'undefined' ? mxGraphViewCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxStylesheetCodec\n *\n * Codec for <mxStylesheet>s. This class is created and registered\n * dynamically at load time and used implicitly via <mxCodec>\n * and the <mxCodecRegistry>.\n */\nvar mxStylesheetCodec = mxCodecRegistry.register(function()\n{\n\tvar codec = new mxObjectCodec(new mxStylesheet());\n\n\t/**\n\t * Function: encode\n\t *\n\t * Encodes a stylesheet. See <decode> for a description of the\n\t * format.\n\t */\n\tcodec.encode = function(enc, obj)\n\t{\n\t\tvar node = enc.document.createElement(this.getName());\n\t\t\n\t\tfor (var i in obj.styles)\n\t\t{\n\t\t\tvar style = obj.styles[i];\n\t\t\tvar styleNode = enc.document.createElement('add');\n\t\t\t\n\t\t\tif (i != null)\n\t\t\t{\n\t\t\t\tstyleNode.setAttribute('as', i);\n\t\t\t\t\n\t\t\t\tfor (var j in style)\n\t\t\t\t{\n\t\t\t\t\tvar value = this.getStringValue(j, style[j]);\n\t\t\t\t\t\n\t\t\t\t\tif (value != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar entry = enc.document.createElement('add');\n\t\t\t\t\t\tentry.setAttribute('value', value);\n\t\t\t\t\t\tentry.setAttribute('as', j);\n\t\t\t\t\t\tstyleNode.appendChild(entry);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (styleNode.childNodes.length > 0)\n\t\t\t\t{\n\t\t\t\t\tnode.appendChild(styleNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t    return node;\n\t};\n\n\t/**\n\t * Function: getStringValue\n\t *\n\t * Returns the string for encoding the given value.\n\t */\n\tcodec.getStringValue = function(key, value)\n\t{\n\t\tvar type = typeof(value);\n\t\t\n\t\tif (type == 'function')\n\t\t{\n\t\t\tvalue = mxStyleRegistry.getName(value);\n\t\t}\n\t\telse if (type == 'object')\n\t\t{\n\t\t\tvalue = null;\n\t\t}\n\t\t\n\t\treturn value;\n\t};\n\t\n\t/**\n\t * Function: decode\n\t *\n\t * Reads a sequence of the following child nodes\n\t * and attributes:\n\t *\n\t * Child Nodes:\n\t *\n\t * add - Adds a new style.\n\t *\n\t * Attributes:\n\t *\n\t * as - Name of the style.\n\t * extend - Name of the style to inherit from.\n\t *\n\t * Each node contains another sequence of add and remove nodes with the following\n\t * attributes:\n\t *\n\t * as - Name of the style (see <mxConstants>).\n\t * value - Value for the style.\n\t *\n\t * Instead of the value-attribute, one can put Javascript expressions into\n\t * the node as follows if <mxStylesheetCodec.allowEval> is true:\n\t * <add as=\"perimeter\">mxPerimeter.RectanglePerimeter</add>\n\t *\n\t * A remove node will remove the entry with the name given in the as-attribute\n\t * from the style.\n\t * \n\t * Example:\n\t *\n\t * (code)\n\t * <mxStylesheet as=\"stylesheet\">\n\t *   <add as=\"text\">\n\t *     <add as=\"fontSize\" value=\"12\"/>\n\t *   </add>\n\t *   <add as=\"defaultVertex\" extend=\"text\">\n\t *     <add as=\"shape\" value=\"rectangle\"/>\n\t *   </add>\n\t * </mxStylesheet>\n\t * (end)\n\t */\n\tcodec.decode = function(dec, node, into)\n\t{\n\t\tvar obj = into || new this.template.constructor();\n\t\tvar id = node.getAttribute('id');\n\t\t\n\t\tif (id != null)\n\t\t{\n\t\t\tdec.objects[id] = obj;\n\t\t}\n\t\t\n\t\tnode = node.firstChild;\n\t\t\n\t\twhile (node != null)\n\t\t{\n\t\t\tif (!this.processInclude(dec, node, obj) && node.nodeName == 'add')\n\t\t\t{\n\t\t\t\tvar as = node.getAttribute('as');\n\t\t\t\t\n\t\t\t\tif (as != null)\n\t\t\t\t{\n\t\t\t\t\tvar extend = node.getAttribute('extend');\n\t\t\t\t\tvar style = (extend != null) ? mxUtils.clone(obj.styles[extend]) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (style == null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (extend != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmxLog.warn('mxStylesheetCodec.decode: stylesheet ' +\n\t\t\t\t\t\t\t\textend + ' not found to extend');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tstyle = new Object();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar entry = node.firstChild;\n\t\t\t\t\t\n\t\t\t\t\twhile (entry != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entry.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t \tvar key = entry.getAttribute('as');\n\t\t\t\t\t\t \t\n\t\t\t\t\t\t \tif (entry.nodeName == 'add')\n\t\t\t\t\t\t \t{\n\t\t\t\t\t\t\t \tvar text = mxUtils.getTextContent(entry);\n\t\t\t\t\t\t\t \tvar value = null;\n\t\t\t\t\t\t\t \t\n\t\t\t\t\t\t\t \tif (text != null && text.length > 0 && mxStylesheetCodec.allowEval)\n\t\t\t\t\t\t\t \t{\n\t\t\t\t\t\t\t \t\tvalue = mxUtils.eval(text);\n\t\t\t\t\t\t\t \t}\n\t\t\t\t\t\t\t \telse\n\t\t\t\t\t\t\t \t{\n\t\t\t\t\t\t\t \t\tvalue = entry.getAttribute('value');\n\t\t\t\t\t\t\t \t\t\n\t\t\t\t\t\t\t \t\tif (mxUtils.isNumeric(value))\n\t\t\t\t\t\t\t \t\t{\n\t\t\t\t\t\t\t\t\t\tvalue = parseFloat(value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t \t}\n\n\t\t\t\t\t\t\t \tif (value != null)\n\t\t\t\t\t\t\t \t{\n\t\t\t\t\t\t\t \t\tstyle[key] = value;\n\t\t\t\t\t\t\t \t}\n\t\t\t\t\t\t \t}\n\t\t\t\t\t\t \telse if (entry.nodeName == 'remove')\n\t\t\t\t\t\t \t{\n\t\t\t\t\t\t \t\tdelete style[key];\n\t\t\t\t\t\t \t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tentry = entry.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tobj.putCellStyle(as, style);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tnode = node.nextSibling;\n\t\t}\n\t\t\n\t\treturn obj;\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n/**\n * Variable: allowEval\n * \n * Static global switch that specifies if the use of eval is allowed for\n * evaluating text content. Default is true. Set this to false if stylesheets\n * may contain user input.\n */\nmxStylesheetCodec.allowEval = true;\n\n__mxOutput.mxStylesheetCodec = typeof mxStylesheetCodec !== 'undefined' ? mxStylesheetCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxDefaultKeyHandlerCodec\n\t *\n\t * Custom codec for configuring <mxDefaultKeyHandler>s. This class is created\n\t * and registered dynamically at load time and used implicitly via\n\t * <mxCodec> and the <mxCodecRegistry>. This codec only reads configuration\n\t * data for existing key handlers, it does not encode or create key handlers.\n\t */\n\tvar codec = new mxObjectCodec(new mxDefaultKeyHandler());\n\n\t/**\n\t * Function: encode\n\t *\n\t * Returns null.\n\t */\n\tcodec.encode = function(enc, obj)\n\t{\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * Function: decode\n\t *\n\t * Reads a sequence of the following child nodes\n\t * and attributes:\n\t *\n\t * Child Nodes:\n\t *\n\t * add - Binds a keystroke to an actionname.\n\t *\n\t * Attributes:\n\t *\n\t * as - Keycode.\n\t * action - Actionname to execute in editor.\n\t * control - Optional boolean indicating if\n\t * \t\tthe control key must be pressed.\n\t *\n\t * Example:\n\t *\n\t * (code)\n\t * <mxDefaultKeyHandler as=\"keyHandler\">\n\t *   <add as=\"88\" control=\"true\" action=\"cut\"/>\n\t *   <add as=\"67\" control=\"true\" action=\"copy\"/>\n\t *   <add as=\"86\" control=\"true\" action=\"paste\"/>\n\t * </mxDefaultKeyHandler>\n\t * (end)\n\t *\n\t * The keycodes are for the x, c and v keys.\n\t *\n\t * See also: <mxDefaultKeyHandler.bindAction>,\n\t * http://www.js-examples.com/page/tutorials__key_codes.html\n\t */\n\tcodec.decode = function(dec, node, into)\n\t{\n\t\tif (into != null)\n\t\t{\n\t\t\tvar editor = into.editor;\n\t\t\tnode = node.firstChild;\n\t\t\t\n\t\t\twhile (node != null)\n\t\t\t{\n\t\t\t\tif (!this.processInclude(dec, node, into) &&\n\t\t\t\t\tnode.nodeName == 'add')\n\t\t\t\t{\n\t\t\t\t\tvar as = node.getAttribute('as');\n\t\t\t\t\tvar action = node.getAttribute('action');\n\t\t\t\t\tvar control = node.getAttribute('control');\n\t\t\t\t\t\n\t\t\t\t\tinto.bindAction(as, action, control);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnode = node.nextSibling;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn into;\n\t};\n\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxDefaultKeyHandlerCodec = typeof mxDefaultKeyHandlerCodec !== 'undefined' ? mxDefaultKeyHandlerCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxDefaultToolbarCodec\n *\n * Custom codec for configuring <mxDefaultToolbar>s. This class is created\n * and registered dynamically at load time and used implicitly via\n * <mxCodec> and the <mxCodecRegistry>. This codec only reads configuration\n * data for existing toolbars handlers, it does not encode or create toolbars.\n */\nvar mxDefaultToolbarCodec = mxCodecRegistry.register(function()\n{\n\tvar codec = new mxObjectCodec(new mxDefaultToolbar());\n\n\t/**\n\t * Function: encode\n\t *\n\t * Returns null.\n\t */\n\tcodec.encode = function(enc, obj)\n\t{\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * Function: decode\n\t *\n\t * Reads a sequence of the following child nodes\n\t * and attributes:\n\t *\n\t * Child Nodes:\n\t *\n\t * add - Adds a new item to the toolbar. See below for attributes.\n\t * separator - Adds a vertical separator. No attributes.\n\t * hr - Adds a horizontal separator. No attributes.\n\t * br - Adds a linefeed. No attributes. \n\t *\n\t * Attributes:\n\t *\n\t * as - Resource key for the label.\n\t * action - Name of the action to execute in enclosing editor.\n\t * mode - Modename (see below).\n\t * template - Template name for cell insertion.\n\t * style - Optional style to override the template style.\n\t * icon - Icon (relative/absolute URL).\n\t * pressedIcon - Optional icon for pressed state (relative/absolute URL).\n\t * id - Optional ID to be used for the created DOM element.\n\t * toggle - Optional 0 or 1 to disable toggling of the element. Default is\n\t * 1 (true).\n\t *\n\t * The action, mode and template attributes are mutually exclusive. The\n\t * style can only be used with the template attribute. The add node may\n\t * contain another sequence of add nodes with as and action attributes\n\t * to create a combo box in the toolbar. If the icon is specified then\n\t * a list of the child node is expected to have its template attribute\n\t * set and the action is ignored instead.\n\t * \n\t * Nodes with a specified template may define a function to be used for\n\t * inserting the cloned template into the graph. Here is an example of such\n\t * a node:\n\t * \n\t * (code)\n\t * <add as=\"Swimlane\" template=\"swimlane\" icon=\"images/swimlane.gif\"><![CDATA[\n\t *   function (editor, cell, evt, targetCell)\n\t *   {\n\t *     var pt = mxUtils.convertPoint(\n\t *       editor.graph.container, mxEvent.getClientX(evt),\n\t *         mxEvent.getClientY(evt));\n\t *     return editor.addVertex(targetCell, cell, pt.x, pt.y);\n\t *   }\n\t * ]]></add>\n\t * (end)\n\t * \n\t * In the above function, editor is the enclosing <mxEditor> instance, cell\n\t * is the clone of the template, evt is the mouse event that represents the\n\t * drop and targetCell is the cell under the mousepointer where the drop\n\t * occurred. The targetCell is retrieved using <mxGraph.getCellAt>.\n\t *\n\t * Futhermore, nodes with the mode attribute may define a function to\n\t * be executed upon selection of the respective toolbar icon. In the\n\t * example below, the default edge style is set when this specific\n\t * connect-mode is activated:\n\t *\n\t * (code)\n\t * <add as=\"connect\" mode=\"connect\"><![CDATA[\n\t *   function (editor)\n\t *   {\n\t *     if (editor.defaultEdge != null)\n\t *     {\n\t *       editor.defaultEdge.style = 'straightEdge';\n\t *     }\n\t *   }\n\t * ]]></add>\n\t * (end)\n\t * \n\t * Both functions require <mxDefaultToolbarCodec.allowEval> to be set to true.\n\t *\n\t * Modes:\n\t *\n\t * select - Left mouse button used for rubberband- & cell-selection.\n\t * connect - Allows connecting vertices by inserting new edges.\n\t * pan - Disables selection and switches to panning on the left button.\n\t *\n\t * Example:\n\t *\n\t * To add items to the toolbar:\n\t * \n\t * (code)\n\t * <mxDefaultToolbar as=\"toolbar\">\n\t *   <add as=\"save\" action=\"save\" icon=\"images/save.gif\"/>\n\t *   <br/><hr/>\n\t *   <add as=\"select\" mode=\"select\" icon=\"images/select.gif\"/>\n\t *   <add as=\"connect\" mode=\"connect\" icon=\"images/connect.gif\"/>\n\t * </mxDefaultToolbar>\n\t * (end)\n\t */\n\tcodec.decode = function(dec, node, into)\n\t{\n\t\tif (into != null)\n\t\t{\n\t\t\tvar editor = into.editor;\n\t\t\tnode = node.firstChild;\n\t\t\t\n\t\t\twhile (node != null)\n\t\t\t{\n\t\t\t\tif (node.nodeType == mxConstants.NODETYPE_ELEMENT)\n\t\t\t\t{\n\t\t\t\t\tif (!this.processInclude(dec, node, into))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (node.nodeName == 'separator')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinto.addSeparator();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (node.nodeName == 'br')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinto.toolbar.addBreak();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (node.nodeName == 'hr')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinto.toolbar.addLine();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (node.nodeName == 'add')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar as = node.getAttribute('as');\n\t\t\t\t\t\t\tas = mxResources.get(as) || as;\n\t\t\t\t\t\t\tvar icon = node.getAttribute('icon');\n\t\t\t\t\t\t\tvar pressedIcon = node.getAttribute('pressedIcon');\n\t\t\t\t\t\t\tvar action = node.getAttribute('action');\n\t\t\t\t\t\t\tvar mode = node.getAttribute('mode');\n\t\t\t\t\t\t\tvar template = node.getAttribute('template');\n\t\t\t\t\t\t\tvar toggle = node.getAttribute('toggle') != '0';\n\t\t\t\t\t\t\tvar text = mxUtils.getTextContent(node);\n\t\t\t\t\t\t\tvar elt = null;\n\n\t\t\t\t\t\t\tif (action != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telt = into.addItem(as, icon, action, pressedIcon);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (mode != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar funct = (mxDefaultToolbarCodec.allowEval) ? mxUtils.eval(text) : null;\n\t\t\t\t\t\t\t\telt = into.addMode(as, icon, mode, pressedIcon, funct);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (template != null || (text != null && text.length > 0))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar cell = editor.templates[template];\n\t\t\t\t\t\t\t\tvar style = node.getAttribute('style');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (cell != null && style != null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcell = editor.graph.cloneCell(cell);\n\t\t\t\t\t\t\t\t\tcell.setStyle(style);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tvar insertFunction = null;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (text != null && text.length > 0 && mxDefaultToolbarCodec.allowEval)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tinsertFunction = mxUtils.eval(text);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\telt = into.addPrototype(as, icon, cell, pressedIcon, insertFunction, toggle);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar children = mxUtils.getChildNodes(node);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (children.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (icon == null)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvar combo = into.addActionCombo(as);\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tfor (var i=0; i<children.length; i++)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tvar child = children[i];\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif (child.nodeName == 'separator')\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tinto.addOption(combo, '---');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse if (child.nodeName == 'add')\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tvar lab = child.getAttribute('as');\n\t\t\t\t\t\t\t\t\t\t\t\tvar act = child.getAttribute('action');\n\t\t\t\t\t\t\t\t\t\t\t\tinto.addActionOption(combo, lab, act);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvar select = null;\n\t\t\t\t\t\t\t\t\t\tvar create = function()\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tvar template = editor.templates[select.value];\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif (template != null)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tvar clone = template.clone();\n\t\t\t\t\t\t\t\t\t\t\t\tvar style = select.options[select.selectedIndex].cellStyle;\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tif (style != null)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclone.setStyle(style);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\treturn clone;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tmxLog.warn('Template '+template+' not found');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tvar img = into.addPrototype(as, icon, create, null, null, toggle);\n\t\t\t\t\t\t\t\t\t\tselect = into.addCombo();\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// Selects the toolbar icon if a selection change\n\t\t\t\t\t\t\t\t\t\t// is made in the corresponding combobox.\n\t\t\t\t\t\t\t\t\t\tmxEvent.addListener(select, 'change', function()\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tinto.toolbar.selectMode(img, function(evt)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tvar pt = mxUtils.convertPoint(editor.graph.container,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmxEvent.getClientX(evt), mxEvent.getClientY(evt));\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\treturn editor.addVertex(null, funct(), pt.x, pt.y);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tinto.toolbar.noReset = false;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// Adds the entries to the combobox\n\t\t\t\t\t\t\t\t\t\tfor (var i=0; i<children.length; i++)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tvar child = children[i];\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif (child.nodeName == 'separator')\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tinto.addOption(select, '---');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse if (child.nodeName == 'add')\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tvar lab = child.getAttribute('as');\n\t\t\t\t\t\t\t\t\t\t\t\tvar tmp = child.getAttribute('template');\n\t\t\t\t\t\t\t\t\t\t\t\tvar option = into.addOption(select, lab, tmp || template);\n\t\t\t\t\t\t\t\t\t\t\t\toption.cellStyle = child.getAttribute('style');\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Assigns an ID to the created element to access it later.\n\t\t\t\t\t\t\tif (elt != null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar id = node.getAttribute('id');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (id != null && id.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\telt.setAttribute('id', id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnode = node.nextSibling;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn into;\n\t};\n\t\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n/**\n * Variable: allowEval\n * \n * Static global switch that specifies if the use of eval is allowed for\n * evaluating text content. Default is true. Set this to false if stylesheets\n * may contain user input\n */\nmxDefaultToolbarCodec.allowEval = true;\n\n__mxOutput.mxDefaultToolbarCodec = typeof mxDefaultToolbarCodec !== 'undefined' ? mxDefaultToolbarCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxDefaultPopupMenuCodec\n\t *\n\t * Custom codec for configuring <mxDefaultPopupMenu>s. This class is created\n\t * and registered dynamically at load time and used implicitly via\n\t * <mxCodec> and the <mxCodecRegistry>. This codec only reads configuration\n\t * data for existing popup menus, it does not encode or create menus. Note\n\t * that this codec only passes the configuration node to the popup menu,\n\t * which uses the config to dynamically create menus. See\n\t * <mxDefaultPopupMenu.createMenu>.\n\t */\n\tvar codec = new mxObjectCodec(new mxDefaultPopupMenu());\n\n\t/**\n\t * Function: encode\n\t *\n\t * Returns null.\n\t */\n\tcodec.encode = function(enc, obj)\n\t{\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * Function: decode\n\t *\n\t * Uses the given node as the config for <mxDefaultPopupMenu>.\n\t */\n\tcodec.decode = function(dec, node, into)\n\t{\n\t\tvar inc = node.getElementsByTagName('include')[0];\n\t\t\n\t\tif (inc != null)\n\t\t{\n\t\t\tthis.processInclude(dec, inc, into);\n\t\t}\n\t\telse if (into != null)\n\t\t{\n\t\t\tinto.config = node;\n\t\t}\n\t\t\n\t\treturn into;\n\t};\n\t\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxDefaultPopupMenuCodec = typeof mxDefaultPopupMenuCodec !== 'undefined' ? mxDefaultPopupMenuCodec : undefined;\n\n/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\nmxCodecRegistry.register(function()\n{\n\t/**\n\t * Class: mxEditorCodec\n\t *\n\t * Codec for <mxEditor>s. This class is created and registered\n\t * dynamically at load time and used implicitly via <mxCodec>\n\t * and the <mxCodecRegistry>.\n\t *\n\t * Transient Fields:\n\t *\n\t * - modified\n\t * - lastSnapshot\n\t * - ignoredChanges\n\t * - undoManager\n\t * - graphContainer\n\t * - toolbarContainer\n\t */\n\tvar codec = new mxObjectCodec(new mxEditor(),\n\t\t['modified', 'lastSnapshot', 'ignoredChanges',\n\t\t'undoManager', 'graphContainer', 'toolbarContainer']);\n\n\t/**\n\t * Function: beforeDecode\n\t *\n\t * Decodes the ui-part of the configuration node by reading\n\t * a sequence of the following child nodes and attributes\n\t * and passes the control to the default decoding mechanism:\n\t *\n\t * Child Nodes:\n\t *\n\t * stylesheet - Adds a CSS stylesheet to the document.\n\t * resource - Adds the basename of a resource bundle.\n\t * add - Creates or configures a known UI element.\n\t *\n\t * These elements may appear in any order given that the\n\t * graph UI element is added before the toolbar element\n\t * (see Known Keys).\n\t *\n\t * Attributes:\n\t *\n\t * as - Key for the UI element (see below).\n\t * element - ID for the element in the document.\n\t * style - CSS style to be used for the element or window.\n\t * x - X coordinate for the new window.\n\t * y - Y coordinate for the new window.\n\t * width - Width for the new window.\n\t * height - Optional height for the new window.\n\t * name - Name of the stylesheet (absolute/relative URL).\n\t * basename - Basename of the resource bundle (see <mxResources>).\n\t *\n\t * The x, y, width and height attributes are used to create a new\n\t * <mxWindow> if the element attribute is not specified in an add\n\t * node. The name and basename are only used in the stylesheet and\n\t * resource nodes, respectively.\n\t *\n\t * Known Keys:\n\t *\n\t * graph - Main graph element (see <mxEditor.setGraphContainer>).\n\t * title - Title element (see <mxEditor.setTitleContainer>).\n\t * toolbar - Toolbar element (see <mxEditor.setToolbarContainer>).\n\t * status - Status bar element (see <mxEditor.setStatusContainer>).\n\t *\n\t * Example:\n\t *\n\t * (code)\n\t * <ui>\n\t *   <stylesheet name=\"css/process.css\"/>\n\t *   <resource basename=\"resources/app\"/>\n\t *   <add as=\"graph\" element=\"graph\"\n\t *     style=\"left:70px;right:20px;top:20px;bottom:40px\"/>\n\t *   <add as=\"status\" element=\"status\"/>\n\t *   <add as=\"toolbar\" x=\"10\" y=\"20\" width=\"54\"/>\n\t * </ui>\n\t * (end)\n\t */\n\tcodec.afterDecode = function(dec, node, obj)\n\t{\n\t\t// Assigns the specified templates for edges\n\t\tvar defaultEdge = node.getAttribute('defaultEdge');\n\t\t\n\t\tif (defaultEdge != null)\n\t\t{\n\t\t\tnode.removeAttribute('defaultEdge');\n\t\t\tobj.defaultEdge = obj.templates[defaultEdge];\n\t\t}\n\n\t\t// Assigns the specified templates for groups\n\t\tvar defaultGroup = node.getAttribute('defaultGroup');\n\t\t\n\t\tif (defaultGroup != null)\n\t\t{\n\t\t\tnode.removeAttribute('defaultGroup');\n\t\t\tobj.defaultGroup = obj.templates[defaultGroup];\n\t\t}\n\n\t\treturn obj;\n\t};\n\t\n\t/**\n\t * Function: decodeChild\n\t * \n\t * Overrides decode child to handle special child nodes.\n\t */\t\n\tcodec.decodeChild = function(dec, child, obj)\n\t{\n\t\tif (child.nodeName == 'Array')\n\t\t{\n\t\t\tvar role = child.getAttribute('as');\n\t\t\t\n\t\t\tif (role == 'templates')\n\t\t\t{\n\t\t\t\tthis.decodeTemplates(dec, child, obj);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\telse if (child.nodeName == 'ui')\n\t\t{\n\t\t\tthis.decodeUi(dec, child, obj);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmxObjectCodec.prototype.decodeChild.apply(this, arguments);\n\t};\n\t\t\n\t/**\n\t * Function: decodeUi\n\t *\n\t * Decodes the ui elements from the given node.\n\t */\n\tcodec.decodeUi = function(dec, node, editor)\n\t{\n\t\tvar tmp = node.firstChild;\n\t\twhile (tmp != null)\n\t\t{\n\t\t\tif (tmp.nodeName == 'add')\n\t\t\t{\n\t\t\t\tvar as = tmp.getAttribute('as');\n\t\t\t\tvar elt = tmp.getAttribute('element');\n\t\t\t\tvar style = tmp.getAttribute('style');\n\t\t\t\tvar element = null;\n\n\t\t\t\tif (elt != null)\n\t\t\t\t{\n\t\t\t\t\telement = document.getElementById(elt);\n\t\t\t\t\t\n\t\t\t\t\tif (element != null && style != null)\n\t\t\t\t\t{\n\t\t\t\t\t\telement.style.cssText += ';' + style;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar x = parseInt(tmp.getAttribute('x'));\n\t\t\t\t\tvar y = parseInt(tmp.getAttribute('y'));\n\t\t\t\t\tvar width = tmp.getAttribute('width');\n\t\t\t\t\tvar height = tmp.getAttribute('height');\n\n\t\t\t\t\t// Creates a new window around the element\n\t\t\t\t\telement = document.createElement('div');\n\t\t\t\t\telement.style.cssText = style;\n\t\t\t\t\t\n\t\t\t\t\tvar wnd = new mxWindow(mxResources.get(as) || as,\n\t\t\t\t\t\telement, x, y, width, height, false, true);\n\t\t\t\t\twnd.setVisible(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// TODO: Make more generic\n\t\t\t\tif (as == 'graph')\n\t\t\t\t{\n\t\t\t\t\teditor.setGraphContainer(element);\n\t\t\t\t}\n\t\t\t\telse if (as == 'toolbar')\n\t\t\t\t{\n\t\t\t\t\teditor.setToolbarContainer(element);\n\t\t\t\t}\n\t\t\t\telse if (as == 'title')\n\t\t\t\t{\n\t\t\t\t\teditor.setTitleContainer(element);\n\t\t\t\t}\n\t\t\t\telse if (as == 'status')\n\t\t\t\t{\n\t\t\t\t\teditor.setStatusContainer(element);\n\t\t\t\t}\n\t\t\t\telse if (as == 'map')\n\t\t\t\t{\n\t\t\t\t\teditor.setMapContainer(element);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (tmp.nodeName == 'resource')\n\t\t\t{\n\t\t\t\tmxResources.add(tmp.getAttribute('basename'));\n\t\t\t}\n\t\t\telse if (tmp.nodeName == 'stylesheet')\n\t\t\t{\n\t\t\t\tmxClient.link('stylesheet', tmp.getAttribute('name'));\n\t\t\t}\n\t\t\t\n\t\t\ttmp = tmp.nextSibling;\n\t\t}\t\n\t};\n\t\n\t/**\n\t * Function: decodeTemplates\n\t *\n\t * Decodes the cells from the given node as templates.\n\t */\n\tcodec.decodeTemplates = function(dec, node, editor)\n\t{\n\t\tif (editor.templates == null)\n\t\t{\n\t\t\teditor.templates = [];\n\t\t}\n\t\t\n\t\tvar children = mxUtils.getChildNodes(node);\n\t\tfor (var j=0; j<children.length; j++)\n\t\t{\n\t\t\tvar name = children[j].getAttribute('as');\n\t\t\tvar child = children[j].firstChild;\n\t\t\t\n\t\t\twhile (child != null && child.nodeType != 1)\n\t\t\t{\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\t\n\t\t\tif (child != null)\n\t\t\t{\n\t\t\t\t// LATER: Only single cells means you need\n\t\t\t\t// to group multiple cells within another\n\t\t\t\t// cell. This should be changed to support\n\t\t\t\t// arrays of cells, or the wrapper must\n\t\t\t\t// be automatically handled in this class.\n\t\t\t\teditor.templates[name] = dec.decodeCell(child);\n\t\t\t}\n\t\t}\n\t};\n\t\n\t// Returns the codec into the registry\n\treturn codec;\n\n}());\n\n__mxOutput.mxEditorCodec = typeof mxEditorCodec !== 'undefined' ? mxEditorCodec : undefined;\nreturn __mxOutput;\n};\n}));","// Top level file is just a mixin of submodules & constants\n'use strict';\n\nconst { Deflate, deflate, deflateRaw, gzip } = require('./lib/deflate');\n\nconst { Inflate, inflate, inflateRaw, ungzip } = require('./lib/inflate');\n\nconst constants = require('./lib/zlib/constants');\n\nmodule.exports.Deflate = Deflate;\nmodule.exports.deflate = deflate;\nmodule.exports.deflateRaw = deflateRaw;\nmodule.exports.gzip = gzip;\nmodule.exports.Inflate = Inflate;\nmodule.exports.inflate = inflate;\nmodule.exports.inflateRaw = inflateRaw;\nmodule.exports.ungzip = ungzip;\nmodule.exports.constants = constants;\n","'use strict';\n\n\nconst zlib_deflate = require('./zlib/deflate');\nconst utils        = require('./utils/common');\nconst strings      = require('./utils/strings');\nconst msg          = require('./zlib/messages');\nconst ZStream      = require('./zlib/zstream');\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH,\n  Z_OK, Z_STREAM_END,\n  Z_DEFAULT_COMPRESSION,\n  Z_DEFAULT_STRATEGY,\n  Z_DEFLATED\n} = require('./zlib/constants');\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY\n  }, options || {});\n\n  let opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  let status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    let dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must\n * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n * buffers and call [[Deflate#onEnd]].\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  let status, _flush_mode;\n\n  if (this.ended) { return false; }\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    // Make sure avail_out > 6 to avoid repeating markers\n    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    status = zlib_deflate.deflate(strm, _flush_mode);\n\n    // Ended => flush and finish\n    if (status === Z_STREAM_END) {\n      if (strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n      }\n      status = zlib_deflate.deflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return status === Z_OK;\n    }\n\n    // Flush if out buffer full\n    if (strm.avail_out === 0) {\n      this.onData(strm.output);\n      continue;\n    }\n\n    // Flush if requested and has data\n    if (_flush_mode > 0 && strm.next_out > 0) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array): output data.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    this.result = utils.flattenChunks(this.chunks);\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  const deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nmodule.exports.Deflate = Deflate;\nmodule.exports.deflate = deflate;\nmodule.exports.deflateRaw = deflateRaw;\nmodule.exports.gzip = gzip;\nmodule.exports.constants = require('./zlib/constants');\n","'use strict';\n\n\nconst zlib_inflate = require('./zlib/inflate');\nconst utils        = require('./utils/common');\nconst strings      = require('./utils/strings');\nconst msg          = require('./zlib/messages');\nconst ZStream      = require('./zlib/zstream');\nconst GZheader     = require('./zlib/gzheader');\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_FINISH,\n  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR\n} = require('./zlib/constants');\n\n/* ===========================================================================*/\n\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  this.options = utils.assign({\n    chunkSize: 1024 * 64,\n    windowBits: 15,\n    to: ''\n  }, options || {});\n\n  const opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  let status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer): input data\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n *   `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. If end of stream detected,\n * [[Inflate#onEnd]] will be called.\n *\n * `flush_mode` is not needed for normal operation, because end of stream\n * detected automatically. You may try to use it for advanced things, but\n * this functionality was not tested.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  const dictionary = this.options.dictionary;\n  let status, _flush_mode, last_avail_out;\n\n  if (this.ended) return false;\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;\n\n  // Convert data if needed\n  if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, _flush_mode);\n\n    if (status === Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(strm, dictionary);\n\n      if (status === Z_OK) {\n        status = zlib_inflate.inflate(strm, _flush_mode);\n      } else if (status === Z_DATA_ERROR) {\n        // Replace code with more verbose\n        status = Z_NEED_DICT;\n      }\n    }\n\n    // Skip snyc markers if more data follows and not raw mode\n    while (strm.avail_in > 0 &&\n           status === Z_STREAM_END &&\n           strm.state.wrap > 0 &&\n           data[strm.next_in] !== 0)\n    {\n      zlib_inflate.inflateReset(strm);\n      status = zlib_inflate.inflate(strm, _flush_mode);\n    }\n\n    switch (status) {\n      case Z_STREAM_ERROR:\n      case Z_DATA_ERROR:\n      case Z_NEED_DICT:\n      case Z_MEM_ERROR:\n        this.onEnd(status);\n        this.ended = true;\n        return false;\n    }\n\n    // Remember real `avail_out` value, because we may patch out buffer content\n    // to align utf8 strings boundaries.\n    last_avail_out = strm.avail_out;\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === Z_STREAM_END) {\n\n        if (this.options.to === 'string') {\n\n          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          let tail = strm.next_out - next_out_utf8;\n          let utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail & realign counters\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n        }\n      }\n    }\n\n    // Must repeat iteration if out buffer is full\n    if (status === Z_OK && last_avail_out === 0) continue;\n\n    // Finalize if end of stream reached.\n    if (status === Z_STREAM_END) {\n      status = zlib_inflate.inflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return true;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|String): output data. When string output requested,\n *   each chunk will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako');\n * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n * let output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err) {\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  const inflator = new Inflate(options);\n\n  inflator.push(input);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) throw inflator.msg || msg[inflator.err];\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nmodule.exports.Inflate = Inflate;\nmodule.exports.inflate = inflate;\nmodule.exports.inflateRaw = inflateRaw;\nmodule.exports.ungzip = inflate;\nmodule.exports.constants = require('./zlib/constants');\n","'use strict';\n\n\nconst _has = (obj, key) => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nmodule.exports.assign = function (obj /*from1, from2, from3, ...*/) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    const source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (const p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// Join array of chunks to single array.\nmodule.exports.flattenChunks = (chunks) => {\n  // calculate data length\n  let len = 0;\n\n  for (let i = 0, l = chunks.length; i < l; i++) {\n    len += chunks[i].length;\n  }\n\n  // join chunks\n  const result = new Uint8Array(len);\n\n  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {\n    let chunk = chunks[i];\n    result.set(chunk, pos);\n    pos += chunk.length;\n  }\n\n  return result;\n};\n","// String encode/decode helpers\n'use strict';\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nlet STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nconst _utf8len = new Uint8Array(256);\nfor (let q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nmodule.exports.string2buf = (str) => {\n  if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n    return new TextEncoder().encode(str);\n  }\n\n  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new Uint8Array(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper\nconst buf2binstring = (buf, len) => {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if (buf.subarray && STR_APPLY_UIA_OK) {\n      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n    }\n  }\n\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n};\n\n\n// convert array to string\nmodule.exports.buf2string = (buf, max) => {\n  const len = max || buf.length;\n\n  if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {\n    return new TextDecoder().decode(buf.subarray(0, max));\n  }\n\n  let i, out;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  const utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    let c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    let c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nmodule.exports.utf8border = (buf, max) => {\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  let pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32 = (adler, buf, len, pos) => {\n  let s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n};\n\n\nmodule.exports = adler32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  Z_MEM_ERROR:       -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nconst makeTable = () => {\n  let c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n};\n\n// Create table on load. Just 255 signed longs. Not a problem.\nconst crcTable = new Uint32Array(makeTable());\n\n\nconst crc32 = (crc, buf, len, pos) => {\n  const t = crcTable;\n  const end = pos + len;\n\n  crc ^= -1;\n\n  for (let i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n};\n\n\nmodule.exports = crc32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst { _tr_init, _tr_stored_block, _tr_flush_block, _tr_tally, _tr_align } = require('./trees');\nconst adler32 = require('./adler32');\nconst crc32   = require('./crc32');\nconst msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_PARTIAL_FLUSH, Z_FULL_FLUSH, Z_FINISH, Z_BLOCK,\n  Z_OK, Z_STREAM_END, Z_STREAM_ERROR, Z_DATA_ERROR, Z_BUF_ERROR,\n  Z_DEFAULT_COMPRESSION,\n  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED, Z_DEFAULT_STRATEGY,\n  Z_UNKNOWN,\n  Z_DEFLATED\n} = require('./constants');\n\n/*============================================================================*/\n\n\nconst MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_MEM_LEVEL = 8;\n\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nconst D_CODES       = 30;\n/* number of distance codes */\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nconst MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst MIN_MATCH = 3;\nconst MAX_MATCH = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE    =  42;    /* zlib header -> BUSY_STATE */\n//#ifdef GZIP\nconst GZIP_STATE    =  57;    /* gzip header -> BUSY_STATE | EXTRA_STATE */\n//#endif\nconst EXTRA_STATE   =  69;    /* gzip extra block -> NAME_STATE */\nconst NAME_STATE    =  73;    /* gzip file name -> COMMENT_STATE */\nconst COMMENT_STATE =  91;    /* gzip comment -> HCRC_STATE */\nconst HCRC_STATE    = 103;    /* gzip header CRC -> BUSY_STATE */\nconst BUSY_STATE    = 113;    /* deflate -> FINISH_STATE */\nconst FINISH_STATE  = 666;    /* stream complete */\n\nconst BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nconst BS_BLOCK_DONE     = 2; /* block flush performed */\nconst BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nconst BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nconst OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nconst err = (strm, errorCode) => {\n  strm.msg = msg[errorCode];\n  return errorCode;\n};\n\nconst rank = (f) => {\n  return ((f) * 2) - ((f) > 4 ? 9 : 0);\n};\n\nconst zero = (buf) => {\n  let len = buf.length; while (--len >= 0) { buf[len] = 0; }\n};\n\n/* ===========================================================================\n * Slide the hash table when sliding the window down (could be avoided with 32\n * bit values at the expense of memory usage). We slide even when level == 0 to\n * keep the hash table consistent if we switch back to level > 0 later.\n */\nconst slide_hash = (s) => {\n  let n, m;\n  let p;\n  let wsize = s.w_size;\n\n  n = s.hash_size;\n  p = n;\n  do {\n    m = s.head[--p];\n    s.head[p] = (m >= wsize ? m - wsize : 0);\n  } while (--n);\n  n = wsize;\n//#ifndef FASTEST\n  p = n;\n  do {\n    m = s.prev[--p];\n    s.prev[p] = (m >= wsize ? m - wsize : 0);\n    /* If n is not on any hash chain, prev[n] is garbage but\n     * its value will never be used.\n     */\n  } while (--n);\n//#endif\n};\n\n/* eslint-disable new-cap */\nlet HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;\n// This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n// But breaks binary compatibility\n//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\nlet HASH = HASH_ZLIB;\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output, except for\n * some deflate_stored() output, goes through this function so some\n * applications may wish to modify it to avoid allocating a large\n * strm->next_out buffer and copying into it. (See also read_buf()).\n */\nconst flush_pending = (strm) => {\n  const s = strm.state;\n\n  //_tr_flush_bits(s);\n  let len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n  strm.next_out  += len;\n  s.pending_out  += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending      -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n};\n\n\nconst flush_block_only = (s, last) => {\n  _tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n};\n\n\nconst put_byte = (s, b) => {\n  s.pending_buf[s.pending++] = b;\n};\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nconst putShortMSB = (s, b) => {\n\n  //  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n};\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nconst read_buf = (strm, buf, start, size) => {\n\n  let len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n};\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nconst longest_match = (s, cur_match) => {\n\n  let chain_length = s.max_chain_length;      /* max hash chain length */\n  let scan = s.strstart; /* current string */\n  let match;                       /* matched string */\n  let len;                           /* length of current match */\n  let best_len = s.prev_length;              /* best match length so far */\n  let nice_match = s.nice_match;             /* stop if match long enough */\n  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  const _win = s.window; // shortcut\n\n  const wmask = s.w_mask;\n  const prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  const strend = s.strstart + MAX_MATCH;\n  let scan_end1  = _win[scan + best_len - 1];\n  let scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n};\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nconst fill_window = (s) => {\n\n  const _w_size = s.w_size;\n  let n, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      s.window.set(s.window.subarray(_w_size, _w_size + _w_size - more), 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n      if (s.insert > s.strstart) {\n        s.insert = s.strstart;\n      }\n      slide_hash(s);\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    const curr = s.strstart + s.lookahead;\n//    let init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n};\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n *\n * In case deflateParams() is used to later switch to a non-zero compression\n * level, s->matches (otherwise unused when storing) keeps track of the number\n * of hash table slides to perform. If s->matches is 1, then one hash table\n * slide will be done when switching. If s->matches is 2, the maximum value\n * allowed here, then the hash table will be cleared, since two or more slides\n * is the same as a clear.\n *\n * deflate_stored() is written to minimize the number of times an input byte is\n * copied. It is most efficient with large input and output buffers, which\n * maximizes the opportunites to have a single copy from next_in to next_out.\n */\nconst deflate_stored = (s, flush) => {\n\n  /* Smallest worthy block size when not flushing or finishing. By default\n   * this is 32K. This can be as small as 507 bytes for memLevel == 1. For\n   * large input and output buffers, the stored block size will be larger.\n   */\n  let min_block = s.pending_buf_size - 5 > s.w_size ? s.w_size : s.pending_buf_size - 5;\n\n  /* Copy as many min_block or larger stored blocks directly to next_out as\n   * possible. If flushing, copy the remaining available input to next_out as\n   * stored blocks, if there is enough space.\n   */\n  let len, left, have, last = 0;\n  let used = s.strm.avail_in;\n  do {\n    /* Set len to the maximum size block that we can copy directly with the\n     * available input data and output space. Set left to how much of that\n     * would be copied from what's left in the window.\n     */\n    len = 65535/* MAX_STORED */;     /* maximum deflate stored block length */\n    have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    if (s.strm.avail_out < have) {         /* need room for header */\n      break;\n    }\n      /* maximum stored block length that will fit in avail_out: */\n    have = s.strm.avail_out - have;\n    left = s.strstart - s.block_start;  /* bytes left in window */\n    if (len > left + s.strm.avail_in) {\n      len = left + s.strm.avail_in;   /* limit len to the input */\n    }\n    if (len > have) {\n      len = have;             /* limit len to the output */\n    }\n\n    /* If the stored block would be less than min_block in length, or if\n     * unable to copy all of the available input when flushing, then try\n     * copying to the window and the pending buffer instead. Also don't\n     * write an empty block when flushing -- deflate() does that.\n     */\n    if (len < min_block && ((len === 0 && flush !== Z_FINISH) ||\n                        flush === Z_NO_FLUSH ||\n                        len !== left + s.strm.avail_in)) {\n      break;\n    }\n\n    /* Make a dummy stored block in pending to get the header bytes,\n     * including any pending bits. This also updates the debugging counts.\n     */\n    last = flush === Z_FINISH && len === left + s.strm.avail_in ? 1 : 0;\n    _tr_stored_block(s, 0, 0, last);\n\n    /* Replace the lengths in the dummy stored block with len. */\n    s.pending_buf[s.pending - 4] = len;\n    s.pending_buf[s.pending - 3] = len >> 8;\n    s.pending_buf[s.pending - 2] = ~len;\n    s.pending_buf[s.pending - 1] = ~len >> 8;\n\n    /* Write the stored block header bytes. */\n    flush_pending(s.strm);\n\n//#ifdef ZLIB_DEBUG\n//    /* Update debugging counts for the data about to be copied. */\n//    s->compressed_len += len << 3;\n//    s->bits_sent += len << 3;\n//#endif\n\n    /* Copy uncompressed bytes from the window to next_out. */\n    if (left) {\n      if (left > len) {\n        left = len;\n      }\n      //zmemcpy(s->strm->next_out, s->window + s->block_start, left);\n      s.strm.output.set(s.window.subarray(s.block_start, s.block_start + left), s.strm.next_out);\n      s.strm.next_out += left;\n      s.strm.avail_out -= left;\n      s.strm.total_out += left;\n      s.block_start += left;\n      len -= left;\n    }\n\n    /* Copy uncompressed bytes directly from next_in to next_out, updating\n     * the check value.\n     */\n    if (len) {\n      read_buf(s.strm, s.strm.output, s.strm.next_out, len);\n      s.strm.next_out += len;\n      s.strm.avail_out -= len;\n      s.strm.total_out += len;\n    }\n  } while (last === 0);\n\n  /* Update the sliding window with the last s->w_size bytes of the copied\n   * data, or append all of the copied data to the existing window if less\n   * than s->w_size bytes were copied. Also update the number of bytes to\n   * insert in the hash tables, in the event that deflateParams() switches to\n   * a non-zero compression level.\n   */\n  used -= s.strm.avail_in;    /* number of input bytes directly copied */\n  if (used) {\n    /* If any input was used, then no unused input remains in the window,\n     * therefore s->block_start == s->strstart.\n     */\n    if (used >= s.w_size) {  /* supplant the previous history */\n      s.matches = 2;     /* clear hash */\n      //zmemcpy(s->window, s->strm->next_in - s->w_size, s->w_size);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - s.w_size, s.strm.next_in), 0);\n      s.strstart = s.w_size;\n      s.insert = s.strstart;\n    }\n    else {\n      if (s.window_size - s.strstart <= used) {\n        /* Slide the window down. */\n        s.strstart -= s.w_size;\n        //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n        s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n        if (s.matches < 2) {\n          s.matches++;   /* add a pending slide_hash() */\n        }\n        if (s.insert > s.strstart) {\n          s.insert = s.strstart;\n        }\n      }\n      //zmemcpy(s->window + s->strstart, s->strm->next_in - used, used);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - used, s.strm.next_in), s.strstart);\n      s.strstart += used;\n      s.insert += used > s.w_size - s.insert ? s.w_size - s.insert : used;\n    }\n    s.block_start = s.strstart;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* If the last block was written to next_out, then done. */\n  if (last) {\n    return BS_FINISH_DONE;\n  }\n\n  /* If flushing and all input has been consumed, then done. */\n  if (flush !== Z_NO_FLUSH && flush !== Z_FINISH &&\n    s.strm.avail_in === 0 && s.strstart === s.block_start) {\n    return BS_BLOCK_DONE;\n  }\n\n  /* Fill the window with any remaining input. */\n  have = s.window_size - s.strstart;\n  if (s.strm.avail_in > have && s.block_start >= s.w_size) {\n    /* Slide the window down. */\n    s.block_start -= s.w_size;\n    s.strstart -= s.w_size;\n    //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n    s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n    if (s.matches < 2) {\n      s.matches++;       /* add a pending slide_hash() */\n    }\n    have += s.w_size;      /* more space now */\n    if (s.insert > s.strstart) {\n      s.insert = s.strstart;\n    }\n  }\n  if (have > s.strm.avail_in) {\n    have = s.strm.avail_in;\n  }\n  if (have) {\n    read_buf(s.strm, s.window, s.strstart, have);\n    s.strstart += have;\n    s.insert += have > s.w_size - s.insert ? s.w_size - s.insert : have;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* There was not enough avail_out to write a complete worthy or flushed\n   * stored block to next_out. Write a stored block to pending instead, if we\n   * have enough input for a worthy block, or if flushing and there is enough\n   * room for the remaining input as a stored block in the pending buffer.\n   */\n  have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    /* maximum stored block length that will fit in pending: */\n  have = s.pending_buf_size - have > 65535/* MAX_STORED */ ? 65535/* MAX_STORED */ : s.pending_buf_size - have;\n  min_block = have > s.w_size ? s.w_size : have;\n  left = s.strstart - s.block_start;\n  if (left >= min_block ||\n     ((left || flush === Z_FINISH) && flush !== Z_NO_FLUSH &&\n     s.strm.avail_in === 0 && left <= have)) {\n    len = left > have ? have : left;\n    last = flush === Z_FINISH && s.strm.avail_in === 0 &&\n         len === left ? 1 : 0;\n    _tr_stored_block(s, s.block_start, len, last);\n    s.block_start += len;\n    flush_pending(s.strm);\n  }\n\n  /* We've done all we can with the available input and output. */\n  return last ? BS_FINISH_STARTED : BS_NEED_MORE;\n};\n\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nconst deflate_fast = (s, flush) => {\n\n  let hash_head;        /* head of the hash chain */\n  let bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nconst deflate_slow = (s, flush) => {\n\n  let hash_head;          /* head of hash chain */\n  let bflush;              /* set if current block must be flushed */\n\n  let max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n};\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nconst deflate_rle = (s, flush) => {\n\n  let bflush;            /* set if current block must be flushed */\n  let prev;              /* byte at distance one to match */\n  let scan, strend;      /* scan goes up to strend for length of run */\n\n  const _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nconst deflate_huff = (s, flush) => {\n\n  let bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nconst configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nconst lm_init = (s) => {\n\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n};\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new Uint16Array(HEAP_SIZE * 2);\n  this.dyn_dtree  = new Uint16Array((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new Uint16Array((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new Uint16Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new Uint16Array(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.sym_buf = 0;        /* buffer for distances and literals/lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.sym_next = 0;      /* running index in sym_buf */\n  this.sym_end = 0;       /* symbol table full when sym_next reaches this */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\n/* =========================================================================\n * Check for a valid deflate stream state. Return 0 if ok, 1 if not.\n */\nconst deflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const s = strm.state;\n  if (!s || s.strm !== strm || (s.status !== INIT_STATE &&\n//#ifdef GZIP\n                                s.status !== GZIP_STATE &&\n//#endif\n                                s.status !== EXTRA_STATE &&\n                                s.status !== NAME_STATE &&\n                                s.status !== COMMENT_STATE &&\n                                s.status !== HCRC_STATE &&\n                                s.status !== BUSY_STATE &&\n                                s.status !== FINISH_STATE)) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst deflateResetKeep = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  const s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status =\n//#ifdef GZIP\n    s.wrap === 2 ? GZIP_STATE :\n//#endif\n    s.wrap ? INIT_STATE : BUSY_STATE;\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = -2;\n  _tr_init(s);\n  return Z_OK;\n};\n\n\nconst deflateReset = (strm) => {\n\n  const ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n};\n\n\nconst deflateSetHeader = (strm, head) => {\n\n  if (deflateStateCheck(strm) || strm.state.wrap !== 2) {\n    return Z_STREAM_ERROR;\n  }\n  strm.state.gzhead = head;\n  return Z_OK;\n};\n\n\nconst deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {\n\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  let wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED || (windowBits === 8 && wrap !== 1)) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  const s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n  s.status = INIT_STATE;     /* to pass state test in deflateReset() */\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new Uint8Array(s.w_size * 2);\n  s.head = new Uint16Array(s.hash_size);\n  s.prev = new Uint16Array(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  /* We overlay pending_buf and sym_buf. This works since the average size\n   * for length/distance pairs over any compressed block is assured to be 31\n   * bits or less.\n   *\n   * Analysis: The longest fixed codes are a length code of 8 bits plus 5\n   * extra bits, for lengths 131 to 257. The longest fixed distance codes are\n   * 5 bits plus 13 extra bits, for distances 16385 to 32768. The longest\n   * possible fixed-codes length/distance pair is then 31 bits total.\n   *\n   * sym_buf starts one-fourth of the way into pending_buf. So there are\n   * three bytes in sym_buf for every four bytes in pending_buf. Each symbol\n   * in sym_buf is three bytes -- two for the distance and one for the\n   * literal/length. As each symbol is consumed, the pointer to the next\n   * sym_buf value to read moves forward three bytes. From that symbol, up to\n   * 31 bits are written to pending_buf. The closest the written pending_buf\n   * bits gets to the next sym_buf symbol to read is just before the last\n   * code is written. At that time, 31*(n-2) bits have been written, just\n   * after 24*(n-2) bits have been consumed from sym_buf. sym_buf starts at\n   * 8*n bits into pending_buf. (Note that the symbol buffer fills when n-1\n   * symbols are written.) The closest the writing gets to what is unread is\n   * then n+14 bits. Here n is lit_bufsize, which is 16384 by default, and\n   * can range from 128 to 32768.\n   *\n   * Therefore, at a minimum, there are 142 bits of space between what is\n   * written and what is read in the overlain buffers, so the symbols cannot\n   * be overwritten by the compressed data. That space is actually 139 bits,\n   * due to the three-bit fixed-code block header.\n   *\n   * That covers the case where either Z_FIXED is specified, forcing fixed\n   * codes, or when the use of fixed codes is chosen, because that choice\n   * results in a smaller compressed block than dynamic codes. That latter\n   * condition then assures that the above analysis also covers all dynamic\n   * blocks. A dynamic-code block will only be chosen to be emitted if it has\n   * fewer bits than a fixed-code block would for the same set of symbols.\n   * Therefore its average symbol length is assured to be less than 31. So\n   * the compressed data for a dynamic block also cannot overwrite the\n   * symbols from which it is being constructed.\n   */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n  s.pending_buf = new Uint8Array(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->sym_buf = s->pending_buf + s->lit_bufsize;\n  s.sym_buf = s.lit_bufsize;\n\n  //s->sym_end = (s->lit_bufsize - 1) * 3;\n  s.sym_end = (s.lit_bufsize - 1) * 3;\n  /* We avoid equality with lit_bufsize*3 because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n};\n\nconst deflateInit = (strm, level) => {\n\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n};\n\n\n/* ========================================================================= */\nconst deflate = (strm, flush) => {\n\n  if (deflateStateCheck(strm) || flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  const s = strm.state;\n\n  if (!strm.output ||\n      (strm.avail_in !== 0 && !strm.input) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  const old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Write the header */\n  if (s.status === INIT_STATE && s.wrap === 0) {\n    s.status = BUSY_STATE;\n  }\n  if (s.status === INIT_STATE) {\n    /* zlib header */\n    let header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n    let level_flags = -1;\n\n    if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n      level_flags = 0;\n    } else if (s.level < 6) {\n      level_flags = 1;\n    } else if (s.level === 6) {\n      level_flags = 2;\n    } else {\n      level_flags = 3;\n    }\n    header |= (level_flags << 6);\n    if (s.strstart !== 0) { header |= PRESET_DICT; }\n    header += 31 - (header % 31);\n\n    putShortMSB(s, header);\n\n    /* Save the adler32 of the preset dictionary: */\n    if (s.strstart !== 0) {\n      putShortMSB(s, strm.adler >>> 16);\n      putShortMSB(s, strm.adler & 0xffff);\n    }\n    strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK;\n    }\n  }\n//#ifdef GZIP\n  if (s.status === GZIP_STATE) {\n    /* gzip header */\n    strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n    put_byte(s, 31);\n    put_byte(s, 139);\n    put_byte(s, 8);\n    if (!s.gzhead) { // s->gzhead == Z_NULL\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, OS_CODE);\n      s.status = BUSY_STATE;\n\n      /* Compression must start with an empty pending buffer */\n      flush_pending(strm);\n      if (s.pending !== 0) {\n        s.last_flush = -1;\n        return Z_OK;\n      }\n    }\n    else {\n      put_byte(s, (s.gzhead.text ? 1 : 0) +\n                  (s.gzhead.hcrc ? 2 : 0) +\n                  (!s.gzhead.extra ? 0 : 4) +\n                  (!s.gzhead.name ? 0 : 8) +\n                  (!s.gzhead.comment ? 0 : 16)\n      );\n      put_byte(s, s.gzhead.time & 0xff);\n      put_byte(s, (s.gzhead.time >> 8) & 0xff);\n      put_byte(s, (s.gzhead.time >> 16) & 0xff);\n      put_byte(s, (s.gzhead.time >> 24) & 0xff);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, s.gzhead.os & 0xff);\n      if (s.gzhead.extra && s.gzhead.extra.length) {\n        put_byte(s, s.gzhead.extra.length & 0xff);\n        put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n      }\n      if (s.gzhead.hcrc) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n      }\n      s.gzindex = 0;\n      s.status = EXTRA_STATE;\n    }\n  }\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let left = (s.gzhead.extra.length & 0xffff) - s.gzindex;\n      while (s.pending + left > s.pending_buf_size) {\n        let copy = s.pending_buf_size - s.pending;\n        // zmemcpy(s.pending_buf + s.pending,\n        //    s.gzhead.extra + s.gzindex, copy);\n        s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex, s.gzindex + copy), s.pending);\n        s.pending = s.pending_buf_size;\n        //--- HCRC_UPDATE(beg) ---//\n        if (s.gzhead.hcrc && s.pending > beg) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n        }\n        //---//\n        s.gzindex += copy;\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK;\n        }\n        beg = 0;\n        left -= copy;\n      }\n      // JS specific: s.gzhead.extra may be TypedArray or Array for backward compatibility\n      //              TypedArray.slice and TypedArray.from don't exist in IE10-IE11\n      let gzhead_extra = new Uint8Array(s.gzhead.extra);\n      // zmemcpy(s->pending_buf + s->pending,\n      //     s->gzhead->extra + s->gzindex, left);\n      s.pending_buf.set(gzhead_extra.subarray(s.gzindex, s.gzindex + left), s.pending);\n      s.pending += left;\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = NAME_STATE;\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = COMMENT_STATE;\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n    }\n    s.status = HCRC_STATE;\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK;\n        }\n      }\n      put_byte(s, strm.adler & 0xff);\n      put_byte(s, (strm.adler >> 8) & 0xff);\n      strm.adler = 0; //crc32(0L, Z_NULL, 0);\n    }\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK;\n    }\n  }\n//#endif\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    let bstate = s.level === 0 ? deflate_stored(s, flush) :\n                 s.strategy === Z_HUFFMAN_ONLY ? deflate_huff(s, flush) :\n                 s.strategy === Z_RLE ? deflate_rle(s, flush) :\n                 configuration_table[s.level].func(s, flush);\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        _tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        _tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n};\n\n\nconst deflateEnd = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR;\n  }\n\n  const status = strm.state.status;\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n};\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nconst deflateSetDictionary = (strm, dictionary) => {\n\n  let dictLength = dictionary.length;\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR;\n  }\n\n  const s = strm.state;\n  const wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    let tmpDict = new Uint8Array(s.w_size);\n    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  const avail = strm.avail_in;\n  const next = strm.next_in;\n  const input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    let str = s.strstart;\n    let n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n};\n\n\nmodule.exports.deflateInit = deflateInit;\nmodule.exports.deflateInit2 = deflateInit2;\nmodule.exports.deflateReset = deflateReset;\nmodule.exports.deflateResetKeep = deflateResetKeep;\nmodule.exports.deflateSetHeader = deflateSetHeader;\nmodule.exports.deflate = deflate;\nmodule.exports.deflateEnd = deflateEnd;\nmodule.exports.deflateSetDictionary = deflateSetDictionary;\nmodule.exports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.deflateBound = deflateBound;\nmodule.exports.deflateCopy = deflateCopy;\nmodule.exports.deflateGetDictionary = deflateGetDictionary;\nmodule.exports.deflateParams = deflateParams;\nmodule.exports.deflatePending = deflatePending;\nmodule.exports.deflatePrime = deflatePrime;\nmodule.exports.deflateTune = deflateTune;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nconst BAD = 16209;       /* got a data error -- remain here until reset */\nconst TYPE = 16191;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  let _in;                    /* local strm.input */\n  let last;                   /* have enough input while in < last */\n  let _out;                   /* local strm.output */\n  let beg;                    /* inflate()'s initial strm.output */\n  let end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  let dmax;                   /* maximum distance from zlib header */\n//#endif\n  let wsize;                  /* window size or zero if not using window */\n  let whave;                  /* valid bytes in the window */\n  let wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  let s_window;               /* allocated sliding window, if wsize != 0 */\n  let hold;                   /* local strm.hold */\n  let bits;                   /* local strm.bits */\n  let lcode;                  /* local strm.lencode */\n  let dcode;                  /* local strm.distcode */\n  let lmask;                  /* mask for first level of length codes */\n  let dmask;                  /* mask for first level of distance codes */\n  let here;                   /* retrieved table entry */\n  let op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  let len;                    /* match length, unused bytes */\n  let dist;                   /* match distance */\n  let from;                   /* where to copy match from */\n  let from_source;\n\n\n  let input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  const state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32       = require('./adler32');\nconst crc32         = require('./crc32');\nconst inflate_fast  = require('./inffast');\nconst inflate_table = require('./inftrees');\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_FINISH, Z_BLOCK, Z_TREES,\n  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR, Z_BUF_ERROR,\n  Z_DEFLATED\n} = require('./constants');\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nconst    HEAD = 16180;       /* i: waiting for magic header */\nconst    FLAGS = 16181;      /* i: waiting for method and flags (gzip) */\nconst    TIME = 16182;       /* i: waiting for modification time (gzip) */\nconst    OS = 16183;         /* i: waiting for extra flags and operating system (gzip) */\nconst    EXLEN = 16184;      /* i: waiting for extra length (gzip) */\nconst    EXTRA = 16185;      /* i: waiting for extra bytes (gzip) */\nconst    NAME = 16186;       /* i: waiting for end of file name (gzip) */\nconst    COMMENT = 16187;    /* i: waiting for end of comment (gzip) */\nconst    HCRC = 16188;       /* i: waiting for header crc (gzip) */\nconst    DICTID = 16189;    /* i: waiting for dictionary check value */\nconst    DICT = 16190;      /* waiting for inflateSetDictionary() call */\nconst        TYPE = 16191;      /* i: waiting for type bits, including last-flag bit */\nconst        TYPEDO = 16192;    /* i: same, but skip check to exit inflate on new block */\nconst        STORED = 16193;    /* i: waiting for stored size (length and complement) */\nconst        COPY_ = 16194;     /* i/o: same as COPY below, but only first time in */\nconst        COPY = 16195;      /* i/o: waiting for input or output to copy stored block */\nconst        TABLE = 16196;     /* i: waiting for dynamic block table lengths */\nconst        LENLENS = 16197;   /* i: waiting for code length code lengths */\nconst        CODELENS = 16198;  /* i: waiting for length/lit and distance code lengths */\nconst            LEN_ = 16199;      /* i: same as LEN below, but only first time in */\nconst            LEN = 16200;       /* i: waiting for length/lit/eob code */\nconst            LENEXT = 16201;    /* i: waiting for length extra bits */\nconst            DIST = 16202;      /* i: waiting for distance code */\nconst            DISTEXT = 16203;   /* i: waiting for distance extra bits */\nconst            MATCH = 16204;     /* o: waiting for output space to copy string */\nconst            LIT = 16205;       /* o: waiting for output space to write literal */\nconst    CHECK = 16206;     /* i: waiting for 32-bit check value */\nconst    LENGTH = 16207;    /* i: waiting for 32-bit length (gzip) */\nconst    DONE = 16208;      /* finished check, done -- remain here until reset */\nconst    BAD = 16209;       /* got a data error -- remain here until reset */\nconst    MEM = 16210;       /* got an inflate() memory error -- remain here until reset */\nconst    SYNC = 16211;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_WBITS = MAX_WBITS;\n\n\nconst zswap32 = (q) => {\n\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n};\n\n\nfunction InflateState() {\n  this.strm = null;           /* pointer back to this zlib stream */\n  this.mode = 0;              /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip,\n                                 bit 2 true to validate check value */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib), or\n                                 -1 if raw or no header yet */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\n  this.work = new Uint16Array(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\n\nconst inflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const state = strm.state;\n  if (!state || state.strm !== strm ||\n    state.mode < HEAD || state.mode > SYNC) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst inflateResetKeep = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR; }\n  const state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.flags = -1;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n};\n\n\nconst inflateReset = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR; }\n  const state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n};\n\n\nconst inflateReset2 = (strm, windowBits) => {\n  let wrap;\n\n  /* get the state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR; }\n  const state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 5;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n};\n\n\nconst inflateInit2 = (strm, windowBits) => {\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  const state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.strm = strm;\n  state.window = null/*Z_NULL*/;\n  state.mode = HEAD;     /* to pass state test in inflateReset2() */\n  const ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n};\n\n\nconst inflateInit = (strm) => {\n\n  return inflateInit2(strm, DEF_WBITS);\n};\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nlet virgin = true;\n\nlet lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n\nconst fixedtables = (state) => {\n\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    lenfix = new Int32Array(512);\n    distfix = new Int32Array(32);\n\n    /* literal/length table */\n    let sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n};\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nconst updatewindow = (strm, src, end, copy) => {\n\n  let dist;\n  const state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new Uint8Array(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    state.window.set(src.subarray(end - state.wsize, end), 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      state.window.set(src.subarray(end - copy, end), 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n};\n\n\nconst inflate = (strm, flush) => {\n\n  let state;\n  let input, output;          // input/output buffers\n  let next;                   /* next input INDEX */\n  let put;                    /* next output INDEX */\n  let have, left;             /* available input and output */\n  let hold;                   /* bit buffer */\n  let bits;                   /* bits in bit buffer */\n  let _in, _out;              /* save starting available input and output */\n  let copy;                   /* number of stored or match bytes to copy */\n  let from;                   /* where to copy match bytes from */\n  let from_source;\n  let here = 0;               /* current decoding table entry */\n  let here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //let last;                   /* parent table entry */\n  let last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  let len;                    /* length to copy for repeats, bits to drop */\n  let ret;                    /* return code */\n  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\n  let opts;\n\n  let n; // temporary variable for NEED_BITS\n\n  const order = /* permutation of code lengths */\n    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);\n\n\n  if (inflateStateCheck(strm) || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          if (state.wbits === 0) {\n            state.wbits = 15;\n          }\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        if (len > 15 || len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n\n        // !!! pako patch. Force use `options.windowBits` if passed.\n        // Required to always use max window size by default.\n        state.dmax = 1 << state.wbits;\n        //state.dmax = 1 << len;\n\n        state.flags = 0;               /* indicate zlib header */\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Uint8Array(state.head.extra_len);\n              }\n              state.head.extra.set(\n                input.subarray(\n                  next,\n                  // extra field is limited to 65536 bytes\n                  // - no need for additional size check\n                  next + copy\n                ),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if ((state.flags & 0x0200) && (state.wrap & 4)) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          output.set(input.subarray(next, next + copy), put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if ((state.wrap & 4) && _out) {\n            strm.adler = state.check =\n                /*UPDATE_CHECK(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.wrap & 4) && (state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if ((state.wrap & 4) && _out) {\n    strm.adler = state.check = /*UPDATE_CHECK(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n};\n\n\nconst inflateEnd = (strm) => {\n\n  if (inflateStateCheck(strm)) {\n    return Z_STREAM_ERROR;\n  }\n\n  let state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n};\n\n\nconst inflateGetHeader = (strm, head) => {\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR; }\n  const state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n};\n\n\nconst inflateSetDictionary = (strm, dictionary) => {\n  const dictLength = dictionary.length;\n\n  let state;\n  let dictid;\n  let ret;\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n};\n\n\nmodule.exports.inflateReset = inflateReset;\nmodule.exports.inflateReset2 = inflateReset2;\nmodule.exports.inflateResetKeep = inflateResetKeep;\nmodule.exports.inflateInit = inflateInit;\nmodule.exports.inflateInit2 = inflateInit2;\nmodule.exports.inflate = inflate;\nmodule.exports.inflateEnd = inflateEnd;\nmodule.exports.inflateGetHeader = inflateGetHeader;\nmodule.exports.inflateSetDictionary = inflateSetDictionary;\nmodule.exports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.inflateCodesUsed = inflateCodesUsed;\nmodule.exports.inflateCopy = inflateCopy;\nmodule.exports.inflateGetDictionary = inflateGetDictionary;\nmodule.exports.inflateMark = inflateMark;\nmodule.exports.inflatePrime = inflatePrime;\nmodule.exports.inflateSync = inflateSync;\nmodule.exports.inflateSyncPoint = inflateSyncPoint;\nmodule.exports.inflateUndermine = inflateUndermine;\nmodule.exports.inflateValidate = inflateValidate;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst MAXBITS = 15;\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\nconst lbase = new Uint16Array([ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n]);\n\nconst lext = new Uint8Array([ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n]);\n\nconst dbase = new Uint16Array([ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n]);\n\nconst dext = new Uint8Array([ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n]);\n\nconst inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>\n{\n  const bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  let len = 0;               /* a code's length in bits */\n  let sym = 0;               /* index of code symbols */\n  let min = 0, max = 0;          /* minimum and maximum code lengths */\n  let root = 0;              /* number of index bits for root table */\n  let curr = 0;              /* number of index bits for current table */\n  let drop = 0;              /* code bits to drop for sub-table */\n  let left = 0;                   /* number of prefix codes available */\n  let used = 0;              /* code entries in table used */\n  let huff = 0;              /* Huffman code */\n  let incr;              /* for incrementing code, index */\n  let fill;              /* index for replicating entries */\n  let low;               /* low bits for current root entry */\n  let mask;              /* mask for low root bits */\n  let next;             /* next available space in table */\n  let base = null;     /* base value table to use */\n//  let shoextra;    /* extra bits table to use */\n  let match;                  /* use base and extra for symbol >= match */\n  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  let extra = null;\n\n  let here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    match = 20;\n\n  } else if (type === LENS) {\n    base = lbase;\n    extra = lext;\n    match = 257;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    match = 0;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] + 1 < match) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] >= match) {\n      here_op = extra[work[sym] - match];\n      here_val = base[work[sym] - match];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\nmodule.exports = inflate_table;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//const Z_FILTERED          = 1;\n//const Z_HUFFMAN_ONLY      = 2;\n//const Z_RLE               = 3;\nconst Z_FIXED               = 4;\n//const Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nconst Z_BINARY              = 0;\nconst Z_TEXT                = 1;\n//const Z_ASCII             = 1; // = Z_TEXT\nconst Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES    = 2;\n/* The three kinds of block type */\n\nconst MIN_MATCH    = 3;\nconst MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nconst D_CODES       = 30;\n/* number of distance codes */\n\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nconst MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nconst MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nconst END_BLOCK   = 256;\n/* end of block literal code */\n\nconst REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nconst REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nconst REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nconst extra_lbits =   /* extra bits for each length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);\n\nconst extra_dbits =   /* extra bits for each distance code */\n  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);\n\nconst extra_blbits =  /* extra bits for each bit length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);\n\nconst bl_order =\n  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nconst DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nconst static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nconst static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nconst _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nconst _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nconst base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nconst base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nlet static_l_desc;\nlet static_d_desc;\nlet static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nconst d_code = (dist) => {\n\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n};\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nconst put_short = (s, w) => {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n};\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nconst send_bits = (s, value, length) => {\n\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n};\n\n\nconst send_code = (s, c, tree) => {\n\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n};\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nconst bi_reverse = (code, len) => {\n\n  let res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nconst bi_flush = (s) => {\n\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n};\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nconst gen_bitlen = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n\n  const tree            = desc.dyn_tree;\n  const max_code        = desc.max_code;\n  const stree           = desc.stat_desc.static_tree;\n  const has_stree       = desc.stat_desc.has_stree;\n  const extra           = desc.stat_desc.extra_bits;\n  const base            = desc.stat_desc.extra_base;\n  const max_length      = desc.stat_desc.max_length;\n  let h;              /* heap index */\n  let n, m;           /* iterate over the tree elements */\n  let bits;           /* bit length */\n  let xbits;          /* extra bits */\n  let f;              /* frequency */\n  let overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Tracev((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Tracev((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nconst gen_codes = (tree, max_code, bl_count) => {\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n\n  const next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  let code = 0;              /* running code value */\n  let bits;                  /* bit index */\n  let n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    code = (code + bl_count[bits - 1]) << 1;\n    next_code[bits] = code;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    let len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n};\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nconst tr_static_init = () => {\n\n  let n;        /* iterates over tree elements */\n  let bits;     /* bit counter */\n  let length;   /* length value */\n  let code;     /* code value */\n  let dist;     /* distance index */\n  const bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n};\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nconst init_block = (s) => {\n\n  let n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.sym_next = s.matches = 0;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nconst bi_windup = (s) =>\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n};\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nconst smaller = (tree, n, m, depth) => {\n\n  const _n2 = n * 2;\n  const _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n};\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nconst pqdownheap = (s, tree, k) => {\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n\n  const v = s.heap[k];\n  let j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n};\n\n\n// inlined manually\n// const SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nconst compress_block = (s, ltree, dtree) => {\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n\n  let dist;           /* distance of matched string */\n  let lc;             /* match length or unmatched char (if dist == 0) */\n  let sx = 0;         /* running index in sym_buf */\n  let code;           /* the code to send */\n  let extra;          /* number of extra bits to send */\n\n  if (s.sym_next !== 0) {\n    do {\n      dist = s.pending_buf[s.sym_buf + sx++] & 0xff;\n      dist += (s.pending_buf[s.sym_buf + sx++] & 0xff) << 8;\n      lc = s.pending_buf[s.sym_buf + sx++];\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and sym_buf is ok: */\n      //Assert(s->pending < s->lit_bufsize + sx, \"pendingBuf overflow\");\n\n    } while (sx < s.sym_next);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n};\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nconst build_tree = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n\n  const tree     = desc.dyn_tree;\n  const stree    = desc.stat_desc.static_tree;\n  const has_stree = desc.stat_desc.has_stree;\n  const elems    = desc.stat_desc.elems;\n  let n, m;          /* iterate over heap elements */\n  let max_code = -1; /* largest code with non zero frequency */\n  let node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n};\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nconst scan_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nconst send_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nconst build_bl_tree = (s) => {\n\n  let max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n};\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nconst send_all_trees = (s, lcodes, dcodes, blcodes) => {\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n\n  let rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n};\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"block list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"allow list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nconst detect_data_type = (s) => {\n  /* block_mask is the bit mask of block-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  let block_mask = 0xf3ffc07f;\n  let n;\n\n  /* Check for non-textual (\"block-listed\") bytes. */\n  for (n = 0; n <= 31; n++, block_mask >>>= 1) {\n    if ((block_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"allow-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"block-listed\" or \"allow-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n};\n\n\nlet static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nconst _tr_init = (s) =>\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n};\n\n\n/* ===========================================================================\n * Send a stored block\n */\nconst _tr_stored_block = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  bi_windup(s);        /* align on byte boundary */\n  put_short(s, stored_len);\n  put_short(s, ~stored_len);\n  if (stored_len) {\n    s.pending_buf.set(s.window.subarray(buf, buf + stored_len), s.pending);\n  }\n  s.pending += stored_len;\n};\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nconst _tr_align = (s) => {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n};\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and write out the encoded block.\n */\nconst _tr_flush_block = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  let max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->sym_next / 3));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n};\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nconst _tr_tally = (s, dist, lc) => {\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist;\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist >> 8;\n  s.pending_buf[s.sym_buf + s.sym_next++] = lc;\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n  return (s.sym_next === s.sym_end);\n};\n\nmodule.exports._tr_init  = _tr_init;\nmodule.exports._tr_stored_block = _tr_stored_block;\nmodule.exports._tr_flush_block  = _tr_flush_block;\nmodule.exports._tr_tally = _tr_tally;\nmodule.exports._tr_align = _tr_align;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n","/**\n * ErrorBoundary  graceful error handling for the flowcharting panel\n */\n\nimport React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { css } from '@emotion/css';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n  errorInfo?: ErrorInfo;\n}\n\nexport class FlowchartErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    console.error('[Flowcharting] Panel error:', error, errorInfo);\n    this.setState({ error, errorInfo });\n  }\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <div className={styles.container}>\n          <h3 className={styles.title}>Flowchart Rendering Error</h3>\n          <p className={styles.message}>\n            {this.state.error?.message || 'An unexpected error occurred'}\n          </p>\n          {this.state.errorInfo && (\n            <details className={styles.details}>\n              <summary>Error Details</summary>\n              <pre className={styles.stack}>\n                {this.state.errorInfo.componentStack}\n              </pre>\n            </details>\n          )}\n          <button\n            className={styles.button}\n            onClick={() => this.setState({ hasError: false })}\n          >\n            Try Again\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nconst styles = {\n  container: css`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    padding: 40px 20px;\n    text-align: center;\n  `,\n  title: css`\n    font-size: 18px;\n    font-weight: 600;\n    margin-bottom: 10px;\n    color: #f2495c;\n  `,\n  message: css`\n    font-size: 14px;\n    color: #999;\n    margin-bottom: 20px;\n    max-width: 500px;\n  `,\n  details: css`\n    margin-top: 20px;\n    text-align: left;\n    summary {\n      cursor: pointer;\n      font-size: 12px;\n      color: #666;\n      margin-bottom: 10px;\n    }\n  `,\n  stack: css`\n    font-size: 11px;\n    font-family: monospace;\n    background: #f5f5f5;\n    padding: 10px;\n    border-radius: 4px;\n    overflow-x: auto;\n    max-width: 600px;\n    color: #333;\n  `,\n  button: css`\n    padding: 8px 16px;\n    background: #1f77b4;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 14px;\n    &:hover {\n      background: #1a5f8f;\n    }\n  `,\n};\n","/**\n * FlowchartPanel  main panel component, orchestrates all hooks and rendering\n */\n\nimport React, { useState, useCallback, useMemo, useRef } from 'react';\nimport { PanelProps } from '@grafana/data';\nimport { FlowchartPanelOptions, DEFAULT_PANEL_OPTIONS } from '../types/options';\nimport { ZoomState } from '../types/state';\nimport { MxGraph } from '../types/graph';\nimport { useGraph } from '../hooks/useGraph';\nimport { useRulesEngine } from '../hooks/useRulesEngine';\nimport { useStateManager } from '../hooks/useStateManager';\nimport { useFlowchartNavigation } from '../hooks/useFlowchartNavigation';\nimport { FlowchartProvider } from '../context/FlowchartContext';\nimport { FlowchartRenderer } from './FlowchartRenderer';\nimport { FlowchartTabs } from './FlowchartTabs';\nimport { InspectorOverlay } from './InspectorOverlay';\nimport { FlowchartErrorBoundary } from './ErrorBoundary';\nimport { computeCellStates } from '../core/StateComputer';\nimport { applyCellStates } from '../core/StateCycleApplier';\nimport { log } from '../utils/logging';\nimport { css } from '@emotion/css';\n\ntype Props = PanelProps<FlowchartPanelOptions>;\n\nexport const FlowchartPanel: React.FC<Props> = ({\n  options,\n  data,\n  width,\n  height,\n  replaceVariables,\n}) => {\n  // Merge with defaults for safety\n  const opts = useMemo(() => ({ ...DEFAULT_PANEL_OPTIONS, ...options }), [options]);\n\n  // Build flowcharts array from flat options (Grafana builder API doesn't support array paths)\n  const flowcharts = useMemo(() => {\n    // If flat content field is set, use it to build the primary flowchart\n    if (opts.content) {\n      return [{\n        name: opts.sourceName || 'Default',\n        type: opts.sourceType || 'xml' as const,\n        content: opts.content,\n        url: opts.sourceUrl || '',\n        download: false,\n        enabled: true,\n      }];\n    }\n    // Fall back to flowcharts array (for migration or multi-flowchart scenarios)\n    if (opts.flowcharts?.length > 0 && opts.flowcharts[0].content) {\n      return opts.flowcharts;\n    }\n    return [{ name: 'Default', type: 'xml' as const, content: '', url: '', download: false, enabled: true }];\n  }, [opts.content, opts.sourceName, opts.sourceType, opts.sourceUrl, opts.flowcharts]);\n\n  const [error, setError] = useState<string | null>(null);\n  const [zoomState, setZoomState] = useState<ZoomState>({ scale: 1, x: 0, y: 0 });\n  const [inspectorMode] = useState(false);\n\n  // Multi-flowchart navigation\n  const { activeIndex, activeFlowchart, navigate, hasMultiple } = useFlowchartNavigation(\n    flowcharts\n  );\n\n  // Rules engine: process data  evaluate rules (pure computation, no effects)\n  const { ruleResults, metrics } = useRulesEngine({\n    data: data.series,\n    rules: opts.rules,\n    replaceVariables,\n  });\n\n  // Store rules and ruleResults in refs so onGraphReady always has the latest\n  const rulesRef = useRef(opts.rules);\n  rulesRef.current = opts.rules;\n  const ruleResultsRef = useRef(ruleResults);\n  ruleResultsRef.current = ruleResults;\n\n  // Callback: apply states immediately after graph creation (same effect, no cross-render)\n  const handleGraphReady = useCallback((graph: MxGraph, cellIds: string[], cellLabels: Map<string, string>) => {\n    const rules = rulesRef.current;\n    const results = ruleResultsRef.current;\n    if (results.length === 0 || cellIds.length === 0) {\n      log.info(`onGraphReady: no states to apply (results=${results.length}, cells=${cellIds.length})`);\n      return;\n    }\n    const states = computeCellStates(rules, results, cellIds, cellLabels);\n    if (states.size > 0) {\n      log.info(`onGraphReady: applying ${states.size} states immediately`);\n      applyCellStates(graph, states);\n    }\n  }, []);\n\n  // Graph lifecycle\n  const { containerRef, graph, xgraph, cellIds, cellLabels } = useGraph({\n    width,\n    height: hasMultiple ? height - 30 : height,\n    content: activeFlowchart?.content || '',\n    pageIndex: 0,\n    background: opts.background.transparent ? 'transparent' : opts.background.color,\n    onError: setError,\n    onGraphReady: handleGraphReady,\n  });\n\n  // State manager: also applies states when rule results change (data refresh)\n  const cellStates = useStateManager({\n    graph,\n    rules: opts.rules,\n    ruleResults,\n    cellIds,\n    cellLabels,\n  });\n\n  const handleZoomChange = useCallback((state: ZoomState) => {\n    setZoomState(state);\n  }, []);\n\n  // Empty state\n  if (!activeFlowchart?.content) {\n    return (\n      <div className={styles.empty}>\n        <h3>Flowcharting Panel</h3>\n        <p>Paste your diagram in panel options</p>\n        <div className={styles.formats}>\n          <strong>Supported Formats:</strong>\n          <br />\n          <br />\n          Draw.io XML (File &rarr; Export as &rarr; XML)\n          <br />\n          Compressed Draw.io XML\n          <br />\n          SVG content\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className={styles.error}>\n        <h3>Error Rendering Diagram</h3>\n        <p>{error}</p>\n        <p className={styles.hint}>\n          Troubleshooting:\n          <br />\n          1. Make sure you copied the complete XML from Draw.io\n          <br />\n          2. Use File &rarr; Export as &rarr; XML\n          <br />\n          3. Check browser console (F12) for details\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <FlowchartErrorBoundary>\n      <FlowchartProvider\n        value={{\n          graph,\n          cellStates,\n          zoomState,\n          options: opts,\n          data: data.series,\n          replaceVariables,\n        }}\n      >\n        <div className={styles.panel} style={{ width, height }}>\n          {hasMultiple && (\n            <FlowchartTabs\n              flowcharts={flowcharts}\n              activeIndex={activeIndex}\n              onSelect={navigate}\n            />\n          )}\n          <FlowchartRenderer\n            containerRef={containerRef}\n            graph={graph}\n            width={width}\n            height={hasMultiple ? height - 30 : height}\n            cellStates={cellStates}\n            zoomOptions={opts.zoom}\n            tooltipOptions={opts.tooltip}\n            backgroundOptions={opts.background}\n            inspectorMode={inspectorMode}\n            data={data.series}\n            replaceVariables={replaceVariables}\n            onZoomChange={handleZoomChange}\n          />\n          {inspectorMode && (\n            <InspectorOverlay\n              cellStates={cellStates}\n              cellLabels={cellLabels}\n              cellIds={cellIds}\n            />\n          )}\n        </div>\n      </FlowchartProvider>\n    </FlowchartErrorBoundary>\n  );\n};\n\nconst styles = {\n  panel: css`\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n  `,\n  empty: css`\n    padding: 20px;\n    text-align: center;\n    font-family: Arial, sans-serif;\n    h3 {\n      margin-bottom: 8px;\n    }\n  `,\n  formats: css`\n    background: #f0f0f0;\n    padding: 15px;\n    border-radius: 5px;\n    text-align: left;\n    max-width: 400px;\n    margin: 12px auto 0;\n    font-size: 13px;\n  `,\n  error: css`\n    padding: 20px;\n    color: #c62828;\n    font-family: Arial, sans-serif;\n    h3 {\n      margin-bottom: 8px;\n    }\n  `,\n  hint: css`\n    font-size: 12px;\n    color: #666;\n    margin-top: 12px;\n  `,\n};\n","/**\n * FlowchartRenderer  mxGraph rendering surface with interaction handlers\n */\n\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport { css } from '@emotion/css';\nimport { GrafanaTheme2, DataFrame } from '@grafana/data';\nimport { useTheme2 } from '@grafana/ui';\nimport { MxGraph, MxGraphCell } from '../types/graph';\nimport { CellState, ZoomState } from '../types/state';\nimport { BackgroundOptions, TooltipOptions } from '../types/options';\nimport { useZoom } from '../hooks/useZoom';\nimport { useTooltip, TooltipData } from '../hooks/useTooltip';\nimport { useClickHandler } from '../hooks/useClickHandler';\nimport { FlowchartTooltip } from './FlowchartTooltip';\nimport { log } from '../utils/logging';\n\ninterface FlowchartRendererProps {\n  containerRef: React.RefObject<HTMLDivElement>;\n  graph: MxGraph | null;\n  width: number;\n  height: number;\n  cellStates: Map<string, CellState>;\n  zoomOptions: {\n    enableWheel: boolean;\n    enablePan: boolean;\n    enableDoubleClick: boolean;\n    lock: boolean;\n  };\n  tooltipOptions: TooltipOptions;\n  backgroundOptions: BackgroundOptions;\n  inspectorMode: boolean;\n  data: DataFrame[];\n  replaceVariables: (str: string) => string;\n  onZoomChange?: (state: ZoomState) => void;\n}\n\nexport const FlowchartRenderer: React.FC<FlowchartRendererProps> = ({\n  containerRef,\n  graph,\n  width,\n  height,\n  cellStates,\n  zoomOptions,\n  tooltipOptions,\n  backgroundOptions,\n  inspectorMode,\n  data,\n  replaceVariables,\n  onZoomChange,\n}) => {\n  const theme = useTheme2();\n  const { tooltip, showTooltip, hideTooltip } = useTooltip();\n  const { handleClick } = useClickHandler({ replaceVariables, cellStates });\n  const currentCellRef = useRef<MxGraphCell | null>(null);\n\n  // Zoom handling\n  useZoom({\n    containerRef,\n    graph,\n    enabled: !zoomOptions.lock,\n    enableWheel: zoomOptions.enableWheel,\n    enablePan: zoomOptions.enablePan,\n    enableDoubleClick: zoomOptions.enableDoubleClick,\n    onZoomChange,\n  });\n\n  // Mouse interaction handlers for tooltip and click\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container || !graph) {\n      return;\n    }\n\n    // Use clientX/clientY relative to container rect (not offsetX/offsetY which\n    // is relative to event target  can be SVG child, not the container div)\n    const getContainerCoords = (e: MouseEvent) => {\n      const rect = container.getBoundingClientRect();\n      return { x: e.clientX - rect.left, y: e.clientY - rect.top };\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const { x, y } = getContainerCoords(e);\n      const cell = getCellAtPoint(graph, x, y);\n      if (cell !== currentCellRef.current) {\n        if (currentCellRef.current) {\n          hideTooltip();\n        }\n        if (cell) {\n          const state = cellStates.get(cell.id);\n          if (state && tooltipOptions.enabled) {\n            showTooltip(cell, state, {\n              x: e.clientX + 10,\n              y: e.clientY + 10,\n            });\n          }\n          // Set cursor for clickable cells\n          if (state?.link) {\n            container.style.cursor = 'pointer';\n          } else {\n            container.style.cursor = zoomOptions.enablePan ? 'grab' : 'default';\n          }\n        } else {\n          container.style.cursor = zoomOptions.enablePan ? 'grab' : 'default';\n        }\n        currentCellRef.current = cell;\n      }\n    };\n\n    const handleMouseLeave = () => {\n      hideTooltip();\n      currentCellRef.current = null;\n    };\n\n    const handleMouseClick = (e: MouseEvent) => {\n      const { x, y } = getContainerCoords(e);\n      const cell = getCellAtPoint(graph, x, y);\n      if (cell) {\n        const state = cellStates.get(cell.id);\n        log.info(`Click on cell ${cell.id}: hasLink=${!!state?.link}, link=${state?.link?.url || 'none'}`);\n        handleClick(cell, e);\n      }\n    };\n\n    container.addEventListener('mousemove', handleMouseMove);\n    container.addEventListener('mouseleave', handleMouseLeave);\n    // Use capture phase for click  mxGraph consumes click events in bubble phase\n    container.addEventListener('click', handleMouseClick, true);\n\n    // Also register with mxGraph's event system as fallback\n    const g = graph as any;\n    const mxEvent = (window as any).mxEvent;\n    let mxClickHandler: any = null;\n    if (mxEvent && typeof g.addListener === 'function') {\n      mxClickHandler = (sender: any, evt: any) => {\n        const cell = evt.getProperty('cell');\n        const mouseEvt = evt.getProperty('event');\n        if (cell && mouseEvt) {\n          const state = cellStates.get(cell.id);\n          if (state?.link) {\n            log.info(`mxGraph click on cell ${cell.id}: link=${state.link.url}`);\n            handleClick(cell, mouseEvt);\n          }\n        }\n      };\n      g.addListener(mxEvent.CLICK, mxClickHandler);\n    }\n\n    return () => {\n      container.removeEventListener('mousemove', handleMouseMove);\n      container.removeEventListener('mouseleave', handleMouseLeave);\n      container.removeEventListener('click', handleMouseClick, true);\n      if (mxEvent && mxClickHandler && typeof g.removeListener === 'function') {\n        g.removeListener(mxClickHandler);\n      }\n    };\n  }, [graph, cellStates, tooltipOptions.enabled, zoomOptions.enablePan, showTooltip, hideTooltip, handleClick, containerRef]);\n\n  const styles = getStyles(theme, backgroundOptions);\n\n  return (\n    <div className={styles.wrapper} style={{ width, height }}>\n      <div\n        ref={containerRef}\n        className={styles.graphContainer}\n        style={{ width, height }}\n      />\n      {tooltip && (\n        <FlowchartTooltip\n          tooltip={tooltip}\n          options={tooltipOptions}\n          data={data}\n        />\n      )}\n    </div>\n  );\n};\n\n/**\n * Get the mxGraph cell at a point using mxGraph's getCellAt if available\n */\nfunction getCellAtPoint(\n  graph: MxGraph,\n  x: number,\n  y: number\n): MxGraphCell | null {\n  try {\n    const g = graph as any;\n    if (typeof g.getCellAt === 'function') {\n      const cell = g.getCellAt(x, y);\n      if (cell && (cell.vertex || cell.edge)) {\n        return cell;\n      }\n    }\n  } catch {\n    // Fallback: no cell\n  }\n  return null;\n}\n\nconst getStyles = (theme: GrafanaTheme2, bg: BackgroundOptions) => ({\n  wrapper: css`\n    position: relative;\n    overflow: hidden;\n  `,\n  graphContainer: css`\n    overflow: hidden;\n    background: ${bg.transparent ? 'transparent' : bg.color || theme.colors.background.primary};\n    cursor: grab;\n    &:active {\n      cursor: grabbing;\n    }\n    & svg {\n      display: block;\n      overflow: hidden;\n      max-width: 100%;\n      max-height: 100%;\n    }\n    & > div {\n      overflow: hidden !important;\n    }\n  `,\n});\n","/**\n * FlowchartTabs  multi-flowchart tab navigation bar\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2 } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { FlowchartSourceOptions } from '../types/options';\n\ninterface FlowchartTabsProps {\n  flowcharts: FlowchartSourceOptions[];\n  activeIndex: number;\n  onSelect: (index: number) => void;\n}\n\nexport const FlowchartTabs: React.FC<FlowchartTabsProps> = ({\n  flowcharts,\n  activeIndex,\n  onSelect,\n}) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  if (flowcharts.length <= 1) {\n    return null;\n  }\n\n  return (\n    <div className={styles.tabBar}>\n      {flowcharts.map((fc, idx) => (\n        <button\n          key={idx}\n          className={idx === activeIndex ? styles.activeTab : styles.tab}\n          onClick={() => onSelect(idx)}\n          disabled={!fc.enabled}\n        >\n          {fc.name || `Flowchart ${idx + 1}`}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tabBar: css`\n    display: flex;\n    border-bottom: 1px solid ${theme.colors.border.weak};\n    padding: 0 4px;\n    gap: 2px;\n    background: ${theme.colors.background.secondary};\n    flex-shrink: 0;\n  `,\n  tab: css`\n    padding: 6px 12px;\n    border: none;\n    background: transparent;\n    color: ${theme.colors.text.secondary};\n    font-size: 12px;\n    cursor: pointer;\n    border-bottom: 2px solid transparent;\n    &:hover {\n      color: ${theme.colors.text.primary};\n      background: ${theme.colors.background.primary};\n    }\n    &:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n  `,\n  activeTab: css`\n    padding: 6px 12px;\n    border: none;\n    background: ${theme.colors.background.primary};\n    color: ${theme.colors.text.primary};\n    font-size: 12px;\n    cursor: pointer;\n    font-weight: 500;\n    border-bottom: 2px solid ${theme.colors.primary.main};\n  `,\n});\n","/**\n * FlowchartTooltip  tooltip overlay showing metric values and sparklines\n *\n * Uses ReactDOM.createPortal to render at document.body, escaping any ancestor\n * CSS transforms that would break position:fixed (Grafana's react-grid-item\n * uses transform: matrix(...) which creates a new containing block).\n */\n\nimport React, { useRef, useEffect, useLayoutEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { css } from '@emotion/css';\nimport { GrafanaTheme2, DataFrame } from '@grafana/data';\nimport { useTheme2 } from '@grafana/ui';\nimport { CellState } from '../types/state';\nimport { TooltipOptions } from '../types/options';\nimport { getLevelName } from '../core/ThresholdEvaluator';\nimport { TooltipData } from '../hooks/useTooltip';\n\ninterface FlowchartTooltipProps {\n  tooltip: TooltipData;\n  options: TooltipOptions;\n  data?: DataFrame[];\n}\n\nexport const FlowchartTooltip: React.FC<FlowchartTooltipProps> = ({\n  tooltip,\n  options,\n  data,\n}) => {\n  const theme = useTheme2();\n  const tooltipRef = useRef<HTMLDivElement>(null);\n  const { state, position } = tooltip;\n  const [adjustedPos, setAdjustedPos] = useState(position);\n\n  // Reposition after mount/update to prevent overflow\n  useLayoutEffect(() => {\n    const el = tooltipRef.current;\n    if (!el) {\n      setAdjustedPos(position);\n      return;\n    }\n    const rect = el.getBoundingClientRect();\n    let x = position.x;\n    let y = position.y;\n    if (x + rect.width > window.innerWidth) {\n      x = window.innerWidth - rect.width - 10;\n    }\n    if (x < 0) {\n      x = 10;\n    }\n    if (y + rect.height > window.innerHeight) {\n      y = position.y - rect.height - 10;\n    }\n    if (y < 0) {\n      y = 10;\n    }\n    setAdjustedPos({ x, y });\n  }, [position]);\n\n  if (!options.enabled || !state) {\n    return null;\n  }\n\n  const styles = getStyles(theme);\n\n  const content = (\n    <div\n      ref={tooltipRef}\n      className={styles.tooltip}\n      style={{ left: adjustedPos.x, top: adjustedPos.y }}\n    >\n      {options.showMetric && (\n        <div className={styles.metric}>\n          <strong>{state.ruleName}</strong>\n        </div>\n      )}\n      {options.showValue && (\n        <div className={styles.value}>\n          <span className={styles.valueLabel}>Value:</span>\n          <span className={styles.valueNumber} style={{ color: state.color }}>\n            {state.formattedValue || state.value}\n          </span>\n        </div>\n      )}\n      <div className={styles.level}>\n        <span className={styles.levelDot} style={{ background: state.color }} />\n        <span className={styles.levelText}>{getLevelName(state.level)}</span>\n      </div>\n      {options.showTimestamp && state.timestamp && (\n        <div className={styles.timestamp}>\n          {new Date(state.timestamp).toLocaleString()}\n        </div>\n      )}\n      {options.showGraph && data && data.length > 0 && (\n        <div className={styles.graph}>\n          <MiniGraph data={data} color={state.color} theme={theme} />\n        </div>\n      )}\n    </div>\n  );\n\n  // Portal to document.body so position:fixed works correctly\n  return ReactDOM.createPortal(content, document.body);\n};\n\nconst MiniGraph: React.FC<{\n  data: DataFrame[];\n  color: string;\n  theme: GrafanaTheme2;\n}> = ({ data, color, theme }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (!canvasRef.current || !data || data.length === 0) {\n      return;\n    }\n    const ctx = canvasRef.current.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    // Find the first field with parseable numeric values (skip time/date fields)\n    const values: number[] = [];\n    outer:\n    for (const frame of data) {\n      for (const field of frame.fields) {\n        if (field.type === 'time') {\n          continue;\n        }\n        const raw = field.values as unknown as (number | string)[];\n        if (!raw || raw.length === 0) {\n          continue;\n        }\n        // Check if first value is parseable as number\n        const first = typeof raw[0] === 'string' ? parseFloat(raw[0] as string) : raw[0] as number;\n        if (typeof first !== 'number' || isNaN(first)) {\n          continue;\n        }\n        // Use this field\n        for (let i = 0; i < raw.length; i++) {\n          const v = typeof raw[i] === 'string' ? parseFloat(raw[i] as string) : raw[i] as number;\n          if (typeof v === 'number' && !isNaN(v)) {\n            values.push(v);\n          }\n        }\n        break outer;\n      }\n    }\n    if (values.length === 0) {\n      return;\n    }\n\n    drawSparkline(ctx, values, color, theme);\n  }, [data, color, theme]);\n\n  return <canvas ref={canvasRef} width={200} height={60} style={{ display: 'block' }} />;\n};\n\nfunction drawSparkline(\n  ctx: CanvasRenderingContext2D,\n  values: number[],\n  color: string,\n  theme: GrafanaTheme2\n): void {\n  const w = ctx.canvas.width;\n  const h = ctx.canvas.height;\n  const pad = 4;\n  const gw = w - pad * 2;\n  const gh = h - pad * 2;\n\n  ctx.clearRect(0, 0, w, h);\n  ctx.fillStyle = theme.colors.background.secondary;\n  ctx.fillRect(0, 0, w, h);\n\n  const min = Math.min(...values);\n  const max = Math.max(...values);\n  const range = max - min || 1;\n\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 2;\n  ctx.beginPath();\n\n  values.forEach((v, i) => {\n    const x = pad + (gw / (values.length - 1)) * i;\n    const y = pad + gh - ((v - min) / range) * gh;\n    if (i === 0) {\n      ctx.moveTo(x, y);\n    } else {\n      ctx.lineTo(x, y);\n    }\n  });\n  ctx.stroke();\n\n  // Area under line\n  ctx.lineTo(w - pad, h - pad);\n  ctx.lineTo(pad, h - pad);\n  ctx.closePath();\n  ctx.fillStyle = color + '20';\n  ctx.fill();\n\n  // Last value dot\n  const lastY = pad + gh - ((values[values.length - 1] - min) / range) * gh;\n  ctx.fillStyle = color;\n  ctx.beginPath();\n  ctx.arc(w - pad, lastY, 3, 0, Math.PI * 2);\n  ctx.fill();\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tooltip: css`\n    position: fixed;\n    z-index: 10000;\n    background: ${theme.colors.background.primary};\n    border: 1px solid ${theme.colors.border.medium};\n    border-radius: 4px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    padding: 12px;\n    min-width: 180px;\n    max-width: 350px;\n    pointer-events: none;\n  `,\n  metric: css`\n    font-size: 14px;\n    color: ${theme.colors.text.primary};\n    margin-bottom: 6px;\n  `,\n  value: css`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 13px;\n    margin-bottom: 6px;\n  `,\n  valueLabel: css`\n    color: ${theme.colors.text.secondary};\n  `,\n  valueNumber: css`\n    font-size: 18px;\n    font-weight: 600;\n  `,\n  level: css`\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 12px;\n  `,\n  levelDot: css`\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n  `,\n  levelText: css`\n    color: ${theme.colors.text.secondary};\n    text-transform: uppercase;\n    font-weight: 500;\n  `,\n  timestamp: css`\n    font-size: 11px;\n    color: ${theme.colors.text.secondary};\n    margin-top: 6px;\n    padding-top: 6px;\n    border-top: 1px solid ${theme.colors.border.weak};\n  `,\n  graph: css`\n    margin-top: 8px;\n    padding-top: 8px;\n    border-top: 1px solid ${theme.colors.border.weak};\n  `,\n});\n","/**\n * InspectorOverlay  displays cell ID/label/state info on hover in inspect mode\n */\n\nimport React, { useState } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2 } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { CellState } from '../types/state';\nimport { getLevelName } from '../core/ThresholdEvaluator';\n\ninterface InspectorOverlayProps {\n  cellStates: Map<string, CellState>;\n  cellLabels: Map<string, string>;\n  cellIds: string[];\n}\n\nexport const InspectorOverlay: React.FC<InspectorOverlayProps> = ({\n  cellStates,\n  cellLabels,\n  cellIds,\n}) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const [filter, setFilter] = useState('');\n\n  const filteredIds = filter\n    ? cellIds.filter((id) => {\n        const label = cellLabels.get(id) || '';\n        return (\n          id.toLowerCase().includes(filter.toLowerCase()) ||\n          label.toLowerCase().includes(filter.toLowerCase())\n        );\n      })\n    : cellIds;\n\n  return (\n    <div className={styles.overlay}>\n      <div className={styles.header}>Inspector Mode</div>\n      <input\n        className={styles.filter}\n        placeholder=\"Filter cells...\"\n        value={filter}\n        onChange={(e) => setFilter(e.target.value)}\n      />\n      <div className={styles.list}>\n        {filteredIds.slice(0, 50).map((id) => {\n          const state = cellStates.get(id);\n          const label = cellLabels.get(id) || '';\n          return (\n            <div key={id} className={styles.item}>\n              <div className={styles.cellId}>{id}</div>\n              {label && <div className={styles.cellLabel}>{label}</div>}\n              {state && (\n                <div className={styles.stateInfo}>\n                  <span\n                    className={styles.dot}\n                    style={{ background: state.color }}\n                  />\n                  <span>{getLevelName(state.level)}</span>\n                  <span className={styles.stateValue}>\n                    {state.formattedValue}\n                  </span>\n                </div>\n              )}\n            </div>\n          );\n        })}\n        {filteredIds.length > 50 && (\n          <div className={styles.more}>\n            ...and {filteredIds.length - 50} more\n          </div>\n        )}\n      </div>\n      <div className={styles.footer}>\n        Total: {cellIds.length} cells, {cellStates.size} with state\n      </div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  overlay: css`\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    width: 260px;\n    max-height: 400px;\n    background: ${theme.colors.background.secondary};\n    border: 1px solid ${theme.colors.border.weak};\n    border-radius: 4px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    z-index: 100;\n  `,\n  header: css`\n    font-weight: 600;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    padding: 8px 10px;\n    border-bottom: 1px solid ${theme.colors.border.weak};\n  `,\n  filter: css`\n    margin: 6px 8px;\n    padding: 4px 8px;\n    font-size: 12px;\n    border: 1px solid ${theme.colors.border.weak};\n    border-radius: 3px;\n    background: ${theme.colors.background.primary};\n    color: ${theme.colors.text.primary};\n    outline: none;\n    &:focus {\n      border-color: ${theme.colors.primary.main};\n    }\n  `,\n  list: css`\n    overflow-y: auto;\n    flex: 1;\n    padding: 4px 8px;\n  `,\n  item: css`\n    padding: 4px 0;\n    border-bottom: 1px solid ${theme.colors.border.weak};\n    &:last-child {\n      border-bottom: none;\n    }\n  `,\n  cellId: css`\n    font-size: 11px;\n    font-family: monospace;\n    color: ${theme.colors.text.primary};\n  `,\n  cellLabel: css`\n    font-size: 11px;\n    color: ${theme.colors.text.secondary};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  `,\n  stateInfo: css`\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 11px;\n    color: ${theme.colors.text.secondary};\n    margin-top: 2px;\n  `,\n  dot: css`\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    flex-shrink: 0;\n  `,\n  stateValue: css`\n    margin-left: auto;\n    font-family: monospace;\n  `,\n  more: css`\n    font-size: 11px;\n    color: ${theme.colors.text.secondary};\n    padding: 4px 0;\n    text-align: center;\n  `,\n  footer: css`\n    font-size: 11px;\n    color: ${theme.colors.text.secondary};\n    padding: 6px 10px;\n    border-top: 1px solid ${theme.colors.border.weak};\n  `,\n});\n","/**\n * FlowchartContext  shared context for graph instance, states, and options\n */\n\nimport React, { createContext, useContext } from 'react';\nimport { DataFrame } from '@grafana/data';\nimport { MxGraph } from '../types/graph';\nimport { CellState, ZoomState } from '../types/state';\nimport { FlowchartPanelOptions } from '../types/options';\n\nexport interface FlowchartContextValue {\n  graph: MxGraph | null;\n  cellStates: Map<string, CellState>;\n  zoomState: ZoomState;\n  options: FlowchartPanelOptions;\n  data: DataFrame[];\n  replaceVariables: (str: string) => string;\n}\n\nconst FlowchartContext = createContext<FlowchartContextValue>({\n  graph: null,\n  cellStates: new Map(),\n  zoomState: { scale: 1, x: 0, y: 0 },\n  options: {} as FlowchartPanelOptions,\n  data: [],\n  replaceVariables: (s) => s,\n});\n\nexport const FlowchartProvider = FlowchartContext.Provider;\n\nexport function useFlowchartContext(): FlowchartContextValue {\n  return useContext(FlowchartContext);\n}\n","/**\n * MetricProcessor  converts Grafana DataFrames into ProcessedMetric objects\n */\n\nimport { DataFrame, FieldType } from '@grafana/data';\nimport { ProcessedMetric } from '../types/metric';\nimport { AggregationType } from '../types/constants';\nimport { matchPattern } from '../utils/patterns';\n\n/**\n * Process all DataFrames into ProcessedMetric objects.\n * Handles time_series, table, and wide-format CSV data.\n */\nexport function processDataFrames(\n  frames: DataFrame[],\n  aggregation: AggregationType = 'current'\n): ProcessedMetric[] {\n  const metrics: ProcessedMetric[] = [];\n\n  for (const frame of frames) {\n    const timeField = frame.fields.find((f) => f.type === FieldType.time);\n    const timestamps = timeField\n      ? (timeField.values as unknown as number[])\n      : [];\n\n    // Check if this looks like a table with a \"metric\" column (pivoted time series)\n    const metricField = frame.fields.find(\n      (f) => f.name === 'metric' || f.name === 'Metric'\n    );\n\n    for (const field of frame.fields) {\n      // Skip time fields\n      if (field.type === FieldType.time) {\n        continue;\n      }\n\n      // Skip fields that look like time/date strings\n      const fieldNameClean = field.name.replace(/[\"\\ufeff]/g, '').trim();\n      if (fieldNameClean.toLowerCase() === 'time' || fieldNameClean.toLowerCase() === 'timestamp') {\n        continue;\n      }\n\n      // Handle both number and string fields (CSV datasources return strings)\n      let values: number[] = [];\n      const raw = field.values as unknown as any[];\n\n      if (field.type === FieldType.number) {\n        for (let i = 0; i < raw.length; i++) {\n          const v = raw[i];\n          if (typeof v === 'number' && !isNaN(v)) {\n            values.push(v);\n          }\n        }\n      } else if (field.type === FieldType.string || field.type === FieldType.other) {\n        // Try parsing string values as numbers (common with CSV datasources)\n        for (let i = 0; i < raw.length; i++) {\n          const v = raw[i];\n          if (v === null || v === undefined || v === '') continue;\n          const num = typeof v === 'number' ? v : parseFloat(String(v));\n          if (!isNaN(num)) {\n            values.push(num);\n          }\n        }\n      }\n\n      if (values.length === 0) {\n        continue;\n      }\n\n      // For pivoted time series with \"metric\" column\n      if (metricField) {\n        const metricValues = metricField.values as unknown as string[];\n        const grouped = groupByMetric(metricValues, raw, timestamps as number[]);\n\n        for (const [metricName, data] of grouped) {\n          const validValues = data.values.filter(v => typeof v === 'number' && !isNaN(v));\n          if (validValues.length === 0) continue;\n\n          metrics.push({\n            name: metricName,\n            refId: frame.refId || '',\n            values: validValues,\n            timestamps: data.timestamps,\n            lastValue: validValues[validValues.length - 1],\n            aggregatedValue: aggregateValues(validValues, aggregation),\n            aggregation,\n            fieldName: field.name || '',\n            columnName: metricName,\n          });\n        }\n      } else {\n        // Wide-format: each column is a separate metric (e.g. MAC address columns)\n        // The field name IS the metric/column identifier\n        const name = fieldNameClean || frame.name || frame.refId || '';\n        metrics.push({\n          name,\n          refId: frame.refId || '',\n          values,\n          timestamps: timestamps as number[],\n          lastValue: values[values.length - 1],\n          aggregatedValue: aggregateValues(values, aggregation),\n          aggregation,\n          fieldName: field.name || '',\n          columnName: name,\n        });\n      }\n    }\n  }\n\n  return metrics;\n}\n\n/**\n * Group values by metric column value (for pivoted time series)\n */\nfunction groupByMetric(\n  metricValues: string[],\n  numericValues: any[],\n  timestamps: number[]\n): Map<string, { values: number[]; timestamps: number[] }> {\n  const grouped = new Map<string, { values: number[]; timestamps: number[] }>();\n\n  for (let i = 0; i < metricValues.length; i++) {\n    const key = metricValues[i];\n    if (!key) continue;\n\n    let entry = grouped.get(key);\n    if (!entry) {\n      entry = { values: [], timestamps: [] };\n      grouped.set(key, entry);\n    }\n\n    const num = typeof numericValues[i] === 'number'\n      ? numericValues[i]\n      : parseFloat(String(numericValues[i]));\n    if (!isNaN(num)) {\n      entry.values.push(num);\n    }\n    if (timestamps[i] !== undefined) {\n      entry.timestamps.push(timestamps[i]);\n    }\n  }\n\n  return grouped;\n}\n\n/**\n * Find metrics matching a pattern/alias, optionally filtering by column name\n */\nexport function findMatchingMetrics(\n  metrics: ProcessedMetric[],\n  alias: string,\n  replaceVariables: (str: string) => string,\n  column?: string\n): ProcessedMetric[] {\n  let filtered = metrics;\n\n  // If column is specified, filter by column name first (exact match for MAC addresses etc.)\n  if (column) {\n    const resolvedColumn = replaceVariables(column);\n    filtered = metrics.filter((m) => {\n      if (m.columnName === resolvedColumn) return true;\n      if (m.name === resolvedColumn) return true;\n      return false;\n    });\n\n    // If we found column matches, return those\n    if (filtered.length > 0) {\n      return filtered;\n    }\n  }\n\n  if (!alias) {\n    return filtered;\n  }\n  const resolved = replaceVariables(alias);\n  return filtered.filter((m) => {\n    const { matched } = matchPattern(m.name, resolved);\n    if (matched) {\n      return true;\n    }\n    const { matched: refMatched } = matchPattern(m.refId, resolved);\n    return refMatched;\n  });\n}\n\n/**\n * Aggregate an array of numbers using the specified method\n */\nexport function aggregateValues(\n  values: number[],\n  type: AggregationType\n): number {\n  if (values.length === 0) {\n    return 0;\n  }\n\n  switch (type) {\n    case 'current':\n    case 'last':\n      return values[values.length - 1];\n    case 'first':\n      return values[0];\n    case 'min':\n      return Math.min(...values);\n    case 'max':\n      return Math.max(...values);\n    case 'avg':\n      return values.reduce((s, v) => s + v, 0) / values.length;\n    case 'sum':\n      return values.reduce((s, v) => s + v, 0);\n    case 'count':\n      return values.length;\n    case 'delta':\n    case 'diff':\n      return values[values.length - 1] - values[0];\n    case 'range':\n      return Math.max(...values) - Math.min(...values);\n    default:\n      return values[values.length - 1];\n  }\n}\n","/**\n * RuleEvaluator  evaluates a single rule against metrics, producing a result\n */\n\nimport { ProcessedMetric } from '../types/metric';\nimport { RuleOptions } from '../types/options';\nimport { ThresholdLevel } from '../types/constants';\nimport { findMatchingMetrics, aggregateValues } from './MetricProcessor';\nimport { evaluateThreshold, evaluateGradientThreshold } from './ThresholdEvaluator';\nimport { formatValue } from '../utils/formatting';\nimport { applyValueMaps, applyRangeMaps } from '../utils/formatting';\n\nexport interface RuleResult {\n  ruleId: string;\n  ruleName: string;\n  value: number;\n  level: ThresholdLevel;\n  color: string;\n  formattedValue: string;\n  matched: boolean;\n  metricName: string;\n}\n\n/**\n * Evaluate a single rule against the available metrics\n */\nexport function evaluateRule(\n  rule: RuleOptions,\n  metrics: ProcessedMetric[],\n  replaceVariables: (str: string) => string\n): RuleResult | null {\n  if (!rule.enabled) {\n    return null;\n  }\n\n  // Find metrics matching this rule's alias/pattern, with optional column filtering\n  const matched = findMatchingMetrics(\n    metrics,\n    rule.alias || rule.pattern,\n    replaceVariables,\n    rule.column || undefined\n  );\n\n  if (matched.length === 0) {\n    return null;\n  }\n\n  // Collect all values from matched metrics and aggregate\n  const allValues: number[] = [];\n  for (const m of matched) {\n    allValues.push(...m.values);\n  }\n\n  if (allValues.length === 0) {\n    return null;\n  }\n\n  const value = aggregateValues(allValues, rule.aggregation);\n\n  // Evaluate threshold  use gradient mode if configured\n  let level: ThresholdLevel;\n  let color: string;\n\n  if (rule.gradient && rule.gradientColors.length > 0 && rule.gradientThresholds.length > 0) {\n    const result = evaluateGradientThreshold(\n      value,\n      rule.gradientThresholds,\n      rule.gradientColors,\n      rule.invert\n    );\n    level = result.level;\n    color = result.color;\n  } else {\n    const result = evaluateThreshold(\n      value,\n      rule.thresholds,\n      rule.colors,\n      rule.invert\n    );\n    level = result.level;\n    color = result.color;\n  }\n\n  // Format value: first apply value/range maps, then fall back to unit formatting\n  let formattedValue =\n    applyValueMaps(value, rule.valueMaps) ??\n    applyRangeMaps(value, rule.rangeMaps) ??\n    formatValue(value, rule.unit, rule.decimals);\n\n  return {\n    ruleId: rule.id,\n    ruleName: rule.name,\n    value,\n    level,\n    color,\n    formattedValue,\n    matched: true,\n    metricName: matched[0]?.name || '',\n  };\n}\n\n/**\n * Evaluate all rules against all metrics\n */\nexport function evaluateAllRules(\n  rules: RuleOptions[],\n  metrics: ProcessedMetric[],\n  replaceVariables: (str: string) => string\n): RuleResult[] {\n  const results: RuleResult[] = [];\n  for (const rule of rules) {\n    const result = evaluateRule(rule, metrics, replaceVariables);\n    if (result) {\n      results.push(result);\n    }\n  }\n  return results;\n}\n","/**\n * StateComputer  computes per-cell states from rule results and cell patterns\n */\n\nimport { CellState, ShapeState, TextState, LinkState, EventCellState } from '../types/state';\nimport { RuleOptions, ShapeMapOptions, TextMapOptions, LinkMapOptions, EventMapOptions } from '../types/options';\nimport { MappingCondition, ThresholdLevel } from '../types/constants';\nimport { RuleResult } from './RuleEvaluator';\nimport { matchPattern } from '../utils/patterns';\nimport { replaceCustomVariables, createVariableContext } from '../utils/variables';\nimport { log } from '../utils/logging';\n\n/**\n * Given evaluated rule results and the list of cell IDs in the graph,\n * compute a Map<cellId, CellState> for all affected cells.\n */\nexport function computeCellStates(\n  rules: RuleOptions[],\n  ruleResults: RuleResult[],\n  cellIds: string[],\n  cellLabels: Map<string, string>\n): Map<string, CellState> {\n  const stateMap = new Map<string, CellState>();\n\n  // Build a lookup from rule ID to result\n  const resultByRuleId = new Map<string, RuleResult>();\n  for (const r of ruleResults) {\n    resultByRuleId.set(r.ruleId, r);\n  }\n\n  log.info(`StateComputer: ${rules.length} rules, ${ruleResults.length} results, ${cellIds.length} cells`);\n\n  // Process rules in order; later rules override earlier ones\n  for (const rule of rules) {\n    if (!rule.enabled) {\n      continue;\n    }\n    const lookupResult = resultByRuleId.get(rule.id);\n    let result: RuleResult;\n    if (lookupResult) {\n      result = lookupResult;\n    } else {\n      // No metric data matched this rule. Still process mappings with when:\"always\"\n      // (e.g., link buttons that should always be clickable regardless of data).\n      const hasAlwaysMaps = rule.linkMaps.some(m => m.enabled && m.when === 'always') ||\n        rule.shapeMaps.some(m => m.enabled && m.when === 'always') ||\n        rule.textMaps.some(m => m.enabled && m.when === 'always') ||\n        rule.eventMaps.some(m => m.enabled && m.when === 'always');\n      if (!hasAlwaysMaps) {\n        log.info(`StateComputer: rule \"${rule.name}\" (${rule.id})  no result found`);\n        continue;\n      }\n      // Create a default result so \"always\" mappings can be processed\n      result = {\n        ruleId: rule.id,\n        ruleName: rule.name,\n        metricName: '',\n        value: 0,\n        formattedValue: '',\n        level: 0,\n        color: rule.colors.ok || '#73BF69',\n        matched: false,\n      };\n      log.info(`StateComputer: rule \"${rule.name}\"  no metric data, processing \"always\" mappings`);\n    }\n\n    // For each mapping type, find matching cells\n    const prevSize = stateMap.size;\n    processShapeMaps(rule, result, cellIds, cellLabels, stateMap);\n    processTextMaps(rule, result, cellIds, cellLabels, stateMap);\n    processLinkMaps(rule, result, cellIds, cellLabels, stateMap);\n    processEventMaps(rule, result, cellIds, cellLabels, stateMap);\n    const newStates = stateMap.size - prevSize;\n    if (newStates > 0 || rule.shapeMaps.length > 0) {\n      log.info(`StateComputer: rule \"${rule.name}\" color=${result.color}  ${newStates} new cell states (total ${stateMap.size}), shapeMaps=${rule.shapeMaps.length}`);\n    }\n  }\n\n  log.info(`StateComputer: final state map has ${stateMap.size} entries`);\n  return stateMap;\n}\n\nfunction shouldApply(when: MappingCondition, level: ThresholdLevel): boolean {\n  switch (when) {\n    case 'always':\n      return true;\n    case 'ok':\n      return level === 0;\n    case 'warning':\n      return level === 1;\n    case 'critical':\n      return level === 2;\n    case 'never':\n      return false;\n    default:\n      return true;\n  }\n}\n\nfunction getOrCreateState(\n  cellId: string,\n  result: RuleResult,\n  stateMap: Map<string, CellState>\n): CellState {\n  const existing = stateMap.get(cellId);\n  if (existing) {\n    // Update with latest rule result\n    existing.ruleId = result.ruleId;\n    existing.ruleName = result.ruleName;\n    existing.level = result.level;\n    existing.value = result.value;\n    existing.formattedValue = result.formattedValue;\n    existing.color = result.color;\n    existing.matched = true;\n    existing.timestamp = Date.now();\n    return existing;\n  }\n\n  const state: CellState = {\n    cellId,\n    ruleId: result.ruleId,\n    ruleName: result.ruleName,\n    level: result.level,\n    value: result.value,\n    formattedValue: result.formattedValue,\n    color: result.color,\n    matched: true,\n    timestamp: Date.now(),\n    shape: null,\n    text: null,\n    link: null,\n    tooltip: {\n      content: '',\n      metricName: result.metricName,\n      value: result.formattedValue,\n    },\n    event: null,\n  };\n  stateMap.set(cellId, state);\n  return state;\n}\n\nfunction matchCells(\n  pattern: string,\n  cellIds: string[],\n  cellLabels: Map<string, string>\n): string[] {\n  const matched: string[] = [];\n  for (const id of cellIds) {\n    const label = cellLabels.get(id) || '';\n    const identifiers = [id, label].filter(Boolean);\n    for (const ident of identifiers) {\n      const { matched: m } = matchPattern(ident, pattern);\n      if (m) {\n        matched.push(id);\n        break;\n      }\n    }\n  }\n  if (matched.length === 0 && pattern !== '.*') {\n    log.info(`matchCells: pattern \"${pattern}\" matched 0 cells (first 5 IDs: ${cellIds.slice(0, 5).join(', ')})`);\n  }\n  return matched;\n}\n\nfunction processShapeMaps(\n  rule: RuleOptions,\n  result: RuleResult,\n  cellIds: string[],\n  cellLabels: Map<string, string>,\n  stateMap: Map<string, CellState>\n): void {\n  for (const sm of rule.shapeMaps) {\n    if (!sm.enabled || !shouldApply(sm.when, result.level)) {\n      continue;\n    }\n    const ids = matchCells(sm.pattern, cellIds, cellLabels);\n    for (const cellId of ids) {\n      const state = getOrCreateState(cellId, result, stateMap);\n      if (!state.shape) {\n        state.shape = {\n          fillColor: null,\n          strokeColor: null,\n          fontColor: null,\n          bgColor: null,\n          opacity: null,\n          visible: !sm.hidden,\n        };\n      }\n      // Apply color to the appropriate target\n      switch (sm.target) {\n        case 'fillColor':\n          state.shape.fillColor = result.color;\n          break;\n        case 'strokeColor':\n          state.shape.strokeColor = result.color;\n          break;\n        case 'fontColor':\n          state.shape.fontColor = result.color;\n          break;\n        case 'bgColor':\n          state.shape.bgColor = result.color;\n          break;\n        case 'gradientColor':\n          // Gradient uses the color for fill\n          state.shape.fillColor = result.color;\n          break;\n      }\n      state.shape.visible = !sm.hidden;\n    }\n  }\n}\n\nfunction processTextMaps(\n  rule: RuleOptions,\n  result: RuleResult,\n  cellIds: string[],\n  cellLabels: Map<string, string>,\n  stateMap: Map<string, CellState>\n): void {\n  for (const tm of rule.textMaps) {\n    if (!tm.enabled || !shouldApply(tm.when, result.level)) {\n      continue;\n    }\n    const ids = matchCells(tm.pattern, cellIds, cellLabels);\n    for (const cellId of ids) {\n      const state = getOrCreateState(cellId, result, stateMap);\n      const template = tm.template || '${_formattedValue}';\n      const originalText = cellLabels.get(cellId) || '';\n\n      let resolved: string;\n      // If template starts with a regex like /.*/ or /.*/suffix, do regex replacement\n      // on the original cell text with the formatted value\n      // Supports: /.*/  /pattern/flags  /.*/EB032 (regex + trailing text)\n      const regexMatch = template.match(/^\\/(.+?)\\/([gimsuy]*)(.*)?$/);\n      if (regexMatch) {\n        try {\n          const re = new RegExp(regexMatch[1], regexMatch[2]);\n          const suffix = regexMatch[3] || '';\n          resolved = originalText.replace(re, result.formattedValue + suffix);\n        } catch {\n          resolved = result.formattedValue;\n        }\n      } else {\n        // Template with variables like ${_formattedValue}\n        const ctx = createVariableContext(state);\n        resolved = replaceCustomVariables(template, ctx);\n      }\n\n      state.text = {\n        value: resolved,\n        originalValue: originalText || null,\n      };\n    }\n  }\n}\n\nfunction processLinkMaps(\n  rule: RuleOptions,\n  result: RuleResult,\n  cellIds: string[],\n  cellLabels: Map<string, string>,\n  stateMap: Map<string, CellState>\n): void {\n  for (const lm of rule.linkMaps) {\n    if (!lm.enabled || !shouldApply(lm.when, result.level)) {\n      continue;\n    }\n    const ids = matchCells(lm.pattern, cellIds, cellLabels);\n    for (const cellId of ids) {\n      const state = getOrCreateState(cellId, result, stateMap);\n      state.link = {\n        url: lm.url,\n        target: lm.linkTarget,\n        params: lm.params,\n      };\n    }\n  }\n}\n\nfunction processEventMaps(\n  rule: RuleOptions,\n  result: RuleResult,\n  cellIds: string[],\n  cellLabels: Map<string, string>,\n  stateMap: Map<string, CellState>\n): void {\n  for (const em of rule.eventMaps) {\n    if (!em.enabled || !shouldApply(em.when, result.level)) {\n      continue;\n    }\n    const ids = matchCells(em.pattern, cellIds, cellLabels);\n    for (const cellId of ids) {\n      const state = getOrCreateState(cellId, result, stateMap);\n      state.event = {\n        animation: em.animation,\n        duration: em.duration,\n        active: true,\n      };\n    }\n  }\n}\n","/**\n * StateCycleApplier  imperatively applies CellState map to mxGraph cells\n */\n\nimport { MxGraph, MxGraphCell } from '../types/graph';\nimport { CellState } from '../types/state';\nimport { log } from '../utils/logging';\n\n/**\n * Apply all computed cell states to the mxGraph model.\n * Must be called inside or wrapping a beginUpdate/endUpdate block.\n */\nexport function applyCellStates(\n  graph: MxGraph,\n  states: Map<string, CellState>\n): void {\n  if (states.size === 0) {\n    return;\n  }\n\n  const model = graph.getModel();\n  let applied = 0;\n  model.beginUpdate();\n  try {\n    states.forEach((state, cellId) => {\n      const cell = findCell(model, cellId);\n      if (!cell) {\n        return;\n      }\n\n      // Apply shape state (colors, visibility)\n      if (state.shape) {\n        applyShapeState(graph, cell, state);\n        applied++;\n      }\n\n      // Apply text state\n      if (state.text && state.text.value !== null) {\n        model.setValue(cell, state.text.value);\n      }\n\n      // Apply visibility\n      if (state.shape && !state.shape.visible) {\n        model.setVisible(cell, false);\n      }\n    });\n  } catch (err) {\n    log.error('Error applying cell states:', err);\n  } finally {\n    model.endUpdate();\n  }\n\n  // Refresh after endUpdate so the model is in a consistent state\n  graph.refresh();\n  log.info(`Applied states to ${applied}/${states.size} cells`);\n}\n\n/**\n * Reset all cells to their original state\n */\nexport function resetCellStates(\n  graph: MxGraph,\n  originalValues: Map<string, string>\n): void {\n  const model = graph.getModel();\n  model.beginUpdate();\n  try {\n    originalValues.forEach((value, cellId) => {\n      const cell = findCell(model, cellId);\n      if (cell) {\n        model.setValue(cell, value);\n        model.setVisible(cell, true);\n      }\n    });\n    graph.refresh();\n  } finally {\n    model.endUpdate();\n  }\n}\n\nfunction findCell(model: any, cellId: string): MxGraphCell | null {\n  const cells = model.cells;\n  if (cells[cellId]) {\n    return cells[cellId];\n  }\n  // Fallback: search by value\n  for (const id in cells) {\n    const cell = cells[id];\n    if (cell.value === cellId) {\n      return cell;\n    }\n  }\n  return null;\n}\n\nfunction applyShapeState(graph: MxGraph, cell: MxGraphCell, state: CellState): void {\n  const shape = state.shape!;\n  if (shape.fillColor) {\n    graph.setCellStyles('fillColor', shape.fillColor, [cell]);\n  }\n  if (shape.strokeColor) {\n    graph.setCellStyles('strokeColor', shape.strokeColor, [cell]);\n  }\n  if (shape.fontColor) {\n    graph.setCellStyles('fontColor', shape.fontColor, [cell]);\n  }\n  if (shape.opacity !== null) {\n    graph.setCellStyles('opacity', String(Math.round(shape.opacity * 100)), [cell]);\n  }\n}\n","/**\n * ThresholdEvaluator  evaluates a value against threshold definitions\n */\n\nimport { ThresholdLevel, ComparatorType, DEFAULT_COLORS } from '../types/constants';\nimport { ThresholdOptions, ThresholdColors } from '../types/options';\n\nexport interface ThresholdResult {\n  level: ThresholdLevel;\n  color: string;\n}\n\n/**\n * Evaluate a value against an array of thresholds.\n * Thresholds are checked from highest level (critical) to lowest (ok).\n * If `invert` is true, the level logic is reversed.\n */\nexport function evaluateThreshold(\n  value: number | string,\n  thresholds: ThresholdOptions[],\n  colors: ThresholdColors,\n  invert = false\n): ThresholdResult {\n  if (!thresholds || thresholds.length === 0) {\n    return { level: 0, color: colors.ok };\n  }\n\n  // Sort by level descending (check critical first, then warning)\n  const sorted = [...thresholds].sort((a, b) => b.level - a.level);\n\n  for (const threshold of sorted) {\n    if (compareValues(value, threshold.value, threshold.comparator)) {\n      const level = invert ? invertLevel(threshold.level) : threshold.level;\n      return { level, color: getColorForLevel(level, colors) };\n    }\n  }\n\n  const defaultLevel: ThresholdLevel = invert ? 2 : 0;\n  return { level: defaultLevel, color: getColorForLevel(defaultLevel, colors) };\n}\n\n/**\n * Evaluate a value against gradient thresholds with multiple colors.\n * Returns an interpolated color based on where the value falls between thresholds.\n *\n * thresholds: sorted ascending array of threshold values [24, 25, 26, ...]\n * colors: array of colors, one more than thresholds (colors.length = thresholds.length + 1)\n *         or same length (colors.length = thresholds.length)\n *\n * Segments:\n *   value <= thresholds[0]   colors[0]\n *   thresholds[i] < value <= thresholds[i+1]  interpolate(colors[i], colors[i+1], progress)\n *   value > thresholds[last]  colors[last] (or last color)\n */\nexport function evaluateGradientThreshold(\n  value: number,\n  thresholds: number[],\n  colors: string[],\n  invert = false\n): ThresholdResult {\n  if (!thresholds || thresholds.length === 0 || !colors || colors.length === 0) {\n    return { level: 0, color: colors?.[0] || DEFAULT_COLORS.ok };\n  }\n\n  // Sort thresholds ascending\n  const sorted = [...thresholds].sort((a, b) => a - b);\n  // Ensure we have the right number of colors\n  const colorList = colors.length > 0 ? colors : [DEFAULT_COLORS.ok];\n\n  // If value is at or below the first threshold\n  if (value <= sorted[0]) {\n    const color = invert ? colorList[colorList.length - 1] : colorList[0];\n    return { level: 0, color };\n  }\n\n  // If value is above the last threshold\n  if (value >= sorted[sorted.length - 1]) {\n    const color = invert ? colorList[0] : colorList[colorList.length - 1];\n    return { level: 2, color };\n  }\n\n  // Find the segment the value falls into\n  for (let i = 0; i < sorted.length - 1; i++) {\n    if (value >= sorted[i] && value <= sorted[i + 1]) {\n      const range = sorted[i + 1] - sorted[i];\n      const progress = range > 0 ? (value - sorted[i]) / range : 0;\n\n      // Map segment index to color indices\n      const colorIdx = invert ? colorList.length - 1 - i : i;\n      const nextColorIdx = invert ? colorList.length - 2 - i : i + 1;\n\n      const c1 = colorList[Math.max(0, Math.min(colorIdx, colorList.length - 1))];\n      const c2 = colorList[Math.max(0, Math.min(nextColorIdx, colorList.length - 1))];\n\n      const interpolated = interpolateColor(c1, c2, invert ? 1 - progress : progress);\n\n      // Determine threshold level based on position in range\n      const position = (value - sorted[0]) / (sorted[sorted.length - 1] - sorted[0]);\n      const level: ThresholdLevel = position < 0.33 ? 0 : position < 0.66 ? 1 : 2;\n\n      return { level, color: interpolated };\n    }\n  }\n\n  return { level: 0, color: colorList[0] };\n}\n\n/**\n * Interpolate between two hex colors\n */\nfunction interpolateColor(color1: string, color2: string, t: number): string {\n  const rgb1 = hexToRgb(color1);\n  const rgb2 = hexToRgb(color2);\n\n  if (!rgb1 || !rgb2) {\n    return t < 0.5 ? color1 : color2;\n  }\n\n  const r = Math.round(rgb1.r + (rgb2.r - rgb1.r) * t);\n  const g = Math.round(rgb1.g + (rgb2.g - rgb1.g) * t);\n  const b = Math.round(rgb1.b + (rgb2.b - rgb1.b) * t);\n\n  return rgbToHex(r, g, b);\n}\n\nfunction hexToRgb(hex: string): { r: number; g: number; b: number } | null {\n  const clean = hex.replace('#', '');\n  if (clean.length === 3) {\n    return {\n      r: parseInt(clean[0] + clean[0], 16),\n      g: parseInt(clean[1] + clean[1], 16),\n      b: parseInt(clean[2] + clean[2], 16),\n    };\n  }\n  if (clean.length === 6) {\n    return {\n      r: parseInt(clean.substring(0, 2), 16),\n      g: parseInt(clean.substring(2, 4), 16),\n      b: parseInt(clean.substring(4, 6), 16),\n    };\n  }\n  return null;\n}\n\nfunction rgbToHex(r: number, g: number, b: number): string {\n  const toHex = (n: number) => Math.max(0, Math.min(255, n)).toString(16).padStart(2, '0');\n  return `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n}\n\n/**\n * Compare two values using a comparator\n */\nfunction compareValues(\n  a: number | string,\n  b: number | string,\n  operator: ComparatorType\n): boolean {\n  const numA = typeof a === 'number' ? a : parseFloat(String(a));\n  const numB = typeof b === 'number' ? b : parseFloat(String(b));\n\n  if (!isNaN(numA) && !isNaN(numB)) {\n    switch (operator) {\n      case '>':\n        return numA > numB;\n      case '<':\n        return numA < numB;\n      case '>=':\n        return numA >= numB;\n      case '<=':\n        return numA <= numB;\n      case '==':\n        return numA === numB;\n      case '!=':\n        return numA !== numB;\n      default:\n        return false;\n    }\n  }\n\n  // String comparison\n  const strA = String(a);\n  const strB = String(b);\n  switch (operator) {\n    case '==':\n      return strA === strB;\n    case '!=':\n      return strA !== strB;\n    default:\n      return false;\n  }\n}\n\n/**\n * Get the color for a threshold level\n */\nexport function getColorForLevel(\n  level: ThresholdLevel,\n  colors: ThresholdColors = DEFAULT_COLORS\n): string {\n  switch (level) {\n    case 0:\n      return colors.ok;\n    case 1:\n      return colors.warning;\n    case 2:\n      return colors.critical;\n    default:\n      return colors.ok;\n  }\n}\n\n/**\n * Invert threshold level: 0 <-> 2, 1 stays\n */\nfunction invertLevel(level: ThresholdLevel): ThresholdLevel {\n  switch (level) {\n    case 0:\n      return 2;\n    case 2:\n      return 0;\n    default:\n      return level;\n  }\n}\n\n/**\n * Get the level name string\n */\nexport function getLevelName(level: ThresholdLevel): string {\n  switch (level) {\n    case 0:\n      return 'OK';\n    case 1:\n      return 'Warning';\n    case 2:\n      return 'Critical';\n    default:\n      return 'Unknown';\n  }\n}\n","/**\n * EventMapEditor  pattern  animation type\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button, Select, Input, InlineSwitch } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { EventMapOptions } from '../types/options';\nimport { ANIMATION_TYPES, MAPPING_CONDITIONS, AnimationType, MappingCondition } from '../types/constants';\n\ninterface EventMapEditorProps {\n  maps: EventMapOptions[];\n  onChange: (maps: EventMapOptions[]) => void;\n}\n\nconst animOptions = ANIMATION_TYPES.map((a) => ({ label: a, value: a }));\nconst conditionOptions = MAPPING_CONDITIONS.map((c) => ({ label: c, value: c }));\n\nexport const EventMapEditor: React.FC<EventMapEditorProps> = ({ maps, onChange }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const update = (idx: number, field: keyof EventMapOptions, value: any) => {\n    const updated = maps.map((m, i) => (i === idx ? { ...m, [field]: value } : m));\n    onChange(updated);\n  };\n\n  const add = () => {\n    onChange([\n      ...maps,\n      { pattern: '.*', hidden: false, animation: 'blink', duration: 1000, when: 'critical', enabled: true },\n    ]);\n  };\n\n  const remove = (idx: number) => {\n    onChange(maps.filter((_, i) => i !== idx));\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>Event / Animation Mappings</div>\n      {maps.map((m, idx) => (\n        <div key={idx} className={styles.row}>\n          <InlineSwitch\n            value={m.enabled}\n            onChange={(e) => update(idx, 'enabled', e.currentTarget.checked)}\n            transparent\n          />\n          <Input\n            value={m.pattern}\n            onChange={(e) => update(idx, 'pattern', e.currentTarget.value)}\n            placeholder=\"Cell pattern\"\n            width={14}\n          />\n          <Select\n            options={animOptions}\n            value={animOptions.find((o) => o.value === m.animation)}\n            onChange={(v) => update(idx, 'animation', v.value as AnimationType)}\n            width={12}\n          />\n          <Input\n            type=\"number\"\n            value={m.duration}\n            onChange={(e) => update(idx, 'duration', parseInt(e.currentTarget.value, 10) || 1000)}\n            width={10}\n            suffix=\"ms\"\n          />\n          <Select\n            options={conditionOptions}\n            value={conditionOptions.find((o) => o.value === m.when)}\n            onChange={(v) => update(idx, 'when', v.value as MappingCondition)}\n            width={12}\n          />\n          <Button variant=\"destructive\" size=\"sm\" icon=\"trash-alt\" onClick={() => remove(idx)} />\n        </div>\n      ))}\n      <Button variant=\"secondary\" size=\"sm\" icon=\"plus\" onClick={add}>\n        Add Event Map\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  `,\n  header: css`\n    font-weight: 500;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    margin-bottom: 4px;\n  `,\n  row: css`\n    display: flex;\n    gap: 6px;\n    align-items: center;\n    flex-wrap: wrap;\n  `,\n});\n","/**\n * LinkMapEditor  pattern  URL + target\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button, Select, Input, InlineSwitch } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { LinkMapOptions } from '../types/options';\nimport { LINK_TARGETS, MAPPING_CONDITIONS, LinkTarget, MappingCondition } from '../types/constants';\n\ninterface LinkMapEditorProps {\n  maps: LinkMapOptions[];\n  onChange: (maps: LinkMapOptions[]) => void;\n}\n\nconst targetOptions = LINK_TARGETS.map((t) => ({ label: t, value: t }));\nconst conditionOptions = MAPPING_CONDITIONS.map((c) => ({ label: c, value: c }));\n\nexport const LinkMapEditor: React.FC<LinkMapEditorProps> = ({ maps, onChange }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const update = (idx: number, field: keyof LinkMapOptions, value: any) => {\n    const updated = maps.map((m, i) => (i === idx ? { ...m, [field]: value } : m));\n    onChange(updated);\n  };\n\n  const add = () => {\n    onChange([\n      ...maps,\n      { pattern: '.*', hidden: false, url: '', linkTarget: '_blank', params: '', when: 'always', enabled: true },\n    ]);\n  };\n\n  const remove = (idx: number) => {\n    onChange(maps.filter((_, i) => i !== idx));\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>Link Mappings</div>\n      {maps.map((m, idx) => (\n        <div key={idx} className={styles.row}>\n          <InlineSwitch\n            value={m.enabled}\n            onChange={(e) => update(idx, 'enabled', e.currentTarget.checked)}\n            transparent\n          />\n          <Input\n            value={m.pattern}\n            onChange={(e) => update(idx, 'pattern', e.currentTarget.value)}\n            placeholder=\"Cell pattern\"\n            width={14}\n          />\n          <Input\n            value={m.url}\n            onChange={(e) => update(idx, 'url', e.currentTarget.value)}\n            placeholder=\"URL\"\n            width={20}\n          />\n          <Select\n            options={targetOptions}\n            value={targetOptions.find((o) => o.value === m.linkTarget)}\n            onChange={(v) => update(idx, 'linkTarget', v.value as LinkTarget)}\n            width={10}\n          />\n          <Select\n            options={conditionOptions}\n            value={conditionOptions.find((o) => o.value === m.when)}\n            onChange={(v) => update(idx, 'when', v.value as MappingCondition)}\n            width={12}\n          />\n          <Button variant=\"destructive\" size=\"sm\" icon=\"trash-alt\" onClick={() => remove(idx)} />\n        </div>\n      ))}\n      <Button variant=\"secondary\" size=\"sm\" icon=\"plus\" onClick={add}>\n        Add Link Map\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  `,\n  header: css`\n    font-weight: 500;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    margin-bottom: 4px;\n  `,\n  row: css`\n    display: flex;\n    gap: 6px;\n    align-items: center;\n    flex-wrap: wrap;\n  `,\n});\n","/**\n * RangeMapEditor  range (from-to)  display text list\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button, Input, InlineSwitch } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { RangeMapOptions } from '../types/options';\n\ninterface RangeMapEditorProps {\n  maps: RangeMapOptions[];\n  onChange: (maps: RangeMapOptions[]) => void;\n}\n\nexport const RangeMapEditor: React.FC<RangeMapEditorProps> = ({ maps, onChange }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const update = (idx: number, field: keyof RangeMapOptions, value: any) => {\n    const updated = maps.map((m, i) => (i === idx ? { ...m, [field]: value } : m));\n    onChange(updated);\n  };\n\n  const add = () => {\n    onChange([...maps, { from: 0, to: 100, text: 'Normal', enabled: true }]);\n  };\n\n  const remove = (idx: number) => {\n    onChange(maps.filter((_, i) => i !== idx));\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>Range Mappings</div>\n      {maps.map((m, idx) => (\n        <div key={idx} className={styles.row}>\n          <InlineSwitch\n            value={m.enabled}\n            onChange={(e) => update(idx, 'enabled', e.currentTarget.checked)}\n            transparent\n          />\n          <Input\n            type=\"number\"\n            value={m.from}\n            onChange={(e) => update(idx, 'from', parseFloat(e.currentTarget.value) || 0)}\n            width={8}\n            prefix=\"From\"\n          />\n          <Input\n            type=\"number\"\n            value={m.to}\n            onChange={(e) => update(idx, 'to', parseFloat(e.currentTarget.value) || 0)}\n            width={8}\n            prefix=\"To\"\n          />\n          <span className={styles.arrow}>&rarr;</span>\n          <Input\n            value={m.text}\n            onChange={(e) => update(idx, 'text', e.currentTarget.value)}\n            placeholder=\"Display text\"\n            width={14}\n          />\n          <Button variant=\"destructive\" size=\"sm\" icon=\"trash-alt\" onClick={() => remove(idx)} />\n        </div>\n      ))}\n      <Button variant=\"secondary\" size=\"sm\" icon=\"plus\" onClick={add}>\n        Add Range Map\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  `,\n  header: css`\n    font-weight: 500;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    margin-bottom: 4px;\n  `,\n  row: css`\n    display: flex;\n    gap: 6px;\n    align-items: center;\n    flex-wrap: wrap;\n  `,\n  arrow: css`\n    color: ${theme.colors.text.secondary};\n    font-size: 14px;\n  `,\n});\n","/**\n * RuleEditor  editor for a single rule: metric, thresholds, format, and all mapping types\n */\n\nimport React, { useState } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Input, Select, InlineSwitch, CollapsableSection } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { RuleOptions } from '../types/options';\nimport { AGGREGATION_TYPES, METRIC_TYPES, AggregationType, MetricType } from '../types/constants';\nimport { ThresholdEditor } from './ThresholdEditor';\nimport { ShapeMapEditor } from './ShapeMapEditor';\nimport { TextMapEditor } from './TextMapEditor';\nimport { LinkMapEditor } from './LinkMapEditor';\nimport { EventMapEditor } from './EventMapEditor';\nimport { ValueMapEditor } from './ValueMapEditor';\nimport { RangeMapEditor } from './RangeMapEditor';\n\ninterface RuleEditorProps {\n  rule: RuleOptions;\n  onChange: (rule: RuleOptions) => void;\n}\n\nconst aggOptions = AGGREGATION_TYPES.map((a) => ({ label: a, value: a }));\nconst metricTypeOptions = METRIC_TYPES.map((m) => ({ label: m, value: m }));\n\nexport const RuleEditor: React.FC<RuleEditorProps> = ({ rule, onChange }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const update = (field: keyof RuleOptions, value: any) => {\n    onChange({ ...rule, [field]: value });\n  };\n\n  return (\n    <div className={styles.container}>\n      {/* Metric Matching */}\n      <CollapsableSection label=\"Metric\" isOpen={true}>\n        <div className={styles.section}>\n          <div className={styles.field}>\n            <label className={styles.label}>Name</label>\n            <Input\n              value={rule.name}\n              onChange={(e) => update('name', e.currentTarget.value)}\n              width={20}\n            />\n          </div>\n          <div className={styles.field}>\n            <label className={styles.label}>Metric Type</label>\n            <Select\n              options={metricTypeOptions}\n              value={metricTypeOptions.find((o) => o.value === rule.metricType)}\n              onChange={(v) => update('metricType', v.value as MetricType)}\n              width={14}\n            />\n          </div>\n          <div className={styles.field}>\n            <label className={styles.label}>Alias / Pattern</label>\n            <Input\n              value={rule.alias}\n              onChange={(e) => update('alias', e.currentTarget.value)}\n              placeholder=\"Metric name or regex\"\n              width={24}\n            />\n          </div>\n          <div className={styles.field}>\n            <label className={styles.label}>Aggregation</label>\n            <Select\n              options={aggOptions}\n              value={aggOptions.find((o) => o.value === rule.aggregation)}\n              onChange={(v) => update('aggregation', v.value as AggregationType)}\n              width={14}\n            />\n          </div>\n        </div>\n      </CollapsableSection>\n\n      {/* Thresholds */}\n      <CollapsableSection label=\"Thresholds\" isOpen={true}>\n        <ThresholdEditor\n          thresholds={rule.thresholds}\n          colors={rule.colors}\n          invert={rule.invert}\n          onChange={(thresholds, colors, invert) => {\n            onChange({ ...rule, thresholds, colors, invert });\n          }}\n        />\n      </CollapsableSection>\n\n      {/* Format */}\n      <CollapsableSection label=\"Format\" isOpen={false}>\n        <div className={styles.section}>\n          <div className={styles.field}>\n            <label className={styles.label}>Unit</label>\n            <Input\n              value={rule.unit}\n              onChange={(e) => update('unit', e.currentTarget.value)}\n              width={12}\n            />\n          </div>\n          <div className={styles.field}>\n            <label className={styles.label}>Decimals</label>\n            <Input\n              type=\"number\"\n              value={rule.decimals}\n              onChange={(e) => update('decimals', parseInt(e.currentTarget.value, 10) || 0)}\n              width={8}\n            />\n          </div>\n        </div>\n      </CollapsableSection>\n\n      {/* Shape Maps */}\n      <CollapsableSection label={`Shape Maps (${rule.shapeMaps.length})`} isOpen={false}>\n        <ShapeMapEditor maps={rule.shapeMaps} onChange={(maps) => update('shapeMaps', maps)} />\n      </CollapsableSection>\n\n      {/* Text Maps */}\n      <CollapsableSection label={`Text Maps (${rule.textMaps.length})`} isOpen={false}>\n        <TextMapEditor maps={rule.textMaps} onChange={(maps) => update('textMaps', maps)} />\n      </CollapsableSection>\n\n      {/* Link Maps */}\n      <CollapsableSection label={`Link Maps (${rule.linkMaps.length})`} isOpen={false}>\n        <LinkMapEditor maps={rule.linkMaps} onChange={(maps) => update('linkMaps', maps)} />\n      </CollapsableSection>\n\n      {/* Event Maps */}\n      <CollapsableSection label={`Event Maps (${rule.eventMaps.length})`} isOpen={false}>\n        <EventMapEditor maps={rule.eventMaps} onChange={(maps) => update('eventMaps', maps)} />\n      </CollapsableSection>\n\n      {/* Value Maps */}\n      <CollapsableSection label={`Value Maps (${rule.valueMaps.length})`} isOpen={false}>\n        <ValueMapEditor maps={rule.valueMaps} onChange={(maps) => update('valueMaps', maps)} />\n      </CollapsableSection>\n\n      {/* Range Maps */}\n      <CollapsableSection label={`Range Maps (${rule.rangeMaps.length})`} isOpen={false}>\n        <RangeMapEditor maps={rule.rangeMaps} onChange={(maps) => update('rangeMaps', maps)} />\n      </CollapsableSection>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    padding: 8px;\n    background: ${theme.colors.background.secondary};\n    border: 1px solid ${theme.colors.border.weak};\n    border-radius: 4px;\n  `,\n  section: css`\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    padding: 4px 0;\n  `,\n  field: css`\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  `,\n  label: css`\n    font-size: 12px;\n    color: ${theme.colors.text.secondary};\n    min-width: 100px;\n  `,\n});\n","/**\n * RulesEditor  custom editor: rule list with add/remove/reorder/clone/expand\n */\n\nimport React, { useState } from 'react';\nimport { css } from '@emotion/css';\nimport { StandardEditorProps } from '@grafana/data';\nimport { useTheme2, Button, InlineSwitch } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { RuleOptions, FlowchartPanelOptions, createDefaultRule } from '../types/options';\nimport { RuleEditor } from './RuleEditor';\n\ntype RulesEditorProps = StandardEditorProps<RuleOptions[], any, FlowchartPanelOptions>;\n\nexport const RulesEditor: React.FC<RulesEditorProps> = ({ value, onChange, context }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const rules = value || [];\n  const [expandedId, setExpandedId] = useState<string | null>(null);\n\n  const addRule = () => {\n    const newRule = createDefaultRule();\n    onChange([...rules, newRule]);\n    setExpandedId(newRule.id);\n  };\n\n  const removeRule = (id: string) => {\n    onChange(rules.filter((r) => r.id !== id));\n    if (expandedId === id) {\n      setExpandedId(null);\n    }\n  };\n\n  const updateRule = (id: string, updated: RuleOptions) => {\n    onChange(rules.map((r) => (r.id === id ? updated : r)));\n  };\n\n  const cloneRule = (rule: RuleOptions) => {\n    const cloned = {\n      ...rule,\n      id: `rule-${Date.now()}-${Math.random().toString(36).slice(2, 6)}`,\n      name: `${rule.name} (copy)`,\n    };\n    const idx = rules.findIndex((r) => r.id === rule.id);\n    const updated = [...rules];\n    updated.splice(idx + 1, 0, cloned);\n    onChange(updated);\n  };\n\n  const moveRule = (id: string, direction: 'up' | 'down') => {\n    const idx = rules.findIndex((r) => r.id === id);\n    if (\n      (direction === 'up' && idx <= 0) ||\n      (direction === 'down' && idx >= rules.length - 1)\n    ) {\n      return;\n    }\n    const updated = [...rules];\n    const swapIdx = direction === 'up' ? idx - 1 : idx + 1;\n    [updated[idx], updated[swapIdx]] = [updated[swapIdx], updated[idx]];\n    onChange(updated);\n  };\n\n  const toggleRule = (id: string) => {\n    onChange(\n      rules.map((r) => (r.id === id ? { ...r, enabled: !r.enabled } : r))\n    );\n  };\n\n  return (\n    <div className={styles.container}>\n      {rules.length === 0 && (\n        <div className={styles.empty}>\n          No rules configured. Add a rule to map data to diagram elements.\n        </div>\n      )}\n\n      {rules.map((rule, idx) => (\n        <div key={rule.id} className={styles.ruleItem}>\n          <div className={styles.ruleHeader}>\n            <InlineSwitch\n              value={rule.enabled}\n              onChange={() => toggleRule(rule.id)}\n              transparent\n            />\n            <button\n              className={styles.ruleTitle}\n              onClick={() =>\n                setExpandedId(expandedId === rule.id ? null : rule.id)\n              }\n            >\n              <span className={styles.ruleIndex}>#{idx + 1}</span>\n              <span>{rule.name}</span>\n              <span className={styles.expandIcon}>\n                {expandedId === rule.id ? '\\u25B2' : '\\u25BC'}\n              </span>\n            </button>\n            <div className={styles.ruleActions}>\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                icon=\"arrow-up\"\n                onClick={() => moveRule(rule.id, 'up')}\n                disabled={idx === 0}\n                tooltip=\"Move Up\"\n              />\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                icon=\"arrow-down\"\n                onClick={() => moveRule(rule.id, 'down')}\n                disabled={idx === rules.length - 1}\n                tooltip=\"Move Down\"\n              />\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                icon=\"copy\"\n                onClick={() => cloneRule(rule)}\n                tooltip=\"Clone\"\n              />\n              <Button\n                variant=\"destructive\"\n                size=\"sm\"\n                icon=\"trash-alt\"\n                onClick={() => removeRule(rule.id)}\n                tooltip=\"Delete\"\n              />\n            </div>\n          </div>\n          {expandedId === rule.id && (\n            <RuleEditor\n              rule={rule}\n              onChange={(updated) => updateRule(rule.id, updated)}\n            />\n          )}\n        </div>\n      ))}\n\n      <Button variant=\"primary\" icon=\"plus\" onClick={addRule}>\n        Add Rule\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  `,\n  empty: css`\n    padding: 16px;\n    text-align: center;\n    color: ${theme.colors.text.secondary};\n    font-size: 13px;\n    background: ${theme.colors.background.secondary};\n    border-radius: 4px;\n  `,\n  ruleItem: css`\n    border: 1px solid ${theme.colors.border.weak};\n    border-radius: 4px;\n    overflow: hidden;\n  `,\n  ruleHeader: css`\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 6px 8px;\n    background: ${theme.colors.background.secondary};\n  `,\n  ruleTitle: css`\n    flex: 1;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    text-align: left;\n    padding: 4px 0;\n    &:hover {\n      color: ${theme.colors.primary.text};\n    }\n  `,\n  ruleIndex: css`\n    color: ${theme.colors.text.secondary};\n    font-size: 11px;\n    font-weight: 500;\n  `,\n  expandIcon: css`\n    margin-left: auto;\n    font-size: 10px;\n    color: ${theme.colors.text.secondary};\n  `,\n  ruleActions: css`\n    display: flex;\n    gap: 4px;\n  `,\n});\n","/**\n * ShapeMapEditor  pattern  shape style property + condition\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button, Select, Input, InlineSwitch } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ShapeMapOptions } from '../types/options';\nimport { COLOR_TARGETS, MAPPING_CONDITIONS, ColorTarget, MappingCondition } from '../types/constants';\n\ninterface ShapeMapEditorProps {\n  maps: ShapeMapOptions[];\n  onChange: (maps: ShapeMapOptions[]) => void;\n}\n\nconst targetOptions = COLOR_TARGETS.map((t) => ({ label: t, value: t }));\nconst conditionOptions = MAPPING_CONDITIONS.map((c) => ({ label: c, value: c }));\n\nexport const ShapeMapEditor: React.FC<ShapeMapEditorProps> = ({ maps, onChange }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const update = (idx: number, field: keyof ShapeMapOptions, value: any) => {\n    const updated = maps.map((m, i) => (i === idx ? { ...m, [field]: value } : m));\n    onChange(updated);\n  };\n\n  const add = () => {\n    onChange([...maps, { pattern: '.*', hidden: false, target: 'fillColor', when: 'always', enabled: true }]);\n  };\n\n  const remove = (idx: number) => {\n    onChange(maps.filter((_, i) => i !== idx));\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>Shape Mappings</div>\n      {maps.map((m, idx) => (\n        <div key={idx} className={styles.row}>\n          <InlineSwitch\n            value={m.enabled}\n            onChange={(e) => update(idx, 'enabled', e.currentTarget.checked)}\n            transparent\n          />\n          <Input\n            value={m.pattern}\n            onChange={(e) => update(idx, 'pattern', e.currentTarget.value)}\n            placeholder=\"Cell pattern\"\n            width={16}\n          />\n          <Select\n            options={targetOptions}\n            value={targetOptions.find((o) => o.value === m.target)}\n            onChange={(v) => update(idx, 'target', v.value as ColorTarget)}\n            width={14}\n          />\n          <Select\n            options={conditionOptions}\n            value={conditionOptions.find((o) => o.value === m.when)}\n            onChange={(v) => update(idx, 'when', v.value as MappingCondition)}\n            width={12}\n          />\n          <Button variant=\"destructive\" size=\"sm\" icon=\"trash-alt\" onClick={() => remove(idx)} />\n        </div>\n      ))}\n      <Button variant=\"secondary\" size=\"sm\" icon=\"plus\" onClick={add}>\n        Add Shape Map\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  `,\n  header: css`\n    font-weight: 500;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    margin-bottom: 4px;\n  `,\n  row: css`\n    display: flex;\n    gap: 6px;\n    align-items: center;\n  `,\n});\n","/**\n * TextMapEditor  pattern  text replacement mode/template\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button, Select, Input, InlineSwitch } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { TextMapOptions } from '../types/options';\nimport { TEXT_REPLACE_MODES, MAPPING_CONDITIONS, TextReplaceMode, MappingCondition } from '../types/constants';\n\ninterface TextMapEditorProps {\n  maps: TextMapOptions[];\n  onChange: (maps: TextMapOptions[]) => void;\n}\n\nconst modeOptions = TEXT_REPLACE_MODES.map((m) => ({ label: m, value: m }));\nconst conditionOptions = MAPPING_CONDITIONS.map((c) => ({ label: c, value: c }));\n\nexport const TextMapEditor: React.FC<TextMapEditorProps> = ({ maps, onChange }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const update = (idx: number, field: keyof TextMapOptions, value: any) => {\n    const updated = maps.map((m, i) => (i === idx ? { ...m, [field]: value } : m));\n    onChange(updated);\n  };\n\n  const add = () => {\n    onChange([\n      ...maps,\n      { pattern: '.*', hidden: false, mode: 'content', template: '${_formattedValue}', when: 'always', enabled: true },\n    ]);\n  };\n\n  const remove = (idx: number) => {\n    onChange(maps.filter((_, i) => i !== idx));\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>Text Mappings</div>\n      {maps.map((m, idx) => (\n        <div key={idx} className={styles.row}>\n          <InlineSwitch\n            value={m.enabled}\n            onChange={(e) => update(idx, 'enabled', e.currentTarget.checked)}\n            transparent\n          />\n          <Input\n            value={m.pattern}\n            onChange={(e) => update(idx, 'pattern', e.currentTarget.value)}\n            placeholder=\"Cell pattern\"\n            width={14}\n          />\n          <Select\n            options={modeOptions}\n            value={modeOptions.find((o) => o.value === m.mode)}\n            onChange={(v) => update(idx, 'mode', v.value as TextReplaceMode)}\n            width={12}\n          />\n          <Input\n            value={m.template}\n            onChange={(e) => update(idx, 'template', e.currentTarget.value)}\n            placeholder=\"Template: ${_value}\"\n            width={18}\n          />\n          <Select\n            options={conditionOptions}\n            value={conditionOptions.find((o) => o.value === m.when)}\n            onChange={(v) => update(idx, 'when', v.value as MappingCondition)}\n            width={12}\n          />\n          <Button variant=\"destructive\" size=\"sm\" icon=\"trash-alt\" onClick={() => remove(idx)} />\n        </div>\n      ))}\n      <Button variant=\"secondary\" size=\"sm\" icon=\"plus\" onClick={add}>\n        Add Text Map\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  `,\n  header: css`\n    font-weight: 500;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    margin-bottom: 4px;\n  `,\n  row: css`\n    display: flex;\n    gap: 6px;\n    align-items: center;\n    flex-wrap: wrap;\n  `,\n});\n","/**\n * ThresholdEditor  edits threshold rows (value, comparator, colors)\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button, Select, Input, ColorPicker } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ThresholdOptions, ThresholdColors } from '../types/options';\nimport { COMPARATOR_TYPES, ComparatorType } from '../types/constants';\n\ninterface ThresholdEditorProps {\n  thresholds: ThresholdOptions[];\n  colors: ThresholdColors;\n  invert: boolean;\n  onChange: (thresholds: ThresholdOptions[], colors: ThresholdColors, invert: boolean) => void;\n}\n\nconst comparatorOptions = COMPARATOR_TYPES.map((c) => ({ label: c, value: c }));\n\nexport const ThresholdEditor: React.FC<ThresholdEditorProps> = ({\n  thresholds,\n  colors,\n  invert,\n  onChange,\n}) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const updateThreshold = (idx: number, field: keyof ThresholdOptions, value: any) => {\n    const updated = thresholds.map((t, i) =>\n      i === idx ? { ...t, [field]: value } : t\n    );\n    onChange(updated, colors, invert);\n  };\n\n  const addThreshold = () => {\n    const newT: ThresholdOptions = {\n      value: thresholds.length === 0 ? 50 : 80,\n      level: thresholds.length === 0 ? 1 : 2,\n      comparator: '>=',\n    };\n    onChange([...thresholds, newT], colors, invert);\n  };\n\n  const removeThreshold = (idx: number) => {\n    onChange(thresholds.filter((_, i) => i !== idx), colors, invert);\n  };\n\n  const updateColor = (key: keyof ThresholdColors, color: string) => {\n    onChange(thresholds, { ...colors, [key]: color }, invert);\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.colorRow}>\n        <label className={styles.colorLabel}>\n          OK\n          <ColorPicker color={colors.ok} onChange={(c) => updateColor('ok', c)} />\n        </label>\n        <label className={styles.colorLabel}>\n          Warning\n          <ColorPicker color={colors.warning} onChange={(c) => updateColor('warning', c)} />\n        </label>\n        <label className={styles.colorLabel}>\n          Critical\n          <ColorPicker color={colors.critical} onChange={(c) => updateColor('critical', c)} />\n        </label>\n        <label className={styles.invertLabel}>\n          <input\n            type=\"checkbox\"\n            checked={invert}\n            onChange={(e) => onChange(thresholds, colors, e.target.checked)}\n          />\n          Invert\n        </label>\n      </div>\n\n      {thresholds.map((t, idx) => (\n        <div key={idx} className={styles.row}>\n          <Select\n            options={comparatorOptions}\n            value={comparatorOptions.find((o) => o.value === t.comparator)}\n            onChange={(v) => updateThreshold(idx, 'comparator', v.value as ComparatorType)}\n            width={10}\n          />\n          <Input\n            type=\"number\"\n            value={t.value}\n            onChange={(e) => updateThreshold(idx, 'value', parseFloat(e.currentTarget.value) || 0)}\n            width={12}\n          />\n          <Select\n            options={[\n              { label: 'Warning', value: 1 },\n              { label: 'Critical', value: 2 },\n            ]}\n            value={t.level}\n            onChange={(v) => updateThreshold(idx, 'level', v.value)}\n            width={14}\n          />\n          <Button\n            variant=\"destructive\"\n            size=\"sm\"\n            icon=\"trash-alt\"\n            onClick={() => removeThreshold(idx)}\n            tooltip=\"Remove\"\n          />\n        </div>\n      ))}\n\n      <Button variant=\"secondary\" size=\"sm\" icon=\"plus\" onClick={addThreshold}>\n        Add Threshold\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  `,\n  colorRow: css`\n    display: flex;\n    gap: 16px;\n    align-items: center;\n    margin-bottom: 8px;\n  `,\n  colorLabel: css`\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 12px;\n    color: ${theme.colors.text.secondary};\n  `,\n  invertLabel: css`\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 12px;\n    color: ${theme.colors.text.secondary};\n    margin-left: auto;\n  `,\n  row: css`\n    display: flex;\n    gap: 6px;\n    align-items: center;\n  `,\n});\n","/**\n * ValueMapEditor  value  display text list\n */\n\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button, Input, InlineSwitch } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ValueMapOptions } from '../types/options';\n\ninterface ValueMapEditorProps {\n  maps: ValueMapOptions[];\n  onChange: (maps: ValueMapOptions[]) => void;\n}\n\nexport const ValueMapEditor: React.FC<ValueMapEditorProps> = ({ maps, onChange }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const update = (idx: number, field: keyof ValueMapOptions, value: any) => {\n    const updated = maps.map((m, i) => (i === idx ? { ...m, [field]: value } : m));\n    onChange(updated);\n  };\n\n  const add = () => {\n    onChange([...maps, { value: '0', text: 'Off', enabled: true }]);\n  };\n\n  const remove = (idx: number) => {\n    onChange(maps.filter((_, i) => i !== idx));\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>Value Mappings</div>\n      {maps.map((m, idx) => (\n        <div key={idx} className={styles.row}>\n          <InlineSwitch\n            value={m.enabled}\n            onChange={(e) => update(idx, 'enabled', e.currentTarget.checked)}\n            transparent\n          />\n          <Input\n            value={m.value}\n            onChange={(e) => update(idx, 'value', e.currentTarget.value)}\n            placeholder=\"Value\"\n            width={10}\n          />\n          <span className={styles.arrow}>&rarr;</span>\n          <Input\n            value={m.text}\n            onChange={(e) => update(idx, 'text', e.currentTarget.value)}\n            placeholder=\"Display text\"\n            width={16}\n          />\n          <Button variant=\"destructive\" size=\"sm\" icon=\"trash-alt\" onClick={() => remove(idx)} />\n        </div>\n      ))}\n      <Button variant=\"secondary\" size=\"sm\" icon=\"plus\" onClick={add}>\n        Add Value Map\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  `,\n  header: css`\n    font-weight: 500;\n    font-size: 13px;\n    color: ${theme.colors.text.primary};\n    margin-bottom: 4px;\n  `,\n  row: css`\n    display: flex;\n    gap: 6px;\n    align-items: center;\n  `,\n  arrow: css`\n    color: ${theme.colors.text.secondary};\n    font-size: 14px;\n  `,\n});\n","/**\n * CellAnimator  CSS-based animations for mxGraph cells\n */\n\nimport { AnimationType } from '../types/constants';\nimport { MxGraph, MxGraphCell } from '../types/graph';\nimport { log } from '../utils/logging';\n\n// Global stylesheet for animations (injected once)\nlet styleInjected = false;\n\nconst ANIMATION_CSS = `\n@keyframes fc-blink {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.2; }\n}\n@keyframes fc-fade {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0; }\n}\n@keyframes fc-pulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n}\n@keyframes fc-rotate {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n@keyframes fc-flow {\n  from { stroke-dashoffset: 24; }\n  to { stroke-dashoffset: 0; }\n}\n.fc-anim-blink { animation: fc-blink var(--fc-duration, 1s) ease-in-out infinite; }\n.fc-anim-fade { animation: fc-fade var(--fc-duration, 2s) ease-in-out infinite; }\n.fc-anim-pulse { animation: fc-pulse var(--fc-duration, 1s) ease-in-out infinite; }\n.fc-anim-rotate { animation: fc-rotate var(--fc-duration, 2s) linear infinite; }\n.fc-anim-flow {\n  stroke-dasharray: 8 4;\n  animation: fc-flow var(--fc-duration, 1s) linear infinite;\n}\n`;\n\nfunction injectStyles(): void {\n  if (styleInjected) {\n    return;\n  }\n  const style = document.createElement('style');\n  style.id = 'fc-animations';\n  style.textContent = ANIMATION_CSS;\n  document.head.appendChild(style);\n  styleInjected = true;\n}\n\n/**\n * Apply an animation to a cell's SVG element\n */\nexport function applyAnimation(\n  graph: MxGraph,\n  cell: MxGraphCell,\n  animation: AnimationType,\n  duration = 1000\n): void {\n  injectStyles();\n\n  const state = graph.view.getState(cell);\n  if (!state || !state.shape || !state.shape.node) {\n    return;\n  }\n\n  const node = state.shape.node as HTMLElement;\n  removeAnimation(node);\n\n  node.style.setProperty('--fc-duration', `${duration}ms`);\n  node.classList.add(`fc-anim-${animation}`);\n}\n\n/**\n * Remove all animations from a cell's SVG element\n */\nexport function removeAnimation(node: HTMLElement): void {\n  node.classList.remove(\n    'fc-anim-blink',\n    'fc-anim-fade',\n    'fc-anim-pulse',\n    'fc-anim-rotate',\n    'fc-anim-flow'\n  );\n}\n\n/**\n * Remove all animations from all cells\n */\nexport function clearAllAnimations(graph: MxGraph): void {\n  const container = graph.container;\n  const animated = container.querySelectorAll('[class*=\"fc-anim-\"]');\n  animated.forEach((el) => removeAnimation(el as HTMLElement));\n}\n\n/**\n * Apply animations from cell states\n */\nexport function applyAnimationsFromStates(\n  graph: MxGraph,\n  states: Map<string, { animation: AnimationType; duration: number; active: boolean }>,\n  model: any\n): void {\n  injectStyles();\n\n  states.forEach((eventState, cellId) => {\n    if (!eventState.active) {\n      return;\n    }\n    const cell = model.cells[cellId];\n    if (cell) {\n      applyAnimation(graph, cell, eventState.animation, eventState.duration);\n    }\n  });\n}\n","/**\n * FloorplanShapes  registers Draw.io floorplan shape definitions with mxGraph.\n *\n * Without these, shapes like mxgraph.floorplan.doorRight render as plain rectangles.\n * Ported from: https://github.com/jgraph/drawio/blob/dev/src/main/webapp/shapes/mxFloorplan.js\n */\n\n/* eslint-disable @typescript-eslint/no-this-alias */\n\nimport { log } from '../utils/logging';\n\n/**\n * Register all floorplan shapes used in our diagrams.\n * Must be called AFTER mxGraph globals are loaded on window.\n */\nexport function registerFloorplanShapes(): void {\n  const w = window as any;\n  const mxShape = w.mxShape;\n  const mxUtils = w.mxUtils;\n  const mxCellRenderer = w.mxCellRenderer;\n\n  if (!mxShape || !mxUtils || !mxCellRenderer) {\n    log.warn('Cannot register floorplan shapes: mxGraph globals not available');\n    return;\n  }\n\n  // Helper: create a shape constructor that extends mxShape\n  function createShape(paintFn: (c: any, x: number, y: number, w: number, h: number) => void): any {\n    const Ctor: any = function (this: any, bounds: any, fill: any, stroke: any, strokewidth: any) {\n      mxShape.call(this);\n      this.bounds = bounds;\n      this.fill = fill;\n      this.stroke = stroke;\n      this.strokewidth = strokewidth != null ? strokewidth : 1;\n    };\n    mxUtils.extend(Ctor, mxShape);\n    Ctor.prototype.paintVertexShape = paintFn;\n    return Ctor;\n  }\n\n  // --- doorLeft: wall segment + arc swinging left ---\n  const DoorLeft = createShape(function (c: any, x: number, y: number, w: number, _h: number) {\n    c.translate(x, y);\n    c.rect(0, 0, w, 5);\n    c.fillAndStroke();\n    c.begin();\n    c.moveTo(w, 5);\n    c.arcTo(w, w, 0, 0, 1, 0, 5 + w);\n    c.lineTo(0, 5);\n    c.stroke();\n  });\n  mxCellRenderer.registerShape('mxgraph.floorplan.doorLeft', DoorLeft);\n\n  // --- doorRight: wall segment + arc swinging right ---\n  const DoorRight = createShape(function (c: any, x: number, y: number, w: number, _h: number) {\n    c.translate(x, y);\n    c.rect(0, 0, w, 5);\n    c.fillAndStroke();\n    c.begin();\n    c.moveTo(0, 5);\n    c.arcTo(w, w, 0, 0, 0, w, 5 + w);\n    c.lineTo(w, 5);\n    c.stroke();\n  });\n  mxCellRenderer.registerShape('mxgraph.floorplan.doorRight', DoorRight);\n\n  // --- doorDouble: wall segment + two arcs (one each side) ---\n  const DoorDouble = createShape(function (c: any, x: number, y: number, w: number, _h: number) {\n    c.translate(x, y);\n    const halfW = w * 0.5;\n    c.rect(0, 0, w, 5);\n    c.fillAndStroke();\n    c.begin();\n    c.moveTo(halfW, 0);\n    c.lineTo(halfW, 5);\n    c.moveTo(halfW, 5);\n    c.arcTo(halfW, halfW, 0, 0, 1, 0, 5 + halfW);\n    c.lineTo(0, 5);\n    c.moveTo(halfW, 5);\n    c.arcTo(halfW, halfW, 0, 0, 0, w, 5 + halfW);\n    c.lineTo(w, 5);\n    c.stroke();\n  });\n  mxCellRenderer.registerShape('mxgraph.floorplan.doorDouble', DoorDouble);\n\n  log.info('Registered floorplan shapes: doorLeft, doorRight, doorDouble');\n}\n","/**\n * GraphDecoder  decodes all Draw.io formats into mxGraph-ready XML\n *\n * Handles: raw XML, mxfile wrapper, compressed (base64+deflateRaw+URL-encode),\n * multi-page mxfiles, and SVG.\n */\n\nimport { extractDiagramXml } from '../utils/xml';\nimport { log } from '../utils/logging';\n\n/**\n * Decode any Draw.io content format into an mxGraphModel XML string\n */\nexport function decodeDiagramContent(\n  content: string,\n  pageIndex = 0\n): string {\n  if (!content || !content.trim()) {\n    throw new Error('No diagram content provided');\n  }\n\n  try {\n    return extractDiagramXml(content, pageIndex);\n  } catch (err) {\n    log.error('Failed to decode diagram content:', err);\n    throw new Error(\n      `Failed to decode diagram: ${err instanceof Error ? err.message : String(err)}`\n    );\n  }\n}\n\n/**\n * Load decoded XML into an mxGraph instance\n */\nexport function loadXmlIntoGraph(graph: any, xml: string): void {\n  if (!xml) {\n    throw new Error('No XML content to load');\n  }\n\n  const mxUtils = (window as any).mxUtils;\n  const mxCodec = (window as any).mxCodec;\n\n  if (!mxUtils || !mxCodec) {\n    throw new Error('mxGraph utilities not loaded');\n  }\n\n  const xmlDoc = mxUtils.parseXml(xml);\n  if (!xmlDoc || !xmlDoc.documentElement) {\n    throw new Error('Invalid XML content');\n  }\n\n  const codec = new mxCodec(xmlDoc);\n  const model = graph.getModel();\n\n  model.beginUpdate();\n  try {\n    codec.decode(xmlDoc.documentElement, model);\n  } finally {\n    model.endUpdate();\n  }\n}\n","/**\n * GraphInitializer  creates and configures an mxGraph instance\n */\n\nimport { MxGraph } from '../types/graph';\nimport { log } from '../utils/logging';\n\nexport interface GraphConfig {\n  width: number;\n  height: number;\n  background?: string;\n  readOnly?: boolean;\n}\n\n/**\n * Create and configure an mxGraph instance attached to the given container\n */\nexport function createGraph(\n  container: HTMLElement,\n  config: GraphConfig\n): MxGraph {\n  const MxGraphClass = (window as any).mxGraph;\n  if (!MxGraphClass) {\n    throw new Error('mxGraph library not loaded');\n  }\n\n  // Clear container\n  container.innerHTML = '';\n\n  const graph = new MxGraphClass(container) as MxGraph;\n\n  // Read-only mode\n  if (config.readOnly !== false) {\n    graph.setEnabled(false);\n    graph.setCellsSelectable(false);\n    graph.setCellsResizable(false);\n    graph.setCellsMovable(false);\n  }\n\n  // Configuration\n  graph.setHtmlLabels(true);\n  graph.foldingEnabled = false;\n  graph.setPanning(true);\n\n  // Container sizing\n  container.style.width = `${config.width}px`;\n  container.style.height = `${config.height}px`;\n  container.style.overflow = 'hidden';\n  container.style.position = 'relative';\n\n  if (config.background) {\n    container.style.background = config.background;\n  }\n\n  log.debug('Graph created', config.width, 'x', config.height);\n  return graph;\n}\n\n/**\n * Fit and center the graph content within the container.\n * Handles negative coordinates (common in Draw.io exports).\n */\nexport function fitGraphToContainer(\n  graph: MxGraph,\n  width: number,\n  height: number,\n  padding = 10\n): void {\n  // Always reset to identity transform first so getGraphBounds() returns model coords.\n  // This is critical for resize (second call) where scale was already changed.\n  graph.view.setScale(1);\n  graph.view.setTranslate(0, 0);\n\n  let bounds = graph.getGraphBounds();\n\n  // Fix negative coordinates by translating all cells\n  if (bounds.x < 0 || bounds.y < 0) {\n    const parent = graph.getDefaultParent();\n    const vertices = graph.getChildVertices(parent);\n    const edges = graph.getChildEdges(parent);\n    const allCells = [...vertices, ...edges];\n\n    if (allCells.length > 0) {\n      const dx = -Math.min(bounds.x, 0);\n      const dy = -Math.min(bounds.y, 0);\n      graph.moveCells(allCells, dx, dy);\n      bounds = graph.getGraphBounds();\n    }\n  }\n\n  if (bounds.width === 0 || bounds.height === 0) {\n    return;\n  }\n\n  // Calculate scale to fit diagram in container with padding (never scale up)\n  const availW = width - padding * 2;\n  const availH = height - padding * 2;\n  const scaleX = availW / bounds.width;\n  const scaleY = availH / bounds.height;\n  const scale = Math.min(scaleX, scaleY, 1);\n\n  graph.view.setScale(scale);\n\n  // Center the diagram within the container.\n  // mxGraph transform: screen_pos = (graph_pos + translate) * scale\n  // Solve for translate: translate = desired_screen_pos / scale - graph_pos\n  const screenX = padding + (availW - bounds.width * scale) / 2;\n  const screenY = padding + (availH - bounds.height * scale) / 2;\n  const tx = screenX / scale - bounds.x;\n  const ty = screenY / scale - bounds.y;\n  graph.view.setTranslate(tx, ty);\n\n  graph.refresh();\n  log.info(`Fit: bounds=${Math.round(bounds.x)},${Math.round(bounds.y)} ${Math.round(bounds.width)}x${Math.round(bounds.height)}  container=${width}x${height} scale=${(scale*100).toFixed(1)}% translate=${tx.toFixed(1)},${ty.toFixed(1)}`);\n}\n\n/**\n * Destroy the graph and clean up resources\n */\nexport function destroyGraph(graph: MxGraph): void {\n  try {\n    graph.destroy();\n  } catch {\n    // Ignore destroy errors\n  }\n}\n","/**\n * XCell  cell abstraction over mxGraph cells\n */\n\nimport { MxGraphCell, XCellData } from '../types/graph';\n\n/**\n * Extract a simplified data representation from an mxGraph cell\n */\nexport function extractCellData(cell: MxGraphCell): XCellData {\n  return {\n    id: cell.id || '',\n    value: extractCellValue(cell),\n    style: cell.style || '',\n    isVertex: !!cell.vertex,\n    isEdge: !!cell.edge,\n    geometry: cell.geometry\n      ? {\n          x: cell.geometry.x,\n          y: cell.geometry.y,\n          width: cell.geometry.width,\n          height: cell.geometry.height,\n        }\n      : null,\n    parent: cell.parent?.id || null,\n    children: cell.children ? cell.children.map((c) => c.id) : [],\n  };\n}\n\n/**\n * Extract the text value of a cell (handles XML nodes and strings)\n */\nexport function extractCellValue(cell: MxGraphCell): string {\n  if (!cell.value) {\n    return '';\n  }\n  if (typeof cell.value === 'object') {\n    // Handle mxGraph XML nodes\n    if (cell.value.nodeType === 1) {\n      return (\n        cell.value.getAttribute?.('label') ||\n        cell.value.textContent ||\n        ''\n      );\n    }\n    return String(cell.value);\n  }\n  return String(cell.value);\n}\n\n/**\n * Extract the label from a cell's style string\n */\nexport function extractCellLabel(cell: MxGraphCell): string {\n  const style = cell.style || '';\n  const labelMatch = style.match(/label=([^;]+)/);\n  if (labelMatch) {\n    return labelMatch[1];\n  }\n  return extractCellValue(cell);\n}\n\n/**\n * Get all shape cells (vertices and edges, excluding root/layers)\n */\nexport function getAllShapeCells(model: any): MxGraphCell[] {\n  const cells = model.cells;\n  const result: MxGraphCell[] = [];\n  for (const id in cells) {\n    const cell = cells[id];\n    if (cell.vertex || cell.edge) {\n      result.push(cell);\n    }\n  }\n  return result;\n}\n\n/**\n * Get all cell IDs from the model\n */\nexport function getAllCellIds(model: any): string[] {\n  const cells = model.cells;\n  const ids: string[] = [];\n  for (const id in cells) {\n    if (cells[id].vertex || cells[id].edge) {\n      ids.push(id);\n    }\n  }\n  return ids;\n}\n\n/**\n * Build a label map: cellId -> label text\n */\nexport function buildCellLabelMap(model: any): Map<string, string> {\n  const cells = model.cells;\n  const map = new Map<string, string>();\n  for (const id in cells) {\n    const cell = cells[id];\n    if (cell.vertex || cell.edge) {\n      map.set(id, extractCellValue(cell));\n    }\n  }\n  return map;\n}\n\n/**\n * Get cell display name for debugging/inspector\n */\nexport function getCellDisplayName(cell: MxGraphCell): string {\n  return cell.id || extractCellValue(cell) || '<unnamed>';\n}\n","/**\n * XGraph  high-level wrapper around an mxGraph instance\n *\n * Manages lifecycle, cell access, view control, and model mutation.\n */\n\nimport { MxGraph, MxGraphCell } from '../types/graph';\nimport { GraphConfig, createGraph, fitGraphToContainer, destroyGraph } from './GraphInitializer';\nimport { decodeDiagramContent, loadXmlIntoGraph } from './GraphDecoder';\nimport { getAllShapeCells, getAllCellIds, buildCellLabelMap, extractCellValue } from './XCell';\nimport { log } from '../utils/logging';\n\nexport class XGraph {\n  private graph: MxGraph | null = null;\n  private container: HTMLElement | null = null;\n  private originalValues = new Map<string, string>();\n\n  /**\n   * Initialize graph in the given container\n   */\n  init(container: HTMLElement, config: GraphConfig): MxGraph {\n    this.container = container;\n    this.graph = createGraph(container, config);\n    return this.graph;\n  }\n\n  /**\n   * Load diagram content (handles all formats)\n   */\n  loadContent(content: string, pageIndex = 0): void {\n    if (!this.graph) {\n      throw new Error('Graph not initialized');\n    }\n\n    const xml = decodeDiagramContent(content, pageIndex);\n    loadXmlIntoGraph(this.graph, xml);\n\n    // Store original values for reset\n    this.saveOriginalValues();\n\n    log.info('Diagram loaded successfully');\n  }\n\n  /**\n   * Fit the diagram to the container\n   */\n  fit(width: number, height: number, padding = 10): void {\n    if (!this.graph) {\n      return;\n    }\n    fitGraphToContainer(this.graph, width, height, padding);\n  }\n\n  /**\n   * Get the underlying mxGraph instance\n   */\n  getGraph(): MxGraph | null {\n    return this.graph;\n  }\n\n  /**\n   * Get all cell IDs\n   */\n  getCellIds(): string[] {\n    if (!this.graph) {\n      return [];\n    }\n    return getAllCellIds(this.graph.getModel());\n  }\n\n  /**\n   * Get cell ID -> label map\n   */\n  getCellLabels(): Map<string, string> {\n    if (!this.graph) {\n      return new Map();\n    }\n    return buildCellLabelMap(this.graph.getModel());\n  }\n\n  /**\n   * Get all shape cells\n   */\n  getShapeCells(): MxGraphCell[] {\n    if (!this.graph) {\n      return [];\n    }\n    return getAllShapeCells(this.graph.getModel());\n  }\n\n  /**\n   * Get original cell values (for reset)\n   */\n  getOriginalValues(): Map<string, string> {\n    return new Map(this.originalValues);\n  }\n\n  /**\n   * Set zoom scale\n   */\n  setScale(scale: number): void {\n    this.graph?.view.setScale(scale);\n  }\n\n  /**\n   * Set translation\n   */\n  setTranslate(x: number, y: number): void {\n    this.graph?.view.setTranslate(x, y);\n  }\n\n  /**\n   * Destroy the graph\n   */\n  destroy(): void {\n    if (this.graph) {\n      destroyGraph(this.graph);\n      this.graph = null;\n    }\n    this.container = null;\n    this.originalValues.clear();\n  }\n\n  private saveOriginalValues(): void {\n    if (!this.graph) {\n      return;\n    }\n    this.originalValues.clear();\n    const cells = getAllShapeCells(this.graph.getModel());\n    for (const cell of cells) {\n      this.originalValues.set(cell.id, extractCellValue(cell));\n    }\n  }\n}\n","/**\n * useClickHandler  handles element clicks for link navigation\n */\n\nimport { useCallback } from 'react';\nimport { MxGraphCell } from '../types/graph';\nimport { CellState } from '../types/state';\nimport { resolveLinkVariables } from '../utils/variables';\nimport { log } from '../utils/logging';\n\ninterface UseClickHandlerOptions {\n  replaceVariables: (str: string) => string;\n  cellStates: Map<string, CellState>;\n}\n\nexport function useClickHandler({ replaceVariables, cellStates }: UseClickHandlerOptions) {\n  const handleClick = useCallback(\n    (cell: MxGraphCell, event: MouseEvent) => {\n      const state = cellStates.get(cell.id);\n      if (!state || !state.link) {\n        return;\n      }\n\n      const resolvedUrl = resolveLinkVariables(\n        state.link.url,\n        state,\n        replaceVariables\n      );\n\n      if (!resolvedUrl) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (resolvedUrl.startsWith('http://') || resolvedUrl.startsWith('https://')) {\n        window.open(resolvedUrl, state.link.target || '_blank');\n      } else {\n        // Internal Grafana link\n        try {\n          const { getLocationSrv } = require('@grafana/runtime');\n          const locationSrv = getLocationSrv();\n          locationSrv.update({ path: resolvedUrl });\n        } catch {\n          window.location.href = resolvedUrl;\n        }\n      }\n\n      log.debug('Navigated to:', resolvedUrl);\n    },\n    [replaceVariables, cellStates]\n  );\n\n  return { handleClick };\n}\n","/**\n * useFlowchartNavigation  manages multi-flowchart tab selection\n */\n\nimport { useState, useCallback } from 'react';\nimport { FlowchartSourceOptions } from '../types/options';\n\nexport function useFlowchartNavigation(flowcharts: FlowchartSourceOptions[]) {\n  const [activeIndex, setActiveIndex] = useState(0);\n\n  const navigate = useCallback(\n    (index: number) => {\n      if (index >= 0 && index < flowcharts.length) {\n        setActiveIndex(index);\n      }\n    },\n    [flowcharts.length]\n  );\n\n  const activeFlowchart = flowcharts[activeIndex] || flowcharts[0];\n\n  return {\n    activeIndex,\n    activeFlowchart,\n    navigate,\n    hasMultiple: flowcharts.length > 1,\n  };\n}\n","/**\n * useGraph  manages mxGraph lifecycle tied to React\n */\n\nimport { useRef, useEffect, useCallback, useState } from 'react';\nimport { XGraph } from '../graph/XGraph';\nimport { MxGraph } from '../types/graph';\nimport { log } from '../utils/logging';\n\ninterface UseGraphOptions {\n  width: number;\n  height: number;\n  content: string;\n  pageIndex?: number;\n  background?: string;\n  onError: (error: string) => void;\n  onGraphReady?: (graph: MxGraph, cellIds: string[], cellLabels: Map<string, string>) => void;\n}\n\ninterface UseGraphResult {\n  containerRef: React.RefObject<HTMLDivElement>;\n  graph: MxGraph | null;\n  xgraph: XGraph;\n  cellIds: string[];\n  cellLabels: Map<string, string>;\n  reload: () => void;\n}\n\nexport function useGraph(options: UseGraphOptions): UseGraphResult {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const xgraphRef = useRef<XGraph>(new XGraph());\n\n  const [graph, setGraph] = useState<MxGraph | null>(null);\n  const [cellIds, setCellIds] = useState<string[]>([]);\n  const [cellLabels, setCellLabels] = useState<Map<string, string>>(new Map());\n\n  const { width, height, content, pageIndex = 0, background, onError, onGraphReady } = options;\n\n  // Store callbacks and dimensions in refs to avoid triggering effect re-runs\n  const onErrorRef = useRef(onError);\n  onErrorRef.current = onError;\n  const onGraphReadyRef = useRef(onGraphReady);\n  onGraphReadyRef.current = onGraphReady;\n  const sizeRef = useRef({ width, height });\n  sizeRef.current = { width, height };\n\n  // Single effect with primitive deps only\n  useEffect(() => {\n    if (!containerRef.current) {\n      return;\n    }\n\n    if (typeof (window as any).mxGraph === 'undefined') {\n      onErrorRef.current('mxGraph library not loaded. Please refresh the page.');\n      return;\n    }\n\n    xgraphRef.current.destroy();\n\n    if (!content || !content.trim()) {\n      setGraph(null);\n      setCellIds([]);\n      setCellLabels(new Map());\n      return;\n    }\n\n    const { width: w, height: h } = sizeRef.current;\n\n    try {\n      const g = xgraphRef.current.init(containerRef.current, {\n        width: w,\n        height: h,\n        background,\n        readOnly: true,\n      });\n\n      xgraphRef.current.loadContent(content, pageIndex);\n      xgraphRef.current.fit(w, h);\n\n      const ids = xgraphRef.current.getCellIds();\n      const labels = xgraphRef.current.getCellLabels();\n\n      setGraph(g);\n      setCellIds(ids);\n      setCellLabels(labels);\n\n      log.info(`Loaded ${ids.length} cells`);\n\n      // Apply states immediately after graph creation  no cross-render dependency.\n      // onGraphReady uses a ref, so it always has the latest rule results.\n      if (onGraphReadyRef.current) {\n        onGraphReadyRef.current(g, ids, labels);\n      }\n    } catch (err) {\n      const msg = err instanceof Error ? err.message : String(err);\n      log.error('Graph init failed:', msg);\n      onErrorRef.current(msg);\n      setGraph(null);\n    }\n\n    return () => {\n      xgraphRef.current.destroy();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [content, pageIndex, background]);\n\n  // Re-fit on resize\n  useEffect(() => {\n    if (graph) {\n      xgraphRef.current.fit(width, height);\n    }\n  }, [width, height, graph]);\n\n  const reload = useCallback(() => {\n    xgraphRef.current.destroy();\n    if (!containerRef.current || !content) {\n      return;\n    }\n    const { width: w, height: h } = sizeRef.current;\n    try {\n      const g = xgraphRef.current.init(containerRef.current, {\n        width: w, height: h, background, readOnly: true,\n      });\n      xgraphRef.current.loadContent(content, pageIndex);\n      xgraphRef.current.fit(w, h);\n      const ids = xgraphRef.current.getCellIds();\n      const labels = xgraphRef.current.getCellLabels();\n      setGraph(g);\n      setCellIds(ids);\n      setCellLabels(labels);\n      if (onGraphReadyRef.current) {\n        onGraphReadyRef.current(g, ids, labels);\n      }\n    } catch (err) {\n      log.error('Reload failed:', err);\n    }\n  }, [content, pageIndex, background]);\n\n  return {\n    containerRef: containerRef as React.RefObject<HTMLDivElement>,\n    graph,\n    xgraph: xgraphRef.current,\n    cellIds,\n    cellLabels,\n    reload,\n  };\n}\n","/**\n * useRulesEngine  evaluates all rules against metrics and produces RuleResults\n */\n\nimport { useMemo } from 'react';\nimport { DataFrame } from '@grafana/data';\nimport { RuleOptions } from '../types/options';\nimport { ProcessedMetric } from '../types/metric';\nimport { RuleResult, evaluateAllRules } from '../core/RuleEvaluator';\nimport { processDataFrames } from '../core/MetricProcessor';\n\ninterface UseRulesEngineProps {\n  data: DataFrame[];\n  rules: RuleOptions[];\n  replaceVariables: (str: string) => string;\n}\n\ninterface UseRulesEngineResult {\n  ruleResults: RuleResult[];\n  metrics: ProcessedMetric[];\n}\n\nexport function useRulesEngine({\n  data,\n  rules,\n  replaceVariables,\n}: UseRulesEngineProps): UseRulesEngineResult {\n  const metrics = useMemo(\n    () => processDataFrames(data, 'current'),\n    [data]\n  );\n\n  const ruleResults = useMemo(() => {\n    if (metrics.length === 0 || rules.length === 0) {\n      return [];\n    }\n    return evaluateAllRules(rules, metrics, replaceVariables);\n  }, [metrics, rules, replaceVariables]);\n\n  return { ruleResults, metrics };\n}\n","/**\n * useStateManager  orchestrates computing cell states and applying them to the graph\n */\n\nimport { useLayoutEffect, useMemo } from 'react';\nimport { MxGraph } from '../types/graph';\nimport { CellState } from '../types/state';\nimport { RuleOptions } from '../types/options';\nimport { RuleResult } from '../core/RuleEvaluator';\nimport { computeCellStates } from '../core/StateComputer';\nimport { applyCellStates } from '../core/StateCycleApplier';\nimport { applyAnimation, clearAllAnimations } from '../graph/CellAnimator';\nimport { log } from '../utils/logging';\n\ninterface UseStateManagerProps {\n  graph: MxGraph | null;\n  rules: RuleOptions[];\n  ruleResults: RuleResult[];\n  cellIds: string[];\n  cellLabels: Map<string, string>;\n}\n\nexport function useStateManager({\n  graph,\n  rules,\n  ruleResults,\n  cellIds,\n  cellLabels,\n}: UseStateManagerProps): Map<string, CellState> {\n  const cellStates = useMemo(() => {\n    if (ruleResults.length === 0 || cellIds.length === 0) {\n      return new Map<string, CellState>();\n    }\n    return computeCellStates(rules, ruleResults, cellIds, cellLabels);\n  }, [rules, ruleResults, cellIds, cellLabels]);\n\n  // Apply states on every render  no dependency array, no ref guard.\n  // Applying ~20 cell styles is cheap. This ensures states survive graph re-init.\n  useLayoutEffect(() => {\n    log.info(`useLayoutEffect EVERY: graph=${!!graph}, cellStates=${cellStates.size}, cellIds=${cellIds.length}, ruleResults=${ruleResults.length}`);\n    if (!graph || cellStates.size === 0) {\n      return;\n    }\n\n    try {\n      applyCellStates(graph, cellStates);\n\n      // Apply animations\n      clearAllAnimations(graph);\n      cellStates.forEach((state, cellId) => {\n        if (state.event && state.event.active) {\n          const cell = graph.getModel().cells[cellId];\n          if (cell) {\n            applyAnimation(graph, cell, state.event.animation, state.event.duration);\n          }\n        }\n      });\n    } catch (err) {\n      log.error('useStateManager apply error:', err);\n    }\n  });\n\n  return cellStates;\n}\n","/**\n * useTooltip  debounced tooltip show/hide state management\n */\n\nimport { useState, useCallback, useRef } from 'react';\nimport { MxGraphCell } from '../types/graph';\nimport { CellState } from '../types/state';\nimport { TOOLTIP_DELAY_SHOW, TOOLTIP_DELAY_HIDE } from '../types/constants';\n\nexport interface TooltipData {\n  cell: MxGraphCell;\n  state: CellState;\n  position: { x: number; y: number };\n}\n\nexport function useTooltip() {\n  const [tooltip, setTooltip] = useState<TooltipData | null>(null);\n  const showTimer = useRef<number | null>(null);\n  const hideTimer = useRef<number | null>(null);\n\n  const showTooltip = useCallback(\n    (cell: MxGraphCell, state: CellState, position: { x: number; y: number }) => {\n      if (hideTimer.current) {\n        clearTimeout(hideTimer.current);\n        hideTimer.current = null;\n      }\n      showTimer.current = window.setTimeout(() => {\n        setTooltip({ cell, state, position });\n      }, TOOLTIP_DELAY_SHOW);\n    },\n    []\n  );\n\n  const hideTooltip = useCallback(() => {\n    if (showTimer.current) {\n      clearTimeout(showTimer.current);\n      showTimer.current = null;\n    }\n    hideTimer.current = window.setTimeout(() => {\n      setTooltip(null);\n    }, TOOLTIP_DELAY_HIDE);\n  }, []);\n\n  const hideImmediately = useCallback(() => {\n    if (showTimer.current) {\n      clearTimeout(showTimer.current);\n      showTimer.current = null;\n    }\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n      hideTimer.current = null;\n    }\n    setTooltip(null);\n  }, []);\n\n  return { tooltip, showTooltip, hideTooltip, hideImmediately };\n}\n","/**\n * useZoom  wheel zoom, mouse-drag pan, keyboard shortcuts\n */\n\nimport { useEffect, useCallback, useRef } from 'react';\nimport { MxGraph } from '../types/graph';\nimport { ZoomState } from '../types/state';\nimport { ZOOM_MIN, ZOOM_MAX } from '../types/constants';\n\ninterface UseZoomOptions {\n  containerRef: React.RefObject<HTMLDivElement>;\n  graph: MxGraph | null;\n  enabled: boolean;\n  enableWheel: boolean;\n  enablePan: boolean;\n  enableDoubleClick: boolean;\n  onZoomChange?: (state: ZoomState) => void;\n}\n\nexport function useZoom(options: UseZoomOptions): void {\n  const {\n    containerRef,\n    graph,\n    enabled,\n    enableWheel,\n    enablePan,\n    enableDoubleClick,\n    onZoomChange,\n  } = options;\n\n  const isPanning = useRef(false);\n  const startX = useRef(0);\n  const startY = useRef(0);\n  const translateX = useRef(0);\n  const translateY = useRef(0);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container || !graph || !enabled) {\n      return;\n    }\n\n    const emitChange = () => {\n      onZoomChange?.({\n        scale: graph.view.scale,\n        x: translateX.current,\n        y: translateY.current,\n      });\n    };\n\n    // Ctrl+wheel zoom\n    const handleWheel = (e: WheelEvent) => {\n      if (!enableWheel || !e.ctrlKey) {\n        return;\n      }\n      e.preventDefault();\n      const factor = e.deltaY > 0 ? 0.9 : 1.1;\n      const newScale = Math.max(ZOOM_MIN, Math.min(ZOOM_MAX, graph.view.scale * factor));\n      graph.view.setScale(newScale);\n      emitChange();\n    };\n\n    // Pan: mouse down\n    const handleMouseDown = (e: MouseEvent) => {\n      if (!enablePan || e.button !== 0 || e.ctrlKey) {\n        return;\n      }\n      isPanning.current = true;\n      startX.current = e.clientX;\n      startY.current = e.clientY;\n      container.style.cursor = 'grabbing';\n    };\n\n    // Pan: mouse move\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isPanning.current) {\n        return;\n      }\n      const dx = e.clientX - startX.current;\n      const dy = e.clientY - startY.current;\n      translateX.current += dx;\n      translateY.current += dy;\n      graph.view.setTranslate(translateX.current, translateY.current);\n      startX.current = e.clientX;\n      startY.current = e.clientY;\n    };\n\n    // Pan: mouse up\n    const handleMouseUp = () => {\n      if (isPanning.current) {\n        isPanning.current = false;\n        container.style.cursor = 'grab';\n        emitChange();\n      }\n    };\n\n    // Double-click: reset zoom\n    const handleDblClick = (e: MouseEvent) => {\n      if (!enableDoubleClick) {\n        return;\n      }\n      e.preventDefault();\n      graph.view.setScale(1);\n      translateX.current = 0;\n      translateY.current = 0;\n      graph.view.setTranslate(0, 0);\n      try {\n        graph.center(true, true);\n      } catch {\n        // center may not be available\n      }\n      emitChange();\n    };\n\n    // ESC: reset zoom\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        graph.view.setScale(1);\n        translateX.current = 0;\n        translateY.current = 0;\n        graph.view.setTranslate(0, 0);\n        emitChange();\n      }\n    };\n\n    container.addEventListener('wheel', handleWheel, { passive: false });\n    container.addEventListener('mousedown', handleMouseDown);\n    container.addEventListener('mousemove', handleMouseMove);\n    container.addEventListener('mouseup', handleMouseUp);\n    container.addEventListener('mouseleave', handleMouseUp);\n    container.addEventListener('dblclick', handleDblClick);\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      container.removeEventListener('wheel', handleWheel);\n      container.removeEventListener('mousedown', handleMouseDown);\n      container.removeEventListener('mousemove', handleMouseMove);\n      container.removeEventListener('mouseup', handleMouseUp);\n      container.removeEventListener('mouseleave', handleMouseUp);\n      container.removeEventListener('dblclick', handleDblClick);\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [containerRef, graph, enabled, enableWheel, enablePan, enableDoubleClick, onZoomChange]);\n}\n\n/**\n * Programmatic zoom controls\n */\nexport function useZoomControl(graph: MxGraph | null) {\n  const zoomIn = useCallback(() => {\n    if (!graph) return;\n    graph.view.setScale(Math.min(ZOOM_MAX, graph.view.scale * 1.2));\n  }, [graph]);\n\n  const zoomOut = useCallback(() => {\n    if (!graph) return;\n    graph.view.setScale(Math.max(ZOOM_MIN, graph.view.scale * 0.8));\n  }, [graph]);\n\n  const zoomToFit = useCallback(() => {\n    if (!graph) return;\n    graph.fit();\n    graph.view.setScale(graph.view.scale * 0.9);\n  }, [graph]);\n\n  const resetZoom = useCallback(() => {\n    if (!graph) return;\n    graph.view.setScale(1);\n    graph.view.setTranslate(0, 0);\n    try {\n      graph.center(true, true);\n    } catch {\n      // center may not exist\n    }\n  }, [graph]);\n\n  return { zoomIn, zoomOut, zoomToFit, resetZoom };\n}\n","/**\n * Constants for the Flowcharting plugin\n * Replaces the Angular GFCONSTANT pattern\n */\n\n// Aggregation types\nexport const AGGREGATION_TYPES = [\n  'current',\n  'min',\n  'max',\n  'avg',\n  'sum',\n  'count',\n  'delta',\n  'diff',\n  'range',\n  'first',\n  'last',\n] as const;\n\nexport type AggregationType = (typeof AGGREGATION_TYPES)[number];\n\n// Comparator types for threshold evaluation\nexport const COMPARATOR_TYPES = ['>', '<', '>=', '<=', '==', '!='] as const;\nexport type ComparatorType = (typeof COMPARATOR_TYPES)[number];\n\n// Threshold levels: 0=OK, 1=Warning, 2=Critical\nexport type ThresholdLevel = 0 | 1 | 2;\n\n// Mapping types\nexport const MAPPING_TYPES = [\n  'color',\n  'text',\n  'link',\n  'event',\n  'visibility',\n  'size',\n  'opacity',\n] as const;\nexport type MappingType = (typeof MAPPING_TYPES)[number];\n\n// Mapping conditions\nexport const MAPPING_CONDITIONS = [\n  'always',\n  'ok',\n  'warning',\n  'critical',\n  'never',\n] as const;\nexport type MappingCondition = (typeof MAPPING_CONDITIONS)[number];\n\n// Color mapping targets\nexport const COLOR_TARGETS = [\n  'fillColor',\n  'strokeColor',\n  'fontColor',\n  'bgColor',\n  'gradientColor',\n] as const;\nexport type ColorTarget = (typeof COLOR_TARGETS)[number];\n\n// Text mapping targets\nexport const TEXT_TARGETS = ['label', 'tooltip'] as const;\nexport type TextTarget = (typeof TEXT_TARGETS)[number];\n\n// Text replacement modes\nexport const TEXT_REPLACE_MODES = [\n  'content',\n  'pattern',\n  'append',\n  'prepend',\n] as const;\nexport type TextReplaceMode = (typeof TEXT_REPLACE_MODES)[number];\n\n// Animation types\nexport const ANIMATION_TYPES = [\n  'blink',\n  'fade',\n  'pulse',\n  'flow',\n  'rotate',\n] as const;\nexport type AnimationType = (typeof ANIMATION_TYPES)[number];\n\n// Diagram source types\nexport const SOURCE_TYPES = ['xml', 'url', 'csv'] as const;\nexport type SourceType = (typeof SOURCE_TYPES)[number];\n\n// Metric types\nexport const METRIC_TYPES = ['series', 'table'] as const;\nexport type MetricType = (typeof METRIC_TYPES)[number];\n\n// Editor themes\nexport const EDITOR_THEMES = ['light', 'dark', 'kennedy', 'minimal'] as const;\nexport type EditorTheme = (typeof EDITOR_THEMES)[number];\n\n// Link targets\nexport const LINK_TARGETS = ['_blank', '_self', '_top', '_parent'] as const;\nexport type LinkTarget = (typeof LINK_TARGETS)[number];\n\n// Pattern match types\nexport const MATCH_TYPES = ['exact', 'regex', 'wildcard', 'value'] as const;\nexport type MatchType = (typeof MATCH_TYPES)[number];\n\n// Default colors\nexport const DEFAULT_COLORS = {\n  ok: '#73BF69',\n  warning: '#FF9830',\n  critical: '#F2495C',\n  noData: '#999999',\n  disabled: '#CCCCCC',\n} as const;\n\n// Default Draw.io editor URL\nexport const DEFAULT_EDITOR_URL = 'https://embed.diagrams.net';\n\n// mxGraph CDN base path\nexport const MXGRAPH_BASE_PATH =\n  'https://cdn.jsdelivr.net/npm/mxgraph@4.2.2/javascript/src';\n\n// Zoom limits\nexport const ZOOM_MIN = 0.1;\nexport const ZOOM_MAX = 5;\nexport const ZOOM_STEP = 0.1;\nexport const ZOOM_WHEEL_FACTOR = 0.1;\n\n// Tooltip defaults\nexport const TOOLTIP_DELAY_SHOW = 200;\nexport const TOOLTIP_DELAY_HIDE = 100;\n\n// Log prefix\nexport const LOG_PREFIX = '[Flowcharting]';\n","/**\n * Panel options interfaces for the Flowcharting plugin\n */\n\nimport {\n  AggregationType,\n  AnimationType,\n  ColorTarget,\n  ComparatorType,\n  EditorTheme,\n  LinkTarget,\n  MappingCondition,\n  MetricType,\n  SourceType,\n  TextReplaceMode,\n  ThresholdLevel,\n  DEFAULT_COLORS,\n  DEFAULT_EDITOR_URL,\n} from './constants';\n\n// ============================================================================\n// Panel Options (top-level)\n// ============================================================================\n\nexport interface FlowchartPanelOptions {\n  flowcharts: FlowchartSourceOptions[];\n  rules: RuleOptions[];\n  zoom: ZoomOptions;\n  tooltip: TooltipOptions;\n  background: BackgroundOptions;\n  editorUrl: string;\n  editorTheme: EditorTheme;\n  activeFlowchartIndex: number;\n  // Flat source fields  Grafana builder API doesn't support array paths like flowcharts[0].content\n  sourceType: SourceType;\n  content: string;\n  sourceUrl: string;\n  sourceName: string;\n}\n\n// ============================================================================\n// Flowchart Source\n// ============================================================================\n\nexport interface FlowchartSourceOptions {\n  name: string;\n  type: SourceType;\n  content: string;\n  url: string;\n  download: boolean;\n  enabled: boolean;\n}\n\n// ============================================================================\n// Zoom / Display\n// ============================================================================\n\nexport interface ZoomOptions {\n  scale: number;\n  center: boolean;\n  lock: boolean;\n  enableWheel: boolean;\n  enableDoubleClick: boolean;\n  enablePan: boolean;\n}\n\nexport interface TooltipOptions {\n  enabled: boolean;\n  showGraph: boolean;\n  showValue: boolean;\n  showMetric: boolean;\n  showTimestamp: boolean;\n  customTemplate: string;\n}\n\nexport interface BackgroundOptions {\n  color: string;\n  transparent: boolean;\n}\n\n// ============================================================================\n// Rules\n// ============================================================================\n\nexport interface RuleOptions {\n  id: string;\n  name: string;\n  enabled: boolean;\n  order: number;\n  // Metric matching\n  metricType: MetricType;\n  pattern: string; // metric name/alias regex\n  alias: string;\n  column: string; // column name for table metric matching (e.g. MAC address)\n  aggregation: AggregationType;\n  // Thresholds\n  thresholds: ThresholdOptions[];\n  invert: boolean;\n  colors: ThresholdColors;\n  // Gradient mode: multiple thresholds with multiple colors\n  gradient: boolean;\n  gradientColors: string[]; // array of colors for gradient mode\n  gradientThresholds: number[]; // flat array of threshold values for gradient mode\n  // Format\n  unit: string;\n  decimals: number;\n  // Mappings\n  shapeMaps: ShapeMapOptions[];\n  textMaps: TextMapOptions[];\n  linkMaps: LinkMapOptions[];\n  eventMaps: EventMapOptions[];\n  // Value/Range maps\n  valueMaps: ValueMapOptions[];\n  rangeMaps: RangeMapOptions[];\n}\n\nexport interface ThresholdOptions {\n  value: number;\n  level: ThresholdLevel;\n  comparator: ComparatorType;\n}\n\nexport interface ThresholdColors {\n  ok: string;\n  warning: string;\n  critical: string;\n}\n\n// ============================================================================\n// Shape / Text / Link / Event Mappings\n// ============================================================================\n\nexport interface ShapeMapOptions {\n  pattern: string; // cell ID/label regex\n  hidden: boolean;\n  target: ColorTarget;\n  when: MappingCondition;\n  enabled: boolean;\n}\n\nexport interface TextMapOptions {\n  pattern: string;\n  hidden: boolean;\n  mode: TextReplaceMode;\n  template: string; // e.g. \"${_value} ${_unit}\"\n  when: MappingCondition;\n  enabled: boolean;\n}\n\nexport interface LinkMapOptions {\n  pattern: string;\n  hidden: boolean;\n  url: string;\n  linkTarget: LinkTarget;\n  params: string;\n  when: MappingCondition;\n  enabled: boolean;\n}\n\nexport interface EventMapOptions {\n  pattern: string;\n  hidden: boolean;\n  animation: AnimationType;\n  duration: number; // ms\n  when: MappingCondition;\n  enabled: boolean;\n}\n\n// ============================================================================\n// Value / Range Maps\n// ============================================================================\n\nexport interface ValueMapOptions {\n  value: string;\n  text: string;\n  enabled: boolean;\n}\n\nexport interface RangeMapOptions {\n  from: number;\n  to: number;\n  text: string;\n  enabled: boolean;\n}\n\n// ============================================================================\n// Default Values\n// ============================================================================\n\nexport const DEFAULT_FLOWCHART_SOURCE: FlowchartSourceOptions = {\n  name: 'Default',\n  type: 'xml',\n  content: '',\n  url: '',\n  download: false,\n  enabled: true,\n};\n\nexport const DEFAULT_ZOOM: ZoomOptions = {\n  scale: 1,\n  center: true,\n  lock: false,\n  enableWheel: true,\n  enableDoubleClick: true,\n  enablePan: true,\n};\n\nexport const DEFAULT_TOOLTIP: TooltipOptions = {\n  enabled: true,\n  showGraph: false,\n  showValue: true,\n  showMetric: true,\n  showTimestamp: false,\n  customTemplate: '',\n};\n\nexport const DEFAULT_BACKGROUND: BackgroundOptions = {\n  color: 'transparent',\n  transparent: true,\n};\n\nexport const DEFAULT_PANEL_OPTIONS: FlowchartPanelOptions = {\n  flowcharts: [{ ...DEFAULT_FLOWCHART_SOURCE }],\n  rules: [],\n  zoom: { ...DEFAULT_ZOOM },\n  tooltip: { ...DEFAULT_TOOLTIP },\n  background: { ...DEFAULT_BACKGROUND },\n  editorUrl: DEFAULT_EDITOR_URL,\n  editorTheme: 'light',\n  activeFlowchartIndex: 0,\n  sourceType: 'xml',\n  content: '',\n  sourceUrl: '',\n  sourceName: 'Default',\n};\n\nlet _ruleCounter = 0;\n\nexport function createDefaultRule(): RuleOptions {\n  _ruleCounter++;\n  return {\n    id: `rule-${Date.now()}-${_ruleCounter}`,\n    name: `Rule ${_ruleCounter}`,\n    enabled: true,\n    order: 0,\n    metricType: 'series',\n    pattern: '.*',\n    alias: '',\n    column: '',\n    aggregation: 'current',\n    thresholds: [\n      { value: 50, level: 1, comparator: '>=' },\n      { value: 80, level: 2, comparator: '>=' },\n    ],\n    invert: false,\n    colors: { ...DEFAULT_COLORS },\n    gradient: false,\n    gradientColors: [],\n    gradientThresholds: [],\n    unit: 'short',\n    decimals: 2,\n    shapeMaps: [{ pattern: '.*', hidden: false, target: 'fillColor', when: 'always', enabled: true }],\n    textMaps: [],\n    linkMaps: [],\n    eventMaps: [],\n    valueMaps: [],\n    rangeMaps: [],\n  };\n}\n","/**\n * Compression utilities for Draw.io diagram content\n *\n * Draw.io compressed format: XML  deflateRaw  URL-encode  base64\n * Decompression:            base64  URL-decode  inflateRaw  XML\n */\n\nimport pako from 'pako';\nimport { log } from './logging';\n\n/**\n * Decompress a Draw.io compressed string back to XML\n */\nexport function decompress(data: string): string {\n  try {\n    // Step 1: base64 decode\n    const binary = atob(data);\n\n    // Step 2: convert to Uint8Array\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n      bytes[i] = binary.charCodeAt(i);\n    }\n\n    // Step 3: inflate (raw deflate  no zlib header)\n    let inflated: string;\n    try {\n      inflated = pako.inflateRaw(bytes, { to: 'string' });\n    } catch {\n      // Fallback: try full inflate (with header)\n      inflated = pako.inflate(bytes, { to: 'string' });\n    }\n\n    // Step 4: URL-decode\n    try {\n      return decodeURIComponent(inflated);\n    } catch {\n      return inflated;\n    }\n  } catch (err) {\n    log.error('Decompression failed:', err);\n    throw new Error('Failed to decompress diagram data');\n  }\n}\n\n/**\n * Compress XML string using Draw.io format\n */\nexport function compress(xml: string): string {\n  try {\n    // Step 1: URL-encode\n    const encoded = encodeURIComponent(xml);\n\n    // Step 2: deflateRaw\n    const encoder = new TextEncoder();\n    const deflated = pako.deflateRaw(encoder.encode(encoded), { level: 9 });\n\n    // Step 3: base64 encode\n    let binary = '';\n    for (let i = 0; i < deflated.length; i++) {\n      binary += String.fromCharCode(deflated[i]);\n    }\n    return btoa(binary);\n  } catch (err) {\n    log.error('Compression failed:', err);\n    return xml;\n  }\n}\n\n/**\n * Detect whether a string appears to be compressed (base64)\n */\nexport function isCompressed(content: string): boolean {\n  if (!content) {\n    return false;\n  }\n  const trimmed = content.trim();\n  // Compressed data won't start with '<' and is base64\n  return !trimmed.startsWith('<') && /^[A-Za-z0-9+/\\s]+=*$/.test(trimmed);\n}\n","/**\n * Value formatting utilities with Grafana unit support\n */\n\nimport { formatValueWithUnit } from './variables';\n\n/**\n * Format a numeric value for display using configured unit and decimals\n */\nexport function formatValue(\n  value: number | string | null | undefined,\n  unit?: string,\n  decimals?: number\n): string {\n  if (value === null || value === undefined) {\n    return 'N/A';\n  }\n  if (typeof value === 'string') {\n    return value;\n  }\n  if (isNaN(value)) {\n    return 'NaN';\n  }\n  return formatValueWithUnit(value, unit, decimals);\n}\n\n/**\n * Apply value maps: if the numeric value matches a map entry, return its text\n */\nexport function applyValueMaps(\n  value: number | string,\n  maps: Array<{ value: string; text: string; enabled: boolean }>\n): string | null {\n  const strVal = String(value);\n  for (const m of maps) {\n    if (!m.enabled) {\n      continue;\n    }\n    if (m.value === strVal) {\n      return m.text;\n    }\n  }\n  return null;\n}\n\n/**\n * Apply range maps: if the numeric value falls within a range, return its text\n */\nexport function applyRangeMaps(\n  value: number,\n  maps: Array<{ from: number; to: number; text: string; enabled: boolean }>\n): string | null {\n  for (const m of maps) {\n    if (!m.enabled) {\n      continue;\n    }\n    if (value >= m.from && value <= m.to) {\n      return m.text;\n    }\n  }\n  return null;\n}\n","/**\n * Structured logging utility\n * Uses no-op in production to comply with Grafana plugin guidelines\n */\n\nimport { LOG_PREFIX } from '../types/constants';\n\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\n\nconst LOG_LEVELS: Record<LogLevel, number> = {\n  debug: 0,\n  info: 1,\n  warn: 2,\n  error: 3,\n};\n\nlet currentLevel: LogLevel = 'warn';\n\nexport function setLogLevel(level: LogLevel): void {\n  currentLevel = level;\n}\n\nfunction shouldLog(level: LogLevel): boolean {\n  return LOG_LEVELS[level] >= LOG_LEVELS[currentLevel];\n}\n\n// No-op functions for production  Grafana plugins must not log to console\nconst noop = (..._args: any[]): void => {};\n\nexport const log = {\n  debug: noop as (msg: string, ...args: any[]) => void,\n  info: noop as (msg: string, ...args: any[]) => void,\n  warn(msg: string, ...args: any[]): void {\n    if (shouldLog('warn')) {\n      // Only warn and error are kept for critical issues\n    }\n  },\n  error(msg: string, ...args: any[]): void {\n    if (shouldLog('error')) {\n      // Only warn and error are kept for critical issues\n    }\n  },\n};\n","/**\n * Migration utility: converts Angular agenty-flowcharting-panel options to React plugin format\n */\n\nimport {\n  FlowchartPanelOptions,\n  DEFAULT_PANEL_OPTIONS,\n  RuleOptions,\n  ShapeMapOptions,\n  TextMapOptions,\n  LinkMapOptions,\n  EventMapOptions,\n  ValueMapOptions,\n  RangeMapOptions,\n} from '../types/options';\nimport { MappingCondition, DEFAULT_COLORS } from '../types/constants';\nimport { log } from './logging';\n\nexport interface MigrationResult {\n  success: boolean;\n  options: FlowchartPanelOptions;\n  warnings: string[];\n}\n\n/**\n * Detect if the panel is from the Angular agenty-flowcharting-panel plugin\n */\nexport function isAngularFlowchartingPanel(panel: any): boolean {\n  return !!(\n    panel.type === 'agenty-flowcharting-panel' ||\n    panel.flowchartsData ||\n    panel.rulesData\n  );\n}\n\n/**\n * Migrate from Angular agenty-flowcharting-panel to React format.\n * Handles the full panel object (not just options).\n */\nexport function migrateAngularPanel(panel: any): MigrationResult {\n  const warnings: string[] = [];\n  const options: FlowchartPanelOptions = { ...DEFAULT_PANEL_OPTIONS };\n\n  try {\n    // Migrate flowchart source from flowchartsData\n    const flowchartsData = panel.flowchartsData || panel.options?.flowchartsData;\n    if (flowchartsData?.flowcharts?.[0]) {\n      const fc = flowchartsData.flowcharts[0];\n      options.content = fc.xml || fc.content || '';\n      options.sourceType = fc.type || 'xml';\n      options.sourceUrl = fc.url || '';\n      options.sourceName = fc.name || 'Main';\n\n      // Also populate flowcharts array\n      options.flowcharts = [{\n        name: fc.name || 'Main',\n        type: fc.type || 'xml',\n        content: fc.xml || fc.content || '',\n        url: fc.url || '',\n        download: fc.download ?? false,\n        enabled: true,\n      }];\n\n      // Migrate display options from flowchart\n      if (fc.zoom || fc.scale) {\n        options.zoom = {\n          ...options.zoom,\n          center: fc.center ?? true,\n          lock: fc.lock ?? false,\n        };\n      }\n      if (fc.bgColor) {\n        const transparent = fc.bgColor === '#00000000' || fc.bgColor === 'transparent';\n        options.background = { color: fc.bgColor, transparent };\n      }\n      if (fc.editorUrl) {\n        options.editorUrl = fc.editorUrl;\n      }\n      if (fc.editorTheme) {\n        options.editorTheme = fc.editorTheme;\n      }\n    }\n\n    // Migrate rules from rulesData\n    const rulesData = panel.rulesData?.rulesData || panel.rulesData || panel.options?.rulesData?.rulesData;\n    if (Array.isArray(rulesData)) {\n      options.rules = rulesData.map((oldRule: any, idx: number) => {\n        return migrateAngularRule(oldRule, idx, warnings);\n      });\n    }\n\n    log.info('Migration completed successfully');\n    return { success: true, options, warnings };\n  } catch (err) {\n    log.error('Migration failed:', err);\n    warnings.push(`Migration error: ${err instanceof Error ? err.message : String(err)}`);\n    return { success: false, options: { ...DEFAULT_PANEL_OPTIONS }, warnings };\n  }\n}\n\n/**\n * Migrate a single Angular rule to React format\n */\nfunction migrateAngularRule(oldRule: any, idx: number, warnings: string[]): RuleOptions {\n  const id = `rule-migrated-${idx + 1}`;\n\n  // Map \"colorOn\"/\"textOn\"/\"linkOn\" values to MappingCondition\n  const mapCondition = (on: string): MappingCondition => {\n    switch (on) {\n      case 'a': return 'always';\n      case 'wc': return 'critical';\n      case 'ww': return 'warning';\n      case 'wmd': return 'always'; // \"when matched with data\"  always (if rule matches)\n      case 'n': return 'never';\n      default: return 'always';\n    }\n  };\n\n  // Migrate shape maps from shapeData[]\n  const shapeMaps: ShapeMapOptions[] = (oldRule.shapeData || []).map((sd: any) => ({\n    pattern: sd.pattern || '.*',\n    hidden: sd.hidden ?? false,\n    target: sd.style || 'fillColor',\n    when: mapCondition(sd.colorOn || 'a'),\n    enabled: true,\n  }));\n\n  // Migrate text maps from textData[]\n  const textMaps: TextMapOptions[] = (oldRule.textData || []).map((td: any) => ({\n    pattern: td.pattern || '.*',\n    hidden: td.hidden ?? false,\n    mode: td.textReplace || 'content',\n    template: td.textPattern || '${_formattedValue}',\n    when: mapCondition(td.textOn || 'a'),\n    enabled: true,\n  }));\n\n  // Migrate link maps from linkData[]\n  const linkMaps: LinkMapOptions[] = (oldRule.linkData || []).map((ld: any) => ({\n    pattern: ld.pattern || '.*',\n    hidden: ld.hidden ?? false,\n    url: ld.linkUrl || ld.url || '',\n    linkTarget: '_blank',\n    params: ld.linkParams ? '' : '',\n    when: mapCondition(ld.linkOn || 'a'),\n    enabled: true,\n  }));\n\n  // Migrate event maps from eventData[]\n  const eventMaps: EventMapOptions[] = (oldRule.eventData || []).map((ed: any) => ({\n    pattern: ed.pattern || '.*',\n    hidden: ed.hidden ?? false,\n    animation: ed.animation || ed.type || 'blink',\n    duration: ed.duration ?? 1000,\n    when: mapCondition(ed.eventOn || 'a'),\n    enabled: true,\n  }));\n\n  // Migrate value/range maps\n  const valueMaps: ValueMapOptions[] = (oldRule.valueData || []).map((vd: any) => ({\n    value: String(vd.value ?? ''),\n    text: vd.text || '',\n    enabled: true,\n  }));\n\n  const rangeMaps: RangeMapOptions[] = (oldRule.rangeData || []).map((rd: any) => ({\n    from: rd.from ?? 0,\n    to: rd.to ?? 0,\n    text: rd.text || '',\n    enabled: true,\n  }));\n\n  // Handle gradient mode: many thresholds + many colors\n  const isGradient = oldRule.gradient === true;\n  const oldColors: string[] = Array.isArray(oldRule.colors) ? oldRule.colors : [];\n  const oldThresholds: number[] = Array.isArray(oldRule.thresholds)\n    ? oldRule.thresholds.map(Number).filter((n: number) => !isNaN(n))\n    : [];\n\n  // Build standard 3-level thresholds as fallback\n  let thresholds = [\n    { value: 50, level: 1 as const, comparator: '>=' as const },\n    { value: 80, level: 2 as const, comparator: '>=' as const },\n  ];\n  let colors: { ok: string; warning: string; critical: string } = {\n    ok: DEFAULT_COLORS.ok,\n    warning: DEFAULT_COLORS.warning,\n    critical: DEFAULT_COLORS.critical,\n  };\n\n  if (!isGradient && oldThresholds.length >= 2) {\n    // Standard mode: first two thresholds as warning/critical\n    thresholds = [\n      { value: oldThresholds[0], level: 1 as const, comparator: '>=' as const },\n      { value: oldThresholds[1], level: 2 as const, comparator: '>=' as const },\n    ];\n  }\n\n  if (!isGradient && oldColors.length >= 3) {\n    colors = {\n      ok: oldColors[0],\n      warning: oldColors[1],\n      critical: oldColors[2],\n    };\n  }\n\n  return {\n    id,\n    name: oldRule.alias || oldRule.name || `Rule ${idx + 1}`,\n    enabled: oldRule.hidden !== true,\n    order: oldRule.order ?? idx + 1,\n    metricType: oldRule.metricType || 'series',\n    pattern: oldRule.pattern || '.*',\n    alias: oldRule.alias || '',\n    column: oldRule.column || '',\n    aggregation: oldRule.aggregation || 'current',\n    thresholds,\n    invert: oldRule.invert ?? false,\n    colors,\n    gradient: isGradient,\n    gradientColors: isGradient ? oldColors : [],\n    gradientThresholds: isGradient ? oldThresholds : [],\n    unit: oldRule.unit || 'short',\n    decimals: oldRule.decimals ?? 2,\n    shapeMaps,\n    textMaps,\n    linkMaps,\n    eventMaps,\n    valueMaps,\n    rangeMaps,\n  };\n}\n\n/**\n * Generic migration for simple options format changes (non-Angular)\n */\nexport function migrateOptions(oldOptions: any): MigrationResult {\n  const warnings: string[] = [];\n  const options: FlowchartPanelOptions = { ...DEFAULT_PANEL_OPTIONS };\n\n  try {\n    // Check if this has the Angular format nested inside options\n    if (oldOptions.flowchartsData || oldOptions.rulesData) {\n      return migrateAngularPanel(oldOptions);\n    }\n\n    // Migrate flowchart sources\n    if (oldOptions.flowcharts && Array.isArray(oldOptions.flowcharts)) {\n      options.flowcharts = oldOptions.flowcharts.map((fc: any) => ({\n        name: fc.name || 'Migrated',\n        type: fc.type || 'xml',\n        content: fc.xml || fc.content || '',\n        url: fc.url || '',\n        download: fc.download ?? false,\n        enabled: fc.enabled ?? true,\n      }));\n    }\n\n    // Migrate flat content fields\n    if (oldOptions.content) {\n      options.content = oldOptions.content;\n    }\n    if (oldOptions.sourceType) {\n      options.sourceType = oldOptions.sourceType;\n    }\n\n    // Migrate rules\n    if (oldOptions.rules && Array.isArray(oldOptions.rules)) {\n      options.rules = oldOptions.rules;\n    }\n\n    log.info('Migration completed successfully');\n    return { success: true, options, warnings };\n  } catch (err) {\n    log.error('Migration failed:', err);\n    warnings.push(`Migration error: ${err instanceof Error ? err.message : String(err)}`);\n    return { success: false, options: { ...DEFAULT_PANEL_OPTIONS }, warnings };\n  }\n}\n","/**\n * Pattern matching utilities  supports regex, wildcard, and exact matching\n */\n\nimport { MatchType } from '../types/constants';\n\nexport interface PatternResult {\n  matched: boolean;\n  matchType: MatchType;\n}\n\n/**\n * Parse a pattern string into a usable RegExp and metadata\n */\nexport function parsePattern(pattern: string): {\n  regex: RegExp | null;\n  isRegex: boolean;\n  isWildcard: boolean;\n} {\n  if (!pattern) {\n    return { regex: null, isRegex: false, isWildcard: false };\n  }\n\n  // Explicit regex: /pattern/ or /pattern/flags\n  if (pattern.startsWith('/') && pattern.lastIndexOf('/') > 0) {\n    const lastSlash = pattern.lastIndexOf('/');\n    const body = pattern.slice(1, lastSlash);\n    const flags = pattern.slice(lastSlash + 1);\n    try {\n      return { regex: new RegExp(body, flags), isRegex: true, isWildcard: false };\n    } catch {\n      return { regex: null, isRegex: false, isWildcard: false };\n    }\n  }\n\n  // Wildcard: contains * or ?\n  if (pattern.includes('*') || pattern.includes('?')) {\n    const escaped = pattern\n      .replace(/[.+^${}()|[\\]\\\\]/g, '\\\\$&')\n      .replace(/\\*/g, '.*')\n      .replace(/\\?/g, '.');\n    try {\n      return { regex: new RegExp(`^${escaped}$`), isRegex: false, isWildcard: true };\n    } catch {\n      return { regex: null, isRegex: false, isWildcard: false };\n    }\n  }\n\n  // Implicit regex: contains regex-special chars (not wildcards)\n  if (/[.+^${}()|[\\]\\\\]/.test(pattern)) {\n    try {\n      return { regex: new RegExp(pattern), isRegex: true, isWildcard: false };\n    } catch {\n      return { regex: null, isRegex: false, isWildcard: false };\n    }\n  }\n\n  return { regex: null, isRegex: false, isWildcard: false };\n}\n\n/**\n * Test whether `text` matches `pattern`\n */\nexport function matchPattern(text: string, pattern: string): PatternResult {\n  if (!text || !pattern) {\n    return { matched: false, matchType: 'exact' };\n  }\n\n  const { regex, isRegex, isWildcard } = parsePattern(pattern);\n\n  if (regex) {\n    return {\n      matched: regex.test(text),\n      matchType: isRegex ? 'regex' : 'wildcard',\n    };\n  }\n\n  // Exact match\n  return { matched: text === pattern, matchType: 'exact' };\n}\n\n/**\n * Test pattern against multiple identifiers (id, value, label)\n */\nexport function matchAny(\n  identifiers: string[],\n  pattern: string\n): PatternResult {\n  for (const id of identifiers) {\n    const result = matchPattern(id, pattern);\n    if (result.matched) {\n      return result;\n    }\n  }\n  return { matched: false, matchType: 'exact' };\n}\n","/**\n * Template variable resolution utilities\n */\n\nimport { CellState } from '../types/state';\n\nexport interface VariableContext {\n  __from?: string;\n  __to?: string;\n  __interval?: string;\n  __interval_ms?: string;\n  _value?: any;\n  _label?: string;\n  _alias?: string;\n  _rule?: string;\n  _level?: number;\n  _color?: string;\n  _formattedValue?: string;\n  [key: string]: any;\n}\n\n/**\n * Replace custom flowcharting variables in text\n * Supports both ${var} and $var syntax\n */\nexport function replaceCustomVariables(\n  text: string,\n  vars: VariableContext\n): string {\n  let result = text;\n  for (const [key, value] of Object.entries(vars)) {\n    if (value === undefined || value === null) {\n      continue;\n    }\n    const formatted = formatVariableValue(value);\n    result = result.replace(new RegExp(`\\\\$\\\\{${key}\\\\}`, 'g'), formatted);\n    result = result.replace(new RegExp(`\\\\$${key}\\\\b`, 'g'), formatted);\n  }\n  return result;\n}\n\n/**\n * Create a variable context from a CellState\n */\nexport function createVariableContext(\n  state: CellState,\n  additional?: Record<string, any>\n): VariableContext {\n  return {\n    _value: state.value,\n    _label: state.cellId,\n    _alias: state.ruleName,\n    _rule: state.ruleName,\n    _level: state.level,\n    _color: state.color,\n    _formattedValue: state.formattedValue || String(state.value),\n    ...additional,\n  };\n}\n\n/**\n * Resolve a template expression with variables\n */\nexport function resolveExpression(\n  expression: string,\n  context: VariableContext\n): string {\n  return replaceCustomVariables(expression, context);\n}\n\n/**\n * Resolve link URL with state variables and Grafana replaceVariables\n */\nexport function resolveLinkVariables(\n  url: string,\n  state: CellState,\n  replaceVariables: (str: string) => string,\n  additional?: Record<string, any>\n): string {\n  const context = createVariableContext(state, additional);\n  let resolved = replaceVariables(url);\n  resolved = replaceCustomVariables(resolved, context);\n  return resolved;\n}\n\n/**\n * Format a variable value to string for display\n */\nfunction formatVariableValue(value: any): string {\n  if (typeof value === 'number') {\n    return value % 1 === 0 ? String(value) : value.toFixed(2);\n  }\n  if (typeof value === 'boolean') {\n    return value ? 'true' : 'false';\n  }\n  if (value instanceof Date) {\n    return value.toISOString();\n  }\n  if (Array.isArray(value)) {\n    return value.join(', ');\n  }\n  if (typeof value === 'object') {\n    return JSON.stringify(value);\n  }\n  return String(value);\n}\n\n/**\n * Extract variable names from a template string\n */\nexport function extractVariables(text: string): string[] {\n  const vars: string[] = [];\n  for (const m of text.matchAll(/\\$\\{([^}]+)\\}/g)) {\n    if (!vars.includes(m[1])) {\n      vars.push(m[1]);\n    }\n  }\n  for (const m of text.matchAll(/\\$([a-zA-Z_][a-zA-Z0-9_]*)/g)) {\n    if (!vars.includes(m[1])) {\n      vars.push(m[1]);\n    }\n  }\n  return vars;\n}\n\n/**\n * Format a value with unit\n */\nexport function formatValueWithUnit(\n  value: number,\n  unit?: string,\n  decimals = 2\n): string {\n  const formatted = value.toFixed(decimals);\n  if (!unit || unit === 'none' || unit === 'short') {\n    return formatShort(value, decimals);\n  }\n  switch (unit) {\n    case 'percent':\n    case 'percentunit':\n      return `${formatted}%`;\n    case 'bytes':\n      return formatBytes(value);\n    case 'ms':\n      return `${formatted}ms`;\n    case 's':\n      return `${formatted}s`;\n    default:\n      return `${formatted} ${unit}`;\n  }\n}\n\nfunction formatBytes(bytes: number): string {\n  const units = ['B', 'KB', 'MB', 'GB', 'TB'];\n  let value = bytes;\n  let i = 0;\n  while (value >= 1024 && i < units.length - 1) {\n    value /= 1024;\n    i++;\n  }\n  return `${value.toFixed(2)} ${units[i]}`;\n}\n\nfunction formatShort(value: number, decimals = 2): string {\n  const abs = Math.abs(value);\n  if (abs >= 1e9) {\n    return `${(value / 1e9).toFixed(decimals)}B`;\n  }\n  if (abs >= 1e6) {\n    return `${(value / 1e6).toFixed(decimals)}M`;\n  }\n  if (abs >= 1e3) {\n    return `${(value / 1e3).toFixed(decimals)}K`;\n  }\n  return value.toFixed(decimals);\n}\n","/**\n * XML parsing utilities\n */\n\nimport { decompress, isCompressed } from './compression';\nimport { log } from './logging';\n\n/**\n * Parse an XML string into a Document\n */\nexport function parseXml(xml: string): Document {\n  const parser = new DOMParser();\n  const doc = parser.parseFromString(xml, 'text/xml');\n  const error = doc.querySelector('parsererror');\n  if (error) {\n    throw new Error('Invalid XML: ' + error.textContent);\n  }\n  return doc;\n}\n\n/**\n * Extract the <mxGraphModel> node from an mxfile document,\n * handling compressed diagram content and multi-page files.\n *\n * @param content Raw content (could be raw XML, mxfile wrapper, or compressed)\n * @param pageIndex Which diagram page to use (0-based)\n * @returns The decompressed mxGraphModel XML string\n */\nexport function extractDiagramXml(content: string, pageIndex = 0): string {\n  const trimmed = content.trim();\n\n  // If the content itself is compressed, decompress first\n  if (isCompressed(trimmed)) {\n    const decompressed = decompress(trimmed);\n    return extractDiagramXml(decompressed, pageIndex);\n  }\n\n  // If it's already an mxGraphModel, return as-is\n  if (trimmed.startsWith('<mxGraphModel')) {\n    return trimmed;\n  }\n\n  // Parse XML\n  const doc = parseXml(trimmed);\n  const root = doc.documentElement;\n\n  // If root is mxGraphModel, serialize and return\n  if (root.nodeName === 'mxGraphModel') {\n    return new XMLSerializer().serializeToString(root);\n  }\n\n  // If root is mxfile, extract the diagram\n  if (root.nodeName === 'mxfile') {\n    const diagrams = root.getElementsByTagName('diagram');\n    if (diagrams.length === 0) {\n      throw new Error('No <diagram> found inside <mxfile>');\n    }\n\n    const idx = Math.min(pageIndex, diagrams.length - 1);\n    const diagramNode = diagrams[idx];\n    const diagramContent = diagramNode.textContent || '';\n\n    if (!diagramContent.trim()) {\n      // Diagram may contain child mxGraphModel directly\n      const child = diagramNode.getElementsByTagName('mxGraphModel')[0];\n      if (child) {\n        return new XMLSerializer().serializeToString(child);\n      }\n      throw new Error('Empty diagram content');\n    }\n\n    // The text content may be compressed\n    if (isCompressed(diagramContent.trim())) {\n      return decompress(diagramContent.trim());\n    }\n\n    // It may be uncompressed XML inside the diagram tag\n    try {\n      const innerDoc = parseXml(diagramContent.trim());\n      return new XMLSerializer().serializeToString(innerDoc.documentElement);\n    } catch {\n      // Not valid XML on its own  try URL-decoding\n      try {\n        const decoded = decodeURIComponent(diagramContent.trim());\n        return decoded;\n      } catch {\n        return diagramContent.trim();\n      }\n    }\n  }\n\n  // Unknown root\n  log.warn('Unknown XML root element:', root.nodeName);\n  return trimmed;\n}\n\n/**\n * Count the number of diagram pages in an mxfile\n */\nexport function getDiagramPageCount(content: string): number {\n  try {\n    const trimmed = content.trim();\n    if (isCompressed(trimmed)) {\n      const decompressed = decompress(trimmed);\n      return getDiagramPageCount(decompressed);\n    }\n    const doc = parseXml(trimmed);\n    if (doc.documentElement.nodeName === 'mxfile') {\n      return doc.documentElement.getElementsByTagName('diagram').length;\n    }\n    return 1;\n  } catch {\n    return 1;\n  }\n}\n\n/**\n * Get page names from an mxfile\n */\nexport function getDiagramPageNames(content: string): string[] {\n  try {\n    const trimmed = content.trim();\n    if (isCompressed(trimmed)) {\n      const decompressed = decompress(trimmed);\n      return getDiagramPageNames(decompressed);\n    }\n    const doc = parseXml(trimmed);\n    if (doc.documentElement.nodeName === 'mxfile') {\n      const diagrams = doc.documentElement.getElementsByTagName('diagram');\n      const names: string[] = [];\n      for (let i = 0; i < diagrams.length; i++) {\n        names.push(diagrams[i].getAttribute('name') || `Page ${i + 1}`);\n      }\n      return names;\n    }\n    return ['Page 1'];\n  } catch {\n    return ['Page 1'];\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","if(typeof __WEBPACK_EXTERNAL_MODULE__8531__ === 'undefined') { var e = new Error(\"Cannot find module '@grafana/runtime'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8398__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Plugin entry point  registers the panel, options editors, and migration\n */\n\nimport { PanelPlugin } from '@grafana/data';\nimport { FlowchartPanel } from './components/FlowchartPanel';\nimport { FlowchartPanelOptions, DEFAULT_PANEL_OPTIONS, RuleOptions } from './types/options';\nimport { MXGRAPH_BASE_PATH } from './types/constants';\nimport { migrateOptions, migrateAngularPanel, isAngularFlowchartingPanel } from './utils/migration';\nimport { log } from './utils/logging';\nimport { RulesEditor } from './editors/RulesEditor';\nimport { registerFloorplanShapes } from './graph/FloorplanShapes';\n\n// ============================================================================\n// Load mxGraph globally\n// ============================================================================\n\nif (typeof window !== 'undefined' && typeof (window as any).mxGraph === 'undefined') {\n  try {\n    const mxgraph = require('mxgraph');\n    const mx = mxgraph({ mxBasePath: MXGRAPH_BASE_PATH });\n\n    (window as any).mxGraph = mx.mxGraph;\n    (window as any).mxUtils = mx.mxUtils;\n    (window as any).mxCodec = mx.mxCodec;\n    (window as any).mxCell = mx.mxCell;\n    (window as any).mxGeometry = mx.mxGeometry;\n    (window as any).mxEvent = mx.mxEvent;\n    (window as any).mxClient = mx.mxClient;\n    (window as any).mxConstants = mx.mxConstants;\n    (window as any).mxGraphModel = mx.mxGraphModel;\n    (window as any).mxPoint = mx.mxPoint;\n    (window as any).mxRectangle = mx.mxRectangle;\n    (window as any).mxShape = mx.mxShape;\n    (window as any).mxCellRenderer = mx.mxCellRenderer;\n\n    // Register Draw.io custom shapes (doors, etc.)\n    registerFloorplanShapes();\n\n    log.info('mxGraph loaded successfully');\n  } catch (error) {\n    log.error('Failed to load mxGraph:', error);\n  }\n}\n\n// ============================================================================\n// Panel Plugin Registration\n// ============================================================================\n\nexport const plugin = new PanelPlugin<FlowchartPanelOptions>(FlowchartPanel)\n  .setMigrationHandler((panel: any) => {\n    // Handle migration from Angular agenty-flowcharting-panel\n    if (isAngularFlowchartingPanel(panel)) {\n      const { options } = migrateAngularPanel(panel);\n      return options;\n    }\n    // Handle migration from older React options format\n    if (panel.options && !panel.options.flowcharts) {\n      const { options } = migrateOptions(panel.options);\n      return options;\n    }\n    return panel.options;\n  })\n  .setPanelOptions((builder) => {\n    // ---- Flowchart Source ----\n    // NOTE: Grafana builder API does NOT support array bracket paths like flowcharts[0].content.\n    // We use flat top-level paths and reconstruct the flowcharts array in FlowchartPanel.\n    builder\n      .addRadio({\n        path: 'sourceType',\n        name: 'Source Type',\n        category: ['Flowchart Source'],\n        defaultValue: 'xml',\n        settings: {\n          options: [\n            { value: 'xml', label: 'XML / Draw.io' },\n            { value: 'url', label: 'URL' },\n          ],\n        },\n      })\n      .addTextInput({\n        path: 'content',\n        name: 'Diagram Content',\n        category: ['Flowchart Source'],\n        description: 'Paste your Draw.io XML, compressed data, or SVG content',\n        defaultValue: '',\n        settings: {\n          useTextarea: true,\n          rows: 8,\n        },\n      })\n      .addTextInput({\n        path: 'sourceUrl',\n        name: 'Diagram URL',\n        category: ['Flowchart Source'],\n        description: 'URL to fetch diagram from (when Source Type is URL)',\n        defaultValue: '',\n        showIf: (config: any) => config.sourceType === 'url',\n      })\n      .addTextInput({\n        path: 'sourceName',\n        name: 'Flowchart Name',\n        category: ['Flowchart Source'],\n        defaultValue: 'Default',\n      });\n\n    // ---- Display ----\n    builder\n      .addSliderInput({\n        path: 'zoom.scale',\n        name: 'Initial Zoom Scale',\n        category: ['Display'],\n        defaultValue: 1,\n        settings: {\n          min: 0.1,\n          max: 3,\n          step: 0.1,\n        },\n      })\n      .addBooleanSwitch({\n        path: 'zoom.center',\n        name: 'Center Diagram',\n        category: ['Display'],\n        defaultValue: true,\n      })\n      .addBooleanSwitch({\n        path: 'zoom.lock',\n        name: 'Lock Zoom/Pan',\n        category: ['Display'],\n        defaultValue: false,\n      })\n      .addBooleanSwitch({\n        path: 'zoom.enableWheel',\n        name: 'Enable Wheel Zoom',\n        category: ['Display'],\n        defaultValue: true,\n      })\n      .addBooleanSwitch({\n        path: 'zoom.enablePan',\n        name: 'Enable Pan',\n        category: ['Display'],\n        defaultValue: true,\n      })\n      .addBooleanSwitch({\n        path: 'background.transparent',\n        name: 'Transparent Background',\n        category: ['Display'],\n        defaultValue: true,\n      })\n      .addColorPicker({\n        path: 'background.color',\n        name: 'Background Color',\n        category: ['Display'],\n        defaultValue: '#ffffff',\n        showIf: (config: any) => !config.background?.transparent,\n      });\n\n    // ---- Tooltips ----\n    builder\n      .addBooleanSwitch({\n        path: 'tooltip.enabled',\n        name: 'Enable Tooltips',\n        category: ['Tooltips'],\n        defaultValue: true,\n      })\n      .addBooleanSwitch({\n        path: 'tooltip.showValue',\n        name: 'Show Value',\n        category: ['Tooltips'],\n        defaultValue: true,\n        showIf: (config: any) => config.tooltip?.enabled,\n      })\n      .addBooleanSwitch({\n        path: 'tooltip.showMetric',\n        name: 'Show Metric Name',\n        category: ['Tooltips'],\n        defaultValue: true,\n        showIf: (config: any) => config.tooltip?.enabled,\n      })\n      .addBooleanSwitch({\n        path: 'tooltip.showGraph',\n        name: 'Show Sparkline Graph',\n        category: ['Tooltips'],\n        defaultValue: false,\n        showIf: (config: any) => config.tooltip?.enabled,\n      })\n      .addBooleanSwitch({\n        path: 'tooltip.showTimestamp',\n        name: 'Show Timestamp',\n        category: ['Tooltips'],\n        defaultValue: false,\n        showIf: (config: any) => config.tooltip?.enabled,\n      });\n\n    // ---- Rules (custom editor) ----\n    builder.addCustomEditor({\n      id: 'rules',\n      path: 'rules',\n      name: 'Rules',\n      category: ['Rules'],\n      defaultValue: [] as RuleOptions[],\n      editor: RulesEditor as any,\n    });\n\n    // ---- Editor ----\n    builder\n      .addTextInput({\n        path: 'editorUrl',\n        name: 'Draw.io Editor URL',\n        category: ['Draw.io Editor'],\n        defaultValue: 'https://embed.diagrams.net',\n      })\n      .addRadio({\n        path: 'editorTheme',\n        name: 'Editor Theme',\n        category: ['Draw.io Editor'],\n        defaultValue: 'light',\n        settings: {\n          options: [\n            { value: 'light', label: 'Light' },\n            { value: 'dark', label: 'Dark' },\n            { value: 'kennedy', label: 'Kennedy' },\n            { value: 'minimal', label: 'Minimal' },\n          ],\n        },\n      });\n\n    return builder;\n  });\n"],"names":["opts","name","this","__mxOutput","mxClient","VERSION","IS_IE","navigator","userAgent","indexOf","IS_IE6","IS_IE11","match","IS_EDGE","IS_QUIRKS","document","documentMode","IS_EM","createElement","VML_PREFIX","OFFICE_PREFIX","IS_NS","IS_OP","IS_OT","IS_SF","test","vendor","IS_ANDROID","appVersion","IS_IOS","platform","IS_GC","IS_CHROMEAPP","window","chrome","app","runtime","IS_FF","InstallTrigger","IS_MT","IS_VML","appName","toUpperCase","IS_SVG","NO_FO","createElementNS","IS_WIN","IS_MAC","IS_CHROMEOS","IS_TOUCH","documentElement","IS_POINTER","PointerEvent","IS_LOCAL","location","href","defaultBundles","isBrowserSupported","link","rel","doc","id","write","setAttribute","getElementsByTagName","appendChild","loadResources","fn","lan","pending","length","callback","i","mxResources","add","include","src","node","mxLoadResources","mxForceIncludes","mxResourceExtension","mxLoadStylesheets","mxBasePath","substring","basePath","mxImageBasePath","imageBasePath","mxLanguage","language","userLanguage","mxDefaultLanguage","defaultLanguage","mxLanguages","languages","namespaces","styleSheets","type","styleSheet","cssText","createStyleSheet","module","exports","undefined","mxLog","consoleName","TRACE","DEBUG","WARN","buffer","init","body","title","table","tbody","tr","td","style","verticalAlign","textarea","height","resize","value","compatMode","width","addButton","evt","info","content","mxUtils","getInnerHtml","debug","copy","err","alert","popup","h","w","innerHeight","innerWidth","clientHeight","clientWidth","mxWindow","Math","max","setMaximizable","setScrollable","setResizable","setClosable","destroyOnClose","elt","getElement","resizeHandler","sender","offsetHeight","addListener","mxEvent","RESIZE_END","MAXIMIZE","NORMALIZE","writeln","toString","lab","funct","button","isVisible","show","setVisible","visible","enter","string","Date","getTime","leave","t0","dt","apply","arguments","warn","visibility","scrollTop","scrollHeight","mxObjectIdentity","FIELD_NAME","counter","get","obj","ctor","getFunctionName","constructor","clear","mxDictionary","prototype","map","key","put","previous","remove","getKeys","result","push","getValues","visit","visitor","resources","extension","resourcesEncoded","loadDefaultBundle","loadSpecialBundle","isLanguageSupported","getDefaultBundle","basename","getSpecialBundle","dash","toLowerCase","mxConstants","NONE","defaultBundle","specialBundle","req","parse","getText","load","isReady","e","text","lines","split","charAt","index","idx","charCodeAt","replace","unescape","params","defaultValue","replacePlaceholders","c","parseInt","join","mxPoint","x","y","mxRectangle","call","equals","clone","setRect","getCenterX","getCenterY","rect","minX","min","minY","maxX","maxY","intersect","r1","r2","b1","b2","grow","amount","getPoint","rotate90","t","tmp","fromRectangle","mxEffects","animateChanges","graph","changes","done","maxStep","step","animate","isRequired","change","mxGeometryChange","mxTerminalChange","mxValueChange","mxChildChange","mxStyleChange","state","getView","getState","cell","child","model","isEdge","setOpacity","shape","scale","dx","geometry","dy","sx","sy","cellRenderer","redraw","cascadeOpacity","setTimeout","delay","opacity","childCount","getChildCount","getChildAt","childState","edges","getEdges","edgeState","fadeOut","from","isEnabled","f","parentNode","removeChild","errorResource","closeResource","errorImage","removeCursors","element","cursor","children","childNodes","getCurrentStyle","currentStyle","getComputedStyle","parseCssNumber","parseFloat","isNaN","setPrefixedStyle","prefix","hasScrollbars","overflow","bind","scope","eval","expr","_mxJavaScriptExpression","message","findNode","attr","nodeType","NODETYPE_ELEMENT","getAttribute","firstChild","nextSibling","str","trim","idx2","ltrim","array","forEach","splice","isNode","nodeName","attributeName","attributeValue","isAncestorNode","ancestor","parent","getChildNodes","importNode","allChildren","importNodeImplementation","newNode","attributes","createTextNode","nodeValue","createXmlDocument","implementation","createDocument","createMsXmlDocument","ActiveXObject","async","validateOnParse","resolveExternals","parseXml","DOMParser","xml","parseFromString","loadXML","clearSelection","selection","empty","getSelection","removeAllRanges","removeWhitespace","before","previousSibling","NODETYPE_TEXT","next","getTextContent","htmlEntities","s","newline","String","isVml","tagUrn","getXml","linefeed","getPrettyXml","XMLSerializer","serializeToString","tab","indent","ns","namespaceURI","NODETYPE_DOCUMENT","NODETYPE_DOCUMENT_FRAGMENT","NODETYPE_COMMENT","NODETYPE_CDATA","attrs","val","extractTextWithWhitespace","elems","blocks","ret","doExtract","elts","innerHTML","elem","replaceTrailingNewlines","pattern","postfix","innerText","textContent","setTextContent","getOuterHtml","outerHTML","ownerDocument","br","count","label","para","p","addTransparentBackgroundFilter","filter","linkAction","editor","action","pad","execute","linkInvoke","functName","arg","a","color","textDecoration","paddingLeft","getDocumentSize","b","d","fit","ds","left","offsetLeft","offsetWidth","offset","getDocumentScrollOrigin","sl","st","right","top","offsetTop","bottom","url","mxXmlRequest","send","onload","onerror","binary","timeout","ontimeout","headers","setRequestHeaders","request","setRequestHeader","setBinary","getAll","urls","remain","errors","status","getStatus","post","submit","target","simulate","loadInto","onreadystatechange","readyState","addEventListener","getValue","getNumber","Number","getColor","transients","shallow","equalPoints","equalEntries","removeDuplicates","arr","dict","extend","superCtor","output","toRadians","deg","PI","toDegree","rad","arcToCurves","x0","y0","angle","largeArcFlag","sweepFlag","fS","psai","abs","sds","ctx","cty","cpsi","cos","spsi","sin","rxd","ryd","rxdd","rydd","r1x","r2y","lamda","sqrt","seif","txd","tyd","tx","ty","atan2","s1","dr","sse","seg","ceil","segr","cpsir1","cpsir2","spsir1","spsir2","mc","ms","x2","y2","x3","y3","n","getBoundingBox","rotation","cx","p1","p2","p3","p4","getRotatedPoint","pt","y1","getPortConstraints","terminal","edge","source","STYLE_PORT_CONSTRAINT","STYLE_SOURCE_PORT_CONSTRAINT","STYLE_TARGET_PORT_CONSTRAINT","directions","returnValue","DIRECTION_MASK_NONE","STYLE_PORT_CONSTRAINT_ROTATION","STYLE_ROTATION","quad","DIRECTION_NORTH","DIRECTION_MASK_NORTH","DIRECTION_MASK_EAST","DIRECTION_MASK_SOUTH","DIRECTION_MASK_WEST","DIRECTION_WEST","DIRECTION_SOUTH","DIRECTION_EAST","reversePortConstraints","constraint","findNearestSegment","absolutePoints","last","current","dist","ptSegDistSq","getDirectedBounds","m","flipH","flipV","STYLE_DIRECTION","STYLE_FLIPH","STYLE_FLIPV","round","m2","getPerimeterPoint","pts","center","point","intersection","ip","distSq","rectangleIntersectsSegment","bounds","contains","intersects","tw","th","rw","rh","rx","ry","intersectsHotspot","hotspot","cy","start","STYLE_STARTSIZE","view","STYLE_HORIZONTAL","alpha","getOffset","container","scrollOffset","fixed","position","r","getBoundingClientRect","scrollLeft","wnd","defaultView","parentWindow","pageXOffset","pageYOffset","getScrollOrigin","includeAncestors","includeDocument","origin","convertPoint","chars","RegExp","rtrim","isNumeric","isFinite","isInteger","mod","x1","denom","ua","ub","px","py","projlenSq","dotprod","lenSq","ptLineDist","relativeCcw","ccw","createImage","imageNode","borderStyle","sortCells","cells","ascending","lookup","sort","o1","o2","mxCellPath","create","PATH_SEPARATOR","comp","compare","getStylename","stylename","getStylenames","pairs","indexOfStylename","tokens","pos","addStylename","removeStylename","removeAllStylenames","setCellStyles","beginUpdate","setStyle","getStyle","endUpdate","isValue","sep","setCellStyleFlags","flag","setStyleFlag","cont","getAlignmentAsPoint","align","valign","ALIGN_LEFT","ALIGN_RIGHT","ALIGN_TOP","ALIGN_BOTTOM","getSizeForString","fontSize","fontFamily","textWidth","fontStyle","DEFAULT_FONTSIZE","DEFAULT_FONTFAMILY","div","lineHeight","LINE_HEIGHT","FONT_BOLD","fontWeight","FONT_ITALIC","txtDecor","FONT_UNDERLINE","FONT_STRIKETHROUGH","display","zoom","whiteSpace","size","getViewXml","getModel","getRoot","eventsEnabled","isEventsEnabled","setEventsEnabled","drawPane","overlayPane","dialect","DIALECT_SVG","NS_SVG","canvas","cloneNode","translate","getTranslate","temp","mxTemporaryCellStates","mxCodec","encode","destroy","getScaleForPageCount","pageCount","pageFormat","border","availablePageWidth","PAGE_FORMAT_A4_PORTRAIT","availablePageHeight","graphBounds","getGraphBounds","sc","getScale","graphWidth","pagesAspectRatio","pageRoot","pagesAspectRatioSqrt","numRowPages","numColumnPages","scaleChange","currentTotalPages","numLoops","roundRowDownProportion","floor","roundColumnDownProportion","open","html","base","close","links","styles","outer","svg","ownerSVGElement","minWidth","minHeight","printScreen","print","focus","isInternalWindow","pre","prompt","confirm","error","icon","padding","img","makeDraggable","graphF","dragElement","autoscroll","scalePreview","highlightDropTargets","getDropTarget","dragSource","mxDragSource","dragOffset","TOOLTIP_VERTICAL_OFFSET","setGuidesEnabled","getGraphForEvent","createDragElement","createPreviewElement","DEFAULT_HOTSPOT","MIN_HOTSPOT_SIZE","MAX_HOTSPOT_SIZE","RENDERING_HINT_EXACT","RENDERING_HINT_FASTER","RENDERING_HINT_FASTEST","DIALECT_VML","DIALECT_MIXEDHTML","DIALECT_PREFERHTML","DIALECT_STRICTHTML","NS_XHTML","NS_XLINK","SHADOWCOLOR","VML_SHADOWCOLOR","SHADOW_OFFSET_X","SHADOW_OFFSET_Y","SHADOW_OPACITY","NODETYPE_ATTRIBUTE","NODETYPE_ENTITY_REFERENCE","NODETYPE_ENTITY","NODETYPE_PROCESSING_INSTRUCTION","NODETYPE_DOCUMENTTYPE","NODETYPE_NOTATION","DEFAULT_VALID_COLOR","DEFAULT_INVALID_COLOR","OUTLINE_HIGHLIGHT_COLOR","OUTLINE_HIGHLIGHT_STROKEWIDTH","HIGHLIGHT_STROKEWIDTH","HIGHLIGHT_SIZE","HIGHLIGHT_OPACITY","CURSOR_MOVABLE_VERTEX","CURSOR_MOVABLE_EDGE","CURSOR_LABEL_HANDLE","CURSOR_TERMINAL_HANDLE","CURSOR_BEND_HANDLE","CURSOR_VIRTUAL_BEND_HANDLE","CURSOR_CONNECT","HIGHLIGHT_COLOR","CONNECT_TARGET_COLOR","INVALID_CONNECT_TARGET_COLOR","DROP_TARGET_COLOR","VALID_COLOR","INVALID_COLOR","EDGE_SELECTION_COLOR","VERTEX_SELECTION_COLOR","VERTEX_SELECTION_STROKEWIDTH","EDGE_SELECTION_STROKEWIDTH","VERTEX_SELECTION_DASHED","EDGE_SELECTION_DASHED","GUIDE_COLOR","GUIDE_STROKEWIDTH","OUTLINE_COLOR","OUTLINE_STROKEWIDTH","HANDLE_SIZE","LABEL_HANDLE_SIZE","HANDLE_FILLCOLOR","HANDLE_STROKECOLOR","LABEL_HANDLE_FILLCOLOR","CONNECT_HANDLE_FILLCOLOR","LOCKED_HANDLE_FILLCOLOR","OUTLINE_HANDLE_FILLCOLOR","OUTLINE_HANDLE_STROKECOLOR","DEFAULT_TEXT_DIRECTION","WORD_WRAP","ABSOLUTE_LINE_HEIGHT","DEFAULT_FONTSTYLE","DEFAULT_STARTSIZE","DEFAULT_MARKERSIZE","DEFAULT_IMAGESIZE","ENTITY_SEGMENT","RECTANGLE_ROUNDING_FACTOR","LINE_ARCSIZE","ARROW_SPACING","ARROW_WIDTH","ARROW_SIZE","PAGE_FORMAT_A4_LANDSCAPE","PAGE_FORMAT_LETTER_PORTRAIT","PAGE_FORMAT_LETTER_LANDSCAPE","STYLE_PERIMETER","STYLE_SOURCE_PORT","STYLE_TARGET_PORT","STYLE_OPACITY","STYLE_FILL_OPACITY","STYLE_STROKE_OPACITY","STYLE_TEXT_OPACITY","STYLE_TEXT_DIRECTION","STYLE_OVERFLOW","STYLE_ORTHOGONAL","STYLE_EXIT_X","STYLE_EXIT_Y","STYLE_EXIT_DX","STYLE_EXIT_DY","STYLE_EXIT_PERIMETER","STYLE_ENTRY_X","STYLE_ENTRY_Y","STYLE_ENTRY_DX","STYLE_ENTRY_DY","STYLE_ENTRY_PERIMETER","STYLE_WHITE_SPACE","STYLE_FILLCOLOR","STYLE_POINTER_EVENTS","STYLE_SWIMLANE_FILLCOLOR","STYLE_MARGIN","STYLE_GRADIENTCOLOR","STYLE_GRADIENT_DIRECTION","STYLE_STROKECOLOR","STYLE_SEPARATORCOLOR","STYLE_STROKEWIDTH","STYLE_ALIGN","STYLE_VERTICAL_ALIGN","STYLE_LABEL_WIDTH","STYLE_LABEL_POSITION","STYLE_VERTICAL_LABEL_POSITION","STYLE_IMAGE_ASPECT","STYLE_IMAGE_ALIGN","STYLE_IMAGE_VERTICAL_ALIGN","STYLE_GLASS","STYLE_IMAGE","STYLE_IMAGE_WIDTH","STYLE_IMAGE_HEIGHT","STYLE_IMAGE_BACKGROUND","STYLE_IMAGE_BORDER","STYLE_NOLABEL","STYLE_NOEDGESTYLE","STYLE_LABEL_BACKGROUNDCOLOR","STYLE_LABEL_BORDERCOLOR","STYLE_LABEL_PADDING","STYLE_INDICATOR_SHAPE","STYLE_INDICATOR_IMAGE","STYLE_INDICATOR_COLOR","STYLE_INDICATOR_STROKECOLOR","STYLE_INDICATOR_GRADIENTCOLOR","STYLE_INDICATOR_SPACING","STYLE_INDICATOR_WIDTH","STYLE_INDICATOR_HEIGHT","STYLE_INDICATOR_DIRECTION","STYLE_SHADOW","STYLE_SEGMENT","STYLE_ENDARROW","STYLE_STARTARROW","STYLE_ENDSIZE","STYLE_SWIMLANE_LINE","STYLE_ENDFILL","STYLE_STARTFILL","STYLE_DASHED","STYLE_DASH_PATTERN","STYLE_FIX_DASH","STYLE_ROUNDED","STYLE_CURVED","STYLE_ARCSIZE","STYLE_ABSOLUTE_ARCSIZE","STYLE_SOURCE_PERIMETER_SPACING","STYLE_TARGET_PERIMETER_SPACING","STYLE_PERIMETER_SPACING","STYLE_SPACING","STYLE_SPACING_TOP","STYLE_SPACING_LEFT","STYLE_SPACING_BOTTOM","STYLE_SPACING_RIGHT","STYLE_ANCHOR_POINT_DIRECTION","STYLE_ELBOW","STYLE_FONTCOLOR","STYLE_FONTFAMILY","STYLE_FONTSIZE","STYLE_FONTSTYLE","STYLE_ASPECT","STYLE_AUTOSIZE","STYLE_FOLDABLE","STYLE_EDITABLE","STYLE_BACKGROUND_OUTLINE","STYLE_BENDABLE","STYLE_MOVABLE","STYLE_RESIZABLE","STYLE_RESIZE_WIDTH","STYLE_RESIZE_HEIGHT","STYLE_ROTATABLE","STYLE_CLONEABLE","STYLE_DELETABLE","STYLE_SHAPE","STYLE_EDGE","STYLE_JETTY_SIZE","STYLE_SOURCE_JETTY_SIZE","STYLE_TARGET_JETTY_SIZE","STYLE_LOOP","STYLE_ORTHOGONAL_LOOP","STYLE_ROUTING_CENTER_X","STYLE_ROUTING_CENTER_Y","SHAPE_RECTANGLE","SHAPE_ELLIPSE","SHAPE_DOUBLE_ELLIPSE","SHAPE_RHOMBUS","SHAPE_LINE","SHAPE_IMAGE","SHAPE_ARROW","SHAPE_ARROW_CONNECTOR","SHAPE_LABEL","SHAPE_CYLINDER","SHAPE_SWIMLANE","SHAPE_CONNECTOR","SHAPE_ACTOR","SHAPE_CLOUD","SHAPE_TRIANGLE","SHAPE_HEXAGON","ARROW_CLASSIC","ARROW_CLASSIC_THIN","ARROW_BLOCK","ARROW_BLOCK_THIN","ARROW_OPEN","ARROW_OPEN_THIN","ARROW_OVAL","ARROW_DIAMOND","ARROW_DIAMOND_THIN","ALIGN_CENTER","ALIGN_MIDDLE","TEXT_DIRECTION_DEFAULT","TEXT_DIRECTION_AUTO","TEXT_DIRECTION_LTR","TEXT_DIRECTION_RTL","DIRECTION_MASK_ALL","ELBOW_VERTICAL","ELBOW_HORIZONTAL","EDGESTYLE_ELBOW","EDGESTYLE_ENTITY_RELATION","EDGESTYLE_LOOP","EDGESTYLE_SIDETOSIDE","EDGESTYLE_TOPTOBOTTOM","EDGESTYLE_ORTHOGONAL","EDGESTYLE_SEGMENT","PERIMETER_ELLIPSE","PERIMETER_RECTANGLE","PERIMETER_RHOMBUS","PERIMETER_HEXAGON","PERIMETER_TRIANGLE","mxEventObject","properties","mxMouseEvent","sourceState","mxEventSource","eventSource","setEventSource","consumed","getName","getProperties","getProperty","isConsumed","consume","graphX","graphY","getEvent","getSource","isSource","getX","getClientX","getY","getClientY","getGraphX","getGraphY","getCell","isPopupTrigger","preventDefault","touches","isMouseEvent","eventListeners","getEventSource","removeListener","fireEvent","args","listen","updateListenerList","eventName","mxListenerList","entry","attachEvent","updateListener","listenerCount","removeEventListener","detachEvent","removeAllListeners","list","addGestureListeners","startListener","moveListener","endListener","removeGestureListeners","redirectMouseEvents","down","move","up","dblClick","fireMouseEvent","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","release","addMouseWheelListener","diff","evtCache","dx0","dy0","pointerId","clientX","clientY","PINCH_THRESHOLD","event","ctrlKey","deltaY","deltaX","disableContextMenu","srcElement","isTouchEvent","pointerType","MSPOINTER_TYPE_TOUCH","mozInputSource","isPenEvent","MSPOINTER_TYPE_PEN","isMultiTouchEvent","MSPOINTER_TYPE_MOUSE","isLeftMouseButton","which","buttons","isMiddleMouseButton","isRightMouseButton","isControlDown","isShiftDown","isMetaDown","isAltDown","shiftKey","altKey","metaKey","getMainEvent","changedTouches","stopPropagation","cancelBubble","LABEL_HANDLE","ROTATION_HANDLE","CUSTOM_HANDLE","VIRTUAL_HANDLE","ACTIVATE","RESIZE_START","RESIZE","MOVE_START","MOVE","MOVE_END","PAN_START","PAN","PAN_END","MINIMIZE","HIDE","SHOW","CLOSE","DESTROY","REFRESH","SIZE","SELECT","FIRED","FIRE_MOUSE_EVENT","GESTURE","TAP_AND_HOLD","GET","RECEIVE","CONNECT","DISCONNECT","SUSPEND","RESUME","MARK","ROOT","POST","OPEN","SAVE","BEFORE_ADD_VERTEX","ADD_VERTEX","AFTER_ADD_VERTEX","DONE","EXECUTE","EXECUTED","BEGIN_UPDATE","START_EDIT","END_UPDATE","END_EDIT","BEFORE_UNDO","UNDO","REDO","CHANGE","NOTIFY","LAYOUT_CELLS","CLICK","SCALE","TRANSLATE","SCALE_AND_TRANSLATE","UP","DOWN","ADD","REMOVE","CLEAR","ADD_CELLS","CELLS_ADDED","MOVE_CELLS","CELLS_MOVED","RESIZE_CELLS","CELLS_RESIZED","TOGGLE_CELLS","CELLS_TOGGLED","ORDER_CELLS","CELLS_ORDERED","REMOVE_CELLS","CELLS_REMOVED","GROUP_CELLS","UNGROUP_CELLS","REMOVE_CELLS_FROM_PARENT","FOLD_CELLS","CELLS_FOLDED","ALIGN_CELLS","LABEL_CHANGED","CONNECT_CELL","CELL_CONNECTED","SPLIT_EDGE","FLIP_EDGE","START_EDITING","EDITING_STARTED","EDITING_STOPPED","ADD_OVERLAY","REMOVE_OVERLAY","UPDATE_CELL_SIZE","ESCAPE","DOUBLE_CLICK","START","RESET","method","username","password","withCredentials","decodeSimulateValues","isBinary","responseText","getDocumentElement","responseXML","XMLHttpRequest","overrideMimeType","old","onbeforeunload","form","pars","decodeURIComponent","mxClipboard","STEPSIZE","insertCount","setCells","getCells","isEmpty","cut","removeCells","getSelectionCells","getExportableCells","getTopmostCells","cloneCells","paste","getImportableCells","delta","getDefaultParent","importCells","setSelectionCells","minimizable","movable","replaceNode","installMaximizeHandler","installMinimizeHandler","installCloseHandler","setMinimizable","setTitle","installMoveHandler","replaceChild","mxForm","className","mxImage","mxDivResizer","resizeWidth","resizeHeight","handlingResize","dropHandler","mouseDown","eventConsumer","evtName","me","mxToolbar","mxUndoableEdit","significant","mxUndoManager","closeImage","minimizeImage","normalizeImage","maximizeImage","resizeImage","minimumSize","contentHeightCorrection","touchAction","contentWrapper","activator","activate","hide","scrollable","activeWindow","zIndex","previousWindow","isResizable","resizable","startX","startY","dragHandler","setSize","minimize","getMinimumSize","marginLeft","minimized","maxDisplay","maximize","minSize","maximizable","maximized","minDisplay","docHeight","setLocation","closeImg","setImage","image","marginRight","marginTop","insertBefore","closable","getTable","addButtons","okFunct","cancelFunct","addText","input","addField","addCheckbox","checked","addTextarea","rows","addCombo","isMultiSelect","select","addOption","combo","isSelected","option","getDocumentWidth","getDocumentHeight","l","previewElement","previewOffset","enabled","currentGraph","currentDropTarget","currentPoint","currentGuide","currentHighlight","guidesEnabled","gridEnabled","dragElementZIndex","dragElementOpacity","checkEventSource","setEnabled","isGuidesEnabled","isGridEnabled","setGridEnabled","getCellAt","isActive","mouseMoveHandler","reset","dragExit","removeDragElement","removeListeners","stopDrag","startDrag","mouseMove","mouseUpHandler","mouseUp","pointerEvents","getElementForEvent","elementFromPoint","graphContainsEvent","dragEnter","dragOver","drop","isMouseDown","isMouseTrigger","mxGuide","graphHandler","getGuideStates","mxCellHighlight","panDx","panDy","autoScroll","scrollPointToVisible","autoExtend","isDropEnabled","highlight","isGridEnabledEvent","hideGuide","isEnabledForEvent","off","gridSize","snap","dropTarget","noReset","updateDefaultMode","addItem","pressedIcon","factoryMethod","initialClassName","mouseHandler","backgroundColor","menu","mxPopupMenu","currentImg","isMenuShowing","hideMenu","addActionCombo","options","selectedIndex","addSwitchMode","altIcon","selectedMode","defaultMode","selectMode","addMode","toggle","defaultFunction","domNode","resetMode","forced","addSeparator","addBreak","addLine","hr","undone","redone","isSignificant","notify","die","undo","redo","history","indexOfNextAdd","canUndo","edit","canRedo","undoableEditHappened","undoableEdit","shift","edits","mxUrlConverter","mxPanningManager","thread","active","tdx","tdy","t0x","t0y","scrollbars","mouseListener","stop","addMouseListener","mouseUpListener","createThread","setInterval","panGraph","getDx","getDy","panTo","handleMouseOut","damper","clearInterval","setTranslate","removeMouseListener","mxAutoSaveManager","changeHandler","graphModelChanged","setGraph","mxAnimation","mxMorphing","steps","ease","mxImageBundle","alt","images","mxImageExport","mxAbstractCanvas2D","converter","createUrlConverter","mxXmlCanvas2D","root","writeDefaults","mxSvgCanvas2D","styleEnabled","gradients","defs","createStyle","baseUrl","baseDomain","updateBaseUrl","protocol","host","pathname","lastIndexOf","getBaseUrl","setBaseUrl","getBaseDomain","setBaseDomain","isRelativeUrl","convert","submenuImage","useLeftButtonForPopup","itemCount","autoExpand","smartSeparators","labels","iconCls","noHover","willAddSeparator","containsItems","col1","col2","col3","paddingRight","textAlign","createSubmenu","currentSelection","eventReceiver","activeRow","hideSubmenu","showSubmenu","createRange","addCheckmark","item","backgroundImage","backgroundRepeat","backgroundPosition","row","force","showMenu","autoSaveDelay","autoSaveThrottle","autoSaveThreshold","ignoredChanges","lastSnapshot","save","isRunning","startAnimation","updateAnimation","stopAnimation","mxCellStatePreview","animateCell","recurse","getDelta","isVertex","moveState","stopRecursion","getOriginForCell","getParent","geo","getCellGeometry","relative","pgeo","putImage","fallback","getImage","includeOverlays","drawState","visitStatesRecursive","drawCellState","drawOverlays","getLinkForCellState","setLink","drawShape","drawText","mxShape","checkBounds","beforePaint","paint","afterPaint","restore","overlays","states","path","rotateHtml","lastX","lastY","moveOp","lineOp","quadOp","curveOp","closeOp","createState","fillAlpha","strokeAlpha","fillColor","gradientFillAlpha","gradientColor","gradientAlpha","gradientDirection","strokeColor","strokeWidth","dashed","dashPattern","fixDash","lineCap","lineJoin","miterLimit","fontColor","fontBackgroundColor","fontBorderColor","shadow","shadowColor","shadowAlpha","shadowDx","shadowDy","rotationCx","rotationCy","format","addOp","rotatePoint","theta","pop","rotate","setAlpha","setFillAlpha","setStrokeAlpha","setFillColor","setGradient","color1","color2","direction","alpha1","alpha2","setStrokeColor","setStrokeWidth","setDashed","setDashPattern","setLineCap","setLineJoin","setMiterLimit","setFontColor","setFontBackgroundColor","setFontBorderColor","setFontSize","setFontFamily","setFontStyle","setShadow","setShadowColor","setShadowAlpha","setShadowOffset","begin","moveTo","lineTo","quadTo","curveTo","arcTo","curves","end","textEnabled","compressed","toFixed","roundrect","ellipse","aspect","wrap","clip","dir","stroke","fill","fillAndStroke","useDomParser","useAbsoluteIds","matchHtmlAlignment","foEnabled","foAltText","foOffset","textOffset","imageOffset","strokeTolerance","minStrokeWidth","refCount","lineHeightCorrection","pointerEventsValue","fontMetricsPadding","cacheOffsetSize","hash","tagName","namespace","getAlternateText","fo","createAlternateContent","anchor","createGradientId","getSvgGradient","gradient","tmpId","getElementById","createSvgGradient","op","addNode","filled","stroked","updateFill","updateStroke","transform","createShadow","createTolerance","originalRoot","getCurrentStrokeWidth","sw","updateStrokeAttributes","createDashPattern","pat","tol","removeAttribute","setAttributeNS","convertHtml","xd","xb","adoptNode","ta","createDiv","div2","div3","updateText","updateTextNodes","addForeignObject","group","g","createCss","getTextCss","flex","block","box","yp","bg","ofl","fw","fh","bgc","lh","css","deco","plainText","createClip","updateFont","textHeight","addTextBackground","bbox","getBBox","ie","mxVmlCanvas2D","setStates","stencil","initStyles","mxStencil","desc","parseDescription","parseConstraints","rotatedHtmlBackground","vmlScale","createVmlElement","coordsize","strokeweight","strokecolor","createStroke","createFill","createTransparentFill","flip","endcap","joinstyle","miterlimit","dashstyle","getVmlDashStyle","tok","createShadowStroke","createShadowFill","cpx0","cpy0","qpx1","qpy1","cpx3","cpy3","cpx1","cpy1","cpx2","cpy2","createRect","margin","inner","wordWrap","rot","maxHeight","real_cos","real_sin","sizeDiv","oh","top_fix","left_fix","divParent","textpathok","v","tp","on","horizontal","vertical","guideX","guideY","rounded","tolerance","getGuideTolerance","createGuideShape","guide","mxPolyline","isDashed","isStateIgnored","tt","overrideX","stateX","valueX","overrideY","stateY","valueY","ttX","ttY","middle","snapX","centerAlign","override","getOverlayPane","snapY","snapDelta","points","getGuideColor","scrollWidth","antiAlias","minSvgStrokeWidth","boundingBox","svgStrokeTolerance","svgPointerEvents","shapePointerEvents","stencilPointerEvents","outline","useSvgBoundingBox","strokewidth","fillOpacity","strokeOpacity","isParseVml","isHtmlAllowed","getSvgScreenOffset","createSvg","createHtml","createVml","reconfigure","updateBoundsFromPoints","redrawShape","redrawHtmlShape","updateBoundingBox","lastChild","getLabelBounds","isPaintBoundsInverted","getLabelMargins","createVmlGroup","createCanvas","insertAdjacentHTML","destroyCanvas","createSvgCanvas","updateVmlContainer","createVmlCanvas","updateHtmlBounds","updateHtmlFilters","updateHtmlColors","isShadow","east","south","west","north","borderColor","borderWidth","setTransparentBackgroundImage","mxRefCount","releaseSvgGradients","oldGradients","strokeDrawn","updateTransform","configureCanvas","bb","createBoundingBox","createTransparentSvgRectangle","paintEdgeShape","paintVertexShape","getGradientBounds","getShapeRotation","paintBackground","paintForeground","getArcSize","paintGlassEffect","arc","isRounded","addPoints","arcSize","exclude","initialMove","pe","p0","slice","wp","nx1","ny1","nx2","ny2","resetStyles","spacing","startSize","endSize","startArrow","endArrow","glass","setCursor","getCursor","isRoundable","augmentBoundingBox","getRotation","getTextRotation","mxText","verticalTextRotation","grads","defaultLocalized","allowEval","constraints","w0","h0","bgNode","fgNode","conns","parseConstraint","perimeter","mxConnectionConstraint","evaluateTextAttribute","attribute","evaluateAttribute","loc","stack","computeAspect","minScale","drawChildren","disableShadow","drawNode","inverse","parseRegularly","pointCount","segs","childNode","childName","ps","arcsize","factor","mxStencilRegistry","getStencil","stencils","addStencil","mxMarker","markers","addMarker","createMarker","unitX","unitY","mxActor","mxCloud","mxRectangleShape","mxEllipse","mxDoubleEllipse","mxRhombus","mxArrow","arrowWidth","mxArrowConnector","arrowSpacing","family","spacingTop","spacingRight","spacingBottom","spacingLeft","background","clipped","labelPadding","textDirection","updateMargin","mxTriangle","mxHexagon","mxLine","mxImageShape","mxLabel","mxCylinder","mxConnector","mxSwimlane","mxGraphLayout","WeightedCellSorter","weightedValue","mxStackLayout","mxPartitionLayout","mxCompactTreeLayout","invert","mxRadialTreeLayout","mxFastOrganicLayout","mxCircleLayout","radius","mxParallelEdgeLayout","mxCompositeLayout","layouts","master","mxEdgeLabelLayout","mxGraphAbstractHierarchyCell","mxGraphHierarchyNode","connectsAsTarget","connectsAsSource","mxGraphHierarchyEdge","ids","mxGraphHierarchyModel","layout","vertices","roots","tightenToSource","getGraph","vertexMapper","edgeMapper","maxRank","internalVertices","getChildVertices","SOURCESCANSTARTRANK","createInternalCells","j","internalEdge","realEdges","realEdge","targetCell","getVisibleTerminal","internalTargetCell","mxSwimlaneModel","mxHierarchicalLayoutStage","mxMedianHybridCrossingReduction","MedianCellSorter","mxMinimumCycleRemover","mxCoordinateAssignment","intraCellSpacing","interRankCellSpacing","orientation","initialX","parallelEdgeSpacing","mxSwimlaneOrdering","mxHierarchicalLayout","deterministic","createArrow","widthFactor","endOffsetX","endOffsetY","createOpenArrow","diamond","swFactor","tk","redrawPath","events","hw","hh","prev","paintLine","paintCurvedLine","ix","iy","arrow","nx","ny","basex","basey","floorx","floory","p0x","p0y","p1x","p1y","p2x","p2y","p3x","p3y","p5x","p5y","getEdgeWidth","isMarkerStart","getStartArrowWidth","isMarkerEnd","getEndArrowWidth","startWidth","endWidth","edgeWidth","openEnded","isOpenEnded","markerStart","markerEnd","isArrowRounded","i0","orthx","orthy","fns","startNx","startNy","paintMarker","outStartX","outStartY","inEndX","inEndY","dx1","dy1","dist1","tmp1","dist2","strokeWidthFactor","angleFactor","outX","outY","inX","inY","c1x","c1y","c2x","c2y","inStartX","inStartY","ptX","ptY","widthArrowRatio","spaceX","spaceY","baseSpacingTop","baseSpacingBottom","baseSpacingLeft","baseSpacingRight","replaceLinefeeds","ignoreClippedStringSize","ignoreStringSize","textWidthPadding","lastValue","cacheEnabled","update","realHtml","fmt","getAutoDirection","redrawHtmlShapeWithCss3","updateSize","textDiv","updateHtmlFilter","updateHtmlTransform","exec","getContentNode","ow","updateInnerHtml","divs","unrotatedBoundingBox","getHtmlValue","updateValue","bd","enableWrap","maxWidth","getSpacing","mid","preserveImageAspect","useVml","imageSize","indicatorSize","indicatorSpacing","indicatorShape","indicator","indicatorColor","indicatorStrokeColor","indicatorGradientColor","indicatorDirection","paintImage","paintIndicator","getImageBounds","getIndicatorBounds","indicatorImage","hasChildNodes","getCylinderSize","isForeground","sourceMarker","targetMarker","getTitleSize","isHorizontal","shapeVertical","realHorizontal","realFlipH","realFlipV","getSwimlaneArcSize","swimlaneLine","paintRoundedSwimlane","paintSwimlane","paintSeparator","paintDivider","useBoundingBox","moveCell","resizeCell","getConstraint","getCurrentCellStyle","traverse","vertex","directed","func","visited","edgeCount","getEdgeCount","getEdgeAt","getTerminal","isAncestor","traverseAncestors","isVertexMovable","isCellMovable","isVertexIgnored","isCellVisible","isEdgeIgnored","setEdgeStyleEnabled","setOrthogonalEdge","getParentOffset","parentGeo","getGeometry","setEdgePoints","mxGeometry","setRelative","parentOffset","setGeometry","setVertexLocation","getVertexBounds","arrangeGroups","topBorder","rightBorder","bottomBorder","leftBorder","updateGroupBounds","nudge","rankIndex","marginBottom","keepFirstLocation","resizeParent","resizeParentMax","resizeLast","borderCollapse","allowGaps","pstate","getIndex","getParentSize","isLayer","currentRoot","getLayoutCells","c1","c2","geo1","geo2","fillValue","isSwimlane","getCellStyle","horz","childStyle","setChildGeometry","isCellCollapsed","updateParentGeometry","pgeo2","resizeVertices","other","getStartSize","maintainParentLocation","groupPadding","groupPaddingTop","groupPaddingRight","groupPaddingBottom","groupPaddingLeft","parentsChanged","moveTree","levelDistance","nodeDistance","resetEdges","prefHozEdgeSep","prefVertEdgeOff","minEdgeJetty","channelBuffer","edgeRouting","sortEdges","alignRanks","maxRankHeight","getConnections","findTreeRoots","Object","parentX","parentY","dfs","findRankHeights","setCellHeights","horizontalLayout","verticalLayout","moveNode","adjustParents","localEdgeProcessing","sortOutgoingEdges","e1","e2","end1","end2","rank","createNode","out","attachParent","layoutLeaf","offsetX","offsetY","siblingOffset","contour","upperHead","createLine","lowerHead","upperTail","lowerTail","sum","merge","total","upper","lower","bridge","a1","a2","line1","line2","line","processNodeOutgoing","parentCell","sortedCells","sortingCriterion","availableWidth","requiredWidth","edgeSpacing","currentXOffset","currentYOffset","maxYOffset","parentBounds","childCell","childBounds","getEdgesBetween","newPoints","angleOffset","rootx","rooty","autoRadius","rowMinX","rowMaxX","rowMinCenX","rowMaxCenX","rowRadi","rootBounds","centerX","centerY","vertexBounds","calcRowDims","maxLeftGrad","maxRightGrad","leftGrad","rightGrad","xLeftLimit","fullWidth","xProportion","totalTheta","averTheta","nextTheta","lastTheta","rowNum","rowHasChildren","useInputOrigin","disableEdgeStyle","forceConstant","forceConstantSquared","minDistanceLimit","maxDistanceLimit","minDistanceLimitSquared","initialTemp","temperature","maxIterations","iteration","vertexArray","dispX","dispY","cellLocation","radiusSquared","isMoveable","neighbours","indices","allowedToRun","initialBounds","getBoundingBoxFromGeometry","getOpposites","resetEdge","calcRepulsion","calcAttraction","calcPositions","reduceTemperature","minx","miny","moveCells","deltaLength","newXDisp","newYDisp","k","xDelta","yDelta","deltaLengthSquared","displacementX","displacementY","vertexCount","random","deltaLengthWithRadius","moveCircle","getRadius","circle","phi","checkOverlap","findParallels","parallels","addCell","getEdgeId","trg","route","scx","scy","len","placeLabels","avoid","labRect","dy2","dx2","minRank","nextLayerConnectedCells","previousLayerConnectedCells","getNextLayerConnectedCells","layer","getPreviousLayerConnectedCells","getGeneralPurposeVariable","setGeneralPurposeVariable","setX","setY","hashCode","getRankValue","otherNode","getCoreCell","isReversed","ranks","dfsCount","undirectedEdges","directedEdges","initialRank","startNodes","internalNode","internalNodes","startNodesCopy","edgesToBeMarked","layerDeterminingEdges","allEdgesScanned","minimumLayer","removedCell","currentMaxLayer","fixRanks","rankList","rootsArray","oldRootsArray","seen","dfsRoots","trackAncestors","seenNodes","extendedDfs","connectingEdge","rootId","outgoingEdges","targetNode","ancestors","childHash","hashCodeLength","ranksPerGroup","swimlanes","swimlaneIndex","ii","maxChainDfs","lowerRank","upperRank","chainCount","slIndex","incomingEdges","nestedBestRanks","currentBestCrossings","iterationsWithoutImprovement","maxNoImprovementIterations","calculateCrossings","weightedMedian","transpose","candidateCrossings","numRanks","totalCrossings","calculateRankCrossing","previousRank","tmpIndices","rankPosition","connectedCells","nodeIndices","otherCellRankPosition","concat","firstIndex","treeSize","tree","treeIndex","mainLoopIteration","improved","orderedCells","tempRank","leftCellAboveConnections","leftCellBelowConnections","rightCellAboveConnections","rightCellBelowConnections","leftAbovePositions","leftBelowPositions","rightAbovePositions","rightBelowPositions","leftCell","rightCell","totalCurrentCrossings","totalSwitchedCrossings","ik","downwardSweep","medianRank","rankValue","numCellsForRank","medianValues","reservedPositions","nextLevelConnectedCells","nextRankValue","sorterEntry","medianValue","arrayCount","medianPoint","leftMedian","rightMedian","unseenNodesArray","unseenNodes","modelRoots","seenNodesCopy","jettyPositions","limitX","currentXDelta","widestRank","rankTopY","rankBottomY","widestRankValue","rankWidths","rankY","fineTuning","nextLayerConnectedCache","previousLayerConnectedCache","printStatus","initialCoords","minNode","bestXDelta","medianPos","minPath","setCellLocations","nodeList","nodeWrapper","maxTries","cellWrapper","numNextLayerConnected","numPreviousLayerConnected","medianNextLevel","medianXValue","medianPreviousLevel","numConnectedNeighbours","currentPosition","cellMedian","positionChanged","leftLimit","rightLimit","connectedCell","connectedCellWrapper","rankMedianPosition","weightedValues","cellMap","currentCell","calculatedWeightedValue","leftBuffer","rightBuffer","collection","totalWeight","facade","calculateWidestRank","rankCoordinates","localX","boundsWarning","numEdges","lastRankMaxCellHeight","maxCellHeight","distanceToNextRank","referenceX","edgeStraight","refSegCount","upSegCount","downSegCount","upXPositions","downXPositions","currentX","nextX","repositionValid","rankArray","MAX_VALUE","edgeStyle","mxHierarchicalEdgeStyle","ORTHOGONAL","POLYLINE","CURVE","setEdgePosition","cellIndex","currentCells","currentRank","sorter","connectedEdgeCount","connectedEdges","connections","innerCell","connIndex","numActualEdges","parallelEdgeCount","jettys","layoutReversed","realSource","reversed","arrayOffset","jetty","modelSource","isPort","loopStart","loopLimit","loopDelta","positionX","topChannelY","bottomChannelY","modelTarget","realTarget","processReversedEdge","realCell","positionY","reversedOverSwimlane","cellId","STRAIGHT","mxSwimlaneLayout","mxGraphModel","currentEdit","createUndoableEdit","setRoot","mxRootChange","previousIndex","mxCollapseChange","collapsed","mxVisibleChange","mxCellAttributeChange","mxCell","onInit","moveParent","parentBorder","interHierarchySpacing","edgesCache","edgeSourceTermCache","edgesTargetTermCache","Array","rootsCopy","run","findRoots","best","maxDiff","fanOut","fanIn","cachedEdges","isCollapsed","terminalCache","term","hierarchyVertices","allVertexSet","filledVertexSet","filterDescendants","filledVertexSetEmpty","candidateRoots","vertexSet","cycleStage","layeringStage","crossingStage","placementStage","allVertices","currentComp","vertexID","edgeIsSource","netCount","isSource2","dummyVertexWidth","dummyVertices","getChildCells","insertVertex","layoutBounds","lane","childrenY","maxChildrenY","newGeo","leftGroupBorder","isValidAncestor","laneCounter","otherVertex","otherIndex","maintainEdgeParent","ignoreRelativeEdgeParent","createIds","nextId","updateLevel","endingUpdate","createRoot","isCreateIds","setCreateIds","insert","filterCells","getDescendants","rootChanged","oldRoot","cellAdded","isRoot","parentChanged","updateEdgeParents","getId","setId","createId","collision","updateEdgeParent","getNearestCommonAncestor","origin1","getOrigin","origin2","cell1","cell2","getParentPath","cellRemoved","parentForCellChanged","oldIndex","par","getChildren","getChildEdges","setTerminal","terminalChanged","setTerminals","terminalForCellChanged","insertEdge","removeEdge","getDirectedEdgeCount","outgoing","ignoredEdge","getIncomingEdges","getOutgoingEdges","incoming","includeLoops","tmp2","sources","targets","terminals","topmost","isConnectable","setValue","valueForCellChanged","valueChanged","geometryForCellChanged","styleForCellChanged","setCollapsed","collapsedStateForCellChanged","visibleStateForCellChanged","mergeChildren","to","cloneAllEdges","mapping","mergeChildrenImpl","getParents","parents","cloneCell","includeChildren","clones","cloneCellImpl","restoreClone","ident","cellCloned","cloneChild","connect","isConnect","connectable","mxTransient","newValue","setVertex","setEdge","setConnectable","setParent","removeFromParent","getEdgeIndex","isOutgoing","removeFromTerminal","hasAttribute","userObject","cloneValue","TRANSLATE_CONTROL_POINTS","alternateBounds","sourcePoint","targetPoint","swap","getTerminalPoint","setTerminalPoint","ct","fixedAspect","resolve","t1","t2","mxPerimeter","RectanglePerimeter","orthogonal","pi","beta","tan","EllipsePerimeter","det","xout1","xout2","yout1","yout2","xout","yout","pow","RhombusPerimeter","TrianglePerimeter","corner","HexagonPerimeter","pi2","mxPrintPreview","pageSelector","pageScale","mxStylesheet","putDefaultVertexStyle","createDefaultVertexStyle","putDefaultEdgeStyle","createDefaultEdgeStyle","mxCellState","absoluteOffset","mxGraphSelectionModel","mxSelectionChange","selectionModel","added","removed","mxCellEditor","zoomHandler","isEditing","editingCell","stopEditing","mxCellRenderer","autoOrigin","printOverlays","printControls","printBackgroundImage","targetWindow","clipping","getWindow","getDoctype","appendGraph","forcePageBreaks","keepOpen","previousInitializeOverlay","initializeOverlay","overlay","getDrawPane","initControl","control","handleEvents","clickHandler","isNewWindow","writeHead","currentScale","availableHeight","hpages","vpages","writePageSelector","createPageSelector","addPage","pageBreakAfter","addPageBreak","cov","getCoverPages","apx","getAppendices","pageNum","renderPage","addGraphFragment","insertBackgroundImage","closeDocument","writePostfix","js","pageNumber","pageBreakInside","innerDiv","viewport","useCssTransforms","previousContainer","getCanvas","backgroundPane","getBackgroundPane","realScale","graphEnabled","tempClip","rendering","orig","svgs","getLinkForCell","putCellStyle","getDefaultVertexStyle","getDefaultEdgeStyle","defaultStyle","tmpStyle","invalidStyle","invalid","visibleSourceState","visibleTargetState","terminalDistance","segments","unscaledWidth","unscaledHeight","getPerimeterBounds","setAbsoluteTerminalPoint","getVisibleTerminalState","setVisibleTerminalState","terminalState","getCellBounds","cellBounds","getPaintBounds","paintBounds","updateCachedBounds","setState","doneResource","updatingSelectionResource","singleSelection","isSingleSelection","setSingleSelection","changeSelection","setCell","getFirstSelectableCell","isCellSelectable","addCells","removeCell","trigger","modified","autoSize","selectText","emptyLabelText","escapeCancelsEditing","textNode","minResize","wordWrapPadding","blurEnabled","initialValue","contentEditable","isLegacyEditor","installListeners","applyValue","labelChanged","setAlign","getInitialValue","getEditingValue","getCurrentValue","isCancelEditingKeyEvent","focusLost","isStopEditingEvent","keyCode","keypressHandler","clearOnChange","getEmptyLabelText","keyupHandler","resizeThread","clearTimeout","isEnterStopsCellEditing","isEventSource","lw","bds","hpos","vpos","legacySpacing","isWrapping","getEditorBounds","isInvokesStopCellEditing","getBackgroundColor","absoluteRoot","startEditing","tooltipHandler","hideTooltip","bold","italic","isHideLabel","isSelectText","execCommand","cancel","initial","blur","prepareTextarea","getEditingCell","defaultShapes","defaultEdgeShape","defaultVertexShape","defaultTextShape","legacyControlPosition","forceControlClickHandler","registerShape","initializeShape","configureShape","createShape","getShapeConstructor","createIndicatorShape","getShape","getIndicatorShape","getIndicatorColor","getIndicatorGradientColor","getIndicatorImage","postConfigureShape","resolveColor","checkPlaceholderStyles","values","field","referenced","getSwimlane","swimlaneIndicatorColorAttribute","rstate","rshape","getLabelValue","getLabel","createLabel","isForceHtml","isHtmlLabel","getVerticalAlign","isLabelClipped","initializeLabel","forceGetCell","isLabelEvent","nativeDblClickEnabled","createCellOverlays","getCellOverlays","installCellOverlayListeners","createControl","getFoldingImage","foldingEnabled","createControlClickHandler","collapse","foldCells","innerNode","first","isShapeEvent","redrawLabel","wrapping","isTextShapeInvalid","nextScale","getTextScale","isClipping","vis","redrawLabelShape","check","property","rotateLabelBounds","redrawCellOverlays","getBounds","redrawControl","getControlBounds","insertStateAfter","htmlNode","shapes","getShapesForState","shapeChanged","selectionCellsHandler","updateHandler","isShapeInvalid","doRedrawShape","mxEdgeStyle","EntityRelation","segment","isSourceLeft","sourceGeometry","isTargetLeft","targetGeometry","getRoutingCenterY","xe","ye","dep","midY","Loop","transformControlPoint","getRoutingCenterX","ElbowConnector","SideToSide","TopToBottom","SegmentConnector","sourceScaled","targetScaled","controlHints","scalePointArray","scaleCellState","lastPushed","hint","pushPoint","lastInx","hints","currentTerm","currentPt","hozChan","vertChan","currentHint","fixedVertAlign","fixedHozAlign","inHozChan","inVertChan","orthBuffer","orthPointsFallback","dirVectors","wayPoints1","routePatterns","inlineRoutePatterns","vertexSeperations","limits","LEFT_MASK","TOP_MASK","RIGHT_MASK","BOTTOM_MASK","LEFT","TOP","RIGHT","BOTTOM","SIDE_MASK","CENTER_MASK","SOURCE_MASK","TARGET_MASK","VERTEX_MASK","getJettySize","OrthConnector","sourceEdge","targetEdge","sourceX","sourceY","sourceWidth","sourceHeight","targetX","targetY","targetWidth","targetHeight","sourceBuffer","targetBuffer","totalBuffer","tooShort","newRect","portConstraint","sourceCenX","sourceCenY","targetCenX","sourceTopDist","sourceLeftDist","sourceBottomDist","sourceRightDist","dirPref","horPref","vertPref","preferredHorizDist","preferredVertDist","prefOrdering","preferredOrderSet","sourceIndex","targetIndex","routePattern","currentIndex","lastOrientation","initialOrientation","currentOrientation","nextDirection","directionIndex","tar","sou","side","limit","souTar","getRoutePattern","mxStyleRegistry","putValue","mxGraphView","mxCurrentRootChange","isUp","mxGraph","renderHint","stylesheet","mouseListeners","multiplicities","imageBundles","createCellRenderer","setSelectionModel","createSelectionModel","setStylesheet","createStylesheet","createGraphView","graphModelChangeListener","createHandlers","revalidate","mxCellOverlay","tooltip","mxOutline","mxMultiplicity","validNeighbors","countError","typeError","validNeighborsAllowed","mxLayoutManager","undoHandler","beforeUndo","moveHandler","cellsMoved","cellsResized","mxSwimlaneManager","addEnabled","resizeEnabled","addHandler","isAddEnabled","cellsAdded","isResizeEnabled","isCellVisibleFn","oldValidateCellState","validateCellState","oldBounds","oldStates","getStates","oldScale","oldDoRedrawShape","self","oldPaint","resurse","setScale","resetValidationState","validateCell","setGraphBounds","deltas","mxGraphHandler","panHandler","suspended","updatePreview","updateHint","escapeHandler","refreshHandler","refreshThread","currentDx","currentDy","pBounds","getPreviewBounds","livePreviewUsed","setHandlesVisibleForCells","getHandledSelectionCells","keyHandler","isCloneEvent","isCellsCloneable","isCloneEnabled","cloning","checkPreview","mxPanningHandler","forcePanningHandler","isForcePanningEvent","gestureHandler","eo","isPinchEnabled","initialScale","mouseDownEvent","zoomGraph","mxPopupMenuHandler","inTolerance","mxCellMarker","validColor","invalidColor","mxSelectionCellsHandler","handlers","refresh","getSelectionModel","mxConnectionHandler","mxConstraintHandler","resetHandler","currentFocus","mxRubberband","forceRubberbandHandler","isForceRubberbandEvent","repaint","mxHandle","mxVertexHandler","livePreview","invalidate","validate","mxEdgeHandler","dirty","isRendering","mxElbowEdgeHandler","mxEdgeSegmentHandler","mxKeyHandler","normalKeys","shiftKeys","controlKeys","controlShiftKeys","keydownHandler","keyDown","mxTooltipHandler","mxCellTracker","highlightColor","repaintHandler","mxDefaultKeyHandler","handler","escape","hideProperties","mxDefaultPopupMenu","config","mxDefaultToolbar","mxEditor","actions","addActions","cycleAttributeValues","popupHandler","undoManager","createGraph","toolbar","createToolbar","configure","cycleAttributeName","EMPTY_POINT","updatingDocumentResource","captureDocumentGesture","optimizeVmlReflows","updateStyle","lastNode","lastHtmlNode","lastForegroundNode","lastForegroundHtmlNode","setCurrentRoot","sizeDidChange","scaleAndTranslate","previousScale","previousTranslate","viewStateChanged","removeState","includeEdges","invalidating","prevDisplay","placeholder","getEmptyBounds","validateBackground","createBackgroundPageShape","validateBackgroundImage","validateBackgroundPage","getBackgroundImage","redrawBackgroundImage","pageVisible","getBackgroundPageBounds","backgroundPageShape","isHideOnHover","updateCellState","stateValidated","pState","getChildOffsetForCell","updateVertexState","updateEdgeState","updateVertexLabelOffset","updateFixedTerminalPoints","updatePoints","updateFloatingTerminalPoints","updateEdgeBounds","updateEdgeLabelOffset","fg","keepEdgesInForeground","keepEdgesInBackground","updateFixedTerminalPoint","getConnectionConstraint","getFixedTerminalPoint","getConnectionPoint","updateBoundsFromStencil","asp","getEdgeStyle","getTerminalPort","srcBounds","trgBounds","ignoreScale","isLoopStyleEnabled","tc","defaultLoopStyle","isAllowEval","updateFloatingTerminalPoint","getFloatingTerminalPoint","getNextPoint","orth","isOrthogonal","getPerimeterFunction","opposite","gx","gy","getRelativePoint","totalLength","minDist","xSegment","ySegment","projlen","yDistance","setRendering","setAllowEval","getCellStates","getDecoratorPane","decoratorPane","isContainerEvent","isScrollEvent","outWidth","inWidth","outHeight","inHeight","fireGestureEvent","popupMenuHandler","endHandler","createHtmlPane","updateContainerStyle","onResize","updateHtmlCanvasSize","pane","createVmlPane","getTranslateForRoot","cellEditor","portsEnabled","doubleTapEnabled","doubleTapTimeout","doubleTapTolerance","lastTouchY","lastTouchTime","tapAndHoldEnabled","tapAndHoldDelay","tapAndHoldInProgress","tapAndHoldValid","initialTouchX","initialTouchY","defaultOverlap","defaultParent","alternateEdgeStyle","pageBreaksVisible","pageBreakColor","pageBreakDashed","minPageBreakDist","preferPageSize","escapeEnabled","invokesStopCellEditing","enterStopsCellEditing","useScrollbarsForPanning","exportEnabled","importEnabled","cellsLocked","cellsCloneable","cellsEditable","cellsDeletable","cellsMovable","edgeLabelsMovable","vertexLabelsMovable","dropEnabled","splitEnabled","cellsResizable","cellsBendable","cellsSelectable","cellsDisconnectable","autoSizeCells","autoSizeCellsOnAdd","ignoreScrollbars","translateToScrollPosition","timerAutoScroll","allowAutoPanning","maximumGraphBounds","minimumGraphSize","minimumContainerSize","maximumContainerSize","resizeContainer","allowNegativeCoordinates","constrainChildren","constrainRelativeChildren","extendParents","extendParentsOnAdd","extendParentsOnMove","recursiveResize","collapseToPreferredSize","zoomFactor","keepSelectionVisibleOnZoom","centerZoom","resetViewOnRootChange","resetEdgesOnResize","resetEdgesOnMove","resetEdgesOnConnect","allowLoops","multigraph","connectableEdges","allowDanglingEdges","cloneInvalidEdges","disconnectOnMove","labelsVisible","htmlLabels","swimlaneSelectionEnabled","swimlaneNesting","minFitScale","maxFitScale","collapsedImage","expandedImage","warningImage","alreadyConnectedResource","containsValidationErrorsResource","collapseExpandResource","createCellEditor","relatedTarget","createTooltipHandler","createSelectionCellsHandler","connectionHandler","createConnectionHandler","createGraphHandler","panningHandler","createPanningHandler","panningEnabled","createPopupMenuHandler","getStylesheet","getSelectionCellsForChanges","ignoreFn","processChange","updateSelection","removeSelectionCells","setDefaultParent","removeStateForCell","newParent","home","addCellOverlay","removeCellOverlay","removeCellOverlays","clearCellOverlays","setCellWarning","warning","isSelect","setSelectionCell","startEditingAtCell","getSelectionCell","isCellEditable","convertValueToString","cellLabelChanged","isAutoSizeCell","cellSizeUpdated","click","mxe","isTransparentClickEvent","selected","isCellSelected","isSwimlaneSelectionEnabled","getSwimlaneAt","isToggleEvent","reverse","selectCellForEvent","isSiblingSelected","tapAndHold","panningTrigger","marker","currentColor","markedState","mark","createEdgeState","panningManager","createPanningManager","getBorderSizes","borderLeftStyle","borderLeftWidth","paddingTop","borderTopStyle","borderTopWidth","borderRightStyle","borderRightWidth","paddingBottom","borderBottomStyle","borderBottomWidth","getPreferredPageSize","page","hCount","vCount","keepOrigin","ignoreWidth","ignoreHeight","getBorder","cssBorder","w1","h1","w2","h2","s2","doResizeContainer","updatePageBreaks","gb","horizontalCount","verticalCount","horizontalPageBreaks","verticalPageBreaks","drawPageBreaks","breaks","pageBreak","ignoreState","postProcessCellStyle","getImageFromBundles","encodeURIComponent","comma","setCellStyle","toggleCellStyle","toggleCellStyles","toggleCellStyleFlags","alignCells","param","flipEdge","addImageBundle","bundle","removeImageBundle","orderCells","back","cellsOrdered","groupCells","getCellsForGroup","createGroupCell","getBoundsForGroup","ungroupCells","getCellsForUngroup","removeCellsAfterUngroup","cellsRemoved","addAllEdges","removeCellsFromParent","moveGroup","getActualStartSize","allowInvalidEdges","keepPosition","trans","getEdgeValidationError","createVertex","createEdge","addEdge","absolute","constrain","parentState","zero","oldState","isAllowNegativeCoordinates","autoSizeCell","isExtendParentsOnAdd","isExtendParent","extendParent","constrainChild","cellConnected","updateCellSize","getDeletableCells","getAllEdges","disconnectTerminal","connected","tstate","splitEdge","newEdge","toggleCells","cellsToggled","checkFoldable","getFoldableCells","cellsFolded","isCellFoldable","swapBounds","willCollapse","updateAlternateBounds","getPreferredSizeForCell","allCells","ignoreChildren","cellStyle","gs2","resizeCells","isRecursiveResize","cellResized","ignoreRelative","resizeChildCells","constrainChildCells","scaleCell","isCellResizable","origCells","isCloneInvalidEdges","setAllowNegativeCoordinates","isDisconnectOnMove","isAllowDanglingEdges","isExtendParentsOnMove","disconnect","disconnectGraph","translateCell","getCellContainmentArea","getMaximumGraphBounds","sizeFirst","isConstrainRelativeChildren","isConstrainChild","overlap","getOverlap","getOutlineConstraint","getAllConnectionConstraints","setConnectionConstraint","connectCell","isPortsEnabled","getTerminalForPort","isCellDisconnectable","getCurrentRoot","enterGroup","isValidRoot","exitGroup","includeDescendants","addPoint","ignoreGrid","ignoreHorizontal","ignoreVertical","shiftPreview1","shiftPreview2","zoomIn","zoomOut","zoomActual","zoomTo","cw","ch","sh","scrollRectToVisible","zoomToRect","aspectFactor","rectRight","rectBottom","newHeight","deltaHeightBuffer","upperBuffer","newWidth","deltaWidthBuffer","newScale","scrollCellToVisible","tr2","isChanged","widthLimit","heightLimit","ddx","ddy","isCellConnectable","isLoop","isConstrainedEvent","isIgnoreTerminalEvent","validationAlert","isEdgeValid","isValidConnection","sourceOut","targetIn","validateEdge","validateGraph","context","isValid","getCellValidationError","outCount","inCount","rule","setBackgroundImage","isHtmlLabels","setHtmlLabels","getTooltip","tip","getHandler","getTooltipForNode","getTooltipForCell","getCursorForMouseEvent","getCursorForCell","swimlane","getSwimlaneDirection","isTransparentState","setBorder","isResizeContainer","setResizeContainer","isEscapeEnabled","setEscapeEnabled","setInvokesStopCellEditing","setEnterStopsCellEditing","isCellLocked","isCellsLocked","setCellsLocked","getCloneableCells","isCellCloneable","setCellsCloneable","canExportCell","canImportCell","isCellsSelectable","setCellsSelectable","isCellDeletable","isCellsDeletable","setCellsDeletable","isLabelMovable","isCellRotatable","getMovableCells","isCellsMovable","setCellsMovable","setPortsEnabled","getGridSize","setGridSize","getTolerance","setTolerance","isVertexLabelsMovable","setVertexLabelsMovable","isEdgeLabelsMovable","setEdgeLabelsMovable","isSwimlaneNesting","setSwimlaneNesting","setSwimlaneSelectionEnabled","isMultigraph","setMultigraph","isAllowLoops","setAllowDanglingEdges","setConnectableEdges","isConnectableEdges","setCloneInvalidEdges","setAllowLoops","setDisconnectOnMove","setDropEnabled","isSplitEnabled","setSplitEnabled","isCellsResizable","setCellsResizable","isTerminalPointMovable","isCellBendable","isCellsBendable","setCellsBendable","isCellsEditable","setCellsEditable","isCellsDisconnectable","setCellsDisconnectable","isValidSource","isValidTarget","setTooltips","setPanning","isAutoSizeCells","setAutoSizeCells","isExtendParents","setExtendParents","setExtendParentsOnAdd","setExtendParentsOnMove","setRecursiveResize","isConstrainChildren","setConstrainChildren","setConstrainRelativeChildren","isAllowOverlapParent","isValidDropTarget","isSplitTarget","hitsSwimlaneContent","getPointForEvent","addOffset","hit","getCellsBeyond","rightHalfpane","bottomHalfpane","isolate","isSelectionEmpty","getSelectionCount","addSelectionCell","addSelectionCells","removeSelectionCell","selectRegion","selectCellsForEvent","selectNextCell","selectCell","selectPreviousCell","selectParentCell","selectChildCell","isNext","isParent","isChild","sel","selectAll","descendants","selectVertices","selectGroups","selectCells","selectEdges","createHandler","createEdgeHandler","createVertexHandler","createElbowEdgeHandler","createEdgeSegmentHandler","listener","updateMouseEvent","getStateForTouchEvent","isEventIgnored","mouseEvent","lastEvent","mouseMoveRedirect","mouseUpRedirect","isSyntheticEventIgnored","detail","lastMouseX","lastMouseY","ignoreMouseEvents","isEventSourceIgnored","candidate","getEventState","currentTime","fireDoubleClick","lastTouchEvent","lastTouchX","doubleClickCounter","doubleClickFired","lastTouchCell","tapAndHoldThread","consumeMouseEvent","destroyed","graphRenderHint","showViewport","sizerSize","updateOnPan","sizerImage","forceVmlHandles","outlineGraphModelChanged","selectionBorder","redirect","redirect2","sizer","createSizer","setZoomEnabled","getSourceContainerSize","getOutlineOffset","getSourceGraphBounds","sourceScale","scaledGraphBounds","unscaledGraphBounds","unscaledFinderBounds","union","completeWidth","completeHeight","outlineScale","navView","scale2","scale3","allowHandleBoundsCheck","getTranslateForEvent","checkTerminal","checkNeighbors","sourceValue","targetValue","valid","checkType","attrValue","bubbling","isBubbling","setBubbling","hasLayout","getLayout","executeLayoutForCells","getCellsForChanges","getCellsForChange","addCellsWithLayout","addDescendantsWithLayout","addAncestorsWithLayout","sorted","layoutCells","bubble","executeLayout","setHorizontal","setAddEnabled","setResizeEnabled","isSwimlaneIgnored","isCellHorizontal","swimlaneAdded","parentHorizontal","resizeSwimlane","addEdges","translateState","revalidateState","maxCells","highlightEnabled","cloneEnabled","moveEnabled","handlesVisible","updateCursor","selectEnabled","removeEmptyParents","connectOnDrop","scrollOnMove","previewColor","htmlPreview","scaleGrid","rotationEnabled","maxLivePreview","allowLivePreview","setCloneEnabled","isMoveEnabled","setMoveEnabled","isSelectEnabled","setSelectEnabled","isRemoveCellsFromParent","setRemoveCellsFromParent","isPropagateSelectionCell","immediate","getInitialCellForEvent","isDelayedSelection","isHandled","selectDelayed","delayedSelection","cellWasClicked","initialCell","createPreviewShape","cellCount","addStates","ignore","opps","isCellMoving","useGuidesForEvent","vector","removeHint","roundLength","livePreviewActive","resetLivePreview","setHighlightColor","remote","updateLivePreview","updatePreviewShape","realState","tempState","originalPointerEvents","pt0","ptn","redrawHandles","resetPreviewStates","suspend","resume","setHandlesVisible","destroyShapes","guides","shouldRemoveCellsFromParent","shouldRemoveParent","useLeftButtonForPanning","usePopupTrigger","ignoreCell","previewEnabled","useGrid","pinchEnabled","maxScale","isPanningEnabled","setPanningEnabled","setPinchEnabled","isPanningTrigger","consumePanningTrigger","selectOnPopup","clearSelectionOnBackground","triggerX","triggerY","screenX","screenY","isSelectOnPopup","popupTrigger","getCellForPopupEvent","hotspotEnabled","validState","setHotspot","getHotspot","setHotspotEnabled","isHotspotEnabled","hasValidState","getValidState","getMarkedState","unmark","process","setCurrentState","isValidState","getMarkerColor","markCell","getStateToMark","maxHandlers","oldHandlers","isHandlerActive","updateParentHighlight","moveIconFront","moveIconBack","connectImage","targetConnectImage","createTarget","constraintHandler","waypointsEnabled","ignoreMouseDown","connectIconOffset","drillHandler","mouseDownCounter","movePreviewAway","outlineConnect","insertBeforeSource","isInsertBefore","isCreateTarget","setCreateTarget","iconState","redrawIcons","icons","isConnectableCell","isConnecting","validateConnection","getConnectImage","isMoveIconToFrontForState","createIcons","currentState","getIconPosition","destroyIcons","selectedIcon","isStartEvent","currentConstraint","sourceConstraint","waypoints","isImmediateConnectSource","isOutlineConnectEvent","clientLeft","clientTop","gridX","gridY","isHighlightAt","updateCurrentState","isCellEnabled","setFocus","convertWaypoint","snapToPreview","pt2","getTargetPerimeterPoint","getSourcePerimeterPoint","originalPoint","drawPreview","hitsIcon","updateIcons","realPoints","targetPerimeter","sourcePerimeter","isStopEvent","addWaypointForEvent","checkConstraints","getEdgeColor","terminalInserted","createTargetVertex","getAlignmentTolerance","pointImage","focusIcons","focusHighlight","currentFocusArea","focusPoints","getImageForConstraint","destroyFocusHighlight","isKeepFocusEvent","getCellForEvent","existingEdge","mouseleaveHandler","grid","mouse","minDistSq","hl","createHighlightShape","cp","defaultOpacity","sharedDiv","currentY","createMouseEvent","getPosition","setPosition","copyStyle","processEvent","getTotalRotation","flipPoint","snapPoint","isHtmlRequired","initShape","singleSizer","handleImage","parentHighlightEnabled","rotationRaster","rotationCursor","movePreviewToFront","manageSizers","constrainGroupByChildren","rotationHandleVSpacing","horizontalOffset","verticalOffset","selectionBounds","getSelectionBounds","createSelectionShape","sizers","labelShape","isRotationHandleVisible","rotationShape","customHandles","createCustomHandles","updateMinBounds","isCenteredEvent","minBounds","createParentHighlightShape","getSelectionColor","getSelectionStrokeWidth","isSelectionDashed","createSizerShape","isSizerVisible","moveSizerTo","getHandleForEvent","checkShape","real","isCustomHandleEvent","handle","isLivePreviewBorder","childOffsetX","childOffsetY","isGhostPreview","ghostPreview","createGhostPreview","preview","getRotationHandlePosition","startAngle","atan","startDist","hideSizers","edgeHandlers","checkTolerance","roundAngle","moveToFront","moveLabel","rotateVertex","resizeVertex","currentAlpha","raster","unscaledBounds","dx3","dy3","dx4","dy4","dx5","dy5","rotateCell","rotateClick","constrained","moveChildren","centered","cdx","cdy","ignoreHandles","getHandlePadding","getSizerBounds","isCustomHandleVisible","crs","da","isParentHighlightVisible","isDestroyed","parentHighlight","getSelectionBorderBounds","bends","removeEnabled","dblClickRemoveEnabled","mergeRemoveEnabled","straightRemoveEnabled","virtualBendsEnabled","virtualBendOpacity","preferHtml","snapToTerminals","manageLabelHandle","abspoints","getSelectionPoints","targetState","createBends","isVirtualBendsEnabled","virtualBends","createVirtualBends","createLabelHandleShape","initBend","isAddPointEvent","isRemovePointEvent","otherCell","isHandleVisible","bend","createHandleShape","removePoint","isHandleEnabled","labelHandleImage","isAddVirtualBendEvent","isTarget","isLabel","clonePreviewState","getSnapToTerminalTolerance","isSnapToTerminalsEvent","snapToPoint","snapToTerminal","getPreviewTerminalState","getPreviewPoints","updatePreviewState","targetConstraint","setPreviewColor","changeTerminalPoint","changePoints","isClone","addPointAt","getHandleFillColor","checkLabelHandle","xn","yn","bn","redrawInnerBends","destroyBends","flipEnabled","doubleClickOrientationResource","createVirtualBend","dblClickHandler","getCursorForBend","getCurrentPoints","pt1","rpts","straight","bindKey","code","bindShiftKey","bindControlKey","bindControlShiftKey","getFunction","isGraphEvent","boundFunction","ignoreTouchEvents","hideOnHover","setHideOnHover","getStateForEvent","stateSource","resetTimer","restart","keepOnTop","drawHighlight","getStrokeWidth","bindAction","createMenu","conditions","createConditions","addItems","condition","as","enabledCond","addAction","isCell","condNodes","insertFunction","pressed","addActionOption","mode","setMode","addPrototype","ptype","factory","installDropHandler","addVertex","horizontalFlow","edgeGeometry","sprite","loader","askZoomResource","lastSavedResource","currentFileResource","propertiesResource","tasksResource","helpResource","outlineResource","dblClickAction","swimlaneRequired","forcedInserting","templates","defaultEdge","defaultEdgeStyle","defaultGroup","groupBorderSize","filename","postParameterName","escapePostData","urlPost","urlImage","layoutDiagram","swimlaneSpacing","maintainSwimlanes","layoutSwimlanes","cycleAttributeIndex","tasks","tasksWindowImage","tasksTop","help","helpWindowImage","urlHelp","helpWidth","helpHeight","propertiesWidth","propertiesHeight","movePropertiesDialog","validating","isModified","setModified","getUrlImage","showProperties","showTasks","showHelp","showOutline","decode","resetHistory","resetFirstTime","cookie","actionname","addTemplate","template","getTemplate","installDblClickHandler","installUndoHandler","installDrillHandler","installChangeHandler","installInsertHandler","createPopupMenu","createSwimlaneManager","createLayoutManager","swimlaneMgr","layoutMgr","swimlaneLayout","createSwimlaneLayout","diagramLayout","createDiagramLayout","setGraphContainer","rubberband","insertHandler","gs","setToolbarContainer","setStatusContainer","tstamp","toLocaleString","setStatus","setTitleContainer","getTitle","treeLayout","getRootTitle","createGroup","readGraphModel","getUrlPost","data","writeGraphModel","postDiagram","swapStyles","second","createProperties","isPropertiesVisible","yField","xField","widthField","heightField","texts","okFunction","cancelFunction","createTasks","refreshTasks","frame","modename","consumeCycleAttribute","cycleAttribute","isConstrainedMoving","mxCodecRegistry","codecs","aliases","register","codec","classname","addAlias","codecname","getCodec","mxObjectCodec","objects","idrefs","elements","encodeDefaults","putObject","getObject","updateElements","addElement","Error","reference","enc","into","dec","encodeCell","isCellCodec","decodeCell","restoreStructures","decoder","insertIntoGraph","cloneTemplate","getFieldName","attributename","mapped","getAttributeName","fieldname","isExcluded","isReference","beforeEncode","encodeObject","afterEncode","encodeValue","writeAttribute","writePrimitiveAttribute","writeComplexAttribute","convertAttributeToXml","isBooleanAttribute","convertAttributeFromXml","isNumericAttribute","beforeDecode","decodeNode","afterDecode","decodeAttributes","decodeChildren","decodeAttribute","isIgnoredAttribute","processInclude","decodeChild","getFieldTemplate","addObjectValue","isWrite","ref","object","mxCellCodec","rootNode","decodeRoot","rootCell","mxModelCodec","mxRootChangeCodec","childRef","mxChildChangeCodec","mxTerminalChangeCodec","mxGenericChangeCodec","variable","mxGraphCodec","mxGraphViewCodec","mxStylesheetCodec","styleNode","getStringValue","mxDefaultKeyHandlerCodec","mxDefaultToolbarCodec","act","inc","mxDefaultPopupMenuCodec","decodeTemplates","decodeUi","setMapContainer","mxEditorCodec","Deflate","deflate","deflateRaw","gzip","Inflate","inflate","inflateRaw","ungzip","constants","zlib_deflate","utils","strings","msg","ZStream","Z_NO_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_OK","Z_STREAM_END","Z_DEFAULT_COMPRESSION","Z_DEFAULT_STRATEGY","Z_DEFLATED","assign","level","chunkSize","windowBits","memLevel","strategy","opt","raw","ended","chunks","strm","avail_out","deflateInit2","header","deflateSetHeader","dictionary","string2buf","Uint8Array","deflateSetDictionary","_dict_set","deflator","flush_mode","_flush_mode","next_in","avail_in","next_out","onData","subarray","deflateEnd","onEnd","chunk","flattenChunks","zlib_inflate","GZheader","Z_NEED_DICT","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","inflateInit2","inflateGetHeader","inflateSetDictionary","inflator","last_avail_out","inflateReset","next_out_utf8","utf8border","tail","utf8str","buf2string","set","inflateEnd","_has","hasOwnProperty","TypeError","STR_APPLY_UIA_OK","fromCharCode","__","_utf8len","q","TextEncoder","buf","m_pos","str_len","buf_len","TextDecoder","utf16buf","c_len","buf2binstring","adler","Z_PARTIAL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_BINARY","Z_TEXT","Z_UNKNOWN","crcTable","Uint32Array","makeTable","crc","_tr_init","_tr_stored_block","_tr_flush_block","_tr_tally","_tr_align","adler32","crc32","MAX_MATCH","MIN_LOOKAHEAD","INIT_STATE","BUSY_STATE","FINISH_STATE","errorCode","slide_hash","wsize","w_size","hash_size","head","HASH","hash_shift","hash_mask","flush_pending","pending_buf","pending_out","total_out","flush_block_only","block_start","strstart","put_byte","putShortMSB","read_buf","total_in","longest_match","cur_match","chain_length","max_chain_length","scan","best_len","prev_length","nice_match","_win","wmask","w_mask","strend","scan_end1","scan_end","good_match","lookahead","match_start","fill_window","_w_size","more","window_size","ins_h","deflate_stored","flush","have","min_block","pending_buf_size","used","bi_valid","matches","high_water","deflate_fast","hash_head","bflush","match_length","max_lazy_match","MIN_MATCH","sym_next","deflate_slow","max_insert","prev_match","match_available","Config","good_length","max_lazy","nice_length","max_chain","configuration_table","DeflateState","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","Uint16Array","HEAP_SIZE","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","MAX_BITS","heap","heap_len","heap_max","depth","sym_buf","lit_bufsize","sym_end","opt_len","static_len","bi_buf","deflateStateCheck","deflateResetKeep","data_type","deflateReset","deflateInit","old_flush","level_flags","hcrc","extra","comment","time","os","beg","gzhead_extra","bstate","deflate_huff","deflate_rle","dictLength","tmpDict","avail","deflateInfo","xflags","extra_len","BAD","_in","_out","dmax","whave","wnext","s_window","hold","bits","lcode","dcode","lmask","dmask","here","from_source","lencode","distcode","lenbits","distbits","dolen","sane","inflate_fast","inflate_table","HEAD","DICT","TYPE","TYPEDO","COPY_","LEN_","LEN","CHECK","MEM","zswap32","InflateState","havedict","flags","wbits","ncode","nlen","ndist","lens","work","lendyn","distdyn","was","inflateStateCheck","inflateResetKeep","Int32Array","inflateReset2","lenfix","distfix","virgin","fixedtables","sym","updatewindow","inflateInit","here_bits","here_op","here_val","last_bits","last_op","last_val","hbuf","order","inf_leave","dictid","inflateInfo","lbase","lext","dbase","dext","lens_index","codes","table_index","incr","low","mask","curr","huff","MAXBITS","offs","extra_lbits","extra_dbits","extra_blbits","bl_order","static_ltree","static_dtree","D_CODES","_dist_code","_length_code","base_length","base_dist","StaticTreeDesc","static_tree","extra_bits","extra_base","max_length","has_stree","static_l_desc","static_d_desc","static_bl_desc","TreeDesc","dyn_tree","stat_desc","max_code","d_code","put_short","send_bits","send_code","bi_reverse","res","gen_codes","next_code","init_block","LITERALS","END_BLOCK","bi_windup","smaller","_n2","_m2","pqdownheap","compress_block","ltree","dtree","lc","build_tree","stree","xbits","gen_bitlen","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","static_init_done","stored_len","LENGTH_CODES","L_CODES","tr_static_init","opt_lenb","static_lenb","max_blindex","block_mask","detect_data_type","BL_CODES","build_bl_tree","lcodes","dcodes","blcodes","send_all_trees","STATIC_TREES","bi_flush","FlowchartErrorBoundary","Component","props","super","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","console","render","details","componentStack","onClick","FlowchartPanel","replaceVariables","useMemo","DEFAULT_PANEL_OPTIONS","flowcharts","sourceName","sourceType","sourceUrl","download","setError","useState","zoomState","setZoomState","inspectorMode","activeIndex","activeFlowchart","navigate","hasMultiple","useFlowchartNavigation","ruleResults","metrics","useRulesEngine","series","rules","rulesRef","useRef","ruleResultsRef","handleGraphReady","useCallback","cellIds","cellLabels","results","log","computeCellStates","applyCellStates","containerRef","xgraph","useGraph","pageIndex","transparent","onError","onGraphReady","cellStates","useStateManager","handleZoomChange","FlowchartProvider","panel","FlowchartTabs","onSelect","FlowchartRenderer","zoomOptions","tooltipOptions","backgroundOptions","onZoomChange","InspectorOverlay","formats","getCellAtPoint","theme","useTheme2","showTooltip","useTooltip","handleClick","useClickHandler","currentCellRef","useZoom","lock","enableWheel","enablePan","enableDoubleClick","useEffect","getContainerCoords","handleMouseMove","handleMouseLeave","handleMouseClick","mxClickHandler","mouseEvt","getStyles","wrapper","graphContainer","FlowchartTooltip","colors","primary","tabBar","fc","activeTab","disabled","weak","secondary","main","tooltipRef","adjustedPos","setAdjustedPos","useLayoutEffect","el","showMetric","metric","ruleName","showValue","valueLabel","valueNumber","formattedValue","levelDot","levelText","getLevelName","showTimestamp","timestamp","showGraph","MiniGraph","createPortal","canvasRef","getContext","fields","gw","gh","clearRect","fillStyle","fillRect","range","strokeStyle","lineWidth","beginPath","closePath","drawSparkline","medium","setFilter","filteredIds","includes","onChange","cellLabel","stateInfo","dot","stateValue","footer","useContext","FlowchartContext","createContext","Map","Provider","frames","aggregation","timeField","find","FieldType","timestamps","metricField","fieldNameClean","number","num","grouped","groupByMetric","metricName","validValues","refId","aggregatedValue","aggregateValues","fieldName","columnName","alias","column","filtered","resolvedColumn","resolved","matched","matchPattern","refMatched","metricValues","numericValues","reduce","evaluateRule","findMatchingMetrics","allValues","gradientColors","gradientThresholds","evaluateGradientThreshold","evaluateThreshold","thresholds","applyValueMaps","valueMaps","applyRangeMaps","rangeMaps","formatValue","unit","decimals","ruleId","stateMap","resultByRuleId","lookupResult","linkMaps","some","when","shapeMaps","textMaps","eventMaps","ok","prevSize","processShapeMaps","processTextMaps","processLinkMaps","processEventMaps","newStates","shouldApply","getOrCreateState","existing","now","matchCells","identifiers","Boolean","sm","bgColor","hidden","tm","originalText","regexMatch","re","suffix","createVariableContext","replaceCustomVariables","originalValue","lm","linkTarget","em","animation","duration","applied","findCell","applyShapeState","originalValues","threshold","compareValues","comparator","invertLevel","getColorForLevel","defaultLevel","DEFAULT_COLORS","colorList","progress","colorIdx","nextColorIdx","interpolated","interpolateColor","rgb1","hexToRgb","rgb2","toHex","padStart","rgbToHex","hex","clean","operator","numA","numB","strA","strB","critical","animOptions","ANIMATION_TYPES","conditionOptions","MAPPING_CONDITIONS","EventMapEditor","maps","updated","InlineSwitch","currentTarget","Input","Select","o","Button","variant","_","targetOptions","LINK_TARGETS","LinkMapEditor","RangeMapEditor","aggOptions","AGGREGATION_TYPES","metricTypeOptions","METRIC_TYPES","RuleEditor","CollapsableSection","isOpen","section","metricType","ThresholdEditor","ShapeMapEditor","TextMapEditor","ValueMapEditor","RulesEditor","expandedId","setExpandedId","moveRule","findIndex","swapIdx","ruleItem","ruleHeader","toggleRule","ruleTitle","ruleIndex","expandIcon","ruleActions","cloned","cloneRule","removeRule","updateRule","newRule","createDefaultRule","COLOR_TARGETS","modeOptions","TEXT_REPLACE_MODES","comparatorOptions","COMPARATOR_TYPES","updateThreshold","updateColor","colorRow","colorLabel","ColorPicker","invertLabel","removeThreshold","newT","querySelectorAll","removeAnimation","injectStyles","eventState","applyAnimation","styleInjected","setProperty","classList","paintFn","Ctor","DoorLeft","_h","DoorRight","DoorDouble","halfW","extractDiagramXml","xmlDoc","MxGraphClass","readOnly","availW","availH","scaleX","scaleY","extractCellValue","labelMatch","loadContent","decodeDiagramContent","loadXmlIntoGraph","saveOriginalValues","fitGraphToContainer","getCellIds","getAllCellIds","getCellLabels","buildCellLabelMap","getShapeCells","getAllShapeCells","getOriginalValues","destroyGraph","resolvedUrl","resolveLinkVariables","startsWith","getLocationSrv","setActiveIndex","xgraphRef","XGraph","setCellIds","setCellLabels","onErrorRef","onGraphReadyRef","sizeRef","reload","processDataFrames","evaluateAllRules","clearAllAnimations","setTooltip","showTimer","hideTimer","TOOLTIP_DELAY_SHOW","TOOLTIP_DELAY_HIDE","hideImmediately","isPanning","translateX","translateY","emitChange","handleWheel","ZOOM_MIN","ZOOM_MAX","handleMouseDown","handleMouseUp","handleDblClick","handleKeyDown","passive","zoomToFit","resetZoom","MAPPING_TYPES","TEXT_TARGETS","SOURCE_TYPES","EDITOR_THEMES","MATCH_TYPES","noData","DEFAULT_EDITOR_URL","MXGRAPH_BASE_PATH","ZOOM_STEP","ZOOM_WHEEL_FACTOR","LOG_PREFIX","_ruleCounter","DEFAULT_FLOWCHART_SOURCE","DEFAULT_ZOOM","DEFAULT_TOOLTIP","customTemplate","DEFAULT_BACKGROUND","editorUrl","editorTheme","activeFlowchartIndex","atob","bytes","inflated","encoded","encoder","deflated","btoa","trimmed","formatValueWithUnit","strVal","currentLevel","LOG_LEVELS","shouldLog","noop","_args","flowchartsData","rulesData","oldOptions","warnings","migrateAngularPanel","isArray","success","oldRule","mapCondition","shapeData","sd","colorOn","textData","textReplace","textPattern","textOn","linkData","ld","linkUrl","linkParams","linkOn","eventData","ed","eventOn","valueData","vd","rangeData","rd","isGradient","oldColors","oldThresholds","migrateAngularRule","parsePattern","regex","isRegex","isWildcard","lastSlash","escaped","matchType","vars","entries","formatted","formatVariableValue","additional","_value","_label","_alias","_rule","_level","_color","_formattedValue","toISOString","JSON","stringify","expression","matchAll","formatShort","units","formatBytes","isCompressed","decompress","diagrams","diagramNode","diagramContent","innerDoc","getDiagramPageCount","getDiagramPageNames","names","querySelector","__WEBPACK_EXTERNAL_MODULE__6089__","__WEBPACK_EXTERNAL_MODULE__7781__","__WEBPACK_EXTERNAL_MODULE__8531__","__WEBPACK_EXTERNAL_MODULE__2007__","__WEBPACK_EXTERNAL_MODULE__5959__","__WEBPACK_EXTERNAL_MODULE__8398__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","mx","mxgraph","registerFloorplanShapes","plugin","PanelPlugin","setMigrationHandler","isAngularFlowchartingPanel","migrateOptions","setPanelOptions","builder","addRadio","category","settings","addTextInput","description","useTextarea","showIf","addSliderInput","addBooleanSwitch","addColorPicker","addCustomEditor"],"sourceRoot":""}